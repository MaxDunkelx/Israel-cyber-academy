var tD=Object.defineProperty;var rD=(t,e,r)=>e in t?tD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var $u=(t,e,r)=>rD(t,typeof e!="symbol"?e+"":e,r);function nD(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Ew(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var iy={exports:{}},Vh={},oy={exports:{}},qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE;function sD(){if(kE)return qt;kE=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function x(U){return U===null||typeof U!="object"?null:(U=p&&U[p]||U["@@iterator"],typeof U=="function"?U:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function _(U,M,X){this.props=U,this.context=M,this.refs=b,this.updater=X||v}_.prototype.isReactComponent={},_.prototype.setState=function(U,M){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,M,"setState")},_.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function R(){}R.prototype=_.prototype;function j(U,M,X){this.props=U,this.context=M,this.refs=b,this.updater=X||v}var k=j.prototype=new R;k.constructor=j,w(k,_.prototype),k.isPureReactComponent=!0;var F=Array.isArray,L=Object.prototype.hasOwnProperty,I={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function T(U,M,X){var Y,Z={},fe=null,ie=null;if(M!=null)for(Y in M.ref!==void 0&&(ie=M.ref),M.key!==void 0&&(fe=""+M.key),M)L.call(M,Y)&&!N.hasOwnProperty(Y)&&(Z[Y]=M[Y]);var me=arguments.length-2;if(me===1)Z.children=X;else if(1<me){for(var pe=Array(me),we=0;we<me;we++)pe[we]=arguments[we+2];Z.children=pe}if(U&&U.defaultProps)for(Y in me=U.defaultProps,me)Z[Y]===void 0&&(Z[Y]=me[Y]);return{$$typeof:t,type:U,key:fe,ref:ie,props:Z,_owner:I.current}}function P(U,M){return{$$typeof:t,type:U.type,key:M,ref:U.ref,props:U.props,_owner:U._owner}}function B(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function z(U){var M={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(X){return M[X]})}var O=/\/+/g;function D(U,M){return typeof U=="object"&&U!==null&&U.key!=null?z(""+U.key):M.toString(36)}function G(U,M,X,Y,Z){var fe=typeof U;(fe==="undefined"||fe==="boolean")&&(U=null);var ie=!1;if(U===null)ie=!0;else switch(fe){case"string":case"number":ie=!0;break;case"object":switch(U.$$typeof){case t:case e:ie=!0}}if(ie)return ie=U,Z=Z(ie),U=Y===""?"."+D(ie,0):Y,F(Z)?(X="",U!=null&&(X=U.replace(O,"$&/")+"/"),G(Z,M,X,"",function(we){return we})):Z!=null&&(B(Z)&&(Z=P(Z,X+(!Z.key||ie&&ie.key===Z.key?"":(""+Z.key).replace(O,"$&/")+"/")+U)),M.push(Z)),1;if(ie=0,Y=Y===""?".":Y+":",F(U))for(var me=0;me<U.length;me++){fe=U[me];var pe=Y+D(fe,me);ie+=G(fe,M,X,pe,Z)}else if(pe=x(U),typeof pe=="function")for(U=pe.call(U),me=0;!(fe=U.next()).done;)fe=fe.value,pe=Y+D(fe,me++),ie+=G(fe,M,X,pe,Z);else if(fe==="object")throw M=String(U),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return ie}function Q(U,M,X){if(U==null)return U;var Y=[],Z=0;return G(U,Y,"","",function(fe){return M.call(X,fe,Z++)}),Y}function ue(U){if(U._status===-1){var M=U._result;M=M(),M.then(function(X){(U._status===0||U._status===-1)&&(U._status=1,U._result=X)},function(X){(U._status===0||U._status===-1)&&(U._status=2,U._result=X)}),U._status===-1&&(U._status=0,U._result=M)}if(U._status===1)return U._result.default;throw U._result}var H={current:null},te={transition:null},K={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:te,ReactCurrentOwner:I};function ce(){throw Error("act(...) is not supported in production builds of React.")}return qt.Children={map:Q,forEach:function(U,M,X){Q(U,function(){M.apply(this,arguments)},X)},count:function(U){var M=0;return Q(U,function(){M++}),M},toArray:function(U){return Q(U,function(M){return M})||[]},only:function(U){if(!B(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},qt.Component=_,qt.Fragment=r,qt.Profiler=s,qt.PureComponent=j,qt.StrictMode=n,qt.Suspense=u,qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,qt.act=ce,qt.cloneElement=function(U,M,X){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Y=w({},U.props),Z=U.key,fe=U.ref,ie=U._owner;if(M!=null){if(M.ref!==void 0&&(fe=M.ref,ie=I.current),M.key!==void 0&&(Z=""+M.key),U.type&&U.type.defaultProps)var me=U.type.defaultProps;for(pe in M)L.call(M,pe)&&!N.hasOwnProperty(pe)&&(Y[pe]=M[pe]===void 0&&me!==void 0?me[pe]:M[pe])}var pe=arguments.length-2;if(pe===1)Y.children=X;else if(1<pe){me=Array(pe);for(var we=0;we<pe;we++)me[we]=arguments[we+2];Y.children=me}return{$$typeof:t,type:U.type,key:Z,ref:fe,props:Y,_owner:ie}},qt.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:i,_context:U},U.Consumer=U},qt.createElement=T,qt.createFactory=function(U){var M=T.bind(null,U);return M.type=U,M},qt.createRef=function(){return{current:null}},qt.forwardRef=function(U){return{$$typeof:l,render:U}},qt.isValidElement=B,qt.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:ue}},qt.memo=function(U,M){return{$$typeof:h,type:U,compare:M===void 0?null:M}},qt.startTransition=function(U){var M=te.transition;te.transition={};try{U()}finally{te.transition=M}},qt.unstable_act=ce,qt.useCallback=function(U,M){return H.current.useCallback(U,M)},qt.useContext=function(U){return H.current.useContext(U)},qt.useDebugValue=function(){},qt.useDeferredValue=function(U){return H.current.useDeferredValue(U)},qt.useEffect=function(U,M){return H.current.useEffect(U,M)},qt.useId=function(){return H.current.useId()},qt.useImperativeHandle=function(U,M,X){return H.current.useImperativeHandle(U,M,X)},qt.useInsertionEffect=function(U,M){return H.current.useInsertionEffect(U,M)},qt.useLayoutEffect=function(U,M){return H.current.useLayoutEffect(U,M)},qt.useMemo=function(U,M){return H.current.useMemo(U,M)},qt.useReducer=function(U,M,X){return H.current.useReducer(U,M,X)},qt.useRef=function(U){return H.current.useRef(U)},qt.useState=function(U){return H.current.useState(U)},qt.useSyncExternalStore=function(U,M,X){return H.current.useSyncExternalStore(U,M,X)},qt.useTransition=function(){return H.current.useTransition()},qt.version="18.3.1",qt}var TE;function Sw(){return TE||(TE=1,oy.exports=sD()),oy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE;function aD(){if(jE)return Vh;jE=1;var t=Sw(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,h){var f,p={},x=null,v=null;h!==void 0&&(x=""+h),u.key!==void 0&&(x=""+u.key),u.ref!==void 0&&(v=u.ref);for(f in u)n.call(u,f)&&!i.hasOwnProperty(f)&&(p[f]=u[f]);if(l&&l.defaultProps)for(f in u=l.defaultProps,u)p[f]===void 0&&(p[f]=u[f]);return{$$typeof:e,type:l,key:x,ref:v,props:p,_owner:s.current}}return Vh.Fragment=r,Vh.jsx=o,Vh.jsxs=o,Vh}var AE;function iD(){return AE||(AE=1,iy.exports=aD()),iy.exports}var a=iD(),Xm={},ly={exports:{}},zs={},cy={exports:{}},uy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE;function oD(){return CE||(CE=1,function(t){function e(te,K){var ce=te.length;te.push(K);e:for(;0<ce;){var U=ce-1>>>1,M=te[U];if(0<s(M,K))te[U]=K,te[ce]=M,ce=U;else break e}}function r(te){return te.length===0?null:te[0]}function n(te){if(te.length===0)return null;var K=te[0],ce=te.pop();if(ce!==K){te[0]=ce;e:for(var U=0,M=te.length,X=M>>>1;U<X;){var Y=2*(U+1)-1,Z=te[Y],fe=Y+1,ie=te[fe];if(0>s(Z,ce))fe<M&&0>s(ie,Z)?(te[U]=ie,te[fe]=ce,U=fe):(te[U]=Z,te[Y]=ce,U=Y);else if(fe<M&&0>s(ie,ce))te[U]=ie,te[fe]=ce,U=fe;else break e}}return K}function s(te,K){var ce=te.sortIndex-K.sortIndex;return ce!==0?ce:te.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,p=null,x=3,v=!1,w=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(te){for(var K=r(h);K!==null;){if(K.callback===null)n(h);else if(K.startTime<=te)n(h),K.sortIndex=K.expirationTime,e(u,K);else break;K=r(h)}}function F(te){if(b=!1,k(te),!w)if(r(u)!==null)w=!0,ue(L);else{var K=r(h);K!==null&&H(F,K.startTime-te)}}function L(te,K){w=!1,b&&(b=!1,R(T),T=-1),v=!0;var ce=x;try{for(k(K),p=r(u);p!==null&&(!(p.expirationTime>K)||te&&!z());){var U=p.callback;if(typeof U=="function"){p.callback=null,x=p.priorityLevel;var M=U(p.expirationTime<=K);K=t.unstable_now(),typeof M=="function"?p.callback=M:p===r(u)&&n(u),k(K)}else n(u);p=r(u)}if(p!==null)var X=!0;else{var Y=r(h);Y!==null&&H(F,Y.startTime-K),X=!1}return X}finally{p=null,x=ce,v=!1}}var I=!1,N=null,T=-1,P=5,B=-1;function z(){return!(t.unstable_now()-B<P)}function O(){if(N!==null){var te=t.unstable_now();B=te;var K=!0;try{K=N(!0,te)}finally{K?D():(I=!1,N=null)}}else I=!1}var D;if(typeof j=="function")D=function(){j(O)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Q=G.port2;G.port1.onmessage=O,D=function(){Q.postMessage(null)}}else D=function(){_(O,0)};function ue(te){N=te,I||(I=!0,D())}function H(te,K){T=_(function(){te(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){w||v||(w=!0,ue(L))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(te){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var ce=x;x=K;try{return te()}finally{x=ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,K){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ce=x;x=te;try{return K()}finally{x=ce}},t.unstable_scheduleCallback=function(te,K,ce){var U=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?U+ce:U):ce=U,te){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ce+M,te={id:f++,callback:K,priorityLevel:te,startTime:ce,expirationTime:M,sortIndex:-1},ce>U?(te.sortIndex=ce,e(h,te),r(u)===null&&te===r(h)&&(b?(R(T),T=-1):b=!0,H(F,ce-U))):(te.sortIndex=M,e(u,te),w||v||(w=!0,ue(L))),te},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(te){var K=x;return function(){var ce=x;x=K;try{return te.apply(this,arguments)}finally{x=ce}}}}(uy)),uy}var IE;function lD(){return IE||(IE=1,cy.exports=oD()),cy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RE;function cD(){if(RE)return zs;RE=1;var t=Sw(),e=lD();function r(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,m=1;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(c,d){o(c,d),o(c+"Capture",d)}function o(c,d){for(s[c]=d,c=0;c<d.length;c++)n.add(d[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function x(c){return u.call(p,c)?!0:u.call(f,c)?!1:h.test(c)?p[c]=!0:(f[c]=!0,!1)}function v(c,d,m,y){if(m!==null&&m.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return y?!1:m!==null?!m.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function w(c,d,m,y){if(d===null||typeof d>"u"||v(c,d,m,y))return!0;if(y)return!1;if(m!==null)switch(m.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function b(c,d,m,y,E,C,W){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=y,this.attributeNamespace=E,this.mustUseProperty=m,this.propertyName=c,this.type=d,this.sanitizeURL=C,this.removeEmptyString=W}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){_[c]=new b(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var d=c[0];_[d]=new b(d,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){_[c]=new b(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){_[c]=new b(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){_[c]=new b(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){_[c]=new b(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){_[c]=new b(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){_[c]=new b(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){_[c]=new b(c,5,!1,c.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function j(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var d=c.replace(R,j);_[d]=new b(d,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var d=c.replace(R,j);_[d]=new b(d,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var d=c.replace(R,j);_[d]=new b(d,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){_[c]=new b(c,1,!1,c.toLowerCase(),null,!1,!1)}),_.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){_[c]=new b(c,1,!1,c.toLowerCase(),null,!0,!0)});function k(c,d,m,y){var E=_.hasOwnProperty(d)?_[d]:null;(E!==null?E.type!==0:y||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(w(d,m,E,y)&&(m=null),y||E===null?x(d)&&(m===null?c.removeAttribute(d):c.setAttribute(d,""+m)):E.mustUseProperty?c[E.propertyName]=m===null?E.type===3?!1:"":m:(d=E.attributeName,y=E.attributeNamespace,m===null?c.removeAttribute(d):(E=E.type,m=E===3||E===4&&m===!0?"":""+m,y?c.setAttributeNS(y,d,m):c.setAttribute(d,m))))}var F=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),I=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),z=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),te=Symbol.iterator;function K(c){return c===null||typeof c!="object"?null:(c=te&&c[te]||c["@@iterator"],typeof c=="function"?c:null)}var ce=Object.assign,U;function M(c){if(U===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);U=d&&d[1]||""}return`
`+U+c}var X=!1;function Y(c,d){if(!c||X)return"";X=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Ce){var y=Ce}Reflect.construct(c,[],d)}else{try{d.call()}catch(Ce){y=Ce}c.call(d.prototype)}else{try{throw Error()}catch(Ce){y=Ce}c()}}catch(Ce){if(Ce&&y&&typeof Ce.stack=="string"){for(var E=Ce.stack.split(`
`),C=y.stack.split(`
`),W=E.length-1,de=C.length-1;1<=W&&0<=de&&E[W]!==C[de];)de--;for(;1<=W&&0<=de;W--,de--)if(E[W]!==C[de]){if(W!==1||de!==1)do if(W--,de--,0>de||E[W]!==C[de]){var he=`
`+E[W].replace(" at new "," at ");return c.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",c.displayName)),he}while(1<=W&&0<=de);break}}}finally{X=!1,Error.prepareStackTrace=m}return(c=c?c.displayName||c.name:"")?M(c):""}function Z(c){switch(c.tag){case 5:return M(c.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return c=Y(c.type,!1),c;case 11:return c=Y(c.type.render,!1),c;case 1:return c=Y(c.type,!0),c;default:return""}}function fe(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case N:return"Fragment";case I:return"Portal";case P:return"Profiler";case T:return"StrictMode";case D:return"Suspense";case G:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case z:return(c.displayName||"Context")+".Consumer";case B:return(c._context.displayName||"Context")+".Provider";case O:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Q:return d=c.displayName||null,d!==null?d:fe(c.type)||"Memo";case ue:d=c._payload,c=c._init;try{return fe(c(d))}catch{}}return null}function ie(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(d);case 8:return d===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function me(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function pe(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function we(c){var d=pe(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),y=""+c[d];if(!c.hasOwnProperty(d)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,C=m.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return E.call(this)},set:function(W){y=""+W,C.call(this,W)}}),Object.defineProperty(c,d,{enumerable:m.enumerable}),{getValue:function(){return y},setValue:function(W){y=""+W},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function Xe(c){c._valueTracker||(c._valueTracker=we(c))}function re(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var m=d.getValue(),y="";return c&&(y=pe(c)?c.checked?"true":"false":c.value),c=y,c!==m?(d.setValue(c),!0):!1}function Ze(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Fe(c,d){var m=d.checked;return ce({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??c._wrapperState.initialChecked})}function ge(c,d){var m=d.defaultValue==null?"":d.defaultValue,y=d.checked!=null?d.checked:d.defaultChecked;m=me(d.value!=null?d.value:m),c._wrapperState={initialChecked:y,initialValue:m,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function be(c,d){d=d.checked,d!=null&&k(c,"checked",d,!1)}function se(c,d){be(c,d);var m=me(d.value),y=d.type;if(m!=null)y==="number"?(m===0&&c.value===""||c.value!=m)&&(c.value=""+m):c.value!==""+m&&(c.value=""+m);else if(y==="submit"||y==="reset"){c.removeAttribute("value");return}d.hasOwnProperty("value")?Me(c,d.type,m):d.hasOwnProperty("defaultValue")&&Me(c,d.type,me(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(c.defaultChecked=!!d.defaultChecked)}function ve(c,d,m){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var y=d.type;if(!(y!=="submit"&&y!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+c._wrapperState.initialValue,m||d===c.value||(c.value=d),c.defaultValue=d}m=c.name,m!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,m!==""&&(c.name=m)}function Me(c,d,m){(d!=="number"||Ze(c.ownerDocument)!==c)&&(m==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+m&&(c.defaultValue=""+m))}var Re=Array.isArray;function ze(c,d,m,y){if(c=c.options,d){d={};for(var E=0;E<m.length;E++)d["$"+m[E]]=!0;for(m=0;m<c.length;m++)E=d.hasOwnProperty("$"+c[m].value),c[m].selected!==E&&(c[m].selected=E),E&&y&&(c[m].defaultSelected=!0)}else{for(m=""+me(m),d=null,E=0;E<c.length;E++){if(c[E].value===m){c[E].selected=!0,y&&(c[E].defaultSelected=!0);return}d!==null||c[E].disabled||(d=c[E])}d!==null&&(d.selected=!0)}}function nt(c,d){if(d.dangerouslySetInnerHTML!=null)throw Error(r(91));return ce({},d,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function vt(c,d){var m=d.value;if(m==null){if(m=d.children,d=d.defaultValue,m!=null){if(d!=null)throw Error(r(92));if(Re(m)){if(1<m.length)throw Error(r(93));m=m[0]}d=m}d==null&&(d=""),m=d}c._wrapperState={initialValue:me(m)}}function Le(c,d){var m=me(d.value),y=me(d.defaultValue);m!=null&&(m=""+m,m!==c.value&&(c.value=m),d.defaultValue==null&&c.defaultValue!==m&&(c.defaultValue=m)),y!=null&&(c.defaultValue=""+y)}function ye(c){var d=c.textContent;d===c._wrapperState.initialValue&&d!==""&&d!==null&&(c.value=d)}function Ee(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function et(c,d){return c==null||c==="http://www.w3.org/1999/xhtml"?Ee(d):c==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var lt,Lt=function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,m,y,E){MSApp.execUnsafeLocalFunction(function(){return c(d,m,y,E)})}:c}(function(c,d){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=d;else{for(lt=lt||document.createElement("div"),lt.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=lt.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;d.firstChild;)c.appendChild(d.firstChild)}});function mt(c,d){if(d){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=d;return}}c.textContent=d}var Mt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hr=["Webkit","ms","Moz","O"];Object.keys(Mt).forEach(function(c){hr.forEach(function(d){d=d+c.charAt(0).toUpperCase()+c.substring(1),Mt[d]=Mt[c]})});function Jt(c,d,m){return d==null||typeof d=="boolean"||d===""?"":m||typeof d!="number"||d===0||Mt.hasOwnProperty(c)&&Mt[c]?(""+d).trim():d+"px"}function Vr(c,d){c=c.style;for(var m in d)if(d.hasOwnProperty(m)){var y=m.indexOf("--")===0,E=Jt(m,d[m],y);m==="float"&&(m="cssFloat"),y?c.setProperty(m,E):c[m]=E}}var wr=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xr(c,d){if(d){if(wr[c]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(r(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(r(61))}if(d.style!=null&&typeof d.style!="object")throw Error(r(62))}}function sn(c,d){if(c.indexOf("-")===-1)return typeof d.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $n=null;function Ds(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var ma=null,pt=null,Wt=null;function cr(c){if(c=Eh(c)){if(typeof ma!="function")throw Error(r(280));var d=c.stateNode;d&&(d=um(d),ma(c.stateNode,c.type,d))}}function Sr(c){pt?Wt?Wt.push(c):Wt=[c]:pt=c}function Cn(){if(pt){var c=pt,d=Wt;if(Wt=pt=null,cr(c),d)for(c=0;c<d.length;c++)cr(d[c])}}function Hn(c,d){return c(d)}function Gl(){}var Oa=!1;function Kl(c,d,m){if(Oa)return c(d,m);Oa=!0;try{return Hn(c,d,m)}finally{Oa=!1,(pt!==null||Wt!==null)&&(Gl(),Cn())}}function Br(c,d){var m=c.stateNode;if(m===null)return null;var y=um(m);if(y===null)return null;m=y[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(c=c.type,y=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!y;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(r(231,d,typeof m));return m}var Ro=!1;if(l)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){Ro=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch{Ro=!1}function Mi(c,d,m,y,E,C,W,de,he){var Ce=Array.prototype.slice.call(arguments,3);try{d.apply(m,Ce)}catch(qe){this.onError(qe)}}var Vi=!1,Po=null,q=!1,ae=null,ee={onError:function(c){Vi=!0,Po=c}};function ne(c,d,m,y,E,C,W,de,he){Vi=!1,Po=null,Mi.apply(ee,arguments)}function oe(c,d,m,y,E,C,W,de,he){if(ne.apply(this,arguments),Vi){if(Vi){var Ce=Po;Vi=!1,Po=null}else throw Error(r(198));q||(q=!0,ae=Ce)}}function le(c){var d=c,m=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(m=d.return),c=d.return;while(c)}return d.tag===3?m:null}function Se(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function De(c){if(le(c)!==c)throw Error(r(188))}function ke(c){var d=c.alternate;if(!d){if(d=le(c),d===null)throw Error(r(188));return d!==c?null:c}for(var m=c,y=d;;){var E=m.return;if(E===null)break;var C=E.alternate;if(C===null){if(y=E.return,y!==null){m=y;continue}break}if(E.child===C.child){for(C=E.child;C;){if(C===m)return De(E),c;if(C===y)return De(E),d;C=C.sibling}throw Error(r(188))}if(m.return!==y.return)m=E,y=C;else{for(var W=!1,de=E.child;de;){if(de===m){W=!0,m=E,y=C;break}if(de===y){W=!0,y=E,m=C;break}de=de.sibling}if(!W){for(de=C.child;de;){if(de===m){W=!0,m=C,y=E;break}if(de===y){W=!0,y=C,m=E;break}de=de.sibling}if(!W)throw Error(r(189))}}if(m.alternate!==y)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?c:d}function je(c){return c=ke(c),c!==null?Ae(c):null}function Ae(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=Ae(c);if(d!==null)return d;c=c.sibling}return null}var Ge=e.unstable_scheduleCallback,st=e.unstable_cancelCallback,dt=e.unstable_shouldYield,Je=e.unstable_requestPaint,Ye=e.unstable_now,It=e.unstable_getCurrentPriorityLevel,lr=e.unstable_ImmediatePriority,ar=e.unstable_UserBlockingPriority,fr=e.unstable_NormalPriority,Ma=e.unstable_LowPriority,ui=e.unstable_IdlePriority,Ys=null,an=null;function Do(c){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Ys,c,void 0,(c.current.flags&128)===128)}catch{}}var kr=Math.clz32?Math.clz32:z0,lh=Math.log,U0=Math.LN2;function z0(c){return c>>>=0,c===0?32:31-(lh(c)/U0|0)|0}var uu=64,du=4194304;function Fo(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Xl(c,d){var m=c.pendingLanes;if(m===0)return 0;var y=0,E=c.suspendedLanes,C=c.pingedLanes,W=m&268435455;if(W!==0){var de=W&~E;de!==0?y=Fo(de):(C&=W,C!==0&&(y=Fo(C)))}else W=m&~E,W!==0?y=Fo(W):C!==0&&(y=Fo(C));if(y===0)return 0;if(d!==0&&d!==y&&(d&E)===0&&(E=y&-y,C=d&-d,E>=C||E===16&&(C&4194240)!==0))return d;if((y&4)!==0&&(y|=m&16),d=c.entangledLanes,d!==0)for(c=c.entanglements,d&=y;0<d;)m=31-kr(d),E=1<<m,y|=c[m],d&=~E;return y}function Lg(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bi(c,d){for(var m=c.suspendedLanes,y=c.pingedLanes,E=c.expirationTimes,C=c.pendingLanes;0<C;){var W=31-kr(C),de=1<<W,he=E[W];he===-1?((de&m)===0||(de&y)!==0)&&(E[W]=Lg(de,d)):he<=d&&(c.expiredLanes|=de),C&=~de}}function Qs(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Yl(){var c=uu;return uu<<=1,(uu&4194240)===0&&(uu=64),c}function Lo(c){for(var d=[],m=0;31>m;m++)d.push(c);return d}function Oo(c,d,m){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,d=31-kr(d),c[d]=m}function br(c,d){var m=c.pendingLanes&~d;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=d,c.mutableReadLanes&=d,c.entangledLanes&=d,d=c.entanglements;var y=c.eventTimes;for(c=c.expirationTimes;0<m;){var E=31-kr(m),C=1<<E;d[E]=0,y[E]=-1,c[E]=-1,m&=~C}}function Mo(c,d){var m=c.entangledLanes|=d;for(c=c.entanglements;m;){var y=31-kr(m),E=1<<y;E&d|c[y]&d&&(c[y]|=d),m&=~E}}var Yt=0;function Vo(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var $0,hu,H0,W0,q0,ch=!1,di=[],Wn=null,Va=null,Ba=null,Bo=new Map,pa=new Map,hi=[],Og="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function G0(c,d){switch(c){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":Va=null;break;case"mouseover":case"mouseout":Ba=null;break;case"pointerover":case"pointerout":Bo.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":pa.delete(d.pointerId)}}function Fs(c,d,m,y,E,C){return c===null||c.nativeEvent!==C?(c={blockedOn:d,domEventName:m,eventSystemFlags:y,nativeEvent:C,targetContainers:[E]},d!==null&&(d=Eh(d),d!==null&&hu(d)),c):(c.eventSystemFlags|=y,d=c.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),c)}function Mg(c,d,m,y,E){switch(d){case"focusin":return Wn=Fs(Wn,c,d,m,y,E),!0;case"dragenter":return Va=Fs(Va,c,d,m,y,E),!0;case"mouseover":return Ba=Fs(Ba,c,d,m,y,E),!0;case"pointerover":var C=E.pointerId;return Bo.set(C,Fs(Bo.get(C)||null,c,d,m,y,E)),!0;case"gotpointercapture":return C=E.pointerId,pa.set(C,Fs(pa.get(C)||null,c,d,m,y,E)),!0}return!1}function K0(c){var d=tc(c.target);if(d!==null){var m=le(d);if(m!==null){if(d=m.tag,d===13){if(d=Se(m),d!==null){c.blockedOn=d,q0(c.priority,function(){H0(m)});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Ui(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var m=fu(c.domEventName,c.eventSystemFlags,d[0],c.nativeEvent);if(m===null){m=c.nativeEvent;var y=new m.constructor(m.type,m);$n=y,m.target.dispatchEvent(y),$n=null}else return d=Eh(m),d!==null&&hu(d),c.blockedOn=m,!1;d.shift()}return!0}function Ql(c,d,m){Ui(c)&&m.delete(d)}function X0(){ch=!1,Wn!==null&&Ui(Wn)&&(Wn=null),Va!==null&&Ui(Va)&&(Va=null),Ba!==null&&Ui(Ba)&&(Ba=null),Bo.forEach(Ql),pa.forEach(Ql)}function Ua(c,d){c.blockedOn===d&&(c.blockedOn=null,ch||(ch=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,X0)))}function za(c){function d(E){return Ua(E,c)}if(0<di.length){Ua(di[0],c);for(var m=1;m<di.length;m++){var y=di[m];y.blockedOn===c&&(y.blockedOn=null)}}for(Wn!==null&&Ua(Wn,c),Va!==null&&Ua(Va,c),Ba!==null&&Ua(Ba,c),Bo.forEach(d),pa.forEach(d),m=0;m<hi.length;m++)y=hi[m],y.blockedOn===c&&(y.blockedOn=null);for(;0<hi.length&&(m=hi[0],m.blockedOn===null);)K0(m),m.blockedOn===null&&hi.shift()}var zi=F.ReactCurrentBatchConfig,Uo=!0;function Or(c,d,m,y){var E=Yt,C=zi.transition;zi.transition=null;try{Yt=1,uh(c,d,m,y)}finally{Yt=E,zi.transition=C}}function Vg(c,d,m,y){var E=Yt,C=zi.transition;zi.transition=null;try{Yt=4,uh(c,d,m,y)}finally{Yt=E,zi.transition=C}}function uh(c,d,m,y){if(Uo){var E=fu(c,d,m,y);if(E===null)Yg(c,d,y,Jl,m),G0(c,y);else if(Mg(E,c,d,m,y))y.stopPropagation();else if(G0(c,y),d&4&&-1<Og.indexOf(c)){for(;E!==null;){var C=Eh(E);if(C!==null&&$0(C),C=fu(c,d,m,y),C===null&&Yg(c,d,y,Jl,m),C===E)break;E=C}E!==null&&y.stopPropagation()}else Yg(c,d,y,null,m)}}var Jl=null;function fu(c,d,m,y){if(Jl=null,c=Ds(y),c=tc(c),c!==null)if(d=le(c),d===null)c=null;else if(m=d.tag,m===13){if(c=Se(d),c!==null)return c;c=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null);return Jl=c,null}function dh(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(It()){case lr:return 1;case ar:return 4;case fr:case Ma:return 16;case ui:return 536870912;default:return 16}default:return 16}}var Js=null,mu=null,Ls=null;function hh(){if(Ls)return Ls;var c,d=mu,m=d.length,y,E="value"in Js?Js.value:Js.textContent,C=E.length;for(c=0;c<m&&d[c]===E[c];c++);var W=m-c;for(y=1;y<=W&&d[m-y]===E[C-y];y++);return Ls=E.slice(c,1<y?1-y:void 0)}function pu(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function fi(){return!0}function fh(){return!1}function qn(c){function d(m,y,E,C,W){this._reactName=m,this._targetInst=E,this.type=y,this.nativeEvent=C,this.target=W,this.currentTarget=null;for(var de in c)c.hasOwnProperty(de)&&(m=c[de],this[de]=m?m(C):C[de]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?fi:fh,this.isPropagationStopped=fh,this}return ce(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=fi)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=fi)},persist:function(){},isPersistent:fi}),d}var $a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xu=qn($a),mi=ce({},$a,{view:0,detail:0}),Bg=qn(mi),gu,$i,zo,Zl=ce({},mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pi,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==zo&&(zo&&c.type==="mousemove"?(gu=c.screenX-zo.screenX,$i=c.screenY-zo.screenY):$i=gu=0,zo=c),gu)},movementY:function(c){return"movementY"in c?c.movementY:$i}}),vu=qn(Zl),mh=ce({},Zl,{dataTransfer:0}),Y0=qn(mh),yu=ce({},mi,{relatedTarget:0}),wu=qn(yu),Q0=ce({},$a,{animationName:0,elapsedTime:0,pseudoElement:0}),Hi=qn(Q0),J0=ce({},$a,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Z0=qn(J0),em=ce({},$a,{data:0}),ph=qn(em),bu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ks={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rm(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=tm[c])?!!d[c]:!1}function pi(){return rm}var g=ce({},mi,{key:function(c){if(c.key){var d=bu[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=pu(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?ks[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pi,charCode:function(c){return c.type==="keypress"?pu(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?pu(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),A=qn(g),V=ce({},Zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),J=qn(V),_e=ce({},mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pi}),Pe=qn(_e),ot=ce({},$a,{propertyName:0,elapsedTime:0,pseudoElement:0}),mr=qn(ot),_n=ce({},Zl,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Zt=qn(_n),In=[9,13,27,32],mn=l&&"CompositionEvent"in window,xa=null;l&&"documentMode"in document&&(xa=document.documentMode);var Zs=l&&"TextEvent"in window&&!xa,ec=l&&(!mn||xa&&8<xa&&11>=xa),_u=" ",w_=!1;function b_(c,d){switch(c){case"keyup":return In.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function __(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Nu=!1;function JR(c,d){switch(c){case"compositionend":return __(d);case"keypress":return d.which!==32?null:(w_=!0,_u);case"textInput":return c=d.data,c===_u&&w_?null:c;default:return null}}function ZR(c,d){if(Nu)return c==="compositionend"||!mn&&b_(c,d)?(c=hh(),Ls=mu=Js=null,Nu=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return ec&&d.locale!=="ko"?null:d.data;default:return null}}var eP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N_(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!eP[c.type]:d==="textarea"}function E_(c,d,m,y){Sr(y),d=om(d,"onChange"),0<d.length&&(m=new xu("onChange","change",null,m,y),c.push({event:m,listeners:d}))}var xh=null,gh=null;function tP(c){z_(c,0)}function nm(c){var d=ju(c);if(re(d))return c}function rP(c,d){if(c==="change")return d}var S_=!1;if(l){var Ug;if(l){var zg="oninput"in document;if(!zg){var k_=document.createElement("div");k_.setAttribute("oninput","return;"),zg=typeof k_.oninput=="function"}Ug=zg}else Ug=!1;S_=Ug&&(!document.documentMode||9<document.documentMode)}function T_(){xh&&(xh.detachEvent("onpropertychange",j_),gh=xh=null)}function j_(c){if(c.propertyName==="value"&&nm(gh)){var d=[];E_(d,gh,c,Ds(c)),Kl(tP,d)}}function nP(c,d,m){c==="focusin"?(T_(),xh=d,gh=m,xh.attachEvent("onpropertychange",j_)):c==="focusout"&&T_()}function sP(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return nm(gh)}function aP(c,d){if(c==="click")return nm(d)}function iP(c,d){if(c==="input"||c==="change")return nm(d)}function oP(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var Ha=typeof Object.is=="function"?Object.is:oP;function vh(c,d){if(Ha(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var m=Object.keys(c),y=Object.keys(d);if(m.length!==y.length)return!1;for(y=0;y<m.length;y++){var E=m[y];if(!u.call(d,E)||!Ha(c[E],d[E]))return!1}return!0}function A_(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function C_(c,d){var m=A_(c);c=0;for(var y;m;){if(m.nodeType===3){if(y=c+m.textContent.length,c<=d&&y>=d)return{node:m,offset:d-c};c=y}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=A_(m)}}function I_(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?I_(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function R_(){for(var c=window,d=Ze();d instanceof c.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)c=d.contentWindow;else break;d=Ze(c.document)}return d}function $g(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}function lP(c){var d=R_(),m=c.focusedElem,y=c.selectionRange;if(d!==m&&m&&m.ownerDocument&&I_(m.ownerDocument.documentElement,m)){if(y!==null&&$g(m)){if(d=y.start,c=y.end,c===void 0&&(c=d),"selectionStart"in m)m.selectionStart=d,m.selectionEnd=Math.min(c,m.value.length);else if(c=(d=m.ownerDocument||document)&&d.defaultView||window,c.getSelection){c=c.getSelection();var E=m.textContent.length,C=Math.min(y.start,E);y=y.end===void 0?C:Math.min(y.end,E),!c.extend&&C>y&&(E=y,y=C,C=E),E=C_(m,C);var W=C_(m,y);E&&W&&(c.rangeCount!==1||c.anchorNode!==E.node||c.anchorOffset!==E.offset||c.focusNode!==W.node||c.focusOffset!==W.offset)&&(d=d.createRange(),d.setStart(E.node,E.offset),c.removeAllRanges(),C>y?(c.addRange(d),c.extend(W.node,W.offset)):(d.setEnd(W.node,W.offset),c.addRange(d)))}}for(d=[],c=m;c=c.parentNode;)c.nodeType===1&&d.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<d.length;m++)c=d[m],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var cP=l&&"documentMode"in document&&11>=document.documentMode,Eu=null,Hg=null,yh=null,Wg=!1;function P_(c,d,m){var y=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Wg||Eu==null||Eu!==Ze(y)||(y=Eu,"selectionStart"in y&&$g(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),yh&&vh(yh,y)||(yh=y,y=om(Hg,"onSelect"),0<y.length&&(d=new xu("onSelect","select",null,d,m),c.push({event:d,listeners:y}),d.target=Eu)))}function sm(c,d){var m={};return m[c.toLowerCase()]=d.toLowerCase(),m["Webkit"+c]="webkit"+d,m["Moz"+c]="moz"+d,m}var Su={animationend:sm("Animation","AnimationEnd"),animationiteration:sm("Animation","AnimationIteration"),animationstart:sm("Animation","AnimationStart"),transitionend:sm("Transition","TransitionEnd")},qg={},D_={};l&&(D_=document.createElement("div").style,"AnimationEvent"in window||(delete Su.animationend.animation,delete Su.animationiteration.animation,delete Su.animationstart.animation),"TransitionEvent"in window||delete Su.transitionend.transition);function am(c){if(qg[c])return qg[c];if(!Su[c])return c;var d=Su[c],m;for(m in d)if(d.hasOwnProperty(m)&&m in D_)return qg[c]=d[m];return c}var F_=am("animationend"),L_=am("animationiteration"),O_=am("animationstart"),M_=am("transitionend"),V_=new Map,B_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $o(c,d){V_.set(c,d),i(d,[c])}for(var Gg=0;Gg<B_.length;Gg++){var Kg=B_[Gg],uP=Kg.toLowerCase(),dP=Kg[0].toUpperCase()+Kg.slice(1);$o(uP,"on"+dP)}$o(F_,"onAnimationEnd"),$o(L_,"onAnimationIteration"),$o(O_,"onAnimationStart"),$o("dblclick","onDoubleClick"),$o("focusin","onFocus"),$o("focusout","onBlur"),$o(M_,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hP=new Set("cancel close invalid load scroll toggle".split(" ").concat(wh));function U_(c,d,m){var y=c.type||"unknown-event";c.currentTarget=m,oe(y,d,void 0,c),c.currentTarget=null}function z_(c,d){d=(d&4)!==0;for(var m=0;m<c.length;m++){var y=c[m],E=y.event;y=y.listeners;e:{var C=void 0;if(d)for(var W=y.length-1;0<=W;W--){var de=y[W],he=de.instance,Ce=de.currentTarget;if(de=de.listener,he!==C&&E.isPropagationStopped())break e;U_(E,de,Ce),C=he}else for(W=0;W<y.length;W++){if(de=y[W],he=de.instance,Ce=de.currentTarget,de=de.listener,he!==C&&E.isPropagationStopped())break e;U_(E,de,Ce),C=he}}}if(q)throw c=ae,q=!1,ae=null,c}function Tr(c,d){var m=d[rv];m===void 0&&(m=d[rv]=new Set);var y=c+"__bubble";m.has(y)||($_(d,c,2,!1),m.add(y))}function Xg(c,d,m){var y=0;d&&(y|=4),$_(m,c,y,d)}var im="_reactListening"+Math.random().toString(36).slice(2);function bh(c){if(!c[im]){c[im]=!0,n.forEach(function(m){m!=="selectionchange"&&(hP.has(m)||Xg(m,!1,c),Xg(m,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[im]||(d[im]=!0,Xg("selectionchange",!1,d))}}function $_(c,d,m,y){switch(dh(d)){case 1:var E=Or;break;case 4:E=Vg;break;default:E=uh}m=E.bind(null,d,m,c),E=void 0,!Ro||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),y?E!==void 0?c.addEventListener(d,m,{capture:!0,passive:E}):c.addEventListener(d,m,!0):E!==void 0?c.addEventListener(d,m,{passive:E}):c.addEventListener(d,m,!1)}function Yg(c,d,m,y,E){var C=y;if((d&1)===0&&(d&2)===0&&y!==null)e:for(;;){if(y===null)return;var W=y.tag;if(W===3||W===4){var de=y.stateNode.containerInfo;if(de===E||de.nodeType===8&&de.parentNode===E)break;if(W===4)for(W=y.return;W!==null;){var he=W.tag;if((he===3||he===4)&&(he=W.stateNode.containerInfo,he===E||he.nodeType===8&&he.parentNode===E))return;W=W.return}for(;de!==null;){if(W=tc(de),W===null)return;if(he=W.tag,he===5||he===6){y=C=W;continue e}de=de.parentNode}}y=y.return}Kl(function(){var Ce=C,qe=Ds(m),Qe=[];e:{var We=V_.get(c);if(We!==void 0){var ht=xu,gt=c;switch(c){case"keypress":if(pu(m)===0)break e;case"keydown":case"keyup":ht=A;break;case"focusin":gt="focus",ht=wu;break;case"focusout":gt="blur",ht=wu;break;case"beforeblur":case"afterblur":ht=wu;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=Y0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=Pe;break;case F_:case L_:case O_:ht=Hi;break;case M_:ht=mr;break;case"scroll":ht=Bg;break;case"wheel":ht=Zt;break;case"copy":case"cut":case"paste":ht=Z0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=J}var yt=(d&4)!==0,on=!yt&&c==="scroll",Ne=yt?We!==null?We+"Capture":null:We;yt=[];for(var xe=Ce,Te;xe!==null;){Te=xe;var tt=Te.stateNode;if(Te.tag===5&&tt!==null&&(Te=tt,Ne!==null&&(tt=Br(xe,Ne),tt!=null&&yt.push(_h(xe,tt,Te)))),on)break;xe=xe.return}0<yt.length&&(We=new ht(We,gt,null,m,qe),Qe.push({event:We,listeners:yt}))}}if((d&7)===0){e:{if(We=c==="mouseover"||c==="pointerover",ht=c==="mouseout"||c==="pointerout",We&&m!==$n&&(gt=m.relatedTarget||m.fromElement)&&(tc(gt)||gt[Wi]))break e;if((ht||We)&&(We=qe.window===qe?qe:(We=qe.ownerDocument)?We.defaultView||We.parentWindow:window,ht?(gt=m.relatedTarget||m.toElement,ht=Ce,gt=gt?tc(gt):null,gt!==null&&(on=le(gt),gt!==on||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(ht=null,gt=Ce),ht!==gt)){if(yt=vu,tt="onMouseLeave",Ne="onMouseEnter",xe="mouse",(c==="pointerout"||c==="pointerover")&&(yt=J,tt="onPointerLeave",Ne="onPointerEnter",xe="pointer"),on=ht==null?We:ju(ht),Te=gt==null?We:ju(gt),We=new yt(tt,xe+"leave",ht,m,qe),We.target=on,We.relatedTarget=Te,tt=null,tc(qe)===Ce&&(yt=new yt(Ne,xe+"enter",gt,m,qe),yt.target=Te,yt.relatedTarget=on,tt=yt),on=tt,ht&&gt)t:{for(yt=ht,Ne=gt,xe=0,Te=yt;Te;Te=ku(Te))xe++;for(Te=0,tt=Ne;tt;tt=ku(tt))Te++;for(;0<xe-Te;)yt=ku(yt),xe--;for(;0<Te-xe;)Ne=ku(Ne),Te--;for(;xe--;){if(yt===Ne||Ne!==null&&yt===Ne.alternate)break t;yt=ku(yt),Ne=ku(Ne)}yt=null}else yt=null;ht!==null&&H_(Qe,We,ht,yt,!1),gt!==null&&on!==null&&H_(Qe,on,gt,yt,!0)}}e:{if(We=Ce?ju(Ce):window,ht=We.nodeName&&We.nodeName.toLowerCase(),ht==="select"||ht==="input"&&We.type==="file")var wt=rP;else if(N_(We))if(S_)wt=iP;else{wt=sP;var Et=nP}else(ht=We.nodeName)&&ht.toLowerCase()==="input"&&(We.type==="checkbox"||We.type==="radio")&&(wt=aP);if(wt&&(wt=wt(c,Ce))){E_(Qe,wt,m,qe);break e}Et&&Et(c,We,Ce),c==="focusout"&&(Et=We._wrapperState)&&Et.controlled&&We.type==="number"&&Me(We,"number",We.value)}switch(Et=Ce?ju(Ce):window,c){case"focusin":(N_(Et)||Et.contentEditable==="true")&&(Eu=Et,Hg=Ce,yh=null);break;case"focusout":yh=Hg=Eu=null;break;case"mousedown":Wg=!0;break;case"contextmenu":case"mouseup":case"dragend":Wg=!1,P_(Qe,m,qe);break;case"selectionchange":if(cP)break;case"keydown":case"keyup":P_(Qe,m,qe)}var St;if(mn)e:{switch(c){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else Nu?b_(c,m)&&(Pt="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(Pt="onCompositionStart");Pt&&(ec&&m.locale!=="ko"&&(Nu||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Nu&&(St=hh()):(Js=qe,mu="value"in Js?Js.value:Js.textContent,Nu=!0)),Et=om(Ce,Pt),0<Et.length&&(Pt=new ph(Pt,c,null,m,qe),Qe.push({event:Pt,listeners:Et}),St?Pt.data=St:(St=__(m),St!==null&&(Pt.data=St)))),(St=Zs?JR(c,m):ZR(c,m))&&(Ce=om(Ce,"onBeforeInput"),0<Ce.length&&(qe=new ph("onBeforeInput","beforeinput",null,m,qe),Qe.push({event:qe,listeners:Ce}),qe.data=St))}z_(Qe,d)})}function _h(c,d,m){return{instance:c,listener:d,currentTarget:m}}function om(c,d){for(var m=d+"Capture",y=[];c!==null;){var E=c,C=E.stateNode;E.tag===5&&C!==null&&(E=C,C=Br(c,m),C!=null&&y.unshift(_h(c,C,E)),C=Br(c,d),C!=null&&y.push(_h(c,C,E))),c=c.return}return y}function ku(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function H_(c,d,m,y,E){for(var C=d._reactName,W=[];m!==null&&m!==y;){var de=m,he=de.alternate,Ce=de.stateNode;if(he!==null&&he===y)break;de.tag===5&&Ce!==null&&(de=Ce,E?(he=Br(m,C),he!=null&&W.unshift(_h(m,he,de))):E||(he=Br(m,C),he!=null&&W.push(_h(m,he,de)))),m=m.return}W.length!==0&&c.push({event:d,listeners:W})}var fP=/\r\n?/g,mP=/\u0000|\uFFFD/g;function W_(c){return(typeof c=="string"?c:""+c).replace(fP,`
`).replace(mP,"")}function lm(c,d,m){if(d=W_(d),W_(c)!==d&&m)throw Error(r(425))}function cm(){}var Qg=null,Jg=null;function Zg(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var ev=typeof setTimeout=="function"?setTimeout:void 0,pP=typeof clearTimeout=="function"?clearTimeout:void 0,q_=typeof Promise=="function"?Promise:void 0,xP=typeof queueMicrotask=="function"?queueMicrotask:typeof q_<"u"?function(c){return q_.resolve(null).then(c).catch(gP)}:ev;function gP(c){setTimeout(function(){throw c})}function tv(c,d){var m=d,y=0;do{var E=m.nextSibling;if(c.removeChild(m),E&&E.nodeType===8)if(m=E.data,m==="/$"){if(y===0){c.removeChild(E),za(d);return}y--}else m!=="$"&&m!=="$?"&&m!=="$!"||y++;m=E}while(m);za(d)}function Ho(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return c}function G_(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(d===0)return c;d--}else m==="/$"&&d++}c=c.previousSibling}return null}var Tu=Math.random().toString(36).slice(2),xi="__reactFiber$"+Tu,Nh="__reactProps$"+Tu,Wi="__reactContainer$"+Tu,rv="__reactEvents$"+Tu,vP="__reactListeners$"+Tu,yP="__reactHandles$"+Tu;function tc(c){var d=c[xi];if(d)return d;for(var m=c.parentNode;m;){if(d=m[Wi]||m[xi]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(c=G_(c);c!==null;){if(m=c[xi])return m;c=G_(c)}return d}c=m,m=c.parentNode}return null}function Eh(c){return c=c[xi]||c[Wi],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function ju(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function um(c){return c[Nh]||null}var nv=[],Au=-1;function Wo(c){return{current:c}}function jr(c){0>Au||(c.current=nv[Au],nv[Au]=null,Au--)}function Nr(c,d){Au++,nv[Au]=c.current,c.current=d}var qo={},ss=Wo(qo),Os=Wo(!1),rc=qo;function Cu(c,d){var m=c.type.contextTypes;if(!m)return qo;var y=c.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===d)return y.__reactInternalMemoizedMaskedChildContext;var E={},C;for(C in m)E[C]=d[C];return y&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=E),E}function Ms(c){return c=c.childContextTypes,c!=null}function dm(){jr(Os),jr(ss)}function K_(c,d,m){if(ss.current!==qo)throw Error(r(168));Nr(ss,d),Nr(Os,m)}function X_(c,d,m){var y=c.stateNode;if(d=d.childContextTypes,typeof y.getChildContext!="function")return m;y=y.getChildContext();for(var E in y)if(!(E in d))throw Error(r(108,ie(c)||"Unknown",E));return ce({},m,y)}function hm(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||qo,rc=ss.current,Nr(ss,c),Nr(Os,Os.current),!0}function Y_(c,d,m){var y=c.stateNode;if(!y)throw Error(r(169));m?(c=X_(c,d,rc),y.__reactInternalMemoizedMergedChildContext=c,jr(Os),jr(ss),Nr(ss,c)):jr(Os),Nr(Os,m)}var qi=null,fm=!1,sv=!1;function Q_(c){qi===null?qi=[c]:qi.push(c)}function wP(c){fm=!0,Q_(c)}function Go(){if(!sv&&qi!==null){sv=!0;var c=0,d=Yt;try{var m=qi;for(Yt=1;c<m.length;c++){var y=m[c];do y=y(!0);while(y!==null)}qi=null,fm=!1}catch(E){throw qi!==null&&(qi=qi.slice(c+1)),Ge(lr,Go),E}finally{Yt=d,sv=!1}}return null}var Iu=[],Ru=0,mm=null,pm=0,ga=[],va=0,nc=null,Gi=1,Ki="";function sc(c,d){Iu[Ru++]=pm,Iu[Ru++]=mm,mm=c,pm=d}function J_(c,d,m){ga[va++]=Gi,ga[va++]=Ki,ga[va++]=nc,nc=c;var y=Gi;c=Ki;var E=32-kr(y)-1;y&=~(1<<E),m+=1;var C=32-kr(d)+E;if(30<C){var W=E-E%5;C=(y&(1<<W)-1).toString(32),y>>=W,E-=W,Gi=1<<32-kr(d)+E|m<<E|y,Ki=C+c}else Gi=1<<C|m<<E|y,Ki=c}function av(c){c.return!==null&&(sc(c,1),J_(c,1,0))}function iv(c){for(;c===mm;)mm=Iu[--Ru],Iu[Ru]=null,pm=Iu[--Ru],Iu[Ru]=null;for(;c===nc;)nc=ga[--va],ga[va]=null,Ki=ga[--va],ga[va]=null,Gi=ga[--va],ga[va]=null}var ea=null,ta=null,Mr=!1,Wa=null;function Z_(c,d){var m=_a(5,null,null,0);m.elementType="DELETED",m.stateNode=d,m.return=c,d=c.deletions,d===null?(c.deletions=[m],c.flags|=16):d.push(m)}function eN(c,d){switch(c.tag){case 5:var m=c.type;return d=d.nodeType!==1||m.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(c.stateNode=d,ea=c,ta=Ho(d.firstChild),!0):!1;case 6:return d=c.pendingProps===""||d.nodeType!==3?null:d,d!==null?(c.stateNode=d,ea=c,ta=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(m=nc!==null?{id:Gi,overflow:Ki}:null,c.memoizedState={dehydrated:d,treeContext:m,retryLane:1073741824},m=_a(18,null,null,0),m.stateNode=d,m.return=c,c.child=m,ea=c,ta=null,!0):!1;default:return!1}}function ov(c){return(c.mode&1)!==0&&(c.flags&128)===0}function lv(c){if(Mr){var d=ta;if(d){var m=d;if(!eN(c,d)){if(ov(c))throw Error(r(418));d=Ho(m.nextSibling);var y=ea;d&&eN(c,d)?Z_(y,m):(c.flags=c.flags&-4097|2,Mr=!1,ea=c)}}else{if(ov(c))throw Error(r(418));c.flags=c.flags&-4097|2,Mr=!1,ea=c}}}function tN(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;ea=c}function xm(c){if(c!==ea)return!1;if(!Mr)return tN(c),Mr=!0,!1;var d;if((d=c.tag!==3)&&!(d=c.tag!==5)&&(d=c.type,d=d!=="head"&&d!=="body"&&!Zg(c.type,c.memoizedProps)),d&&(d=ta)){if(ov(c))throw rN(),Error(r(418));for(;d;)Z_(c,d),d=Ho(d.nextSibling)}if(tN(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="/$"){if(d===0){ta=Ho(c.nextSibling);break e}d--}else m!=="$"&&m!=="$!"&&m!=="$?"||d++}c=c.nextSibling}ta=null}}else ta=ea?Ho(c.stateNode.nextSibling):null;return!0}function rN(){for(var c=ta;c;)c=Ho(c.nextSibling)}function Pu(){ta=ea=null,Mr=!1}function cv(c){Wa===null?Wa=[c]:Wa.push(c)}var bP=F.ReactCurrentBatchConfig;function Sh(c,d,m){if(c=m.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(r(309));var y=m.stateNode}if(!y)throw Error(r(147,c));var E=y,C=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===C?d.ref:(d=function(W){var de=E.refs;W===null?delete de[C]:de[C]=W},d._stringRef=C,d)}if(typeof c!="string")throw Error(r(284));if(!m._owner)throw Error(r(290,c))}return c}function gm(c,d){throw c=Object.prototype.toString.call(d),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function nN(c){var d=c._init;return d(c._payload)}function sN(c){function d(Ne,xe){if(c){var Te=Ne.deletions;Te===null?(Ne.deletions=[xe],Ne.flags|=16):Te.push(xe)}}function m(Ne,xe){if(!c)return null;for(;xe!==null;)d(Ne,xe),xe=xe.sibling;return null}function y(Ne,xe){for(Ne=new Map;xe!==null;)xe.key!==null?Ne.set(xe.key,xe):Ne.set(xe.index,xe),xe=xe.sibling;return Ne}function E(Ne,xe){return Ne=tl(Ne,xe),Ne.index=0,Ne.sibling=null,Ne}function C(Ne,xe,Te){return Ne.index=Te,c?(Te=Ne.alternate,Te!==null?(Te=Te.index,Te<xe?(Ne.flags|=2,xe):Te):(Ne.flags|=2,xe)):(Ne.flags|=1048576,xe)}function W(Ne){return c&&Ne.alternate===null&&(Ne.flags|=2),Ne}function de(Ne,xe,Te,tt){return xe===null||xe.tag!==6?(xe=ey(Te,Ne.mode,tt),xe.return=Ne,xe):(xe=E(xe,Te),xe.return=Ne,xe)}function he(Ne,xe,Te,tt){var wt=Te.type;return wt===N?qe(Ne,xe,Te.props.children,tt,Te.key):xe!==null&&(xe.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===ue&&nN(wt)===xe.type)?(tt=E(xe,Te.props),tt.ref=Sh(Ne,xe,Te),tt.return=Ne,tt):(tt=Um(Te.type,Te.key,Te.props,null,Ne.mode,tt),tt.ref=Sh(Ne,xe,Te),tt.return=Ne,tt)}function Ce(Ne,xe,Te,tt){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==Te.containerInfo||xe.stateNode.implementation!==Te.implementation?(xe=ty(Te,Ne.mode,tt),xe.return=Ne,xe):(xe=E(xe,Te.children||[]),xe.return=Ne,xe)}function qe(Ne,xe,Te,tt,wt){return xe===null||xe.tag!==7?(xe=hc(Te,Ne.mode,tt,wt),xe.return=Ne,xe):(xe=E(xe,Te),xe.return=Ne,xe)}function Qe(Ne,xe,Te){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return xe=ey(""+xe,Ne.mode,Te),xe.return=Ne,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case L:return Te=Um(xe.type,xe.key,xe.props,null,Ne.mode,Te),Te.ref=Sh(Ne,null,xe),Te.return=Ne,Te;case I:return xe=ty(xe,Ne.mode,Te),xe.return=Ne,xe;case ue:var tt=xe._init;return Qe(Ne,tt(xe._payload),Te)}if(Re(xe)||K(xe))return xe=hc(xe,Ne.mode,Te,null),xe.return=Ne,xe;gm(Ne,xe)}return null}function We(Ne,xe,Te,tt){var wt=xe!==null?xe.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return wt!==null?null:de(Ne,xe,""+Te,tt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case L:return Te.key===wt?he(Ne,xe,Te,tt):null;case I:return Te.key===wt?Ce(Ne,xe,Te,tt):null;case ue:return wt=Te._init,We(Ne,xe,wt(Te._payload),tt)}if(Re(Te)||K(Te))return wt!==null?null:qe(Ne,xe,Te,tt,null);gm(Ne,Te)}return null}function ht(Ne,xe,Te,tt,wt){if(typeof tt=="string"&&tt!==""||typeof tt=="number")return Ne=Ne.get(Te)||null,de(xe,Ne,""+tt,wt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case L:return Ne=Ne.get(tt.key===null?Te:tt.key)||null,he(xe,Ne,tt,wt);case I:return Ne=Ne.get(tt.key===null?Te:tt.key)||null,Ce(xe,Ne,tt,wt);case ue:var Et=tt._init;return ht(Ne,xe,Te,Et(tt._payload),wt)}if(Re(tt)||K(tt))return Ne=Ne.get(Te)||null,qe(xe,Ne,tt,wt,null);gm(xe,tt)}return null}function gt(Ne,xe,Te,tt){for(var wt=null,Et=null,St=xe,Pt=xe=0,Dn=null;St!==null&&Pt<Te.length;Pt++){St.index>Pt?(Dn=St,St=null):Dn=St.sibling;var ir=We(Ne,St,Te[Pt],tt);if(ir===null){St===null&&(St=Dn);break}c&&St&&ir.alternate===null&&d(Ne,St),xe=C(ir,xe,Pt),Et===null?wt=ir:Et.sibling=ir,Et=ir,St=Dn}if(Pt===Te.length)return m(Ne,St),Mr&&sc(Ne,Pt),wt;if(St===null){for(;Pt<Te.length;Pt++)St=Qe(Ne,Te[Pt],tt),St!==null&&(xe=C(St,xe,Pt),Et===null?wt=St:Et.sibling=St,Et=St);return Mr&&sc(Ne,Pt),wt}for(St=y(Ne,St);Pt<Te.length;Pt++)Dn=ht(St,Ne,Pt,Te[Pt],tt),Dn!==null&&(c&&Dn.alternate!==null&&St.delete(Dn.key===null?Pt:Dn.key),xe=C(Dn,xe,Pt),Et===null?wt=Dn:Et.sibling=Dn,Et=Dn);return c&&St.forEach(function(rl){return d(Ne,rl)}),Mr&&sc(Ne,Pt),wt}function yt(Ne,xe,Te,tt){var wt=K(Te);if(typeof wt!="function")throw Error(r(150));if(Te=wt.call(Te),Te==null)throw Error(r(151));for(var Et=wt=null,St=xe,Pt=xe=0,Dn=null,ir=Te.next();St!==null&&!ir.done;Pt++,ir=Te.next()){St.index>Pt?(Dn=St,St=null):Dn=St.sibling;var rl=We(Ne,St,ir.value,tt);if(rl===null){St===null&&(St=Dn);break}c&&St&&rl.alternate===null&&d(Ne,St),xe=C(rl,xe,Pt),Et===null?wt=rl:Et.sibling=rl,Et=rl,St=Dn}if(ir.done)return m(Ne,St),Mr&&sc(Ne,Pt),wt;if(St===null){for(;!ir.done;Pt++,ir=Te.next())ir=Qe(Ne,ir.value,tt),ir!==null&&(xe=C(ir,xe,Pt),Et===null?wt=ir:Et.sibling=ir,Et=ir);return Mr&&sc(Ne,Pt),wt}for(St=y(Ne,St);!ir.done;Pt++,ir=Te.next())ir=ht(St,Ne,Pt,ir.value,tt),ir!==null&&(c&&ir.alternate!==null&&St.delete(ir.key===null?Pt:ir.key),xe=C(ir,xe,Pt),Et===null?wt=ir:Et.sibling=ir,Et=ir);return c&&St.forEach(function(eD){return d(Ne,eD)}),Mr&&sc(Ne,Pt),wt}function on(Ne,xe,Te,tt){if(typeof Te=="object"&&Te!==null&&Te.type===N&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case L:e:{for(var wt=Te.key,Et=xe;Et!==null;){if(Et.key===wt){if(wt=Te.type,wt===N){if(Et.tag===7){m(Ne,Et.sibling),xe=E(Et,Te.props.children),xe.return=Ne,Ne=xe;break e}}else if(Et.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===ue&&nN(wt)===Et.type){m(Ne,Et.sibling),xe=E(Et,Te.props),xe.ref=Sh(Ne,Et,Te),xe.return=Ne,Ne=xe;break e}m(Ne,Et);break}else d(Ne,Et);Et=Et.sibling}Te.type===N?(xe=hc(Te.props.children,Ne.mode,tt,Te.key),xe.return=Ne,Ne=xe):(tt=Um(Te.type,Te.key,Te.props,null,Ne.mode,tt),tt.ref=Sh(Ne,xe,Te),tt.return=Ne,Ne=tt)}return W(Ne);case I:e:{for(Et=Te.key;xe!==null;){if(xe.key===Et)if(xe.tag===4&&xe.stateNode.containerInfo===Te.containerInfo&&xe.stateNode.implementation===Te.implementation){m(Ne,xe.sibling),xe=E(xe,Te.children||[]),xe.return=Ne,Ne=xe;break e}else{m(Ne,xe);break}else d(Ne,xe);xe=xe.sibling}xe=ty(Te,Ne.mode,tt),xe.return=Ne,Ne=xe}return W(Ne);case ue:return Et=Te._init,on(Ne,xe,Et(Te._payload),tt)}if(Re(Te))return gt(Ne,xe,Te,tt);if(K(Te))return yt(Ne,xe,Te,tt);gm(Ne,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,xe!==null&&xe.tag===6?(m(Ne,xe.sibling),xe=E(xe,Te),xe.return=Ne,Ne=xe):(m(Ne,xe),xe=ey(Te,Ne.mode,tt),xe.return=Ne,Ne=xe),W(Ne)):m(Ne,xe)}return on}var Du=sN(!0),aN=sN(!1),vm=Wo(null),ym=null,Fu=null,uv=null;function dv(){uv=Fu=ym=null}function hv(c){var d=vm.current;jr(vm),c._currentValue=d}function fv(c,d,m){for(;c!==null;){var y=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,y!==null&&(y.childLanes|=d)):y!==null&&(y.childLanes&d)!==d&&(y.childLanes|=d),c===m)break;c=c.return}}function Lu(c,d){ym=c,uv=Fu=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&d)!==0&&(Vs=!0),c.firstContext=null)}function ya(c){var d=c._currentValue;if(uv!==c)if(c={context:c,memoizedValue:d,next:null},Fu===null){if(ym===null)throw Error(r(308));Fu=c,ym.dependencies={lanes:0,firstContext:c}}else Fu=Fu.next=c;return d}var ac=null;function mv(c){ac===null?ac=[c]:ac.push(c)}function iN(c,d,m,y){var E=d.interleaved;return E===null?(m.next=m,mv(d)):(m.next=E.next,E.next=m),d.interleaved=m,Xi(c,y)}function Xi(c,d){c.lanes|=d;var m=c.alternate;for(m!==null&&(m.lanes|=d),m=c,c=c.return;c!==null;)c.childLanes|=d,m=c.alternate,m!==null&&(m.childLanes|=d),m=c,c=c.return;return m.tag===3?m.stateNode:null}var Ko=!1;function pv(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oN(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Yi(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function Xo(c,d,m){var y=c.updateQueue;if(y===null)return null;if(y=y.shared,(tr&2)!==0){var E=y.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),y.pending=d,Xi(c,m)}return E=y.interleaved,E===null?(d.next=d,mv(y)):(d.next=E.next,E.next=d),y.interleaved=d,Xi(c,m)}function wm(c,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194240)!==0)){var y=d.lanes;y&=c.pendingLanes,m|=y,d.lanes=m,Mo(c,m)}}function lN(c,d){var m=c.updateQueue,y=c.alternate;if(y!==null&&(y=y.updateQueue,m===y)){var E=null,C=null;if(m=m.firstBaseUpdate,m!==null){do{var W={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};C===null?E=C=W:C=C.next=W,m=m.next}while(m!==null);C===null?E=C=d:C=C.next=d}else E=C=d;m={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:C,shared:y.shared,effects:y.effects},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=d}function bm(c,d,m,y){var E=c.updateQueue;Ko=!1;var C=E.firstBaseUpdate,W=E.lastBaseUpdate,de=E.shared.pending;if(de!==null){E.shared.pending=null;var he=de,Ce=he.next;he.next=null,W===null?C=Ce:W.next=Ce,W=he;var qe=c.alternate;qe!==null&&(qe=qe.updateQueue,de=qe.lastBaseUpdate,de!==W&&(de===null?qe.firstBaseUpdate=Ce:de.next=Ce,qe.lastBaseUpdate=he))}if(C!==null){var Qe=E.baseState;W=0,qe=Ce=he=null,de=C;do{var We=de.lane,ht=de.eventTime;if((y&We)===We){qe!==null&&(qe=qe.next={eventTime:ht,lane:0,tag:de.tag,payload:de.payload,callback:de.callback,next:null});e:{var gt=c,yt=de;switch(We=d,ht=m,yt.tag){case 1:if(gt=yt.payload,typeof gt=="function"){Qe=gt.call(ht,Qe,We);break e}Qe=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=yt.payload,We=typeof gt=="function"?gt.call(ht,Qe,We):gt,We==null)break e;Qe=ce({},Qe,We);break e;case 2:Ko=!0}}de.callback!==null&&de.lane!==0&&(c.flags|=64,We=E.effects,We===null?E.effects=[de]:We.push(de))}else ht={eventTime:ht,lane:We,tag:de.tag,payload:de.payload,callback:de.callback,next:null},qe===null?(Ce=qe=ht,he=Qe):qe=qe.next=ht,W|=We;if(de=de.next,de===null){if(de=E.shared.pending,de===null)break;We=de,de=We.next,We.next=null,E.lastBaseUpdate=We,E.shared.pending=null}}while(!0);if(qe===null&&(he=Qe),E.baseState=he,E.firstBaseUpdate=Ce,E.lastBaseUpdate=qe,d=E.shared.interleaved,d!==null){E=d;do W|=E.lane,E=E.next;while(E!==d)}else C===null&&(E.shared.lanes=0);lc|=W,c.lanes=W,c.memoizedState=Qe}}function cN(c,d,m){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var y=c[d],E=y.callback;if(E!==null){if(y.callback=null,y=m,typeof E!="function")throw Error(r(191,E));E.call(y)}}}var kh={},gi=Wo(kh),Th=Wo(kh),jh=Wo(kh);function ic(c){if(c===kh)throw Error(r(174));return c}function xv(c,d){switch(Nr(jh,d),Nr(Th,c),Nr(gi,kh),c=d.nodeType,c){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:et(null,"");break;default:c=c===8?d.parentNode:d,d=c.namespaceURI||null,c=c.tagName,d=et(d,c)}jr(gi),Nr(gi,d)}function Ou(){jr(gi),jr(Th),jr(jh)}function uN(c){ic(jh.current);var d=ic(gi.current),m=et(d,c.type);d!==m&&(Nr(Th,c),Nr(gi,m))}function gv(c){Th.current===c&&(jr(gi),jr(Th))}var Ur=Wo(0);function _m(c){for(var d=c;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var vv=[];function yv(){for(var c=0;c<vv.length;c++)vv[c]._workInProgressVersionPrimary=null;vv.length=0}var Nm=F.ReactCurrentDispatcher,wv=F.ReactCurrentBatchConfig,oc=0,zr=null,Nn=null,Rn=null,Em=!1,Ah=!1,Ch=0,_P=0;function as(){throw Error(r(321))}function bv(c,d){if(d===null)return!1;for(var m=0;m<d.length&&m<c.length;m++)if(!Ha(c[m],d[m]))return!1;return!0}function _v(c,d,m,y,E,C){if(oc=C,zr=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Nm.current=c===null||c.memoizedState===null?kP:TP,c=m(y,E),Ah){C=0;do{if(Ah=!1,Ch=0,25<=C)throw Error(r(301));C+=1,Rn=Nn=null,d.updateQueue=null,Nm.current=jP,c=m(y,E)}while(Ah)}if(Nm.current=Tm,d=Nn!==null&&Nn.next!==null,oc=0,Rn=Nn=zr=null,Em=!1,d)throw Error(r(300));return c}function Nv(){var c=Ch!==0;return Ch=0,c}function vi(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?zr.memoizedState=Rn=c:Rn=Rn.next=c,Rn}function wa(){if(Nn===null){var c=zr.alternate;c=c!==null?c.memoizedState:null}else c=Nn.next;var d=Rn===null?zr.memoizedState:Rn.next;if(d!==null)Rn=d,Nn=c;else{if(c===null)throw Error(r(310));Nn=c,c={memoizedState:Nn.memoizedState,baseState:Nn.baseState,baseQueue:Nn.baseQueue,queue:Nn.queue,next:null},Rn===null?zr.memoizedState=Rn=c:Rn=Rn.next=c}return Rn}function Ih(c,d){return typeof d=="function"?d(c):d}function Ev(c){var d=wa(),m=d.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var y=Nn,E=y.baseQueue,C=m.pending;if(C!==null){if(E!==null){var W=E.next;E.next=C.next,C.next=W}y.baseQueue=E=C,m.pending=null}if(E!==null){C=E.next,y=y.baseState;var de=W=null,he=null,Ce=C;do{var qe=Ce.lane;if((oc&qe)===qe)he!==null&&(he=he.next={lane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),y=Ce.hasEagerState?Ce.eagerState:c(y,Ce.action);else{var Qe={lane:qe,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null};he===null?(de=he=Qe,W=y):he=he.next=Qe,zr.lanes|=qe,lc|=qe}Ce=Ce.next}while(Ce!==null&&Ce!==C);he===null?W=y:he.next=de,Ha(y,d.memoizedState)||(Vs=!0),d.memoizedState=y,d.baseState=W,d.baseQueue=he,m.lastRenderedState=y}if(c=m.interleaved,c!==null){E=c;do C=E.lane,zr.lanes|=C,lc|=C,E=E.next;while(E!==c)}else E===null&&(m.lanes=0);return[d.memoizedState,m.dispatch]}function Sv(c){var d=wa(),m=d.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var y=m.dispatch,E=m.pending,C=d.memoizedState;if(E!==null){m.pending=null;var W=E=E.next;do C=c(C,W.action),W=W.next;while(W!==E);Ha(C,d.memoizedState)||(Vs=!0),d.memoizedState=C,d.baseQueue===null&&(d.baseState=C),m.lastRenderedState=C}return[C,y]}function dN(){}function hN(c,d){var m=zr,y=wa(),E=d(),C=!Ha(y.memoizedState,E);if(C&&(y.memoizedState=E,Vs=!0),y=y.queue,kv(pN.bind(null,m,y,c),[c]),y.getSnapshot!==d||C||Rn!==null&&Rn.memoizedState.tag&1){if(m.flags|=2048,Rh(9,mN.bind(null,m,y,E,d),void 0,null),Pn===null)throw Error(r(349));(oc&30)!==0||fN(m,d,E)}return E}function fN(c,d,m){c.flags|=16384,c={getSnapshot:d,value:m},d=zr.updateQueue,d===null?(d={lastEffect:null,stores:null},zr.updateQueue=d,d.stores=[c]):(m=d.stores,m===null?d.stores=[c]:m.push(c))}function mN(c,d,m,y){d.value=m,d.getSnapshot=y,xN(d)&&gN(c)}function pN(c,d,m){return m(function(){xN(d)&&gN(c)})}function xN(c){var d=c.getSnapshot;c=c.value;try{var m=d();return!Ha(c,m)}catch{return!0}}function gN(c){var d=Xi(c,1);d!==null&&Xa(d,c,1,-1)}function vN(c){var d=vi();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ih,lastRenderedState:c},d.queue=c,c=c.dispatch=SP.bind(null,zr,c),[d.memoizedState,c]}function Rh(c,d,m,y){return c={tag:c,create:d,destroy:m,deps:y,next:null},d=zr.updateQueue,d===null?(d={lastEffect:null,stores:null},zr.updateQueue=d,d.lastEffect=c.next=c):(m=d.lastEffect,m===null?d.lastEffect=c.next=c:(y=m.next,m.next=c,c.next=y,d.lastEffect=c)),c}function yN(){return wa().memoizedState}function Sm(c,d,m,y){var E=vi();zr.flags|=c,E.memoizedState=Rh(1|d,m,void 0,y===void 0?null:y)}function km(c,d,m,y){var E=wa();y=y===void 0?null:y;var C=void 0;if(Nn!==null){var W=Nn.memoizedState;if(C=W.destroy,y!==null&&bv(y,W.deps)){E.memoizedState=Rh(d,m,C,y);return}}zr.flags|=c,E.memoizedState=Rh(1|d,m,C,y)}function wN(c,d){return Sm(8390656,8,c,d)}function kv(c,d){return km(2048,8,c,d)}function bN(c,d){return km(4,2,c,d)}function _N(c,d){return km(4,4,c,d)}function NN(c,d){if(typeof d=="function")return c=c(),d(c),function(){d(null)};if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function EN(c,d,m){return m=m!=null?m.concat([c]):null,km(4,4,NN.bind(null,d,c),m)}function Tv(){}function SN(c,d){var m=wa();d=d===void 0?null:d;var y=m.memoizedState;return y!==null&&d!==null&&bv(d,y[1])?y[0]:(m.memoizedState=[c,d],c)}function kN(c,d){var m=wa();d=d===void 0?null:d;var y=m.memoizedState;return y!==null&&d!==null&&bv(d,y[1])?y[0]:(c=c(),m.memoizedState=[c,d],c)}function TN(c,d,m){return(oc&21)===0?(c.baseState&&(c.baseState=!1,Vs=!0),c.memoizedState=m):(Ha(m,d)||(m=Yl(),zr.lanes|=m,lc|=m,c.baseState=!0),d)}function NP(c,d){var m=Yt;Yt=m!==0&&4>m?m:4,c(!0);var y=wv.transition;wv.transition={};try{c(!1),d()}finally{Yt=m,wv.transition=y}}function jN(){return wa().memoizedState}function EP(c,d,m){var y=Zo(c);if(m={lane:y,action:m,hasEagerState:!1,eagerState:null,next:null},AN(c))CN(d,m);else if(m=iN(c,d,m,y),m!==null){var E=js();Xa(m,c,y,E),IN(m,d,y)}}function SP(c,d,m){var y=Zo(c),E={lane:y,action:m,hasEagerState:!1,eagerState:null,next:null};if(AN(c))CN(d,E);else{var C=c.alternate;if(c.lanes===0&&(C===null||C.lanes===0)&&(C=d.lastRenderedReducer,C!==null))try{var W=d.lastRenderedState,de=C(W,m);if(E.hasEagerState=!0,E.eagerState=de,Ha(de,W)){var he=d.interleaved;he===null?(E.next=E,mv(d)):(E.next=he.next,he.next=E),d.interleaved=E;return}}catch{}finally{}m=iN(c,d,E,y),m!==null&&(E=js(),Xa(m,c,y,E),IN(m,d,y))}}function AN(c){var d=c.alternate;return c===zr||d!==null&&d===zr}function CN(c,d){Ah=Em=!0;var m=c.pending;m===null?d.next=d:(d.next=m.next,m.next=d),c.pending=d}function IN(c,d,m){if((m&4194240)!==0){var y=d.lanes;y&=c.pendingLanes,m|=y,d.lanes=m,Mo(c,m)}}var Tm={readContext:ya,useCallback:as,useContext:as,useEffect:as,useImperativeHandle:as,useInsertionEffect:as,useLayoutEffect:as,useMemo:as,useReducer:as,useRef:as,useState:as,useDebugValue:as,useDeferredValue:as,useTransition:as,useMutableSource:as,useSyncExternalStore:as,useId:as,unstable_isNewReconciler:!1},kP={readContext:ya,useCallback:function(c,d){return vi().memoizedState=[c,d===void 0?null:d],c},useContext:ya,useEffect:wN,useImperativeHandle:function(c,d,m){return m=m!=null?m.concat([c]):null,Sm(4194308,4,NN.bind(null,d,c),m)},useLayoutEffect:function(c,d){return Sm(4194308,4,c,d)},useInsertionEffect:function(c,d){return Sm(4,2,c,d)},useMemo:function(c,d){var m=vi();return d=d===void 0?null:d,c=c(),m.memoizedState=[c,d],c},useReducer:function(c,d,m){var y=vi();return d=m!==void 0?m(d):d,y.memoizedState=y.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},y.queue=c,c=c.dispatch=EP.bind(null,zr,c),[y.memoizedState,c]},useRef:function(c){var d=vi();return c={current:c},d.memoizedState=c},useState:vN,useDebugValue:Tv,useDeferredValue:function(c){return vi().memoizedState=c},useTransition:function(){var c=vN(!1),d=c[0];return c=NP.bind(null,c[1]),vi().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,m){var y=zr,E=vi();if(Mr){if(m===void 0)throw Error(r(407));m=m()}else{if(m=d(),Pn===null)throw Error(r(349));(oc&30)!==0||fN(y,d,m)}E.memoizedState=m;var C={value:m,getSnapshot:d};return E.queue=C,wN(pN.bind(null,y,C,c),[c]),y.flags|=2048,Rh(9,mN.bind(null,y,C,m,d),void 0,null),m},useId:function(){var c=vi(),d=Pn.identifierPrefix;if(Mr){var m=Ki,y=Gi;m=(y&~(1<<32-kr(y)-1)).toString(32)+m,d=":"+d+"R"+m,m=Ch++,0<m&&(d+="H"+m.toString(32)),d+=":"}else m=_P++,d=":"+d+"r"+m.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},TP={readContext:ya,useCallback:SN,useContext:ya,useEffect:kv,useImperativeHandle:EN,useInsertionEffect:bN,useLayoutEffect:_N,useMemo:kN,useReducer:Ev,useRef:yN,useState:function(){return Ev(Ih)},useDebugValue:Tv,useDeferredValue:function(c){var d=wa();return TN(d,Nn.memoizedState,c)},useTransition:function(){var c=Ev(Ih)[0],d=wa().memoizedState;return[c,d]},useMutableSource:dN,useSyncExternalStore:hN,useId:jN,unstable_isNewReconciler:!1},jP={readContext:ya,useCallback:SN,useContext:ya,useEffect:kv,useImperativeHandle:EN,useInsertionEffect:bN,useLayoutEffect:_N,useMemo:kN,useReducer:Sv,useRef:yN,useState:function(){return Sv(Ih)},useDebugValue:Tv,useDeferredValue:function(c){var d=wa();return Nn===null?d.memoizedState=c:TN(d,Nn.memoizedState,c)},useTransition:function(){var c=Sv(Ih)[0],d=wa().memoizedState;return[c,d]},useMutableSource:dN,useSyncExternalStore:hN,useId:jN,unstable_isNewReconciler:!1};function qa(c,d){if(c&&c.defaultProps){d=ce({},d),c=c.defaultProps;for(var m in c)d[m]===void 0&&(d[m]=c[m]);return d}return d}function jv(c,d,m,y){d=c.memoizedState,m=m(y,d),m=m==null?d:ce({},d,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var jm={isMounted:function(c){return(c=c._reactInternals)?le(c)===c:!1},enqueueSetState:function(c,d,m){c=c._reactInternals;var y=js(),E=Zo(c),C=Yi(y,E);C.payload=d,m!=null&&(C.callback=m),d=Xo(c,C,E),d!==null&&(Xa(d,c,E,y),wm(d,c,E))},enqueueReplaceState:function(c,d,m){c=c._reactInternals;var y=js(),E=Zo(c),C=Yi(y,E);C.tag=1,C.payload=d,m!=null&&(C.callback=m),d=Xo(c,C,E),d!==null&&(Xa(d,c,E,y),wm(d,c,E))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var m=js(),y=Zo(c),E=Yi(m,y);E.tag=2,d!=null&&(E.callback=d),d=Xo(c,E,y),d!==null&&(Xa(d,c,y,m),wm(d,c,y))}};function RN(c,d,m,y,E,C,W){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(y,C,W):d.prototype&&d.prototype.isPureReactComponent?!vh(m,y)||!vh(E,C):!0}function PN(c,d,m){var y=!1,E=qo,C=d.contextType;return typeof C=="object"&&C!==null?C=ya(C):(E=Ms(d)?rc:ss.current,y=d.contextTypes,C=(y=y!=null)?Cu(c,E):qo),d=new d(m,C),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=jm,c.stateNode=d,d._reactInternals=c,y&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=E,c.__reactInternalMemoizedMaskedChildContext=C),d}function DN(c,d,m,y){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,y),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,y),d.state!==c&&jm.enqueueReplaceState(d,d.state,null)}function Av(c,d,m,y){var E=c.stateNode;E.props=m,E.state=c.memoizedState,E.refs={},pv(c);var C=d.contextType;typeof C=="object"&&C!==null?E.context=ya(C):(C=Ms(d)?rc:ss.current,E.context=Cu(c,C)),E.state=c.memoizedState,C=d.getDerivedStateFromProps,typeof C=="function"&&(jv(c,d,C,m),E.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(d=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),d!==E.state&&jm.enqueueReplaceState(E,E.state,null),bm(c,m,E,y),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308)}function Mu(c,d){try{var m="",y=d;do m+=Z(y),y=y.return;while(y);var E=m}catch(C){E=`
Error generating stack: `+C.message+`
`+C.stack}return{value:c,source:d,stack:E,digest:null}}function Cv(c,d,m){return{value:c,source:null,stack:m??null,digest:d??null}}function Iv(c,d){try{console.error(d.value)}catch(m){setTimeout(function(){throw m})}}var AP=typeof WeakMap=="function"?WeakMap:Map;function FN(c,d,m){m=Yi(-1,m),m.tag=3,m.payload={element:null};var y=d.value;return m.callback=function(){Fm||(Fm=!0,qv=y),Iv(c,d)},m}function LN(c,d,m){m=Yi(-1,m),m.tag=3;var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var E=d.value;m.payload=function(){return y(E)},m.callback=function(){Iv(c,d)}}var C=c.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(m.callback=function(){Iv(c,d),typeof y!="function"&&(Qo===null?Qo=new Set([this]):Qo.add(this));var W=d.stack;this.componentDidCatch(d.value,{componentStack:W!==null?W:""})}),m}function ON(c,d,m){var y=c.pingCache;if(y===null){y=c.pingCache=new AP;var E=new Set;y.set(d,E)}else E=y.get(d),E===void 0&&(E=new Set,y.set(d,E));E.has(m)||(E.add(m),c=$P.bind(null,c,d,m),d.then(c,c))}function MN(c){do{var d;if((d=c.tag===13)&&(d=c.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return c;c=c.return}while(c!==null);return null}function VN(c,d,m,y,E){return(c.mode&1)===0?(c===d?c.flags|=65536:(c.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(d=Yi(-1,1),d.tag=2,Xo(m,d,1))),m.lanes|=1),c):(c.flags|=65536,c.lanes=E,c)}var CP=F.ReactCurrentOwner,Vs=!1;function Ts(c,d,m,y){d.child=c===null?aN(d,null,m,y):Du(d,c.child,m,y)}function BN(c,d,m,y,E){m=m.render;var C=d.ref;return Lu(d,E),y=_v(c,d,m,y,C,E),m=Nv(),c!==null&&!Vs?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~E,Qi(c,d,E)):(Mr&&m&&av(d),d.flags|=1,Ts(c,d,y,E),d.child)}function UN(c,d,m,y,E){if(c===null){var C=m.type;return typeof C=="function"&&!Zv(C)&&C.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(d.tag=15,d.type=C,zN(c,d,C,y,E)):(c=Um(m.type,null,y,d,d.mode,E),c.ref=d.ref,c.return=d,d.child=c)}if(C=c.child,(c.lanes&E)===0){var W=C.memoizedProps;if(m=m.compare,m=m!==null?m:vh,m(W,y)&&c.ref===d.ref)return Qi(c,d,E)}return d.flags|=1,c=tl(C,y),c.ref=d.ref,c.return=d,d.child=c}function zN(c,d,m,y,E){if(c!==null){var C=c.memoizedProps;if(vh(C,y)&&c.ref===d.ref)if(Vs=!1,d.pendingProps=y=C,(c.lanes&E)!==0)(c.flags&131072)!==0&&(Vs=!0);else return d.lanes=c.lanes,Qi(c,d,E)}return Rv(c,d,m,y,E)}function $N(c,d,m){var y=d.pendingProps,E=y.children,C=c!==null?c.memoizedState:null;if(y.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nr(Bu,ra),ra|=m;else{if((m&1073741824)===0)return c=C!==null?C.baseLanes|m:m,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null,transitions:null},d.updateQueue=null,Nr(Bu,ra),ra|=c,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=C!==null?C.baseLanes:m,Nr(Bu,ra),ra|=y}else C!==null?(y=C.baseLanes|m,d.memoizedState=null):y=m,Nr(Bu,ra),ra|=y;return Ts(c,d,E,m),d.child}function HN(c,d){var m=d.ref;(c===null&&m!==null||c!==null&&c.ref!==m)&&(d.flags|=512,d.flags|=2097152)}function Rv(c,d,m,y,E){var C=Ms(m)?rc:ss.current;return C=Cu(d,C),Lu(d,E),m=_v(c,d,m,y,C,E),y=Nv(),c!==null&&!Vs?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~E,Qi(c,d,E)):(Mr&&y&&av(d),d.flags|=1,Ts(c,d,m,E),d.child)}function WN(c,d,m,y,E){if(Ms(m)){var C=!0;hm(d)}else C=!1;if(Lu(d,E),d.stateNode===null)Cm(c,d),PN(d,m,y),Av(d,m,y,E),y=!0;else if(c===null){var W=d.stateNode,de=d.memoizedProps;W.props=de;var he=W.context,Ce=m.contextType;typeof Ce=="object"&&Ce!==null?Ce=ya(Ce):(Ce=Ms(m)?rc:ss.current,Ce=Cu(d,Ce));var qe=m.getDerivedStateFromProps,Qe=typeof qe=="function"||typeof W.getSnapshotBeforeUpdate=="function";Qe||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(de!==y||he!==Ce)&&DN(d,W,y,Ce),Ko=!1;var We=d.memoizedState;W.state=We,bm(d,y,W,E),he=d.memoizedState,de!==y||We!==he||Os.current||Ko?(typeof qe=="function"&&(jv(d,m,qe,y),he=d.memoizedState),(de=Ko||RN(d,m,de,y,We,he,Ce))?(Qe||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(d.flags|=4194308)):(typeof W.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=y,d.memoizedState=he),W.props=y,W.state=he,W.context=Ce,y=de):(typeof W.componentDidMount=="function"&&(d.flags|=4194308),y=!1)}else{W=d.stateNode,oN(c,d),de=d.memoizedProps,Ce=d.type===d.elementType?de:qa(d.type,de),W.props=Ce,Qe=d.pendingProps,We=W.context,he=m.contextType,typeof he=="object"&&he!==null?he=ya(he):(he=Ms(m)?rc:ss.current,he=Cu(d,he));var ht=m.getDerivedStateFromProps;(qe=typeof ht=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(de!==Qe||We!==he)&&DN(d,W,y,he),Ko=!1,We=d.memoizedState,W.state=We,bm(d,y,W,E);var gt=d.memoizedState;de!==Qe||We!==gt||Os.current||Ko?(typeof ht=="function"&&(jv(d,m,ht,y),gt=d.memoizedState),(Ce=Ko||RN(d,m,Ce,y,We,gt,he)||!1)?(qe||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(y,gt,he),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(y,gt,he)),typeof W.componentDidUpdate=="function"&&(d.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof W.componentDidUpdate!="function"||de===c.memoizedProps&&We===c.memoizedState||(d.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||de===c.memoizedProps&&We===c.memoizedState||(d.flags|=1024),d.memoizedProps=y,d.memoizedState=gt),W.props=y,W.state=gt,W.context=he,y=Ce):(typeof W.componentDidUpdate!="function"||de===c.memoizedProps&&We===c.memoizedState||(d.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||de===c.memoizedProps&&We===c.memoizedState||(d.flags|=1024),y=!1)}return Pv(c,d,m,y,C,E)}function Pv(c,d,m,y,E,C){HN(c,d);var W=(d.flags&128)!==0;if(!y&&!W)return E&&Y_(d,m,!1),Qi(c,d,C);y=d.stateNode,CP.current=d;var de=W&&typeof m.getDerivedStateFromError!="function"?null:y.render();return d.flags|=1,c!==null&&W?(d.child=Du(d,c.child,null,C),d.child=Du(d,null,de,C)):Ts(c,d,de,C),d.memoizedState=y.state,E&&Y_(d,m,!0),d.child}function qN(c){var d=c.stateNode;d.pendingContext?K_(c,d.pendingContext,d.pendingContext!==d.context):d.context&&K_(c,d.context,!1),xv(c,d.containerInfo)}function GN(c,d,m,y,E){return Pu(),cv(E),d.flags|=256,Ts(c,d,m,y),d.child}var Dv={dehydrated:null,treeContext:null,retryLane:0};function Fv(c){return{baseLanes:c,cachePool:null,transitions:null}}function KN(c,d,m){var y=d.pendingProps,E=Ur.current,C=!1,W=(d.flags&128)!==0,de;if((de=W)||(de=c!==null&&c.memoizedState===null?!1:(E&2)!==0),de?(C=!0,d.flags&=-129):(c===null||c.memoizedState!==null)&&(E|=1),Nr(Ur,E&1),c===null)return lv(d),c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((d.mode&1)===0?d.lanes=1:c.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(W=y.children,c=y.fallback,C?(y=d.mode,C=d.child,W={mode:"hidden",children:W},(y&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=W):C=zm(W,y,0,null),c=hc(c,y,m,null),C.return=d,c.return=d,C.sibling=c,d.child=C,d.child.memoizedState=Fv(m),d.memoizedState=Dv,c):Lv(d,W));if(E=c.memoizedState,E!==null&&(de=E.dehydrated,de!==null))return IP(c,d,W,y,de,E,m);if(C){C=y.fallback,W=d.mode,E=c.child,de=E.sibling;var he={mode:"hidden",children:y.children};return(W&1)===0&&d.child!==E?(y=d.child,y.childLanes=0,y.pendingProps=he,d.deletions=null):(y=tl(E,he),y.subtreeFlags=E.subtreeFlags&14680064),de!==null?C=tl(de,C):(C=hc(C,W,m,null),C.flags|=2),C.return=d,y.return=d,y.sibling=C,d.child=y,y=C,C=d.child,W=c.child.memoizedState,W=W===null?Fv(m):{baseLanes:W.baseLanes|m,cachePool:null,transitions:W.transitions},C.memoizedState=W,C.childLanes=c.childLanes&~m,d.memoizedState=Dv,y}return C=c.child,c=C.sibling,y=tl(C,{mode:"visible",children:y.children}),(d.mode&1)===0&&(y.lanes=m),y.return=d,y.sibling=null,c!==null&&(m=d.deletions,m===null?(d.deletions=[c],d.flags|=16):m.push(c)),d.child=y,d.memoizedState=null,y}function Lv(c,d){return d=zm({mode:"visible",children:d},c.mode,0,null),d.return=c,c.child=d}function Am(c,d,m,y){return y!==null&&cv(y),Du(d,c.child,null,m),c=Lv(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function IP(c,d,m,y,E,C,W){if(m)return d.flags&256?(d.flags&=-257,y=Cv(Error(r(422))),Am(c,d,W,y)):d.memoizedState!==null?(d.child=c.child,d.flags|=128,null):(C=y.fallback,E=d.mode,y=zm({mode:"visible",children:y.children},E,0,null),C=hc(C,E,W,null),C.flags|=2,y.return=d,C.return=d,y.sibling=C,d.child=y,(d.mode&1)!==0&&Du(d,c.child,null,W),d.child.memoizedState=Fv(W),d.memoizedState=Dv,C);if((d.mode&1)===0)return Am(c,d,W,null);if(E.data==="$!"){if(y=E.nextSibling&&E.nextSibling.dataset,y)var de=y.dgst;return y=de,C=Error(r(419)),y=Cv(C,y,void 0),Am(c,d,W,y)}if(de=(W&c.childLanes)!==0,Vs||de){if(y=Pn,y!==null){switch(W&-W){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(y.suspendedLanes|W))!==0?0:E,E!==0&&E!==C.retryLane&&(C.retryLane=E,Xi(c,E),Xa(y,c,E,-1))}return Jv(),y=Cv(Error(r(421))),Am(c,d,W,y)}return E.data==="$?"?(d.flags|=128,d.child=c.child,d=HP.bind(null,c),E._reactRetry=d,null):(c=C.treeContext,ta=Ho(E.nextSibling),ea=d,Mr=!0,Wa=null,c!==null&&(ga[va++]=Gi,ga[va++]=Ki,ga[va++]=nc,Gi=c.id,Ki=c.overflow,nc=d),d=Lv(d,y.children),d.flags|=4096,d)}function XN(c,d,m){c.lanes|=d;var y=c.alternate;y!==null&&(y.lanes|=d),fv(c.return,d,m)}function Ov(c,d,m,y,E){var C=c.memoizedState;C===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:y,tail:m,tailMode:E}:(C.isBackwards=d,C.rendering=null,C.renderingStartTime=0,C.last=y,C.tail=m,C.tailMode=E)}function YN(c,d,m){var y=d.pendingProps,E=y.revealOrder,C=y.tail;if(Ts(c,d,y.children,m),y=Ur.current,(y&2)!==0)y=y&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&XN(c,m,d);else if(c.tag===19)XN(c,m,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}y&=1}if(Nr(Ur,y),(d.mode&1)===0)d.memoizedState=null;else switch(E){case"forwards":for(m=d.child,E=null;m!==null;)c=m.alternate,c!==null&&_m(c)===null&&(E=m),m=m.sibling;m=E,m===null?(E=d.child,d.child=null):(E=m.sibling,m.sibling=null),Ov(d,!1,E,m,C);break;case"backwards":for(m=null,E=d.child,d.child=null;E!==null;){if(c=E.alternate,c!==null&&_m(c)===null){d.child=E;break}c=E.sibling,E.sibling=m,m=E,E=c}Ov(d,!0,m,null,C);break;case"together":Ov(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Cm(c,d){(d.mode&1)===0&&c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2)}function Qi(c,d,m){if(c!==null&&(d.dependencies=c.dependencies),lc|=d.lanes,(m&d.childLanes)===0)return null;if(c!==null&&d.child!==c.child)throw Error(r(153));if(d.child!==null){for(c=d.child,m=tl(c,c.pendingProps),d.child=m,m.return=d;c.sibling!==null;)c=c.sibling,m=m.sibling=tl(c,c.pendingProps),m.return=d;m.sibling=null}return d.child}function RP(c,d,m){switch(d.tag){case 3:qN(d),Pu();break;case 5:uN(d);break;case 1:Ms(d.type)&&hm(d);break;case 4:xv(d,d.stateNode.containerInfo);break;case 10:var y=d.type._context,E=d.memoizedProps.value;Nr(vm,y._currentValue),y._currentValue=E;break;case 13:if(y=d.memoizedState,y!==null)return y.dehydrated!==null?(Nr(Ur,Ur.current&1),d.flags|=128,null):(m&d.child.childLanes)!==0?KN(c,d,m):(Nr(Ur,Ur.current&1),c=Qi(c,d,m),c!==null?c.sibling:null);Nr(Ur,Ur.current&1);break;case 19:if(y=(m&d.childLanes)!==0,(c.flags&128)!==0){if(y)return YN(c,d,m);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Nr(Ur,Ur.current),y)break;return null;case 22:case 23:return d.lanes=0,$N(c,d,m)}return Qi(c,d,m)}var QN,Mv,JN,ZN;QN=function(c,d){for(var m=d.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Mv=function(){},JN=function(c,d,m,y){var E=c.memoizedProps;if(E!==y){c=d.stateNode,ic(gi.current);var C=null;switch(m){case"input":E=Fe(c,E),y=Fe(c,y),C=[];break;case"select":E=ce({},E,{value:void 0}),y=ce({},y,{value:void 0}),C=[];break;case"textarea":E=nt(c,E),y=nt(c,y),C=[];break;default:typeof E.onClick!="function"&&typeof y.onClick=="function"&&(c.onclick=cm)}Xr(m,y);var W;m=null;for(Ce in E)if(!y.hasOwnProperty(Ce)&&E.hasOwnProperty(Ce)&&E[Ce]!=null)if(Ce==="style"){var de=E[Ce];for(W in de)de.hasOwnProperty(W)&&(m||(m={}),m[W]="")}else Ce!=="dangerouslySetInnerHTML"&&Ce!=="children"&&Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&Ce!=="autoFocus"&&(s.hasOwnProperty(Ce)?C||(C=[]):(C=C||[]).push(Ce,null));for(Ce in y){var he=y[Ce];if(de=E!=null?E[Ce]:void 0,y.hasOwnProperty(Ce)&&he!==de&&(he!=null||de!=null))if(Ce==="style")if(de){for(W in de)!de.hasOwnProperty(W)||he&&he.hasOwnProperty(W)||(m||(m={}),m[W]="");for(W in he)he.hasOwnProperty(W)&&de[W]!==he[W]&&(m||(m={}),m[W]=he[W])}else m||(C||(C=[]),C.push(Ce,m)),m=he;else Ce==="dangerouslySetInnerHTML"?(he=he?he.__html:void 0,de=de?de.__html:void 0,he!=null&&de!==he&&(C=C||[]).push(Ce,he)):Ce==="children"?typeof he!="string"&&typeof he!="number"||(C=C||[]).push(Ce,""+he):Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ce)?(he!=null&&Ce==="onScroll"&&Tr("scroll",c),C||de===he||(C=[])):(C=C||[]).push(Ce,he))}m&&(C=C||[]).push("style",m);var Ce=C;(d.updateQueue=Ce)&&(d.flags|=4)}},ZN=function(c,d,m,y){m!==y&&(d.flags|=4)};function Ph(c,d){if(!Mr)switch(c.tailMode){case"hidden":d=c.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var y=null;m!==null;)m.alternate!==null&&(y=m),m=m.sibling;y===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:y.sibling=null}}function is(c){var d=c.alternate!==null&&c.alternate.child===c.child,m=0,y=0;if(d)for(var E=c.child;E!==null;)m|=E.lanes|E.childLanes,y|=E.subtreeFlags&14680064,y|=E.flags&14680064,E.return=c,E=E.sibling;else for(E=c.child;E!==null;)m|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=c,E=E.sibling;return c.subtreeFlags|=y,c.childLanes=m,d}function PP(c,d,m){var y=d.pendingProps;switch(iv(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return is(d),null;case 1:return Ms(d.type)&&dm(),is(d),null;case 3:return y=d.stateNode,Ou(),jr(Os),jr(ss),yv(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(c===null||c.child===null)&&(xm(d)?d.flags|=4:c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Wa!==null&&(Xv(Wa),Wa=null))),Mv(c,d),is(d),null;case 5:gv(d);var E=ic(jh.current);if(m=d.type,c!==null&&d.stateNode!=null)JN(c,d,m,y,E),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!y){if(d.stateNode===null)throw Error(r(166));return is(d),null}if(c=ic(gi.current),xm(d)){y=d.stateNode,m=d.type;var C=d.memoizedProps;switch(y[xi]=d,y[Nh]=C,c=(d.mode&1)!==0,m){case"dialog":Tr("cancel",y),Tr("close",y);break;case"iframe":case"object":case"embed":Tr("load",y);break;case"video":case"audio":for(E=0;E<wh.length;E++)Tr(wh[E],y);break;case"source":Tr("error",y);break;case"img":case"image":case"link":Tr("error",y),Tr("load",y);break;case"details":Tr("toggle",y);break;case"input":ge(y,C),Tr("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!C.multiple},Tr("invalid",y);break;case"textarea":vt(y,C),Tr("invalid",y)}Xr(m,C),E=null;for(var W in C)if(C.hasOwnProperty(W)){var de=C[W];W==="children"?typeof de=="string"?y.textContent!==de&&(C.suppressHydrationWarning!==!0&&lm(y.textContent,de,c),E=["children",de]):typeof de=="number"&&y.textContent!==""+de&&(C.suppressHydrationWarning!==!0&&lm(y.textContent,de,c),E=["children",""+de]):s.hasOwnProperty(W)&&de!=null&&W==="onScroll"&&Tr("scroll",y)}switch(m){case"input":Xe(y),ve(y,C,!0);break;case"textarea":Xe(y),ye(y);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(y.onclick=cm)}y=E,d.updateQueue=y,y!==null&&(d.flags|=4)}else{W=E.nodeType===9?E:E.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Ee(m)),c==="http://www.w3.org/1999/xhtml"?m==="script"?(c=W.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof y.is=="string"?c=W.createElement(m,{is:y.is}):(c=W.createElement(m),m==="select"&&(W=c,y.multiple?W.multiple=!0:y.size&&(W.size=y.size))):c=W.createElementNS(c,m),c[xi]=d,c[Nh]=y,QN(c,d,!1,!1),d.stateNode=c;e:{switch(W=sn(m,y),m){case"dialog":Tr("cancel",c),Tr("close",c),E=y;break;case"iframe":case"object":case"embed":Tr("load",c),E=y;break;case"video":case"audio":for(E=0;E<wh.length;E++)Tr(wh[E],c);E=y;break;case"source":Tr("error",c),E=y;break;case"img":case"image":case"link":Tr("error",c),Tr("load",c),E=y;break;case"details":Tr("toggle",c),E=y;break;case"input":ge(c,y),E=Fe(c,y),Tr("invalid",c);break;case"option":E=y;break;case"select":c._wrapperState={wasMultiple:!!y.multiple},E=ce({},y,{value:void 0}),Tr("invalid",c);break;case"textarea":vt(c,y),E=nt(c,y),Tr("invalid",c);break;default:E=y}Xr(m,E),de=E;for(C in de)if(de.hasOwnProperty(C)){var he=de[C];C==="style"?Vr(c,he):C==="dangerouslySetInnerHTML"?(he=he?he.__html:void 0,he!=null&&Lt(c,he)):C==="children"?typeof he=="string"?(m!=="textarea"||he!=="")&&mt(c,he):typeof he=="number"&&mt(c,""+he):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(s.hasOwnProperty(C)?he!=null&&C==="onScroll"&&Tr("scroll",c):he!=null&&k(c,C,he,W))}switch(m){case"input":Xe(c),ve(c,y,!1);break;case"textarea":Xe(c),ye(c);break;case"option":y.value!=null&&c.setAttribute("value",""+me(y.value));break;case"select":c.multiple=!!y.multiple,C=y.value,C!=null?ze(c,!!y.multiple,C,!1):y.defaultValue!=null&&ze(c,!!y.multiple,y.defaultValue,!0);break;default:typeof E.onClick=="function"&&(c.onclick=cm)}switch(m){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return is(d),null;case 6:if(c&&d.stateNode!=null)ZN(c,d,c.memoizedProps,y);else{if(typeof y!="string"&&d.stateNode===null)throw Error(r(166));if(m=ic(jh.current),ic(gi.current),xm(d)){if(y=d.stateNode,m=d.memoizedProps,y[xi]=d,(C=y.nodeValue!==m)&&(c=ea,c!==null))switch(c.tag){case 3:lm(y.nodeValue,m,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&lm(y.nodeValue,m,(c.mode&1)!==0)}C&&(d.flags|=4)}else y=(m.nodeType===9?m:m.ownerDocument).createTextNode(y),y[xi]=d,d.stateNode=y}return is(d),null;case 13:if(jr(Ur),y=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Mr&&ta!==null&&(d.mode&1)!==0&&(d.flags&128)===0)rN(),Pu(),d.flags|=98560,C=!1;else if(C=xm(d),y!==null&&y.dehydrated!==null){if(c===null){if(!C)throw Error(r(318));if(C=d.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[xi]=d}else Pu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;is(d),C=!1}else Wa!==null&&(Xv(Wa),Wa=null),C=!0;if(!C)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=m,d):(y=y!==null,y!==(c!==null&&c.memoizedState!==null)&&y&&(d.child.flags|=8192,(d.mode&1)!==0&&(c===null||(Ur.current&1)!==0?En===0&&(En=3):Jv())),d.updateQueue!==null&&(d.flags|=4),is(d),null);case 4:return Ou(),Mv(c,d),c===null&&bh(d.stateNode.containerInfo),is(d),null;case 10:return hv(d.type._context),is(d),null;case 17:return Ms(d.type)&&dm(),is(d),null;case 19:if(jr(Ur),C=d.memoizedState,C===null)return is(d),null;if(y=(d.flags&128)!==0,W=C.rendering,W===null)if(y)Ph(C,!1);else{if(En!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(W=_m(c),W!==null){for(d.flags|=128,Ph(C,!1),y=W.updateQueue,y!==null&&(d.updateQueue=y,d.flags|=4),d.subtreeFlags=0,y=m,m=d.child;m!==null;)C=m,c=y,C.flags&=14680066,W=C.alternate,W===null?(C.childLanes=0,C.lanes=c,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=W.childLanes,C.lanes=W.lanes,C.child=W.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=W.memoizedProps,C.memoizedState=W.memoizedState,C.updateQueue=W.updateQueue,C.type=W.type,c=W.dependencies,C.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),m=m.sibling;return Nr(Ur,Ur.current&1|2),d.child}c=c.sibling}C.tail!==null&&Ye()>Uu&&(d.flags|=128,y=!0,Ph(C,!1),d.lanes=4194304)}else{if(!y)if(c=_m(W),c!==null){if(d.flags|=128,y=!0,m=c.updateQueue,m!==null&&(d.updateQueue=m,d.flags|=4),Ph(C,!0),C.tail===null&&C.tailMode==="hidden"&&!W.alternate&&!Mr)return is(d),null}else 2*Ye()-C.renderingStartTime>Uu&&m!==1073741824&&(d.flags|=128,y=!0,Ph(C,!1),d.lanes=4194304);C.isBackwards?(W.sibling=d.child,d.child=W):(m=C.last,m!==null?m.sibling=W:d.child=W,C.last=W)}return C.tail!==null?(d=C.tail,C.rendering=d,C.tail=d.sibling,C.renderingStartTime=Ye(),d.sibling=null,m=Ur.current,Nr(Ur,y?m&1|2:m&1),d):(is(d),null);case 22:case 23:return Qv(),y=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==y&&(d.flags|=8192),y&&(d.mode&1)!==0?(ra&1073741824)!==0&&(is(d),d.subtreeFlags&6&&(d.flags|=8192)):is(d),null;case 24:return null;case 25:return null}throw Error(r(156,d.tag))}function DP(c,d){switch(iv(d),d.tag){case 1:return Ms(d.type)&&dm(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return Ou(),jr(Os),jr(ss),yv(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 5:return gv(d),null;case 13:if(jr(Ur),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Pu()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return jr(Ur),null;case 4:return Ou(),null;case 10:return hv(d.type._context),null;case 22:case 23:return Qv(),null;case 24:return null;default:return null}}var Im=!1,os=!1,FP=typeof WeakSet=="function"?WeakSet:Set,xt=null;function Vu(c,d){var m=c.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(y){Yr(c,d,y)}else m.current=null}function Vv(c,d,m){try{m()}catch(y){Yr(c,d,y)}}var eE=!1;function LP(c,d){if(Qg=Uo,c=R_(),$g(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var y=m.getSelection&&m.getSelection();if(y&&y.rangeCount!==0){m=y.anchorNode;var E=y.anchorOffset,C=y.focusNode;y=y.focusOffset;try{m.nodeType,C.nodeType}catch{m=null;break e}var W=0,de=-1,he=-1,Ce=0,qe=0,Qe=c,We=null;t:for(;;){for(var ht;Qe!==m||E!==0&&Qe.nodeType!==3||(de=W+E),Qe!==C||y!==0&&Qe.nodeType!==3||(he=W+y),Qe.nodeType===3&&(W+=Qe.nodeValue.length),(ht=Qe.firstChild)!==null;)We=Qe,Qe=ht;for(;;){if(Qe===c)break t;if(We===m&&++Ce===E&&(de=W),We===C&&++qe===y&&(he=W),(ht=Qe.nextSibling)!==null)break;Qe=We,We=Qe.parentNode}Qe=ht}m=de===-1||he===-1?null:{start:de,end:he}}else m=null}m=m||{start:0,end:0}}else m=null;for(Jg={focusedElem:c,selectionRange:m},Uo=!1,xt=d;xt!==null;)if(d=xt,c=d.child,(d.subtreeFlags&1028)!==0&&c!==null)c.return=d,xt=c;else for(;xt!==null;){d=xt;try{var gt=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var yt=gt.memoizedProps,on=gt.memoizedState,Ne=d.stateNode,xe=Ne.getSnapshotBeforeUpdate(d.elementType===d.type?yt:qa(d.type,yt),on);Ne.__reactInternalSnapshotBeforeUpdate=xe}break;case 3:var Te=d.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(tt){Yr(d,d.return,tt)}if(c=d.sibling,c!==null){c.return=d.return,xt=c;break}xt=d.return}return gt=eE,eE=!1,gt}function Dh(c,d,m){var y=d.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var E=y=y.next;do{if((E.tag&c)===c){var C=E.destroy;E.destroy=void 0,C!==void 0&&Vv(d,m,C)}E=E.next}while(E!==y)}}function Rm(c,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&c)===c){var y=m.create;m.destroy=y()}m=m.next}while(m!==d)}}function Bv(c){var d=c.ref;if(d!==null){var m=c.stateNode;switch(c.tag){case 5:c=m;break;default:c=m}typeof d=="function"?d(c):d.current=c}}function tE(c){var d=c.alternate;d!==null&&(c.alternate=null,tE(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&(delete d[xi],delete d[Nh],delete d[rv],delete d[vP],delete d[yP])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function rE(c){return c.tag===5||c.tag===3||c.tag===4}function nE(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||rE(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Uv(c,d,m){var y=c.tag;if(y===5||y===6)c=c.stateNode,d?m.nodeType===8?m.parentNode.insertBefore(c,d):m.insertBefore(c,d):(m.nodeType===8?(d=m.parentNode,d.insertBefore(c,m)):(d=m,d.appendChild(c)),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=cm));else if(y!==4&&(c=c.child,c!==null))for(Uv(c,d,m),c=c.sibling;c!==null;)Uv(c,d,m),c=c.sibling}function zv(c,d,m){var y=c.tag;if(y===5||y===6)c=c.stateNode,d?m.insertBefore(c,d):m.appendChild(c);else if(y!==4&&(c=c.child,c!==null))for(zv(c,d,m),c=c.sibling;c!==null;)zv(c,d,m),c=c.sibling}var Gn=null,Ga=!1;function Yo(c,d,m){for(m=m.child;m!==null;)sE(c,d,m),m=m.sibling}function sE(c,d,m){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Ys,m)}catch{}switch(m.tag){case 5:os||Vu(m,d);case 6:var y=Gn,E=Ga;Gn=null,Yo(c,d,m),Gn=y,Ga=E,Gn!==null&&(Ga?(c=Gn,m=m.stateNode,c.nodeType===8?c.parentNode.removeChild(m):c.removeChild(m)):Gn.removeChild(m.stateNode));break;case 18:Gn!==null&&(Ga?(c=Gn,m=m.stateNode,c.nodeType===8?tv(c.parentNode,m):c.nodeType===1&&tv(c,m),za(c)):tv(Gn,m.stateNode));break;case 4:y=Gn,E=Ga,Gn=m.stateNode.containerInfo,Ga=!0,Yo(c,d,m),Gn=y,Ga=E;break;case 0:case 11:case 14:case 15:if(!os&&(y=m.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){E=y=y.next;do{var C=E,W=C.destroy;C=C.tag,W!==void 0&&((C&2)!==0||(C&4)!==0)&&Vv(m,d,W),E=E.next}while(E!==y)}Yo(c,d,m);break;case 1:if(!os&&(Vu(m,d),y=m.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=m.memoizedProps,y.state=m.memoizedState,y.componentWillUnmount()}catch(de){Yr(m,d,de)}Yo(c,d,m);break;case 21:Yo(c,d,m);break;case 22:m.mode&1?(os=(y=os)||m.memoizedState!==null,Yo(c,d,m),os=y):Yo(c,d,m);break;default:Yo(c,d,m)}}function aE(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var m=c.stateNode;m===null&&(m=c.stateNode=new FP),d.forEach(function(y){var E=WP.bind(null,c,y);m.has(y)||(m.add(y),y.then(E,E))})}}function Ka(c,d){var m=d.deletions;if(m!==null)for(var y=0;y<m.length;y++){var E=m[y];try{var C=c,W=d,de=W;e:for(;de!==null;){switch(de.tag){case 5:Gn=de.stateNode,Ga=!1;break e;case 3:Gn=de.stateNode.containerInfo,Ga=!0;break e;case 4:Gn=de.stateNode.containerInfo,Ga=!0;break e}de=de.return}if(Gn===null)throw Error(r(160));sE(C,W,E),Gn=null,Ga=!1;var he=E.alternate;he!==null&&(he.return=null),E.return=null}catch(Ce){Yr(E,d,Ce)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)iE(d,c),d=d.sibling}function iE(c,d){var m=c.alternate,y=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Ka(d,c),yi(c),y&4){try{Dh(3,c,c.return),Rm(3,c)}catch(yt){Yr(c,c.return,yt)}try{Dh(5,c,c.return)}catch(yt){Yr(c,c.return,yt)}}break;case 1:Ka(d,c),yi(c),y&512&&m!==null&&Vu(m,m.return);break;case 5:if(Ka(d,c),yi(c),y&512&&m!==null&&Vu(m,m.return),c.flags&32){var E=c.stateNode;try{mt(E,"")}catch(yt){Yr(c,c.return,yt)}}if(y&4&&(E=c.stateNode,E!=null)){var C=c.memoizedProps,W=m!==null?m.memoizedProps:C,de=c.type,he=c.updateQueue;if(c.updateQueue=null,he!==null)try{de==="input"&&C.type==="radio"&&C.name!=null&&be(E,C),sn(de,W);var Ce=sn(de,C);for(W=0;W<he.length;W+=2){var qe=he[W],Qe=he[W+1];qe==="style"?Vr(E,Qe):qe==="dangerouslySetInnerHTML"?Lt(E,Qe):qe==="children"?mt(E,Qe):k(E,qe,Qe,Ce)}switch(de){case"input":se(E,C);break;case"textarea":Le(E,C);break;case"select":var We=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!C.multiple;var ht=C.value;ht!=null?ze(E,!!C.multiple,ht,!1):We!==!!C.multiple&&(C.defaultValue!=null?ze(E,!!C.multiple,C.defaultValue,!0):ze(E,!!C.multiple,C.multiple?[]:"",!1))}E[Nh]=C}catch(yt){Yr(c,c.return,yt)}}break;case 6:if(Ka(d,c),yi(c),y&4){if(c.stateNode===null)throw Error(r(162));E=c.stateNode,C=c.memoizedProps;try{E.nodeValue=C}catch(yt){Yr(c,c.return,yt)}}break;case 3:if(Ka(d,c),yi(c),y&4&&m!==null&&m.memoizedState.isDehydrated)try{za(d.containerInfo)}catch(yt){Yr(c,c.return,yt)}break;case 4:Ka(d,c),yi(c);break;case 13:Ka(d,c),yi(c),E=c.child,E.flags&8192&&(C=E.memoizedState!==null,E.stateNode.isHidden=C,!C||E.alternate!==null&&E.alternate.memoizedState!==null||(Wv=Ye())),y&4&&aE(c);break;case 22:if(qe=m!==null&&m.memoizedState!==null,c.mode&1?(os=(Ce=os)||qe,Ka(d,c),os=Ce):Ka(d,c),yi(c),y&8192){if(Ce=c.memoizedState!==null,(c.stateNode.isHidden=Ce)&&!qe&&(c.mode&1)!==0)for(xt=c,qe=c.child;qe!==null;){for(Qe=xt=qe;xt!==null;){switch(We=xt,ht=We.child,We.tag){case 0:case 11:case 14:case 15:Dh(4,We,We.return);break;case 1:Vu(We,We.return);var gt=We.stateNode;if(typeof gt.componentWillUnmount=="function"){y=We,m=We.return;try{d=y,gt.props=d.memoizedProps,gt.state=d.memoizedState,gt.componentWillUnmount()}catch(yt){Yr(y,m,yt)}}break;case 5:Vu(We,We.return);break;case 22:if(We.memoizedState!==null){cE(Qe);continue}}ht!==null?(ht.return=We,xt=ht):cE(Qe)}qe=qe.sibling}e:for(qe=null,Qe=c;;){if(Qe.tag===5){if(qe===null){qe=Qe;try{E=Qe.stateNode,Ce?(C=E.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(de=Qe.stateNode,he=Qe.memoizedProps.style,W=he!=null&&he.hasOwnProperty("display")?he.display:null,de.style.display=Jt("display",W))}catch(yt){Yr(c,c.return,yt)}}}else if(Qe.tag===6){if(qe===null)try{Qe.stateNode.nodeValue=Ce?"":Qe.memoizedProps}catch(yt){Yr(c,c.return,yt)}}else if((Qe.tag!==22&&Qe.tag!==23||Qe.memoizedState===null||Qe===c)&&Qe.child!==null){Qe.child.return=Qe,Qe=Qe.child;continue}if(Qe===c)break e;for(;Qe.sibling===null;){if(Qe.return===null||Qe.return===c)break e;qe===Qe&&(qe=null),Qe=Qe.return}qe===Qe&&(qe=null),Qe.sibling.return=Qe.return,Qe=Qe.sibling}}break;case 19:Ka(d,c),yi(c),y&4&&aE(c);break;case 21:break;default:Ka(d,c),yi(c)}}function yi(c){var d=c.flags;if(d&2){try{e:{for(var m=c.return;m!==null;){if(rE(m)){var y=m;break e}m=m.return}throw Error(r(160))}switch(y.tag){case 5:var E=y.stateNode;y.flags&32&&(mt(E,""),y.flags&=-33);var C=nE(c);zv(c,C,E);break;case 3:case 4:var W=y.stateNode.containerInfo,de=nE(c);Uv(c,de,W);break;default:throw Error(r(161))}}catch(he){Yr(c,c.return,he)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function OP(c,d,m){xt=c,oE(c)}function oE(c,d,m){for(var y=(c.mode&1)!==0;xt!==null;){var E=xt,C=E.child;if(E.tag===22&&y){var W=E.memoizedState!==null||Im;if(!W){var de=E.alternate,he=de!==null&&de.memoizedState!==null||os;de=Im;var Ce=os;if(Im=W,(os=he)&&!Ce)for(xt=E;xt!==null;)W=xt,he=W.child,W.tag===22&&W.memoizedState!==null?uE(E):he!==null?(he.return=W,xt=he):uE(E);for(;C!==null;)xt=C,oE(C),C=C.sibling;xt=E,Im=de,os=Ce}lE(c)}else(E.subtreeFlags&8772)!==0&&C!==null?(C.return=E,xt=C):lE(c)}}function lE(c){for(;xt!==null;){var d=xt;if((d.flags&8772)!==0){var m=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:os||Rm(5,d);break;case 1:var y=d.stateNode;if(d.flags&4&&!os)if(m===null)y.componentDidMount();else{var E=d.elementType===d.type?m.memoizedProps:qa(d.type,m.memoizedProps);y.componentDidUpdate(E,m.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var C=d.updateQueue;C!==null&&cN(d,C,y);break;case 3:var W=d.updateQueue;if(W!==null){if(m=null,d.child!==null)switch(d.child.tag){case 5:m=d.child.stateNode;break;case 1:m=d.child.stateNode}cN(d,W,m)}break;case 5:var de=d.stateNode;if(m===null&&d.flags&4){m=de;var he=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":he.autoFocus&&m.focus();break;case"img":he.src&&(m.src=he.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Ce=d.alternate;if(Ce!==null){var qe=Ce.memoizedState;if(qe!==null){var Qe=qe.dehydrated;Qe!==null&&za(Qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}os||d.flags&512&&Bv(d)}catch(We){Yr(d,d.return,We)}}if(d===c){xt=null;break}if(m=d.sibling,m!==null){m.return=d.return,xt=m;break}xt=d.return}}function cE(c){for(;xt!==null;){var d=xt;if(d===c){xt=null;break}var m=d.sibling;if(m!==null){m.return=d.return,xt=m;break}xt=d.return}}function uE(c){for(;xt!==null;){var d=xt;try{switch(d.tag){case 0:case 11:case 15:var m=d.return;try{Rm(4,d)}catch(he){Yr(d,m,he)}break;case 1:var y=d.stateNode;if(typeof y.componentDidMount=="function"){var E=d.return;try{y.componentDidMount()}catch(he){Yr(d,E,he)}}var C=d.return;try{Bv(d)}catch(he){Yr(d,C,he)}break;case 5:var W=d.return;try{Bv(d)}catch(he){Yr(d,W,he)}}}catch(he){Yr(d,d.return,he)}if(d===c){xt=null;break}var de=d.sibling;if(de!==null){de.return=d.return,xt=de;break}xt=d.return}}var MP=Math.ceil,Pm=F.ReactCurrentDispatcher,$v=F.ReactCurrentOwner,ba=F.ReactCurrentBatchConfig,tr=0,Pn=null,pn=null,Kn=0,ra=0,Bu=Wo(0),En=0,Fh=null,lc=0,Dm=0,Hv=0,Lh=null,Bs=null,Wv=0,Uu=1/0,Ji=null,Fm=!1,qv=null,Qo=null,Lm=!1,Jo=null,Om=0,Oh=0,Gv=null,Mm=-1,Vm=0;function js(){return(tr&6)!==0?Ye():Mm!==-1?Mm:Mm=Ye()}function Zo(c){return(c.mode&1)===0?1:(tr&2)!==0&&Kn!==0?Kn&-Kn:bP.transition!==null?(Vm===0&&(Vm=Yl()),Vm):(c=Yt,c!==0||(c=window.event,c=c===void 0?16:dh(c.type)),c)}function Xa(c,d,m,y){if(50<Oh)throw Oh=0,Gv=null,Error(r(185));Oo(c,m,y),((tr&2)===0||c!==Pn)&&(c===Pn&&((tr&2)===0&&(Dm|=m),En===4&&el(c,Kn)),Us(c,y),m===1&&tr===0&&(d.mode&1)===0&&(Uu=Ye()+500,fm&&Go()))}function Us(c,d){var m=c.callbackNode;Bi(c,d);var y=Xl(c,c===Pn?Kn:0);if(y===0)m!==null&&st(m),c.callbackNode=null,c.callbackPriority=0;else if(d=y&-y,c.callbackPriority!==d){if(m!=null&&st(m),d===1)c.tag===0?wP(hE.bind(null,c)):Q_(hE.bind(null,c)),xP(function(){(tr&6)===0&&Go()}),m=null;else{switch(Vo(y)){case 1:m=lr;break;case 4:m=ar;break;case 16:m=fr;break;case 536870912:m=ui;break;default:m=fr}m=wE(m,dE.bind(null,c))}c.callbackPriority=d,c.callbackNode=m}}function dE(c,d){if(Mm=-1,Vm=0,(tr&6)!==0)throw Error(r(327));var m=c.callbackNode;if(zu()&&c.callbackNode!==m)return null;var y=Xl(c,c===Pn?Kn:0);if(y===0)return null;if((y&30)!==0||(y&c.expiredLanes)!==0||d)d=Bm(c,y);else{d=y;var E=tr;tr|=2;var C=mE();(Pn!==c||Kn!==d)&&(Ji=null,Uu=Ye()+500,uc(c,d));do try{UP();break}catch(de){fE(c,de)}while(!0);dv(),Pm.current=C,tr=E,pn!==null?d=0:(Pn=null,Kn=0,d=En)}if(d!==0){if(d===2&&(E=Qs(c),E!==0&&(y=E,d=Kv(c,E))),d===1)throw m=Fh,uc(c,0),el(c,y),Us(c,Ye()),m;if(d===6)el(c,y);else{if(E=c.current.alternate,(y&30)===0&&!VP(E)&&(d=Bm(c,y),d===2&&(C=Qs(c),C!==0&&(y=C,d=Kv(c,C))),d===1))throw m=Fh,uc(c,0),el(c,y),Us(c,Ye()),m;switch(c.finishedWork=E,c.finishedLanes=y,d){case 0:case 1:throw Error(r(345));case 2:dc(c,Bs,Ji);break;case 3:if(el(c,y),(y&130023424)===y&&(d=Wv+500-Ye(),10<d)){if(Xl(c,0)!==0)break;if(E=c.suspendedLanes,(E&y)!==y){js(),c.pingedLanes|=c.suspendedLanes&E;break}c.timeoutHandle=ev(dc.bind(null,c,Bs,Ji),d);break}dc(c,Bs,Ji);break;case 4:if(el(c,y),(y&4194240)===y)break;for(d=c.eventTimes,E=-1;0<y;){var W=31-kr(y);C=1<<W,W=d[W],W>E&&(E=W),y&=~C}if(y=E,y=Ye()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*MP(y/1960))-y,10<y){c.timeoutHandle=ev(dc.bind(null,c,Bs,Ji),y);break}dc(c,Bs,Ji);break;case 5:dc(c,Bs,Ji);break;default:throw Error(r(329))}}}return Us(c,Ye()),c.callbackNode===m?dE.bind(null,c):null}function Kv(c,d){var m=Lh;return c.current.memoizedState.isDehydrated&&(uc(c,d).flags|=256),c=Bm(c,d),c!==2&&(d=Bs,Bs=m,d!==null&&Xv(d)),c}function Xv(c){Bs===null?Bs=c:Bs.push.apply(Bs,c)}function VP(c){for(var d=c;;){if(d.flags&16384){var m=d.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var y=0;y<m.length;y++){var E=m[y],C=E.getSnapshot;E=E.value;try{if(!Ha(C(),E))return!1}catch{return!1}}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function el(c,d){for(d&=~Hv,d&=~Dm,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var m=31-kr(d),y=1<<m;c[m]=-1,d&=~y}}function hE(c){if((tr&6)!==0)throw Error(r(327));zu();var d=Xl(c,0);if((d&1)===0)return Us(c,Ye()),null;var m=Bm(c,d);if(c.tag!==0&&m===2){var y=Qs(c);y!==0&&(d=y,m=Kv(c,y))}if(m===1)throw m=Fh,uc(c,0),el(c,d),Us(c,Ye()),m;if(m===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,dc(c,Bs,Ji),Us(c,Ye()),null}function Yv(c,d){var m=tr;tr|=1;try{return c(d)}finally{tr=m,tr===0&&(Uu=Ye()+500,fm&&Go())}}function cc(c){Jo!==null&&Jo.tag===0&&(tr&6)===0&&zu();var d=tr;tr|=1;var m=ba.transition,y=Yt;try{if(ba.transition=null,Yt=1,c)return c()}finally{Yt=y,ba.transition=m,tr=d,(tr&6)===0&&Go()}}function Qv(){ra=Bu.current,jr(Bu)}function uc(c,d){c.finishedWork=null,c.finishedLanes=0;var m=c.timeoutHandle;if(m!==-1&&(c.timeoutHandle=-1,pP(m)),pn!==null)for(m=pn.return;m!==null;){var y=m;switch(iv(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&dm();break;case 3:Ou(),jr(Os),jr(ss),yv();break;case 5:gv(y);break;case 4:Ou();break;case 13:jr(Ur);break;case 19:jr(Ur);break;case 10:hv(y.type._context);break;case 22:case 23:Qv()}m=m.return}if(Pn=c,pn=c=tl(c.current,null),Kn=ra=d,En=0,Fh=null,Hv=Dm=lc=0,Bs=Lh=null,ac!==null){for(d=0;d<ac.length;d++)if(m=ac[d],y=m.interleaved,y!==null){m.interleaved=null;var E=y.next,C=m.pending;if(C!==null){var W=C.next;C.next=E,y.next=W}m.pending=y}ac=null}return c}function fE(c,d){do{var m=pn;try{if(dv(),Nm.current=Tm,Em){for(var y=zr.memoizedState;y!==null;){var E=y.queue;E!==null&&(E.pending=null),y=y.next}Em=!1}if(oc=0,Rn=Nn=zr=null,Ah=!1,Ch=0,$v.current=null,m===null||m.return===null){En=1,Fh=d,pn=null;break}e:{var C=c,W=m.return,de=m,he=d;if(d=Kn,de.flags|=32768,he!==null&&typeof he=="object"&&typeof he.then=="function"){var Ce=he,qe=de,Qe=qe.tag;if((qe.mode&1)===0&&(Qe===0||Qe===11||Qe===15)){var We=qe.alternate;We?(qe.updateQueue=We.updateQueue,qe.memoizedState=We.memoizedState,qe.lanes=We.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var ht=MN(W);if(ht!==null){ht.flags&=-257,VN(ht,W,de,C,d),ht.mode&1&&ON(C,Ce,d),d=ht,he=Ce;var gt=d.updateQueue;if(gt===null){var yt=new Set;yt.add(he),d.updateQueue=yt}else gt.add(he);break e}else{if((d&1)===0){ON(C,Ce,d),Jv();break e}he=Error(r(426))}}else if(Mr&&de.mode&1){var on=MN(W);if(on!==null){(on.flags&65536)===0&&(on.flags|=256),VN(on,W,de,C,d),cv(Mu(he,de));break e}}C=he=Mu(he,de),En!==4&&(En=2),Lh===null?Lh=[C]:Lh.push(C),C=W;do{switch(C.tag){case 3:C.flags|=65536,d&=-d,C.lanes|=d;var Ne=FN(C,he,d);lN(C,Ne);break e;case 1:de=he;var xe=C.type,Te=C.stateNode;if((C.flags&128)===0&&(typeof xe.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(Qo===null||!Qo.has(Te)))){C.flags|=65536,d&=-d,C.lanes|=d;var tt=LN(C,de,d);lN(C,tt);break e}}C=C.return}while(C!==null)}xE(m)}catch(wt){d=wt,pn===m&&m!==null&&(pn=m=m.return);continue}break}while(!0)}function mE(){var c=Pm.current;return Pm.current=Tm,c===null?Tm:c}function Jv(){(En===0||En===3||En===2)&&(En=4),Pn===null||(lc&268435455)===0&&(Dm&268435455)===0||el(Pn,Kn)}function Bm(c,d){var m=tr;tr|=2;var y=mE();(Pn!==c||Kn!==d)&&(Ji=null,uc(c,d));do try{BP();break}catch(E){fE(c,E)}while(!0);if(dv(),tr=m,Pm.current=y,pn!==null)throw Error(r(261));return Pn=null,Kn=0,En}function BP(){for(;pn!==null;)pE(pn)}function UP(){for(;pn!==null&&!dt();)pE(pn)}function pE(c){var d=yE(c.alternate,c,ra);c.memoizedProps=c.pendingProps,d===null?xE(c):pn=d,$v.current=null}function xE(c){var d=c;do{var m=d.alternate;if(c=d.return,(d.flags&32768)===0){if(m=PP(m,d,ra),m!==null){pn=m;return}}else{if(m=DP(m,d),m!==null){m.flags&=32767,pn=m;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{En=6,pn=null;return}}if(d=d.sibling,d!==null){pn=d;return}pn=d=c}while(d!==null);En===0&&(En=5)}function dc(c,d,m){var y=Yt,E=ba.transition;try{ba.transition=null,Yt=1,zP(c,d,m,y)}finally{ba.transition=E,Yt=y}return null}function zP(c,d,m,y){do zu();while(Jo!==null);if((tr&6)!==0)throw Error(r(327));m=c.finishedWork;var E=c.finishedLanes;if(m===null)return null;if(c.finishedWork=null,c.finishedLanes=0,m===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var C=m.lanes|m.childLanes;if(br(c,C),c===Pn&&(pn=Pn=null,Kn=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||Lm||(Lm=!0,wE(fr,function(){return zu(),null})),C=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||C){C=ba.transition,ba.transition=null;var W=Yt;Yt=1;var de=tr;tr|=4,$v.current=null,LP(c,m),iE(m,c),lP(Jg),Uo=!!Qg,Jg=Qg=null,c.current=m,OP(m),Je(),tr=de,Yt=W,ba.transition=C}else c.current=m;if(Lm&&(Lm=!1,Jo=c,Om=E),C=c.pendingLanes,C===0&&(Qo=null),Do(m.stateNode),Us(c,Ye()),d!==null)for(y=c.onRecoverableError,m=0;m<d.length;m++)E=d[m],y(E.value,{componentStack:E.stack,digest:E.digest});if(Fm)throw Fm=!1,c=qv,qv=null,c;return(Om&1)!==0&&c.tag!==0&&zu(),C=c.pendingLanes,(C&1)!==0?c===Gv?Oh++:(Oh=0,Gv=c):Oh=0,Go(),null}function zu(){if(Jo!==null){var c=Vo(Om),d=ba.transition,m=Yt;try{if(ba.transition=null,Yt=16>c?16:c,Jo===null)var y=!1;else{if(c=Jo,Jo=null,Om=0,(tr&6)!==0)throw Error(r(331));var E=tr;for(tr|=4,xt=c.current;xt!==null;){var C=xt,W=C.child;if((xt.flags&16)!==0){var de=C.deletions;if(de!==null){for(var he=0;he<de.length;he++){var Ce=de[he];for(xt=Ce;xt!==null;){var qe=xt;switch(qe.tag){case 0:case 11:case 15:Dh(8,qe,C)}var Qe=qe.child;if(Qe!==null)Qe.return=qe,xt=Qe;else for(;xt!==null;){qe=xt;var We=qe.sibling,ht=qe.return;if(tE(qe),qe===Ce){xt=null;break}if(We!==null){We.return=ht,xt=We;break}xt=ht}}}var gt=C.alternate;if(gt!==null){var yt=gt.child;if(yt!==null){gt.child=null;do{var on=yt.sibling;yt.sibling=null,yt=on}while(yt!==null)}}xt=C}}if((C.subtreeFlags&2064)!==0&&W!==null)W.return=C,xt=W;else e:for(;xt!==null;){if(C=xt,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:Dh(9,C,C.return)}var Ne=C.sibling;if(Ne!==null){Ne.return=C.return,xt=Ne;break e}xt=C.return}}var xe=c.current;for(xt=xe;xt!==null;){W=xt;var Te=W.child;if((W.subtreeFlags&2064)!==0&&Te!==null)Te.return=W,xt=Te;else e:for(W=xe;xt!==null;){if(de=xt,(de.flags&2048)!==0)try{switch(de.tag){case 0:case 11:case 15:Rm(9,de)}}catch(wt){Yr(de,de.return,wt)}if(de===W){xt=null;break e}var tt=de.sibling;if(tt!==null){tt.return=de.return,xt=tt;break e}xt=de.return}}if(tr=E,Go(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Ys,c)}catch{}y=!0}return y}finally{Yt=m,ba.transition=d}}return!1}function gE(c,d,m){d=Mu(m,d),d=FN(c,d,1),c=Xo(c,d,1),d=js(),c!==null&&(Oo(c,1,d),Us(c,d))}function Yr(c,d,m){if(c.tag===3)gE(c,c,m);else for(;d!==null;){if(d.tag===3){gE(d,c,m);break}else if(d.tag===1){var y=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Qo===null||!Qo.has(y))){c=Mu(m,c),c=LN(d,c,1),d=Xo(d,c,1),c=js(),d!==null&&(Oo(d,1,c),Us(d,c));break}}d=d.return}}function $P(c,d,m){var y=c.pingCache;y!==null&&y.delete(d),d=js(),c.pingedLanes|=c.suspendedLanes&m,Pn===c&&(Kn&m)===m&&(En===4||En===3&&(Kn&130023424)===Kn&&500>Ye()-Wv?uc(c,0):Hv|=m),Us(c,d)}function vE(c,d){d===0&&((c.mode&1)===0?d=1:(d=du,du<<=1,(du&130023424)===0&&(du=4194304)));var m=js();c=Xi(c,d),c!==null&&(Oo(c,d,m),Us(c,m))}function HP(c){var d=c.memoizedState,m=0;d!==null&&(m=d.retryLane),vE(c,m)}function WP(c,d){var m=0;switch(c.tag){case 13:var y=c.stateNode,E=c.memoizedState;E!==null&&(m=E.retryLane);break;case 19:y=c.stateNode;break;default:throw Error(r(314))}y!==null&&y.delete(d),vE(c,m)}var yE;yE=function(c,d,m){if(c!==null)if(c.memoizedProps!==d.pendingProps||Os.current)Vs=!0;else{if((c.lanes&m)===0&&(d.flags&128)===0)return Vs=!1,RP(c,d,m);Vs=(c.flags&131072)!==0}else Vs=!1,Mr&&(d.flags&1048576)!==0&&J_(d,pm,d.index);switch(d.lanes=0,d.tag){case 2:var y=d.type;Cm(c,d),c=d.pendingProps;var E=Cu(d,ss.current);Lu(d,m),E=_v(null,d,y,c,E,m);var C=Nv();return d.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Ms(y)?(C=!0,hm(d)):C=!1,d.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,pv(d),E.updater=jm,d.stateNode=E,E._reactInternals=d,Av(d,y,c,m),d=Pv(null,d,y,!0,C,m)):(d.tag=0,Mr&&C&&av(d),Ts(null,d,E,m),d=d.child),d;case 16:y=d.elementType;e:{switch(Cm(c,d),c=d.pendingProps,E=y._init,y=E(y._payload),d.type=y,E=d.tag=GP(y),c=qa(y,c),E){case 0:d=Rv(null,d,y,c,m);break e;case 1:d=WN(null,d,y,c,m);break e;case 11:d=BN(null,d,y,c,m);break e;case 14:d=UN(null,d,y,qa(y.type,c),m);break e}throw Error(r(306,y,""))}return d;case 0:return y=d.type,E=d.pendingProps,E=d.elementType===y?E:qa(y,E),Rv(c,d,y,E,m);case 1:return y=d.type,E=d.pendingProps,E=d.elementType===y?E:qa(y,E),WN(c,d,y,E,m);case 3:e:{if(qN(d),c===null)throw Error(r(387));y=d.pendingProps,C=d.memoizedState,E=C.element,oN(c,d),bm(d,y,null,m);var W=d.memoizedState;if(y=W.element,C.isDehydrated)if(C={element:y,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},d.updateQueue.baseState=C,d.memoizedState=C,d.flags&256){E=Mu(Error(r(423)),d),d=GN(c,d,y,m,E);break e}else if(y!==E){E=Mu(Error(r(424)),d),d=GN(c,d,y,m,E);break e}else for(ta=Ho(d.stateNode.containerInfo.firstChild),ea=d,Mr=!0,Wa=null,m=aN(d,null,y,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Pu(),y===E){d=Qi(c,d,m);break e}Ts(c,d,y,m)}d=d.child}return d;case 5:return uN(d),c===null&&lv(d),y=d.type,E=d.pendingProps,C=c!==null?c.memoizedProps:null,W=E.children,Zg(y,E)?W=null:C!==null&&Zg(y,C)&&(d.flags|=32),HN(c,d),Ts(c,d,W,m),d.child;case 6:return c===null&&lv(d),null;case 13:return KN(c,d,m);case 4:return xv(d,d.stateNode.containerInfo),y=d.pendingProps,c===null?d.child=Du(d,null,y,m):Ts(c,d,y,m),d.child;case 11:return y=d.type,E=d.pendingProps,E=d.elementType===y?E:qa(y,E),BN(c,d,y,E,m);case 7:return Ts(c,d,d.pendingProps,m),d.child;case 8:return Ts(c,d,d.pendingProps.children,m),d.child;case 12:return Ts(c,d,d.pendingProps.children,m),d.child;case 10:e:{if(y=d.type._context,E=d.pendingProps,C=d.memoizedProps,W=E.value,Nr(vm,y._currentValue),y._currentValue=W,C!==null)if(Ha(C.value,W)){if(C.children===E.children&&!Os.current){d=Qi(c,d,m);break e}}else for(C=d.child,C!==null&&(C.return=d);C!==null;){var de=C.dependencies;if(de!==null){W=C.child;for(var he=de.firstContext;he!==null;){if(he.context===y){if(C.tag===1){he=Yi(-1,m&-m),he.tag=2;var Ce=C.updateQueue;if(Ce!==null){Ce=Ce.shared;var qe=Ce.pending;qe===null?he.next=he:(he.next=qe.next,qe.next=he),Ce.pending=he}}C.lanes|=m,he=C.alternate,he!==null&&(he.lanes|=m),fv(C.return,m,d),de.lanes|=m;break}he=he.next}}else if(C.tag===10)W=C.type===d.type?null:C.child;else if(C.tag===18){if(W=C.return,W===null)throw Error(r(341));W.lanes|=m,de=W.alternate,de!==null&&(de.lanes|=m),fv(W,m,d),W=C.sibling}else W=C.child;if(W!==null)W.return=C;else for(W=C;W!==null;){if(W===d){W=null;break}if(C=W.sibling,C!==null){C.return=W.return,W=C;break}W=W.return}C=W}Ts(c,d,E.children,m),d=d.child}return d;case 9:return E=d.type,y=d.pendingProps.children,Lu(d,m),E=ya(E),y=y(E),d.flags|=1,Ts(c,d,y,m),d.child;case 14:return y=d.type,E=qa(y,d.pendingProps),E=qa(y.type,E),UN(c,d,y,E,m);case 15:return zN(c,d,d.type,d.pendingProps,m);case 17:return y=d.type,E=d.pendingProps,E=d.elementType===y?E:qa(y,E),Cm(c,d),d.tag=1,Ms(y)?(c=!0,hm(d)):c=!1,Lu(d,m),PN(d,y,E),Av(d,y,E,m),Pv(null,d,y,!0,c,m);case 19:return YN(c,d,m);case 22:return $N(c,d,m)}throw Error(r(156,d.tag))};function wE(c,d){return Ge(c,d)}function qP(c,d,m,y){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _a(c,d,m,y){return new qP(c,d,m,y)}function Zv(c){return c=c.prototype,!(!c||!c.isReactComponent)}function GP(c){if(typeof c=="function")return Zv(c)?1:0;if(c!=null){if(c=c.$$typeof,c===O)return 11;if(c===Q)return 14}return 2}function tl(c,d){var m=c.alternate;return m===null?(m=_a(c.tag,d,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=d,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&14680064,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,d=c.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m}function Um(c,d,m,y,E,C){var W=2;if(y=c,typeof c=="function")Zv(c)&&(W=1);else if(typeof c=="string")W=5;else e:switch(c){case N:return hc(m.children,E,C,d);case T:W=8,E|=8;break;case P:return c=_a(12,m,d,E|2),c.elementType=P,c.lanes=C,c;case D:return c=_a(13,m,d,E),c.elementType=D,c.lanes=C,c;case G:return c=_a(19,m,d,E),c.elementType=G,c.lanes=C,c;case H:return zm(m,E,C,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case B:W=10;break e;case z:W=9;break e;case O:W=11;break e;case Q:W=14;break e;case ue:W=16,y=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return d=_a(W,m,d,E),d.elementType=c,d.type=y,d.lanes=C,d}function hc(c,d,m,y){return c=_a(7,c,y,d),c.lanes=m,c}function zm(c,d,m,y){return c=_a(22,c,y,d),c.elementType=H,c.lanes=m,c.stateNode={isHidden:!1},c}function ey(c,d,m){return c=_a(6,c,null,d),c.lanes=m,c}function ty(c,d,m){return d=_a(4,c.children!==null?c.children:[],c.key,d),d.lanes=m,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function KP(c,d,m,y,E){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lo(0),this.expirationTimes=Lo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lo(0),this.identifierPrefix=y,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function ry(c,d,m,y,E,C,W,de,he){return c=new KP(c,d,m,de,he),d===1?(d=1,C===!0&&(d|=8)):d=0,C=_a(3,null,null,d),c.current=C,C.stateNode=c,C.memoizedState={element:y,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},pv(C),c}function XP(c,d,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:y==null?null:""+y,children:c,containerInfo:d,implementation:m}}function bE(c){if(!c)return qo;c=c._reactInternals;e:{if(le(c)!==c||c.tag!==1)throw Error(r(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Ms(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(r(171))}if(c.tag===1){var m=c.type;if(Ms(m))return X_(c,m,d)}return d}function _E(c,d,m,y,E,C,W,de,he){return c=ry(m,y,!0,c,E,C,W,de,he),c.context=bE(null),m=c.current,y=js(),E=Zo(m),C=Yi(y,E),C.callback=d??null,Xo(m,C,E),c.current.lanes=E,Oo(c,E,y),Us(c,y),c}function $m(c,d,m,y){var E=d.current,C=js(),W=Zo(E);return m=bE(m),d.context===null?d.context=m:d.pendingContext=m,d=Yi(C,W),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=Xo(E,d,W),c!==null&&(Xa(c,E,W,C),wm(c,E,W)),W}function Hm(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function NE(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<d?m:d}}function ny(c,d){NE(c,d),(c=c.alternate)&&NE(c,d)}function YP(){return null}var EE=typeof reportError=="function"?reportError:function(c){console.error(c)};function sy(c){this._internalRoot=c}Wm.prototype.render=sy.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(r(409));$m(c,d,null,null)},Wm.prototype.unmount=sy.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;cc(function(){$m(null,c,null,null)}),d[Wi]=null}};function Wm(c){this._internalRoot=c}Wm.prototype.unstable_scheduleHydration=function(c){if(c){var d=W0();c={blockedOn:null,target:c,priority:d};for(var m=0;m<hi.length&&d!==0&&d<hi[m].priority;m++);hi.splice(m,0,c),m===0&&K0(c)}};function ay(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function qm(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function SE(){}function QP(c,d,m,y,E){if(E){if(typeof y=="function"){var C=y;y=function(){var Ce=Hm(W);C.call(Ce)}}var W=_E(d,y,c,0,null,!1,!1,"",SE);return c._reactRootContainer=W,c[Wi]=W.current,bh(c.nodeType===8?c.parentNode:c),cc(),W}for(;E=c.lastChild;)c.removeChild(E);if(typeof y=="function"){var de=y;y=function(){var Ce=Hm(he);de.call(Ce)}}var he=ry(c,0,!1,null,null,!1,!1,"",SE);return c._reactRootContainer=he,c[Wi]=he.current,bh(c.nodeType===8?c.parentNode:c),cc(function(){$m(d,he,m,y)}),he}function Gm(c,d,m,y,E){var C=m._reactRootContainer;if(C){var W=C;if(typeof E=="function"){var de=E;E=function(){var he=Hm(W);de.call(he)}}$m(d,W,c,E)}else W=QP(m,d,c,E,y);return Hm(W)}$0=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var m=Fo(d.pendingLanes);m!==0&&(Mo(d,m|1),Us(d,Ye()),(tr&6)===0&&(Uu=Ye()+500,Go()))}break;case 13:cc(function(){var y=Xi(c,1);if(y!==null){var E=js();Xa(y,c,1,E)}}),ny(c,1)}},hu=function(c){if(c.tag===13){var d=Xi(c,134217728);if(d!==null){var m=js();Xa(d,c,134217728,m)}ny(c,134217728)}},H0=function(c){if(c.tag===13){var d=Zo(c),m=Xi(c,d);if(m!==null){var y=js();Xa(m,c,d,y)}ny(c,d)}},W0=function(){return Yt},q0=function(c,d){var m=Yt;try{return Yt=c,d()}finally{Yt=m}},ma=function(c,d,m){switch(d){case"input":if(se(c,m),d=m.name,m.type==="radio"&&d!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<m.length;d++){var y=m[d];if(y!==c&&y.form===c.form){var E=um(y);if(!E)throw Error(r(90));re(y),se(y,E)}}}break;case"textarea":Le(c,m);break;case"select":d=m.value,d!=null&&ze(c,!!m.multiple,d,!1)}},Hn=Yv,Gl=cc;var JP={usingClientEntryPoint:!1,Events:[Eh,ju,um,Sr,Cn,Yv]},Mh={findFiberByHostInstance:tc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZP={bundleType:Mh.bundleType,version:Mh.version,rendererPackageName:Mh.rendererPackageName,rendererConfig:Mh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=je(c),c===null?null:c.stateNode},findFiberByHostInstance:Mh.findFiberByHostInstance||YP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Km=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Km.isDisabled&&Km.supportsFiber)try{Ys=Km.inject(ZP),an=Km}catch{}}return zs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JP,zs.createPortal=function(c,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ay(d))throw Error(r(200));return XP(c,d,null,m)},zs.createRoot=function(c,d){if(!ay(c))throw Error(r(299));var m=!1,y="",E=EE;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onRecoverableError!==void 0&&(E=d.onRecoverableError)),d=ry(c,1,!1,null,null,m,!1,y,E),c[Wi]=d.current,bh(c.nodeType===8?c.parentNode:c),new sy(d)},zs.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=je(d),c=c===null?null:c.stateNode,c},zs.flushSync=function(c){return cc(c)},zs.hydrate=function(c,d,m){if(!qm(d))throw Error(r(200));return Gm(null,c,d,!0,m)},zs.hydrateRoot=function(c,d,m){if(!ay(c))throw Error(r(405));var y=m!=null&&m.hydratedSources||null,E=!1,C="",W=EE;if(m!=null&&(m.unstable_strictMode===!0&&(E=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onRecoverableError!==void 0&&(W=m.onRecoverableError)),d=_E(d,null,c,1,m??null,E,!1,C,W),c[Wi]=d.current,bh(c),y)for(c=0;c<y.length;c++)m=y[c],E=m._getVersion,E=E(m._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[m,E]:d.mutableSourceEagerHydrationData.push(m,E);return new Wm(d)},zs.render=function(c,d,m){if(!qm(d))throw Error(r(200));return Gm(null,c,d,!1,m)},zs.unmountComponentAtNode=function(c){if(!qm(c))throw Error(r(40));return c._reactRootContainer?(cc(function(){Gm(null,null,c,!1,function(){c._reactRootContainer=null,c[Wi]=null})}),!0):!1},zs.unstable_batchedUpdates=Yv,zs.unstable_renderSubtreeIntoContainer=function(c,d,m,y){if(!qm(m))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return Gm(c,d,m,!1,y)},zs.version="18.3.1-next-f1338f8080-20240426",zs}var PE;function _j(){if(PE)return ly.exports;PE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ly.exports=cD(),ly.exports}var DE;function uD(){if(DE)return Xm;DE=1;var t=_j();return Xm.createRoot=t.createRoot,Xm.hydrateRoot=t.hydrateRoot,Xm}var dD=uD(),S=Sw();const Ic=Ew(S),hD=nD({__proto__:null,default:Ic},[S]);_j();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nf(){return Nf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nf.apply(this,arguments)}var fl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fl||(fl={}));const FE="popstate";function fD(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:o,hash:l}=n.location;return c1("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Fp(s)}return pD(e,r,null,t)}function dn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Nj(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mD(){return Math.random().toString(36).substr(2,8)}function LE(t,e){return{usr:t.state,key:t.key,idx:e}}function c1(t,e,r,n){return r===void 0&&(r=null),Nf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ud(e):e,{state:r,key:e&&e.key||n||mD()})}function Fp(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ud(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function pD(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=fl.Pop,u=null,h=f();h==null&&(h=0,o.replaceState(Nf({},o.state,{idx:h}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=fl.Pop;let _=f(),R=_==null?null:_-h;h=_,u&&u({action:l,location:b.location,delta:R})}function x(_,R){l=fl.Push;let j=c1(b.location,_,R);h=f()+1;let k=LE(j,h),F=b.createHref(j);try{o.pushState(k,"",F)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(F)}i&&u&&u({action:l,location:b.location,delta:1})}function v(_,R){l=fl.Replace;let j=c1(b.location,_,R);h=f();let k=LE(j,h),F=b.createHref(j);o.replaceState(k,"",F),i&&u&&u({action:l,location:b.location,delta:0})}function w(_){let R=s.location.origin!=="null"?s.location.origin:s.location.href,j=typeof _=="string"?_:Fp(_);return j=j.replace(/ $/,"%20"),dn(R,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,R)}let b={get action(){return l},get location(){return t(s,o)},listen(_){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(FE,p),u=_,()=>{s.removeEventListener(FE,p),u=null}},createHref(_){return e(s,_)},createURL:w,encodeLocation(_){let R=w(_);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:x,replace:v,go(_){return o.go(_)}};return b}var OE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(OE||(OE={}));function xD(t,e,r){return r===void 0&&(r="/"),gD(t,e,r)}function gD(t,e,r,n){let s=typeof e=="string"?Ud(e):e,i=kw(s.pathname||"/",r);if(i==null)return null;let o=Ej(t);vD(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let h=CD(i);l=TD(o[u],h)}return l}function Ej(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(dn(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let h=gl([n,u.relativePath]),f=r.concat(u);i.children&&i.children.length>0&&(dn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Ej(i.children,e,f,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:SD(h,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of Sj(i.path))s(i,o,u)}),e}function Sj(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Sj(n.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function vD(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:kD(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const yD=/^:[\w-]+$/,wD=3,bD=2,_D=1,ND=10,ED=-2,ME=t=>t==="*";function SD(t,e){let r=t.split("/"),n=r.length;return r.some(ME)&&(n+=ED),e&&(n+=bD),r.filter(s=>!ME(s)).reduce((s,i)=>s+(yD.test(i)?wD:i===""?_D:ND),n)}function kD(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function TD(t,e,r){let{routesMeta:n}=t,s={},i="/",o=[];for(let l=0;l<n.length;++l){let u=n[l],h=l===n.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=jD({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),x=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:gl([i,p.pathname]),pathnameBase:DD(gl([i,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(i=gl([i,p.pathnameBase]))}return o}function jD(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=AD(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((h,f,p)=>{let{paramName:x,isOptional:v}=f;if(x==="*"){let b=l[p]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const w=l[p];return v&&!w?h[x]=void 0:h[x]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:t}}function AD(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Nj(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function CD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Nj(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function kw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function ID(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Ud(t):t;return{pathname:r?r.startsWith("/")?r:RD(r,e):e,search:FD(n),hash:LD(s)}}function RD(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function dy(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PD(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Tw(t,e){let r=PD(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function jw(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Ud(t):(s=Nf({},t),dn(!s.pathname||!s.pathname.includes("?"),dy("?","pathname","search",s)),dn(!s.pathname||!s.pathname.includes("#"),dy("#","pathname","hash",s)),dn(!s.search||!s.search.includes("#"),dy("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let p=e.length-1;if(!n&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),p-=1;s.pathname=x.join("/")}l=p>=0?e[p]:"/"}let u=ID(s,l),h=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}const gl=t=>t.join("/").replace(/\/\/+/g,"/"),DD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),FD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,LD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function OD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kj=["post","put","patch","delete"];new Set(kj);const MD=["get",...kj];new Set(MD);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ef(){return Ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ef.apply(this,arguments)}const Aw=S.createContext(null),VD=S.createContext(null),Ll=S.createContext(null),Cx=S.createContext(null),So=S.createContext({outlet:null,matches:[],isDataRoute:!1}),Tj=S.createContext(null);function BD(t,e){let{relative:r}=e===void 0?{}:e;zd()||dn(!1);let{basename:n,navigator:s}=S.useContext(Ll),{hash:i,pathname:o,search:l}=Aj(t,{relative:r}),u=o;return n!=="/"&&(u=o==="/"?n:gl([n,o])),s.createHref({pathname:u,search:l,hash:i})}function zd(){return S.useContext(Cx)!=null}function Ol(){return zd()||dn(!1),S.useContext(Cx).location}function jj(t){S.useContext(Ll).static||S.useLayoutEffect(t)}function ns(){let{isDataRoute:t}=S.useContext(So);return t?ZD():UD()}function UD(){zd()||dn(!1);let t=S.useContext(Aw),{basename:e,future:r,navigator:n}=S.useContext(Ll),{matches:s}=S.useContext(So),{pathname:i}=Ol(),o=JSON.stringify(Tw(s,r.v7_relativeSplatPath)),l=S.useRef(!1);return jj(()=>{l.current=!0}),S.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){n.go(h);return}let p=jw(h,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:gl([e,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[e,n,o,i,t])}function Ix(){let{matches:t}=S.useContext(So),e=t[t.length-1];return e?e.params:{}}function Aj(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=S.useContext(Ll),{matches:s}=S.useContext(So),{pathname:i}=Ol(),o=JSON.stringify(Tw(s,n.v7_relativeSplatPath));return S.useMemo(()=>jw(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function zD(t,e){return $D(t,e)}function $D(t,e,r,n){zd()||dn(!1);let{navigator:s}=S.useContext(Ll),{matches:i}=S.useContext(So),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=Ol(),f;if(e){var p;let _=typeof e=="string"?Ud(e):e;u==="/"||(p=_.pathname)!=null&&p.startsWith(u)||dn(!1),f=_}else f=h;let x=f.pathname||"/",v=x;if(u!=="/"){let _=u.replace(/^\//,"").split("/");v="/"+x.replace(/^\//,"").split("/").slice(_.length).join("/")}let w=xD(t,{pathname:v}),b=KD(w&&w.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:gl([u,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:gl([u,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,r,n);return e&&b?S.createElement(Cx.Provider,{value:{location:Ef({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:fl.Pop}},b):b}function HD(){let t=JD(),e=OD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),r?S.createElement("pre",{style:s},r):null,null)}const WD=S.createElement(HD,null);class qD extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?S.createElement(So.Provider,{value:this.props.routeContext},S.createElement(Tj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GD(t){let{routeContext:e,match:r,children:n}=t,s=S.useContext(Aw);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(So.Provider,{value:e},n)}function KD(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||dn(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,h=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:x,errors:v}=r,w=p.route.loader&&x[p.route.id]===void 0&&(!v||v[p.route.id]===void 0);if(p.route.lazy||w){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((f,p,x)=>{let v,w=!1,b=null,_=null;r&&(v=l&&p.route.id?l[p.route.id]:void 0,b=p.route.errorElement||WD,u&&(h<0&&x===0?(eF("route-fallback"),w=!0,_=null):h===x&&(w=!0,_=p.route.hydrateFallbackElement||null)));let R=e.concat(o.slice(0,x+1)),j=()=>{let k;return v?k=b:w?k=_:p.route.Component?k=S.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=f,S.createElement(GD,{match:p,routeContext:{outlet:f,matches:R,isDataRoute:r!=null},children:k})};return r&&(p.route.ErrorBoundary||p.route.errorElement||x===0)?S.createElement(qD,{location:r.location,revalidation:r.revalidation,component:b,error:v,children:j(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):j()},null)}var Cj=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Cj||{}),Ij=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ij||{});function XD(t){let e=S.useContext(Aw);return e||dn(!1),e}function YD(t){let e=S.useContext(VD);return e||dn(!1),e}function QD(t){let e=S.useContext(So);return e||dn(!1),e}function Rj(t){let e=QD(),r=e.matches[e.matches.length-1];return r.route.id||dn(!1),r.route.id}function JD(){var t;let e=S.useContext(Tj),r=YD(),n=Rj();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function ZD(){let{router:t}=XD(Cj.UseNavigateStable),e=Rj(Ij.UseNavigateStable),r=S.useRef(!1);return jj(()=>{r.current=!0}),S.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ef({fromRouteId:e},i)))},[t,e])}const VE={};function eF(t,e,r){VE[t]||(VE[t]=!0)}function tF(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Jr(t){let{to:e,replace:r,state:n,relative:s}=t;zd()||dn(!1);let{future:i,static:o}=S.useContext(Ll),{matches:l}=S.useContext(So),{pathname:u}=Ol(),h=ns(),f=jw(e,Tw(l,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return S.useEffect(()=>h(JSON.parse(p),{replace:r,state:n,relative:s}),[h,p,s,r,n]),null}function Ar(t){dn(!1)}function rF(t){let{basename:e="/",children:r=null,location:n,navigationType:s=fl.Pop,navigator:i,static:o=!1,future:l}=t;zd()&&dn(!1);let u=e.replace(/^\/*/,"/"),h=S.useMemo(()=>({basename:u,navigator:i,static:o,future:Ef({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof n=="string"&&(n=Ud(n));let{pathname:f="/",search:p="",hash:x="",state:v=null,key:w="default"}=n,b=S.useMemo(()=>{let _=kw(f,u);return _==null?null:{location:{pathname:_,search:p,hash:x,state:v,key:w},navigationType:s}},[u,f,p,x,v,w,s]);return b==null?null:S.createElement(Ll.Provider,{value:h},S.createElement(Cx.Provider,{children:r,value:b}))}function nF(t){let{children:e,location:r}=t;return zD(u1(e),r)}new Promise(()=>{});function u1(t,e){e===void 0&&(e=[]);let r=[];return S.Children.forEach(t,(n,s)=>{if(!S.isValidElement(n))return;let i=[...e,s];if(n.type===S.Fragment){r.push.apply(r,u1(n.props.children,i));return}n.type!==Ar&&dn(!1),!n.props.index||!n.props.children||dn(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=u1(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function d1(){return d1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},d1.apply(this,arguments)}function sF(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function aF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function iF(t,e){return t.button===0&&(!e||e==="_self")&&!aF(t)}const oF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lF="6";try{window.__reactRouterVersion=lF}catch{}const cF="startTransition",BE=hD[cF];function uF(t){let{basename:e,children:r,future:n,window:s}=t,i=S.useRef();i.current==null&&(i.current=fD({window:s,v5Compat:!0}));let o=i.current,[l,u]=S.useState({action:o.action,location:o.location}),{v7_startTransition:h}=n||{},f=S.useCallback(p=>{h&&BE?BE(()=>u(p)):u(p)},[u,h]);return S.useLayoutEffect(()=>o.listen(f),[o,f]),S.useEffect(()=>tF(n),[n]),S.createElement(rF,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const dF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ei=S.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:h,preventScrollReset:f,viewTransition:p}=e,x=sF(e,oF),{basename:v}=S.useContext(Ll),w,b=!1;if(typeof h=="string"&&hF.test(h)&&(w=h,dF))try{let k=new URL(window.location.href),F=h.startsWith("//")?new URL(k.protocol+h):new URL(h),L=kw(F.pathname,v);F.origin===k.origin&&L!=null?h=L+F.search+F.hash:b=!0}catch{}let _=BD(h,{relative:s}),R=fF(h,{replace:o,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:p});function j(k){n&&n(k),k.defaultPrevented||R(k)}return S.createElement("a",d1({},x,{href:w||_,onClick:b||i?n:j,ref:r,target:u}))});var UE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(UE||(UE={}));var zE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(zE||(zE={}));function fF(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=ns(),h=Ol(),f=Aj(t,{relative:o});return S.useCallback(p=>{if(iF(p,r)){p.preventDefault();let x=n!==void 0?n:Fp(h)===Fp(f);u(t,{replace:x,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[h,u,f,n,s,r,t,i,o,l])}let mF={data:""},pF=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||mF,xF=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,gF=/\/\*[^]*?\*\/|  +/g,$E=/\n+/g,ll=(t,e)=>{let r="",n="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?ll(o,i):i+"{"+ll(o,i[1]=="k"?"":e)+"}":typeof o=="object"?n+=ll(o,e?e.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=ll.p?ll.p(i,o):i+":"+o+";")}return r+(e&&s?e+"{"+s+"}":s)+n},Zi={},Pj=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+Pj(t[r]);return e}return t},vF=(t,e,r,n,s)=>{let i=Pj(t),o=Zi[i]||(Zi[i]=(u=>{let h=0,f=11;for(;h<u.length;)f=101*f+u.charCodeAt(h++)>>>0;return"go"+f})(i));if(!Zi[o]){let u=i!==t?t:(h=>{let f,p,x=[{}];for(;f=xF.exec(h.replace(gF,""));)f[4]?x.shift():f[3]?(p=f[3].replace($E," ").trim(),x.unshift(x[0][p]=x[0][p]||{})):x[0][f[1]]=f[2].replace($E," ").trim();return x[0]})(t);Zi[o]=ll(s?{["@keyframes "+o]:u}:u,r?"":"."+o)}let l=r&&Zi.g?Zi.g:null;return r&&(Zi.g=Zi[o]),((u,h,f,p)=>{p?h.data=h.data.replace(p,u):h.data.indexOf(u)===-1&&(h.data=f?u+h.data:h.data+u)})(Zi[o],e,n,l),o},yF=(t,e,r)=>t.reduce((n,s,i)=>{let o=e[i];if(o&&o.call){let l=o(r),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":ll(l,""):l===!1?"":l}return n+s+(o??"")},"");function Rx(t){let e=this||{},r=t.call?t(e.p):t;return vF(r.unshift?r.raw?yF(r,[].slice.call(arguments,1),e.p):r.reduce((n,s)=>Object.assign(n,s&&s.call?s(e.p):s),{}):r,pF(e.target),e.g,e.o,e.k)}let Dj,h1,f1;Rx.bind({g:1});let mo=Rx.bind({k:1});function wF(t,e,r,n){ll.p=e,Dj=t,h1=r,f1=n}function Ml(t,e){let r=this||{};return function(){let n=arguments;function s(i,o){let l=Object.assign({},i),u=l.className||s.className;r.p=Object.assign({theme:h1&&h1()},l),r.o=/ *go\d+/.test(u),l.className=Rx.apply(r,n)+(u?" "+u:"");let h=t;return t[0]&&(h=l.as||t,delete l.as),f1&&h[0]&&f1(l),Dj(h,l)}return s}}var bF=t=>typeof t=="function",Lp=(t,e)=>bF(t)?t(e):t,_F=(()=>{let t=0;return()=>(++t).toString()})(),Fj=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),NF=20,Lj=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,NF)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:r}=e;return Lj(t,{type:t.toasts.find(i=>i.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=e;return{...t,toasts:t.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},_p=[],yc={toasts:[],pausedAt:void 0},Kc=t=>{yc=Lj(yc,t),_p.forEach(e=>{e(yc)})},EF={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},SF=(t={})=>{let[e,r]=S.useState(yc),n=S.useRef(yc);S.useEffect(()=>(n.current!==yc&&r(yc),_p.push(r),()=>{let i=_p.indexOf(r);i>-1&&_p.splice(i,1)}),[]);let s=e.toasts.map(i=>{var o,l,u;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((o=t[i.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((l=t[i.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||EF[i.type],style:{...t.style,...(u=t[i.type])==null?void 0:u.style,...i.style}}});return{...e,toasts:s}},kF=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||_F()}),n0=t=>(e,r)=>{let n=kF(e,t,r);return Kc({type:2,toast:n}),n.id},Ie=(t,e)=>n0("blank")(t,e);Ie.error=n0("error");Ie.success=n0("success");Ie.loading=n0("loading");Ie.custom=n0("custom");Ie.dismiss=t=>{Kc({type:3,toastId:t})};Ie.remove=t=>Kc({type:4,toastId:t});Ie.promise=(t,e,r)=>{let n=Ie.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?Lp(e.success,s):void 0;return i?Ie.success(i,{id:n,...r,...r==null?void 0:r.success}):Ie.dismiss(n),s}).catch(s=>{let i=e.error?Lp(e.error,s):void 0;i?Ie.error(i,{id:n,...r,...r==null?void 0:r.error}):Ie.dismiss(n)}),t};var TF=(t,e)=>{Kc({type:1,toast:{id:t,height:e}})},jF=()=>{Kc({type:5,time:Date.now()})},tf=new Map,AF=1e3,CF=(t,e=AF)=>{if(tf.has(t))return;let r=setTimeout(()=>{tf.delete(t),Kc({type:4,toastId:t})},e);tf.set(t,r)},IF=t=>{let{toasts:e,pausedAt:r}=SF(t);S.useEffect(()=>{if(r)return;let i=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let u=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(u<0){l.visible&&Ie.dismiss(l.id);return}return setTimeout(()=>Ie.dismiss(l.id),u)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,r]);let n=S.useCallback(()=>{r&&Kc({type:6,time:Date.now()})},[r]),s=S.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:u=8,defaultPosition:h}=o||{},f=e.filter(v=>(v.position||h)===(i.position||h)&&v.height),p=f.findIndex(v=>v.id===i.id),x=f.filter((v,w)=>w<p&&v.visible).length;return f.filter(v=>v.visible).slice(...l?[x+1]:[0,x]).reduce((v,w)=>v+(w.height||0)+u,0)},[e]);return S.useEffect(()=>{e.forEach(i=>{if(i.dismissed)CF(i.id,i.removeDelay);else{let o=tf.get(i.id);o&&(clearTimeout(o),tf.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:TF,startPause:jF,endPause:n,calculateOffset:s}}},RF=mo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,PF=mo`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,DF=mo`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,FF=Ml("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${RF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${PF} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${DF} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,LF=mo`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,OF=Ml("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${LF} 1s linear infinite;
`,MF=mo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,VF=mo`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,BF=Ml("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${MF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${VF} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,UF=Ml("div")`
  position: absolute;
`,zF=Ml("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,$F=mo`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,HF=Ml("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${$F} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,WF=({toast:t})=>{let{icon:e,type:r,iconTheme:n}=t;return e!==void 0?typeof e=="string"?S.createElement(HF,null,e):e:r==="blank"?null:S.createElement(zF,null,S.createElement(OF,{...n}),r!=="loading"&&S.createElement(UF,null,r==="error"?S.createElement(FF,{...n}):S.createElement(BF,{...n})))},qF=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,GF=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,KF="0%{opacity:0;} 100%{opacity:1;}",XF="0%{opacity:1;} 100%{opacity:0;}",YF=Ml("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,QF=Ml("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,JF=(t,e)=>{let r=t.includes("top")?1:-1,[n,s]=Fj()?[KF,XF]:[qF(r),GF(r)];return{animation:e?`${mo(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${mo(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ZF=S.memo(({toast:t,position:e,style:r,children:n})=>{let s=t.height?JF(t.position||e||"top-center",t.visible):{opacity:0},i=S.createElement(WF,{toast:t}),o=S.createElement(QF,{...t.ariaProps},Lp(t.message,t));return S.createElement(YF,{className:t.className,style:{...s,...r,...t.style}},typeof n=="function"?n({icon:i,message:o}):S.createElement(S.Fragment,null,i,o))});wF(S.createElement);var e8=({id:t,className:e,style:r,onHeightUpdate:n,children:s})=>{let i=S.useCallback(o=>{if(o){let l=()=>{let u=o.getBoundingClientRect().height;n(t,u)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return S.createElement("div",{ref:i,className:e,style:r},s)},t8=(t,e)=>{let r=t.includes("top"),n=r?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Fj()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...n,...s}},r8=Rx`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ym=16,n8=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:n,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:u}=IF(r);return S.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Ym,left:Ym,right:Ym,bottom:Ym,pointerEvents:"none",...i},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(h=>{let f=h.position||e,p=u.calculateOffset(h,{reverseOrder:t,gutter:n,defaultPosition:e}),x=t8(f,p);return S.createElement(e8,{id:h.id,key:h.id,onHeightUpdate:u.updateHeight,className:h.visible?r8:"",style:x},h.type==="custom"?Lp(h.message,h):s?s(h):S.createElement(ZF,{toast:h,position:f}))}))},Ws=Ie;const s8=()=>{};var HE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},a8=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],o=t[r++],l=t[r++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Mj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let x=(l&15)<<2|h>>6,v=h&63;u||(v=64,o||(x=64)),n.push(r[f],r[p],r[x],r[v])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Oj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):a8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const h=s<t.length?r[t.charAt(s)]:64;++s;const p=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||p==null)throw new i8;const x=i<<2|l>>4;if(n.push(x),h!==64){const v=l<<4&240|h>>2;if(n.push(v),p!==64){const w=h<<6&192|p;n.push(w)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class i8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o8=function(t){const e=Oj(t);return Mj.encodeByteArray(e,!0)},Op=function(t){return o8(t).replace(/\./g,"")},Vj=function(t){try{return Mj.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=()=>l8().__FIREBASE_DEFAULTS__,u8=()=>{if(typeof process>"u"||typeof HE>"u")return;const t=HE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},d8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Vj(t[1]);return e&&JSON.parse(e)},Px=()=>{try{return s8()||c8()||u8()||d8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bj=t=>{var e,r;return(r=(e=Px())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},h8=t=>{const e=Bj(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Uj=()=>{var t;return(t=Px())===null||t===void 0?void 0:t.config},zj=t=>{var e;return(e=Px())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t){return t.endsWith(".cloudworkstations.dev")}async function $j(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Op(JSON.stringify(r)),Op(JSON.stringify(o)),""].join(".")}const rf={};function p8(){const t={prod:[],emulator:[]};for(const e of Object.keys(rf))rf[e]?t.emulator.push(e):t.prod.push(e);return t}function x8(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let WE=!1;function Hj(t,e){if(typeof window>"u"||typeof document>"u"||!$d(window.location.host)||rf[t]===e||rf[t]||WE)return;rf[t]=e;function r(x){return`__firebase__banner__${x}`}const n="__firebase__banner",i=p8().prod.length>0;function o(){const x=document.getElementById(n);x&&x.remove()}function l(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function u(x,v){x.setAttribute("width","24"),x.setAttribute("id",v),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function h(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{WE=!0,o()},x}function f(x,v){x.setAttribute("id",v),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function p(){const x=x8(n),v=r("text"),w=document.getElementById(v)||document.createElement("span"),b=r("learnmore"),_=document.getElementById(b)||document.createElement("a"),R=r("preprendIcon"),j=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const k=x.element;l(k),f(_,b);const F=h();u(j,R),k.append(j,w,_,F),document.body.appendChild(k)}i?(w.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ws())}function v8(){var t;const e=(t=Px())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function y8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function w8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function b8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _8(){const t=ws();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function N8(){return!v8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E8(){try{return typeof indexedDB=="object"}catch{return!1}}function S8(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8="FirebaseError";class ko extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=k8,Object.setPrototypeOf(this,ko.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,s0.prototype.create)}}class s0{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?T8(i,n):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ko(s,l,n)}}function T8(t,e){return t.replace(j8,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const j8=/\{\$([^}]+)}/g;function A8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function po(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],o=e[s];if(qE(i)&&qE(o)){if(!po(i,o))return!1}else if(i!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function qE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Hh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Wh(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function C8(t,e){const r=new I8(t,e);return r.subscribe.bind(r)}class I8{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");R8(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=hy),s.error===void 0&&(s.error=hy),s.complete===void 0&&(s.complete=hy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function R8(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function hy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t){return t&&t._delegate?t._delegate:t}class Rc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new f8;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(F8(e))try{this.getOrInitializeService({instanceIdentifier:mc})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=mc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mc){return this.instances.has(e)}getOptions(e=mc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&o.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:D8(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=mc){return this.component?this.component.multipleInstances?e:mc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function D8(t){return t===mc?void 0:t}function F8(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new P8(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Kt||(Kt={}));const O8={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},M8=Kt.INFO,V8={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},B8=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=V8[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cw{constructor(e){this.name=e,this._logLevel=M8,this._logHandler=B8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?O8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...e),this._logHandler(this,Kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...e),this._logHandler(this,Kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...e),this._logHandler(this,Kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...e),this._logHandler(this,Kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...e),this._logHandler(this,Kt.ERROR,...e)}}const U8=(t,e)=>e.some(r=>t instanceof r);let GE,KE;function z8(){return GE||(GE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $8(){return KE||(KE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wj=new WeakMap,m1=new WeakMap,qj=new WeakMap,fy=new WeakMap,Iw=new WeakMap;function H8(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(vl(t.result)),s()},o=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&Wj.set(r,t)}).catch(()=>{}),Iw.set(e,t),e}function W8(t){if(m1.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),s()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});m1.set(t,e)}let p1={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return m1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qj.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return vl(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function q8(t){p1=t(p1)}function G8(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(my(this),e,...r);return qj.set(n,e.sort?e.sort():[e]),vl(n)}:$8().includes(t)?function(...e){return t.apply(my(this),e),vl(Wj.get(this))}:function(...e){return vl(t.apply(my(this),e))}}function K8(t){return typeof t=="function"?G8(t):(t instanceof IDBTransaction&&W8(t),U8(t,z8())?new Proxy(t,p1):t)}function vl(t){if(t instanceof IDBRequest)return H8(t);if(fy.has(t))return fy.get(t);const e=K8(t);return e!==t&&(fy.set(t,e),Iw.set(e,t)),e}const my=t=>Iw.get(t);function X8(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=vl(o);return n&&o.addEventListener("upgradeneeded",u=>{n(vl(o.result),u.oldVersion,u.newVersion,vl(o.transaction),u)}),r&&o.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const Y8=["get","getKey","getAll","getAllKeys","count"],Q8=["put","add","delete","clear"],py=new Map;function XE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(py.get(e))return py.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=Q8.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||Y8.includes(r)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return n&&(h=h.index(l.shift())),(await Promise.all([h[r](...l),s&&u.done]))[0]};return py.set(e,i),i}q8(t=>({...t,get:(e,r,n)=>XE(e,r)||t.get(e,r,n),has:(e,r)=>!!XE(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Z8(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Z8(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const x1="@firebase/app",YE="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new Cw("@firebase/app"),eL="@firebase/app-compat",tL="@firebase/analytics-compat",rL="@firebase/analytics",nL="@firebase/app-check-compat",sL="@firebase/app-check",aL="@firebase/auth",iL="@firebase/auth-compat",oL="@firebase/database",lL="@firebase/data-connect",cL="@firebase/database-compat",uL="@firebase/functions",dL="@firebase/functions-compat",hL="@firebase/installations",fL="@firebase/installations-compat",mL="@firebase/messaging",pL="@firebase/messaging-compat",xL="@firebase/performance",gL="@firebase/performance-compat",vL="@firebase/remote-config",yL="@firebase/remote-config-compat",wL="@firebase/storage",bL="@firebase/storage-compat",_L="@firebase/firestore",NL="@firebase/ai",EL="@firebase/firestore-compat",SL="firebase",kL="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="[DEFAULT]",TL={[x1]:"fire-core",[eL]:"fire-core-compat",[rL]:"fire-analytics",[tL]:"fire-analytics-compat",[sL]:"fire-app-check",[nL]:"fire-app-check-compat",[aL]:"fire-auth",[iL]:"fire-auth-compat",[oL]:"fire-rtdb",[lL]:"fire-data-connect",[cL]:"fire-rtdb-compat",[uL]:"fire-fn",[dL]:"fire-fn-compat",[hL]:"fire-iid",[fL]:"fire-iid-compat",[mL]:"fire-fcm",[pL]:"fire-fcm-compat",[xL]:"fire-perf",[gL]:"fire-perf-compat",[vL]:"fire-rc",[yL]:"fire-rc-compat",[wL]:"fire-gcs",[bL]:"fire-gcs-compat",[_L]:"fire-fst",[EL]:"fire-fst-compat",[NL]:"fire-vertex","fire-js":"fire-js",[SL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new Map,jL=new Map,v1=new Map;function QE(t,e){try{t.container.addComponent(e)}catch(r){xo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function gd(t){const e=t.name;if(v1.has(e))return xo.debug(`There were multiple attempts to register component ${e}.`),!1;v1.set(e,t);for(const r of Mp.values())QE(r,t);for(const r of jL.values())QE(r,t);return!0}function Rw(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ia(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yl=new s0("app","Firebase",AL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Rc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=kL;function Gj(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:g1,automaticDataCollectionEnabled:!0},e),s=n.name;if(typeof s!="string"||!s)throw yl.create("bad-app-name",{appName:String(s)});if(r||(r=Uj()),!r)throw yl.create("no-options");const i=Mp.get(s);if(i){if(po(r,i.options)&&po(n,i.config))return i;throw yl.create("duplicate-app",{appName:s})}const o=new L8(s);for(const u of v1.values())o.addComponent(u);const l=new CL(r,n,o);return Mp.set(s,l),l}function Kj(t=g1){const e=Mp.get(t);if(!e&&t===g1&&Uj())return Gj();if(!e)throw yl.create("no-app",{appName:t});return e}function wl(t,e,r){var n;let s=(n=TL[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xo.warn(l.join(" "));return}gd(new Rc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="firebase-heartbeat-database",RL=1,Sf="firebase-heartbeat-store";let xy=null;function Xj(){return xy||(xy=X8(IL,RL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sf)}catch(r){console.warn(r)}}}}).catch(t=>{throw yl.create("idb-open",{originalErrorMessage:t.message})})),xy}async function PL(t){try{const r=(await Xj()).transaction(Sf),n=await r.objectStore(Sf).get(Yj(t));return await r.done,n}catch(e){if(e instanceof ko)xo.warn(e.message);else{const r=yl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xo.warn(r.message)}}}async function JE(t,e){try{const n=(await Xj()).transaction(Sf,"readwrite");await n.objectStore(Sf).put(e,Yj(t)),await n.done}catch(r){if(r instanceof ko)xo.warn(r.message);else{const n=yl.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});xo.warn(n.message)}}}function Yj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=1024,FL=30;class LL{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new ML(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ZE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>FL){const o=VL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){xo.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=ZE(),{heartbeatsToSend:n,unsentEntries:s}=OL(this._heartbeatsCache.heartbeats),i=Op(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return xo.warn(r),""}}}function ZE(){return new Date().toISOString().substring(0,10)}function OL(t,e=DL){const r=[];let n=t.slice();for(const s of t){const i=r.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),eS(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),eS(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class ML{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return E8()?S8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await PL(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return JE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return JE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function eS(t){return Op(JSON.stringify({version:2,heartbeats:t})).length}function VL(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t){gd(new Rc("platform-logger",e=>new J8(e),"PRIVATE")),gd(new Rc("heartbeat",e=>new LL(e),"PRIVATE")),wl(x1,YE,t),wl(x1,YE,"esm2017"),wl("fire-js","")}BL("");function Pw(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Xc(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{h(n.next(f))}catch(p){o(p)}}function u(f){try{h(n.throw(f))}catch(p){o(p)}}function h(f){f.done?i(f.value):s(f.value).then(l,u)}h((n=n.apply(t,e||[])).next())})}function Qj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UL=Qj,Jj=new s0("auth","Firebase",Qj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp=new Cw("@firebase/auth");function zL(t,...e){Vp.logLevel<=Kt.WARN&&Vp.warn(`Auth (${Hd}): ${t}`,...e)}function Np(t,...e){Vp.logLevel<=Kt.ERROR&&Vp.error(`Auth (${Hd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t,...e){throw Dw(t,...e)}function Ti(t,...e){return Dw(t,...e)}function Zj(t,e,r){const n=Object.assign(Object.assign({},UL()),{[e]:r});return new s0("auth","Firebase",n).create(e,{appName:t.name})}function ao(t){return Zj(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dw(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return Jj.create(t,...e)}function At(t,e,...r){if(!t)throw Dw(e,...r)}function to(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Np(e),new Error(e)}function go(t,e){t||to(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function $L(){return tS()==="http:"||tS()==="https:"}function tS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($L()||w8()||"connection"in navigator)?navigator.onLine:!0}function WL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,r){this.shortDelay=e,this.longDelay=r,go(r>e,"Short delay should be less than long delay!"),this.isMobile=g8()||b8()}get(){return HL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t,e){go(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;to("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;to("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;to("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KL=new i0(3e4,6e4);function Vl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Fi(t,e,r,n,s={}){return tA(t,s,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const l=a0(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},i);return y8()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&$d(t.emulatorConfig.host)&&(h.credentials="include"),eA.fetch()(await rA(t,t.config.apiHost,r,l),h)})}async function tA(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},qL),e);try{const s=new YL(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Qm(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qm(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Qm(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Qm(t,"user-disabled",o);const f=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Zj(t,f,h);ai(t,f)}}catch(s){if(s instanceof ko)throw s;ai(t,"network-request-failed",{message:String(s)})}}async function o0(t,e,r,n,s={}){const i=await Fi(t,e,r,n,s);return"mfaPendingCredential"in i&&ai(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function rA(t,e,r,n){const s=`${e}${r}?${n}`,i=t,o=i.config.emulator?Fw(t.config,s):`${t.config.apiScheme}://${s}`;return GL.includes(r)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function XL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class YL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ti(this.auth,"network-request-failed")),KL.get())})}}function Qm(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Ti(t,e,n);return s.customData._tokenResponse=r,s}function rS(t){return t!==void 0&&t.enterprise!==void 0}class QL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return XL(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function JL(t,e){return Fi(t,"GET","/v2/recaptchaConfig",Vl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZL(t,e){return Fi(t,"POST","/v1/accounts:delete",e)}async function Bp(t,e){return Fi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eO(t,e=!1){const r=Lr(t),n=await r.getIdToken(e),s=Lw(n);At(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:nf(gy(s.auth_time)),issuedAtTime:nf(gy(s.iat)),expirationTime:nf(gy(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function gy(t){return Number(t)*1e3}function Lw(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Np("JWT malformed, contained fewer than 3 sections"),null;try{const s=Vj(r);return s?JSON.parse(s):(Np("Failed to decode base64 JWT payload"),null)}catch(s){return Np("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function nS(t){const e=Lw(t);return At(e,"internal-error"),At(typeof e.exp<"u","internal-error"),At(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof ko&&tO(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function tO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=nf(this.lastLoginAt),this.creationTime=nf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Up(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Pc(t,Bp(r,{idToken:n}));At(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?nA(i.providerUserInfo):[],l=sO(t.providerData,o),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new w1(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function nO(t){const e=Lr(t);await Up(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sO(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function nA(t){return t.map(e=>{var{providerId:r}=e,n=Pw(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO(t,e){const r=await tA(t,{},async()=>{const n=a0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await rA(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:n};return t.emulatorConfig&&$d(t.emulatorConfig.host)&&(u.credentials="include"),eA.fetch()(o,u)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function iO(t,e){return Fi(t,"POST","/v2/accounts:revokeToken",Vl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){At(e.idToken,"internal-error"),At(typeof e.idToken<"u","internal-error"),At(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){At(e.length!==0,"internal-error");const r=nS(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(At(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await aO(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,o=new od;return n&&(At(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(At(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(At(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new od,this.toJSON())}_performRefresh(){return to("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(t,e){At(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Za{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=Pw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new w1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Pc(this,this.stsTokenManager.getToken(this.auth,e));return At(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return eO(this,e)}reload(){return nO(this)}_assign(e){this!==e&&(At(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Za(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Up(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ia(this.auth.app))return Promise.reject(ao(this.auth));const e=await this.getIdToken();return await Pc(this,ZL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,o,l,u,h,f;const p=(n=r.displayName)!==null&&n!==void 0?n:void 0,x=(s=r.email)!==null&&s!==void 0?s:void 0,v=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=r.photoURL)!==null&&o!==void 0?o:void 0,b=(l=r.tenantId)!==null&&l!==void 0?l:void 0,_=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,R=(h=r.createdAt)!==null&&h!==void 0?h:void 0,j=(f=r.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:k,emailVerified:F,isAnonymous:L,providerData:I,stsTokenManager:N}=r;At(k&&N,e,"internal-error");const T=od.fromJSON(this.name,N);At(typeof k=="string",e,"internal-error"),nl(p,e.name),nl(x,e.name),At(typeof F=="boolean",e,"internal-error"),At(typeof L=="boolean",e,"internal-error"),nl(v,e.name),nl(w,e.name),nl(b,e.name),nl(_,e.name),nl(R,e.name),nl(j,e.name);const P=new Za({uid:k,auth:e,email:x,emailVerified:F,displayName:p,isAnonymous:L,photoURL:w,phoneNumber:v,tenantId:b,stsTokenManager:T,createdAt:R,lastLoginAt:j});return I&&Array.isArray(I)&&(P.providerData=I.map(B=>Object.assign({},B))),_&&(P._redirectEventId=_),P}static async _fromIdTokenResponse(e,r,n=!1){const s=new od;s.updateFromServerResponse(r);const i=new Za({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Up(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];At(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?nA(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new od;l.updateFromIdToken(n);const u=new Za({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new w1(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=new Map;function ro(t){go(t instanceof Function,"Expected a class definition");let e=sS.get(t);return e?(go(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}sA.type="NONE";const aS=sA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t,e,r){return`firebase:${t}:${e}:${r}`}class ld{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Ep(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ep("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Bp(this.auth,{idToken:e}).catch(()=>{});return r?Za._fromGetAccountInfoResponse(this.auth,r,e):null}return Za._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new ld(ro(aS),e,n);const s=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||ro(aS);const o=Ep(n,e.config.apiKey,e.name);let l=null;for(const h of r)try{const f=await h._get(o);if(f){let p;if(typeof f=="string"){const x=await Bp(e,{idToken:f}).catch(()=>{});if(!x)break;p=await Za._fromGetAccountInfoResponse(e,x,f)}else p=Za._fromJSON(e,f);h!==i&&(l=p),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ld(i,e,n):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(r.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new ld(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uA(e))return"Blackberry";if(dA(e))return"Webos";if(iA(e))return"Safari";if((e.includes("chrome/")||oA(e))&&!e.includes("edge/"))return"Chrome";if(cA(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function aA(t=ws()){return/firefox\//i.test(t)}function iA(t=ws()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oA(t=ws()){return/crios\//i.test(t)}function lA(t=ws()){return/iemobile/i.test(t)}function cA(t=ws()){return/android/i.test(t)}function uA(t=ws()){return/blackberry/i.test(t)}function dA(t=ws()){return/webos/i.test(t)}function Ow(t=ws()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function oO(t=ws()){var e;return Ow(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lO(){return _8()&&document.documentMode===10}function hA(t=ws()){return Ow(t)||cA(t)||dA(t)||uA(t)||/windows phone/i.test(t)||lA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t,e=[]){let r;switch(t){case"Browser":r=iS(ws());break;case"Worker":r=`${iS(ws())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Hd}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(t,e={}){return Fi(t,"GET","/v2/passwordPolicy",Vl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=6;class hO{constructor(e){var r,n,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:dO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oS(this),this.idTokenSubscription=new oS(this),this.beforeStateQueue=new cO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ro(r)),this._initializationPromise=this.queue(async()=>{var n,s,i;if(!this._deleted&&(this.persistenceManager=await ld.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Bp(this,{idToken:e}),n=await Za._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Ia(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return At(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Up(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ia(this.app))return Promise.reject(ao(this));const r=e?Lr(e):null;return r&&At(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&At(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ia(this.app)?Promise.reject(ao(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ia(this.app)?Promise.reject(ao(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ro(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uO(this),r=new hO(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new s0("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await iO(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ro(e)||this._popupRedirectResolver;At(r,this,"argument-error"),this.redirectPersistenceManager=await ld.create(this,[ro(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(At(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,s);return()=>{o=!0,u()}}else{const u=e.addObserver(r);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;if(Ia(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&zL(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Yc(t){return Lr(t)}class oS{constructor(e){this.auth=e,this.observer=null,this.addObserver=C8(r=>this.observer=r)}get next(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mO(t){Dx=t}function mA(t){return Dx.loadJS(t)}function pO(){return Dx.recaptchaEnterpriseScript}function xO(){return Dx.gapiScript}function gO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class vO{constructor(){this.enterprise=new yO}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class yO{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const wO="recaptcha-enterprise",pA="NO_RECAPTCHA";class bO{constructor(e){this.type=wO,this.auth=Yc(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{JL(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new QL(u);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;rS(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(pA)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vO().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{n(this.auth).then(l=>{if(!r&&rS(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=pO();u.length!==0&&(u+=l),mA(u).then(()=>{s(l,i,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function lS(t,e,r,n=!1,s=!1){const i=new bO(t);let o;if(s)o=pA;else try{o=await i.verify(r)}catch{o=await i.verify(r,!0)}const l=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function b1(t,e,r,n,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await lS(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await lS(t,e,r,r==="getOobCode");return n(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(t,e){const r=Rw(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(po(i,e??{}))return s;ai(s,"already-initialized")}return r.initialize({options:e})}function NO(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(ro);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function EO(t,e,r){const n=Yc(t);At(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=xA(e),{host:o,port:l}=SO(e),u=l===null?"":`:${l}`,h={url:`${i}//${o}${u}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){At(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),At(po(h,n.config.emulator)&&po(f,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=f,n.settings.appVerificationDisabledForTesting=!0,$d(o)?($j(`${i}//${o}${u}`),Hj("Auth",!0)):kO()}function xA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function SO(t){const e=xA(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:cS(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:cS(o)}}}function cS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kO(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return to("not implemented")}_getIdTokenResponse(e){return to("not implemented")}_linkToIdToken(e,r){return to("not implemented")}_getReauthenticationResolver(e){return to("not implemented")}}async function TO(t,e){return Fi(t,"POST","/v1/accounts:update",e)}async function jO(t,e){return Fi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(t,e){return o0(t,"POST","/v1/accounts:signInWithPassword",Vl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CO(t,e){return o0(t,"POST","/v1/accounts:signInWithEmailLink",Vl(t,e))}async function IO(t,e){return o0(t,"POST","/v1/accounts:signInWithEmailLink",Vl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf extends Mw{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new kf(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new kf(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return b1(e,r,"signInWithPassword",AO);case"emailLink":return CO(e,{email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return b1(e,n,"signUpPassword",jO);case"emailLink":return IO(e,{idToken:r,email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cd(t,e){return o0(t,"POST","/v1/accounts:signInWithIdp",Vl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO="http://localhost";class Dc extends Mw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Dc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):ai("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=Pw(r,["providerId","signInMethod"]);if(!n||!s)return null;const o=new Dc(n,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return cd(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,cd(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,cd(e,r)}buildRequest(){const e={requestUri:RO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=a0(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DO(t){const e=Hh(Wh(t)).link,r=e?Hh(Wh(e)).deep_link_id:null,n=Hh(Wh(t)).deep_link_id;return(n?Hh(Wh(n)).link:null)||n||r||e||t}class Vw{constructor(e){var r,n,s,i,o,l;const u=Hh(Wh(e)),h=(r=u.apiKey)!==null&&r!==void 0?r:null,f=(n=u.oobCode)!==null&&n!==void 0?n:null,p=PO((s=u.mode)!==null&&s!==void 0?s:null);At(h&&f&&p,"argument-error"),this.apiKey=h,this.operation=p,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=DO(e);try{return new Vw(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(){this.providerId=Qc.PROVIDER_ID}static credential(e,r){return kf._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Vw.parseLink(r);return At(n,"argument-error"),kf._fromEmailAndCode(e,n.code,n.tenantId)}}Qc.PROVIDER_ID="password";Qc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0 extends gA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends l0{constructor(){super("facebook.com")}static credential(e){return Dc._fromParams({providerId:cl.PROVIDER_ID,signInMethod:cl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cl.credentialFromTaggedObject(e)}static credentialFromError(e){return cl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cl.credential(e.oauthAccessToken)}catch{return null}}}cl.FACEBOOK_SIGN_IN_METHOD="facebook.com";cl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends l0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Dc._fromParams({providerId:ul.PROVIDER_ID,signInMethod:ul.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ul.credentialFromTaggedObject(e)}static credentialFromError(e){return ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return ul.credential(r,n)}catch{return null}}}ul.GOOGLE_SIGN_IN_METHOD="google.com";ul.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends l0{constructor(){super("github.com")}static credential(e){return Dc._fromParams({providerId:dl.PROVIDER_ID,signInMethod:dl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dl.credentialFromTaggedObject(e)}static credentialFromError(e){return dl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dl.credential(e.oauthAccessToken)}catch{return null}}}dl.GITHUB_SIGN_IN_METHOD="github.com";dl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends l0{constructor(){super("twitter.com")}static credential(e,r){return Dc._fromParams({providerId:hl.PROVIDER_ID,signInMethod:hl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return hl.credentialFromTaggedObject(e)}static credentialFromError(e){return hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return hl.credential(r,n)}catch{return null}}}hl.TWITTER_SIGN_IN_METHOD="twitter.com";hl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(t,e){return o0(t,"POST","/v1/accounts:signUp",Vl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Za._fromIdTokenResponse(e,n,s),o=uS(n);return new Fc({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=uS(n);return new Fc({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function uS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp extends ko{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,zp.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new zp(e,r,n,s)}}function vA(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?zp._fromErrorAndOperation(t,i,e,n):i})}async function LO(t,e,r=!1){const n=await Pc(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Fc._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(t,e,r=!1){const{auth:n}=t;if(Ia(n.app))return Promise.reject(ao(n));const s="reauthenticate";try{const i=await Pc(t,vA(n,s,e,t),r);At(i.idToken,n,"internal-error");const o=Lw(i.idToken);At(o,n,"internal-error");const{sub:l}=o;return At(t.uid===l,n,"user-mismatch"),Fc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ai(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(t,e,r=!1){if(Ia(t.app))return Promise.reject(ao(t));const n="signIn",s=await vA(t,n,e),i=await Fc._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function OO(t,e){return wA(Yc(t),e)}async function MO(t,e){return yA(Lr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bA(t){const e=Yc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dS(t,e,r){if(Ia(t.app))return Promise.reject(ao(t));const n=Yc(t),o=await b1(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FO).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&bA(t),u}),l=await Fc._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function VO(t,e,r){return Ia(t.app)?Promise.reject(ao(t)):OO(Lr(t),Qc.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&bA(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BO(t,e){return Fi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vy(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=Lr(t),i={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await Pc(n,BO(n.auth,i));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const l=n.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function UO(t,e){return zO(Lr(t),null,e)}async function zO(t,e,r){const{auth:n}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};r&&(i.password=r);const o=await Pc(t,TO(n,i));await t._updateTokensIfNecessary(o,!0)}function $O(t,e,r,n){return Lr(t).onIdTokenChanged(e,r,n)}function HO(t,e,r){return Lr(t).beforeAuthStateChanged(e,r)}function WO(t,e,r,n){return Lr(t).onAuthStateChanged(e,r,n)}function qO(t){return Lr(t).signOut()}const $p="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem($p,"1"),this.storage.removeItem($p),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=1e3,KO=10;class NA extends _A{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);lO()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,KO):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},GO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}NA.type="LOCAL";const XO=NA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA extends _A{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}EA.type="SESSION";const SA=EA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Fx(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(o).map(async h=>h(r.origin,i)),u=await YO(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const h=Bw("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(p){const x=p;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(x.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(){return window}function JO(t){ji().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(){return typeof ji().WorkerGlobalScope<"u"&&typeof ji().importScripts=="function"}async function ZO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function tM(){return kA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="firebaseLocalStorageDb",rM=1,Hp="firebaseLocalStorage",jA="fbase_key";class c0{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Lx(t,e){return t.transaction([Hp],e?"readwrite":"readonly").objectStore(Hp)}function nM(){const t=indexedDB.deleteDatabase(TA);return new c0(t).toPromise()}function _1(){const t=indexedDB.open(TA,rM);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Hp,{keyPath:jA})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Hp)?e(n):(n.close(),await nM(),e(await _1()))})})}async function hS(t,e,r){const n=Lx(t,!0).put({[jA]:e,value:r});return new c0(n).toPromise()}async function sM(t,e){const r=Lx(t,!1).get(e),n=await new c0(r).toPromise();return n===void 0?null:n.value}function fS(t,e){const r=Lx(t,!0).delete(e);return new c0(r).toPromise()}const aM=800,iM=3;class AA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _1(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>iM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fx._getInstance(tM()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await ZO(),!this.activeServiceWorker)return;this.sender=new QO(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _1();return await hS(e,$p,"1"),await fS(e,$p),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>hS(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>sM(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>fS(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Lx(s,!1).getAll();return new c0(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AA.type="LOCAL";const oM=AA;new i0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(t,e){return e?ro(e):(At(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw extends Mw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cd(e,this._buildIdpRequest())}_linkToIdToken(e,r){return cd(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return cd(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function cM(t){return wA(t.auth,new Uw(t),t.bypassAuthState)}function uM(t){const{auth:e,user:r}=t;return At(r,e,"internal-error"),yA(r,new Uw(t),t.bypassAuthState)}async function dM(t){const{auth:e,user:r}=t;return At(r,e,"internal-error"),LO(r,new Uw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cM;case"linkViaPopup":case"linkViaRedirect":return dM;case"reauthViaPopup":case"reauthViaRedirect":return uM;default:ai(this.auth,"internal-error")}}resolve(e){go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=new i0(2e3,1e4);class Zu extends CA{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Zu.currentPopupAction&&Zu.currentPopupAction.cancel(),Zu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return At(e,this.auth,"internal-error"),e}async onExecution(){go(this.filter.length===1,"Popup operations only handle one event");const e=Bw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hM.get())};e()}}Zu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM="pendingRedirect",Sp=new Map;class mM extends CA{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Sp.get(this.auth._key());if(!e){try{const n=await pM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Sp.set(this.auth._key(),e)}return this.bypassAuthState||Sp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pM(t,e){const r=vM(e),n=gM(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function xM(t,e){Sp.set(t._key(),e)}function gM(t){return ro(t._redirectPersistence)}function vM(t){return Ep(fM,t.config.apiKey,t.name)}async function yM(t,e,r=!1){if(Ia(t.app))return Promise.reject(ao(t));const n=Yc(t),s=lM(n,e),o=await new mM(n,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=10*60*1e3;class bM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_M(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!IA(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Ti(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wM&&this.cachedEventUids.clear(),this.cachedEventUids.has(mS(e))}saveEventToCache(e){this.cachedEventUids.add(mS(e)),this.lastProcessedEventTime=Date.now()}}function mS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function IA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _M(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(t,e={}){return Fi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SM=/^https?/;async function kM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await NM(t);for(const r of e)try{if(TM(r))return}catch{}ai(t,"unauthorized-domain")}function TM(t){const e=y1(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!SM.test(r))return!1;if(EM.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=new i0(3e4,6e4);function pS(){const t=ji().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function AM(t){return new Promise((e,r)=>{var n,s,i;function o(){pS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pS(),r(Ti(t,"network-request-failed"))},timeout:jM.get()})}if(!((s=(n=ji().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ji().gapi)===null||i===void 0)&&i.load)o();else{const l=gO("iframefcb");return ji()[l]=()=>{gapi.load?o():r(Ti(t,"network-request-failed"))},mA(`${xO()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw kp=null,e})}let kp=null;function CM(t){return kp=kp||AM(t),kp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=new i0(5e3,15e3),RM="__/auth/iframe",PM="emulator/auth/iframe",DM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LM(t){const e=t.config;At(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Fw(e,PM):`https://${t.config.authDomain}/${RM}`,n={apiKey:e.apiKey,appName:t.name,v:Hd},s=FM.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${a0(n).slice(1)}`}async function OM(t){const e=await CM(t),r=ji().gapi;return At(r,t,"internal-error"),e.open({where:document.body,url:LM(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DM,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const o=Ti(t,"network-request-failed"),l=ji().setTimeout(()=>{i(o)},IM.get());function u(){ji().clearTimeout(l),s(n)}n.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VM=500,BM=600,UM="_blank",zM="http://localhost";class xS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $M(t,e,r,n=VM,s=BM){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const u=Object.assign(Object.assign({},MM),{width:n.toString(),height:s.toString(),top:i,left:o}),h=ws().toLowerCase();r&&(l=oA(h)?UM:r),aA(h)&&(e=e||zM,u.scrollbars="yes");const f=Object.entries(u).reduce((x,[v,w])=>`${x}${v}=${w},`,"");if(oO(h)&&l!=="_self")return HM(e||"",l),new xS(null);const p=window.open(e||"",l,f);At(p,t,"popup-blocked");try{p.focus()}catch{}return new xS(p)}function HM(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="__/auth/handler",qM="emulator/auth/handler",GM=encodeURIComponent("fac");async function gS(t,e,r,n,s,i){At(t.config.authDomain,t,"auth-domain-config-required"),At(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Hd,eventId:s};if(e instanceof gA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",A8(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof l0){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),h=u?`#${GM}=${encodeURIComponent(u)}`:"";return`${KM(t)}?${a0(l).slice(1)}${h}`}function KM({config:t}){return t.emulator?Fw(t,qM):`https://${t.authDomain}/${WM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="webStorageSupport";class XM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SA,this._completeRedirectFn=yM,this._overrideRedirectResult=xM}async _openPopup(e,r,n,s){var i;go((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await gS(e,r,n,y1(),s);return $M(e,o,Bw())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await gS(e,r,n,y1(),s);return JO(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(go(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await OM(e),n=new bM(e);return r.register("authEvent",s=>(At(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(yy,{type:yy},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[yy];o!==void 0&&r(!!o),ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=kM(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return hA()||iA()||Ow()}}const YM=XM;var vS="@firebase/auth",yS="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZM(t){gd(new Rc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;At(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fA(t)},h=new fO(n,s,i,u);return NO(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),gd(new Rc("auth-internal",e=>{const r=Yc(e.getProvider("auth").getImmediate());return(n=>new QM(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),wl(vS,yS,JM(t)),wl(vS,yS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e9=5*60,t9=zj("authIdTokenMaxAge")||e9;let wS=null;const r9=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>t9)return;const s=r==null?void 0:r.token;wS!==s&&(wS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function n9(t=Kj()){const e=Rw(t,"auth");if(e.isInitialized())return e.getImmediate();const r=_O(t,{popupRedirectResolver:YM,persistence:[oM,XO,SA]}),n=zj("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=r9(i.toString());HO(r,o,()=>o(r.currentUser)),$O(r,l=>o(l))}}const s=Bj("auth");return s&&EO(r,`http://${s}`),r}function s9(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mO({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=Ti("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",s9().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZM("Browser");var bS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bl,RA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,T){function P(){}P.prototype=T.prototype,N.D=T.prototype,N.prototype=new P,N.prototype.constructor=N,N.C=function(B,z,O){for(var D=Array(arguments.length-2),G=2;G<arguments.length;G++)D[G-2]=arguments[G];return T.prototype[z].apply(B,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,T,P){P||(P=0);var B=Array(16);if(typeof T=="string")for(var z=0;16>z;++z)B[z]=T.charCodeAt(P++)|T.charCodeAt(P++)<<8|T.charCodeAt(P++)<<16|T.charCodeAt(P++)<<24;else for(z=0;16>z;++z)B[z]=T[P++]|T[P++]<<8|T[P++]<<16|T[P++]<<24;T=N.g[0],P=N.g[1],z=N.g[2];var O=N.g[3],D=T+(O^P&(z^O))+B[0]+3614090360&4294967295;T=P+(D<<7&4294967295|D>>>25),D=O+(z^T&(P^z))+B[1]+3905402710&4294967295,O=T+(D<<12&4294967295|D>>>20),D=z+(P^O&(T^P))+B[2]+606105819&4294967295,z=O+(D<<17&4294967295|D>>>15),D=P+(T^z&(O^T))+B[3]+3250441966&4294967295,P=z+(D<<22&4294967295|D>>>10),D=T+(O^P&(z^O))+B[4]+4118548399&4294967295,T=P+(D<<7&4294967295|D>>>25),D=O+(z^T&(P^z))+B[5]+1200080426&4294967295,O=T+(D<<12&4294967295|D>>>20),D=z+(P^O&(T^P))+B[6]+2821735955&4294967295,z=O+(D<<17&4294967295|D>>>15),D=P+(T^z&(O^T))+B[7]+4249261313&4294967295,P=z+(D<<22&4294967295|D>>>10),D=T+(O^P&(z^O))+B[8]+1770035416&4294967295,T=P+(D<<7&4294967295|D>>>25),D=O+(z^T&(P^z))+B[9]+2336552879&4294967295,O=T+(D<<12&4294967295|D>>>20),D=z+(P^O&(T^P))+B[10]+4294925233&4294967295,z=O+(D<<17&4294967295|D>>>15),D=P+(T^z&(O^T))+B[11]+2304563134&4294967295,P=z+(D<<22&4294967295|D>>>10),D=T+(O^P&(z^O))+B[12]+1804603682&4294967295,T=P+(D<<7&4294967295|D>>>25),D=O+(z^T&(P^z))+B[13]+4254626195&4294967295,O=T+(D<<12&4294967295|D>>>20),D=z+(P^O&(T^P))+B[14]+2792965006&4294967295,z=O+(D<<17&4294967295|D>>>15),D=P+(T^z&(O^T))+B[15]+1236535329&4294967295,P=z+(D<<22&4294967295|D>>>10),D=T+(z^O&(P^z))+B[1]+4129170786&4294967295,T=P+(D<<5&4294967295|D>>>27),D=O+(P^z&(T^P))+B[6]+3225465664&4294967295,O=T+(D<<9&4294967295|D>>>23),D=z+(T^P&(O^T))+B[11]+643717713&4294967295,z=O+(D<<14&4294967295|D>>>18),D=P+(O^T&(z^O))+B[0]+3921069994&4294967295,P=z+(D<<20&4294967295|D>>>12),D=T+(z^O&(P^z))+B[5]+3593408605&4294967295,T=P+(D<<5&4294967295|D>>>27),D=O+(P^z&(T^P))+B[10]+38016083&4294967295,O=T+(D<<9&4294967295|D>>>23),D=z+(T^P&(O^T))+B[15]+3634488961&4294967295,z=O+(D<<14&4294967295|D>>>18),D=P+(O^T&(z^O))+B[4]+3889429448&4294967295,P=z+(D<<20&4294967295|D>>>12),D=T+(z^O&(P^z))+B[9]+568446438&4294967295,T=P+(D<<5&4294967295|D>>>27),D=O+(P^z&(T^P))+B[14]+3275163606&4294967295,O=T+(D<<9&4294967295|D>>>23),D=z+(T^P&(O^T))+B[3]+4107603335&4294967295,z=O+(D<<14&4294967295|D>>>18),D=P+(O^T&(z^O))+B[8]+1163531501&4294967295,P=z+(D<<20&4294967295|D>>>12),D=T+(z^O&(P^z))+B[13]+2850285829&4294967295,T=P+(D<<5&4294967295|D>>>27),D=O+(P^z&(T^P))+B[2]+4243563512&4294967295,O=T+(D<<9&4294967295|D>>>23),D=z+(T^P&(O^T))+B[7]+1735328473&4294967295,z=O+(D<<14&4294967295|D>>>18),D=P+(O^T&(z^O))+B[12]+2368359562&4294967295,P=z+(D<<20&4294967295|D>>>12),D=T+(P^z^O)+B[5]+4294588738&4294967295,T=P+(D<<4&4294967295|D>>>28),D=O+(T^P^z)+B[8]+2272392833&4294967295,O=T+(D<<11&4294967295|D>>>21),D=z+(O^T^P)+B[11]+1839030562&4294967295,z=O+(D<<16&4294967295|D>>>16),D=P+(z^O^T)+B[14]+4259657740&4294967295,P=z+(D<<23&4294967295|D>>>9),D=T+(P^z^O)+B[1]+2763975236&4294967295,T=P+(D<<4&4294967295|D>>>28),D=O+(T^P^z)+B[4]+1272893353&4294967295,O=T+(D<<11&4294967295|D>>>21),D=z+(O^T^P)+B[7]+4139469664&4294967295,z=O+(D<<16&4294967295|D>>>16),D=P+(z^O^T)+B[10]+3200236656&4294967295,P=z+(D<<23&4294967295|D>>>9),D=T+(P^z^O)+B[13]+681279174&4294967295,T=P+(D<<4&4294967295|D>>>28),D=O+(T^P^z)+B[0]+3936430074&4294967295,O=T+(D<<11&4294967295|D>>>21),D=z+(O^T^P)+B[3]+3572445317&4294967295,z=O+(D<<16&4294967295|D>>>16),D=P+(z^O^T)+B[6]+76029189&4294967295,P=z+(D<<23&4294967295|D>>>9),D=T+(P^z^O)+B[9]+3654602809&4294967295,T=P+(D<<4&4294967295|D>>>28),D=O+(T^P^z)+B[12]+3873151461&4294967295,O=T+(D<<11&4294967295|D>>>21),D=z+(O^T^P)+B[15]+530742520&4294967295,z=O+(D<<16&4294967295|D>>>16),D=P+(z^O^T)+B[2]+3299628645&4294967295,P=z+(D<<23&4294967295|D>>>9),D=T+(z^(P|~O))+B[0]+4096336452&4294967295,T=P+(D<<6&4294967295|D>>>26),D=O+(P^(T|~z))+B[7]+1126891415&4294967295,O=T+(D<<10&4294967295|D>>>22),D=z+(T^(O|~P))+B[14]+2878612391&4294967295,z=O+(D<<15&4294967295|D>>>17),D=P+(O^(z|~T))+B[5]+4237533241&4294967295,P=z+(D<<21&4294967295|D>>>11),D=T+(z^(P|~O))+B[12]+1700485571&4294967295,T=P+(D<<6&4294967295|D>>>26),D=O+(P^(T|~z))+B[3]+2399980690&4294967295,O=T+(D<<10&4294967295|D>>>22),D=z+(T^(O|~P))+B[10]+4293915773&4294967295,z=O+(D<<15&4294967295|D>>>17),D=P+(O^(z|~T))+B[1]+2240044497&4294967295,P=z+(D<<21&4294967295|D>>>11),D=T+(z^(P|~O))+B[8]+1873313359&4294967295,T=P+(D<<6&4294967295|D>>>26),D=O+(P^(T|~z))+B[15]+4264355552&4294967295,O=T+(D<<10&4294967295|D>>>22),D=z+(T^(O|~P))+B[6]+2734768916&4294967295,z=O+(D<<15&4294967295|D>>>17),D=P+(O^(z|~T))+B[13]+1309151649&4294967295,P=z+(D<<21&4294967295|D>>>11),D=T+(z^(P|~O))+B[4]+4149444226&4294967295,T=P+(D<<6&4294967295|D>>>26),D=O+(P^(T|~z))+B[11]+3174756917&4294967295,O=T+(D<<10&4294967295|D>>>22),D=z+(T^(O|~P))+B[2]+718787259&4294967295,z=O+(D<<15&4294967295|D>>>17),D=P+(O^(z|~T))+B[9]+3951481745&4294967295,N.g[0]=N.g[0]+T&4294967295,N.g[1]=N.g[1]+(z+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+z&4294967295,N.g[3]=N.g[3]+O&4294967295}n.prototype.u=function(N,T){T===void 0&&(T=N.length);for(var P=T-this.blockSize,B=this.B,z=this.h,O=0;O<T;){if(z==0)for(;O<=P;)s(this,N,O),O+=this.blockSize;if(typeof N=="string"){for(;O<T;)if(B[z++]=N.charCodeAt(O++),z==this.blockSize){s(this,B),z=0;break}}else for(;O<T;)if(B[z++]=N[O++],z==this.blockSize){s(this,B),z=0;break}}this.h=z,this.o+=T},n.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var T=1;T<N.length-8;++T)N[T]=0;var P=8*this.o;for(T=N.length-8;T<N.length;++T)N[T]=P&255,P/=256;for(this.u(N),N=Array(16),T=P=0;4>T;++T)for(var B=0;32>B;B+=8)N[P++]=this.g[T]>>>B&255;return N};function i(N,T){var P=l;return Object.prototype.hasOwnProperty.call(P,N)?P[N]:P[N]=T(N)}function o(N,T){this.h=T;for(var P=[],B=!0,z=N.length-1;0<=z;z--){var O=N[z]|0;B&&O==T||(P[z]=O,B=!1)}this.g=P}var l={};function u(N){return-128<=N&&128>N?i(N,function(T){return new o([T|0],0>T?-1:0)}):new o([N|0],0>N?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return p;if(0>N)return _(h(-N));for(var T=[],P=1,B=0;N>=P;B++)T[B]=N/P|0,P*=4294967296;return new o(T,0)}function f(N,T){if(N.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(N.charAt(0)=="-")return _(f(N.substring(1),T));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=h(Math.pow(T,8)),B=p,z=0;z<N.length;z+=8){var O=Math.min(8,N.length-z),D=parseInt(N.substring(z,z+O),T);8>O?(O=h(Math.pow(T,O)),B=B.j(O).add(h(D))):(B=B.j(P),B=B.add(h(D)))}return B}var p=u(0),x=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-_(this).m();for(var N=0,T=1,P=0;P<this.g.length;P++){var B=this.i(P);N+=(0<=B?B:4294967296+B)*T,T*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(w(this))return"0";if(b(this))return"-"+_(this).toString(N);for(var T=h(Math.pow(N,6)),P=this,B="";;){var z=F(P,T).g;P=R(P,z.j(T));var O=((0<P.g.length?P.g[0]:P.h)>>>0).toString(N);if(P=z,w(P))return O+B;for(;6>O.length;)O="0"+O;B=O+B}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function w(N){if(N.h!=0)return!1;for(var T=0;T<N.g.length;T++)if(N.g[T]!=0)return!1;return!0}function b(N){return N.h==-1}t.l=function(N){return N=R(this,N),b(N)?-1:w(N)?0:1};function _(N){for(var T=N.g.length,P=[],B=0;B<T;B++)P[B]=~N.g[B];return new o(P,~N.h).add(x)}t.abs=function(){return b(this)?_(this):this},t.add=function(N){for(var T=Math.max(this.g.length,N.g.length),P=[],B=0,z=0;z<=T;z++){var O=B+(this.i(z)&65535)+(N.i(z)&65535),D=(O>>>16)+(this.i(z)>>>16)+(N.i(z)>>>16);B=D>>>16,O&=65535,D&=65535,P[z]=D<<16|O}return new o(P,P[P.length-1]&-2147483648?-1:0)};function R(N,T){return N.add(_(T))}t.j=function(N){if(w(this)||w(N))return p;if(b(this))return b(N)?_(this).j(_(N)):_(_(this).j(N));if(b(N))return _(this.j(_(N)));if(0>this.l(v)&&0>N.l(v))return h(this.m()*N.m());for(var T=this.g.length+N.g.length,P=[],B=0;B<2*T;B++)P[B]=0;for(B=0;B<this.g.length;B++)for(var z=0;z<N.g.length;z++){var O=this.i(B)>>>16,D=this.i(B)&65535,G=N.i(z)>>>16,Q=N.i(z)&65535;P[2*B+2*z]+=D*Q,j(P,2*B+2*z),P[2*B+2*z+1]+=O*Q,j(P,2*B+2*z+1),P[2*B+2*z+1]+=D*G,j(P,2*B+2*z+1),P[2*B+2*z+2]+=O*G,j(P,2*B+2*z+2)}for(B=0;B<T;B++)P[B]=P[2*B+1]<<16|P[2*B];for(B=T;B<2*T;B++)P[B]=0;return new o(P,0)};function j(N,T){for(;(N[T]&65535)!=N[T];)N[T+1]+=N[T]>>>16,N[T]&=65535,T++}function k(N,T){this.g=N,this.h=T}function F(N,T){if(w(T))throw Error("division by zero");if(w(N))return new k(p,p);if(b(N))return T=F(_(N),T),new k(_(T.g),_(T.h));if(b(T))return T=F(N,_(T)),new k(_(T.g),T.h);if(30<N.g.length){if(b(N)||b(T))throw Error("slowDivide_ only works with positive integers.");for(var P=x,B=T;0>=B.l(N);)P=L(P),B=L(B);var z=I(P,1),O=I(B,1);for(B=I(B,2),P=I(P,2);!w(B);){var D=O.add(B);0>=D.l(N)&&(z=z.add(P),O=D),B=I(B,1),P=I(P,1)}return T=R(N,z.j(T)),new k(z,T)}for(z=p;0<=N.l(T);){for(P=Math.max(1,Math.floor(N.m()/T.m())),B=Math.ceil(Math.log(P)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),O=h(P),D=O.j(T);b(D)||0<D.l(N);)P-=B,O=h(P),D=O.j(T);w(O)&&(O=x),z=z.add(O),N=R(N,D)}return new k(z,N)}t.A=function(N){return F(this,N).h},t.and=function(N){for(var T=Math.max(this.g.length,N.g.length),P=[],B=0;B<T;B++)P[B]=this.i(B)&N.i(B);return new o(P,this.h&N.h)},t.or=function(N){for(var T=Math.max(this.g.length,N.g.length),P=[],B=0;B<T;B++)P[B]=this.i(B)|N.i(B);return new o(P,this.h|N.h)},t.xor=function(N){for(var T=Math.max(this.g.length,N.g.length),P=[],B=0;B<T;B++)P[B]=this.i(B)^N.i(B);return new o(P,this.h^N.h)};function L(N){for(var T=N.g.length+1,P=[],B=0;B<T;B++)P[B]=N.i(B)<<1|N.i(B-1)>>>31;return new o(P,N.h)}function I(N,T){var P=T>>5;T%=32;for(var B=N.g.length-P,z=[],O=0;O<B;O++)z[O]=0<T?N.i(O+P)>>>T|N.i(O+P+1)<<32-T:N.i(O+P);return new o(z,N.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,RA=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,bl=o}).apply(typeof bS<"u"?bS:typeof self<"u"?self:typeof window<"u"?window:{});var Jm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PA,qh,DA,Tp,N1,FA,LA,OA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,A,V){return g==Array.prototype||g==Object.prototype||(g[A]=V.value),g};function r(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jm=="object"&&Jm];for(var A=0;A<g.length;++A){var V=g[A];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var n=r(this);function s(g,A){if(A)e:{var V=n;g=g.split(".");for(var J=0;J<g.length-1;J++){var _e=g[J];if(!(_e in V))break e;V=V[_e]}g=g[g.length-1],J=V[g],A=A(J),A!=J&&A!=null&&e(V,g,{configurable:!0,writable:!0,value:A})}}function i(g,A){g instanceof String&&(g+="");var V=0,J=!1,_e={next:function(){if(!J&&V<g.length){var Pe=V++;return{value:A(Pe,g[Pe]),done:!1}}return J=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}s("Array.prototype.values",function(g){return g||function(){return i(this,function(A,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(g){var A=typeof g;return A=A!="object"?A:g?Array.isArray(g)?"array":A:"null",A=="array"||A=="object"&&typeof g.length=="number"}function h(g){var A=typeof g;return A=="object"&&g!=null||A=="function"}function f(g,A,V){return g.call.apply(g.bind,arguments)}function p(g,A,V){if(!g)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,J),g.apply(A,_e)}}return function(){return g.apply(A,arguments)}}function x(g,A,V){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,x.apply(null,arguments)}function v(g,A){var V=Array.prototype.slice.call(arguments,1);return function(){var J=V.slice();return J.push.apply(J,arguments),g.apply(this,J)}}function w(g,A){function V(){}V.prototype=A.prototype,g.aa=A.prototype,g.prototype=new V,g.prototype.constructor=g,g.Qb=function(J,_e,Pe){for(var ot=Array(arguments.length-2),mr=2;mr<arguments.length;mr++)ot[mr-2]=arguments[mr];return A.prototype[_e].apply(J,ot)}}function b(g){const A=g.length;if(0<A){const V=Array(A);for(let J=0;J<A;J++)V[J]=g[J];return V}return[]}function _(g,A){for(let V=1;V<arguments.length;V++){const J=arguments[V];if(u(J)){const _e=g.length||0,Pe=J.length||0;g.length=_e+Pe;for(let ot=0;ot<Pe;ot++)g[_e+ot]=J[ot]}else g.push(J)}}class R{constructor(A,V){this.i=A,this.j=V,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function j(g){return/^[\s\xa0]*$/.test(g)}function k(){var g=l.navigator;return g&&(g=g.userAgent)?g:""}function F(g){return F[" "](g),g}F[" "]=function(){};var L=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function I(g,A,V){for(const J in g)A.call(V,g[J],J,g)}function N(g,A){for(const V in g)A.call(void 0,g[V],V,g)}function T(g){const A={};for(const V in g)A[V]=g[V];return A}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(g,A){let V,J;for(let _e=1;_e<arguments.length;_e++){J=arguments[_e];for(V in J)g[V]=J[V];for(let Pe=0;Pe<P.length;Pe++)V=P[Pe],Object.prototype.hasOwnProperty.call(J,V)&&(g[V]=J[V])}}function z(g){var A=1;g=g.split(":");const V=[];for(;0<A&&g.length;)V.push(g.shift()),A--;return g.length&&V.push(g.join(":")),V}function O(g){l.setTimeout(()=>{throw g},0)}function D(){var g=K;let A=null;return g.g&&(A=g.g,g.g=g.g.next,g.g||(g.h=null),A.next=null),A}class G{constructor(){this.h=this.g=null}add(A,V){const J=Q.get();J.set(A,V),this.h?this.h.next=J:this.g=J,this.h=J}}var Q=new R(()=>new ue,g=>g.reset());class ue{constructor(){this.next=this.g=this.h=null}set(A,V){this.h=A,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let H,te=!1,K=new G,ce=()=>{const g=l.Promise.resolve(void 0);H=()=>{g.then(U)}};var U=()=>{for(var g;g=D();){try{g.h.call(g.g)}catch(V){O(V)}var A=Q;A.j(g),100>A.h&&(A.h++,g.next=A.g,A.g=g)}te=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(g,A){this.type=g,this.g=this.target=A,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var g=!1,A=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const V=()=>{};l.addEventListener("test",V,A),l.removeEventListener("test",V,A)}catch{}return g}();function Z(g,A){if(X.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var V=this.type=g.type,J=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=A,A=g.relatedTarget){if(L){e:{try{F(A.nodeName);var _e=!0;break e}catch{}_e=!1}_e||(A=null)}}else V=="mouseover"?A=g.fromElement:V=="mouseout"&&(A=g.toElement);this.relatedTarget=A,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:fe[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&Z.aa.h.call(this)}}w(Z,X);var fe={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),me=0;function pe(g,A,V,J,_e){this.listener=g,this.proxy=null,this.src=A,this.type=V,this.capture=!!J,this.ha=_e,this.key=++me,this.da=this.fa=!1}function we(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Xe(g){this.src=g,this.g={},this.h=0}Xe.prototype.add=function(g,A,V,J,_e){var Pe=g.toString();g=this.g[Pe],g||(g=this.g[Pe]=[],this.h++);var ot=Ze(g,A,J,_e);return-1<ot?(A=g[ot],V||(A.fa=!1)):(A=new pe(A,this.src,Pe,!!J,_e),A.fa=V,g.push(A)),A};function re(g,A){var V=A.type;if(V in g.g){var J=g.g[V],_e=Array.prototype.indexOf.call(J,A,void 0),Pe;(Pe=0<=_e)&&Array.prototype.splice.call(J,_e,1),Pe&&(we(A),g.g[V].length==0&&(delete g.g[V],g.h--))}}function Ze(g,A,V,J){for(var _e=0;_e<g.length;++_e){var Pe=g[_e];if(!Pe.da&&Pe.listener==A&&Pe.capture==!!V&&Pe.ha==J)return _e}return-1}var Fe="closure_lm_"+(1e6*Math.random()|0),ge={};function be(g,A,V,J,_e){if(Array.isArray(A)){for(var Pe=0;Pe<A.length;Pe++)be(g,A[Pe],V,J,_e);return null}return V=ye(V),g&&g[ie]?g.K(A,V,h(J)?!!J.capture:!1,_e):se(g,A,V,!1,J,_e)}function se(g,A,V,J,_e,Pe){if(!A)throw Error("Invalid event type");var ot=h(_e)?!!_e.capture:!!_e,mr=vt(g);if(mr||(g[Fe]=mr=new Xe(g)),V=mr.add(A,V,J,ot,Pe),V.proxy)return V;if(J=ve(),V.proxy=J,J.src=g,J.listener=V,g.addEventListener)Y||(_e=ot),_e===void 0&&(_e=!1),g.addEventListener(A.toString(),J,_e);else if(g.attachEvent)g.attachEvent(ze(A.toString()),J);else if(g.addListener&&g.removeListener)g.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return V}function ve(){function g(V){return A.call(g.src,g.listener,V)}const A=nt;return g}function Me(g,A,V,J,_e){if(Array.isArray(A))for(var Pe=0;Pe<A.length;Pe++)Me(g,A[Pe],V,J,_e);else J=h(J)?!!J.capture:!!J,V=ye(V),g&&g[ie]?(g=g.i,A=String(A).toString(),A in g.g&&(Pe=g.g[A],V=Ze(Pe,V,J,_e),-1<V&&(we(Pe[V]),Array.prototype.splice.call(Pe,V,1),Pe.length==0&&(delete g.g[A],g.h--)))):g&&(g=vt(g))&&(A=g.g[A.toString()],g=-1,A&&(g=Ze(A,V,J,_e)),(V=-1<g?A[g]:null)&&Re(V))}function Re(g){if(typeof g!="number"&&g&&!g.da){var A=g.src;if(A&&A[ie])re(A.i,g);else{var V=g.type,J=g.proxy;A.removeEventListener?A.removeEventListener(V,J,g.capture):A.detachEvent?A.detachEvent(ze(V),J):A.addListener&&A.removeListener&&A.removeListener(J),(V=vt(A))?(re(V,g),V.h==0&&(V.src=null,A[Fe]=null)):we(g)}}}function ze(g){return g in ge?ge[g]:ge[g]="on"+g}function nt(g,A){if(g.da)g=!0;else{A=new Z(A,this);var V=g.listener,J=g.ha||g.src;g.fa&&Re(g),g=V.call(J,A)}return g}function vt(g){return g=g[Fe],g instanceof Xe?g:null}var Le="__closure_events_fn_"+(1e9*Math.random()>>>0);function ye(g){return typeof g=="function"?g:(g[Le]||(g[Le]=function(A){return g.handleEvent(A)}),g[Le])}function Ee(){M.call(this),this.i=new Xe(this),this.M=this,this.F=null}w(Ee,M),Ee.prototype[ie]=!0,Ee.prototype.removeEventListener=function(g,A,V,J){Me(this,g,A,V,J)};function et(g,A){var V,J=g.F;if(J)for(V=[];J;J=J.F)V.push(J);if(g=g.M,J=A.type||A,typeof A=="string")A=new X(A,g);else if(A instanceof X)A.target=A.target||g;else{var _e=A;A=new X(J,g),B(A,_e)}if(_e=!0,V)for(var Pe=V.length-1;0<=Pe;Pe--){var ot=A.g=V[Pe];_e=lt(ot,J,!0,A)&&_e}if(ot=A.g=g,_e=lt(ot,J,!0,A)&&_e,_e=lt(ot,J,!1,A)&&_e,V)for(Pe=0;Pe<V.length;Pe++)ot=A.g=V[Pe],_e=lt(ot,J,!1,A)&&_e}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var g=this.i,A;for(A in g.g){for(var V=g.g[A],J=0;J<V.length;J++)we(V[J]);delete g.g[A],g.h--}}this.F=null},Ee.prototype.K=function(g,A,V,J){return this.i.add(String(g),A,!1,V,J)},Ee.prototype.L=function(g,A,V,J){return this.i.add(String(g),A,!0,V,J)};function lt(g,A,V,J){if(A=g.i.g[String(A)],!A)return!0;A=A.concat();for(var _e=!0,Pe=0;Pe<A.length;++Pe){var ot=A[Pe];if(ot&&!ot.da&&ot.capture==V){var mr=ot.listener,_n=ot.ha||ot.src;ot.fa&&re(g.i,ot),_e=mr.call(_n,J)!==!1&&_e}}return _e&&!J.defaultPrevented}function Lt(g,A,V){if(typeof g=="function")V&&(g=x(g,V));else if(g&&typeof g.handleEvent=="function")g=x(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:l.setTimeout(g,A||0)}function mt(g){g.g=Lt(()=>{g.g=null,g.i&&(g.i=!1,mt(g))},g.l);const A=g.h;g.h=null,g.m.apply(null,A)}class Mt extends M{constructor(A,V){super(),this.m=A,this.l=V,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:mt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hr(g){M.call(this),this.h=g,this.g={}}w(hr,M);var Jt=[];function Vr(g){I(g.g,function(A,V){this.g.hasOwnProperty(V)&&Re(A)},g),g.g={}}hr.prototype.N=function(){hr.aa.N.call(this),Vr(this)},hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wr=l.JSON.stringify,Xr=l.JSON.parse,sn=class{stringify(g){return l.JSON.stringify(g,void 0)}parse(g){return l.JSON.parse(g,void 0)}};function $n(){}$n.prototype.h=null;function Ds(g){return g.h||(g.h=g.i())}function ma(){}var pt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wt(){X.call(this,"d")}w(Wt,X);function cr(){X.call(this,"c")}w(cr,X);var Sr={},Cn=null;function Hn(){return Cn=Cn||new Ee}Sr.La="serverreachability";function Gl(g){X.call(this,Sr.La,g)}w(Gl,X);function Oa(g){const A=Hn();et(A,new Gl(A))}Sr.STAT_EVENT="statevent";function Kl(g,A){X.call(this,Sr.STAT_EVENT,g),this.stat=A}w(Kl,X);function Br(g){const A=Hn();et(A,new Kl(A,g))}Sr.Ma="timingevent";function Ro(g,A){X.call(this,Sr.Ma,g),this.size=A}w(Ro,X);function Ss(g,A){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){g()},A)}function Mi(){this.g=!0}Mi.prototype.xa=function(){this.g=!1};function Vi(g,A,V,J,_e,Pe){g.info(function(){if(g.g)if(Pe)for(var ot="",mr=Pe.split("&"),_n=0;_n<mr.length;_n++){var Zt=mr[_n].split("=");if(1<Zt.length){var In=Zt[0];Zt=Zt[1];var mn=In.split("_");ot=2<=mn.length&&mn[1]=="type"?ot+(In+"="+Zt+"&"):ot+(In+"=redacted&")}}else ot=null;else ot=Pe;return"XMLHTTP REQ ("+J+") [attempt "+_e+"]: "+A+`
`+V+`
`+ot})}function Po(g,A,V,J,_e,Pe,ot){g.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+_e+"]: "+A+`
`+V+`
`+Pe+" "+ot})}function q(g,A,V,J){g.info(function(){return"XMLHTTP TEXT ("+A+"): "+ee(g,V)+(J?" "+J:"")})}function ae(g,A){g.info(function(){return"TIMEOUT: "+A})}Mi.prototype.info=function(){};function ee(g,A){if(!g.g)return A;if(!A)return null;try{var V=JSON.parse(A);if(V){for(g=0;g<V.length;g++)if(Array.isArray(V[g])){var J=V[g];if(!(2>J.length)){var _e=J[1];if(Array.isArray(_e)&&!(1>_e.length)){var Pe=_e[0];if(Pe!="noop"&&Pe!="stop"&&Pe!="close")for(var ot=1;ot<_e.length;ot++)_e[ot]=""}}}}return wr(V)}catch{return A}}var ne={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},le;function Se(){}w(Se,$n),Se.prototype.g=function(){return new XMLHttpRequest},Se.prototype.i=function(){return{}},le=new Se;function De(g,A,V,J){this.j=g,this.i=A,this.l=V,this.R=J||1,this.U=new hr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ke}function ke(){this.i=null,this.g="",this.h=!1}var je={},Ae={};function Ge(g,A,V){g.L=1,g.v=Mo(Qs(A)),g.m=V,g.P=!0,st(g,null)}function st(g,A){g.F=Date.now(),Ye(g),g.A=Qs(g.v);var V=g.A,J=g.R;Array.isArray(J)||(J=[String(J)]),Bo(V.i,"t",J),g.C=0,V=g.j.J,g.h=new ke,g.g=em(g.j,V?A:null,!g.m),0<g.O&&(g.M=new Mt(x(g.Y,g,g.g),g.O)),A=g.U,V=g.g,J=g.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(Jt[0]=_e.toString()),_e=Jt);for(var Pe=0;Pe<_e.length;Pe++){var ot=be(V,_e[Pe],J||A.handleEvent,!1,A.h||A);if(!ot)break;A.g[ot.key]=ot}A=g.H?T(g.H):{},g.m?(g.u||(g.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,A)):(g.u="GET",g.g.ea(g.A,g.u,null,A)),Oa(),Vi(g.i,g.u,g.A,g.l,g.R,g.m)}De.prototype.ca=function(g){g=g.target;const A=this.M;A&&Ls(g)==3?A.j():this.Y(g)},De.prototype.Y=function(g){try{if(g==this.g)e:{const mn=Ls(this.g);var A=this.g.Ba();const xa=this.g.Z();if(!(3>mn)&&(mn!=3||this.g&&(this.h.h||this.g.oa()||hh(this.g)))){this.J||mn!=4||A==7||(A==8||0>=xa?Oa(3):Oa(2)),lr(this);var V=this.g.Z();this.X=V;t:if(dt(this)){var J=hh(this.g);g="";var _e=J.length,Pe=Ls(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fr(this),ar(this);var ot="";break t}this.h.i=new l.TextDecoder}for(A=0;A<_e;A++)this.h.h=!0,g+=this.h.i.decode(J[A],{stream:!(Pe&&A==_e-1)});J.length=0,this.h.g+=g,this.C=0,ot=this.h.g}else ot=this.g.oa();if(this.o=V==200,Po(this.i,this.u,this.A,this.l,this.R,mn,V),this.o){if(this.T&&!this.K){t:{if(this.g){var mr,_n=this.g;if((mr=_n.g?_n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(mr)){var Zt=mr;break t}}Zt=null}if(V=Zt)q(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ma(this,V);else{this.o=!1,this.s=3,Br(12),fr(this),ar(this);break e}}if(this.P){V=!0;let Zs;for(;!this.J&&this.C<ot.length;)if(Zs=Je(this,ot),Zs==Ae){mn==4&&(this.s=4,Br(14),V=!1),q(this.i,this.l,null,"[Incomplete Response]");break}else if(Zs==je){this.s=4,Br(15),q(this.i,this.l,ot,"[Invalid Chunk]"),V=!1;break}else q(this.i,this.l,Zs,null),Ma(this,Zs);if(dt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mn!=4||ot.length!=0||this.h.h||(this.s=1,Br(16),V=!1),this.o=this.o&&V,!V)q(this.i,this.l,ot,"[Invalid Chunked Response]"),fr(this),ar(this);else if(0<ot.length&&!this.W){this.W=!0;var In=this.j;In.g==this&&In.ba&&!In.M&&(In.j.info("Great, no buffering proxy detected. Bytes received: "+ot.length),mh(In),In.M=!0,Br(11))}}else q(this.i,this.l,ot,null),Ma(this,ot);mn==4&&fr(this),this.o&&!this.J&&(mn==4?wu(this.j,this):(this.o=!1,Ye(this)))}else pu(this.g),V==400&&0<ot.indexOf("Unknown SID")?(this.s=3,Br(12)):(this.s=0,Br(13)),fr(this),ar(this)}}}catch{}finally{}};function dt(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Je(g,A){var V=g.C,J=A.indexOf(`
`,V);return J==-1?Ae:(V=Number(A.substring(V,J)),isNaN(V)?je:(J+=1,J+V>A.length?Ae:(A=A.slice(J,J+V),g.C=J+V,A)))}De.prototype.cancel=function(){this.J=!0,fr(this)};function Ye(g){g.S=Date.now()+g.I,It(g,g.I)}function It(g,A){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Ss(x(g.ba,g),A)}function lr(g){g.B&&(l.clearTimeout(g.B),g.B=null)}De.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(ae(this.i,this.A),this.L!=2&&(Oa(),Br(17)),fr(this),this.s=2,ar(this)):It(this,this.S-g)};function ar(g){g.j.G==0||g.J||wu(g.j,g)}function fr(g){lr(g);var A=g.M;A&&typeof A.ma=="function"&&A.ma(),g.M=null,Vr(g.U),g.g&&(A=g.g,g.g=null,A.abort(),A.ma())}function Ma(g,A){try{var V=g.j;if(V.G!=0&&(V.g==g||kr(V.h,g))){if(!g.K&&kr(V.h,g)&&V.G==3){try{var J=V.Da.g.parse(A)}catch{J=null}if(Array.isArray(J)&&J.length==3){var _e=J;if(_e[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<g.F)yu(V),$a(V);else break e;vu(V),Br(18)}}else V.za=_e[1],0<V.za-V.T&&37500>_e[2]&&V.F&&V.v==0&&!V.C&&(V.C=Ss(x(V.Za,V),6e3));if(1>=Do(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else Hi(V,11)}else if((g.K||V.g==g)&&yu(V),!j(A))for(_e=V.Da.g.parse(A),A=0;A<_e.length;A++){let Zt=_e[A];if(V.T=Zt[0],Zt=Zt[1],V.G==2)if(Zt[0]=="c"){V.K=Zt[1],V.ia=Zt[2];const In=Zt[3];In!=null&&(V.la=In,V.j.info("VER="+V.la));const mn=Zt[4];mn!=null&&(V.Aa=mn,V.j.info("SVER="+V.Aa));const xa=Zt[5];xa!=null&&typeof xa=="number"&&0<xa&&(J=1.5*xa,V.L=J,V.j.info("backChannelRequestTimeoutMs_="+J)),J=V;const Zs=g.g;if(Zs){const ec=Zs.g?Zs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ec){var Pe=J.h;Pe.g||ec.indexOf("spdy")==-1&&ec.indexOf("quic")==-1&&ec.indexOf("h2")==-1||(Pe.j=Pe.l,Pe.g=new Set,Pe.h&&(lh(Pe,Pe.h),Pe.h=null))}if(J.D){const _u=Zs.g?Zs.g.getResponseHeader("X-HTTP-Session-Id"):null;_u&&(J.ya=_u,br(J.I,J.D,_u))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-g.F,V.j.info("Handshake RTT: "+V.R+"ms")),J=V;var ot=g;if(J.qa=Z0(J,J.J?J.ia:null,J.W),ot.K){U0(J.h,ot);var mr=ot,_n=J.L;_n&&(mr.I=_n),mr.B&&(lr(mr),Ye(mr)),J.g=ot}else Zl(J);0<V.i.length&&mi(V)}else Zt[0]!="stop"&&Zt[0]!="close"||Hi(V,7);else V.G==3&&(Zt[0]=="stop"||Zt[0]=="close"?Zt[0]=="stop"?Hi(V,7):qn(V):Zt[0]!="noop"&&V.l&&V.l.ta(Zt),V.v=0)}}Oa(4)}catch{}}var ui=class{constructor(g,A){this.g=g,this.map=A}};function Ys(g){this.l=g||10,l.PerformanceNavigationTiming?(g=l.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function an(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Do(g){return g.h?1:g.g?g.g.size:0}function kr(g,A){return g.h?g.h==A:g.g?g.g.has(A):!1}function lh(g,A){g.g?g.g.add(A):g.h=A}function U0(g,A){g.h&&g.h==A?g.h=null:g.g&&g.g.has(A)&&g.g.delete(A)}Ys.prototype.cancel=function(){if(this.i=z0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function z0(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let A=g.i;for(const V of g.g.values())A=A.concat(V.D);return A}return b(g.i)}function uu(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(u(g)){for(var A=[],V=g.length,J=0;J<V;J++)A.push(g[J]);return A}A=[],V=0;for(J in g)A[V++]=g[J];return A}function du(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(u(g)||typeof g=="string"){var A=[];g=g.length;for(var V=0;V<g;V++)A.push(V);return A}A=[],V=0;for(const J in g)A[V++]=J;return A}}}function Fo(g,A){if(g.forEach&&typeof g.forEach=="function")g.forEach(A,void 0);else if(u(g)||typeof g=="string")Array.prototype.forEach.call(g,A,void 0);else for(var V=du(g),J=uu(g),_e=J.length,Pe=0;Pe<_e;Pe++)A.call(void 0,J[Pe],V&&V[Pe],g)}var Xl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lg(g,A){if(g){g=g.split("&");for(var V=0;V<g.length;V++){var J=g[V].indexOf("="),_e=null;if(0<=J){var Pe=g[V].substring(0,J);_e=g[V].substring(J+1)}else Pe=g[V];A(Pe,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function Bi(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Bi){this.h=g.h,Yl(this,g.j),this.o=g.o,this.g=g.g,Lo(this,g.s),this.l=g.l;var A=g.i,V=new di;V.i=A.i,A.g&&(V.g=new Map(A.g),V.h=A.h),Oo(this,V),this.m=g.m}else g&&(A=String(g).match(Xl))?(this.h=!1,Yl(this,A[1]||"",!0),this.o=Yt(A[2]||""),this.g=Yt(A[3]||"",!0),Lo(this,A[4]),this.l=Yt(A[5]||"",!0),Oo(this,A[6]||"",!0),this.m=Yt(A[7]||"")):(this.h=!1,this.i=new di(null,this.h))}Bi.prototype.toString=function(){var g=[],A=this.j;A&&g.push(Vo(A,hu,!0),":");var V=this.g;return(V||A=="file")&&(g.push("//"),(A=this.o)&&g.push(Vo(A,hu,!0),"@"),g.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&g.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&g.push("/"),g.push(Vo(V,V.charAt(0)=="/"?W0:H0,!0))),(V=this.i.toString())&&g.push("?",V),(V=this.m)&&g.push("#",Vo(V,ch)),g.join("")};function Qs(g){return new Bi(g)}function Yl(g,A,V){g.j=V?Yt(A,!0):A,g.j&&(g.j=g.j.replace(/:$/,""))}function Lo(g,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);g.s=A}else g.s=null}function Oo(g,A,V){A instanceof di?(g.i=A,hi(g.i,g.h)):(V||(A=Vo(A,q0)),g.i=new di(A,g.h))}function br(g,A,V){g.i.set(A,V)}function Mo(g){return br(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Yt(g,A){return g?A?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Vo(g,A,V){return typeof g=="string"?(g=encodeURI(g).replace(A,$0),V&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function $0(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var hu=/[#\/\?@]/g,H0=/[#\?:]/g,W0=/[#\?]/g,q0=/[#\?@]/g,ch=/#/g;function di(g,A){this.h=this.g=null,this.i=g||null,this.j=!!A}function Wn(g){g.g||(g.g=new Map,g.h=0,g.i&&Lg(g.i,function(A,V){g.add(decodeURIComponent(A.replace(/\+/g," ")),V)}))}t=di.prototype,t.add=function(g,A){Wn(this),this.i=null,g=pa(this,g);var V=this.g.get(g);return V||this.g.set(g,V=[]),V.push(A),this.h+=1,this};function Va(g,A){Wn(g),A=pa(g,A),g.g.has(A)&&(g.i=null,g.h-=g.g.get(A).length,g.g.delete(A))}function Ba(g,A){return Wn(g),A=pa(g,A),g.g.has(A)}t.forEach=function(g,A){Wn(this),this.g.forEach(function(V,J){V.forEach(function(_e){g.call(A,_e,J,this)},this)},this)},t.na=function(){Wn(this);const g=Array.from(this.g.values()),A=Array.from(this.g.keys()),V=[];for(let J=0;J<A.length;J++){const _e=g[J];for(let Pe=0;Pe<_e.length;Pe++)V.push(A[J])}return V},t.V=function(g){Wn(this);let A=[];if(typeof g=="string")Ba(this,g)&&(A=A.concat(this.g.get(pa(this,g))));else{g=Array.from(this.g.values());for(let V=0;V<g.length;V++)A=A.concat(g[V])}return A},t.set=function(g,A){return Wn(this),this.i=null,g=pa(this,g),Ba(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[A]),this.h+=1,this},t.get=function(g,A){return g?(g=this.V(g),0<g.length?String(g[0]):A):A};function Bo(g,A,V){Va(g,A),0<V.length&&(g.i=null,g.g.set(pa(g,A),b(V)),g.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],A=Array.from(this.g.keys());for(var V=0;V<A.length;V++){var J=A[V];const Pe=encodeURIComponent(String(J)),ot=this.V(J);for(J=0;J<ot.length;J++){var _e=Pe;ot[J]!==""&&(_e+="="+encodeURIComponent(String(ot[J]))),g.push(_e)}}return this.i=g.join("&")};function pa(g,A){return A=String(A),g.j&&(A=A.toLowerCase()),A}function hi(g,A){A&&!g.j&&(Wn(g),g.i=null,g.g.forEach(function(V,J){var _e=J.toLowerCase();J!=_e&&(Va(this,J),Bo(this,_e,V))},g)),g.j=A}function Og(g,A){const V=new Mi;if(l.Image){const J=new Image;J.onload=v(Fs,V,"TestLoadImage: loaded",!0,A,J),J.onerror=v(Fs,V,"TestLoadImage: error",!1,A,J),J.onabort=v(Fs,V,"TestLoadImage: abort",!1,A,J),J.ontimeout=v(Fs,V,"TestLoadImage: timeout",!1,A,J),l.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=g}else A(!1)}function G0(g,A){const V=new Mi,J=new AbortController,_e=setTimeout(()=>{J.abort(),Fs(V,"TestPingServer: timeout",!1,A)},1e4);fetch(g,{signal:J.signal}).then(Pe=>{clearTimeout(_e),Pe.ok?Fs(V,"TestPingServer: ok",!0,A):Fs(V,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(_e),Fs(V,"TestPingServer: error",!1,A)})}function Fs(g,A,V,J,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),J(V)}catch{}}function Mg(){this.g=new sn}function K0(g,A,V){const J=V||"";try{Fo(g,function(_e,Pe){let ot=_e;h(_e)&&(ot=wr(_e)),A.push(J+Pe+"="+encodeURIComponent(ot))})}catch(_e){throw A.push(J+"type="+encodeURIComponent("_badmap")),_e}}function Ui(g){this.l=g.Ub||null,this.j=g.eb||!1}w(Ui,$n),Ui.prototype.g=function(){return new Ql(this.l,this.j)},Ui.prototype.i=function(g){return function(){return g}}({});function Ql(g,A){Ee.call(this),this.D=g,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ql,Ee),t=Ql.prototype,t.open=function(g,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=A,this.readyState=1,za(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(A.body=g),(this.D||l).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ua(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,za(this)),this.g&&(this.readyState=3,za(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;X0(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function X0(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var A=g.value?g.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!g.done}))&&(this.response=this.responseText+=A)}g.done?Ua(this):za(this),this.readyState==3&&X0(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Ua(this))},t.Qa=function(g){this.g&&(this.response=g,Ua(this))},t.ga=function(){this.g&&Ua(this)};function Ua(g){g.readyState=4,g.l=null,g.j=null,g.v=null,za(g)}t.setRequestHeader=function(g,A){this.u.append(g,A)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],A=this.h.entries();for(var V=A.next();!V.done;)V=V.value,g.push(V[0]+": "+V[1]),V=A.next();return g.join(`\r
`)};function za(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Ql.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function zi(g){let A="";return I(g,function(V,J){A+=J,A+=":",A+=V,A+=`\r
`}),A}function Uo(g,A,V){e:{for(J in V){var J=!1;break e}J=!0}J||(V=zi(V),typeof g=="string"?V!=null&&encodeURIComponent(String(V)):br(g,A,V))}function Or(g){Ee.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Or,Ee);var Vg=/^https?$/i,uh=["POST","PUT"];t=Or.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,A,V,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);A=A?A.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():le.g(),this.v=this.o?Ds(this.o):Ds(le),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(A,String(g),!0),this.B=!1}catch(Pe){Jl(this,Pe);return}if(g=V||"",V=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var _e in J)V.set(_e,J[_e]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const Pe of J.keys())V.set(Pe,J.get(Pe));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(V.keys()).find(Pe=>Pe.toLowerCase()=="content-type"),_e=l.FormData&&g instanceof l.FormData,!(0<=Array.prototype.indexOf.call(uh,A,void 0))||J||_e||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pe,ot]of V)this.g.setRequestHeader(Pe,ot);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mu(this),this.u=!0,this.g.send(g),this.u=!1}catch(Pe){Jl(this,Pe)}};function Jl(g,A){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=A,g.m=5,fu(g),Js(g)}function fu(g){g.A||(g.A=!0,et(g,"complete"),et(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,et(this,"complete"),et(this,"abort"),Js(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Js(this,!0)),Or.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?dh(this):this.bb())},t.bb=function(){dh(this)};function dh(g){if(g.h&&typeof o<"u"&&(!g.v[1]||Ls(g)!=4||g.Z()!=2)){if(g.u&&Ls(g)==4)Lt(g.Ea,0,g);else if(et(g,"readystatechange"),Ls(g)==4){g.h=!1;try{const ot=g.Z();e:switch(ot){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var V;if(!(V=A)){var J;if(J=ot===0){var _e=String(g.D).match(Xl)[1]||null;!_e&&l.self&&l.self.location&&(_e=l.self.location.protocol.slice(0,-1)),J=!Vg.test(_e?_e.toLowerCase():"")}V=J}if(V)et(g,"complete"),et(g,"success");else{g.m=6;try{var Pe=2<Ls(g)?g.g.statusText:""}catch{Pe=""}g.l=Pe+" ["+g.Z()+"]",fu(g)}}finally{Js(g)}}}}function Js(g,A){if(g.g){mu(g);const V=g.g,J=g.v[0]?()=>{}:null;g.g=null,g.v=null,A||et(g,"ready");try{V.onreadystatechange=J}catch{}}}function mu(g){g.I&&(l.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function Ls(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<Ls(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var A=this.g.responseText;return g&&A.indexOf(g)==0&&(A=A.substring(g.length)),Xr(A)}};function hh(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function pu(g){const A={};g=(g.g&&2<=Ls(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<g.length;J++){if(j(g[J]))continue;var V=z(g[J]);const _e=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const Pe=A[_e]||[];A[_e]=Pe,Pe.push(V)}N(A,function(J){return J.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fi(g,A,V){return V&&V.internalChannelParams&&V.internalChannelParams[g]||A}function fh(g){this.Aa=0,this.i=[],this.j=new Mi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fi("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fi("baseRetryDelayMs",5e3,g),this.cb=fi("retryDelaySeedMs",1e4,g),this.Wa=fi("forwardChannelMaxRetries",2,g),this.wa=fi("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Ys(g&&g.concurrentRequestLimit),this.Da=new Mg,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=fh.prototype,t.la=8,t.G=1,t.connect=function(g,A,V,J){Br(0),this.W=g,this.H=A||{},V&&J!==void 0&&(this.H.OSID=V,this.H.OAID=J),this.F=this.X,this.I=Z0(this,null,this.W),mi(this)};function qn(g){if(xu(g),g.G==3){var A=g.U++,V=Qs(g.I);if(br(V,"SID",g.K),br(V,"RID",A),br(V,"TYPE","terminate"),$i(g,V),A=new De(g,g.j,A),A.L=2,A.v=Mo(Qs(V)),V=!1,l.navigator&&l.navigator.sendBeacon)try{V=l.navigator.sendBeacon(A.v.toString(),"")}catch{}!V&&l.Image&&(new Image().src=A.v,V=!0),V||(A.g=em(A.j,null),A.g.ea(A.v)),A.F=Date.now(),Ye(A)}J0(g)}function $a(g){g.g&&(mh(g),g.g.cancel(),g.g=null)}function xu(g){$a(g),g.u&&(l.clearTimeout(g.u),g.u=null),yu(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&l.clearTimeout(g.s),g.s=null)}function mi(g){if(!an(g.h)&&!g.s){g.s=!0;var A=g.Ga;H||ce(),te||(H(),te=!0),K.add(A,g),g.B=0}}function Bg(g,A){return Do(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=A.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Ss(x(g.Ga,g,A),Q0(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const _e=new De(this,this.j,g);let Pe=this.o;if(this.S&&(Pe?(Pe=T(Pe),B(Pe,this.S)):Pe=this.S),this.m!==null||this.O||(_e.H=Pe,Pe=null),this.P)e:{for(var A=0,V=0;V<this.i.length;V++){t:{var J=this.i[V];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(A+=J,4096<A){A=V;break e}if(A===4096||V===this.i.length-1){A=V+1;break e}}A=1e3}else A=1e3;A=zo(this,_e,A),V=Qs(this.I),br(V,"RID",g),br(V,"CVER",22),this.D&&br(V,"X-HTTP-Session-Id",this.D),$i(this,V),Pe&&(this.O?A="headers="+encodeURIComponent(String(zi(Pe)))+"&"+A:this.m&&Uo(V,this.m,Pe)),lh(this.h,_e),this.Ua&&br(V,"TYPE","init"),this.P?(br(V,"$req",A),br(V,"SID","null"),_e.T=!0,Ge(_e,V,null)):Ge(_e,V,A),this.G=2}}else this.G==3&&(g?gu(this,g):this.i.length==0||an(this.h)||gu(this))};function gu(g,A){var V;A?V=A.l:V=g.U++;const J=Qs(g.I);br(J,"SID",g.K),br(J,"RID",V),br(J,"AID",g.T),$i(g,J),g.m&&g.o&&Uo(J,g.m,g.o),V=new De(g,g.j,V,g.B+1),g.m===null&&(V.H=g.o),A&&(g.i=A.D.concat(g.i)),A=zo(g,V,1e3),V.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),lh(g.h,V),Ge(V,J,A)}function $i(g,A){g.H&&I(g.H,function(V,J){br(A,J,V)}),g.l&&Fo({},function(V,J){br(A,J,V)})}function zo(g,A,V){V=Math.min(g.i.length,V);var J=g.l?x(g.l.Na,g.l,g):null;e:{var _e=g.i;let Pe=-1;for(;;){const ot=["count="+V];Pe==-1?0<V?(Pe=_e[0].g,ot.push("ofs="+Pe)):Pe=0:ot.push("ofs="+Pe);let mr=!0;for(let _n=0;_n<V;_n++){let Zt=_e[_n].g;const In=_e[_n].map;if(Zt-=Pe,0>Zt)Pe=Math.max(0,_e[_n].g-100),mr=!1;else try{K0(In,ot,"req"+Zt+"_")}catch{J&&J(In)}}if(mr){J=ot.join("&");break e}}}return g=g.i.splice(0,V),A.D=g,J}function Zl(g){if(!g.g&&!g.u){g.Y=1;var A=g.Fa;H||ce(),te||(H(),te=!0),K.add(A,g),g.v=0}}function vu(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Ss(x(g.Fa,g),Q0(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,Y0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Ss(x(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Br(10),$a(this),Y0(this))};function mh(g){g.A!=null&&(l.clearTimeout(g.A),g.A=null)}function Y0(g){g.g=new De(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var A=Qs(g.qa);br(A,"RID","rpc"),br(A,"SID",g.K),br(A,"AID",g.T),br(A,"CI",g.F?"0":"1"),!g.F&&g.ja&&br(A,"TO",g.ja),br(A,"TYPE","xmlhttp"),$i(g,A),g.m&&g.o&&Uo(A,g.m,g.o),g.L&&(g.g.I=g.L);var V=g.g;g=g.ia,V.L=1,V.v=Mo(Qs(A)),V.m=null,V.P=!0,st(V,g)}t.Za=function(){this.C!=null&&(this.C=null,$a(this),vu(this),Br(19))};function yu(g){g.C!=null&&(l.clearTimeout(g.C),g.C=null)}function wu(g,A){var V=null;if(g.g==A){yu(g),mh(g),g.g=null;var J=2}else if(kr(g.h,A))V=A.D,U0(g.h,A),J=1;else return;if(g.G!=0){if(A.o)if(J==1){V=A.m?A.m.length:0,A=Date.now()-A.F;var _e=g.B;J=Hn(),et(J,new Ro(J,V)),mi(g)}else Zl(g);else if(_e=A.s,_e==3||_e==0&&0<A.X||!(J==1&&Bg(g,A)||J==2&&vu(g)))switch(V&&0<V.length&&(A=g.h,A.i=A.i.concat(V)),_e){case 1:Hi(g,5);break;case 4:Hi(g,10);break;case 3:Hi(g,6);break;default:Hi(g,2)}}}function Q0(g,A){let V=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(V*=2),V*A}function Hi(g,A){if(g.j.info("Error code "+A),A==2){var V=x(g.fb,g),J=g.Xa;const _e=!J;J=new Bi(J||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Yl(J,"https"),Mo(J),_e?Og(J.toString(),V):G0(J.toString(),V)}else Br(2);g.G=0,g.l&&g.l.sa(A),J0(g),xu(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Br(2)):(this.j.info("Failed to ping google.com"),Br(1))};function J0(g){if(g.G=0,g.ka=[],g.l){const A=z0(g.h);(A.length!=0||g.i.length!=0)&&(_(g.ka,A),_(g.ka,g.i),g.h.i.length=0,b(g.i),g.i.length=0),g.l.ra()}}function Z0(g,A,V){var J=V instanceof Bi?Qs(V):new Bi(V);if(J.g!="")A&&(J.g=A+"."+J.g),Lo(J,J.s);else{var _e=l.location;J=_e.protocol,A=A?A+"."+_e.hostname:_e.hostname,_e=+_e.port;var Pe=new Bi(null);J&&Yl(Pe,J),A&&(Pe.g=A),_e&&Lo(Pe,_e),V&&(Pe.l=V),J=Pe}return V=g.D,A=g.ya,V&&A&&br(J,V,A),br(J,"VER",g.la),$i(g,J),J}function em(g,A,V){if(A&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=g.Ca&&!g.pa?new Or(new Ui({eb:V})):new Or(g.pa),A.Ha(g.J),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ph(){}t=ph.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function bu(){}bu.prototype.g=function(g,A){return new ks(g,A)};function ks(g,A){Ee.call(this),this.g=new fh(A),this.l=g,this.h=A&&A.messageUrlParams||null,g=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(g?g["X-WebChannel-Content-Type"]=A.messageContentType:g={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(g?g["X-WebChannel-Client-Profile"]=A.va:g={"X-WebChannel-Client-Profile":A.va}),this.g.S=g,(g=A&&A.Sb)&&!j(g)&&(this.g.m=g),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!j(A)&&(this.g.D=A,g=this.h,g!==null&&A in g&&(g=this.h,A in g&&delete g[A])),this.j=new pi(this)}w(ks,Ee),ks.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ks.prototype.close=function(){qn(this.g)},ks.prototype.o=function(g){var A=this.g;if(typeof g=="string"){var V={};V.__data__=g,g=V}else this.u&&(V={},V.__data__=wr(g),g=V);A.i.push(new ui(A.Ya++,g)),A.G==3&&mi(A)},ks.prototype.N=function(){this.g.l=null,delete this.j,qn(this.g),delete this.g,ks.aa.N.call(this)};function tm(g){Wt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var A=g.__sm__;if(A){e:{for(const V in A){g=V;break e}g=void 0}(this.i=g)&&(g=this.i,A=A!==null&&g in A?A[g]:void 0),this.data=A}else this.data=g}w(tm,Wt);function rm(){cr.call(this),this.status=1}w(rm,cr);function pi(g){this.g=g}w(pi,ph),pi.prototype.ua=function(){et(this.g,"a")},pi.prototype.ta=function(g){et(this.g,new tm(g))},pi.prototype.sa=function(g){et(this.g,new rm)},pi.prototype.ra=function(){et(this.g,"b")},bu.prototype.createWebChannel=bu.prototype.g,ks.prototype.send=ks.prototype.o,ks.prototype.open=ks.prototype.m,ks.prototype.close=ks.prototype.close,OA=function(){return new bu},LA=function(){return Hn()},FA=Sr,N1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ne.NO_ERROR=0,ne.TIMEOUT=8,ne.HTTP_ERROR=6,Tp=ne,oe.COMPLETE="complete",DA=oe,ma.EventType=pt,pt.OPEN="a",pt.CLOSE="b",pt.ERROR="c",pt.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,qh=ma,Or.prototype.listenOnce=Or.prototype.L,Or.prototype.getLastError=Or.prototype.Ka,Or.prototype.getLastErrorCode=Or.prototype.Ba,Or.prototype.getStatus=Or.prototype.Z,Or.prototype.getResponseJson=Or.prototype.Oa,Or.prototype.getResponseText=Or.prototype.oa,Or.prototype.send=Or.prototype.ea,Or.prototype.setWithCredentials=Or.prototype.Ha,PA=Or}).apply(typeof Jm<"u"?Jm:typeof self<"u"?self:typeof window<"u"?window:{});const _S="@firebase/firestore",NS="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ds=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ds.UNAUTHENTICATED=new ds(null),ds.GOOGLE_CREDENTIALS=new ds("google-credentials-uid"),ds.FIRST_PARTY=new ds("first-party-uid"),ds.MOCK_USER=new ds("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wd="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new Cw("@firebase/firestore");function Ku(){return Lc.logLevel}function ft(t,...e){if(Lc.logLevel<=Kt.DEBUG){const r=e.map(zw);Lc.debug(`Firestore (${Wd}): ${t}`,...r)}}function vo(t,...e){if(Lc.logLevel<=Kt.ERROR){const r=e.map(zw);Lc.error(`Firestore (${Wd}): ${t}`,...r)}}function Oc(t,...e){if(Lc.logLevel<=Kt.WARN){const r=e.map(zw);Lc.warn(`Firestore (${Wd}): ${t}`,...r)}}function zw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,MA(t,n,r)}function MA(t,e,r){let n=`FIRESTORE (${Wd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw vo(n),new Error(n)}function dr(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||MA(e,s,n)}function Vt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends ko{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(ds.UNAUTHENTICATED))}shutdown(){}}class a9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class i9{constructor(e){this.t=e,this.currentUser=ds.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){dr(this.o===void 0,42304);let n=this.i;const s=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let i=new io;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new io,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new io)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(dr(typeof n.accessToken=="string",31837,{l:n}),new VA(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dr(e===null||typeof e=="string",2055,{h:e}),new ds(e)}}class o9{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=ds.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class l9{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new o9(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(ds.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ES{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c9{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ia(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){dr(this.o===void 0,3512);const n=i=>{i.error!=null&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ft("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ES(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(dr(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new ES(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=u9(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%62))}return n}}function $t(t,e){return t<e?-1:t>e?1:0}function E1(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=t.codePointAt(r),s=e.codePointAt(r);if(n!==s){if(n<128&&s<128)return $t(n,s);{const i=UA(),o=d9(i.encode(SS(t,r)),i.encode(SS(e,r)));return o!==0?o:$t(n,s)}}r+=n>65535?2:1}return $t(t.length,e.length)}function SS(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function d9(t,e){for(let r=0;r<t.length&&r<e.length;++r)if(t[r]!==e[r])return $t(t[r],e[r]);return $t(t.length,e.length)}function vd(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=-62135596800,TS=1e6;class tn{static now(){return tn.fromMillis(Date.now())}static fromDate(e){return tn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*TS);return new tn(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ct(Ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ct(Ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<kS)throw new ct(Ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ct(Ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/TS}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-kS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new tn(0,0))}static max(){return new Ot(new tn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="__name__";class Si{constructor(e,r,n){r===void 0?r=0:r>e.length&&Ct(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Ct(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Si.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Si?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=Si.compareSegments(e.get(s),r.get(s));if(i!==0)return i}return $t(e.length,r.length)}static compareSegments(e,r){const n=Si.isNumericId(e),s=Si.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?Si.extractNumericId(e).compare(Si.extractNumericId(r)):E1(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bl.fromString(e.substring(4,e.length-2))}}class Er extends Si{construct(e,r,n){return new Er(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ct(Ve.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new Er(r)}static emptyPath(){return new Er([])}}const h9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class On extends Si{construct(e,r,n){return new On(e,r,n)}static isValidIdentifier(e){return h9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),On.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jS}static keyField(){return new On([jS])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new ct(Ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ct(Ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ct(Ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(n+=l,s++):(i(),s++)}if(i(),o)throw new ct(Ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new On(r)}static emptyPath(){return new On([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.path=e}static fromPath(e){return new _t(Er.fromString(e))}static fromName(e){return new _t(Er.fromString(e).popFirst(5))}static empty(){return new _t(Er.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Er.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Er.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _t(new Er(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=-1;function f9(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Ot.fromTimestamp(n===1e9?new tn(r+1,0):new tn(r,n));return new Nl(s,_t.empty(),e)}function m9(t){return new Nl(t.readTime,t.key,Tf)}class Nl{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Nl(Ot.min(),_t.empty(),Tf)}static max(){return new Nl(Ot.max(),_t.empty(),Tf)}}function p9(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=_t.comparator(t.documentKey,e.documentKey),r!==0?r:$t(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qd(t){if(t.code!==Ve.FAILED_PRECONDITION||t.message!==x9)throw t;ft("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ue((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ue?r:Ue.resolve(r)}catch(r){return Ue.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ue.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ue.reject(r)}static resolve(e){return new Ue((r,n)=>{r(e)})}static reject(e){return new Ue((r,n)=>{n(e)})}static waitFor(e){return new Ue((r,n)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&r()},u=>n(u))}),o=!0,i===s&&r()})}static or(e){let r=Ue.resolve(!1);for(const n of e)r=r.next(s=>s?Ue.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Ue((n,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;r(e[h]).next(f=>{o[h]=f,++l,l===i&&n(o)},f=>s(f))}})}static doWhile(e,r){return new Ue((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function v9(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Gd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ue(n),this.ce=n=>r.writeSequenceNumber(n))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Ox.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=-1;function Mx(t){return t==null}function Wp(t){return t===0&&1/t==-1/0}function y9(t){return typeof t=="number"&&Number.isInteger(t)&&!Wp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="";function w9(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=AS(e)),e=b9(t.get(r),e);return AS(e)}function b9(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case zA:r+="";break;default:r+=i}}return r}function AS(t){return t+zA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Bl(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function $A(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,r){this.comparator=e,this.root=r||Qn.EMPTY}insert(e,r){return new Kr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Qn.BLACK,null,null))}remove(e){return new Kr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zm(this.root,e,this.comparator,!0)}}class Zm{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qn{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??Qn.RED,this.left=s??Qn.EMPTY,this.right=i??Qn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new Qn(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Qn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ct(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ct(27949);return e+(this.isRed()?0:1)}}Qn.EMPTY=null,Qn.RED=!0,Qn.BLACK=!1;Qn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct(57766)}get value(){throw Ct(16141)}get color(){throw Ct(16727)}get left(){throw Ct(29726)}get right(){throw Ct(36894)}copy(e,r,n,s,i){return this}insert(e,r,n){return new Qn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.comparator=e,this.data=new Kr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new IS(this.data.getIterator())}getIteratorFrom(e){return new IS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Tn(this.comparator);return r.data=e,r}}class IS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this.fields=e,e.sort(On.comparator)}static empty(){return new la([])}unionWith(e){let r=new Tn(On.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new la(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return vd(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new HA("Invalid base64 string: "+i):i}}(e);return new zn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new zn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zn.EMPTY_BYTE_STRING=new zn("");const _9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function El(t){if(dr(!!t,39018),typeof t=="string"){let e=0;const r=_9.exec(t);if(dr(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:un(t.seconds),nanos:un(t.nanos)}}function un(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sl(t){return typeof t=="string"?zn.fromBase64String(t):zn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="server_timestamp",qA="__type__",GA="__previous_value__",KA="__local_write_time__";function Vx(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[qA])===null||r===void 0?void 0:r.stringValue)===WA}function Bx(t){const e=t.mapValue.fields[GA];return Vx(e)?Bx(e):e}function jf(t){const e=El(t.mapValue.fields[KA].timestampValue);return new tn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e,r,n,s,i,o,l,u,h,f){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=f}}const qp="(default)";class yd{constructor(e,r){this.projectId=e,this.database=r||qp}static empty(){return new yd("","")}get isDefaultDatabase(){return this.database===qp}isEqual(e){return e instanceof yd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="__type__",E9="__max__",ep={mapValue:{}},YA="__vector__",Gp="value";function kl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vx(t)?4:k9(t)?9007199254740991:S9(t)?10:11:Ct(28295,{value:t})}function Pi(t,e){if(t===e)return!0;const r=kl(t);if(r!==kl(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jf(t).isEqual(jf(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=El(s.timestampValue),l=El(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Sl(s.bytesValue).isEqual(Sl(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return un(s.geoPointValue.latitude)===un(i.geoPointValue.latitude)&&un(s.geoPointValue.longitude)===un(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return un(s.integerValue)===un(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=un(s.doubleValue),l=un(i.doubleValue);return o===l?Wp(o)===Wp(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return vd(t.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(CS(o)!==CS(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Pi(o[u],l[u])))return!1;return!0}(t,e);default:return Ct(52216,{left:t})}}function Af(t,e){return(t.values||[]).find(r=>Pi(r,e))!==void 0}function wd(t,e){if(t===e)return 0;const r=kl(t),n=kl(e);if(r!==n)return $t(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return $t(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=un(i.integerValue||i.doubleValue),u=un(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return RS(t.timestampValue,e.timestampValue);case 4:return RS(jf(t),jf(e));case 5:return E1(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Sl(i),u=Sl(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=$t(l[h],u[h]);if(f!==0)return f}return $t(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=$t(un(i.latitude),un(o.latitude));return l!==0?l:$t(un(i.longitude),un(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return PS(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,h,f;const p=i.fields||{},x=o.fields||{},v=(l=p[Gp])===null||l===void 0?void 0:l.arrayValue,w=(u=x[Gp])===null||u===void 0?void 0:u.arrayValue,b=$t(((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0,((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:PS(v,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ep.mapValue&&o===ep.mapValue)return 0;if(i===ep.mapValue)return 1;if(o===ep.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const x=E1(u[p],f[p]);if(x!==0)return x;const v=wd(l[u[p]],h[f[p]]);if(v!==0)return v}return $t(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Ct(23264,{Pe:r})}}function RS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $t(t,e);const r=El(t),n=El(e),s=$t(r.seconds,n.seconds);return s!==0?s:$t(r.nanos,n.nanos)}function PS(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=wd(r[s],n[s]);if(i)return i}return $t(r.length,n.length)}function bd(t){return S1(t)}function S1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=El(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Sl(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return _t.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=S1(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const o of n)i?i=!1:s+=",",s+=`${o}:${S1(r.fields[o])}`;return s+"}"}(t.mapValue):Ct(61005,{value:t})}function jp(t){switch(kl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bx(t);return e?16+jp(e):16;case 5:return 2*t.stringValue.length;case 6:return Sl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+jp(i),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return Bl(n.fields,(i,o)=>{s+=i.length+jp(o)}),s}(t.mapValue);default:throw Ct(13486,{value:t})}}function Kp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function k1(t){return!!t&&"integerValue"in t}function Ww(t){return!!t&&"arrayValue"in t}function DS(t){return!!t&&"nullValue"in t}function FS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ap(t){return!!t&&"mapValue"in t}function S9(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[XA])===null||r===void 0?void 0:r.stringValue)===YA}function sf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bl(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=sf(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=sf(t.arrayValue.values[r]);return e}return Object.assign({},t)}function k9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===E9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.value=e}static empty(){return new qs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Ap(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=sf(r)}setAll(e){let r=On.emptyPath(),n={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,n,s),n={},s=[],r=l.popLast()}o?n[l.lastSegment()]=sf(o):s.push(l.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());Ap(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Ap(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Bl(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new qs(sf(this.value))}}function QA(t){const e=[];return Bl(t.fields,(r,n)=>{const s=new On([r]);if(Ap(n)){const i=QA(n.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new la(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,r,n,s,i,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ms(e,0,Ot.min(),Ot.min(),Ot.min(),qs.empty(),0)}static newFoundDocument(e,r,n,s){return new ms(e,1,r,Ot.min(),n,s,0)}static newNoDocument(e,r){return new ms(e,2,r,Ot.min(),Ot.min(),qs.empty(),0)}static newUnknownDocument(e,r){return new ms(e,3,r,Ot.min(),Ot.min(),qs.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ms&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ms(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,r){this.position=e,this.inclusive=r}}function LS(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?n=_t.comparator(_t.fromName(o.referenceValue),r.key):n=wd(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function OS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Pi(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,r="asc"){this.field=e,this.dir=r}}function T9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{}class wn extends JA{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new A9(e,r,n):r==="array-contains"?new R9(e,n):r==="in"?new P9(e,n):r==="not-in"?new D9(e,n):r==="array-contains-any"?new F9(e,n):new wn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new C9(e,n):new I9(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(wd(r,this.value)):r!==null&&kl(this.value)===kl(r)&&this.matchesComparison(wd(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ii extends JA{constructor(e,r){super(),this.filters=e,this.op=r,this.Te=null}static create(e,r){return new ii(e,r)}matches(e){return ZA(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ZA(t){return t.op==="and"}function eC(t){return j9(t)&&ZA(t)}function j9(t){for(const e of t.filters)if(e instanceof ii)return!1;return!0}function T1(t){if(t instanceof wn)return t.field.canonicalString()+t.op.toString()+bd(t.value);if(eC(t))return t.filters.map(e=>T1(e)).join(",");{const e=t.filters.map(r=>T1(r)).join(",");return`${t.op}(${e})`}}function tC(t,e){return t instanceof wn?function(n,s){return s instanceof wn&&n.op===s.op&&n.field.isEqual(s.field)&&Pi(n.value,s.value)}(t,e):t instanceof ii?function(n,s){return s instanceof ii&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,o,l)=>i&&tC(o,s.filters[l]),!0):!1}(t,e):void Ct(19439)}function rC(t){return t instanceof wn?function(r){return`${r.field.canonicalString()} ${r.op} ${bd(r.value)}`}(t):t instanceof ii?function(r){return r.op.toString()+" {"+r.getFilters().map(rC).join(" ,")+"}"}(t):"Filter"}class A9 extends wn{constructor(e,r,n){super(e,r,n),this.key=_t.fromName(n.referenceValue)}matches(e){const r=_t.comparator(e.key,this.key);return this.matchesComparison(r)}}class C9 extends wn{constructor(e,r){super(e,"in",r),this.keys=nC("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class I9 extends wn{constructor(e,r){super(e,"not-in",r),this.keys=nC("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function nC(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>_t.fromName(n.referenceValue))}class R9 extends wn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Ww(r)&&Af(r.arrayValue,this.value)}}class P9 extends wn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Af(this.value.arrayValue,r)}}class D9 extends wn{constructor(e,r){super(e,"not-in",r)}matches(e){if(Af(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Af(this.value.arrayValue,r)}}class F9 extends wn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Ww(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Af(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e,r=null,n=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function MS(t,e=null,r=[],n=[],s=null,i=null,o=null){return new L9(t,e,r,n,s,i,o)}function qw(t){const e=Vt(t);if(e.Ie===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>T1(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Mx(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>bd(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>bd(n)).join(",")),e.Ie=r}return e.Ie}function Gw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!T9(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!tC(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!OS(t.startAt,e.startAt)&&OS(t.endAt,e.endAt)}function j1(t){return _t.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,r=null,n=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function O9(t,e,r,n,s,i,o,l){return new Jc(t,e,r,n,s,i,o,l)}function Ux(t){return new Jc(t)}function VS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Kw(t){return t.collectionGroup!==null}function ud(t){const e=Vt(t);if(e.Ee===null){e.Ee=[];const r=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Tn(On.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new Cf(i,n))}),r.has(On.keyField().canonicalString())||e.Ee.push(new Cf(On.keyField(),n))}return e.Ee}function Ai(t){const e=Vt(t);return e.de||(e.de=M9(e,ud(t))),e.de}function M9(t,e){if(t.limitType==="F")return MS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Cf(s.field,i)});const r=t.endAt?new _d(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new _d(t.startAt.position,t.startAt.inclusive):null;return MS(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function A1(t,e){const r=t.filters.concat([e]);return new Jc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Xp(t,e,r){return new Jc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function zx(t,e){return Gw(Ai(t),Ai(e))&&t.limitType===e.limitType}function sC(t){return`${qw(Ai(t))}|lt:${t.limitType}`}function Xu(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>rC(s)).join(", ")}]`),Mx(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>bd(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>bd(s)).join(",")),`Target(${n})`}(Ai(t))}; limitType=${t.limitType})`}function $x(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):_t.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of ud(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(o,l,u){const h=LS(o,l,u);return o.inclusive?h<=0:h<0}(n.startAt,ud(n),s)||n.endAt&&!function(o,l,u){const h=LS(o,l,u);return o.inclusive?h>=0:h>0}(n.endAt,ud(n),s))}(t,e)}function V9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aC(t){return(e,r)=>{let n=!1;for(const s of ud(t)){const i=B9(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function B9(t,e,r){const n=t.field.isKeyField()?_t.comparator(e.key,r.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?wd(u,h):Ct(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Ct(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Bl(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return $A(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9=new Kr(_t.comparator);function yo(){return U9}const iC=new Kr(_t.comparator);function Gh(...t){let e=iC;for(const r of t)e=e.insert(r.key,r);return e}function oC(t){let e=iC;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function wc(){return af()}function lC(){return af()}function af(){return new Zc(t=>t.toString(),(t,e)=>t.isEqual(e))}const z9=new Kr(_t.comparator),$9=new Tn(_t.comparator);function Xt(...t){let e=$9;for(const r of t)e=e.add(r);return e}const H9=new Tn($t);function W9(){return H9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wp(e)?"-0":e}}function cC(t){return{integerValue:""+t}}function q9(t,e){return y9(e)?cC(e):Xw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this._=void 0}}function G9(t,e,r){return t instanceof If?function(s,i){const o={fields:{[qA]:{stringValue:WA},[KA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Vx(i)&&(i=Bx(i)),i&&(o.fields[GA]=i),{mapValue:o}}(r,e):t instanceof Nd?dC(t,e):t instanceof Ed?hC(t,e):function(s,i){const o=uC(s,i),l=BS(o)+BS(s.Re);return k1(o)&&k1(s.Re)?cC(l):Xw(s.serializer,l)}(t,e)}function K9(t,e,r){return t instanceof Nd?dC(t,e):t instanceof Ed?hC(t,e):r}function uC(t,e){return t instanceof Yp?function(n){return k1(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class If extends Hx{}class Nd extends Hx{constructor(e){super(),this.elements=e}}function dC(t,e){const r=fC(e);for(const n of t.elements)r.some(s=>Pi(s,n))||r.push(n);return{arrayValue:{values:r}}}class Ed extends Hx{constructor(e){super(),this.elements=e}}function hC(t,e){let r=fC(e);for(const n of t.elements)r=r.filter(s=>!Pi(s,n));return{arrayValue:{values:r}}}class Yp extends Hx{constructor(e,r){super(),this.serializer=e,this.Re=r}}function BS(t){return un(t.integerValue||t.doubleValue)}function fC(t){return Ww(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,r){this.field=e,this.transform=r}}function X9(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Nd&&s instanceof Nd||n instanceof Ed&&s instanceof Ed?vd(n.elements,s.elements,Pi):n instanceof Yp&&s instanceof Yp?Pi(n.Re,s.Re):n instanceof If&&s instanceof If}(t.transform,e.transform)}class Y9{constructor(e,r){this.version=e,this.transformResults=r}}class Is{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Is}static exists(e){return new Is(void 0,e)}static updateTime(e){return new Is(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wx{}function mC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qx(t.key,Is.none()):new u0(t.key,t.data,Is.none());{const r=t.data,n=qs.empty();let s=new Tn(On.comparator);for(let i of e.fields)if(!s.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),s=s.add(i)}return new Ul(t.key,n,new la(s.toArray()),Is.none())}}function Q9(t,e,r){t instanceof u0?function(s,i,o){const l=s.value.clone(),u=zS(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Ul?function(s,i,o){if(!Cp(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=zS(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(pC(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,r):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function of(t,e,r,n){return t instanceof u0?function(i,o,l,u){if(!Cp(i.precondition,o))return l;const h=i.value.clone(),f=$S(i.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,r,n):t instanceof Ul?function(i,o,l,u){if(!Cp(i.precondition,o))return l;const h=$S(i.fieldTransforms,u,o),f=o.data;return f.setAll(pC(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,r,n):function(i,o,l){return Cp(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function J9(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=uC(n.transform,s||null);i!=null&&(r===null&&(r=qs.empty()),r.set(n.field,i))}return r||null}function US(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&vd(n,s,(i,o)=>X9(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class u0 extends Wx{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ul extends Wx{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function pC(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function zS(t,e,r){const n=new Map;dr(t.length===r.length,32656,{Ve:r.length,me:t.length});for(let s=0;s<r.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);n.set(i.field,K9(o,l,r[s]))}return n}function $S(t,e,r){const n=new Map;for(const s of t){const i=s.transform,o=r.data.field(s.field);n.set(s.field,G9(i,o,e))}return n}class qx extends Wx{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z9 extends Wx{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Q9(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=of(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=of(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=lC();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=r.has(s.key)?null:l;const u=mC(o,l);u!==null&&n.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Ot.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Xt())}isEqual(e){return this.batchId===e.batchId&&vd(this.mutations,e.mutations,(r,n)=>US(r,n))&&vd(this.baseMutations,e.baseMutations,(r,n)=>US(r,n))}}class Qw{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){dr(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let s=function(){return z9}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,n[o].version);return new Qw(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn,er;function n7(t){switch(t){case Ve.OK:return Ct(64938);case Ve.CANCELLED:case Ve.UNKNOWN:case Ve.DEADLINE_EXCEEDED:case Ve.RESOURCE_EXHAUSTED:case Ve.INTERNAL:case Ve.UNAVAILABLE:case Ve.UNAUTHENTICATED:return!1;case Ve.INVALID_ARGUMENT:case Ve.NOT_FOUND:case Ve.ALREADY_EXISTS:case Ve.PERMISSION_DENIED:case Ve.FAILED_PRECONDITION:case Ve.ABORTED:case Ve.OUT_OF_RANGE:case Ve.UNIMPLEMENTED:case Ve.DATA_LOSS:return!0;default:return Ct(15467,{code:t})}}function xC(t){if(t===void 0)return vo("GRPC error has no .code"),Ve.UNKNOWN;switch(t){case gn.OK:return Ve.OK;case gn.CANCELLED:return Ve.CANCELLED;case gn.UNKNOWN:return Ve.UNKNOWN;case gn.DEADLINE_EXCEEDED:return Ve.DEADLINE_EXCEEDED;case gn.RESOURCE_EXHAUSTED:return Ve.RESOURCE_EXHAUSTED;case gn.INTERNAL:return Ve.INTERNAL;case gn.UNAVAILABLE:return Ve.UNAVAILABLE;case gn.UNAUTHENTICATED:return Ve.UNAUTHENTICATED;case gn.INVALID_ARGUMENT:return Ve.INVALID_ARGUMENT;case gn.NOT_FOUND:return Ve.NOT_FOUND;case gn.ALREADY_EXISTS:return Ve.ALREADY_EXISTS;case gn.PERMISSION_DENIED:return Ve.PERMISSION_DENIED;case gn.FAILED_PRECONDITION:return Ve.FAILED_PRECONDITION;case gn.ABORTED:return Ve.ABORTED;case gn.OUT_OF_RANGE:return Ve.OUT_OF_RANGE;case gn.UNIMPLEMENTED:return Ve.UNIMPLEMENTED;case gn.DATA_LOSS:return Ve.DATA_LOSS;default:return Ct(39323,{code:t})}}(er=gn||(gn={}))[er.OK=0]="OK",er[er.CANCELLED=1]="CANCELLED",er[er.UNKNOWN=2]="UNKNOWN",er[er.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",er[er.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",er[er.NOT_FOUND=5]="NOT_FOUND",er[er.ALREADY_EXISTS=6]="ALREADY_EXISTS",er[er.PERMISSION_DENIED=7]="PERMISSION_DENIED",er[er.UNAUTHENTICATED=16]="UNAUTHENTICATED",er[er.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",er[er.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",er[er.ABORTED=10]="ABORTED",er[er.OUT_OF_RANGE=11]="OUT_OF_RANGE",er[er.UNIMPLEMENTED=12]="UNIMPLEMENTED",er[er.INTERNAL=13]="INTERNAL",er[er.UNAVAILABLE=14]="UNAVAILABLE",er[er.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7=new bl([4294967295,4294967295],0);function HS(t){const e=UA().encode(t),r=new RA;return r.update(e),new Uint8Array(r.digest())}function WS(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new bl([r,n],0),new bl([s,i],0)]}class Jw{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Kh(`Invalid padding: ${r}`);if(n<0)throw new Kh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Kh(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Kh(`Invalid padding when bitmap length is 0: ${r}`);this.pe=8*e.length-r,this.ye=bl.fromNumber(this.pe)}we(e,r,n){let s=e.add(r.multiply(bl.fromNumber(n)));return s.compare(s7)===1&&(s=new bl([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const r=HS(e),[n,s]=WS(r);for(let i=0;i<this.hashCount;i++){const o=this.we(n,s,i);if(!this.be(o))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Jw(i,s,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const r=HS(e),[n,s]=WS(r);for(let i=0;i<this.hashCount;i++){const o=this.we(n,s,i);this.Se(o)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Kh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,d0.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Gx(Ot.min(),s,new Kr($t),yo(),Xt())}}class d0{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new d0(n,r,Xt(),Xt(),Xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,r,n,s){this.De=e,this.removedTargetIds=r,this.key=n,this.ve=s}}class gC{constructor(e,r){this.targetId=e,this.Ce=r}}class vC{constructor(e,r,n=zn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class qS{constructor(){this.Fe=0,this.Me=GS(),this.xe=zn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Xt(),r=Xt(),n=Xt();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Ct(38017,{changeType:i})}}),new d0(this.xe,this.Oe,e,r,n)}Qe(){this.Ne=!1,this.Me=GS()}$e(e,r){this.Ne=!0,this.Me=this.Me.insert(e,r)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,dr(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class a7{constructor(e){this.ze=e,this.je=new Map,this.He=yo(),this.Je=tp(),this.Ye=tp(),this.Ze=new Kr($t)}Xe(e){for(const r of e.De)e.ve&&e.ve.isFoundDocument()?this.et(r,e.ve):this.tt(r,e.key,e.ve);for(const r of e.removedTargetIds)this.tt(r,e.key,e.ve)}nt(e){this.forEachTarget(e,r=>{const n=this.rt(r);switch(e.state){case 0:this.it(r)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(r);break;case 3:this.it(r)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(r)&&(this.st(r),n.ke(e.resumeToken));break;default:Ct(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.je.forEach((n,s)=>{this.it(s)&&r(s)})}ot(e){const r=e.targetId,n=e.Ce.count,s=this._t(r);if(s){const i=s.target;if(j1(i))if(n===0){const o=new _t(i.path);this.tt(r,o,ms.newNoDocument(o,Ot.min()))}else dr(n===1,20013,{expectedCount:n});else{const o=this.ut(r);if(o!==n){const l=this.ct(e),u=l?this.lt(l,e,o):1;if(u!==0){this.st(r);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(r,h)}}}}}ct(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let o,l;try{o=Sl(n).toUint8Array()}catch(u){if(u instanceof HA)return Oc("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Jw(o,s,i)}catch(u){return Oc(u instanceof Kh?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(e,r,n){return r.Ce.count===n-this.Tt(e,r.targetId)?0:2}Tt(e,r){const n=this.ze.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(r,i,null),s++)}),s}It(e){const r=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&j1(l.target)){const u=new _t(l.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,ms.newNoDocument(u,e))}i.Le&&(r.set(o,i.qe()),i.Qe())}});let n=Xt();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this._t(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new Gx(e,r,this.Ze,this.He,n);return this.He=yo(),this.Je=tp(),this.Ye=tp(),this.Ze=new Kr($t),s}et(e,r){if(!this.it(e))return;const n=this.dt(e,r.key)?2:0;this.rt(e).$e(r.key,n),this.He=this.He.insert(r.key,r),this.Je=this.Je.insert(r.key,this.Et(r.key).add(e)),this.Ye=this.Ye.insert(r.key,this.At(r.key).add(e))}tt(e,r,n){if(!this.it(e))return;const s=this.rt(e);this.dt(e,r)?s.$e(r,1):s.Ue(r),this.Ye=this.Ye.insert(r,this.At(r).delete(e)),this.Ye=this.Ye.insert(r,this.At(r).add(e)),n&&(this.He=this.He.insert(r,n))}removeTarget(e){this.je.delete(e)}ut(e){const r=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let r=this.je.get(e);return r||(r=new qS,this.je.set(e,r)),r}At(e){let r=this.Ye.get(e);return r||(r=new Tn($t),this.Ye=this.Ye.insert(e,r)),r}Et(e){let r=this.Je.get(e);return r||(r=new Tn($t),this.Je=this.Je.insert(e,r)),r}it(e){const r=this._t(e)!==null;return r||ft("WatchChangeAggregator","Detected inactive target",e),r}_t(e){const r=this.je.get(e);return r&&r.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new qS),this.ze.getRemoteKeysForTarget(e).forEach(r=>{this.tt(e,r,null)})}dt(e,r){return this.ze.getRemoteKeysForTarget(e).has(r)}}function tp(){return new Kr(_t.comparator)}function GS(){return new Kr(_t.comparator)}const i7={asc:"ASCENDING",desc:"DESCENDING"},o7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l7={and:"AND",or:"OR"};class c7{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function C1(t,e){return t.useProto3Json||Mx(e)?e:{value:e}}function Qp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function u7(t,e){return Qp(t,e.toTimestamp())}function Ci(t){return dr(!!t,49232),Ot.fromTimestamp(function(r){const n=El(r);return new tn(n.seconds,n.nanos)}(t))}function Zw(t,e){return I1(t,e).canonicalString()}function I1(t,e){const r=function(s){return new Er(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function wC(t){const e=Er.fromString(t);return dr(SC(e),10190,{key:e.toString()}),e}function R1(t,e){return Zw(t.databaseId,e.path)}function wy(t,e){const r=wC(e);if(r.get(1)!==t.databaseId.projectId)throw new ct(Ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ct(Ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new _t(_C(r))}function bC(t,e){return Zw(t.databaseId,e)}function d7(t){const e=wC(t);return e.length===4?Er.emptyPath():_C(e)}function P1(t){return new Er(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _C(t){return dr(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function KS(t,e,r){return{name:R1(t,e),fields:r.value.mapValue.fields}}function h7(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ct(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(dr(f===void 0||typeof f=="string",58123),zn.fromBase64String(f||"")):(dr(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),zn.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?Ve.UNKNOWN:xC(h.code);return new ct(f,h.message||"")}(o);r=new vC(n,s,i,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=wy(t,n.document.name),i=Ci(n.document.updateTime),o=n.document.createTime?Ci(n.document.createTime):Ot.min(),l=new qs({mapValue:{fields:n.document.fields}}),u=ms.newFoundDocument(s,i,o,l),h=n.targetIds||[],f=n.removedTargetIds||[];r=new Ip(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=wy(t,n.document),i=n.readTime?Ci(n.readTime):Ot.min(),o=ms.newNoDocument(s,i),l=n.removedTargetIds||[];r=new Ip([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=wy(t,n.document),i=n.removedTargetIds||[];r=new Ip([],i,s,null)}else{if(!("filter"in e))return Ct(11601,{Vt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,o=new r7(s,i),l=n.targetId;r=new gC(l,o)}}return r}function f7(t,e){let r;if(e instanceof u0)r={update:KS(t,e.key,e.value)};else if(e instanceof qx)r={delete:R1(t,e.key)};else if(e instanceof Ul)r={update:KS(t,e.key,e.data),updateMask:_7(e.fieldMask)};else{if(!(e instanceof Z9))return Ct(16599,{ft:e.type});r={verify:R1(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,o){const l=o.transform;if(l instanceof If)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Nd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ed)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Yp)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw Ct(20930,{transform:o.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:u7(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ct(27497)}(t,e.precondition)),r}function m7(t,e){return t&&t.length>0?(dr(e!==void 0,14353),t.map(r=>function(s,i){let o=s.updateTime?Ci(s.updateTime):Ci(i);return o.isEqual(Ot.min())&&(o=Ci(i)),new Y9(o,s.transformResults||[])}(r,e))):[]}function p7(t,e){return{documents:[bC(t,e.path)]}}function x7(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=bC(t,s);const i=function(h){if(h.length!==0)return EC(ii.create(h,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(f=>function(x){return{field:Yu(x.field),direction:y7(x.dir)}}(f))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=C1(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:r,parent:s}}function g7(t){let e=d7(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){dr(n===1,65062);const f=r.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];r.where&&(i=function(p){const x=NC(p);return x instanceof ii&&eC(x)?x.getFilters():[x]}(r.where));let o=[];r.orderBy&&(o=function(p){return p.map(x=>function(w){return new Cf(Qu(w.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(x))}(r.orderBy));let l=null;r.limit&&(l=function(p){let x;return x=typeof p=="object"?p.value:p,Mx(x)?null:x}(r.limit));let u=null;r.startAt&&(u=function(p){const x=!!p.before,v=p.values||[];return new _d(v,x)}(r.startAt));let h=null;return r.endAt&&(h=function(p){const x=!p.before,v=p.values||[];return new _d(v,x)}(r.endAt)),O9(e,s,o,i,l,"F",u,h)}function v7(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function NC(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Qu(r.unaryFilter.field);return wn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Qu(r.unaryFilter.field);return wn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Qu(r.unaryFilter.field);return wn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qu(r.unaryFilter.field);return wn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ct(61313);default:return Ct(60726)}}(t):t.fieldFilter!==void 0?function(r){return wn.create(Qu(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ct(58110);default:return Ct(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return ii.create(r.compositeFilter.filters.map(n=>NC(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ct(1026)}}(r.compositeFilter.op))}(t):Ct(30097,{filter:t})}function y7(t){return i7[t]}function w7(t){return o7[t]}function b7(t){return l7[t]}function Yu(t){return{fieldPath:t.canonicalString()}}function Qu(t){return On.fromServerFormat(t.fieldPath)}function EC(t){return t instanceof wn?function(r){if(r.op==="=="){if(FS(r.value))return{unaryFilter:{field:Yu(r.field),op:"IS_NAN"}};if(DS(r.value))return{unaryFilter:{field:Yu(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(FS(r.value))return{unaryFilter:{field:Yu(r.field),op:"IS_NOT_NAN"}};if(DS(r.value))return{unaryFilter:{field:Yu(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yu(r.field),op:w7(r.op),value:r.value}}}(t):t instanceof ii?function(r){const n=r.getFilters().map(s=>EC(s));return n.length===1?n[0]:{compositeFilter:{op:b7(r.op),filters:n}}}(t):Ct(54877,{filter:t})}function _7(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function SC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,r,n,s,i=Ot.min(),o=Ot.min(),l=zn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ml(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ml(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ml(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ml(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e){this.wt=e}}function E7(t){const e=g7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(){this.Cn=new k7}addToCollectionParentIndex(e,r){return this.Cn.add(r),Ue.resolve()}getCollectionParents(e,r){return Ue.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return Ue.resolve()}deleteFieldIndex(e,r){return Ue.resolve()}deleteAllFieldIndexes(e){return Ue.resolve()}createTargetIndexes(e,r){return Ue.resolve()}getDocumentsMatchingTarget(e,r){return Ue.resolve(null)}getIndexType(e,r){return Ue.resolve(0)}getFieldIndexes(e,r){return Ue.resolve([])}getNextCollectionGroupToUpdate(e){return Ue.resolve(null)}getMinOffset(e,r){return Ue.resolve(Nl.min())}getMinOffsetFromCollectionGroup(e,r){return Ue.resolve(Nl.min())}updateCollectionGroup(e,r,n){return Ue.resolve()}updateIndexEntries(e,r){return Ue.resolve()}}class k7{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Tn(Er.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Tn(Er.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kC=41943040;class Hs{static withCacheSize(e){return new Hs(e,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs.DEFAULT_COLLECTION_PERCENTILE=10,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hs.DEFAULT=new Hs(kC,Hs.DEFAULT_COLLECTION_PERCENTILE,Hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hs.DISABLED=new Hs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Sd(0)}static lr(){return new Sd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="LruGarbageCollector",T7=1048576;function QS([t,e],[r,n]){const s=$t(t,r);return s===0?$t(e,n):s}class j7{constructor(e){this.Er=e,this.buffer=new Tn(QS),this.dr=0}Ar(){return++this.dr}Rr(e){const r=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();QS(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class A7{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ft(YS,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Gd(r)?ft(YS,"Ignoring IndexedDB error during garbage collection: ",r):await qd(r)}await this.mr(3e5)})}}class C7{constructor(e,r){this.gr=e,this.params=r}calculateTargetCount(e,r){return this.gr.pr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Ue.resolve(Ox.le);const n=new j7(r);return this.gr.forEachTarget(e,s=>n.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>n.Rr(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.gr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.gr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),Ue.resolve(XS)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XS):this.wr(e,r))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,r){let n,s,i,o,l,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(n=p,l=Date.now(),this.removeTargets(e,n,r))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(p=>(h=Date.now(),Ku()<=Kt.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),Ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function I7(t,e){return new C7(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(){this.changes=new Zc(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,ms.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ue.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&of(n.mutation,s,la.empty(),tn.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Xt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Xt()){const s=wc();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let o=Gh();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=wc();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Xt()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,s){let i=yo();const o=af(),l=function(){return af()}();return r.forEach((u,h)=>{const f=n.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof Ul)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),of(f.mutation,h,f.mutation.getFieldMask(),tn.now())):o.set(h.key,la.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,f)=>o.set(h,f)),r.forEach((h,f)=>{var p;return l.set(h,new P7(f,(p=o.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,r){const n=af();let s=new Kr((o,l)=>o-l),i=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=r.get(u);if(h===null)return;let f=n.get(u)||la.empty();f=l.applyToLocalView(h,f),n.set(u,f);const p=(s.get(l.batchId)||Xt()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,p=lC();f.forEach(x=>{if(!i.has(x)){const v=mC(r.get(x),n.get(x));v!==null&&p.set(x,v),i=i.add(x)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return Ue.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(o){return _t.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Kw(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Ue.resolve(wc());let l=Tf,u=i;return o.next(h=>Ue.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?Ue.resolve():this.remoteDocumentCache.getEntry(e,f).next(x=>{u=u.insert(f,x)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,Xt())).next(f=>({batchId:l,changes:oC(f)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new _t(r)).next(n=>{let s=Gh();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let o=Gh();return this.indexManager.getCollectionParents(e,i).next(l=>Ue.forEach(l,u=>{const h=function(p,x){return new Jc(x,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(r,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,s).next(f=>{f.forEach((p,x)=>{o=o.insert(p,x)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(o=>{i.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,ms.newInvalidDocument(f)))});let l=Gh();return o.forEach((u,h)=>{const f=i.get(u);f!==void 0&&of(f.mutation,h,la.empty(),tn.now()),$x(r,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,r){return Ue.resolve(this.kr.get(r))}saveBundleMetadata(e,r){return this.kr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Ci(s.createTime)}}(r)),Ue.resolve()}getNamedQuery(e,r){return Ue.resolve(this.qr.get(r))}saveNamedQuery(e,r){return this.qr.set(r.name,function(s){return{name:s.name,query:E7(s.bundledQuery),readTime:Ci(s.readTime)}}(r)),Ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(){this.overlays=new Kr(_t.comparator),this.Qr=new Map}getOverlay(e,r){return Ue.resolve(this.overlays.get(r))}getOverlays(e,r){const n=wc();return Ue.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.St(e,r,i)}),Ue.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Qr.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(n)),Ue.resolve()}getOverlaysForCollection(e,r,n){const s=wc(),i=r.length+1,o=new _t(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>n&&s.set(u.getKey(),u)}return Ue.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Kr((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let f=i.get(h.largestBatchId);f===null&&(f=wc(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=wc(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=s)););return Ue.resolve(l)}St(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(n.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new t7(r,n));let i=this.Qr.get(r);i===void 0&&(i=Xt(),this.Qr.set(r,i)),this.Qr.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(){this.sessionToken=zn.EMPTY_BYTE_STRING}getSessionToken(e){return Ue.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.$r=new Tn(Fn.Ur),this.Kr=new Tn(Fn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,r){const n=new Fn(e,r);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.zr(new Fn(e,r))}jr(e,r){e.forEach(n=>this.removeReference(n,r))}Hr(e){const r=new _t(new Er([])),n=new Fn(r,e),s=new Fn(r,e+1),i=[];return this.Kr.forEachInRange([n,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const r=new _t(new Er([])),n=new Fn(r,e),s=new Fn(r,e+1);let i=Xt();return this.Kr.forEachInRange([n,s],o=>{i=i.add(o.key)}),i}containsKey(e){const r=new Fn(e,0),n=this.$r.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Fn{constructor(e,r){this.key=e,this.Zr=r}static Ur(e,r){return _t.comparator(e.key,r.key)||$t(e.Zr,r.Zr)}static Wr(e,r){return $t(e.Zr,r.Zr)||_t.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.nr=1,this.Xr=new Tn(Fn.Ur)}checkEmpty(e){return Ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new e7(i,r,n,s);this.mutationQueue.push(o);for(const l of s)this.Xr=this.Xr.add(new Fn(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Ue.resolve(o)}lookupMutationBatch(e,r){return Ue.resolve(this.ei(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.ti(n),i=s<0?0:s;return Ue.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ue.resolve(this.mutationQueue.length===0?Hw:this.nr-1)}getAllMutationBatches(e){return Ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Fn(r,0),s=new Fn(r,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([n,s],o=>{const l=this.ei(o.Zr);i.push(l)}),Ue.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Tn($t);return r.forEach(s=>{const i=new Fn(s,0),o=new Fn(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],l=>{n=n.add(l.Zr)})}),Ue.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;_t.isDocumentKey(i)||(i=i.child(""));const o=new Fn(new _t(i),0);let l=new Tn($t);return this.Xr.forEachWhile(u=>{const h=u.key.path;return!!n.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Zr)),!0)},o),Ue.resolve(this.ni(l))}ni(e){const r=[];return e.forEach(n=>{const s=this.ei(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){dr(this.ri(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Xr;return Ue.forEach(r.mutations,s=>{const i=new Fn(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=n})}sr(e){}containsKey(e,r){const n=new Fn(r,0),s=this.Xr.firstAfterOrEqual(n);return Ue.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ue.resolve()}ri(e,r){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const r=this.ti(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(e){this.ii=e,this.docs=function(){return new Kr(_t.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,o=this.ii(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ue.resolve(n?n.document.mutableCopy():ms.newInvalidDocument(r))}getEntries(e,r){let n=yo();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():ms.newInvalidDocument(s))}),Ue.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=yo();const o=r.path,l=new _t(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||p9(m9(f),n)<=0||(s.has(f.key)||$x(r,f))&&(i=i.insert(f.key,f.mutableCopy()))}return Ue.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Ct(9500)}si(e,r){return Ue.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new B7(this)}getSize(e){return Ue.resolve(this.size)}}class B7 extends R7{constructor(e){super(),this.Br=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Br.addEntry(e,s)):this.Br.removeEntry(n)}),Ue.waitFor(r)}getFromCache(e,r){return this.Br.getEntry(e,r)}getAllFromCache(e,r){return this.Br.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e){this.persistence=e,this.oi=new Zc(r=>qw(r),Gw),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this._i=0,this.ai=new e2,this.targetCount=0,this.ui=Sd.cr()}forEachTarget(e,r){return this.oi.forEach((n,s)=>r(s)),Ue.resolve()}getLastRemoteSnapshotVersion(e){return Ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ue.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Ue.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this._i&&(this._i=r),Ue.resolve()}Tr(e){this.oi.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ui=new Sd(r),this.highestTargetId=r),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,r){return this.Tr(r),this.targetCount+=1,Ue.resolve()}updateTargetData(e,r){return this.Tr(r),Ue.resolve()}removeTargetData(e,r){return this.oi.delete(r.target),this.ai.Hr(r.targetId),this.targetCount-=1,Ue.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.oi.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),Ue.waitFor(i).next(()=>s)}getTargetCount(e){return Ue.resolve(this.targetCount)}getTargetData(e,r){const n=this.oi.get(r)||null;return Ue.resolve(n)}addMatchingKeys(e,r,n){return this.ai.Gr(r,n),Ue.resolve()}removeMatchingKeys(e,r,n){this.ai.jr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),Ue.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.ai.Hr(r),Ue.resolve()}getMatchingKeysForTargetId(e,r){const n=this.ai.Yr(r);return Ue.resolve(n)}containsKey(e,r){return Ue.resolve(this.ai.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,r){this.ci={},this.overlays={},this.li=new Ox(0),this.hi=!1,this.hi=!0,this.Pi=new O7,this.referenceDelegate=e(this),this.Ti=new U7(this),this.indexManager=new S7,this.remoteDocumentCache=function(s){return new V7(s)}(n=>this.referenceDelegate.Ii(n)),this.serializer=new N7(r),this.Ei=new F7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new L7,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ci[e.toKey()];return n||(n=new M7(r,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,r,n){ft("MemoryPersistence","Starting transaction:",e);const s=new z7(this.li.next());return this.referenceDelegate.di(),n(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,r){return Ue.or(Object.values(this.ci).map(n=>()=>n.containsKey(e,r)))}}class z7 extends g9{constructor(e){super(),this.currentSequenceNumber=e}}class t2{constructor(e){this.persistence=e,this.Vi=new e2,this.mi=null}static fi(e){return new t2(e)}get gi(){if(this.mi)return this.mi;throw Ct(60996)}addReference(e,r,n){return this.Vi.addReference(n,r),this.gi.delete(n.toString()),Ue.resolve()}removeReference(e,r,n){return this.Vi.removeReference(n,r),this.gi.add(n.toString()),Ue.resolve()}markPotentiallyOrphaned(e,r){return this.gi.add(r.toString()),Ue.resolve()}removeTarget(e,r){this.Vi.Hr(r.targetId).forEach(s=>this.gi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}di(){this.mi=new Set}Ai(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ue.forEach(this.gi,n=>{const s=_t.fromPath(n);return this.pi(e,s).next(i=>{i||r.removeEntry(s,Ot.min())})}).next(()=>(this.mi=null,r.apply(e)))}updateLimboDocument(e,r){return this.pi(e,r).next(n=>{n?this.gi.delete(r.toString()):this.gi.add(r.toString())})}Ii(e){return 0}pi(e,r){return Ue.or([()=>Ue.resolve(this.Vi.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ri(e,r)])}}class Jp{constructor(e,r){this.persistence=e,this.yi=new Zc(n=>w9(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=I7(this,r)}static fi(e,r){return new Jp(e,r)}di(){}Ai(e){return Ue.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}pr(e){const r=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}br(e){let r=0;return this.yr(e,n=>{r++}).next(()=>r)}yr(e,r){return Ue.forEach(this.yi,(n,s)=>this.Dr(e,n,s).next(i=>i?Ue.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,o=>this.Dr(e,o,r).next(l=>{l||(n++,i.removeEntry(o,Ot.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.yi.set(r,e.currentSequenceNumber),Ue.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.yi.set(n,e.currentSequenceNumber),Ue.resolve()}removeReference(e,r,n){return this.yi.set(n,e.currentSequenceNumber),Ue.resolve()}updateLimboDocument(e,r){return this.yi.set(r,e.currentSequenceNumber),Ue.resolve()}Ii(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=jp(e.data.value)),r}Dr(e,r,n){return Ue.or([()=>this.persistence.Ri(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.yi.get(r);return Ue.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.ds=n,this.As=s}static Rs(e,r){let n=Xt(),s=Xt();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new r2(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return N8()?8:v9(ws())>0?6:4}()}initialize(e,r){this.ys=e,this.indexManager=r,this.Vs=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.ws(e,r).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,r,s,n).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $7;return this.Ss(e,r,o).next(l=>{if(i.result=l,this.fs)return this.Ds(e,r,o,l.size)})}).next(()=>i.result)}Ds(e,r,n,s){return n.documentReadCount<this.gs?(Ku()<=Kt.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",Xu(r),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Ue.resolve()):(Ku()<=Kt.DEBUG&&ft("QueryEngine","Query:",Xu(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.ps*s?(Ku()<=Kt.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",Xu(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ai(r))):Ue.resolve())}ws(e,r){if(VS(r))return Ue.resolve(null);let n=Ai(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Xp(r,null,"F"),n=Ai(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const o=Xt(...i);return this.ys.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(u=>{const h=this.vs(r,l);return this.Cs(r,h,o,u.readTime)?this.ws(e,Xp(r,null,"F")):this.Fs(e,h,r,u)}))})))}bs(e,r,n,s){return VS(r)||s.isEqual(Ot.min())?Ue.resolve(null):this.ys.getDocuments(e,n).next(i=>{const o=this.vs(r,i);return this.Cs(r,o,n,s)?Ue.resolve(null):(Ku()<=Kt.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Xu(r)),this.Fs(e,o,r,f9(s,Tf)).next(l=>l))})}vs(e,r){let n=new Tn(aC(e));return r.forEach((s,i)=>{$x(e,i)&&(n=n.add(i))}),n}Cs(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,r,n){return Ku()<=Kt.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",Xu(r)),this.ys.getDocumentsMatchingQuery(e,r,Nl.min(),n)}Fs(e,r,n,s){return this.ys.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="LocalStore",W7=3e8;class q7{constructor(e,r,n,s){this.persistence=e,this.Ms=r,this.serializer=s,this.xs=new Kr($t),this.Os=new Zc(i=>qw(i),Gw),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new D7(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.xs))}}function G7(t,e,r,n){return new q7(t,e,r,n)}async function jC(t,e){const r=Vt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.Ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const o=[],l=[];let u=Xt();for(const h of s){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return r.localDocuments.getDocuments(n,u).next(h=>({ks:h,removedBatchIds:o,addedBatchIds:l}))})})}function K7(t,e){const r=Vt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.Bs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const p=h.batch,x=p.keys();let v=Ue.resolve();return x.forEach(w=>{v=v.next(()=>f.getEntry(u,w)).next(b=>{const _=h.docVersions.get(w);dr(_!==null,48541),b.version.compareTo(_)<0&&(p.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),f.addEntry(b)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=Xt();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function AC(t){const e=Vt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ti.getLastRemoteSnapshotVersion(r))}function X7(t,e){const r=Vt(t),n=e.snapshotVersion;let s=r.xs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=r.Bs.newChangeBuffer({trackRemovals:!0});s=r.xs;const l=[];e.targetChanges.forEach((f,p)=>{const x=s.get(p);if(!x)return;l.push(r.Ti.removeMatchingKeys(i,f.removedDocuments,p).next(()=>r.Ti.addMatchingKeys(i,f.addedDocuments,p)));let v=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(zn.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,n)),s=s.insert(p,v),function(b,_,R){return b.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=W7?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(x,v,f)&&l.push(r.Ti.updateTargetData(i,v))});let u=yo(),h=Xt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(Y7(i,o,e.documentUpdates).next(f=>{u=f.qs,h=f.Qs})),!n.isEqual(Ot.min())){const f=r.Ti.getLastRemoteSnapshotVersion(i).next(p=>r.Ti.setTargetsMetadata(i,i.currentSequenceNumber,n));l.push(f)}return Ue.waitFor(l).next(()=>o.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(r.xs=s,i))}function Y7(t,e,r){let n=Xt(),s=Xt();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let o=yo();return r.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Ot.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):ft(n2,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{qs:o,Qs:s}})}function Q7(t,e){const r=Vt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Hw),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function J7(t,e){const r=Vt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ti.getTargetData(n,e).next(i=>i?(s=i,Ue.resolve(s)):r.Ti.allocateTargetId(n).next(o=>(s=new ml(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ti.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.xs.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.xs=r.xs.insert(n.targetId,n),r.Os.set(e,n.targetId)),n})}async function D1(t,e,r){const n=Vt(t),s=n.xs.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Gd(o))throw o;ft(n2,`Failed to update sequence numbers for target ${e}: ${o}`)}n.xs=n.xs.remove(e),n.Os.delete(s.target)}function JS(t,e,r){const n=Vt(t);let s=Ot.min(),i=Xt();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const p=Vt(u),x=p.Os.get(f);return x!==void 0?Ue.resolve(p.xs.get(x)):p.Ti.getTargetData(h,f)}(n,o,Ai(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.Ti.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>n.Ms.getDocumentsMatchingQuery(o,e,r?s:Ot.min(),r?i:Xt())).next(l=>(Z7(n,V9(e),l),{documents:l,$s:i})))}function Z7(t,e,r){let n=t.Ns.get(e)||Ot.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.Ns.set(e,n)}class ZS{constructor(){this.activeTargetIds=W9()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eV{constructor(){this.xo=new ZS,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,r,n){this.Oo[e]=r}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new ZS,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="ConnectivityMonitor";class tk{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ft(ek,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ft(ek,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rp=null;function F1(){return rp===null?rp=function(){return 268435456+Math.round(2147483648*Math.random())}():rp++,"0x"+rp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="RestConnection",rV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nV{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=r+"://"+e.host,this.Wo=`projects/${n}/databases/${s}`,this.Go=this.databaseId.database===qp?`project_id=${n}`:`project_id=${n}&database_id=${s}`}zo(e,r,n,s,i){const o=F1(),l=this.jo(e,r.toUriEncodedString());ft(by,`Sending RPC '${e}' ${o}:`,l,n);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,s,i);const{host:h}=new URL(l),f=$d(h);return this.Jo(e,l,u,n,f).then(p=>(ft(by,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Oc(by,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",n),p})}Yo(e,r,n,s,i,o){return this.zo(e,r,n,s,i)}Ho(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>e[i]=s),n&&n.headers.forEach((s,i)=>e[i]=s)}jo(e,r){const n=rV[e];return`${this.Ko}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="WebChannelConnection";class aV extends nV{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,s,i){const o=F1();return new Promise((l,u)=>{const h=new PA;h.setWithCredentials(!0),h.listenOnce(DA.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Tp.NO_ERROR:const p=h.getResponseJson();ft(ls,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Tp.TIMEOUT:ft(ls,`RPC '${e}' ${o} timed out`),u(new ct(Ve.DEADLINE_EXCEEDED,"Request time out"));break;case Tp.HTTP_ERROR:const x=h.getStatus();if(ft(ls,`RPC '${e}' ${o} failed with status:`,x,"response text:",h.getResponseText()),x>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const w=v==null?void 0:v.error;if(w&&w.status&&w.message){const b=function(R){const j=R.toLowerCase().replace(/_/g,"-");return Object.values(Ve).indexOf(j)>=0?j:Ve.UNKNOWN}(w.status);u(new ct(b,w.message))}else u(new ct(Ve.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new ct(Ve.UNAVAILABLE,"Connection failed."));break;default:Ct(9055,{h_:e,streamId:o,P_:h.getLastErrorCode(),T_:h.getLastError()})}}finally{ft(ls,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);ft(ls,`RPC '${e}' ${o} sending request:`,s),h.send(r,"POST",f,n,15)})}I_(e,r,n){const s=F1(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=OA(),l=LA(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const f=i.join("");ft(ls,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=o.createWebChannel(f,u);this.E_(p);let x=!1,v=!1;const w=new sV({Zo:_=>{v?ft(ls,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(x||(ft(ls,`Opening RPC '${e}' stream ${s} transport.`),p.open(),x=!0),ft(ls,`RPC '${e}' stream ${s} sending:`,_),p.send(_))},Xo:()=>p.close()}),b=(_,R,j)=>{_.listen(R,k=>{try{j(k)}catch(F){setTimeout(()=>{throw F},0)}})};return b(p,qh.EventType.OPEN,()=>{v||(ft(ls,`RPC '${e}' stream ${s} transport opened.`),w.__())}),b(p,qh.EventType.CLOSE,()=>{v||(v=!0,ft(ls,`RPC '${e}' stream ${s} transport closed`),w.u_(),this.d_(p))}),b(p,qh.EventType.ERROR,_=>{v||(v=!0,Oc(ls,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),w.u_(new ct(Ve.UNAVAILABLE,"The operation could not be completed")))}),b(p,qh.EventType.MESSAGE,_=>{var R;if(!v){const j=_.data[0];dr(!!j,16349);const k=j,F=(k==null?void 0:k.error)||((R=k[0])===null||R===void 0?void 0:R.error);if(F){ft(ls,`RPC '${e}' stream ${s} received error:`,F);const L=F.status;let I=function(P){const B=gn[P];if(B!==void 0)return xC(B)}(L),N=F.message;I===void 0&&(I=Ve.INTERNAL,N="Unknown error status: "+L+" with message "+F.message),v=!0,w.u_(new ct(I,N)),p.close()}else ft(ls,`RPC '${e}' stream ${s} received:`,j),w.c_(j)}}),b(l,FA.STAT_EVENT,_=>{_.stat===N1.PROXY?ft(ls,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===N1.NOPROXY&&ft(ls,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.a_()},0),w}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(r=>r===e)}}function _y(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){return new c7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,r,n=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=r,this.A_=n,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const r=Math.floor(this.m_+this.w_()),n=Math.max(0,Date.now()-this.g_),s=Math.max(0,r-n);s>0&&ft("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="PersistentStream";class IC{constructor(e,r,n,s,i,o,l,u){this.xi=e,this.S_=n,this.D_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new CC(e,r)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,r){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():r&&r.code===Ve.RESOURCE_EXHAUSTED?(vo(r.toString()),vo("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):r&&r.code===Ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(r)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),r=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.v_===r&&this.z_(n,s)},n=>{e(()=>{const s=new ct(Ve.UNKNOWN,"Fetching auth token failed: "+n.message);return this.j_(s)})})}z_(e,r){const n=this.G_(this.v_);this.stream=this.H_(e,r),this.stream.e_(()=>{n(()=>this.listener.e_())}),this.stream.n_(()=>{n(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{n(()=>this.j_(s))}),this.stream.onMessage(s=>{n(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return ft(rk,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return r=>{this.xi.enqueueAndForget(()=>this.v_===e?r():(ft(rk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iV extends IC{constructor(e,r,n,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}H_(e,r){return this.connection.I_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const r=h7(this.serializer,e),n=function(i){if(!("targetChange"in i))return Ot.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ot.min():o.readTime?Ci(o.readTime):Ot.min()}(e);return this.listener.Y_(r,n)}Z_(e){const r={};r.database=P1(this.serializer),r.addTarget=function(i,o){let l;const u=o.target;if(l=j1(u)?{documents:p7(i,u)}:{query:x7(i,u).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=yC(i,o.resumeToken);const h=C1(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Ot.min())>0){l.readTime=Qp(i,o.snapshotVersion.toTimestamp());const h=C1(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const n=v7(this.serializer,e);n&&(r.labels=n),this.Q_(r)}X_(e){const r={};r.database=P1(this.serializer),r.removeTarget=e,this.Q_(r)}}class oV extends IC{constructor(e,r,n,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,r){return this.connection.I_("Write",e,r)}J_(e){return dr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dr(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){dr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const r=m7(e.writeResults,e.commitTime),n=Ci(e.commitTime);return this.listener.ra(n,r)}ia(){const e={};e.database=P1(this.serializer),this.Q_(e)}ta(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>f7(this.serializer,n))};this.Q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{}class cV extends lV{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new ct(Ve.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,r,n,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,I1(r,n),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ct(Ve.UNKNOWN,i.toString())})}Yo(e,r,n,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Yo(e,I1(r,n),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ct(Ve.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class uV{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(vo(r),this.ua=!1):ft("OnlineStateTracker",r)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc="RemoteStore";class dV{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{n.enqueueAndForget(async()=>{eu(this)&&(ft(Mc,"Restarting streams for network reachability change."),await async function(u){const h=Vt(u);h.da.add(4),await h0(h),h.Va.set("Unknown"),h.da.delete(4),await Xx(h)}(this))})}),this.Va=new uV(n,s)}}async function Xx(t){if(eu(t))for(const e of t.Aa)await e(!0)}async function h0(t){for(const e of t.Aa)await e(!1)}function RC(t,e){const r=Vt(t);r.Ea.has(e.targetId)||(r.Ea.set(e.targetId,e),o2(r)?i2(r):Kd(r).N_()&&a2(r,e))}function s2(t,e){const r=Vt(t),n=Kd(r);r.Ea.delete(e),n.N_()&&PC(r,e),r.Ea.size===0&&(n.N_()?n.k_():eu(r)&&r.Va.set("Unknown"))}function a2(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ot.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Kd(t).Z_(e)}function PC(t,e){t.ma.Ke(e),Kd(t).X_(e)}function i2(t){t.ma=new a7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Kd(t).start(),t.Va.ca()}function o2(t){return eu(t)&&!Kd(t).O_()&&t.Ea.size>0}function eu(t){return Vt(t).da.size===0}function DC(t){t.ma=void 0}async function hV(t){t.Va.set("Online")}async function fV(t){t.Ea.forEach((e,r)=>{a2(t,e)})}async function mV(t,e){DC(t),o2(t)?(t.Va.Pa(e),i2(t)):t.Va.set("Unknown")}async function pV(t,e,r){if(t.Va.set("Online"),e instanceof vC&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ea.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ea.delete(l),s.ma.removeTarget(l))}(t,e)}catch(n){ft(Mc,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Zp(t,n)}else if(e instanceof Ip?t.ma.Xe(e):e instanceof gC?t.ma.ot(e):t.ma.nt(e),!r.isEqual(Ot.min()))try{const n=await AC(t.localStore);r.compareTo(n)>=0&&await function(i,o){const l=i.ma.It(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ea.get(h);f&&i.Ea.set(h,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const f=i.Ea.get(u);if(!f)return;i.Ea.set(u,f.withResumeToken(zn.EMPTY_BYTE_STRING,f.snapshotVersion)),PC(i,u);const p=new ml(f.target,u,h,f.sequenceNumber);a2(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){ft(Mc,"Failed to raise snapshot:",n),await Zp(t,n)}}async function Zp(t,e,r){if(!Gd(e))throw e;t.da.add(1),await h0(t),t.Va.set("Offline"),r||(r=()=>AC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ft(Mc,"Retrying IndexedDB access"),await r(),t.da.delete(1),await Xx(t)})}function FC(t,e){return e().catch(r=>Zp(t,r,e))}async function Yx(t){const e=Vt(t),r=Tl(e);let n=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Hw;for(;xV(e);)try{const s=await Q7(e.localStore,n);if(s===null){e.Ia.length===0&&r.k_();break}n=s.batchId,gV(e,s)}catch(s){await Zp(e,s)}LC(e)&&OC(e)}function xV(t){return eu(t)&&t.Ia.length<10}function gV(t,e){t.Ia.push(e);const r=Tl(t);r.N_()&&r.ea&&r.ta(e.mutations)}function LC(t){return eu(t)&&!Tl(t).O_()&&t.Ia.length>0}function OC(t){Tl(t).start()}async function vV(t){Tl(t).ia()}async function yV(t){const e=Tl(t);for(const r of t.Ia)e.ta(r.mutations)}async function wV(t,e,r){const n=t.Ia.shift(),s=Qw.from(n,e,r);await FC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Yx(t)}async function bV(t,e){e&&Tl(t).ea&&await async function(n,s){if(function(o){return n7(o)&&o!==Ve.ABORTED}(s.code)){const i=n.Ia.shift();Tl(n).L_(),await FC(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Yx(n)}}(t,e),LC(t)&&OC(t)}async function nk(t,e){const r=Vt(t);r.asyncQueue.verifyOperationInProgress(),ft(Mc,"RemoteStore received new credentials");const n=eu(r);r.da.add(3),await h0(r),n&&r.Va.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.da.delete(3),await Xx(r)}async function _V(t,e){const r=Vt(t);e?(r.da.delete(2),await Xx(r)):e||(r.da.add(2),await h0(r),r.Va.set("Unknown"))}function Kd(t){return t.fa||(t.fa=function(r,n,s){const i=Vt(r);return i.oa(),new iV(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:hV.bind(null,t),n_:fV.bind(null,t),i_:mV.bind(null,t),Y_:pV.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),o2(t)?i2(t):t.Va.set("Unknown")):(await t.fa.stop(),DC(t))})),t.fa}function Tl(t){return t.ga||(t.ga=function(r,n,s){const i=Vt(r);return i.oa(),new oV(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:vV.bind(null,t),i_:bV.bind(null,t),na:yV.bind(null,t),ra:wV.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Yx(t)):(await t.ga.stop(),t.Ia.length>0&&(ft(Mc,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const o=Date.now()+n,l=new l2(e,r,o,s,i);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ct(Ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function c2(t,e){if(vo("AsyncQueue",`${e}: ${t}`),Gd(t))return new ct(Ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{static emptySet(e){return new dd(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||_t.comparator(r.key,n.key):(r,n)=>_t.comparator(r.key,n.key),this.keyedMap=Gh(),this.sortedSet=new Kr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof dd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new dd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(){this.pa=new Kr(_t.comparator)}track(e){const r=e.doc.key,n=this.pa.get(r);n?e.type!==0&&n.type===3?this.pa=this.pa.insert(r,e):e.type===3&&n.type!==1?this.pa=this.pa.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.pa=this.pa.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.pa=this.pa.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.pa=this.pa.remove(r):e.type===1&&n.type===2?this.pa=this.pa.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.pa=this.pa.insert(r,{type:2,doc:e.doc}):Ct(63341,{Vt:e,ya:n}):this.pa=this.pa.insert(r,e)}wa(){const e=[];return this.pa.inorderTraversal((r,n)=>{e.push(n)}),e}}class kd{constructor(e,r,n,s,i,o,l,u,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,s,i){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new kd(e,r,dd.emptySet(r),o,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class EV{constructor(){this.queries=ak(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const s=Vt(r),i=s.queries;s.queries=ak(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(n)})})(this,new ct(Ve.ABORTED,"Firestore shutting down"))}}function ak(){return new Zc(t=>sC(t),zx)}async function u2(t,e){const r=Vt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.Da()&&e.va()&&(n=2):(i=new NV,n=e.va()?0:1);try{switch(n){case 0:i.ba=await r.onListen(s,!0);break;case 1:i.ba=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=c2(o,`Initialization of query '${Xu(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,i),i.Sa.push(e),e.Fa(r.onlineState),i.ba&&e.Ma(i.ba)&&h2(r)}async function d2(t,e){const r=Vt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.va()?0:1:!i.Da()&&e.va()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function SV(t,e){const r=Vt(t);let n=!1;for(const s of e){const i=s.query,o=r.queries.get(i);if(o){for(const l of o.Sa)l.Ma(s)&&(n=!0);o.ba=s}}n&&h2(r)}function kV(t,e,r){const n=Vt(t),s=n.queries.get(e);if(s)for(const i of s.Sa)i.onError(r);n.queries.delete(e)}function h2(t){t.Ca.forEach(e=>{e.next()})}var L1,ik;(ik=L1||(L1={})).xa="default",ik.Cache="cache";class f2{constructor(e,r,n){this.query=e,this.Oa=r,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=n||{}}Ma(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new kd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Na?this.La(e)&&(this.Oa.next(e),r=!0):this.ka(e,this.onlineState)&&(this.qa(e),r=!0),this.Ba=e,r}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let r=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),r=!0),r}ka(e,r){if(!e.fromCache||!this.va())return!0;const n=r!=="Offline";return(!this.options.Qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}La(e){if(e.docChanges.length>0)return!0;const r=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}qa(e){e=kd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==L1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this.key=e}}class VC{constructor(e){this.key=e}}class TV{constructor(e,r){this.query=e,this.Ha=r,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xt(),this.mutatedKeys=Xt(),this.Za=aC(e),this.Xa=new dd(this.Za)}get eu(){return this.Ha}tu(e,r){const n=r?r.nu:new sk,s=r?r.Xa:this.Xa;let i=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const x=s.get(f),v=$x(this.query,p)?p:null,w=!!x&&this.mutatedKeys.has(x.key),b=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let _=!1;x&&v?x.data.isEqual(v.data)?w!==b&&(n.track({type:3,doc:v}),_=!0):this.ru(x,v)||(n.track({type:2,doc:v}),_=!0,(u&&this.Za(v,u)>0||h&&this.Za(v,h)<0)&&(l=!0)):!x&&v?(n.track({type:0,doc:v}),_=!0):x&&!v&&(n.track({type:1,doc:x}),_=!0,(u||h)&&(l=!0)),_&&(v?(o=o.add(v),i=b?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),n.track({type:1,doc:f})}return{Xa:o,nu:n,Cs:l,mutatedKeys:i}}ru(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((f,p)=>function(v,w){const b=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct(20277,{Vt:_})}};return b(v)-b(w)}(f.type,p.type)||this.Za(f.doc,p.doc)),this.iu(n),s=s!=null&&s;const l=r&&!s?this.su():[],u=this.Ya.size===0&&this.current&&!s?1:0,h=u!==this.Ja;return this.Ja=u,o.length!==0||h?{snapshot:new kd(this.query,e.Xa,i,o,e.mutatedKeys,u===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new sk,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(r=>this.Ha=this.Ha.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ha=this.Ha.delete(r)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Xt(),this.Xa.forEach(n=>{this._u(n.key)&&(this.Ya=this.Ya.add(n.key))});const r=[];return e.forEach(n=>{this.Ya.has(n)||r.push(new VC(n))}),this.Ya.forEach(n=>{e.has(n)||r.push(new MC(n))}),r}au(e){this.Ha=e.$s,this.Ya=Xt();const r=this.tu(e.documents);return this.applyChanges(r,!0)}uu(){return kd.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const m2="SyncEngine";class jV{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class AV{constructor(e){this.key=e,this.cu=!1}}class CV{constructor(e,r,n,s,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Zc(l=>sC(l),zx),this.Pu=new Map,this.Tu=new Set,this.Iu=new Kr(_t.comparator),this.Eu=new Map,this.du=new e2,this.Au={},this.Ru=new Map,this.Vu=Sd.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function IV(t,e,r=!0){const n=WC(t);let s;const i=n.hu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await BC(n,e,r,!0),s}async function RV(t,e){const r=WC(t);await BC(r,e,!0,!1)}async function BC(t,e,r,n){const s=await J7(t.localStore,Ai(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,r);let l;return n&&(l=await PV(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&RC(t.remoteStore,s),l}async function PV(t,e,r,n,s){t.fu=(p,x,v)=>async function(b,_,R,j){let k=_.view.tu(R);k.Cs&&(k=await JS(b.localStore,_.query,!1).then(({documents:N})=>_.view.tu(N,k)));const F=j&&j.targetChanges.get(_.targetId),L=j&&j.targetMismatches.get(_.targetId)!=null,I=_.view.applyChanges(k,b.isPrimaryClient,F,L);return lk(b,_.targetId,I.ou),I.snapshot}(t,p,x,v);const i=await JS(t.localStore,e,!0),o=new TV(e,i.$s),l=o.tu(i.documents),u=d0.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);lk(t,r,h.ou);const f=new jV(e,r,o);return t.hu.set(e,f),t.Pu.has(r)?t.Pu.get(r).push(e):t.Pu.set(r,[e]),h.snapshot}async function DV(t,e,r){const n=Vt(t),s=n.hu.get(e),i=n.Pu.get(s.targetId);if(i.length>1)return n.Pu.set(s.targetId,i.filter(o=>!zx(o,e))),void n.hu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await D1(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&s2(n.remoteStore,s.targetId),O1(n,s.targetId)}).catch(qd)):(O1(n,s.targetId),await D1(n.localStore,s.targetId,!0))}async function FV(t,e){const r=Vt(t),n=r.hu.get(e),s=r.Pu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),s2(r.remoteStore,n.targetId))}async function LV(t,e,r){const n=$V(t);try{const s=await function(o,l){const u=Vt(o),h=tn.now(),f=l.reduce((v,w)=>v.add(w.key),Xt());let p,x;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=yo(),b=Xt();return u.Bs.getEntries(v,f).next(_=>{w=_,w.forEach((R,j)=>{j.isValidDocument()||(b=b.add(R))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,w)).next(_=>{p=_;const R=[];for(const j of l){const k=J9(j,p.get(j.key).overlayedDocument);k!=null&&R.push(new Ul(j.key,k,QA(k.value.mapValue),Is.exists(!0)))}return u.mutationQueue.addMutationBatch(v,h,R,l)}).next(_=>{x=_;const R=_.applyToLocalDocumentSet(p,b);return u.documentOverlayCache.saveOverlays(v,_.batchId,R)})}).then(()=>({batchId:x.batchId,changes:oC(p)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.Au[o.currentUser.toKey()];h||(h=new Kr($t)),h=h.insert(l,u),o.Au[o.currentUser.toKey()]=h}(n,s.batchId,r),await f0(n,s.changes),await Yx(n.remoteStore)}catch(s){const i=c2(s,"Failed to persist write");r.reject(i)}}async function UC(t,e){const r=Vt(t);try{const n=await X7(r.localStore,e);e.targetChanges.forEach((s,i)=>{const o=r.Eu.get(i);o&&(dr(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.cu=!0:s.modifiedDocuments.size>0?dr(o.cu,14607):s.removedDocuments.size>0&&(dr(o.cu,42227),o.cu=!1))}),await f0(r,n,e)}catch(n){await qd(n)}}function ok(t,e,r){const n=Vt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.hu.forEach((i,o)=>{const l=o.view.Fa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Vt(o);u.onlineState=l;let h=!1;u.queries.forEach((f,p)=>{for(const x of p.Sa)x.Fa(l)&&(h=!0)}),h&&h2(u)}(n.eventManager,e),s.length&&n.lu.Y_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function OV(t,e,r){const n=Vt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Eu.get(e),i=s&&s.key;if(i){let o=new Kr(_t.comparator);o=o.insert(i,ms.newNoDocument(i,Ot.min()));const l=Xt().add(i),u=new Gx(Ot.min(),new Map,new Kr($t),o,l);await UC(n,u),n.Iu=n.Iu.remove(i),n.Eu.delete(e),p2(n)}else await D1(n.localStore,e,!1).then(()=>O1(n,e,r)).catch(qd)}async function MV(t,e){const r=Vt(t),n=e.batch.batchId;try{const s=await K7(r.localStore,e);$C(r,n,null),zC(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await f0(r,s)}catch(s){await qd(s)}}async function VV(t,e,r){const n=Vt(t);try{const s=await function(o,l){const u=Vt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(dr(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(n.localStore,e);$C(n,e,r),zC(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await f0(n,s)}catch(s){await qd(s)}}function zC(t,e){(t.Ru.get(e)||[]).forEach(r=>{r.resolve()}),t.Ru.delete(e)}function $C(t,e,r){const n=Vt(t);let s=n.Au[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Au[n.currentUser.toKey()]=s}}function O1(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Pu.get(e))t.hu.delete(n),r&&t.lu.gu(n,r);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(n=>{t.du.containsKey(n)||HC(t,n)})}function HC(t,e){t.Tu.delete(e.path.canonicalString());const r=t.Iu.get(e);r!==null&&(s2(t.remoteStore,r),t.Iu=t.Iu.remove(e),t.Eu.delete(r),p2(t))}function lk(t,e,r){for(const n of r)n instanceof MC?(t.du.addReference(n.key,e),BV(t,n)):n instanceof VC?(ft(m2,"Document no longer in limbo: "+n.key),t.du.removeReference(n.key,e),t.du.containsKey(n.key)||HC(t,n.key)):Ct(19791,{pu:n})}function BV(t,e){const r=e.key,n=r.path.canonicalString();t.Iu.get(r)||t.Tu.has(n)||(ft(m2,"New document in limbo: "+r),t.Tu.add(n),p2(t))}function p2(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const r=new _t(Er.fromString(e)),n=t.Vu.next();t.Eu.set(n,new AV(r)),t.Iu=t.Iu.insert(r,n),RC(t.remoteStore,new ml(Ai(Ux(r.path)),n,"TargetPurposeLimboResolution",Ox.le))}}async function f0(t,e,r){const n=Vt(t),s=[],i=[],o=[];n.hu.isEmpty()||(n.hu.forEach((l,u)=>{o.push(n.fu(u,e,r).then(h=>{var f;if((h||r)&&n.isPrimaryClient){const p=h?!h.fromCache:(f=r==null?void 0:r.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;n.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){s.push(h);const p=r2.Rs(u.targetId,h);i.push(p)}}))}),await Promise.all(o),n.lu.Y_(s),await async function(u,h){const f=Vt(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Ue.forEach(h,x=>Ue.forEach(x.ds,v=>f.persistence.referenceDelegate.addReference(p,x.targetId,v)).next(()=>Ue.forEach(x.As,v=>f.persistence.referenceDelegate.removeReference(p,x.targetId,v)))))}catch(p){if(!Gd(p))throw p;ft(n2,"Failed to update sequence numbers: "+p)}for(const p of h){const x=p.targetId;if(!p.fromCache){const v=f.xs.get(x),w=v.snapshotVersion,b=v.withLastLimboFreeSnapshotVersion(w);f.xs=f.xs.insert(x,b)}}}(n.localStore,i))}async function UV(t,e){const r=Vt(t);if(!r.currentUser.isEqual(e)){ft(m2,"User change. New user:",e.toKey());const n=await jC(r.localStore,e);r.currentUser=e,function(i,o){i.Ru.forEach(l=>{l.forEach(u=>{u.reject(new ct(Ve.CANCELLED,o))})}),i.Ru.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await f0(r,n.ks)}}function zV(t,e){const r=Vt(t),n=r.Eu.get(e);if(n&&n.cu)return Xt().add(n.key);{let s=Xt();const i=r.Pu.get(e);if(!i)return s;for(const o of i){const l=r.hu.get(o);s=s.unionWith(l.view.eu)}return s}}function WC(t){const e=Vt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OV.bind(null,e),e.lu.Y_=SV.bind(null,e.eventManager),e.lu.gu=kV.bind(null,e.eventManager),e}function $V(t){const e=Vt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VV.bind(null,e),e}class ex{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kx(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,r){return null}Cu(e,r){return null}Du(e){return G7(this.persistence,new H7,e.initialUser,this.serializer)}Su(e){return new TC(t2.fi,this.serializer)}bu(e){return new eV}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ex.provider={build:()=>new ex};class HV extends ex{constructor(e){super(),this.cacheSizeBytes=e}vu(e,r){dr(this.persistence.referenceDelegate instanceof Jp,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new A7(n,e.asyncQueue,r)}Su(e){const r=this.cacheSizeBytes!==void 0?Hs.withCacheSize(this.cacheSizeBytes):Hs.DEFAULT;return new TC(n=>Jp.fi(n,r),this.serializer)}}class M1{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>ok(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=UV.bind(null,this.syncEngine),await _V(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EV}()}createDatastore(e){const r=Kx(e.databaseInfo.databaseId),n=function(i){return new aV(i)}(e.databaseInfo);return function(i,o,l,u){return new cV(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,o,l){return new dV(n,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>ok(this.syncEngine,r,0),function(){return tk.C()?new tk:new tV}())}createSyncEngine(e,r){return function(s,i,o,l,u,h,f){const p=new CV(s,i,o,l,u,h);return f&&(p.mu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Vt(s);ft(Mc,"RemoteStore shutting down."),i.da.add(5),await h0(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}M1.provider={build:()=>new M1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):vo("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl="FirestoreClient";class WV{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=ds.UNAUTHENTICATED,this.clientId=$w.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async o=>{ft(jl,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(ft(jl,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new io;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=c2(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ny(t,e){t.asyncQueue.verifyOperationInProgress(),ft(jl,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await jC(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ck(t,e){t.asyncQueue.verifyOperationInProgress();const r=await qV(t);ft(jl,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>nk(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>nk(e.remoteStore,s)),t._onlineComponents=e}async function qV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ft(jl,"Using user provided OfflineComponentProvider");try{await Ny(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Ve.FAILED_PRECONDITION||s.code===Ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Oc("Error using user provided cache. Falling back to memory cache: "+r),await Ny(t,new ex)}}else ft(jl,"Using default OfflineComponentProvider"),await Ny(t,new HV(void 0));return t._offlineComponents}async function qC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ft(jl,"Using user provided OnlineComponentProvider"),await ck(t,t._uninitializedComponentsProvider._online)):(ft(jl,"Using default OnlineComponentProvider"),await ck(t,new M1))),t._onlineComponents}function GV(t){return qC(t).then(e=>e.syncEngine)}async function tx(t){const e=await qC(t),r=e.eventManager;return r.onListen=IV.bind(null,e.syncEngine),r.onUnlisten=DV.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=RV.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=FV.bind(null,e.syncEngine),r}function KV(t,e,r={}){const n=new io;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const f=new x2({next:x=>{f.xu(),o.enqueueAndForget(()=>d2(i,p));const v=x.docs.has(l);!v&&x.fromCache?h.reject(new ct(Ve.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&x.fromCache&&u&&u.source==="server"?h.reject(new ct(Ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),p=new f2(Ux(l.path),f,{includeMetadataChanges:!0,Qa:!0});return u2(i,p)}(await tx(t),t.asyncQueue,e,r,n)),n.promise}function XV(t,e,r={}){const n=new io;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const f=new x2({next:x=>{f.xu(),o.enqueueAndForget(()=>d2(i,p)),x.fromCache&&u.source==="server"?h.reject(new ct(Ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),p=new f2(l,f,{includeMetadataChanges:!0,Qa:!0});return u2(i,p)}(await tx(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t,e,r){if(!r)throw new ct(Ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XC(t,e,r,n){if(e===!0&&n===!0)throw new ct(Ve.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function dk(t){if(!_t.isDocumentKey(t))throw new ct(Ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hk(t){if(_t.isDocumentKey(t))throw new ct(Ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Qx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ct(12329,{type:typeof t})}function vs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ct(Ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Qx(t);throw new ct(Ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function YV(t,e){if(e<=0)throw new ct(Ve.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="firestore.googleapis.com",fk=!0;class mk{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ct(Ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YC,this.ssl=fk}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:fk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T7)throw new ct(Ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GC((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ct(Ve.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ct(Ve.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ct(Ve.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jx{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mk({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ct(Ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ct(Ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mk(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new BA;switch(n.type){case"firstParty":return new l9(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ct(Ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=uk.get(r);n&&(ft("ComponentProvider","Removing Datastore"),uk.delete(r),n.terminate())}(this),Promise.resolve()}}function QC(t,e,r,n={}){var s;t=vs(t,Jx);const i=$d(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${r}`;i&&($j(`https://${u}`),Hj("Firestore",!0)),o.host!==YC&&o.host!==u&&Oc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:n});if(!po(h,l)&&(t._setSettings(h),n.mockUserToken)){let f,p;if(typeof n.mockUserToken=="string")f=n.mockUserToken,p=ds.MOCK_USER;else{f=m8(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const x=n.mockUserToken.sub||n.mockUserToken.user_id;if(!x)throw new ct(Ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ds(x)}t._authCredentials=new a9(new VA(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ci(this.firestore,e,this._query)}}class es{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new es(this.firestore,e,this._key)}}class oo extends ci{constructor(e,r,n){super(e,r,Ux(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new es(this.firestore,null,new _t(e))}withConverter(e){return new oo(this.firestore,e,this._path)}}function Dt(t,e,...r){if(t=Lr(t),KC("collection","path",e),t instanceof Jx){const n=Er.fromString(e,...r);return hk(n),new oo(t,null,n)}{if(!(t instanceof es||t instanceof oo))throw new ct(Ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Er.fromString(e,...r));return hk(n),new oo(t.firestore,null,n)}}function bt(t,e,...r){if(t=Lr(t),arguments.length===1&&(e=$w.newId()),KC("doc","path",e),t instanceof Jx){const n=Er.fromString(e,...r);return dk(n),new es(t,null,new _t(n))}{if(!(t instanceof es||t instanceof oo))throw new ct(Ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Er.fromString(e,...r));return dk(n),new es(t.firestore,t instanceof oo?t.converter:null,new _t(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="AsyncQueue";class xk{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new CC(this,"async_queue_retry"),this.rc=()=>{const n=_y();n&&ft(pk,"Visibility state changed to "+n.visibilityState),this.x_.b_()},this.sc=e;const r=_y();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const r=_y();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const r=new io;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Gd(e))throw e;ft(pk,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const r=this.sc.then(()=>(this.ec=!0,e().catch(n=>{throw this.Xu=n,this.ec=!1,vo("INTERNAL UNHANDLED ERROR: ",gk(n)),n}).then(n=>(this.ec=!1,n))));return this.sc=r,r}enqueueAfterDelay(e,r,n){this.oc(),this.nc.indexOf(e)>-1&&(r=0);const s=l2.createAndSchedule(this,e,r,n,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&Ct(47125,{cc:gk(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const r of this.Zu)if(r.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Zu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const r=this.Zu.indexOf(e);this.Zu.splice(r,1)}}function gk(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class oi extends Jx{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new xk,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xk(e),this._firestoreClient=void 0,await e}}}function JC(t,e){const r=typeof t=="object"?t:Kj(),n=typeof t=="string"?t:qp,s=Rw(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=h8("firestore");i&&QC(s,...i)}return s}function Xd(t){if(t._terminated)throw new ct(Ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||QV(t),t._firestoreClient}function QV(t){var e,r,n;const s=t._freezeSettings(),i=function(l,u,h,f){return new N9(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,GC(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new WV(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vc(zn.fromBase64String(e))}catch(r){throw new ct(Ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Vc(zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ct(Ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new On(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ct(Ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ct(Ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=/^__.*__$/;class ZV{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Ul(e,this.data,this.fieldMask,r,this.fieldTransforms):new u0(e,this.data,r,this.fieldTransforms)}}class ZC{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Ul(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function e3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct(40011,{Ic:t})}}class tg{constructor(e,r,n,s,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new tg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.dc({path:n,Rc:!1});return s.Vc(e),s}mc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.dc({path:n,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return rx(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(e3(this.Ic)&&JV.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class eB{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Kx(e)}bc(e,r,n,s=!1){return new tg({Ic:e,methodName:r,wc:n,path:On.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qd(t){const e=t._freezeSettings(),r=Kx(t._databaseId);return new eB(t._databaseId,!!e.ignoreUndefinedProperties,r)}function g2(t,e,r,n,s,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,r,s);b2("Data must be an object, but it was:",o,n);const l=a3(n,o);let u,h;if(i.merge)u=new la(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const x=V1(e,p,r);if(!o.contains(x))throw new ct(Ve.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);o3(f,x)||f.push(x)}u=new la(f),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new ZV(new qs(l),u,h)}class rg extends tu{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rg}}function t3(t,e,r){return new tg({Ic:3,wc:e.settings.wc,methodName:t._methodName,Rc:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class v2 extends tu{_toFieldTransform(e){return new Yw(e.path,new If)}isEqual(e){return e instanceof v2}}class y2 extends tu{constructor(e,r){super(e),this.Sc=r}_toFieldTransform(e){const r=t3(this,e,!0),n=this.Sc.map(i=>ru(i,r)),s=new Nd(n);return new Yw(e.path,s)}isEqual(e){return e instanceof y2&&po(this.Sc,e.Sc)}}class w2 extends tu{constructor(e,r){super(e),this.Sc=r}_toFieldTransform(e){const r=t3(this,e,!0),n=this.Sc.map(i=>ru(i,r)),s=new Ed(n);return new Yw(e.path,s)}isEqual(e){return e instanceof w2&&po(this.Sc,e.Sc)}}function r3(t,e,r,n){const s=t.bc(1,e,r);b2("Data must be an object, but it was:",s,n);const i=[],o=qs.empty();Bl(n,(u,h)=>{const f=_2(e,u,r);h=Lr(h);const p=s.mc(f);if(h instanceof rg)i.push(f);else{const x=ru(h,p);x!=null&&(i.push(f),o.set(f,x))}});const l=new la(i);return new ZC(o,l,s.fieldTransforms)}function n3(t,e,r,n,s,i){const o=t.bc(1,e,r),l=[V1(e,n,r)],u=[s];if(i.length%2!=0)throw new ct(Ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<i.length;x+=2)l.push(V1(e,i[x])),u.push(i[x+1]);const h=[],f=qs.empty();for(let x=l.length-1;x>=0;--x)if(!o3(h,l[x])){const v=l[x];let w=u[x];w=Lr(w);const b=o.mc(v);if(w instanceof rg)h.push(v);else{const _=ru(w,b);_!=null&&(h.push(v),f.set(v,_))}}const p=new la(h);return new ZC(f,p,o.fieldTransforms)}function s3(t,e,r,n=!1){return ru(r,t.bc(n?4:3,e))}function ru(t,e){if(i3(t=Lr(t)))return b2("Unsupported field value:",e,t),a3(t,e);if(t instanceof tu)return function(n,s){if(!e3(s.Ic))throw s.gc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(n,s){const i=[];let o=0;for(const l of n){let u=ru(l,s.fc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=Lr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return q9(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=tn.fromDate(n);return{timestampValue:Qp(s.serializer,i)}}if(n instanceof tn){const i=new tn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Qp(s.serializer,i)}}if(n instanceof Zx)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Vc)return{bytesValue:yC(s.serializer,n._byteString)};if(n instanceof es){const i=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw s.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zw(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof eg)return function(o,l){return{mapValue:{fields:{[XA]:{stringValue:YA},[Gp]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.gc("VectorValues must only contain numeric values.");return Xw(l.serializer,h)})}}}}}}(n,s);throw s.gc(`Unsupported field value: ${Qx(n)}`)}(t,e)}function a3(t,e){const r={};return $A(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bl(t,(n,s)=>{const i=ru(s,e.Ac(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function i3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tn||t instanceof Zx||t instanceof Vc||t instanceof es||t instanceof tu||t instanceof eg)}function b2(t,e,r){if(!i3(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=Qx(r);throw n==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+n)}}function V1(t,e,r){if((e=Lr(e))instanceof Yd)return e._internalPath;if(typeof e=="string")return _2(t,e);throw rx("Field path arguments must be of type string or ",t,!1,void 0,r)}const tB=new RegExp("[~\\*/\\[\\]]");function _2(t,e,r){if(e.search(tB)>=0)throw rx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Yd(...e.split("."))._internalPath}catch{throw rx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function rx(t,e,r,n,s){const i=n&&!n.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${n}`),o&&(u+=` in document ${s}`),u+=")"),new ct(Ve.INVALID_ARGUMENT,l+t+u)}function o3(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new es(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(ng("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class rB extends N2{data(){return super.data()}}function ng(t,e){return typeof e=="string"?_2(t,e):e instanceof Yd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ct(Ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class E2{}class m0 extends E2{}function nr(t,e,...r){let n=[];e instanceof E2&&n.push(e),n=n.concat(r),function(i){const o=i.filter(u=>u instanceof sg).length,l=i.filter(u=>u instanceof p0).length;if(o>1||o>0&&l>0)throw new ct(Ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class p0 extends m0{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new p0(e,r,n)}_apply(e){const r=this._parse(e);return c3(e._query,r),new ci(e.firestore,e.converter,A1(e._query,r))}_parse(e){const r=Qd(e.firestore);return function(i,o,l,u,h,f,p){let x;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new ct(Ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){wk(p,f);const w=[];for(const b of p)w.push(yk(u,i,b));x={arrayValue:{values:w}}}else x=yk(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||wk(p,f),x=s3(l,o,p,f==="in"||f==="not-in");return wn.create(h,f,x)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function yr(t,e,r){const n=e,s=ng("where",t);return p0._create(s,n,r)}class sg extends E2{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new sg(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:ii.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)c3(o,u),o=A1(o,u)}(e._query,r),new ci(e.firestore,e.converter,A1(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ag extends m0{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new ag(e,r)}_apply(e){const r=function(s,i,o){if(s.startAt!==null)throw new ct(Ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ct(Ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cf(i,o)}(e._query,this._field,this._direction);return new ci(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Jc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function ca(t,e="asc"){const r=e,n=ng("orderBy",t);return ag._create(n,r)}class ig extends m0{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new ig(e,r,n)}_apply(e){return new ci(e.firestore,e.converter,Xp(e._query,this._limit,this._limitType))}}function no(t){return YV("limit",t),ig._create("limit",t,"F")}class og extends m0{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new og(e,r,n)}_apply(e){const r=nB(e,this.type,this._docOrFields,this._inclusive);return new ci(e.firestore,e.converter,function(s,i){return new Jc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,r))}}function B1(...t){return og._create("startAfter",t,!1)}function nB(t,e,r,n){if(r[0]=Lr(r[0]),r[0]instanceof N2)return function(i,o,l,u,h){if(!u)throw new ct(Ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const f=[];for(const p of ud(i))if(p.field.isKeyField())f.push(Kp(o,u.key));else{const x=u.data.field(p.field);if(Vx(x))throw new ct(Ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(x===null){const v=p.field.canonicalString();throw new ct(Ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}f.push(x)}return new _d(f,h)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=Qd(t.firestore);return function(o,l,u,h,f,p){const x=o.explicitOrderBy;if(f.length>x.length)throw new ct(Ve.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let w=0;w<f.length;w++){const b=f[w];if(x[w].field.isKeyField()){if(typeof b!="string")throw new ct(Ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof b}`);if(!Kw(o)&&b.indexOf("/")!==-1)throw new ct(Ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${b}' contains a slash.`);const _=o.path.child(Er.fromString(b));if(!_t.isDocumentKey(_))throw new ct(Ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const R=new _t(_);v.push(Kp(l,R))}else{const _=s3(u,h,b);v.push(_)}}return new _d(v,p)}(t._query,t.firestore._databaseId,s,e,r,n)}}function yk(t,e,r){if(typeof(r=Lr(r))=="string"){if(r==="")throw new ct(Ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kw(e)&&r.indexOf("/")!==-1)throw new ct(Ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Er.fromString(r));if(!_t.isDocumentKey(n))throw new ct(Ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Kp(t,new _t(n))}if(r instanceof es)return Kp(t,r._key);throw new ct(Ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qx(r)}.`)}function wk(t,e){if(!Array.isArray(t)||t.length===0)throw new ct(Ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function c3(t,e){const r=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ct(Ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ct(Ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class u3{convertValue(e,r="none"){switch(kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Sl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ct(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Bl(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r[Gp].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(o=>un(o.doubleValue));return new eg(i)}convertGeoPoint(e){return new Zx(un(e.latitude),un(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Bx(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(jf(e));default:return null}}convertTimestamp(e){const r=El(e);return new tn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Er.fromString(e);dr(SC(n),9688,{name:e});const s=new yd(n.get(1),n.get(3)),i=new _t(n.popFirst(5));return s.isEqual(r)||vo(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class k2 extends N2{constructor(e,r,n,s,i,o){super(e,r,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(ng("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class lf extends k2{data(e={}){return super.data(e)}}class T2{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new ed(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new lf(this._firestore,this._userDataWriter,n.key,n,new ed(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ct(Ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new lf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ed(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new lf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ed(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:sB(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function sB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t){t=vs(t,es);const e=vs(t.firestore,oi);return KV(Xd(e),t._key).then(r=>d3(e,t,r))}class j2 extends u3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new es(this.firestore,null,r)}}function zt(t){t=vs(t,ci);const e=vs(t.firestore,oi),r=Xd(e),n=new j2(e);return l3(t._query),XV(r,t._query).then(s=>new T2(e,n,t,s))}function Sn(t,e,r){t=vs(t,es);const n=vs(t.firestore,oi),s=S2(t.converter,e,r);return Zd(n,[g2(Qd(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Is.none())])}function Un(t,e,r,...n){t=vs(t,es);const s=vs(t.firestore,oi),i=Qd(s);let o;return o=typeof(e=Lr(e))=="string"||e instanceof Yd?n3(i,"updateDoc",t._key,e,r,n):r3(i,"updateDoc",t._key,e),Zd(s,[o.toMutation(t._key,Is.exists(!0))])}function lg(t){return Zd(vs(t.firestore,oi),[new qx(t._key,Is.none())])}function x0(t,e){const r=vs(t.firestore,oi),n=bt(t),s=S2(t.converter,e);return Zd(r,[g2(Qd(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Is.exists(!1))]).then(()=>n)}function Jd(t,...e){var r,n,s;t=Lr(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||vk(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(vk(e[o])){const p=e[o];e[o]=(r=p.next)===null||r===void 0?void 0:r.bind(p),e[o+1]=(n=p.error)===null||n===void 0?void 0:n.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let u,h,f;if(t instanceof es)h=vs(t.firestore,oi),f=Ux(t._key.path),u={next:p=>{e[o]&&e[o](d3(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=vs(t,ci);h=vs(p.firestore,oi),f=p._query;const x=new j2(h);u={next:v=>{e[o]&&e[o](new T2(h,x,p,v))},error:e[o+1],complete:e[o+2]},l3(t._query)}return function(x,v,w,b){const _=new x2(b),R=new f2(v,_,w);return x.asyncQueue.enqueueAndForget(async()=>u2(await tx(x),R)),()=>{_.xu(),x.asyncQueue.enqueueAndForget(async()=>d2(await tx(x),R))}}(Xd(h),f,l,u)}function Zd(t,e){return function(n,s){const i=new io;return n.asyncQueue.enqueueAndForget(async()=>LV(await GV(n),s,i)),i.promise}(Xd(t),e)}function d3(t,e,r){const n=r.docs.get(e._key),s=new j2(t);return new k2(t,s,e._key,n,new ed(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Qd(e)}set(e,r,n){this._verifyNotCommitted();const s=Ey(e,this._firestore),i=S2(s.converter,r,n),o=g2(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(o.toMutation(s._key,Is.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=Ey(e,this._firestore);let o;return o=typeof(r=Lr(r))=="string"||r instanceof Yd?n3(this._dataReader,"WriteBatch.update",i._key,r,n,s):r3(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(o.toMutation(i._key,Is.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Ey(e,this._firestore);return this._mutations=this._mutations.concat(new qx(r._key,Is.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ct(Ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ey(t,e){if((t=Lr(t)).firestore!==e)throw new ct(Ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Ft(){return new v2("serverTimestamp")}function f3(...t){return new y2("arrayUnion",t)}function m3(...t){return new w2("arrayRemove",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t){return Xd(t=vs(t,oi)),new h3(t,e=>Zd(t,e))}(function(e,r=!0){(function(s){Wd=s})(Hd),gd(new Rc("firestore",(n,{instanceIdentifier:s,options:i})=>{const o=n.getProvider("app").getImmediate(),l=new oi(new i9(n.getProvider("auth-internal")),new c9(o,n.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ct(Ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yd(h.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:r},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),wl(_S,NS,e),wl(_S,NS,"esm2017")})();const Td=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:u3,Bytes:Vc,CollectionReference:oo,DocumentReference:es,DocumentSnapshot:k2,FieldPath:Yd,FieldValue:tu,Firestore:oi,FirestoreError:ct,GeoPoint:Zx,Query:ci,QueryCompositeFilterConstraint:sg,QueryConstraint:m0,QueryDocumentSnapshot:lf,QueryFieldFilterConstraint:p0,QueryLimitConstraint:ig,QueryOrderByConstraint:ag,QuerySnapshot:T2,QueryStartAtConstraint:og,SnapshotMetadata:ed,Timestamp:tn,VectorValue:eg,WriteBatch:h3,_AutoId:$w,_ByteString:zn,_DatabaseId:yd,_DocumentKey:_t,_EmptyAuthCredentialsProvider:BA,_FieldPath:On,_cast:vs,_logWarn:Oc,_validateIsNotUsedTogether:XC,addDoc:x0,arrayRemove:m3,arrayUnion:f3,collection:Dt,connectFirestoreEmulator:QC,deleteDoc:lg,doc:bt,ensureFirestoreConfigured:Xd,executeWrite:Zd,getDoc:ur,getDocs:zt,getFirestore:JC,limit:no,onSnapshot:Jd,orderBy:ca,query:nr,serverTimestamp:Ft,setDoc:Sn,startAfter:B1,updateDoc:Un,where:yr,writeBatch:g0},Symbol.toStringTag,{value:"Module"})),aB="modulepreload",iB=function(t){return"/"+t},bk={},Vn=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let o=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=o(r.map(h=>{if(h=iB(h),h in bk)return;bk[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":aB,f||(x.as="script"),x.crossOrigin="",x.href=h,u&&x.setAttribute("nonce",u),document.head.appendChild(x),f)return new Promise((v,w)=>{x.addEventListener("load",v),x.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var oB="firebase",lB="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wl(oB,lB,"app");const cB=()=>{{const t={apiKey:"AIzaSyC35sH38k9co_R0zBsbDT0S6RE1Cp-ksHE",authDomain:"israel-cyber-academy.firebaseapp.com",projectId:"israel-cyber-academy",storageBucket:"israel-cyber-academy.appspot.com",messagingSenderId:"750693821908",appId:"1:750693821908:web:6518d1facad1d8095cfa41"},r=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"].filter(n=>!t[n]);if(r.length>0)throw console.error(" Missing required Firebase environment variables:",r),new Error(`Missing required Firebase environment variables: ${r.join(", ")}`);return t}},U1=cB(),np=!1,z1=!0,uB=window.location.hostname.includes("github.io");console.log(" Firebase Config Status:",{projectId:U1.projectId,authDomain:U1.authDomain,mode:"PRODUCTION",usingEnvVars:z1,isGitHubPages:uB,secure:z1});console.log(" Using secure environment variables for Firebase config");let $1;try{$1=Gj(U1),console.log(" Firebase app initialized successfully")}catch(t){throw console.error(" Firebase app initialization failed:",t),t.code==="app/duplicate-app"?console.error(" Solution: Firebase app already initialized. Check for duplicate initialization."):t.message.includes("Invalid API key")?console.error(" Solution: Check your VITE_FIREBASE_API_KEY environment variable."):t.message.includes("Invalid project ID")&&console.error(" Solution: Check your VITE_FIREBASE_PROJECT_ID environment variable."),t}let Ja,He;try{Ja=n9($1),He=JC($1),console.log(" Firebase services initialized:",{auth:!!Ja,firestore:!!He,mode:np?"DEVELOPMENT":"PRODUCTION",secure:z1||np,emulators:np&&!1})}catch(t){throw console.error(" Firebase services initialization failed:",t),t}const jd=Object.freeze(Object.defineProperty({__proto__:null,get auth(){return Ja},get db(){return He}},Symbol.toStringTag,{value:"Module"})),Qr={STUDENT:"student",TEACHER:"teacher",ADMIN:"admin"},_k={[Qr.STUDENT]:1,[Qr.TEACHER]:2,[Qr.ADMIN]:3},dB={student_lesson_access:{roles:[Qr.STUDENT,Qr.TEACHER,Qr.ADMIN],description:"Access to lesson content"},student_profile_update:{roles:[Qr.STUDENT,Qr.ADMIN],description:"Update student profile"},teacher_dashboard_access:{roles:[Qr.TEACHER,Qr.ADMIN],description:"Access to teacher dashboard"},teacher_notes_access:{roles:[Qr.TEACHER,Qr.ADMIN],description:"Access to teacher notes"},class_management:{roles:[Qr.TEACHER,Qr.ADMIN],description:"Create and manage classes"},student_assignment:{roles:[Qr.TEACHER,Qr.ADMIN],description:"Assign students to classes"},analytics_access:{roles:[Qr.TEACHER,Qr.ADMIN],description:"Access to student analytics"},user_management:{roles:[Qr.ADMIN],description:"Manage all users"},system_configuration:{roles:[Qr.ADMIN],description:"Configure system settings"},security_logs_access:{roles:[Qr.ADMIN],description:"Access to security logs"}},hB=(t,e)=>{if(!t||!t.role)return!1;const r=_k[t.role],n=_k[e];return r>=n},cg=t=>hB(t,Qr.TEACHER),A2=(t,e)=>{if(!t)return{success:!1,message:"User not authenticated",code:"AUTH_REQUIRED"};if(!t.role)return{success:!1,message:"User role not defined",code:"ROLE_MISSING"};if(!cg(t))return{success:!1,message:"Teacher access required",code:"INSUFFICIENT_PERMISSIONS"};const r=dB[e];return r&&!r.roles.includes(t.role)?{success:!1,message:`Operation '${e}' not allowed for role '${t.role}'`,code:"OPERATION_NOT_ALLOWED"}:{success:!0,message:"Access granted",code:"ACCESS_GRANTED"}},Ir=async(t,e={},r={})=>{try{const n={type:t,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,...e,...r};try{await x0(Dt(He,"security_logs"),n)}catch(s){console.error("Failed to log security event to Firebase:",s)}window.gtag&&window.gtag("event","security_event",{event_category:"security",event_label:t,value:1})}catch(n){console.error("Error logging security event:",n)}},p3=async(t,e)=>{try{const r=Dt(He,"classes"),n=bt(r),s={id:n.id,name:t.name,description:t.description,teacherId:e,studentIds:[],maxStudents:t.maxStudents||30,isActive:!0,createdAt:Ft(),updatedAt:Ft()};if(t.initialLesson){const l=new Date().toISOString();s.currentLesson=parseInt(t.initialLesson),s.lessonStartDate=l,s.unlockedLessons=[{lessonId:parseInt(t.initialLesson),unlockedAt:l,unlockedBy:e,unlockedByTeacher:"System (Class Creation)"}]}await Sn(n,s);const i=bt(He,"users",e),o=await ur(i);if(o.exists()){const u=[...o.data().teacherClasses||[],n.id];await Un(i,{teacherClasses:u,updatedAt:Ft()})}return await wo(e,{type:"class_created",title:"  ",description:` "${t.name}"  `,metadata:{classId:n.id,className:t.name,maxStudents:t.maxStudents||30}}),s}catch(r){throw r}},zl=async t=>{try{const e=Dt(He,"classes"),r=nr(e,yr("teacherId","==",t)),n=await zt(r),s=[];return n.forEach(i=>{var l,u;const o=i.data();s.push({id:i.id,...o,createdAt:(l=o.createdAt)==null?void 0:l.toDate(),updatedAt:(u=o.updatedAt)==null?void 0:u.toDate()})}),s.sort((i,o)=>{const l=i.createdAt||new Date(0);return(o.createdAt||new Date(0))-l}),s}catch(e){throw e}},x3=async(t,e,r)=>{try{const n=bt(He,"classes",t),s=await ur(n);if(!s.exists())throw new Error("Class not found");const i=s.data();await Un(n,{...e,updatedAt:Ft()});const o=[];return e.name&&e.name!==i.name&&o.push(` : "${i.name}"  "${e.name}"`),e.description&&e.description!==i.description&&o.push("  "),e.maxStudents&&e.maxStudents!==i.maxStudents&&o.push(`   : ${i.maxStudents}  ${e.maxStudents}`),o.length>0&&await wo(r,{type:"class_edited",title:" ",description:` "${e.name||i.name}" : ${o.join(", ")}`,metadata:{classId:t,className:e.name||i.name,changes:o,originalData:i,updatedData:e}}),!0}catch(n){throw n}},g3=async(t,e)=>{var r,n;try{const s=g0(He),i=bt(He,"classes",t),o=await ur(i);if(!o.exists())throw new Error("Class not found");const l=o.data();if(l.studentIds&&l.studentIds.length>0)for(const f of l.studentIds){const p=bt(He,"users",f);s.update(p,{classId:null,teacherId:null,updatedAt:Ft()})}const u=bt(He,"users",e),h=await ur(u);if(h.exists()){const p=(h.data().teacherClasses||[]).filter(x=>x!==t);s.update(u,{teacherClasses:p,updatedAt:Ft()})}return s.delete(i),await s.commit(),await wo(e,{type:"class_deleted",title:" ",description:` "${l.name}" . ${((r=l.studentIds)==null?void 0:r.length)||0}   .`,metadata:{classId:t,className:l.name,studentsRemoved:((n=l.studentIds)==null?void 0:n.length)||0}}),!0}catch(s){throw s}},C2=async t=>{try{const e=Dt(He,"users"),r=nr(e,yr("classId","==",t)),n=await zt(r),s=[];return n.forEach(i=>{var l,u,h,f,p,x;const o=i.data();s.push({uid:i.id,displayName:o.displayName||o.email,email:o.email,role:o.role,classId:o.classId,progress:o.progress||0,completedLessons:o.completedLessons||[],totalTimeSpent:o.totalTimeSpent||0,lastActivityAt:((h=(u=(l=o.lastActivityAt)==null?void 0:l.toDate)==null?void 0:u.call(l))==null?void 0:h.toISOString())||null,createdAt:((x=(p=(f=o.createdAt)==null?void 0:f.toDate)==null?void 0:p.call(f))==null?void 0:x.toISOString())||new Date().toISOString()})}),s.sort((i,o)=>{const l=(i.displayName||"").toLowerCase(),u=(o.displayName||"").toLowerCase();return l.localeCompare(u)}),s}catch(e){throw e}},v0=async t=>{var e,r,n,s,i,o;try{const l=await zl(t),u=new Set;l.forEach(f=>{f.studentIds&&Array.isArray(f.studentIds)&&f.studentIds.forEach(p=>u.add(p))});const h=[];for(const f of u){const p=bt(He,"users",f),x=await ur(p);if(x.exists()){const v=x.data();h.push({uid:x.id,displayName:v.displayName||v.email,email:v.email,role:v.role,classId:v.classId,teacherId:v.teacherId,progress:v.progress||0,completedLessons:v.completedLessons||[],totalTimeSpent:v.totalTimeSpent||0,lastActivityAt:((n=(r=(e=v.lastActivityAt)==null?void 0:e.toDate)==null?void 0:r.call(e))==null?void 0:n.toISOString())||null,createdAt:((o=(i=(s=v.createdAt)==null?void 0:s.toDate)==null?void 0:i.call(s))==null?void 0:o.toISOString())||new Date().toISOString()})}}return h.sort((f,p)=>{const x=(f.displayName||"").toLowerCase(),v=(p.displayName||"").toLowerCase();return x.localeCompare(v)}),h}catch(l){throw console.error("Error in getTeacherStudents:",l),l}},v3=async t=>{try{return!0}catch(e){throw e}},y3=async t=>{try{const e=await C2(t),r={totalStudents:e.length,activeStudents:0,averageProgress:0,lessonCompletion:{},averageTimeSpent:0,topPerformers:[],strugglingStudents:[]};let n=0,s=0,i=0;if(e.forEach(o=>{const l=o.progress||{},u=o.completedLessons||[],h=o.totalTimeSpent||0,f=o.lastActivityAt||o.lastActivityDate;if(f){let x;if(typeof f=="object"&&f.toDate)x=f.toDate();else if(typeof f=="string")x=new Date(f);else if(f instanceof Date)x=f;else return;(new Date-x)/(1e3*60*60*24)<=7&&i++}const p=u.length/9*100;n+=p,s+=h,u.forEach(x=>{r.lessonCompletion[x]=(r.lessonCompletion[x]||0)+1})}),e.length>0){r.activeStudents=i,r.averageProgress=n/e.length,r.averageTimeSpent=s/e.length;const o=e.sort((l,u)=>{const h=(l.completedLessons||[]).length;return(u.completedLessons||[]).length-h});r.topPerformers=o.slice(0,3),r.strugglingStudents=o.slice(-3).reverse()}return r}catch(e){throw e}},w3=async t=>{try{const e=await zl(t),r=await v0(t),n={totalClasses:e.length,totalStudents:r.length,activeClasses:0,averageClassSize:0,overallStudentProgress:0,lessonEngagement:{},timeSpentDistribution:{low:0,medium:0,high:0}};let s=0,i=0;for(const o of e){const l=await y3(o.id);l.activeStudents>0&&i++,s+=l.averageProgress,Object.entries(l.lessonCompletion).forEach(([u,h])=>{n.lessonEngagement[u]=(n.lessonEngagement[u]||0)+h})}return r.forEach(o=>{const l=o.totalTimeSpent||0;l<=30?n.timeSpentDistribution.low++:l<=120?n.timeSpentDistribution.medium++:n.timeSpentDistribution.high++}),e.length>0&&(n.activeClasses=i,n.averageClassSize=r.length/e.length,n.overallStudentProgress=s/e.length),n}catch(e){throw e}},b3=async()=>{try{const t=Dt(He,"users"),e=nr(t,yr("role","==","student")),r=await zt(e),n=[];return r.forEach(s=>{const i=s.data();n.push({id:s.id,...i,assignedToClass:!!i.classId,assignedToTeacher:!!i.teacherId})}),n.sort((s,i)=>{const o=s.displayName||s.email||"",l=i.displayName||i.email||"";return o.localeCompare(l)}),n}catch(t){throw t}},_3=async(t,e,r)=>{try{const n=g0(He),s=bt(He,"classes",t),i=await ur(s);if(!i.exists())throw new Error("Class not found");const o=i.data();n.update(s,{studentIds:e,updatedAt:Ft()});for(const h of e){const f=bt(He,"users",h);n.update(f,{classId:t,teacherId:r,updatedAt:Ft()})}const l=o.studentIds||[],u=l.filter(h=>!e.includes(h));for(const h of u){const f=bt(He,"users",h);n.update(f,{classId:null,teacherId:null,updatedAt:Ft()})}if(await n.commit(),e.length>l.length){const h=e.filter(f=>!l.includes(f));h.length>0&&await wo(r,{type:"student_added",title:"  ",description:`${h.length}    "${o.name}"`,metadata:{classId:t,className:o.name,studentsAdded:h.length,studentIds:h}})}return u.length>0&&await wo(r,{type:"student_removed",title:"  ",description:`${u.length}    "${o.name}"`,metadata:{classId:t,className:o.name,studentsRemoved:u.length,studentIds:u}}),!0}catch(n){throw n}},wo=async(t,e)=>{try{const r=Dt(He,"teacherActivities"),n={teacherId:t,type:e.type,title:e.title,description:e.description,metadata:e.metadata||{},timestamp:Ft(),read:!1};await x0(r,n)}catch{}},I2=async(t,e=10)=>{try{const r=Dt(He,"teacherActivities"),n=nr(r,yr("teacherId","==",t)),s=await zt(n),i=[];return s.forEach(o=>{var u;const l=o.data();i.push({id:o.id,...l,timestamp:((u=l.timestamp)==null?void 0:u.toDate())||new Date})}),i.sort((o,l)=>l.timestamp-o.timestamp),i.slice(0,e)}catch{return[]}},N3=async(t,e,r)=>{try{const n=String(e),s=Dt(He,"teacherNotes"),i=nr(s,yr("teacherId","==",t),yr("lessonId","==",n),yr("slideId","==",r)),o=await zt(i);if(o.empty)return null;const l=o.docs[0];return{id:l.id,...l.data()}}catch(n){throw n}},E3=async(t,e,r,n)=>{try{const s=Dt(He,"teacherNotes"),i=await N3(t,e,r);if(i){const o=bt(He,"teacherNotes",i.id);return await Un(o,{content:n.content,slideIndex:n.slideIndex,updatedAt:Ft()}),await wo(t,{type:"notes_updated",title:" ",description:`  ${e},  ${r} `,metadata:{lessonId:e,slideId:r,contentLength:n.content.length}}),{id:i.id,...n}}else{const o={teacherId:t,lessonId:e,slideId:r,slideIndex:n.slideIndex,content:n.content,createdAt:Ft(),updatedAt:Ft()},l=await x0(s,o);return await wo(t,{type:"notes_created",title:" ",description:`    ${e},  ${r}`,metadata:{lessonId:e,slideId:r,contentLength:n.content.length}}),{id:l.id,...o}}}catch(s){throw s}},ug=async(t,e)=>{try{const r=String(e),n=Dt(He,"teacherNotes"),s=nr(n,yr("teacherId","==",t),yr("lessonId","==",r)),i=await zt(s),o=[];return i.forEach(l=>{const u=l.data();o.push({id:l.id,teacherId:u.teacherId,lessonId:u.lessonId,slideId:u.slideId,slideIndex:u.slideIndex||0,content:u.content,createdAt:u.createdAt,updatedAt:u.updatedAt})}),o}catch(r){throw r}},fB=async(t,e)=>{try{const r=Dt(He,"teacherNotes"),n=nr(r,yr("lessonId","==",String(t))),s=await zt(n),i=[];if(s.forEach(o=>{const l=o.data();e.includes(l.slideId)||i.push({id:o.id,...l})}),i.length>0)for(const o of i)await lg(bt(He,"teacherNotes",o.id));return i.length}catch(r){throw r}},mB=Object.freeze(Object.defineProperty({__proto__:null,assignStudentsToClass:_3,cleanupTeacherNotesForLesson:fB,createClass:p3,deleteClass:g3,getAllStudents:b3,getClassAnalytics:y3,getClassStudents:C2,getTeacherAnalytics:w3,getTeacherClasses:zl,getTeacherNotes:N3,getTeacherNotesForLesson:ug,getTeacherRecentActivities:I2,getTeacherStudents:v0,grantTeacherLessonAccess:v3,logTeacherActivity:wo,saveTeacherNotes:E3,updateClass:x3},Symbol.toStringTag,{value:"Module"})),S3=S.createContext(),Nk="maxibunnyshow@gmail.com",Fa=()=>{const t=S.useContext(S3);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},pB=({children:t})=>{const[e,r]=S.useState(null),[n,s]=S.useState(null),[i,o]=S.useState(!0),l=D=>typeof D=="string"&&D.startsWith("lesson-")?D:typeof D=="number"||!isNaN(parseInt(D))?`lesson-${parseInt(D)}`:D,u=async(D,G,Q,ue="student",H={})=>{try{D===Nk&&(ue="system_manager");const te=await dS(Ja,D,G);let K=Q;(!K||K===" ")&&(ue==="system_manager"?K=" ":K=(H.sex||"male")==="female"?" ":" "),await vy(te.user,{displayName:K});const ce={uid:te.user.uid,email:te.user.email,displayName:K,role:ue,firstName:H.firstName||"",lastName:H.lastName||"",age:H.age?parseInt(H.age):null,sex:H.sex||"male",...ue==="system_manager"&&{systemManagerPermissions:["manage_users","manage_content","manage_system","view_logs","import_data","export_data"],systemManagerSettings:{defaultLanguage:"he",notificationPreferences:{emailNotifications:!0,systemAlerts:!0,userActivityReports:!0}}},...ue==="student"&&{progress:{1:{completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date}},completedLessons:[],currentLesson:1,totalTimeSpent:0,totalPagesEngaged:0,achievements:[],streak:0,classId:null,teacherId:null},...ue==="teacher"&&{teacherClasses:[],teacherPermissions:["manage_students","view_analytics","add_comments"],teacherSettings:{defaultClassId:null,notificationPreferences:{emailNotifications:!0,studentProgressAlerts:!0,classUpdates:!0}},progress:{},completedLessons:[],currentLesson:1,totalTimeSpent:0,totalPagesEngaged:0,achievements:[],streak:0},createdAt:new Date,lastLogin:new Date,lastActivityDate:new Date,updatedAt:new Date};if(await Sn(bt(He,"users",te.user.uid),ce),ue==="teacher")try{await v3(te.user.uid),console.log(" Teacher lesson access granted for new teacher")}catch(U){console.warn(" Failed to grant teacher lesson access:",U)}return te}catch(te){throw te}},h=async(D,G)=>{try{const Q=Dt(He,"users"),ue=nr(Q,yr("email","==",D.toLowerCase())),H=await zt(ue);if(!H.empty){const K=H.docs[0],ce=K.data();if(ce.password&&ce.password===G&&!ce.hasFirebaseAuth){console.log(" Creating Firebase Auth account for system-created user:",D);try{const U=await dS(Ja,D,G);return await vy(U.user,{displayName:ce.displayName}),await Un(bt(He,"users",K.id),{hasFirebaseAuth:!0,firebaseUid:U.user.uid,lastLogin:Ft(),updatedAt:Ft()}),console.log(" Firebase Auth account created for system-created user"),s({...ce,uid:U.user.uid,hasFirebaseAuth:!0,firebaseUid:U.user.uid}),U}catch(U){throw console.error(" Error creating Firebase Auth account:",U),new Error("   ")}}}const te=await VO(Ja,D,G);if(D===Nk){const K=bt(He,"users",te.user.uid),ce=await ur(K);ce.exists()&&ce.data().role!=="system_manager"&&await Un(K,{role:"system_manager",systemManagerPermissions:["manage_users","manage_content","manage_system","view_logs","import_data","export_data"],systemManagerSettings:{defaultLanguage:"he",notificationPreferences:{emailNotifications:!0,systemAlerts:!0,userActivityReports:!0}},updatedAt:new Date})}if(te.user){const K=bt(He,"users",te.user.uid),ce=await ur(K);if(ce.exists()){const U=ce.data();let M=!1,X={...U};(typeof U.progress!="object"||Array.isArray(U.progress)||U.progress===null)&&(X.progress={1:{completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date}},M=!0),Array.isArray(U.completedLessons)||(X.completedLessons=[],M=!0),M&&(await Sn(K,X,{merge:!0}),console.log(" Fixed user profile structure in Firestore"));const Y={...X,firstName:X.firstName||"",lastName:X.lastName||"",age:X.age||null,sex:X.sex||"male",displayName:X.displayName||(X.sex==="female"?" ":" ")};s(Y)}}return te}catch(Q){throw Q}},f=async(D,G,Q=0,ue=!1,H=null,te=null,K=null,ce=null)=>{const U=ce||e;if(!U)return console.error(" No current user available for progress update"),console.error(" currentUser:",e),console.error(" userOverride:",ce),{success:!1,error:"No current user available"};if(!U.uid)return console.error(" User object has no UID"),console.error(" userToUse:",U),{success:!1,error:"User object has no UID"};let M="student";try{const X=bt(He,"users",U.uid),Y=await ur(X);Y.exists()&&(M=Y.data().role||"student")}catch(X){console.error(" Error getting user role:",X)}if(M!=="student")return console.log(` Progress tracking blocked for ${M} role (UID: ${U.uid})`),{success:!0,data:{blocked:!0,reason:`Progress tracking not allowed for ${M} role`}};console.log(" updateUserProgress called with:",{lessonId:D,completed:G,score:Q,temporary:ue,lastSlide:H,slideId:te,allSlideIds:K,currentUser:e==null?void 0:e.uid,userOverride:ce==null?void 0:ce.uid,userToUse:U==null?void 0:U.uid,userRole:M});try{const X=bt(He,"users",U.uid),Y=await ur(X);if(Y.exists()){const Z=Y.data(),fe=Z.progress||{},ie=l(D);fe[ie]||(fe[ie]={completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date});const me=G?0:H!==null?H:fe[ie].lastSlide;if(fe[ie]={...fe[ie],completed:G,score:Q,completedAt:G?new Date:fe[ie].completedAt,temporary:!!(ue&&!G),lastActivity:new Date,lastSlide:me},te&&fe[ie].pagesEngaged&&(fe[ie].pagesEngaged.includes(te)||(fe[ie].pagesEngaged=[...fe[ie].pagesEngaged,te])),G&&K&&Array.isArray(K)){const se=fe[ie].pagesEngaged||[],ve=[...new Set([...se,...K])];fe[ie].pagesEngaged=ve,console.log(` All slides marked as engaged for lesson ${ie}: ${ve.length} slides`)}let pe=0,we=0;Object.values(fe).forEach(se=>{se.pagesEngaged&&Array.isArray(se.pagesEngaged)&&(we+=se.pagesEngaged.length,pe+=se.pagesEngaged.length*3)});const Xe=Z.completedLessons||[],re=Z.currentLesson||1;let Ze=Xe,Fe=re;G&&(Xe.includes(ie)||(Ze=[...Xe,ie],console.log(` Lesson ${ie} completed and added to completedLessons`)),console.log(` Lesson ${ie} completed - waiting for teacher to unlock next lesson`));const ge=Z.achievements||[],be=[...ge];return G&&(ie==="lesson1"||D===1)&&!ge.includes("first_lesson")&&(be.push("first_lesson"),console.log(" Achievement unlocked: First Lesson Completed!")),G&&Ze.length>=3&&!ge.includes("three_lessons")&&(be.push("three_lessons"),console.log(" Achievement unlocked: Three Lessons Completed!")),pe>=60&&!ge.includes("one_hour")&&(be.push("one_hour"),console.log(" Achievement unlocked: One Hour of Learning!")),await Sn(X,{progress:fe,completedLessons:Ze,currentLesson:Fe,lastActivityDate:new Date,totalTimeSpent:pe,totalPagesEngaged:we,achievements:be},{merge:!0}),s(se=>({...se,progress:fe,completedLessons:Ze,currentLesson:Fe,lastActivityDate:new Date,totalTimeSpent:pe,totalPagesEngaged:we,achievements:be})),{success:!0,data:{progress:fe,completedLessons:Ze}}}else return console.error(" User document does not exist in Firestore"),{success:!1,error:"User document not found"}}catch(X){return console.error(" Error updating user progress:",X),{success:!1,error:X.message}}},p=async(D,G)=>{if(e)try{const Q=bt(He,"users",e.uid),ue=await ur(Q);if(ue.exists()){const H=ue.data(),te=H.role||"student";if(te!=="student"){console.log(` Slide engagement tracking blocked for ${te} role (UID: ${e.uid})`);return}const K=H.progress||{},ce=l(D);if(K[ce]||(K[ce]={completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date}),K[ce].pagesEngaged||(K[ce].pagesEngaged=[]),!K[ce].pagesEngaged.includes(G)){K[ce].pagesEngaged=[...K[ce].pagesEngaged,G],K[ce].lastActivity=new Date;let U=0,M=0;Object.values(K).forEach(X=>{X.pagesEngaged&&Array.isArray(X.pagesEngaged)&&(M+=X.pagesEngaged.length,U+=X.pagesEngaged.length*3)}),await Sn(Q,{progress:K,totalTimeSpent:U,totalPagesEngaged:M,lastActivityDate:new Date},{merge:!0}),s(X=>({...X,progress:K,totalTimeSpent:U,totalPagesEngaged:M,lastActivityDate:new Date}))}}}catch(Q){console.error(" Error tracking slide engagement:",Q)}},x=async()=>{if(e)try{const D=bt(He,"users",e.uid),G=await ur(D);if(G.exists()){const Q=G.data(),ue=Q.role||"student";if(ue!=="student"){console.log(` Temporary progress cleanup blocked for ${ue} role (UID: ${e.uid})`);return}const H=Q.progress||{};let te=!1;Object.keys(H).forEach(K=>{H[K].temporary&&(delete H[K],te=!0)}),te&&(await Sn(D,{progress:H},{merge:!0}),s(K=>({...K,progress:H})))}}catch(D){console.error("Error removing temporary progress:",D)}},v=async()=>{try{console.log(" Logging out user..."),await x(),await qO(Ja),r(null),s(null),console.log(" User logged out successfully"),window.location.href="/Israel-cyber-academy/login"}catch(D){console.error(" Error during logout:",D),r(null),s(null),window.location.href="/Israel-cyber-academy/login"}},w=async D=>{if(e)try{await vy(e,{displayName:D});const G=bt(He,"users",e.uid);await Sn(G,{displayName:D,lastActivityDate:new Date},{merge:!0}),s(Q=>({...Q,displayName:D,lastActivityDate:new Date})),console.log(" Display name updated successfully:",D)}catch(G){throw console.error(" Error updating display name:",G),G}},b=async(D,G)=>{if(!e)throw new Error("No user is currently logged in");try{const Q=Qc.credential(e.email,D);await MO(e,Q),await UO(e,G),console.log(" Password changed successfully")}catch(Q){throw console.error(" Error changing password:",Q),Q.code==="auth/wrong-password"?new Error("  "):Q.code==="auth/weak-password"?new Error("      ( 6 )"):Q.code==="auth/requires-recent-login"?new Error("    "):new Error("   ")}},_=D=>{var ue,H;const G=l(D),Q=((H=(ue=n==null?void 0:n.progress)==null?void 0:ue[G])==null?void 0:H.lastSlide)??0;return console.log(` GET LAST SLIDE: Lesson ${D} -> Slide ${Q+1} (using ID: ${G})`),Q},R=async(D,G)=>{if(e)try{const Q=bt(He,"users",e.uid),ue=await ur(Q);if(ue.exists()){const H=ue.data(),te=H.role||"student";if(te!=="student"){console.log(` Slide position saving blocked for ${te} role (UID: ${e.uid})`);return}const K=H.progress||{},ce=l(D);K[ce]||(K[ce]={completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date}),K[ce].lastSlide=G,K[ce].lastActivity=new Date,console.log(" SLIDE POSITION SAVED:",{userId:e.uid,lessonId:ce,originalLessonId:D,slideIndex:G+1,timestamp:new Date().toISOString(),action:"RESUME_POSITION_SAVED"}),await Sn(Q,{progress:K,lastActivityDate:new Date},{merge:!0}),s(U=>({...U,progress:K,lastActivityDate:new Date}))}}catch(Q){console.error(" Error saving slide position:",Q)}};S.useEffect(()=>{console.log(" Setting up authentication listener...");let D=null;return D=WO(Ja,async G=>{var Q,ue;if(console.log(" Auth state changed:",G?`User logged in: ${G.email} (${G.uid})`:"User logged out"),console.log(" Previous currentUser:",e==null?void 0:e.uid),r(G),G){console.log(" Fetching user profile for:",G.email),console.log(" User UID:",G.uid);try{const H=bt(He,"users",G.uid);console.log(" Firestore document reference created");const te=await ur(H);if(console.log(" Firestore document fetch completed"),te.exists()){const K=te.data();let ce=!1,U={...K};if((typeof K.progress!="object"||Array.isArray(K.progress)||K.progress===null)&&(U.progress={lesson1:{completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date},lesson2:{completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date}},ce=!0),Array.isArray(K.completedLessons)||(U.completedLessons=[],ce=!0),ce)try{await Un(H,U),console.log(" Fixed corrupted user profile structure")}catch(X){console.error(" Error fixing user profile:",X)}console.log(" User profile loaded:",U.displayName),console.log(" User data:",{role:U.role,currentLesson:U.currentLesson,completedLessons:((Q=U.completedLessons)==null?void 0:Q.length)||0,progress:Object.keys(U.progress||{}).length});const M={...U,firstName:U.firstName||"",lastName:U.lastName||"",age:U.age||null,sex:U.sex||"male",displayName:U.displayName||(U.sex==="female"?" ":" ")};s(M)}else{console.log(" User profile not found in Firestore - creating new profile");const K={uid:G.uid,email:G.email,displayName:G.displayName||" ",role:G.email.includes("teacher")||(ue=G.displayName)!=null&&ue.includes("")?"teacher":"student",firstName:"",lastName:"",age:null,sex:"male",progress:{1:{completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date}},completedLessons:[],currentLesson:1,createdAt:new Date,lastLogin:new Date,totalTimeSpent:0,totalPagesEngaged:0,achievements:[],streak:0,lastActivityDate:new Date};try{await Sn(H,K),console.log(" New user profile created successfully"),s(K)}catch(ce){console.error(" Error creating user profile:",ce),console.error(" Create error details:",{code:ce.code,message:ce.message}),s(null)}}}catch(H){console.error(" Error fetching user profile:",H),console.error(" Error details:",{code:H.code,message:H.message,stack:H.stack}),H.code==="permission-denied"?(console.error(" This is likely a Firestore security rules issue"),console.error(" Check your Firestore security rules in Firebase Console")):H.code==="not-found"&&(console.error(" Firestore database might not exist"),console.error(" Create Firestore database in Firebase Console")),s(null)}}else console.log(" User signed out, clearing profile"),s(null);o(!1)}),()=>{console.log(" Cleaning up authentication listeners"),D&&(D(),D=null)}},[]),S.useEffect(()=>{if(!e)return;console.log(" Setting up real-time listener for user:",e.uid);const D=bt(He,"users",e.uid),G=Jd(D,Q=>{Q.exists()?(console.log(" Real-time profile update received for:",e.uid),s(Q.data())):console.log(" Real-time listener: User document not found")},Q=>{console.error(" Real-time listener error:",Q)});return()=>{console.log(" Cleaning up real-time profile listener"),G&&G()}},[e==null?void 0:e.uid]);const j=S.useCallback(u,[]),k=S.useCallback(h,[]),F=S.useCallback(v,[]),L=S.useCallback(f,[]),I=S.useCallback(p,[]),N=S.useCallback(R,[]),T=S.useCallback(_,[n]),P=S.useCallback(w,[]),B=S.useCallback(x,[]),z=S.useCallback(b,[]),O=S.useMemo(()=>({currentUser:e,userProfile:n,role:(n==null?void 0:n.role)||null,signup:j,login:k,logout:F,updateUserProgress:L,setLastLessonSlide:N,loading:i,removeTemporaryProgress:B,trackSlideEngagement:I,updateDisplayName:P,getLastLessonSlide:T,changePassword:z}),[e,n,i,j,k,F,L,N,B,I,P,T,z]);return a.jsx(S3.Provider,{value:O,children:!i&&t})};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),k3=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},u)=>S.createElement("svg",{ref:u,...gB,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:k3("lucide",s),...l},[...o.map(([h,f])=>S.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(t,e)=>{const r=S.forwardRef(({className:n,...s},i)=>S.createElement(vB,{ref:i,iconNode:e,className:k3(`lucide-${xB(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=Be("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=Be("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=Be("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=Be("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=Be("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=Be("BellOff",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=Be("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=Be("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=Be("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=Be("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=Be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=Be("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=Be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=Be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=Be("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=Be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=Be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Be("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=Be("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=Be("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=Be("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=Be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=Be("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=Be("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=Be("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=Be("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=Be("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=Be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=Be("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=Be("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=Be("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=Be("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=Be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=Be("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=Be("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=Be("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=Be("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=Be("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=Be("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=Be("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=Be("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=Be("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=Be("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=Be("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=Be("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=Be("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=Be("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=Be("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=Be("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=Be("LockKeyholeOpen",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{width:"18",height:"12",x:"3",y:"10",rx:"2",key:"l0tzu3"}],["path",{d:"M7 10V7a5 5 0 0 1 9.33-2.5",key:"car5b7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=Be("LockKeyhole",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=Be("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=Be("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=Be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=Be("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=Be("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=Be("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=Be("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=Be("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=Be("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=Be("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=Be("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=Be("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=Be("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=Be("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=Be("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=Be("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=Be("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=Be("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=Be("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=Be("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=Be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=Be("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=Be("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=Be("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=Be("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=Be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=Be("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=Be("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=Be("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=Be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=Be("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=Be("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=Be("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=Be("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=Be("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=Be("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=Be("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=Be("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=Be("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=Be("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=Be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=Be("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=Be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=Be("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=Be("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=Be("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=Be("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=Be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=Be("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=Be("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=Be("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=Be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=Be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=Be("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=Be("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=Be("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=Be("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=Be("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=Be("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),rs=({size:t="md",text:e="...",variant:r="primary",fullScreen:n=!1})=>{const s={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"},i={primary:"text-cyber-blue",secondary:"text-gray-600",white:"text-white",success:"text-green-600",warning:"text-yellow-600",error:"text-red-600"},o=a.jsxs("div",{className:"flex flex-col items-center justify-center",children:[a.jsx(R3,{className:`${s[t]} ${i[r]} animate-spin`}),e&&a.jsx("p",{className:`mt-2 text-sm ${r==="white"?"text-white":"text-gray-600"}`,children:e})]});return n?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-cyber-blue to-cyber-purple",children:o}):o};class G2 extends Ic.Component{constructor(r){super(r);$u(this,"reportErrorToService",(r,n)=>{try{fetch("/api/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({errorId:this.state.errorId,message:r.message,stack:r.stack,componentStack:n.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})}).catch(()=>{console.warn("Failed to report error to service")})}catch(s){console.warn("Error reporting failed:",s)}});$u(this,"categorizeError",r=>{var s;const n=((s=r.message)==null?void 0:s.toLowerCase())||"";return n.includes("network")||n.includes("fetch")?{type:"network",title:" ",message:"  .       .",icon:""}:n.includes("firebase")||n.includes("auth")?{type:"authentication",title:" ",message:"  .   .",icon:""}:n.includes("permission")||n.includes("access")?{type:"permission",title:" ",message:"     .",icon:""}:{type:"general",title:" ",message:" .      .",icon:""}});$u(this,"handleRetry",()=>{const{retryCount:r}=this.state;if(r>=3){window.location.href="/";return}this.setState(s=>({hasError:!1,error:null,errorInfo:null,retryCount:s.retryCount+1,recoveryAttempted:!0})),Ir("ERROR_RETRY_ATTEMPT",{errorId:this.state.errorId,retryCount:r+1,timestamp:new Date().toISOString()})});$u(this,"handleGoHome",()=>{window.location.href="/"});$u(this,"handleReportError",()=>{const{error:r,errorInfo:n,errorId:s}=this.state,i={errorId:s,message:r==null?void 0:r.message,stack:r==null?void 0:r.stack,componentStack:n==null?void 0:n.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()};navigator.clipboard.writeText(JSON.stringify(i,null,2)).then(()=>{alert("   .    .")}).catch(()=>{alert("   .      .")})});this.state={hasError:!1,error:null,errorInfo:null,retryCount:0,errorId:null,recoveryAttempted:!1}}static getDerivedStateFromError(r){return{hasError:!0,errorId:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}componentDidCatch(r,n){var s,i;this.setState({error:r,errorInfo:n}),console.error(" Error caught by boundary:",{error:r.message,stack:r.stack,componentStack:n.componentStack,errorId:this.state.errorId,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href}),Ir("ERROR_BOUNDARY_TRIGGERED",{errorId:this.state.errorId,errorMessage:r.message,errorStack:(s=r.stack)==null?void 0:s.substring(0,500),componentStack:(i=n.componentStack)==null?void 0:i.substring(0,500),url:window.location.href,timestamp:new Date().toISOString()}),this.reportErrorToService(r,n)}render(){if(this.state.hasError){const r=this.categorizeError(this.state.error),{retryCount:n}=this.state;return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-red-100 p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-2xl p-8 text-center",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(bs,{className:"w-8 h-8 text-red-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:r.title}),a.jsx("p",{className:"text-gray-600 mb-6",children:r.message})]}),!1,a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:this.handleRetry,disabled:n>=3,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center space-x-2",children:[a.jsx(Ps,{className:"w-4 h-4"}),a.jsx("span",{children:n>=3?"  ":`  (${n+1}/3)`})]}),a.jsxs("button",{onClick:this.handleGoHome,className:"w-full bg-gray-600 text-white py-3 px-4 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(I3,{className:"w-4 h-4"}),a.jsx("span",{children:"  "})]}),a.jsxs("button",{onClick:this.handleReportError,className:"w-full bg-orange-600 text-white py-3 px-4 rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(P2,{className:"w-4 h-4"}),a.jsx("span",{children:"  "})]})]}),a.jsxs("div",{className:"mt-6 text-xs text-gray-500",children:[" : ",this.state.errorId]})]})})}return this.props.children}}const K2=S.createContext({});function X2(t){const e=S.useRef(null);return e.current===null&&(e.current=t()),e.current}const vg=S.createContext(null),Y2=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class eU extends S.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function tU({children:t,isPresent:e}){const r=S.useId(),n=S.useRef(null),s=S.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=S.useContext(Y2);return S.useInsertionEffect(()=>{const{width:o,height:l,top:u,left:h}=s.current;if(e||!n.current||!o||!l)return;n.current.dataset.motionPopId=r;const f=document.createElement("style");return i&&(f.nonce=i),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),a.jsx(eU,{isPresent:e,childRef:n,sizeRef:s,children:S.cloneElement(t,{ref:n})})}const rU=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o})=>{const l=X2(nU),u=S.useId(),h=S.useCallback(p=>{l.set(p,!0);for(const x of l.values())if(!x)return;n&&n()},[l,n]),f=S.useMemo(()=>({id:u,initial:e,isPresent:r,custom:s,onExitComplete:h,register:p=>(l.set(p,!1),()=>l.delete(p))}),i?[Math.random(),h]:[r,h]);return S.useMemo(()=>{l.forEach((p,x)=>l.set(x,!1))},[r]),S.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),o==="popLayout"&&(t=a.jsx(tU,{isPresent:r,children:t})),a.jsx(vg.Provider,{value:f,children:t})};function nU(){return new Map}function $3(t=!0){const e=S.useContext(vg);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=e,i=S.useId();S.useEffect(()=>{t&&s(i)},[t]);const o=S.useCallback(()=>t&&n&&n(i),[i,n,t]);return!r&&n?[!1,o]:[!0]}const sp=t=>t.key||"";function jk(t){const e=[];return S.Children.forEach(t,r=>{S.isValidElement(r)&&e.push(r)}),e}const Q2=typeof window<"u",H3=Q2?S.useLayoutEffect:S.useEffect,bn=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1})=>{const[l,u]=$3(o),h=S.useMemo(()=>jk(t),[t]),f=o&&!l?[]:h.map(sp),p=S.useRef(!0),x=S.useRef(h),v=X2(()=>new Map),[w,b]=S.useState(h),[_,R]=S.useState(h);H3(()=>{p.current=!1,x.current=h;for(let F=0;F<_.length;F++){const L=sp(_[F]);f.includes(L)?v.delete(L):v.get(L)!==!0&&v.set(L,!1)}},[_,f.length,f.join("-")]);const j=[];if(h!==w){let F=[...h];for(let L=0;L<_.length;L++){const I=_[L],N=sp(I);f.includes(N)||(F.splice(L,0,I),j.push(I))}i==="wait"&&j.length&&(F=j),R(jk(F)),b(h);return}const{forceRender:k}=S.useContext(K2);return a.jsx(a.Fragment,{children:_.map(F=>{const L=sp(F),I=o&&!l?!1:h===_||f.includes(L),N=()=>{if(v.has(L))v.set(L,!0);else return;let T=!0;v.forEach(P=>{P||(T=!1)}),T&&(k==null||k(),R(x.current),o&&(u==null||u()),n&&n())};return a.jsx(rU,{isPresent:I,initial:!p.current||r?void 0:!1,custom:I?void 0:e,presenceAffectsLayout:s,mode:i,onExitComplete:I?void 0:N,children:F},L)})})},da=t=>t;let W3=da;function J2(t){let e;return()=>(e===void 0&&(e=t()),e)}const Rd=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},lo=t=>t*1e3,co=t=>t/1e3,sU={useManualTiming:!1};function aU(t){let e=new Set,r=new Set,n=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(h){i.has(h)&&(u.schedule(h),t()),h(o)}const u={schedule:(h,f=!1,p=!1)=>{const v=p&&n?e:r;return f&&i.add(h),v.has(h)||v.add(h),h},cancel:h=>{r.delete(h),i.delete(h)},process:h=>{if(o=h,n){s=!0;return}n=!0,[e,r]=[r,e],e.forEach(l),e.clear(),n=!1,s&&(s=!1,u.process(h))}};return u}const ap=["read","resolveKeyframes","update","preRender","render","postRender"],iU=40;function q3(t,e){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=ap.reduce((R,j)=>(R[j]=aU(i),R),{}),{read:l,resolveKeyframes:u,update:h,preRender:f,render:p,postRender:x}=o,v=()=>{const R=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(R-s.timestamp,iU),1),s.timestamp=R,s.isProcessing=!0,l.process(s),u.process(s),h.process(s),f.process(s),p.process(s),x.process(s),s.isProcessing=!1,r&&e&&(n=!1,t(v))},w=()=>{r=!0,n=!0,s.isProcessing||t(v)};return{schedule:ap.reduce((R,j)=>{const k=o[j];return R[j]=(F,L=!1,I=!1)=>(r||w(),k.schedule(F,L,I)),R},{}),cancel:R=>{for(let j=0;j<ap.length;j++)o[ap[j]].cancel(R)},state:s,steps:o}}const{schedule:Pr,cancel:Cl,state:Yn,steps:Sy}=q3(typeof requestAnimationFrame<"u"?requestAnimationFrame:da,!0),G3=S.createContext({strict:!1}),Ak={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Pd={};for(const t in Ak)Pd[t]={isEnabled:e=>Ak[t].some(r=>!!e[r])};function oU(t){for(const e in t)Pd[e]={...Pd[e],...t[e]}}const lU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ix(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||lU.has(t)}let K3=t=>!ix(t);function cU(t){t&&(K3=e=>e.startsWith("on")?!ix(e):t(e))}try{cU(require("@emotion/is-prop-valid").default)}catch{}function uU(t,e,r){const n={};for(const s in t)s==="values"&&typeof t.values=="object"||(K3(s)||r===!0&&ix(s)||!e&&!ix(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}function dU(t){if(typeof Proxy>"u")return t;const e=new Map,r=(...n)=>t(...n);return new Proxy(r,{get:(n,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const yg=S.createContext({});function Lf(t){return typeof t=="string"||Array.isArray(t)}function wg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Z2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],eb=["initial",...Z2];function bg(t){return wg(t.animate)||eb.some(e=>Lf(t[e]))}function X3(t){return!!(bg(t)||t.variants)}function hU(t,e){if(bg(t)){const{initial:r,animate:n}=t;return{initial:r===!1||Lf(r)?r:void 0,animate:Lf(n)?n:void 0}}return t.inherit!==!1?e:{}}function fU(t){const{initial:e,animate:r}=hU(t,S.useContext(yg));return S.useMemo(()=>({initial:e,animate:r}),[Ck(e),Ck(r)])}function Ck(t){return Array.isArray(t)?t.join(" "):t}const mU=Symbol.for("motionComponentSymbol");function td(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function pU(t,e,r){return S.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):td(r)&&(r.current=n))},[e])}const tb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xU="framerAppearId",Y3="data-"+tb(xU),{schedule:rb}=q3(queueMicrotask,!1),Q3=S.createContext({});function gU(t,e,r,n,s){var i,o;const{visualElement:l}=S.useContext(yg),u=S.useContext(G3),h=S.useContext(vg),f=S.useContext(Y2).reducedMotion,p=S.useRef(null);n=n||u.renderer,!p.current&&n&&(p.current=n(t,{visualState:e,parent:l,props:r,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const x=p.current,v=S.useContext(Q3);x&&!x.projection&&s&&(x.type==="html"||x.type==="svg")&&vU(p.current,r,s,v);const w=S.useRef(!1);S.useInsertionEffect(()=>{x&&w.current&&x.update(r,h)});const b=r[Y3],_=S.useRef(!!b&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,b))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,b)));return H3(()=>{x&&(w.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),rb.render(x.render),_.current&&x.animationState&&x.animationState.animateChanges())}),S.useEffect(()=>{x&&(!_.current&&x.animationState&&x.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var R;(R=window.MotionHandoffMarkAsComplete)===null||R===void 0||R.call(window,b)}),_.current=!1))}),x}function vU(t,e,r,n){const{layoutId:s,layout:i,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:h}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:J3(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||l&&td(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,layoutScroll:u,layoutRoot:h})}function J3(t){if(t)return t.options.allowProjection!==!1?t.projection:J3(t.parent)}function yU({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:s}){var i,o;t&&oU(t);function l(h,f){let p;const x={...S.useContext(Y2),...h,layoutId:wU(h)},{isStatic:v}=x,w=fU(h),b=n(h,v);if(!v&&Q2){bU();const _=_U(x);p=_.MeasureLayout,w.visualElement=gU(s,b,x,e,_.ProjectionNode)}return a.jsxs(yg.Provider,{value:w,children:[p&&w.visualElement?a.jsx(p,{visualElement:w.visualElement,...x}):null,r(s,h,pU(b,w.visualElement,f),b,v,w.visualElement)]})}l.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const u=S.forwardRef(l);return u[mU]=s,u}function wU({layoutId:t}){const e=S.useContext(K2).id;return e&&t!==void 0?e+"-"+t:t}function bU(t,e){S.useContext(G3).strict}function _U(t){const{drag:e,layout:r}=Pd;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const NU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nb(t){return typeof t!="string"||t.includes("-")?!1:!!(NU.indexOf(t)>-1||/[A-Z]/u.test(t))}function Ik(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function sb(t,e,r,n){if(typeof e=="function"){const[s,i]=Ik(n);e=e(r!==void 0?r:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=Ik(n);e=e(r!==void 0?r:t.custom,s,i)}return e}const H1=t=>Array.isArray(t),EU=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),SU=t=>H1(t)?t[t.length-1]||0:t,gs=t=>!!(t&&t.getVelocity);function Rp(t){const e=gs(t)?t.get():t;return EU(e)?e.toValue():e}function kU({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:r},n,s,i){const o={latestValues:TU(n,s,i,t),renderState:e()};return r&&(o.onMount=l=>r({props:n,current:l,...o}),o.onUpdate=l=>r(l)),o}const Z3=t=>(e,r)=>{const n=S.useContext(yg),s=S.useContext(vg),i=()=>kU(t,e,n,s);return r?i():X2(i)};function TU(t,e,r,n){const s={},i=n(t,{});for(const x in i)s[x]=Rp(i[x]);let{initial:o,animate:l}=t;const u=bg(t),h=X3(t);e&&h&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let f=r?r.initial===!1:!1;f=f||o===!1;const p=f?l:o;if(p&&typeof p!="boolean"&&!wg(p)){const x=Array.isArray(p)?p:[p];for(let v=0;v<x.length;v++){const w=sb(t,x[v]);if(w){const{transitionEnd:b,transition:_,...R}=w;for(const j in R){let k=R[j];if(Array.isArray(k)){const F=f?k.length-1:0;k=k[F]}k!==null&&(s[j]=k)}for(const j in b)s[j]=b[j]}}}return s}const rh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],nu=new Set(rh),eI=t=>e=>typeof e=="string"&&e.startsWith(t),tI=eI("--"),jU=eI("var(--"),ab=t=>jU(t)?AU.test(t.split("/*")[0].trim()):!1,AU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,rI=(t,e)=>e&&typeof t=="number"?e.transform(t):t,No=(t,e,r)=>r>e?e:r<t?t:r,nh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Of={...nh,transform:t=>No(0,1,t)},ip={...nh,default:1},w0=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),il=w0("deg"),Ii=w0("%"),kt=w0("px"),CU=w0("vh"),IU=w0("vw"),Rk={...Ii,parse:t=>Ii.parse(t)/100,transform:t=>Ii.transform(t*100)},RU={borderWidth:kt,borderTopWidth:kt,borderRightWidth:kt,borderBottomWidth:kt,borderLeftWidth:kt,borderRadius:kt,radius:kt,borderTopLeftRadius:kt,borderTopRightRadius:kt,borderBottomRightRadius:kt,borderBottomLeftRadius:kt,width:kt,maxWidth:kt,height:kt,maxHeight:kt,top:kt,right:kt,bottom:kt,left:kt,padding:kt,paddingTop:kt,paddingRight:kt,paddingBottom:kt,paddingLeft:kt,margin:kt,marginTop:kt,marginRight:kt,marginBottom:kt,marginLeft:kt,backgroundPositionX:kt,backgroundPositionY:kt},PU={rotate:il,rotateX:il,rotateY:il,rotateZ:il,scale:ip,scaleX:ip,scaleY:ip,scaleZ:ip,skew:il,skewX:il,skewY:il,distance:kt,translateX:kt,translateY:kt,translateZ:kt,x:kt,y:kt,z:kt,perspective:kt,transformPerspective:kt,opacity:Of,originX:Rk,originY:Rk,originZ:kt},Pk={...nh,transform:Math.round},ib={...RU,...PU,zIndex:Pk,size:kt,fillOpacity:Of,strokeOpacity:Of,numOctaves:Pk},DU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},FU=rh.length;function LU(t,e,r){let n="",s=!0;for(let i=0;i<FU;i++){const o=rh[i],l=t[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||r){const h=rI(l,ib[o]);if(!u){s=!1;const f=DU[o]||o;n+=`${f}(${h}) `}r&&(e[o]=h)}}return n=n.trim(),r?n=r(e,s?"":n):s&&(n="none"),n}function ob(t,e,r){const{style:n,vars:s,transformOrigin:i}=t;let o=!1,l=!1;for(const u in e){const h=e[u];if(nu.has(u)){o=!0;continue}else if(tI(u)){s[u]=h;continue}else{const f=rI(h,ib[u]);u.startsWith("origin")?(l=!0,i[u]=f):n[u]=f}}if(e.transform||(o||r?n.transform=LU(e,t.transform,r):n.transform&&(n.transform="none")),l){const{originX:u="50%",originY:h="50%",originZ:f=0}=i;n.transformOrigin=`${u} ${h} ${f}`}}const OU={offset:"stroke-dashoffset",array:"stroke-dasharray"},MU={offset:"strokeDashoffset",array:"strokeDasharray"};function VU(t,e,r=1,n=0,s=!0){t.pathLength=1;const i=s?OU:MU;t[i.offset]=kt.transform(-n);const o=kt.transform(e),l=kt.transform(r);t[i.array]=`${o} ${l}`}function Dk(t,e,r){return typeof t=="string"?t:kt.transform(e+r*t)}function BU(t,e,r){const n=Dk(e,t.x,t.width),s=Dk(r,t.y,t.height);return`${n} ${s}`}function lb(t,{attrX:e,attrY:r,attrScale:n,originX:s,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:u=0,...h},f,p){if(ob(t,h,p),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:v,dimensions:w}=t;x.transform&&(w&&(v.transform=x.transform),delete x.transform),w&&(s!==void 0||i!==void 0||v.transform)&&(v.transformOrigin=BU(w,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(x.x=e),r!==void 0&&(x.y=r),n!==void 0&&(x.scale=n),o!==void 0&&VU(x,o,l,u,!1)}const cb=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),nI=()=>({...cb(),attrs:{}}),ub=t=>typeof t=="string"&&t.toLowerCase()==="svg";function sI(t,{style:e,vars:r},n,s){Object.assign(t.style,e,s&&s.getProjectionStyles(n));for(const i in r)t.style.setProperty(i,r[i])}const aI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function iI(t,e,r,n){sI(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(aI.has(s)?s:tb(s),e.attrs[s])}const ox={};function UU(t){Object.assign(ox,t)}function oI(t,{layout:e,layoutId:r}){return nu.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!ox[t]||t==="opacity")}function db(t,e,r){var n;const{style:s}=t,i={};for(const o in s)(gs(s[o])||e.style&&gs(e.style[o])||oI(o,t)||((n=r==null?void 0:r.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function lI(t,e,r){const n=db(t,e,r);for(const s in t)if(gs(t[s])||gs(e[s])){const i=rh.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=t[s]}return n}function zU(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Fk=["x","y","width","height","cx","cy","r"],$U={useVisualState:Z3({scrapeMotionValuesFromProps:lI,createRenderState:nI,onUpdate:({props:t,prevProps:e,current:r,renderState:n,latestValues:s})=>{if(!r)return;let i=!!t.drag;if(!i){for(const l in s)if(nu.has(l)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let l=0;l<Fk.length;l++){const u=Fk[l];t[u]!==e[u]&&(o=!0)}o&&Pr.read(()=>{zU(r,n),Pr.render(()=>{lb(n,s,ub(r.tagName),t.transformTemplate),iI(r,n)})})}})},HU={useVisualState:Z3({scrapeMotionValuesFromProps:db,createRenderState:cb})};function cI(t,e,r){for(const n in e)!gs(e[n])&&!oI(n,r)&&(t[n]=e[n])}function WU({transformTemplate:t},e){return S.useMemo(()=>{const r=cb();return ob(r,e,t),Object.assign({},r.vars,r.style)},[e])}function qU(t,e){const r=t.style||{},n={};return cI(n,r,t),Object.assign(n,WU(t,e)),n}function GU(t,e){const r={},n=qU(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}function KU(t,e,r,n){const s=S.useMemo(()=>{const i=nI();return lb(i,e,ub(n),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};cI(i,t.style,t),s.style={...i,...s.style}}return s}function XU(t=!1){return(r,n,s,{latestValues:i},o)=>{const u=(nb(r)?KU:GU)(n,i,o,r),h=uU(n,typeof r=="string",t),f=r!==S.Fragment?{...h,...u,ref:s}:{},{children:p}=n,x=S.useMemo(()=>gs(p)?p.get():p,[p]);return S.createElement(r,{...f,children:x})}}function YU(t,e){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...nb(n)?$U:HU,preloadedFeatures:t,useRender:XU(s),createVisualElement:e,Component:n};return yU(o)}}function uI(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function _g(t,e,r){const n=t.getProps();return sb(n,e,r!==void 0?r:n.custom,t)}const QU=J2(()=>window.ScrollTimeline!==void 0);class JU{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,r){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=r}attachTimeline(e,r){const n=this.animations.map(s=>{if(QU()&&s.attachTimeline)return s.attachTimeline(e);if(typeof r=="function")return r(s)});return()=>{n.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let r=0;r<this.animations.length;r++)e=Math.max(e,this.animations[r].duration);return e}runAll(e){this.animations.forEach(r=>r[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class ZU extends JU{then(e,r){return Promise.all(this.animations).then(e).catch(r)}}function hb(t,e){return t?t[e]||t.default||t:void 0}const W1=2e4;function dI(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<W1;)e+=r,n=t.next(e);return e>=W1?1/0:e}function fb(t){return typeof t=="function"}function Lk(t,e){t.timeline=e,t.onfinish=null}const mb=t=>Array.isArray(t)&&typeof t[0]=="number",ez={linearEasing:void 0};function tz(t,e){const r=J2(t);return()=>{var n;return(n=ez[e])!==null&&n!==void 0?n:r()}}const lx=tz(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hI=(t,e,r=10)=>{let n="";const s=Math.max(Math.round(e/r),2);for(let i=0;i<s;i++)n+=t(Rd(0,s-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function fI(t){return!!(typeof t=="function"&&lx()||!t||typeof t=="string"&&(t in q1||lx())||mb(t)||Array.isArray(t)&&t.every(fI))}const Xh=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,q1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xh([0,.65,.55,1]),circOut:Xh([.55,0,1,.45]),backIn:Xh([.31,.01,.66,-.59]),backOut:Xh([.33,1.53,.69,.99])};function mI(t,e){if(t)return typeof t=="function"&&lx()?hI(t,e):mb(t)?Xh(t):Array.isArray(t)?t.map(r=>mI(r,e)||q1.easeOut):q1[t]}const Qa={x:!1,y:!1};function pI(){return Qa.x||Qa.y}function rz(t,e,r){var n;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const i=(n=void 0)!==null&&n!==void 0?n:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function xI(t,e){const r=rz(t),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[r,s,()=>n.abort()]}function Ok(t){return e=>{e.pointerType==="touch"||pI()||t(e)}}function nz(t,e,r={}){const[n,s,i]=xI(t,r),o=Ok(l=>{const{target:u}=l,h=e(l);if(typeof h!="function"||!u)return;const f=Ok(p=>{h(p),u.removeEventListener("pointerleave",f)});u.addEventListener("pointerleave",f,s)});return n.forEach(l=>{l.addEventListener("pointerenter",o,s)}),i}const gI=(t,e)=>e?t===e?!0:gI(t,e.parentElement):!1,pb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,sz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function az(t){return sz.has(t.tagName)||t.tabIndex!==-1}const Yh=new WeakSet;function Mk(t){return e=>{e.key==="Enter"&&t(e)}}function ky(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const iz=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=Mk(()=>{if(Yh.has(r))return;ky(r,"down");const s=Mk(()=>{ky(r,"up")}),i=()=>ky(r,"cancel");r.addEventListener("keyup",s,e),r.addEventListener("blur",i,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function Vk(t){return pb(t)&&!pI()}function oz(t,e,r={}){const[n,s,i]=xI(t,r),o=l=>{const u=l.currentTarget;if(!Vk(l)||Yh.has(u))return;Yh.add(u);const h=e(l),f=(v,w)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",x),!(!Vk(v)||!Yh.has(u))&&(Yh.delete(u),typeof h=="function"&&h(v,{success:w}))},p=v=>{f(v,r.useGlobalTarget||gI(u,v.target))},x=v=>{f(v,!1)};window.addEventListener("pointerup",p,s),window.addEventListener("pointercancel",x,s)};return n.forEach(l=>{!az(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),l.addEventListener("focus",h=>iz(h,s),s)}),i}function lz(t){return t==="x"||t==="y"?Qa[t]?null:(Qa[t]=!0,()=>{Qa[t]=!1}):Qa.x||Qa.y?null:(Qa.x=Qa.y=!0,()=>{Qa.x=Qa.y=!1})}const vI=new Set(["width","height","top","left","right","bottom",...rh]);let Pp;function cz(){Pp=void 0}const Ri={now:()=>(Pp===void 0&&Ri.set(Yn.isProcessing||sU.useManualTiming?Yn.timestamp:performance.now()),Pp),set:t=>{Pp=t,queueMicrotask(cz)}};function xb(t,e){t.indexOf(e)===-1&&t.push(e)}function gb(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class vb{constructor(){this.subscriptions=[]}add(e){return xb(this.subscriptions,e),()=>gb(this.subscriptions,e)}notify(e,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function yI(t,e){return e?t*(1e3/e):0}const Bk=30,uz=t=>!isNaN(parseFloat(t));class dz{constructor(e,r={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{const i=Ri.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=Ri.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=uz(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new vb);const n=this.events[e].add(r);return e==="change"?()=>{n(),Pr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ri.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Bk)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Bk);return yI(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Mf(t,e){return new dz(t,e)}function hz(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Mf(r))}function fz(t,e){const r=_g(t,e);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i){const l=SU(i[o]);hz(t,o,l)}}function mz(t){return!!(gs(t)&&t.add)}function G1(t,e){const r=t.getValue("willChange");if(mz(r))return r.add(e)}function wI(t){return t.props[Y3]}const bI=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,pz=1e-7,xz=12;function gz(t,e,r,n,s){let i,o,l=0;do o=e+(r-e)/2,i=bI(o,n,s)-t,i>0?r=o:e=o;while(Math.abs(i)>pz&&++l<xz);return o}function b0(t,e,r,n){if(t===e&&r===n)return da;const s=i=>gz(i,0,1,t,r);return i=>i===0||i===1?i:bI(s(i),e,n)}const _I=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,NI=t=>e=>1-t(1-e),EI=b0(.33,1.53,.69,.99),yb=NI(EI),SI=_I(yb),kI=t=>(t*=2)<1?.5*yb(t):.5*(2-Math.pow(2,-10*(t-1))),wb=t=>1-Math.sin(Math.acos(t)),TI=NI(wb),jI=_I(wb),AI=t=>/^0[^.\s]+$/u.test(t);function vz(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||AI(t):!0}const uf=t=>Math.round(t*1e5)/1e5,bb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function yz(t){return t==null}const wz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,_b=(t,e)=>r=>!!(typeof r=="string"&&wz.test(r)&&r.startsWith(t)||e&&!yz(r)&&Object.prototype.hasOwnProperty.call(r,e)),CI=(t,e,r)=>n=>{if(typeof n!="string")return n;const[s,i,o,l]=n.match(bb);return{[t]:parseFloat(s),[e]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},bz=t=>No(0,255,t),Ty={...nh,transform:t=>Math.round(bz(t))},bc={test:_b("rgb","red"),parse:CI("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+Ty.transform(t)+", "+Ty.transform(e)+", "+Ty.transform(r)+", "+uf(Of.transform(n))+")"};function _z(t){let e="",r="",n="",s="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,r+=r,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const K1={test:_b("#"),parse:_z,transform:bc.transform},rd={test:_b("hsl","hue"),parse:CI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+Ii.transform(uf(e))+", "+Ii.transform(uf(r))+", "+uf(Of.transform(n))+")"},us={test:t=>bc.test(t)||K1.test(t)||rd.test(t),parse:t=>bc.test(t)?bc.parse(t):rd.test(t)?rd.parse(t):K1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?bc.transform(t):rd.transform(t)},Nz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Ez(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(bb))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(Nz))===null||r===void 0?void 0:r.length)||0)>0}const II="number",RI="color",Sz="var",kz="var(",Uk="${}",Tz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vf(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const l=e.replace(Tz,u=>(us.test(u)?(n.color.push(i),s.push(RI),r.push(us.parse(u))):u.startsWith(kz)?(n.var.push(i),s.push(Sz),r.push(u)):(n.number.push(i),s.push(II),r.push(parseFloat(u))),++i,Uk)).split(Uk);return{values:r,split:l,indexes:n,types:s}}function PI(t){return Vf(t).values}function DI(t){const{split:e,types:r}=Vf(t),n=e.length;return s=>{let i="";for(let o=0;o<n;o++)if(i+=e[o],s[o]!==void 0){const l=r[o];l===II?i+=uf(s[o]):l===RI?i+=us.transform(s[o]):i+=s[o]}return i}}const jz=t=>typeof t=="number"?0:t;function Az(t){const e=PI(t);return DI(t)(e.map(jz))}const Il={test:Ez,parse:PI,createTransformer:DI,getAnimatableNone:Az},Cz=new Set(["brightness","contrast","saturate","opacity"]);function Iz(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(bb)||[];if(!n)return t;const s=r.replace(n,"");let i=Cz.has(e)?1:0;return n!==r&&(i*=100),e+"("+i+s+")"}const Rz=/\b([a-z-]*)\(.*?\)/gu,X1={...Il,getAnimatableNone:t=>{const e=t.match(Rz);return e?e.map(Iz).join(" "):t}},Pz={...ib,color:us,backgroundColor:us,outlineColor:us,fill:us,stroke:us,borderColor:us,borderTopColor:us,borderRightColor:us,borderBottomColor:us,borderLeftColor:us,filter:X1,WebkitFilter:X1},Nb=t=>Pz[t];function FI(t,e){let r=Nb(t);return r!==X1&&(r=Il),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const Dz=new Set(["auto","none","0"]);function Fz(t,e,r){let n=0,s;for(;n<t.length&&!s;){const i=t[n];typeof i=="string"&&!Dz.has(i)&&Vf(i).values.length&&(s=t[n]),n++}if(s&&r)for(const i of e)t[i]=FI(r,s)}const zk=t=>t===nh||t===kt,$k=(t,e)=>parseFloat(t.split(", ")[e]),Hk=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/u);if(s)return $k(s[1],e);{const i=n.match(/^matrix\((.+)\)$/u);return i?$k(i[1],t):0}},Lz=new Set(["x","y","z"]),Oz=rh.filter(t=>!Lz.has(t));function Mz(t){const e=[];return Oz.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const Dd={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Hk(4,13),y:Hk(5,14)};Dd.translateX=Dd.x;Dd.translateY=Dd.y;const Sc=new Set;let Y1=!1,Q1=!1;function LI(){if(Q1){const t=Array.from(Sc).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const s=Mz(n);s.length&&(r.set(n,s),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,o])=>{var l;(l=n.getValue(i))===null||l===void 0||l.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Q1=!1,Y1=!1,Sc.forEach(t=>t.complete()),Sc.clear()}function OI(){Sc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Q1=!0)})}function Vz(){OI(),LI()}class Eb{constructor(e,r,n,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Sc.add(this),Y1||(Y1=!0,Pr.read(OI),Pr.resolveKeyframes(LI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&r){const u=n.readValue(r,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Sc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Sc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const MI=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Bz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Uz(t){const e=Bz.exec(t);if(!e)return[,];const[,r,n,s]=e;return[`--${r??n}`,s]}function VI(t,e,r=1){const[n,s]=Uz(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return MI(o)?parseFloat(o):o}return ab(s)?VI(s,e,r+1):s}const BI=t=>e=>e.test(t),zz={test:t=>t==="auto",parse:t=>t},UI=[nh,kt,Ii,il,IU,CU,zz],Wk=t=>UI.find(BI(t));class zI extends Eb{constructor(e,r,n,s,i){super(e,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),ab(h))){const f=VI(h,r.current);f!==void 0&&(e[u]=f),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!vI.has(n)||e.length!==2)return;const[s,i]=e,o=Wk(s),l=Wk(i);if(o!==l)if(zk(o)&&zk(l))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let s=0;s<e.length;s++)vz(e[s])&&n.push(s);n.length&&Fz(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Dd[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){var e;const{element:r,name:n,unresolvedKeyframes:s}=this;if(!r||!r.current)return;const i=r.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,l=s[o];s[o]=Dd[n](r.measureViewportBox(),window.getComputedStyle(r.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,h])=>{r.getValue(u).set(h)}),this.resolveNoneKeyframes()}}const qk=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Il.test(t)||t==="0")&&!t.startsWith("url("));function $z(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function Hz(t,e,r,n){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=qk(s,e),l=qk(i,e);return!o||!l?!1:$z(t)||(r==="spring"||fb(r))&&n}const Wz=t=>t!==null;function Ng(t,{repeat:e,repeatType:r="loop"},n){const s=t.filter(Wz),i=e&&r!=="loop"&&e%2===1?0:s.length-1;return!i||n===void 0?s[i]:n}const qz=40;class $I{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ri.now(),this.options={autoplay:e,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>qz?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Vz(),this._resolved}onKeyframesResolved(e,r){this.resolvedAt=Ri.now(),this.hasAttemptedResolve=!0;const{name:n,type:s,velocity:i,delay:o,onComplete:l,onUpdate:u,isGenerator:h}=this.options;if(!h&&!Hz(e,n,s,i))if(o)this.options.duration=0;else{u&&u(Ng(e,this.options,r)),l&&l(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,r);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:r,...f},this.onPostResolved())}onPostResolved(){}then(e,r){return this.currentFinishedPromise.then(e,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Hr=(t,e,r)=>t+(e-t)*r;function jy(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function Gz({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let s=0,i=0,o=0;if(!e)s=i=o=r;else{const l=r<.5?r*(1+e):r+e-r*e,u=2*r-l;s=jy(u,l,t+1/3),i=jy(u,l,t),o=jy(u,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function cx(t,e){return r=>r>0?e:t}const Ay=(t,e,r)=>{const n=t*t,s=r*(e*e-n)+n;return s<0?0:Math.sqrt(s)},Kz=[K1,bc,rd],Xz=t=>Kz.find(e=>e.test(t));function Gk(t){const e=Xz(t);if(!e)return!1;let r=e.parse(t);return e===rd&&(r=Gz(r)),r}const Kk=(t,e)=>{const r=Gk(t),n=Gk(e);if(!r||!n)return cx(t,e);const s={...r};return i=>(s.red=Ay(r.red,n.red,i),s.green=Ay(r.green,n.green,i),s.blue=Ay(r.blue,n.blue,i),s.alpha=Hr(r.alpha,n.alpha,i),bc.transform(s))},Yz=(t,e)=>r=>e(t(r)),_0=(...t)=>t.reduce(Yz),J1=new Set(["none","hidden"]);function Qz(t,e){return J1.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function Jz(t,e){return r=>Hr(t,e,r)}function Sb(t){return typeof t=="number"?Jz:typeof t=="string"?ab(t)?cx:us.test(t)?Kk:t$:Array.isArray(t)?HI:typeof t=="object"?us.test(t)?Kk:Zz:cx}function HI(t,e){const r=[...t],n=r.length,s=t.map((i,o)=>Sb(i)(i,e[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}}function Zz(t,e){const r={...t,...e},n={};for(const s in r)t[s]!==void 0&&e[s]!==void 0&&(n[s]=Sb(t[s])(t[s],e[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function e$(t,e){var r;const n=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],l=t.indexes[o][s[o]],u=(r=t.values[l])!==null&&r!==void 0?r:0;n[i]=u,s[o]++}return n}const t$=(t,e)=>{const r=Il.createTransformer(e),n=Vf(t),s=Vf(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?J1.has(t)&&!s.values.length||J1.has(e)&&!n.values.length?Qz(t,e):_0(HI(e$(n,s),s.values),r):cx(t,e)};function WI(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?Hr(t,e,r):Sb(t)(t,e)}const r$=5;function qI(t,e,r){const n=Math.max(e-r$,0);return yI(r-t(n),e-n)}const Zr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Cy=.001;function n$({duration:t=Zr.duration,bounce:e=Zr.bounce,velocity:r=Zr.velocity,mass:n=Zr.mass}){let s,i,o=1-e;o=No(Zr.minDamping,Zr.maxDamping,o),t=No(Zr.minDuration,Zr.maxDuration,co(t)),o<1?(s=h=>{const f=h*o,p=f*t,x=f-r,v=Z1(h,o),w=Math.exp(-p);return Cy-x/v*w},i=h=>{const p=h*o*t,x=p*r+r,v=Math.pow(o,2)*Math.pow(h,2)*t,w=Math.exp(-p),b=Z1(Math.pow(h,2),o);return(-s(h)+Cy>0?-1:1)*((x-v)*w)/b}):(s=h=>{const f=Math.exp(-h*t),p=(h-r)*t+1;return-Cy+f*p},i=h=>{const f=Math.exp(-h*t),p=(r-h)*(t*t);return f*p});const l=5/t,u=a$(s,i,l);if(t=lo(t),isNaN(u))return{stiffness:Zr.stiffness,damping:Zr.damping,duration:t};{const h=Math.pow(u,2)*n;return{stiffness:h,damping:o*2*Math.sqrt(n*h),duration:t}}}const s$=12;function a$(t,e,r){let n=r;for(let s=1;s<s$;s++)n=n-t(n)/e(n);return n}function Z1(t,e){return t*Math.sqrt(1-e*e)}const i$=["duration","bounce"],o$=["stiffness","damping","mass"];function Xk(t,e){return e.some(r=>t[r]!==void 0)}function l$(t){let e={velocity:Zr.velocity,stiffness:Zr.stiffness,damping:Zr.damping,mass:Zr.mass,isResolvedFromDuration:!1,...t};if(!Xk(t,o$)&&Xk(t,i$))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*No(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Zr.mass,stiffness:s,damping:i}}else{const r=n$(t);e={...e,...r,mass:Zr.mass},e.isResolvedFromDuration=!0}return e}function GI(t=Zr.visualDuration,e=Zr.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:u,damping:h,mass:f,duration:p,velocity:x,isResolvedFromDuration:v}=l$({...r,velocity:-co(r.velocity||0)}),w=x||0,b=h/(2*Math.sqrt(u*f)),_=o-i,R=co(Math.sqrt(u/f)),j=Math.abs(_)<5;n||(n=j?Zr.restSpeed.granular:Zr.restSpeed.default),s||(s=j?Zr.restDelta.granular:Zr.restDelta.default);let k;if(b<1){const L=Z1(R,b);k=I=>{const N=Math.exp(-b*R*I);return o-N*((w+b*R*_)/L*Math.sin(L*I)+_*Math.cos(L*I))}}else if(b===1)k=L=>o-Math.exp(-R*L)*(_+(w+R*_)*L);else{const L=R*Math.sqrt(b*b-1);k=I=>{const N=Math.exp(-b*R*I),T=Math.min(L*I,300);return o-N*((w+b*R*_)*Math.sinh(T)+L*_*Math.cosh(T))/L}}const F={calculatedDuration:v&&p||null,next:L=>{const I=k(L);if(v)l.done=L>=p;else{let N=0;b<1&&(N=L===0?lo(w):qI(k,L,I));const T=Math.abs(N)<=n,P=Math.abs(o-I)<=s;l.done=T&&P}return l.value=l.done?o:I,l},toString:()=>{const L=Math.min(dI(F),W1),I=hI(N=>F.next(L*N).value,L,30);return L+"ms "+I}};return F}function Yk({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:u,restDelta:h=.5,restSpeed:f}){const p=t[0],x={done:!1,value:p},v=T=>l!==void 0&&T<l||u!==void 0&&T>u,w=T=>l===void 0?u:u===void 0||Math.abs(l-T)<Math.abs(u-T)?l:u;let b=r*e;const _=p+b,R=o===void 0?_:o(_);R!==_&&(b=R-p);const j=T=>-b*Math.exp(-T/n),k=T=>R+j(T),F=T=>{const P=j(T),B=k(T);x.done=Math.abs(P)<=h,x.value=x.done?R:B};let L,I;const N=T=>{v(x.value)&&(L=T,I=GI({keyframes:[x.value,w(x.value)],velocity:qI(k,T,x.value),damping:s,stiffness:i,restDelta:h,restSpeed:f}))};return N(0),{calculatedDuration:null,next:T=>{let P=!1;return!I&&L===void 0&&(P=!0,F(T),N(T)),L!==void 0&&T>=L?I.next(T-L):(!P&&F(T),x)}}}const c$=b0(.42,0,1,1),u$=b0(0,0,.58,1),KI=b0(.42,0,.58,1),d$=t=>Array.isArray(t)&&typeof t[0]!="number",h$={linear:da,easeIn:c$,easeInOut:KI,easeOut:u$,circIn:wb,circInOut:jI,circOut:TI,backIn:yb,backInOut:SI,backOut:EI,anticipate:kI},Qk=t=>{if(mb(t)){W3(t.length===4);const[e,r,n,s]=t;return b0(e,r,n,s)}else if(typeof t=="string")return h$[t];return t};function f$(t,e,r){const n=[],s=r||WI,i=t.length-1;for(let o=0;o<i;o++){let l=s(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||da:e;l=_0(u,l)}n.push(l)}return n}function m$(t,e,{clamp:r=!0,ease:n,mixer:s}={}){const i=t.length;if(W3(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=f$(e,n,s),u=l.length,h=f=>{if(o&&f<t[0])return e[0];let p=0;if(u>1)for(;p<t.length-2&&!(f<t[p+1]);p++);const x=Rd(t[p],t[p+1],f);return l[p](x)};return r?f=>h(No(t[0],t[i-1],f)):h}function p$(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const s=Rd(0,e,n);t.push(Hr(r,1,s))}}function x$(t){const e=[0];return p$(e,t.length-1),e}function g$(t,e){return t.map(r=>r*e)}function v$(t,e){return t.map(()=>e||KI).splice(0,t.length-1)}function ux({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const s=d$(n)?n.map(Qk):Qk(n),i={done:!1,value:e[0]},o=g$(r&&r.length===e.length?r:x$(e),t),l=m$(o,e,{ease:Array.isArray(s)?s:v$(e,s)});return{calculatedDuration:t,next:u=>(i.value=l(u),i.done=u>=t,i)}}const y$=t=>{const e=({timestamp:r})=>t(r);return{start:()=>Pr.update(e,!0),stop:()=>Cl(e),now:()=>Yn.isProcessing?Yn.timestamp:Ri.now()}},w$={decay:Yk,inertia:Yk,tween:ux,keyframes:ux,spring:GI},b$=t=>t/100;class kb extends $I{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:r,motionValue:n,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||Eb,l=(u,h)=>this.onKeyframesResolved(u,h);this.resolver=new o(i,l,r,n,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:r="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,l=fb(r)?r:w$[r]||ux;let u,h;l!==ux&&typeof e[0]!="number"&&(u=_0(b$,WI(e[0],e[1])),e=[0,100]);const f=l({...this.options,keyframes:e});i==="mirror"&&(h=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=dI(f));const{calculatedDuration:p}=f,x=p+s,v=x*(n+1)-s;return{generator:f,mirroredGenerator:h,mapPercentToKeyframes:u,calculatedDuration:p,resolvedDuration:x,totalDuration:v}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,r=!1){const{resolved:n}=this;if(!n){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:u,calculatedDuration:h,totalDuration:f,resolvedDuration:p}=n;if(this.startTime===null)return i.next(0);const{delay:x,repeat:v,repeatType:w,repeatDelay:b,onUpdate:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),r?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const R=this.currentTime-x*(this.speed>=0?1:-1),j=this.speed>=0?R<0:R>f;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let k=this.currentTime,F=i;if(v){const T=Math.min(this.currentTime,f)/p;let P=Math.floor(T),B=T%1;!B&&T>=1&&(B=1),B===1&&P--,P=Math.min(P,v+1),!!(P%2)&&(w==="reverse"?(B=1-B,b&&(B-=b/p)):w==="mirror"&&(F=o)),k=No(0,1,B)*p}const L=j?{done:!1,value:u[0]}:F.next(k);l&&(L.value=l(L.value));let{done:I}=L;!j&&h!==null&&(I=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return N&&s!==void 0&&(L.value=Ng(u,this.options,s)),_&&_(L.value),N&&this.finish(),L}get duration(){const{resolved:e}=this;return e?co(e.calculatedDuration):0}get time(){return co(this.currentTime)}set time(e){e=lo(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=co(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=y$,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),r&&r();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const _$=new Set(["opacity","clipPath","filter","transform"]);function N$(t,e,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:l="easeInOut",times:u}={}){const h={[e]:r};u&&(h.offset=u);const f=mI(l,s);return Array.isArray(f)&&(h.easing=f),t.animate(h,{delay:n,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const E$=J2(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),dx=10,S$=2e4;function k$(t){return fb(t.type)||t.type==="spring"||!fI(t.ease)}function T$(t,e){const r=new kb({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const s=[];let i=0;for(;!n.done&&i<S$;)n=r.sample(i),s.push(n.value),i+=dx;return{times:void 0,keyframes:s,duration:i-dx,ease:"linear"}}const XI={anticipate:kI,backInOut:SI,circInOut:jI};function j$(t){return t in XI}class Jk extends $I{constructor(e){super(e);const{name:r,motionValue:n,element:s,keyframes:i}=this.options;this.resolver=new zI(i,(o,l)=>this.onKeyframesResolved(o,l),r,n,s),this.resolver.scheduleResolve()}initPlayback(e,r){let{duration:n=300,times:s,ease:i,type:o,motionValue:l,name:u,startTime:h}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof i=="string"&&lx()&&j$(i)&&(i=XI[i]),k$(this.options)){const{onComplete:p,onUpdate:x,motionValue:v,element:w,...b}=this.options,_=T$(e,b);e=_.keyframes,e.length===1&&(e[1]=e[0]),n=_.duration,s=_.times,i=_.ease,o="keyframes"}const f=N$(l.owner.current,u,e,{...this.options,duration:n,times:s,ease:i});return f.startTime=h??this.calcStartTime(),this.pendingTimeline?(Lk(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:p}=this.options;l.set(Ng(e,this.options,r)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:n,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:r}=e;return co(r)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:r}=e;return co(r.currentTime||0)}set time(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=lo(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:r}=e;return r.playbackRate}set speed(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:r}=e;return r.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:r}=e;return r.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:r}=this;if(!r)return da;const{animation:n}=r;Lk(n,e)}return da}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:r,keyframes:n,duration:s,type:i,ease:o,times:l}=e;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:f,onComplete:p,element:x,...v}=this.options,w=new kb({...v,keyframes:n,duration:s,type:i,ease:o,times:l,isGenerator:!0}),b=lo(this.time);h.setWithVelocity(w.sample(b-dx).value,w.sample(b).value,dx)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:r,name:n,repeatDelay:s,repeatType:i,damping:o,type:l}=e;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=r.owner.getProps();return E$()&&n&&_$.has(n)&&!u&&!h&&!s&&i!=="mirror"&&o!==0&&l!=="inertia"}}const A$={type:"spring",stiffness:500,damping:25,restSpeed:10},C$=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),I$={type:"keyframes",duration:.8},R$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},P$=(t,{keyframes:e})=>e.length>2?I$:nu.has(t)?t.startsWith("scale")?C$(e[1]):A$:R$;function D$({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:u,elapsed:h,...f}){return!!Object.keys(f).length}const Tb=(t,e,r,n={},s,i)=>o=>{const l=hb(n,t)||{},u=l.delay||n.delay||0;let{elapsed:h=0}=n;h=h-lo(u);let f={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-h,onUpdate:x=>{e.set(x),l.onUpdate&&l.onUpdate(x)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:s};D$(l)||(f={...f,...P$(t,f)}),f.duration&&(f.duration=lo(f.duration)),f.repeatDelay&&(f.repeatDelay=lo(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(p=!0)),p&&!i&&e.get()!==void 0){const x=Ng(f.keyframes,l);if(x!==void 0)return Pr.update(()=>{f.onUpdate(x),f.onComplete()}),new ZU([])}return!i&&Jk.supports(f)?new Jk(f):new kb(f)};function F$({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function YI(t,e,{delay:r=0,transitionOverride:n,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:l,...u}=e;n&&(o=n);const h=[],f=s&&t.animationState&&t.animationState.getState()[s];for(const p in u){const x=t.getValue(p,(i=t.latestValues[p])!==null&&i!==void 0?i:null),v=u[p];if(v===void 0||f&&F$(f,p))continue;const w={delay:r,...hb(o||{},p)};let b=!1;if(window.MotionHandoffAnimation){const R=wI(t);if(R){const j=window.MotionHandoffAnimation(R,p,Pr);j!==null&&(w.startTime=j,b=!0)}}G1(t,p),x.start(Tb(p,x,v,t.shouldReduceMotion&&vI.has(p)?{type:!1}:w,t,b));const _=x.animation;_&&h.push(_)}return l&&Promise.all(h).then(()=>{Pr.update(()=>{l&&fz(t,l)})}),h}function ew(t,e,r={}){var n;const s=_g(t,e,r.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(i=r.transitionOverride);const o=s?()=>Promise.all(YI(t,s,r)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:x}=i;return L$(t,e,f+h,p,x,r)}:()=>Promise.resolve(),{when:u}=i;if(u){const[h,f]=u==="beforeChildren"?[o,l]:[l,o];return h().then(()=>f())}else return Promise.all([o(),l(r.delay)])}function L$(t,e,r=0,n=0,s=1,i){const o=[],l=(t.variantChildren.size-1)*n,u=s===1?(h=0)=>h*n:(h=0)=>l-h*n;return Array.from(t.variantChildren).sort(O$).forEach((h,f)=>{h.notify("AnimationStart",e),o.push(ew(h,e,{...i,delay:r+u(f)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(o)}function O$(t,e){return t.sortNodePosition(e)}function M$(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(i=>ew(t,i,r));n=Promise.all(s)}else if(typeof e=="string")n=ew(t,e,r);else{const s=typeof e=="function"?_g(t,e,r.custom):e;n=Promise.all(YI(t,s,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}const V$=eb.length;function QI(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?QI(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<V$;r++){const n=eb[r],s=t.props[n];(Lf(s)||s===!1)&&(e[n]=s)}return e}const B$=[...Z2].reverse(),U$=Z2.length;function z$(t){return e=>Promise.all(e.map(({animation:r,options:n})=>M$(t,r,n)))}function $$(t){let e=z$(t),r=Zk(),n=!0;const s=u=>(h,f)=>{var p;const x=_g(t,f,u==="exit"?(p=t.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(x){const{transition:v,transitionEnd:w,...b}=x;h={...h,...b,...w}}return h};function i(u){e=u(t)}function o(u){const{props:h}=t,f=QI(t.parent)||{},p=[],x=new Set;let v={},w=1/0;for(let _=0;_<U$;_++){const R=B$[_],j=r[R],k=h[R]!==void 0?h[R]:f[R],F=Lf(k),L=R===u?j.isActive:null;L===!1&&(w=_);let I=k===f[R]&&k!==h[R]&&F;if(I&&n&&t.manuallyAnimateOnMount&&(I=!1),j.protectedKeys={...v},!j.isActive&&L===null||!k&&!j.prevProp||wg(k)||typeof k=="boolean")continue;const N=H$(j.prevProp,k);let T=N||R===u&&j.isActive&&!I&&F||_>w&&F,P=!1;const B=Array.isArray(k)?k:[k];let z=B.reduce(s(R),{});L===!1&&(z={});const{prevResolvedValues:O={}}=j,D={...O,...z},G=H=>{T=!0,x.has(H)&&(P=!0,x.delete(H)),j.needsAnimating[H]=!0;const te=t.getValue(H);te&&(te.liveStyle=!1)};for(const H in D){const te=z[H],K=O[H];if(v.hasOwnProperty(H))continue;let ce=!1;H1(te)&&H1(K)?ce=!uI(te,K):ce=te!==K,ce?te!=null?G(H):x.add(H):te!==void 0&&x.has(H)?G(H):j.protectedKeys[H]=!0}j.prevProp=k,j.prevResolvedValues=z,j.isActive&&(v={...v,...z}),n&&t.blockInitialAnimation&&(T=!1),T&&(!(I&&N)||P)&&p.push(...B.map(H=>({animation:H,options:{type:R}})))}if(x.size){const _={};x.forEach(R=>{const j=t.getBaseTarget(R),k=t.getValue(R);k&&(k.liveStyle=!0),_[R]=j??null}),p.push({animation:_})}let b=!!p.length;return n&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(b=!1),n=!1,b?e(p):Promise.resolve()}function l(u,h){var f;if(r[u].isActive===h)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(x=>{var v;return(v=x.animationState)===null||v===void 0?void 0:v.setActive(u,h)}),r[u].isActive=h;const p=o(u);for(const x in r)r[x].protectedKeys={};return p}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=Zk(),n=!0}}}function H$(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!uI(e,t):!1}function fc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Zk(){return{animate:fc(!0),whileInView:fc(),whileHover:fc(),whileTap:fc(),whileDrag:fc(),whileFocus:fc(),exit:fc()}}class $l{constructor(e){this.isMounted=!1,this.node=e}update(){}}class W$ extends $l{constructor(e){super(e),e.animationState||(e.animationState=$$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();wg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let q$=0;class G$ extends $l{constructor(){super(...arguments),this.id=q$++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);r&&!e&&s.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const K$={animation:{Feature:W$},exit:{Feature:G$}};function Bf(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function N0(t){return{point:{x:t.pageX,y:t.pageY}}}const X$=t=>e=>pb(e)&&t(e,N0(e));function df(t,e,r,n){return Bf(t,e,X$(r),n)}const eT=(t,e)=>Math.abs(t-e);function Y$(t,e){const r=eT(t.x,e.x),n=eT(t.y,e.y);return Math.sqrt(r**2+n**2)}class JI{constructor(e,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Ry(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,v=Y$(p.offset,{x:0,y:0})>=3;if(!x&&!v)return;const{point:w}=p,{timestamp:b}=Yn;this.history.push({...w,timestamp:b});const{onStart:_,onMove:R}=this.handlers;x||(_&&_(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,p)},this.handlePointerMove=(p,x)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Iy(x,this.transformPagePoint),Pr.update(this.updatePoint,!0)},this.handlePointerUp=(p,x)=>{this.end();const{onEnd:v,onSessionEnd:w,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Ry(p.type==="pointercancel"?this.lastMoveEventInfo:Iy(x,this.transformPagePoint),this.history);this.startEvent&&v&&v(p,_),w&&w(p,_)},!pb(e))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const o=N0(e),l=Iy(o,this.transformPagePoint),{point:u}=l,{timestamp:h}=Yn;this.history=[{...u,timestamp:h}];const{onSessionStart:f}=r;f&&f(e,Ry(l,this.history)),this.removeListeners=_0(df(this.contextWindow,"pointermove",this.handlePointerMove),df(this.contextWindow,"pointerup",this.handlePointerUp),df(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Cl(this.updatePoint)}}function Iy(t,e){return e?{point:e(t.point)}:t}function tT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ry({point:t},e){return{point:t,delta:tT(t,ZI(e)),offset:tT(t,Q$(e)),velocity:J$(e,.1)}}function Q$(t){return t[0]}function ZI(t){return t[t.length-1]}function J$(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const s=ZI(t);for(;r>=0&&(n=t[r],!(s.timestamp-n.timestamp>lo(e)));)r--;if(!n)return{x:0,y:0};const i=co(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const e6=1e-4,Z$=1-e6,eH=1+e6,t6=.01,tH=0-t6,rH=0+t6;function ha(t){return t.max-t.min}function nH(t,e,r){return Math.abs(t-e)<=r}function rT(t,e,r,n=.5){t.origin=n,t.originPoint=Hr(e.min,e.max,t.origin),t.scale=ha(r)/ha(e),t.translate=Hr(r.min,r.max,t.origin)-t.originPoint,(t.scale>=Z$&&t.scale<=eH||isNaN(t.scale))&&(t.scale=1),(t.translate>=tH&&t.translate<=rH||isNaN(t.translate))&&(t.translate=0)}function hf(t,e,r,n){rT(t.x,e.x,r.x,n?n.originX:void 0),rT(t.y,e.y,r.y,n?n.originY:void 0)}function nT(t,e,r){t.min=r.min+e.min,t.max=t.min+ha(e)}function sH(t,e,r){nT(t.x,e.x,r.x),nT(t.y,e.y,r.y)}function sT(t,e,r){t.min=e.min-r.min,t.max=t.min+ha(e)}function ff(t,e,r){sT(t.x,e.x,r.x),sT(t.y,e.y,r.y)}function aH(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?Hr(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?Hr(r,t,n.max):Math.min(t,r)),t}function aT(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function iH(t,{top:e,left:r,bottom:n,right:s}){return{x:aT(t.x,r,s),y:aT(t.y,e,n)}}function iT(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function oH(t,e){return{x:iT(t.x,e.x),y:iT(t.y,e.y)}}function lH(t,e){let r=.5;const n=ha(t),s=ha(e);return s>n?r=Rd(e.min,e.max-n,t.min):n>s&&(r=Rd(t.min,t.max-s,e.min)),No(0,1,r)}function cH(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const tw=.35;function uH(t=tw){return t===!1?t=0:t===!0&&(t=tw),{x:oT(t,"left","right"),y:oT(t,"top","bottom")}}function oT(t,e,r){return{min:lT(t,e),max:lT(t,r)}}function lT(t,e){return typeof t=="number"?t:t[e]||0}const cT=()=>({translate:0,scale:1,origin:0,originPoint:0}),nd=()=>({x:cT(),y:cT()}),uT=()=>({min:0,max:0}),cn=()=>({x:uT(),y:uT()});function ja(t){return[t("x"),t("y")]}function r6({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function dH({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function hH(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Py(t){return t===void 0||t===1}function rw({scale:t,scaleX:e,scaleY:r}){return!Py(t)||!Py(e)||!Py(r)}function pc(t){return rw(t)||n6(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function n6(t){return dT(t.x)||dT(t.y)}function dT(t){return t&&t!=="0%"}function hx(t,e,r){const n=t-r,s=e*n;return r+s}function hT(t,e,r,n,s){return s!==void 0&&(t=hx(t,s,n)),hx(t,r,n)+e}function nw(t,e=0,r=1,n,s){t.min=hT(t.min,e,r,n,s),t.max=hT(t.max,e,r,n,s)}function s6(t,{x:e,y:r}){nw(t.x,e.translate,e.scale,e.originPoint),nw(t.y,r.translate,r.scale,r.originPoint)}const fT=.999999999999,mT=1.0000000000001;function fH(t,e,r,n=!1){const s=r.length;if(!s)return;e.x=e.y=1;let i,o;for(let l=0;l<s;l++){i=r[l],o=i.projectionDelta;const{visualElement:u}=i.options;u&&u.props.style&&u.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ad(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,s6(t,o)),n&&pc(i.latestValues)&&ad(t,i.latestValues))}e.x<mT&&e.x>fT&&(e.x=1),e.y<mT&&e.y>fT&&(e.y=1)}function sd(t,e){t.min=t.min+e,t.max=t.max+e}function pT(t,e,r,n,s=.5){const i=Hr(t.min,t.max,s);nw(t,e,r,i,n)}function ad(t,e){pT(t.x,e.x,e.scaleX,e.scale,e.originX),pT(t.y,e.y,e.scaleY,e.scale,e.originY)}function a6(t,e){return r6(hH(t.getBoundingClientRect(),e))}function mH(t,e,r){const n=a6(t,r),{scroll:s}=e;return s&&(sd(n.x,s.offset.x),sd(n.y,s.offset.y)),n}const i6=({current:t})=>t?t.ownerDocument.defaultView:null,pH=new WeakMap;class xH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=cn(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(N0(f).point)},i=(f,p)=>{const{drag:x,dragPropagation:v,onDragStart:w}=this.getProps();if(x&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=lz(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ja(_=>{let R=this.getAxisMotionValue(_).get()||0;if(Ii.test(R)){const{projection:j}=this.visualElement;if(j&&j.layout){const k=j.layout.layoutBox[_];k&&(R=ha(k)*(parseFloat(R)/100))}}this.originPoint[_]=R}),w&&Pr.postRender(()=>w(f,p)),G1(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(f,p)=>{const{dragPropagation:x,dragDirectionLock:v,onDirectionLock:w,onDrag:b}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:_}=p;if(v&&this.currentDirection===null){this.currentDirection=gH(_),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",p.point,_),this.updateAxis("y",p.point,_),this.visualElement.render(),b&&b(f,p)},l=(f,p)=>this.stop(f,p),u=()=>ja(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new JI(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:i6(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Pr.postRender(()=>i(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:s}=this.getProps();if(!n||!op(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=aH(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;r&&td(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=iH(s.layoutBox,r):this.constraints=!1,this.elastic=uH(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&ja(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=cH(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!td(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=mH(n,s.root,this.visualElement.getTransformPagePoint());let o=oH(s.layout.layoutBox,i);if(r){const l=r(dH(o));this.hasMutatedConstraints=!!l,l&&(o=r6(l))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},h=ja(f=>{if(!op(f,r,this.currentDirection))return;let p=u&&u[f]||{};o&&(p={min:0,max:0});const x=s?200:1e6,v=s?40:1e7,w={type:"inertia",velocity:n?e[f]:0,bounceStiffness:x,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...i,...p};return this.startAxisValueAnimation(f,w)});return Promise.all(h).then(l)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return G1(this.visualElement,e),n.start(Tb(e,n,0,r,this.visualElement,!1))}stopAnimation(){ja(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ja(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){ja(r=>{const{drag:n}=this.getProps();if(!op(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[r];i.set(e[r]-Hr(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!td(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};ja(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();s[o]=lH({min:u,max:u},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ja(o=>{if(!op(o,e,null))return;const l=this.getAxisMotionValue(o),{min:u,max:h}=this.constraints[o];l.set(Hr(u,h,s[o]))})}addListeners(){if(!this.visualElement.current)return;pH.set(this.visualElement,this);const e=this.visualElement.current,r=df(e,"pointerdown",u=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(u)}),n=()=>{const{dragConstraints:u}=this.getProps();td(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Pr.read(n);const o=Bf(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(ja(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=u[f].translate,p.set(p.get()+u[f].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=tw,dragMomentum:l=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function op(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function gH(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class vH extends $l{constructor(e){super(e),this.removeGroupControls=da,this.removeListeners=da,this.controls=new xH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||da}unmount(){this.removeGroupControls(),this.removeListeners()}}const xT=t=>(e,r)=>{t&&Pr.postRender(()=>t(e,r))};class yH extends $l{constructor(){super(...arguments),this.removePointerDownListener=da}onPointerDown(e){this.session=new JI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:i6(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:xT(e),onStart:xT(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&Pr.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=df(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Dp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Bh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(kt.test(t))t=parseFloat(t);else return t;const r=gT(t,e.target.x),n=gT(t,e.target.y);return`${r}% ${n}%`}},wH={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,s=Il.parse(t);if(s.length>5)return n;const i=Il.createTransformer(t),o=typeof s[0]!="number"?1:0,l=r.x.scale*e.x,u=r.y.scale*e.y;s[0+o]/=l,s[1+o]/=u;const h=Hr(l,u,.5);return typeof s[2+o]=="number"&&(s[2+o]/=h),typeof s[3+o]=="number"&&(s[3+o]/=h),i(s)}};class bH extends S.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=e;UU(_H),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Dp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Pr.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),rb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function o6(t){const[e,r]=$3(),n=S.useContext(K2);return a.jsx(bH,{...t,layoutGroup:n,switchLayoutGroup:S.useContext(Q3),isPresent:e,safeToRemove:r})}const _H={borderRadius:{...Bh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bh,borderTopRightRadius:Bh,borderBottomLeftRadius:Bh,borderBottomRightRadius:Bh,boxShadow:wH};function NH(t,e,r){const n=gs(t)?t:Mf(t);return n.start(Tb("",n,e,r)),n.animation}function EH(t){return t instanceof SVGElement&&t.tagName!=="svg"}const SH=(t,e)=>t.depth-e.depth;class kH{constructor(){this.children=[],this.isDirty=!1}add(e){xb(this.children,e),this.isDirty=!0}remove(e){gb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(SH),this.isDirty=!1,this.children.forEach(e)}}function TH(t,e){const r=Ri.now(),n=({timestamp:s})=>{const i=s-r;i>=e&&(Cl(n),t(i-e))};return Pr.read(n,!0),()=>Cl(n)}const l6=["TopLeft","TopRight","BottomLeft","BottomRight"],jH=l6.length,vT=t=>typeof t=="string"?parseFloat(t):t,yT=t=>typeof t=="number"||kt.test(t);function AH(t,e,r,n,s,i){s?(t.opacity=Hr(0,r.opacity!==void 0?r.opacity:1,CH(n)),t.opacityExit=Hr(e.opacity!==void 0?e.opacity:1,0,IH(n))):i&&(t.opacity=Hr(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<jH;o++){const l=`border${l6[o]}Radius`;let u=wT(e,l),h=wT(r,l);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||yT(u)===yT(h)?(t[l]=Math.max(Hr(vT(u),vT(h),n),0),(Ii.test(h)||Ii.test(u))&&(t[l]+="%")):t[l]=h}(e.rotate||r.rotate)&&(t.rotate=Hr(e.rotate||0,r.rotate||0,n))}function wT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const CH=c6(0,.5,TI),IH=c6(.5,.95,da);function c6(t,e,r){return n=>n<t?0:n>e?1:r(Rd(t,e,n))}function bT(t,e){t.min=e.min,t.max=e.max}function Na(t,e){bT(t.x,e.x),bT(t.y,e.y)}function _T(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function NT(t,e,r,n,s){return t-=e,t=hx(t,1/r,n),s!==void 0&&(t=hx(t,1/s,n)),t}function RH(t,e=0,r=1,n=.5,s,i=t,o=t){if(Ii.test(e)&&(e=parseFloat(e),e=Hr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Hr(i.min,i.max,n);t===i&&(l-=e),t.min=NT(t.min,e,r,l,s),t.max=NT(t.max,e,r,l,s)}function ET(t,e,[r,n,s],i,o){RH(t,e[r],e[n],e[s],e.scale,i,o)}const PH=["x","scaleX","originX"],DH=["y","scaleY","originY"];function ST(t,e,r,n){ET(t.x,e,PH,r?r.x:void 0,n?n.x:void 0),ET(t.y,e,DH,r?r.y:void 0,n?n.y:void 0)}function kT(t){return t.translate===0&&t.scale===1}function u6(t){return kT(t.x)&&kT(t.y)}function TT(t,e){return t.min===e.min&&t.max===e.max}function FH(t,e){return TT(t.x,e.x)&&TT(t.y,e.y)}function jT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function d6(t,e){return jT(t.x,e.x)&&jT(t.y,e.y)}function AT(t){return ha(t.x)/ha(t.y)}function CT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class LH{constructor(){this.members=[]}add(e){xb(this.members,e),e.scheduleRender()}remove(e){if(gb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(s=>e===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function OH(t,e,r){let n="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(r==null?void 0:r.z)||0;if((s||i||o)&&(n=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:h,rotate:f,rotateX:p,rotateY:x,skewX:v,skewY:w}=r;h&&(n=`perspective(${h}px) ${n}`),f&&(n+=`rotate(${f}deg) `),p&&(n+=`rotateX(${p}deg) `),x&&(n+=`rotateY(${x}deg) `),v&&(n+=`skewX(${v}deg) `),w&&(n+=`skewY(${w}deg) `)}const l=t.x.scale*e.x,u=t.y.scale*e.y;return(l!==1||u!==1)&&(n+=`scale(${l}, ${u})`),n||"none"}const xc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Qh=typeof window<"u"&&window.MotionDebug!==void 0,Dy=["","X","Y","Z"],MH={visibility:"hidden"},IT=1e3;let VH=0;function Fy(t,e,r,n){const{latestValues:s}=e;s[t]&&(r[t]=s[t],e.setStaticValue(t,0),n&&(n[t]=0))}function h6(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=wI(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",Pr,!(s||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&h6(n)}function f6({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},l=e==null?void 0:e()){this.id=VH++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Qh&&(xc.totalNodes=xc.resolvedTargetDeltas=xc.recalculatedProjection=0),this.nodes.forEach(zH),this.nodes.forEach(GH),this.nodes.forEach(KH),this.nodes.forEach($H),Qh&&window.MotionDebug.record(xc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new kH)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new vb),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=EH(o),this.instance=o;const{layoutId:u,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(h||u)&&(this.isLayoutDirty=!0),t){let p;const x=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=TH(x,250),Dp.hasAnimatedSinceResize&&(Dp.hasAnimatedSinceResize=!1,this.nodes.forEach(PT))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:x,hasRelativeTargetChanged:v,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||f.getDefaultTransition()||ZH,{onLayoutAnimationStart:_,onLayoutAnimationComplete:R}=f.getProps(),j=!this.targetLayout||!d6(this.targetLayout,w)||v,k=!x&&v;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||x&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,k);const F={...hb(b,"layout"),onPlay:_,onComplete:R};(f.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else x||PT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Cl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(XH),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&h6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(RT);return}this.isUpdating||this.nodes.forEach(WH),this.isUpdating=!1,this.nodes.forEach(qH),this.nodes.forEach(BH),this.nodes.forEach(UH),this.clearAllSnapshots();const l=Ri.now();Yn.delta=No(0,1e3/60,l-Yn.timestamp),Yn.timestamp=l,Yn.isProcessing=!0,Sy.update.process(Yn),Sy.preRender.process(Yn),Sy.render.process(Yn),Yn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,rb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(HH),this.sharedNodes.forEach(YH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=cn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const u=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!u6(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;o&&(l||pc(this.latestValues)||f)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),eW(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return cn();const u=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(tW))){const{scroll:f}=this.root;f&&(sd(u.x,f.offset.x),sd(u.y,f.offset.y))}return u}removeElementScroll(o){var l;const u=cn();if(Na(u,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return u;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:p,options:x}=f;f!==this.root&&p&&x.layoutScroll&&(p.wasRoot&&Na(u,o),sd(u.x,p.offset.x),sd(u.y,p.offset.y))}return u}applyTransform(o,l=!1){const u=cn();Na(u,o);for(let h=0;h<this.path.length;h++){const f=this.path[h];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&ad(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),pc(f.latestValues)&&ad(u,f.latestValues)}return pc(this.latestValues)&&ad(u,this.latestValues),u}removeTransform(o){const l=cn();Na(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!pc(h.latestValues))continue;rw(h.latestValues)&&h.updateSnapshot();const f=cn(),p=h.measurePageBox();Na(f,p),ST(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return pc(this.latestValues)&&ST(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Yn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(o||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:x}=this.options;if(!(!this.layout||!(p||x))){if(this.resolvedRelativeTargetAt=Yn.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cn(),this.relativeTargetOrigin=cn(),ff(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Na(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=cn(),this.targetWithTransforms=cn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),sH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Na(this.target,this.layout.layoutBox),s6(this.target,this.targetDelta)):Na(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cn(),this.relativeTargetOrigin=cn(),ff(this.relativeTargetOrigin,this.target,v.target),Na(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Qh&&xc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||rw(this.parent.latestValues)||n6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Yn.timestamp&&(h=!1),h)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;Na(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,v=this.treeScale.y;fH(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=cn());const{target:w}=l;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(_T(this.prevProjectionDelta.x,this.projectionDelta.x),_T(this.prevProjectionDelta.y,this.projectionDelta.y)),hf(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==v||!CT(this.projectionDelta.x,this.prevProjectionDelta.x)||!CT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),Qh&&xc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=nd(),this.projectionDelta=nd(),this.projectionDeltaWithTransform=nd()}setAnimationOrigin(o,l=!1){const u=this.snapshot,h=u?u.latestValues:{},f={...this.latestValues},p=nd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const x=cn(),v=u?u.source:void 0,w=this.layout?this.layout.source:void 0,b=v!==w,_=this.getStack(),R=!_||_.members.length<=1,j=!!(b&&!R&&this.options.crossfade===!0&&!this.path.some(JH));this.animationProgress=0;let k;this.mixTargetDelta=F=>{const L=F/1e3;DT(p.x,o.x,L),DT(p.y,o.y,L),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ff(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),QH(this.relativeTarget,this.relativeTargetOrigin,x,L),k&&FH(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=cn()),Na(k,this.relativeTarget)),b&&(this.animationValues=f,AH(f,h,this.latestValues,L,j,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Cl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pr.update(()=>{Dp.hasAnimatedSinceResize=!0,this.currentAnimation=NH(0,IT,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(IT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:h,latestValues:f}=o;if(!(!l||!u||!h)){if(this!==o&&this.layout&&h&&m6(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||cn();const p=ha(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const x=ha(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+x}Na(l,u),ad(l,f),hf(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new LH),this.sharedNodes.get(o).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const h={};u.z&&Fy("z",o,h,this.animationValues);for(let f=0;f<Dy.length;f++)Fy(`rotate${Dy[f]}`,o,h,this.animationValues),Fy(`skew${Dy[f]}`,o,h,this.animationValues);o.render();for(const f in h)o.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);o.scheduleRender()}getProjectionStyles(o){var l,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return MH;const h={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Rp(o==null?void 0:o.pointerEvents)||"",h.transform=f?f(this.latestValues,""):"none",h;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Rp(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!pc(this.latestValues)&&(b.transform=f?f({},""):"none",this.hasProjected=!1),b}const x=p.animationValues||p.latestValues;this.applyTransformsToTarget(),h.transform=OH(this.projectionDeltaWithTransform,this.treeScale,x),f&&(h.transform=f(x,h.transform));const{x:v,y:w}=this.projectionDelta;h.transformOrigin=`${v.origin*100}% ${w.origin*100}% 0`,p.animationValues?h.opacity=p===this?(u=(l=x.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:h.opacity=p===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const b in ox){if(x[b]===void 0)continue;const{correct:_,applyTo:R}=ox[b],j=h.transform==="none"?x[b]:_(x[b],p);if(R){const k=R.length;for(let F=0;F<k;F++)h[R[F]]=j}else h[b]=j}return this.options.layoutId&&(h.pointerEvents=p===this?Rp(o==null?void 0:o.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(RT),this.root.sharedNodes.clear()}}}function BH(t){t.updateLayout()}function UH(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:i}=t.options,o=r.source!==t.layout.source;i==="size"?ja(p=>{const x=o?r.measuredBox[p]:r.layoutBox[p],v=ha(x);x.min=n[p].min,x.max=x.min+v}):m6(i,r.layoutBox,n)&&ja(p=>{const x=o?r.measuredBox[p]:r.layoutBox[p],v=ha(n[p]);x.max=x.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+v)});const l=nd();hf(l,n,r.layoutBox);const u=nd();o?hf(u,t.applyTransform(s,!0),r.measuredBox):hf(u,n,r.layoutBox);const h=!u6(l);let f=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:x,layout:v}=p;if(x&&v){const w=cn();ff(w,r.layoutBox,x.layoutBox);const b=cn();ff(b,n,v.layoutBox),d6(w,b)||(f=!0),p.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=w,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:u,layoutDelta:l,hasLayoutChanged:h,hasRelativeTargetChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function zH(t){Qh&&xc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function $H(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function HH(t){t.clearSnapshot()}function RT(t){t.clearMeasurements()}function WH(t){t.isLayoutDirty=!1}function qH(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function PT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function GH(t){t.resolveTargetDelta()}function KH(t){t.calcProjection()}function XH(t){t.resetSkewAndRotation()}function YH(t){t.removeLeadSnapshot()}function DT(t,e,r){t.translate=Hr(e.translate,0,r),t.scale=Hr(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function FT(t,e,r,n){t.min=Hr(e.min,r.min,n),t.max=Hr(e.max,r.max,n)}function QH(t,e,r,n){FT(t.x,e.x,r.x,n),FT(t.y,e.y,r.y,n)}function JH(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const ZH={duration:.45,ease:[.4,0,.1,1]},LT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),OT=LT("applewebkit/")&&!LT("chrome/")?Math.round:da;function MT(t){t.min=OT(t.min),t.max=OT(t.max)}function eW(t){MT(t.x),MT(t.y)}function m6(t,e,r){return t==="position"||t==="preserve-aspect"&&!nH(AT(e),AT(r),.2)}function tW(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const rW=f6({attachResizeListener:(t,e)=>Bf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ly={current:void 0},p6=f6({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ly.current){const t=new rW({});t.mount(window),t.setOptions({layoutScroll:!0}),Ly.current=t}return Ly.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),nW={pan:{Feature:yH},drag:{Feature:vH,ProjectionNode:p6,MeasureLayout:o6}};function VT(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&Pr.postRender(()=>i(e,N0(e)))}class sW extends $l{mount(){const{current:e}=this.node;e&&(this.unmount=nz(e,r=>(VT(this.node,r,"Start"),n=>VT(this.node,n,"End"))))}unmount(){}}class aW extends $l{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=_0(Bf(this.node.current,"focus",()=>this.onFocus()),Bf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function BT(t,e,r){const{props:n}=t;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&Pr.postRender(()=>i(e,N0(e)))}class iW extends $l{mount(){const{current:e}=this.node;e&&(this.unmount=oz(e,r=>(BT(this.node,r,"Start"),(n,{success:s})=>BT(this.node,n,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const sw=new WeakMap,Oy=new WeakMap,oW=t=>{const e=sw.get(t.target);e&&e(t)},lW=t=>{t.forEach(oW)};function cW({root:t,...e}){const r=t||document;Oy.has(r)||Oy.set(r,{});const n=Oy.get(r),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(lW,{root:t,...e})),n[s]}function uW(t,e,r){const n=cW(e);return sw.set(t,r),n.observe(t),()=>{sw.delete(t),n.unobserve(t)}}const dW={some:0,all:1};class hW extends $l{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:dW[s]},l=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),x=h?f:p;x&&x(u)};return uW(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(fW(e,r))&&this.startObserver()}unmount(){}}function fW({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const mW={inView:{Feature:hW},tap:{Feature:iW},focus:{Feature:aW},hover:{Feature:sW}},pW={layout:{ProjectionNode:p6,MeasureLayout:o6}},aw={current:null},x6={current:!1};function xW(){if(x6.current=!0,!!Q2)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>aw.current=t.matches;t.addListener(e),e()}else aw.current=!1}const gW=[...UI,us,Il],vW=t=>gW.find(BI(t)),UT=new WeakMap;function yW(t,e,r){for(const n in e){const s=e[n],i=r[n];if(gs(s))t.addValue(n,s);else if(gs(i))t.addValue(n,Mf(s,{owner:t}));else if(i!==s)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(n);t.addValue(n,Mf(o!==void 0?o:s,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const zT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class wW{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Eb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Ri.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Pr.render(this.render,!1,!0))};const{latestValues:u,renderState:h,onUpdate:f}=o;this.onUpdate=f,this.latestValues=u,this.baseTarget={...u},this.initialValues=r.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=bg(r),this.isVariantNode=X3(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...x}=this.scrapeMotionValuesFromProps(r,{},this);for(const v in x){const w=x[v];u[v]!==void 0&&gs(w)&&w.set(u[v],!1)}}mount(e){this.current=e,UT.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),x6.current||xW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:aw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){UT.delete(this.current),this.projection&&this.projection.unmount(),Cl(this.notifyUpdate),Cl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=nu.has(e),s=r.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Pr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Pd){const r=Pd[e];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):cn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<zT.length;n++){const s=zT[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=yW(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Mf(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){var n;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(MI(s)||AI(s))?s=parseFloat(s):!vW(s)&&Il.test(r)&&(s=FI(e,r)),this.setBaseTarget(e,gs(s)?s.get():s)),gs(s)?s.get():s}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const o=sb(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(s=o[e])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!gs(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new vb),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class g6 extends wW{constructor(){super(...arguments),this.KeyframeResolver=zI}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gs(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function bW(t){return window.getComputedStyle(t)}class _W extends g6{constructor(){super(...arguments),this.type="html",this.renderInstance=sI}readValueFromInstance(e,r){if(nu.has(r)){const n=Nb(r);return n&&n.default||0}else{const n=bW(e),s=(tI(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:r}){return a6(e,r)}build(e,r,n){ob(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return db(e,r,n)}}class NW extends g6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=cn}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(nu.has(r)){const n=Nb(r);return n&&n.default||0}return r=aI.has(r)?r:tb(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return lI(e,r,n)}build(e,r,n){lb(e,r,this.isSVGTag,n.transformTemplate)}renderInstance(e,r,n,s){iI(e,r,n,s)}mount(e){this.isSVGTag=ub(e.tagName),super.mount(e)}}const EW=(t,e)=>nb(t)?new NW(e):new _W(e,{allowProjection:t!==S.Fragment}),SW=YU({...K$,...mW,...nW,...pW},EW),Ke=dU(SW),Ns=()=>{var e,r,n,s,i,o,l,u,h,f,p;const t=Fa();return{...t,isAuthenticated:!!t.currentUser,displayName:((e=t.userProfile)==null?void 0:e.displayName)||((r=t.currentUser)==null?void 0:r.displayName),email:((n=t.userProfile)==null?void 0:n.email)||((s=t.currentUser)==null?void 0:s.email),role:((i=t.userProfile)==null?void 0:i.role)||"student",progress:((o=t.userProfile)==null?void 0:o.progress)||{},completedLessons:((l=t.userProfile)==null?void 0:l.completedLessons)||[],currentLesson:((u=t.userProfile)==null?void 0:u.currentLesson)||1,totalTimeSpent:((h=t.userProfile)==null?void 0:h.totalTimeSpent)||0,totalPagesEngaged:((f=t.userProfile)==null?void 0:f.totalPagesEngaged)||0,achievements:((p=t.userProfile)==null?void 0:p.achievements)||[]}},jb=()=>{const{currentUser:t,userProfile:e}=Fa();return t?{uid:(t==null?void 0:t.uid)||(e==null?void 0:e.uid)||null,displayName:(e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||"",email:(e==null?void 0:e.email)||(t==null?void 0:t.email)||"",role:(e==null?void 0:e.role)||"student",progress:(e==null?void 0:e.progress)||{},completedLessons:(e==null?void 0:e.completedLessons)||[],currentLesson:(e==null?void 0:e.currentLesson)||1,totalTimeSpent:(e==null?void 0:e.totalTimeSpent)||0,totalPagesEngaged:(e==null?void 0:e.totalPagesEngaged)||0,achievements:(e==null?void 0:e.achievements)||[]}:{displayName:null,email:null,role:null,progress:{},completedLessons:[],currentLesson:1,totalTimeSpent:0,totalPagesEngaged:0,achievements:[]}},fx="/assets/cyber-logo-sfA0eDTq.png",sl={container:{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.4,staggerChildren:.05}}},item:{hidden:{opacity:0,y:15},visible:{opacity:1,y:0,transition:{duration:.3}}},logo:{hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1,transition:{duration:.5,ease:"easeOut"}}}},$T={row1:[{icon:Rr,number:"5,000+",label:" ",color:"from-emerald-500 to-teal-600"},{icon:j3,number:"50+",label:" ",color:"from-purple-500 to-indigo-600"},{icon:Pf,number:"100%",label:" ",color:"from-orange-500 to-red-600"},{icon:Uc,number:"24/7",label:" ",color:"from-cyan-500 to-blue-600"},{icon:Id,text:" ",color:"from-yellow-500 to-amber-600"},{icon:th,text:" ",color:"from-green-500 to-emerald-600"}],row2:[{icon:Df,text:" ",color:"from-blue-500 to-indigo-600"},{icon:R2,text:"AI ",color:"from-pink-500 to-rose-600"},{icon:xg,text:" 4.9/5",color:"from-yellow-400 to-orange-500"},{icon:gg,text:"95% ",color:"from-lime-500 to-green-600"},{icon:Al,text:" 24/7",color:"from-violet-500 to-purple-600"},{icon:M2,text:" ",color:"from-sky-500 to-blue-500"}]},kW={student:{icon:Ff,title:"",description:"       .      !",buttonText:" "},teacher:{icon:W2,title:"",description:"    .  ,       .",buttonText:" "},system_manager:{icon:ts,title:" ",description:"   ,  .    .",buttonText:" "}},TW=()=>{const t=S.useRef(null);return S.useEffect(()=>{const e=t.current;if(!e)return;const r=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight;const s="01".split(""),i=18,o=e.width/i,l=new Array(Math.floor(o)).fill(1),u=Math.min(o,35),h=(v,w)=>{const b=r.createLinearGradient(v,w,v,w+i);return b.addColorStop(0,"#00ff41"),b.addColorStop(.5,"#3B82F6"),b.addColorStop(1,"#1e40af"),b},p=setInterval(()=>{r.fillStyle="rgba(0, 0, 0, 0.08)",r.fillRect(0,0,e.width,e.height);for(let v=0;v<u;v++){const w=s[Math.floor(Math.random()*s.length)],b=v*i,_=l[v]*i;r.fillStyle=h(b,_),r.font=`bold ${i}px 'Courier New', monospace`,r.fillText(w,b,_),Math.random()>.95&&(r.shadowColor="#00ff41",r.shadowBlur=5,r.fillText(w,b,_),r.shadowBlur=0),l[v]*i>e.height&&Math.random()>.99&&(l[v]=0),l[v]++}},100),x=()=>{e.width=window.innerWidth,e.height=window.innerHeight};return window.addEventListener("resize",x),()=>{clearInterval(p),window.removeEventListener("resize",x)}},[]),a.jsx("canvas",{ref:t,className:"fixed inset-0 z-0 opacity-30",style:{pointerEvents:"none"}})},jW=()=>a.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none z-0",children:[a.jsx("div",{className:"absolute top-10 left-10 text-blue-300 opacity-10",children:a.jsx(fg,{size:24})}),a.jsx("div",{className:"absolute top-20 right-20 text-blue-400 opacity-10",children:a.jsx(D3,{size:28})}),a.jsx("div",{className:"absolute bottom-20 left-20 text-blue-300 opacity-10",children:a.jsx(Pf,{size:22})}),a.jsx("div",{className:"absolute bottom-10 right-10 text-blue-400 opacity-10",children:a.jsx(Uc,{size:26})}),a.jsx("div",{className:"absolute top-1/2 left-1/4 text-blue-300 opacity-10",children:a.jsx(P2,{size:24})}),a.jsx("div",{className:"absolute top-1/3 right-1/3 text-blue-400 opacity-10",children:a.jsx(M2,{size:30})})]}),AW=t=>t.includes("emerald")?"#10b981":t.includes("purple")?"#8b5cf6":t.includes("orange")?"#f97316":t.includes("cyan")?"#06b6d4":t.includes("yellow")?"#eab308":t.includes("green")?"#22c55e":t.includes("blue")?"#3b82f6":t.includes("pink")?"#ec4899":t.includes("lime")?"#84cc16":t.includes("violet")?"#8b5cf6":t.includes("sky")?"#0ea5e9":"#3b82f6",HT=S.memo(({item:t,index:e,variants:r})=>a.jsxs(Ke.div,{className:"relative overflow-hidden rounded-xl p-4 bg-slate-800/50 backdrop-blur-xl border-2 hover:bg-slate-800/70 transition-all duration-300",style:{borderColor:AW(t.color)},variants:r,children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 to-cyan-600 opacity-10"}),a.jsx("div",{className:"relative z-10 text-center",children:t.number?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${t.color} rounded-lg flex items-center justify-center mx-auto mb-3 shadow-lg`,children:a.jsx(t.icon,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:t.number}),a.jsx("div",{className:"text-xs text-gray-300",children:t.label})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${t.color} rounded-lg flex items-center justify-center mx-auto mb-3 shadow-lg`,children:a.jsx(t.icon,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-sm text-gray-300 font-medium",children:t.text})]})})]})),CW=({role:t,icon:e,title:r,description:n,buttonText:s,onClick:i,isSelected:o})=>{const u=(()=>{switch(t){case"student":return{gradient:"from-blue-500 to-cyan-600",hover:"hover:from-blue-400 hover:to-cyan-500",border:"border-blue-500/30",glow:"shadow-blue-500/25"};case"teacher":return{gradient:"from-green-500 to-emerald-600",hover:"hover:from-green-400 hover:to-emerald-500",border:"border-green-500/30",glow:"shadow-green-500/25"};case"system_manager":return{gradient:"from-purple-500 to-indigo-600",hover:"hover:from-purple-400 hover:to-indigo-500",border:"border-purple-500/30",glow:"shadow-purple-500/25"};default:return{gradient:"from-gray-500 to-gray-600",hover:"hover:from-gray-400 hover:to-gray-500",border:"border-gray-500/30",glow:"shadow-gray-500/25"}}})();return a.jsxs(Ke.div,{className:`relative overflow-hidden rounded-2xl p-8 cursor-pointer transition-all duration-300 border-2 ${o?"bg-slate-800/95 backdrop-blur-2xl shadow-xl":"bg-slate-800/50 backdrop-blur-xl hover:bg-slate-800/70"} ${u.border}`,whileHover:{scale:1.02},whileTap:{scale:.98},onClick:i,children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${u.gradient} opacity-5`}),a.jsxs("div",{className:"relative z-10 text-center",children:[a.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${u.gradient} rounded-xl flex items-center justify-center mx-auto mb-6 shadow-lg ${u.glow}`,children:a.jsx(e,{className:"w-8 h-8 text-white"})}),a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:r}),a.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-6",children:n}),a.jsx(Ke.button,{className:`w-full py-3 px-6 bg-gradient-to-r ${u.gradient} ${u.hover} text-white rounded-xl font-semibold text-sm transition-all duration-300 shadow-lg ${u.glow}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:s})]})]})},Uh=({label:t,type:e="text",name:r,value:n,onChange:s,error:i,placeholder:o,required:l=!1,min:u,max:h,options:f=null,autocomplete:p})=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:t}),f?a.jsx("select",{name:r,value:n,onChange:s,className:"w-full px-4 py-3 bg-slate-700/50 border-2 border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 text-sm backdrop-blur-sm",children:f.map(x=>a.jsx("option",{value:x.value,children:x.label},x.value))}):a.jsx("input",{type:e,name:r,value:n,onChange:s,min:u,max:h,required:l,className:`w-full px-4 py-3 bg-slate-700/50 border-2 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 transition-all duration-300 text-sm backdrop-blur-sm ${i?"border-red-500 focus:ring-red-500/20":"border-slate-600 focus:ring-blue-500/20 focus:border-blue-500"}`,placeholder:o}),i&&a.jsx("p",{className:"text-red-400 text-xs mt-2",children:i[0]})]}),IW=()=>{const{login:t,signup:e}=Ns(),[r,n]=S.useState("student"),[s,i]=S.useState(!1),[o,l]=S.useState(!0),[u,h]=S.useState(!1),[f,p]=S.useState(!1),[x,v]=S.useState({}),[w,b]=S.useState({firstName:"",lastName:"",age:"",sex:"male",email:"",password:""}),_=k=>{const{name:F,value:L}=k.target;b(I=>({...I,[F]:L})),x[F]&&v(I=>({...I,[F]:null}))},R=async k=>{k.preventDefault(),console.log(" Login attempt started:",{email:w.email,isLogin:o,selectedRole:r}),p(!0),v({});try{if(!w.email||!w.password){v({email:w.email?null:["Email is required"],password:w.password?null:["Password is required"]}),p(!1);return}if(console.log(" Attempting authentication with:",{email:w.email,isLogin:o,selectedRole:r}),o){console.log(" Attempting login...");const F=await t(w.email,w.password);console.log(" Login successful:",F),Ws.success(" !")}else{console.log(" Attempting signup...");const F=`${w.firstName} ${w.lastName}`,L=await e(w.email,w.password,F,r,w);console.log(" Signup successful:",L),Ws.success(" !")}}catch(F){console.error(" Authentication error:",F),Ws.error(F.message||" ")}finally{p(!1)}},j=k=>{n(k),i(!0)};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 relative overflow-hidden",children:[a.jsx(TW,{}),a.jsx(jW,{}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center opacity-25 pointer-events-none z-0",children:a.jsx("img",{src:fx,alt:"Background Logo",className:"w-[2800px] h-[2800px] object-contain drop-shadow-[0_0_80px_rgba(59,130,246,0.5)] animate-smooth-spin"})}),a.jsx("div",{className:"fixed inset-0 z-0 pointer-events-none",children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/30 via-blue-900/20 to-black/30 animate-gradient-move backdrop-blur-sm"})}),a.jsx(Ke.div,{className:"relative z-10 min-h-screen flex flex-col pt-8",variants:sl.container,initial:"hidden",animate:"visible",children:a.jsxs("section",{className:"flex-1 flex flex-col justify-center items-center px-6 py-16 mt-4",children:[a.jsx(Ke.div,{className:"text-center mb-6 z-10 relative -mt-[200px]",variants:sl.logo,children:a.jsx(Ke.div,{className:"pt-0 pb-1 flex items-center justify-center mx-auto relative",children:a.jsx(Ke.img,{src:fx,alt:"Logo",className:"w-[760px] h-[400px] object-contain animate-blink-glow",whileHover:{scale:1.05},transition:{duration:.3}})})}),a.jsx(Ke.div,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 mb-12 max-w-6xl mx-auto -mt-[100px]",variants:sl.item,children:$T.row1.map((k,F)=>a.jsx(HT,{item:k,index:F,variants:sl.item},F))}),a.jsx(Ke.div,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 mb-12 max-w-6xl mx-auto",variants:sl.item,children:$T.row2.map((k,F)=>a.jsx(HT,{item:k,index:F,variants:sl.item},F))}),a.jsx(Ke.div,{variants:sl.container,className:"grid grid-cols-1 lg:grid-cols-3 gap-6 w-full max-w-6xl mx-auto mb-16",children:Object.entries(kW).map(([k,F])=>a.jsx("div",{className:"flex justify-center",children:a.jsx(CW,{role:k,icon:F.icon,title:F.title,description:F.description,buttonText:F.buttonText,onClick:()=>j(k),isSelected:r===k})},k))}),r==="system_manager"&&a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:a.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 max-w-md mx-auto",children:a.jsxs("p",{className:"text-blue-300 text-sm",children:[a.jsx(ts,{className:"w-4 h-4 inline mr-2"}),"   .    ."]})})}),a.jsx(bn,{children:s&&a.jsxs(Ke.div,{initial:{opacity:0,scale:.9,y:30},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:30},transition:{duration:.5,ease:"easeOut"},className:"bg-slate-800/95 backdrop-blur-2xl rounded-2xl p-8 shadow-xl border-2 border-blue-500/50 max-w-md w-full relative overflow-hidden",children:[a.jsx(Ke.div,{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-blue-600/5"}),a.jsxs("div",{className:"text-center mb-8 relative z-10",children:[a.jsx(Ke.button,{onClick:()=>i(!1),className:"text-gray-300 hover:text-white transition-colors mb-6 text-lg font-medium",whileHover:{scale:1.05},whileTap:{scale:.95},children:"   "}),a.jsx(Ke.h2,{className:"text-2xl font-bold text-white mb-4 text-center",initial:{opacity:0,y:-15},animate:{opacity:1,y:0},transition:{duration:.4},children:o?" !":" "})]}),a.jsxs("form",{onSubmit:R,className:"space-y-6 relative z-10",children:[!o&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Uh,{label:" ",name:"firstName",value:w.firstName,onChange:_,error:x.firstName,placeholder:" ",required:!0}),a.jsx(Uh,{label:" ",name:"lastName",value:w.lastName,onChange:_,error:x.lastName,placeholder:" ",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Uh,{label:"",type:"number",name:"age",value:w.age,onChange:_,error:x.age,placeholder:"",min:"1",max:"120",required:!0}),a.jsx(Uh,{label:"",name:"sex",value:w.sex,onChange:_,options:[{value:"male",label:""},{value:"female",label:""}]})]})]}),a.jsx(Uh,{label:"",type:"email",name:"email",value:w.email,onChange:_,error:x.email,placeholder:"   ",required:!0}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:u?"text":"password",name:"password",value:w.password,onChange:_,className:`w-full px-4 py-3 pr-12 bg-slate-700/50 border-2 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 transition-all duration-300 text-sm backdrop-blur-sm ${x.password?"border-red-500 focus:ring-red-500/20":"border-slate-600 focus:ring-blue-500/20 focus:border-blue-500"}`,placeholder:"   ",required:!0,autocomplete:"current-password"}),a.jsx(Ke.button,{type:"button",onClick:()=>h(!u),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:u?a.jsx(F2,{className:"w-5 h-5"}):a.jsx(Pa,{className:"w-5 h-5"})})]}),x.password&&a.jsx("p",{className:"text-red-400 text-xs mt-2",children:x.password[0]})]}),a.jsx(Ke.button,{type:"submit",disabled:f,className:"w-full py-4 px-8 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl font-semibold text-base hover:from-blue-500 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-blue-500/25",whileHover:{scale:1.02},whileTap:{scale:.98},children:f?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),o?"...":"..."]}):a.jsxs("div",{className:"flex items-center justify-center",children:[o?"":"",a.jsx(Rf,{className:"w-5 h-5 mr-2"})]})}),a.jsx("div",{className:"text-center",children:a.jsx("button",{type:"button",onClick:()=>l(!o),className:"text-gray-300 hover:text-white transition-colors text-sm font-medium",children:o?"  ?  ":"  ?  "})})]})]})}),a.jsx(Ke.footer,{className:"mt-16 mb-6 text-center",variants:sl.item,children:a.jsxs("div",{className:"bg-slate-800/40 backdrop-blur-xl rounded-xl p-5 border border-slate-700/50 max-w-2xl mx-auto",children:[a.jsx(Ke.div,{className:"text-gray-300 text-lg font-medium",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.6,duration:.4},children:"  "}),a.jsx(Ke.div,{className:"text-gray-400 text-sm mt-1",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.8,duration:.4},children:"Israel Cyber Campus - All Rights Reserved"})]})})]})})]})},Fd=new Map,RW=5*60*1e3,PW=async t=>{try{const e=Dt(He,"sessions"),r=await x0(e,{...t,status:"active",currentSlide:0,unlockedSlides:[0],startTime:Ft(),lastActivity:Ft(),connectedStudents:[],studentProgress:{},teacherNotes:{},isLocked:!1});return Ir("SESSION_CREATED",{sessionId:r.id,teacherId:t.teacherId,lessonId:t.lessonId}),r.id}catch(e){throw console.error("Error creating session:",e),new Error("Failed to create session")}},Ab=async t=>{try{const e=Fd.get(t);if(e&&Date.now()-e.timestamp<RW)return console.log(" Using cached session data for:",t),e.data;const r=bt(He,"sessions",t),n=await ur(r);if(!n.exists())throw new Error("Session not found");const s={id:n.id,...n.data()};return Fd.set(t,{data:s,timestamp:Date.now()}),s}catch(e){throw console.error("Error getting session:",e),new Error("Failed to get session")}},kc=async(t,e)=>{try{const r=bt(He,"sessions",t);await Un(r,{currentSlide:e,lastActivity:Ft()});const n=Fd.get(t);n&&(n.data.currentSlide=e,n.data.lastActivity=new Date)}catch(r){throw console.error("Error updating session slide:",r),new Error("Failed to update session slide")}},DW=async(t,e,r)=>{const n=bt(He,"sessions",t);await Un(n,{connectedStudents:f3({id:e,name:r}),lastActivity:Ft()});const s=await ur(n);if(s.exists()){const o=s.data().studentProgress||{};o[e]={...o[e]||{},joinedAt:Ft(),lastActivity:Ft(),currentSlide:0},await Un(n,{studentProgress:o})}Ir("STUDENT_JOINED_SESSION",{sessionId:t,studentId:e,studentName:r,timestamp:new Date().toISOString()})},FW=async(t,e,r)=>{const n=bt(He,"sessions",t);await Un(n,{connectedStudents:m3({id:e,name:r}),lastActivity:Ft()}),Ir("STUDENT_LEFT_SESSION",{sessionId:t,studentId:e,timestamp:new Date().toISOString()})},Uf=async t=>{try{const e=bt(He,"sessions",t);await Un(e,{status:"ended",endTime:Ft(),lastActivity:Ft()}),Fd.delete(t),Ir("SESSION_ENDED",{sessionId:t,timestamp:new Date().toISOString()})}catch(e){throw console.error("Error ending session:",e),new Error("Failed to end session")}},v6=async t=>{try{const e=Dt(He,"sessions"),r=nr(e,yr("teacherId","==",t),yr("status","==","active")),n=await zt(r),s=[];return n.forEach(i=>{s.push({id:i.id,...i.data()})}),s.sort((i,o)=>{var h,f,p,x;const l=((f=(h=i.startTime)==null?void 0:h.toDate)==null?void 0:f.call(h))||i.startTime||new Date(0);return(((x=(p=o.startTime)==null?void 0:p.toDate)==null?void 0:x.call(p))||o.startTime||new Date(0))-l}),s}catch(e){throw console.error("Error getting teacher active sessions:",e),new Error("Failed to get active sessions")}},y6=async t=>{try{const e=Dt(He,"sessions"),r=nr(e,yr("status","==","active"),yr("studentIds","array-contains",t)),n=await zt(r),s=[];return n.forEach(i=>{s.push({id:i.id,...i.data()})}),s.sort((i,o)=>{var h,f,p,x;const l=((f=(h=i.startTime)==null?void 0:h.toDate)==null?void 0:f.call(h))||i.startTime||new Date(0);return(((x=(p=o.startTime)==null?void 0:p.toDate)==null?void 0:x.call(p))||o.startTime||new Date(0))-l}),s}catch(e){throw console.error("Error getting student available sessions:",e),new Error("Failed to get available sessions")}},Eg=(t,e)=>{if(!t)return console.warn(" listenToSession called with null/undefined sessionId"),()=>{};const r=bt(He,"sessions",t);return Jd(r,n=>{if(n.exists()){const s={id:n.id,...n.data()};Fd.set(t,{data:s,timestamp:Date.now()});try{e(s)}catch(i){console.error("Error in session listener callback:",i)}}else Fd.delete(t),e(null)},n=>{console.error("Error listening to session:",n)})},LW=async t=>{var e,r,n,s;try{const i=bt(He,"sessions",t),o=await ur(i);if(!o.exists())return!1;const l=o.data(),u=((r=(e=l.lastActivity)==null?void 0:e.toDate)==null?void 0:r.call(e))||new Date(l.lastActivity),h=new Date,f=h.getTime()-u.getTime(),p=5*60*1e3,x=((s=(n=l.startTime)==null?void 0:n.toDate)==null?void 0:s.call(n))||new Date(l.startTime),v=h.getTime()-x.getTime(),w=4*60*60*1e3;return(f>p||v>w)&&l.status==="active"?(console.log(`Auto-ending stale session ${t}, inactive for ${f/1e3} seconds, duration: ${v/1e3/60} minutes`),await Uf(t),!0):!1}catch(i){return console.error("Error checking stale session:",i),!1}},OW=async t=>{try{const e=Dt(He,"sessions"),r=nr(e,yr("teacherId","==",t),yr("status","==","active")),n=await zt(r);let s=0;for(const i of n.docs)await LW(i.id)&&s++;return console.log(`Cleaned up ${s} stale sessions for teacher ${t}`),s}catch(e){return console.error("Error cleaning up stale sessions:",e),0}},MW=async(t,e=20)=>{try{const r=Dt(He,"sessions"),n=nr(r,yr("teacherId","==",t),yr("status","==","ended")),s=await zt(n),i=[];s.forEach(x=>{const v=x.data();i.push({id:x.id,...v})}),i.sort((x,v)=>{var _,R,j,k;const w=((R=(_=x.endTime)==null?void 0:_.toDate)==null?void 0:R.call(_))||new Date(x.endTime)||new Date(0);return(((k=(j=v.endTime)==null?void 0:j.toDate)==null?void 0:k.call(j))||new Date(v.endTime)||new Date(0))-w});const o=i.slice(0,e),l=o.length,u=o.reduce((x,v)=>{var w;return x+(((w=v.connectedStudents)==null?void 0:w.length)||0)},0),h=l>0?Math.round(u/l):0,f=o.map(x=>{var _,R,j,k,F;const v=((R=(_=x.startTime)==null?void 0:_.toDate)==null?void 0:R.call(_))||new Date(x.startTime),w=((k=(j=x.endTime)==null?void 0:j.toDate)==null?void 0:k.call(j))||new Date(x.endTime),b=Math.floor((w.getTime()-v.getTime())/(1e3*60));return{sessionId:x.id,lessonId:x.lessonId,lessonName:x.lessonName,className:x.className,date:v,duration:b,attendance:((F=x.connectedStudents)==null?void 0:F.length)||0,students:x.connectedStudents||[]}}),p={};return o.forEach(x=>{x.connectedStudents&&x.connectedStudents.forEach(v=>{var b,_;p[v.id]||(p[v.id]={name:v.name,sessionsAttended:0,totalTimeSpent:0,lastAttendance:null}),p[v.id].sessionsAttended++,p[v.id].totalTimeSpent+=x.duration||0;const w=((_=(b=x.startTime)==null?void 0:b.toDate)==null?void 0:_.call(b))||new Date(x.startTime);(!p[v.id].lastAttendance||w>p[v.id].lastAttendance)&&(p[v.id].lastAttendance=w)})}),Object.values(p).forEach(x=>{x.attendancePercentage=Math.round(x.sessionsAttended/l*100),x.averageTimePerSession=Math.round(x.totalTimeSpent/x.sessionsAttended)}),{totalSessions:l,averageAttendance:h,totalAttendance:u,detailedSessions:f,studentAttendance:p}}catch(r){throw console.error("Error getting teacher session history:",r),new Error("Failed to get session history")}},VW=(t,e)=>{const r=Dt(He,"sessions"),n=nr(r,yr("status","==","active"),yr("studentIds","array-contains",t));return Jd(n,s=>{var l,u;let i=null;const o=[];if(s.forEach(h=>{o.push({id:h.id,...h.data()})}),o.length>0){o.sort((w,b)=>{var j,k,F,L;const _=((k=(j=w.startTime)==null?void 0:j.toDate)==null?void 0:k.call(j))||w.startTime||new Date(0);return(((L=(F=b.startTime)==null?void 0:F.toDate)==null?void 0:L.call(F))||b.startTime||new Date(0))-_});const h=o[0],f=((u=(l=h.lastActivity)==null?void 0:l.toDate)==null?void 0:u.call(l))||new Date(h.lastActivity),x=new Date().getTime()-f.getTime(),v=10*60*1e3;x<=v?i=h:console.log("Most recent session is stale, not showing notification")}e(i)},s=>{console.error("Error listening to current active session:",s)})},w6=({position:t="top-right"})=>{const e=ns(),{currentUser:r,role:n}=Ns(),[s,i]=S.useState([]),[o,l]=S.useState(!1),[u,h]=S.useState(!1);S.useEffect(()=>{if(!(r!=null&&r.uid))return;const v=async()=>{try{h(!0);let b=[];n==="teacher"?b=await v6(r.uid):n==="student"&&(b=await y6(r.uid)),i(b),l(b.length>0),h(!1)}catch(b){console.error("Error loading active sessions:",b),h(!1)}};v();const w=setInterval(v,3e4);return()=>clearInterval(w)},[r==null?void 0:r.uid,n]);const f=v=>{e(n==="teacher"?`/teacher/session/${v}`:`/student/session/${v}`)},p=()=>{switch(t){case"top-right":return"fixed top-4 right-4 z-50";case"top-left":return"fixed top-4 left-4 z-50";case"bottom-right":return"fixed bottom-4 right-4 z-50";case"bottom-left":return"fixed bottom-4 left-4 z-50";case"inline":return"relative";default:return"fixed top-4 right-4 z-50"}};if(!o||u)return null;const x=s.reduce((v,w)=>{var b;return v+(((b=w.connectedStudents)==null?void 0:b.length)||0)},0);return a.jsx("div",{className:p(),children:a.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 rounded-lg shadow-2xl border border-green-500/30 backdrop-blur-sm p-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),a.jsx(F3,{className:"w-4 h-4 text-white"})]}),a.jsx("div",{className:"text-white",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-sm font-semibold",children:[s.length," ",s.length>1?"":""," ",s.length>1?"":""]}),n==="teacher"&&a.jsxs("div",{className:"flex items-center space-x-1 text-green-200",children:[a.jsx(Rr,{className:"w-3 h-3"}),a.jsx("span",{className:"text-xs",children:x})]})]})}),a.jsxs("button",{onClick:()=>{var v;return f((v=s[0])==null?void 0:v.id)},className:"bg-white/20 hover:bg-white/30 rounded px-2 py-1 text-white text-xs font-medium transition-colors flex items-center space-x-1",children:[a.jsx(jn,{className:"w-3 h-3"}),a.jsx("span",{children:""})]})]}),n==="teacher"&&s.length>1&&a.jsx("div",{className:"mt-2 pt-2 border-t border-green-500/30",children:a.jsxs("div",{className:"space-y-1",children:[s.slice(0,3).map(v=>{var w;return a.jsxs("button",{onClick:()=>f(v.id),className:"w-full text-left text-xs text-green-100 hover:text-white transition-colors flex items-center justify-between",children:[a.jsx("span",{className:"truncate",children:v.lessonName}),a.jsx("span",{className:"text-green-200",children:((w=v.connectedStudents)==null?void 0:w.length)||0})]},v.id)}),s.length>3&&a.jsxs("div",{className:"text-xs text-green-200 text-center",children:["+",s.length-3," "]})]})})]})})},BW=()=>{const{currentUser:t,userProfile:e}=Ns(),r=(t==null?void 0:t.displayName)||(t==null?void 0:t.email)||"User",n=(t==null?void 0:t.role)||"student";return a.jsx("header",{className:"bg-black/80 backdrop-blur-xl border-b border-green-500/30 p-3",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:fx,alt:"Cyber Logo",className:"w-12 h-12 animate-pulse"}),a.jsx("div",{className:"absolute inset-0 bg-green-500/20 rounded-full animate-ping"})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-green-400 to-cyan-400 bg-clip-text text-transparent animate-pulse",children:"Israel Cyber Campus"}),a.jsx("p",{className:"text-green-400 text-xs font-mono",children:"Terminal v2.0.1"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[a.jsx(w6,{position:"inline"}),a.jsx(Ei,{to:n==="teacher"?"/teacher/dashboard":"/student/roadmap",children:a.jsxs("button",{className:"group relative bg-gradient-to-r from-green-600 to-cyan-600 hover:from-green-500 hover:to-cyan-500 text-white px-4 py-2 rounded-lg font-bold transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-green-500/25 border border-green-400/30 text-sm",children:[a.jsx("div",{className:"absolute inset-0 bg-green-500/20 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("span",{className:"relative flex items-center space-x-2 space-x-reverse",children:[a.jsx($2,{className:"w-4 h-4"}),a.jsx("span",{children:""})]})]})}),(n==="student"||n==="teacher")&&a.jsx(Ei,{to:n==="teacher"?"/teacher/profile":"/student/profile",children:a.jsxs("button",{className:"group relative bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white px-4 py-2 rounded-lg font-bold transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-blue-500/25 border border-blue-400/30 text-sm",children:[a.jsx("div",{className:"absolute inset-0 bg-blue-500/20 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("span",{className:"relative flex items-center space-x-2 space-x-reverse",children:[a.jsx(Di,{className:"w-4 h-4"}),a.jsx("span",{children:""})]})]})}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-white font-semibold text-sm",children:r}),a.jsx("p",{className:"text-green-400 text-xs font-mono",children:n==="teacher"?"TEACHER":(e==null?void 0:e.displayName)||"STUDENT"})]})]})]})})};let _c=null,Nc=null;const UW=5*60*1e3,E0=async(t=!1)=>{try{if(!t&&_c&&Nc&&Date.now()-Nc<UW)return _c;const e=Dt(He,"lessons"),r=nr(e,ca("originalId","asc")),s=(await zt(r)).docs.map(i=>{var o,l,u,h;return{id:i.id,...i.data(),createdAt:((l=(o=i.data().createdAt)==null?void 0:o.toDate)==null?void 0:l.call(o))||new Date,updatedAt:((h=(u=i.data().updatedAt)==null?void 0:u.toDate)==null?void 0:h.call(u))||new Date}});return _c=s,Nc=Date.now(),s}catch(e){console.warn("Database unavailable, falling back to local lessons:",e.message);try{const{lessons:r}=await Vn(async()=>{const{lessons:s}=await import("./lessons-D2Quzv_E.js");return{lessons:s}},[]),n=r.map((s,i)=>{var o,l,u;return{id:`local-${s.id||i+1}`,originalId:s.id||i+1,title:s.title,description:s.description,difficulty:s.difficulty||"beginner",targetAge:s.targetAge||"all",estimatedDuration:s.estimatedDuration||30,slides:((o=s.content)==null?void 0:o.slides)||[],totalSlides:((u=(l=s.content)==null?void 0:l.slides)==null?void 0:u.length)||0,createdAt:new Date,updatedAt:new Date,isActive:!0,source:"local_fallback"}});return _c=n,Nc=Date.now(),n}catch(r){throw console.error("Both database and local fallback failed:",r),new Error("Failed to load lessons. Please check your connection and try again.")}}},S0=async(t=!1)=>{try{const e=await E0(t);return await Promise.all(e.map(async n=>{try{const s=await Sg(n.id);return{...n,slides:s,totalSlides:s.length}}catch{return{...n,slides:[],totalSlides:0}}}))}catch{throw new Error("Failed to load lessons with slide counts from database. Please check your connection and try again.")}},zW=async t=>{var e,r,n,s;try{const i=bt(He,"lessons",t),o=await ur(i);if(o.exists())return{id:o.id,...o.data(),createdAt:((r=(e=o.data().createdAt)==null?void 0:e.toDate)==null?void 0:r.call(e))||new Date,updatedAt:((s=(n=o.data().updatedAt)==null?void 0:n.toDate)==null?void 0:s.call(n))||new Date};throw new Error("Lesson not found")}catch(i){throw new Error(`Failed to get lesson: ${i.message}`)}},WT=async t=>{try{const e=bt(Dt(He,"lessons")),r={...t,id:e.id,createdAt:Ft(),updatedAt:Ft(),createdBy:"system",updatedBy:"system",version:1,isActive:!0};return await Sn(e,r),_c=null,Nc=null,e.id}catch(e){throw new Error(`Failed to create lesson: ${e.message}`)}},$W=async(t,e)=>{try{const r=bt(He,"lessons",t),n={...e,updatedAt:Ft(),updatedBy:"system"};return await Un(r,n),_c=null,Nc=null,t}catch(r){throw new Error(`Failed to update lesson: ${r.message}`)}},HW=async t=>{try{const e=await zt(Dt(He,"lessons",t,"slides")),r=g0(He);e.docs.forEach(s=>{r.delete(s.ref)});const n=bt(He,"lessons",t);return r.delete(n),await r.commit(),_c=null,Nc=null,!0}catch(e){throw new Error(`Failed to delete lesson: ${e.message}`)}},Sg=async t=>{try{const e=String(t);try{const r=nr(Dt(He,"lessons",e,"slides"),ca("sortOrder","asc")),n=await zt(r),s=new Map;n.docs.forEach((o,l)=>{var x,v,w,b;const u=o.data(),h=o.id,f=u.originalId||h,p=((v=(x=u.updatedAt)==null?void 0:x.toDate)==null?void 0:v.call(x))||((b=(w=u.createdAt)==null?void 0:w.toDate)==null?void 0:b.call(w))||new Date(0);(!s.has(f)||p>s.get(f).timestamp)&&s.set(f,{docId:h,data:u,timestamp:p})});const i=Array.from(s.values()).map(({data:o,docId:l},u)=>{var p,x,v,w;const h=o.originalId||l;return{id:`${e}_${h}`,originalId:h,lessonId:e,...o,createdAt:((x=(p=o.createdAt)==null?void 0:p.toDate)==null?void 0:x.call(p))||new Date,updatedAt:((w=(v=o.updatedAt)==null?void 0:v.toDate)==null?void 0:w.call(v))||new Date}});if(i.sort((o,l)=>{const u=o.order||0,h=l.order||0;return u!==h?u-h:o.originalId.localeCompare(l.originalId)}),i.length>0)return i}catch{}try{const r=nr(Dt(He,"lessons",e,"slides"),ca("order","asc")),n=await zt(r),s=new Map;n.docs.forEach(o=>{var p,x,v,w;const l=o.data(),u=o.id,h=l.originalId||u,f=`${e}_${h}`;s.set(f,{id:f,originalId:h,lessonId:e,...l,createdAt:((x=(p=l.createdAt)==null?void 0:p.toDate)==null?void 0:x.call(p))||new Date,updatedAt:((w=(v=l.updatedAt)==null?void 0:v.toDate)==null?void 0:w.call(v))||new Date})});const i=Array.from(s.values());if(i.sort((o,l)=>{const u=o.order||0,h=l.order||0;return u!==h?u-h:o.originalId.localeCompare(l.originalId)}),i.length>0)return i}catch{}try{const r=nr(Dt(He,"lessons",e,"slides")),n=await zt(r),s=new Map;n.docs.forEach(o=>{var p,x,v,w;const l=o.data(),u=o.id,h=l.originalId||u,f=`${e}_${h}`;s.set(f,{id:f,originalId:h,lessonId:e,...l,createdAt:((x=(p=l.createdAt)==null?void 0:p.toDate)==null?void 0:x.call(p))||new Date,updatedAt:((w=(v=l.updatedAt)==null?void 0:v.toDate)==null?void 0:w.call(v))||new Date})});const i=Array.from(s.values());if(i.sort((o,l)=>{const u=o.order||0,h=l.order||0;if(u!==h)return u-h;const f=parseInt(o.originalId.replace(/\D/g,""))||0,p=parseInt(l.originalId.replace(/\D/g,""))||0;return f-p}),i.length>0)return i}catch{}try{const r=nr(Dt(He,"lessons",e,"slides")),n=await zt(r),s=new Map;n.docs.forEach(o=>{var p,x,v,w;const l=o.data(),u=o.id,h=l.originalId||u,f=`${e}_${h}`;s.set(f,{id:f,originalId:h,lessonId:e,...l,createdAt:((x=(p=l.createdAt)==null?void 0:p.toDate)==null?void 0:x.call(p))||new Date,updatedAt:((w=(v=l.updatedAt)==null?void 0:v.toDate)==null?void 0:w.call(v))||new Date})});const i=Array.from(s.values());if(i.sort((o,l)=>{const u=o.order||0,h=l.order||0;if(u!==h)return u-h;const f=parseInt(o.originalId.replace(/\D/g,""))||0,p=parseInt(l.originalId.replace(/\D/g,""))||0;return f-p}),i.length>0)return i}catch{}try{console.warn("No database slides found, falling back to local slides for lesson:",t);const{lessons:r}=await Vn(async()=>{const{lessons:i}=await import("./lessons-D2Quzv_E.js");return{lessons:i}},[]),n=parseInt(t),s=r.find(i=>i.id===n);if(s&&s.content&&s.content.slides)return s.content.slides.map((o,l)=>({id:`local-${n}-${o.id||l+1}`,originalId:o.id||l+1,lessonId:t,title:o.title||`Slide ${l+1}`,type:o.type||"presentation",content:o.content||o,order:o.order||l+1,createdAt:new Date,updatedAt:new Date,source:"local_fallback"}))}catch(r){console.warn("Local fallback also failed:",r.message)}return[]}catch(e){console.warn("Database error, trying local fallback for slides:",e.message);try{const{lessons:r}=await Vn(async()=>{const{lessons:i}=await import("./lessons-D2Quzv_E.js");return{lessons:i}},[]),n=parseInt(t),s=r.find(i=>i.id===n);if(s&&s.content&&s.content.slides)return s.content.slides.map((o,l)=>({id:`local-${n}-${o.id||l+1}`,originalId:o.id||l+1,lessonId:t,title:o.title||`Slide ${l+1}`,type:o.type||"presentation",content:o.content||o,order:o.order||l+1,createdAt:new Date,updatedAt:new Date,source:"local_fallback"}))}catch(r){console.error("Both database and local fallback failed for slides:",r)}throw new Error(`Failed to load slides for lesson ${t}: ${e.message}`)}},qT=async(t,e=null)=>{try{const r=e||t.originalId||`slide-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,n={...t,lessonId:String((t==null?void 0:t.lessonId)||"")},s=bt(He,"lessons",n.lessonId,"slides",r),i={...n,id:r,createdAt:Ft(),updatedAt:Ft(),lastEdited:Ft(),version:1};if(await Sn(s,i),(await ur(s)).exists())return r;throw new Error("Slide was not created properly")}catch(r){throw r.code==="permission-denied"?new Error("Permission denied. Please check your Firebase security rules."):r.code==="unavailable"?new Error("Firebase is temporarily unavailable. Please try again."):new Error(`Failed to create slide: ${r.message}`)}},WW=async(t,e)=>{try{const r={...e,title:String((e==null?void 0:e.title)||""),type:String((e==null?void 0:e.type)||"presentation"),order:Number(e==null?void 0:e.order)||1,lessonId:String((e==null?void 0:e.lessonId)||""),content:(e==null?void 0:e.content)||{}},n=bt(He,"lessons",r.lessonId,"slides",t);if((await ur(n)).exists()){const i={...r,updatedAt:Ft(),lastEdited:Ft(),version:(e.version||0)+1};if(await Un(n,i),(await ur(n)).exists())return t;throw new Error("Slide was not saved properly")}else{const i={...r,id:t,createdAt:Ft(),updatedAt:Ft(),lastEdited:Ft(),version:1};if(await Sn(n,i),(await ur(n)).exists())return t;throw new Error("Slide was not created properly")}}catch(r){throw r.code==="permission-denied"?new Error("Permission denied. Please check your Firebase security rules."):r.code==="unavailable"?new Error("Firebase is temporarily unavailable. Please try again."):new Error(`Failed to save slide: ${r.message}`)}},qW=async(t,e)=>{try{const r=bt(He,"lessons",e,"slides",t),n=await ur(r);if(!n.exists())throw new Error("Slide not found");const s=n.data();await lg(r);try{const{cleanupTeacherNotesForLesson:i}=await Vn(async()=>{const{cleanupTeacherNotesForLesson:h}=await Promise.resolve().then(()=>mB);return{cleanupTeacherNotesForLesson:h}},void 0),u=(await Sg(e)).map(h=>h.originalId).filter(h=>h!==t);await i(e,u)}catch{}return!0}catch(r){throw new Error(`Failed to delete slide: ${r.message}`)}},kg=async t=>{var e,r,n,s,i,o,l;try{let u=await zW(t);if(!u){const h=Dt(He,"lessons"),f=nr(h,yr("originalId","==",parseInt(t))),p=await zt(f);if(!p.empty){const x=p.docs[0];u={id:x.id,...x.data(),createdAt:((r=(e=x.data().createdAt)==null?void 0:e.toDate)==null?void 0:r.call(e))||new Date,updatedAt:((s=(n=x.data().updatedAt)==null?void 0:n.toDate)==null?void 0:s.call(n))||new Date}}}if(u){const h=await Sg(u.id);return{...u,slides:h}}else throw new Error(`No lesson found for ID: ${t}`)}catch(u){console.warn("Database unavailable, falling back to local lesson:",u.message);try{const{lessons:h}=await Vn(async()=>{const{lessons:x}=await import("./lessons-D2Quzv_E.js");return{lessons:x}},[]),f=parseInt(t),p=h.find(x=>x.id===f);if(p)return{id:`local-${p.id}`,originalId:p.id,title:p.title,description:p.description,difficulty:p.difficulty||"beginner",targetAge:p.targetAge||"all",estimatedDuration:p.estimatedDuration||30,slides:((i=p.content)==null?void 0:i.slides)||[],totalSlides:((l=(o=p.content)==null?void 0:o.slides)==null?void 0:l.length)||0,createdAt:new Date,updatedAt:new Date,isActive:!0,source:"local_fallback"};throw new Error(`No lesson found for ID: ${t}`)}catch(h){throw console.error("Both database and local fallback failed:",h),new Error(`Failed to fetch lesson with slides: ${u.message}`)}}},My=async t=>{try{console.log(" getNextLesson called with:",t,"type:",typeof t);const e=await E0();console.log(" Available lessons:",e.map(s=>({id:s.id,originalId:s.originalId,title:s.title})));let r=-1;if(r=e.findIndex(s=>s.id===t),console.log(" Search by Firestore ID result:",r),r===-1&&(r=e.findIndex(s=>s.originalId===parseInt(t)),console.log(" Search by originalId (parsed) result:",r)),r===-1&&(r=e.findIndex(s=>s.originalId===t),console.log(" Search by originalId (string) result:",r)),r===-1&&(r=e.findIndex(s=>s.originalId===Number(t)),console.log(" Search by originalId (Number) result:",r)),r===-1){console.error(" Current lesson not found:",{currentLessonId:t,type:typeof t,parsedId:parseInt(t),numberId:Number(t),availableLessons:e.map(s=>({id:s.id,originalId:s.originalId,title:s.title}))});try{console.log(" Trying local fallback for getNextLesson...");const{lessons:s}=await Vn(async()=>{const{lessons:l}=await import("./lessons-D2Quzv_E.js");return{lessons:l}},[]),i=parseInt(t),o=s.findIndex(l=>l.id===i);if(o!==-1){const l=s[o+1];if(l)return console.log(" Found next lesson in local data:",l.title),{id:`local-${l.id}`,originalId:l.id,title:l.title,description:l.description,source:"local_fallback"}}}catch(s){console.error(" Local fallback also failed:",s)}throw new Error("Current lesson not found")}const n=e[r+1];return console.log(" Next lesson found:",n?n.title:"No next lesson"),n||null}catch(e){throw console.error(" getNextLesson error:",e),new Error(`Failed to get next lesson: ${e.message}`)}};var Vy,GT;function GW(){if(GT)return Vy;GT=1;var t={linear:function(e,r,n,s){var i=n-r;return i*e/s+r},easeInQuad:function(e,r,n,s){var i=n-r;return i*(e/=s)*e+r},easeOutQuad:function(e,r,n,s){var i=n-r;return-i*(e/=s)*(e-2)+r},easeInOutQuad:function(e,r,n,s){var i=n-r;return(e/=s/2)<1?i/2*e*e+r:-i/2*(--e*(e-2)-1)+r},easeInCubic:function(e,r,n,s){var i=n-r;return i*(e/=s)*e*e+r},easeOutCubic:function(e,r,n,s){var i=n-r;return i*((e=e/s-1)*e*e+1)+r},easeInOutCubic:function(e,r,n,s){var i=n-r;return(e/=s/2)<1?i/2*e*e*e+r:i/2*((e-=2)*e*e+2)+r},easeInQuart:function(e,r,n,s){var i=n-r;return i*(e/=s)*e*e*e+r},easeOutQuart:function(e,r,n,s){var i=n-r;return-i*((e=e/s-1)*e*e*e-1)+r},easeInOutQuart:function(e,r,n,s){var i=n-r;return(e/=s/2)<1?i/2*e*e*e*e+r:-i/2*((e-=2)*e*e*e-2)+r},easeInQuint:function(e,r,n,s){var i=n-r;return i*(e/=s)*e*e*e*e+r},easeOutQuint:function(e,r,n,s){var i=n-r;return i*((e=e/s-1)*e*e*e*e+1)+r},easeInOutQuint:function(e,r,n,s){var i=n-r;return(e/=s/2)<1?i/2*e*e*e*e*e+r:i/2*((e-=2)*e*e*e*e+2)+r},easeInSine:function(e,r,n,s){var i=n-r;return-i*Math.cos(e/s*(Math.PI/2))+i+r},easeOutSine:function(e,r,n,s){var i=n-r;return i*Math.sin(e/s*(Math.PI/2))+r},easeInOutSine:function(e,r,n,s){var i=n-r;return-i/2*(Math.cos(Math.PI*e/s)-1)+r},easeInExpo:function(e,r,n,s){var i=n-r;return e==0?r:i*Math.pow(2,10*(e/s-1))+r},easeOutExpo:function(e,r,n,s){var i=n-r;return e==s?r+i:i*(-Math.pow(2,-10*e/s)+1)+r},easeInOutExpo:function(e,r,n,s){var i=n-r;return e===0?r:e===s?r+i:(e/=s/2)<1?i/2*Math.pow(2,10*(e-1))+r:i/2*(-Math.pow(2,-10*--e)+2)+r},easeInCirc:function(e,r,n,s){var i=n-r;return-i*(Math.sqrt(1-(e/=s)*e)-1)+r},easeOutCirc:function(e,r,n,s){var i=n-r;return i*Math.sqrt(1-(e=e/s-1)*e)+r},easeInOutCirc:function(e,r,n,s){var i=n-r;return(e/=s/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+r:i/2*(Math.sqrt(1-(e-=2)*e)+1)+r},easeInElastic:function(e,r,n,s){var i=n-r,o,l,u;return u=1.70158,l=0,o=i,e===0?r:(e/=s)===1?r+i:(l||(l=s*.3),o<Math.abs(i)?(o=i,u=l/4):u=l/(2*Math.PI)*Math.asin(i/o),-(o*Math.pow(2,10*(e-=1))*Math.sin((e*s-u)*(2*Math.PI)/l))+r)},easeOutElastic:function(e,r,n,s){var i=n-r,o,l,u;return u=1.70158,l=0,o=i,e===0?r:(e/=s)===1?r+i:(l||(l=s*.3),o<Math.abs(i)?(o=i,u=l/4):u=l/(2*Math.PI)*Math.asin(i/o),o*Math.pow(2,-10*e)*Math.sin((e*s-u)*(2*Math.PI)/l)+i+r)},easeInOutElastic:function(e,r,n,s){var i=n-r,o,l,u;return u=1.70158,l=0,o=i,e===0?r:(e/=s/2)===2?r+i:(l||(l=s*(.3*1.5)),o<Math.abs(i)?(o=i,u=l/4):u=l/(2*Math.PI)*Math.asin(i/o),e<1?-.5*(o*Math.pow(2,10*(e-=1))*Math.sin((e*s-u)*(2*Math.PI)/l))+r:o*Math.pow(2,-10*(e-=1))*Math.sin((e*s-u)*(2*Math.PI)/l)*.5+i+r)},easeInBack:function(e,r,n,s,i){var o=n-r;return i===void 0&&(i=1.70158),o*(e/=s)*e*((i+1)*e-i)+r},easeOutBack:function(e,r,n,s,i){var o=n-r;return i===void 0&&(i=1.70158),o*((e=e/s-1)*e*((i+1)*e+i)+1)+r},easeInOutBack:function(e,r,n,s,i){var o=n-r;return i===void 0&&(i=1.70158),(e/=s/2)<1?o/2*(e*e*(((i*=1.525)+1)*e-i))+r:o/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+r},easeInBounce:function(e,r,n,s){var i=n-r,o;return o=t.easeOutBounce(s-e,0,i,s),i-o+r},easeOutBounce:function(e,r,n,s){var i=n-r;return(e/=s)<1/2.75?i*(7.5625*e*e)+r:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+r:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+r:i*(7.5625*(e-=2.625/2.75)*e+.984375)+r},easeInOutBounce:function(e,r,n,s){var i=n-r,o;return e<s/2?(o=t.easeInBounce(e*2,0,i,s),o*.5+r):(o=t.easeOutBounce(e*2-s,0,i,s),o*.5+i*.5+r)}};return Vy=t,Vy}var KW=GW();function XW(t){return t*Math.PI/180}function na(t,e){return t+Math.random()*(e-t)}function YW(t,e){return Math.floor(t+Math.random()*(e-t+1))}var mf;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(mf||(mf={}));var ol;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(ol||(ol={}));const QW=1e3/60;class JW{constructor(e,r,n,s){this.getOptions=r;const{colors:i,initialVelocityX:o,initialVelocityY:l}=this.getOptions();this.context=e,this.x=n,this.y=s,this.w=na(5,20),this.h=na(5,20),this.radius=na(5,10),this.vx=typeof o=="number"?na(-o,o):na(o.min,o.max),this.vy=typeof l=="number"?na(-l,0):na(l.min,l.max),this.shape=YW(0,2),this.angle=XW(na(0,360)),this.angularSpin=na(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=na(0,1),this.rotationDirection=na(0,1)?ol.Positive:ol.Negative}update(e){const{gravity:r,wind:n,friction:s,opacity:i,drawShape:o}=this.getOptions(),l=e/QW;this.x+=this.vx*l,this.y+=this.vy*l,this.vy+=r*l,this.vx+=n*l,this.vx*=s**l,this.vy*=s**l,this.rotateY>=1&&this.rotationDirection===ol.Positive?this.rotationDirection=ol.Negative:this.rotateY<=-1&&this.rotationDirection===ol.Negative&&(this.rotationDirection=ol.Positive);const u=.1*this.rotationDirection*l;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case mf.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case mf.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case mf.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class ZW{constructor(e,r){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=na(this.x,this.w+this.x),i=na(this.y,this.h+this.y);return new JW(this.context,this.getOptions,s,i)},this.animate=s=>{const{canvas:i,context:o,particlesGenerated:l,lastNumberOfPieces:u}=this,{run:h,recycle:f,numberOfPieces:p,debug:x,tweenFunction:v,tweenDuration:w}=this.getOptions();if(!h)return!1;const b=this.particles.length,_=f?b:l;if(_<p){u!==p&&(this.tweenProgress=0,this.tweenFrom=_,this.lastNumberOfPieces=p),this.tweenProgress=Math.min(w,Math.max(0,this.tweenProgress+s));const R=v(this.tweenProgress,this.tweenFrom,p,w),j=Math.round(R-_);for(let k=0;k<j;k++)this.particles.push(this.getParticle());this.particlesGenerated+=j}x&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${b}`,i.width-10,i.height-20));for(let R=this.particles.length-1;R>=0;R--){const j=this.particles[R];j.update(s),(j.y>i.height||j.y<-100||j.x>i.width+100||j.x<-100)&&(f&&_<=p?this.particles[R]=this.getParticle():this.removeParticleAt(R))}return b>0||_<p},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.getOptions=r}}const Cb={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:KW.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class eq{constructor(e,r){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...Cb,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:i,onConfettiComplete:o,frameRate:l},canvas:u,context:h}=this,f=Math.min(s-this.lastFrameTime,50);if(l&&f<1e3/l){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(l?f%l:0),i&&(h.fillStyle="white",h.clearRect(0,0,u.width,u.height)),this.generator.animate(f)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.generator=new ZW(this.canvas,()=>this.options),this.options=r,this.update()}get options(){return this._options}set options(e){var s,i;const r=(s=this._options)==null?void 0:s.run,n=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&n===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&r===!1&&this.update()}}const tq=Ic.createRef();class Ib extends Ic.Component{constructor(e){super(e),this.canvas=Ic.createRef(),this.canvas=e.canvasRef||tq}componentDidMount(){if(this.canvas.current){const e=By(this.props)[0];this.confetti=new eq(this.canvas.current,e)}}componentDidUpdate(){const e=By(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,r]=By(this.props),n={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...r.style};return a.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...r,style:n})}}Ib.defaultProps={...Cb};Ib.displayName="ReactConfetti";function By(t){const e={},r={},n={},s=[...Object.keys(Cb),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const o in t){const l=t[o];s.includes(o)?e[o]=l:i.includes(o)?i[o]=l:n[o]=l}return[e,n,r]}const iw=Ic.forwardRef((t,e)=>a.jsx(Ib,{canvasRef:e,...t})),ut=({variant:t="primary",size:e="md",loading:r=!1,disabled:n=!1,className:s="",children:i,onClick:o,type:l="button",ariaLabel:u,...h})=>{const f="inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",p={primary:"bg-cyber-blue hover:bg-blue-700 text-white focus:ring-cyber-blue shadow-lg hover:shadow-xl transform hover:scale-105",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-600",outline:"border-2 border-cyber-blue text-cyber-blue hover:bg-cyber-blue hover:text-white focus:ring-cyber-blue",ghost:"text-cyber-blue hover:bg-cyber-blue/10 focus:ring-cyber-blue",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-600 shadow-lg hover:shadow-xl",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-600 shadow-lg hover:shadow-xl"},x={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg",xl:"px-8 py-4 text-xl"},v=`${f} ${p[t]} ${x[e]} ${s}`,w=b=>{!r&&!n&&o&&o(b)};return a.jsxs("button",{type:l,className:v,disabled:n||r,onClick:w,"aria-label":u,"aria-busy":r,...h,children:[r&&a.jsx(R3,{className:"w-4 h-4 mr-2 animate-spin"}),i]})},k0=()=>{var _;const t=ns(),{currentUser:e}=Ns(),[r,n]=S.useState(null),[s,i]=S.useState(!1),[o,l]=S.useState(0),[u,h]=S.useState(!0),[f,p]=S.useState(!1),x=S.useCallback(R=>{var P,B,z,O;if(!R||R.status!=="active")return!1;const j=((B=(P=R.lastActivity)==null?void 0:P.toDate)==null?void 0:B.call(P))||new Date(R.lastActivity),k=new Date,F=k.getTime()-j.getTime(),L=5*60*1e3;if(F>L)return console.log("Session is stale, last activity was",F/1e3,"seconds ago"),!1;const I=((O=(z=R.startTime)==null?void 0:z.toDate)==null?void 0:O.call(z))||new Date(R.startTime),N=k.getTime()-I.getTime(),T=4*60*60*1e3;return N>T?(console.log("Session has been running too long, auto-ending"),!1):!0},[]);S.useEffect(()=>{if(!(e!=null&&e.uid))return;let R=null,j=0;const k=3,F=()=>{try{console.log(" Setting up live session listener for student:",e.uid),R=VW(e.uid,L=>{if(L){console.log(" Received session update:",L.lessonName);const I=x(L);n(L),h(I),i(I),p(!1)}else console.log(" No active session found"),n(null),i(!1),h(!1),p(!1)}),j=0}catch(L){console.error(" Error setting up session listener:",L),j++,j<k?(console.log(` Retrying session listener (${j}/${k})...`),setTimeout(F,2e3*j)):(console.error(" Max retries reached for session listener"),p(!1))}};return p(!0),F(),()=>{R&&(console.log(" Cleaning up session listener"),R())}},[e==null?void 0:e.uid,x]),S.useEffect(()=>{if(!(r!=null&&r.startTime))return;const R=setInterval(()=>{var F,L;const j=((L=(F=r.startTime)==null?void 0:F.toDate)==null?void 0:L.call(F))||new Date(r.startTime),k=Math.floor((Date.now()-j.getTime())/1e3);l(k)},1e3);return()=>clearInterval(R)},[r==null?void 0:r.startTime]);const v=()=>{if(!r||!u){Ie.error("       "),i(!1);return}try{console.log(" Student joining session:",r.id),t(`/student/session/${r.id}`),Ie.success("  ...")}catch(R){console.error("Error joining session:",R),Ie.error("   ")}},w=()=>{i(!1)},b=R=>{const j=Math.floor(R/60),k=R%60;return`${j}:${k.toString().padStart(2,"0")}`};return f||!s||!r?null:a.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-md w-full",children:a.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 rounded-lg shadow-2xl border border-green-500/30 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-green-500/30",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),a.jsx(F3,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-white font-semibold text-sm",children:"  "})]}),a.jsx("button",{onClick:w,className:"text-white/80 hover:text-white transition-colors",children:a.jsx(Wr,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:r.lessonName}),a.jsx("p",{className:"text-green-100 text-sm",children:r.className})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-green-100",children:[a.jsx(Al,{className:"w-4 h-4"}),a.jsx("span",{children:b(o)})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-green-100",children:[a.jsx(Rr,{className:"w-4 h-4"}),a.jsxs("span",{children:[((_=r.connectedStudents)==null?void 0:_.length)||0," "]})]})]}),a.jsxs("div",{className:"bg-green-500/20 rounded-lg p-3 border border-green-500/30",children:[a.jsxs("p",{className:"text-green-100 text-sm",children:["   ",r.currentSlide+1]}),a.jsx("p",{className:"text-green-200 text-xs mt-1",children:"      "})]}),a.jsxs(ut,{onClick:v,variant:"primary",size:"lg",className:"w-full bg-white text-green-600 hover:bg-green-50 transition-colors flex items-center justify-center space-x-2 font-semibold",children:[a.jsx(jn,{className:"w-4 h-4"}),a.jsx("span",{children:"  "})]}),!u&&a.jsx("div",{className:"bg-yellow-500/20 rounded-lg p-3 border border-yellow-500/30",children:a.jsxs("div",{className:"flex items-center space-x-2 text-yellow-200",children:[a.jsx(To,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:"    "})]})})]})})]})})},rq=()=>{const[t,e]=S.useState([]);return S.useEffect(()=>{const r=()=>{const s="01",i=Math.floor(Math.random()*20)+10;let o="";for(let l=0;l<i;l++)o+=s[Math.floor(Math.random()*s.length)];return o},n=setInterval(()=>{e(s=>{const i=[...s,r()];return i.length>15?i.slice(1):i})},100);return()=>clearInterval(n)},[]),a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-green-500/5 to-transparent"}),t.map((r,n)=>a.jsx(Ke.div,{initial:{opacity:0,x:-100},animate:{opacity:.3,x:0},exit:{opacity:0,x:100},transition:{duration:2,ease:"linear"},className:"absolute text-green-400 font-mono text-xs whitespace-nowrap",style:{top:`${n/15*100}%`,left:`${Math.random()*100}%`,transform:`translateX(${Math.random()*200-100}px)`},children:r},n))]})},nq=t=>({1:ts,2:kB,3:Ad,4:$2,5:D3,6:Pf,7:Df,8:KB,9:Pa,10:FB,11:fg,12:jo,13:R2,14:L3,15:P2,16:Id,17:Pf,18:M2})[t]||ts,sq=()=>{const t=ns(),{userProfile:e,currentUser:r}=Ns(),{displayName:n,role:s}=jb();Ol();const[i,o]=S.useState([]),[l,u]=S.useState(null),[h,f]=S.useState(null),[p,x]=S.useState(new Set),[v,w]=S.useState(new Set),[b,_]=S.useState(!1),[R,j]=S.useState(null),[k,F]=S.useState({width:window.innerWidth,height:window.innerHeight}),[L,I]=S.useState(null);S.useEffect(()=>{(async()=>{try{const Q=await E0(),H=((Q==null?void 0:Q.filter(te=>te.id&&te.id.startsWith("lesson")))||[]).sort((te,K)=>{const ce=te.originalId||parseInt(te.id.replace("lesson",""))||0,U=K.originalId||parseInt(K.id.replace("lesson",""))||0;return ce-U});o(H)}catch(Q){console.error("Error loading lessons:",Q),Ws.error("  ")}})()},[]),S.useEffect(()=>{if(!r||s!=="student")return;const G=async()=>{try{const{doc:H,getDoc:te}=await Vn(async()=>{const{doc:M,getDoc:X}=await Promise.resolve().then(()=>Td);return{doc:M,getDoc:X}},void 0),{db:K}=await Vn(async()=>{const{db:M}=await Promise.resolve().then(()=>jd);return{db:M}},void 0),ce=H(K,"users",r.uid),U=await te(ce);if(U.exists()){const M=U.data();if(I(M),e&&M.currentLesson>e.currentLesson){const X=M.currentLesson-e.currentLesson;Ws.success(`  ${X}  !`)}}}catch(H){console.error("Error refreshing currentLesson:",H)}};G();const Q=setInterval(G,3e4),ue=setTimeout(G,1e3);return()=>{clearInterval(Q),clearTimeout(ue)}},[r,s]),S.useEffect(()=>{},[e,L]),S.useEffect(()=>{if(e!=null&&e.progress){const G=Object.entries(e.progress);if(G.length>0){const Q=G.filter(([ue,H])=>H.lastActivity).sort((ue,H)=>new Date(H[1].lastActivity)-new Date(ue[1].lastActivity));if(Q.length>0){const[ue,H]=Q[0],te=i.find(K=>K.id===parseInt(ue));te&&!H.completed&&f({lesson:te,progress:H})}}}},[e]);const N=S.useCallback(G=>{const Q=L||e;if(!Q)return console.log(` No profile data available for lesson ${G}`),"locked";const ue=i==null?void 0:i.find(X=>X.id===G);if(!ue)return console.log(` Lesson not found for ID: ${G}`),"locked";const H=ue.originalId||parseInt(G),te=Q.completedLessons||[],K=Q.currentLesson||0,ce=Array.isArray(te)?te:[],U=[`lesson-${H}`,`lesson${H}`,H.toString(),G];return ce.some(X=>U.includes(X))||U.some(X=>Q.progress&&Q.progress[X]&&Q.progress[X].completed)?"completed":H<=K?"available":"locked"},[e,L,i]);S.useCallback(()=>{const G=L||e;if(!G||!i||i.length===0)return 0;const Q=Array.isArray(G.completedLessons)?G.completedLessons.length:0;return Math.round(Q/i.length*100)},[e,L,i]),S.useCallback(()=>{const G=L||e;return G?Math.floor((G.totalTimeSpent||0)/60):0},[e,L]),S.useCallback(()=>{const G=L||e;return G&&G.totalPagesEngaged||0},[e,L]),S.useCallback(()=>{const G=L||e;return G?G.achievements||[]:[]},[e,L]),S.useCallback(()=>{const G=L||e;return G&&Array.isArray(G.completedLessons)?G.completedLessons.length:0},[e,L]);const T=S.useCallback(G=>{if(!G||!G.id){console.error(" Invalid lesson object:",G);return}N(G.id)!=="locked"&&t(`/student/lesson/${G.id}`)},[t,N]),P=S.useCallback(()=>{h&&(N(h.lesson.id)!=="locked"?(t(`/student/lesson/${h.lesson.id}`),Ws.success(` : ${h.lesson.title}`)):Ws.error("      "))},[h,t,N]),B=S.useCallback(G=>{switch(G){case"completed":return a.jsx(Qt,{className:"h-6 w-6 text-green-500"});case"available":return a.jsx(VB,{className:"h-6 w-6 text-blue-500"});case"locked":return a.jsx(Sk,{className:"h-6 w-6 text-gray-400"});default:return a.jsx(nx,{className:"h-6 w-6 text-gray-400"})}},[]),z=S.useCallback(G=>{const Q=i==null?void 0:i.find(ce=>ce.id===G);if(!Q)return console.log(` Lesson not found for ID: ${G}`),0;const ue=Q.originalId||parseInt(G),te=[`lesson-${ue}`,`lesson${ue}`,ue.toString(),G].find(ce=>{var U;return(U=e==null?void 0:e.progress)==null?void 0:U[ce]});return te?e.progress[te].lastSlide||0:(N(G),0)},[e,i]);S.useEffect(()=>{const G=()=>F({width:window.innerWidth,height:window.innerHeight});return window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)},[]);const O=S.useMemo(()=>{const G=L||e;if(!G||!i||i.length===0)return{completedCount:0,progressPercentage:0,totalTimeSpent:0,totalPagesEngaged:0};const Q=Array.isArray(G.completedLessons)?G.completedLessons.length:0,ue=Math.round(Q/i.length*100),H=Math.floor((G.totalTimeSpent||0)/60),te=G.totalPagesEngaged||0;return{completedCount:Q,progressPercentage:ue,totalTimeSpent:H,totalPagesEngaged:te}},[e,L,i]),D=S.useMemo(()=>{if(!i||!i.length)return{};const G={};return i.forEach(Q=>{Q&&Q.id&&(G[Q.id]=N(Q.id))}),G},[i,e,L,N]);return S.useEffect(()=>{if(!r||s!=="student")return;const G=async()=>{try{const{doc:H,getDoc:te}=await Vn(async()=>{const{doc:M,getDoc:X}=await Promise.resolve().then(()=>Td);return{doc:M,getDoc:X}},void 0),{db:K}=await Vn(async()=>{const{db:M}=await Promise.resolve().then(()=>jd);return{db:M}},void 0),ce=H(K,"users",r.uid),U=await te(ce);if(U.exists()){const M=U.data();if(I(M),e&&M.currentLesson>e.currentLesson){const X=M.currentLesson-e.currentLesson;Ws.success(`  ${X}  !`)}}}catch(H){console.error("Error refreshing currentLesson:",H)}};G();const Q=setInterval(G,3e4),ue=setTimeout(G,1e3);return()=>{clearInterval(Q),clearTimeout(ue)}},[r,s]),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black relative overflow-hidden",children:[a.jsx(k0,{}),a.jsx(rq,{}),a.jsx("div",{className:"absolute inset-0 opacity-10",children:a.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
            linear-gradient(rgba(0, 255, 0, 0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 255, 0, 0.1) 1px, transparent 1px)
          `,backgroundSize:"50px 50px"}})}),b&&a.jsx(iw,{width:k.width,height:k.height,recycle:!1,numberOfPieces:200,colors:["#00ff00","#00ffff","#ff00ff","#ffff00","#ff0000","#0000ff"]}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"max-w-[78%] mx-auto px-8 py-12",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx(Ke.h2,{className:"text-6xl font-bold mb-6 bg-gradient-to-r from-green-400 via-cyan-400 to-blue-400 bg-clip-text text-transparent drop-shadow-[0_0_20px_rgba(16,185,129,0.5)] animate-pulse",style:{textShadow:"0 0 30px rgba(16,185,129,0.8), 0 0 60px rgba(34,211,238,0.6), 0 0 90px rgba(59,130,246,0.4)",filter:"drop-shadow(0 0 20px rgba(16,185,129,0.3))"},initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:"easeOut"},children:"   "}),a.jsxs(Ke.p,{className:"text-2xl text-green-400 font-mono",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},children:[">","       "]}),h&&a.jsxs(Ke.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.3},className:"mb-12",children:[a.jsxs("button",{onClick:P,className:"group relative bg-gradient-to-r from-green-600 to-cyan-600 hover:from-green-500 hover:to-cyan-500 text-white px-12 py-6 rounded-xl font-bold text-xl shadow-2xl hover:shadow-green-500/25 transform hover:scale-105 transition-all duration-300 flex items-center justify-center mx-auto space-x-4 border border-green-400/30",children:[a.jsx("div",{className:"absolute inset-0 bg-green-500/20 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("span",{className:"relative flex items-center space-x-4 space-x-reverse",children:[a.jsx($2,{className:"w-8 h-8 group-hover:animate-pulse"}),a.jsxs("span",{children:["  : ",h.lesson.title]}),a.jsx(Rf,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]})]}),a.jsxs("p",{className:"text-green-400 text-lg mt-3 font-mono",children:[">","   ",h.progress.lastSlide+1]})]}),a.jsxs(Ke.div,{className:"bg-black/60 backdrop-blur-xl rounded-3xl p-12 shadow-2xl border border-green-500/30 mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[a.jsx("h3",{className:"text-3xl font-bold text-white mb-8 text-center",children:" "}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8",children:[a.jsxs("div",{className:"group relative bg-gradient-to-br from-green-900/30 to-cyan-900/30 rounded-2xl border border-green-500/30 p-8 hover:border-green-400/50 transition-all duration-300",children:[a.jsx("div",{className:"absolute inset-0 bg-green-500/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative flex flex-col items-center text-center",children:[a.jsx(V3,{className:"h-14 w-14 text-yellow-500 mb-4 group-hover:scale-110 transition-transform"}),a.jsx("div",{className:"text-4xl font-bold text-white mb-3",children:O.completedCount}),a.jsx("div",{className:"text-base text-green-400 font-mono",children:" "})]})]}),a.jsxs("div",{className:"group relative bg-gradient-to-br from-purple-900/30 to-pink-900/30 rounded-2xl border border-purple-500/30 p-8 hover:border-purple-400/50 transition-all duration-300",children:[a.jsx("div",{className:"absolute inset-0 bg-purple-500/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative flex flex-col items-center text-center",children:[a.jsx(xg,{className:"h-14 w-14 text-purple-400 mb-4 group-hover:scale-110 transition-transform"}),a.jsxs("div",{className:"text-4xl font-bold text-white mb-3",children:[O.progressPercentage,"%"]}),a.jsx("div",{className:"text-base text-purple-400 font-mono",children:""})]})]}),a.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-900/30 to-indigo-900/30 rounded-2xl border border-blue-500/30 p-8 hover:border-blue-400/50 transition-all duration-300",children:[a.jsx("div",{className:"absolute inset-0 bg-blue-500/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative flex flex-col items-center text-center",children:[a.jsx(Pa,{className:"h-14 w-14 text-blue-400 mb-4 group-hover:scale-110 transition-transform"}),a.jsx("div",{className:"text-4xl font-bold text-white mb-3",children:O.totalPagesEngaged}),a.jsx("div",{className:"text-base text-blue-400 font-mono",children:" "})]})]}),a.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-900/30 to-red-900/30 rounded-2xl border border-orange-500/30 p-8 hover:border-orange-400/50 transition-all duration-300",children:[a.jsx("div",{className:"absolute inset-0 bg-orange-500/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative flex flex-col items-center text-center",children:[a.jsx(M3,{className:"h-14 w-14 text-orange-400 mb-4 group-hover:scale-110 transition-transform"}),a.jsx("div",{className:"text-4xl font-bold text-white mb-3",children:O.totalTimeSpent}),a.jsx("div",{className:"text-base text-orange-400 font-mono",children:" "})]})]})]}),a.jsx("div",{className:"w-full bg-gray-800/50 rounded-full h-6 mb-6 border border-gray-700",children:a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-cyan-500 h-6 rounded-full transition-all duration-500 shadow-lg shadow-green-500/25",style:{width:`${O.progressPercentage}%`}})}),a.jsxs("p",{className:"text-center text-green-400 text-base font-mono",children:[">","  : ",O.progressPercentage,"% (",O.completedCount,"  ",(i==null?void 0:i.length)||0," )"]})]})]}),a.jsx(Ke.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:i&&Array.isArray(i)&&i.length>0?i.map((G,Q)=>{if(!G||!G.id)return null;const ue=D[G.id]||N(G.id),H=p.has(G.id),te=z(G.id),K=nq(G.id);return a.jsxs(Ke.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1*Q},className:`relative group cursor-pointer transform transition-all duration-500 hover:scale-105 ${H?"animate-pulse":""}`,onClick:()=>T(G),children:[a.jsxs("div",{className:`relative bg-gradient-to-br from-gray-900/80 to-black/80 backdrop-blur-xl rounded-2xl p-8 border-2 transition-all duration-500 hover:shadow-2xl hover:shadow-green-500/25 ${ue==="completed"?"border-green-500 bg-green-900/20 hover:border-green-400":ue==="available"?"border-cyan-500 bg-cyan-900/20 hover:border-cyan-400":"border-gray-600 bg-gray-900/20 hover:border-gray-500"}`,children:[a.jsx("div",{className:`absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 ${ue==="completed"?"bg-green-500/10":ue==="available"?"bg-cyan-500/10":"bg-gray-500/10"}`}),a.jsxs("div",{className:"relative flex justify-between items-start mb-6",children:[a.jsx("div",{className:`p-4 rounded-xl ${ue==="completed"?"bg-green-500/20 text-green-400":ue==="available"?"bg-cyan-500/20 text-cyan-400":"bg-gray-500/20 text-gray-400"}`,children:a.jsx(K,{className:"h-8 w-8"})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[B(ue),H&&a.jsx(U2,{className:"h-5 w-5 text-yellow-400 animate-pulse"})]})]}),a.jsxs("div",{className:"relative space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"bg-green-500/20 text-green-400 px-3 py-1 rounded-lg text-sm font-mono border border-green-500/30",children:[" ",G.originalId||G.id]}),a.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-green-300 transition-colors",children:G.title||"  "})]}),a.jsx("p",{className:"text-gray-300 text-sm line-clamp-2",children:G.description||"  "}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("span",{className:"text-green-400 font-mono",children:[" ",G.timeRange||G.duration||" "]}),a.jsxs("span",{className:"text-cyan-400 font-mono",children:[" ",G.difficulty||" "]})]}),(ue==="available"||ue==="completed")&&a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-300 mb-2",children:[a.jsx("span",{className:"font-mono",children:""}),a.jsxs("span",{className:"font-mono",children:[te+1," / ",G.totalSlides||0]})]}),a.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 border border-gray-700",children:a.jsx("div",{className:`h-3 rounded-full transition-all duration-500 shadow-lg ${ue==="completed"?"bg-gradient-to-r from-green-500 to-green-400 shadow-green-500/25":"bg-gradient-to-r from-cyan-500 to-blue-500 shadow-cyan-500/25"}`,style:{width:`${ue==="completed"?100:(te+1)/(G.totalSlides||1)*100}%`}})})]}),a.jsx("div",{className:"mt-6",children:ue==="completed"?a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-400 bg-green-500/10 rounded-lg py-3 border border-green-500/30",children:[a.jsx(Qt,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium font-mono",children:""})]}):ue==="available"?a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-cyan-400 bg-cyan-500/10 rounded-lg py-3 border border-cyan-500/30 group-hover:bg-cyan-500/20 transition-colors",children:[a.jsx(jn,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium font-mono",children:te>0?"":""})]}):a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-400 bg-gray-500/10 rounded-lg py-3 border border-gray-500/30",children:[a.jsx(Sk,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium font-mono",children:""})]})})]})]}),H&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-400/20 to-orange-400/20 rounded-2xl border-2 border-yellow-400 animate-pulse"})]},G.id)}):a.jsxs("div",{className:"col-span-full text-center py-12",children:[a.jsx("div",{className:"text-gray-400 text-xl mb-4 font-mono",children:"  "}),a.jsx("div",{className:"text-gray-500 text-sm font-mono",children:i?"   ":" ..."})]})})]}),a.jsxs("footer",{className:"bg-black/80 border-t border-green-500/30 py-8 mt-12 flex flex-col items-center",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:fx,alt:"Cyber Logo",className:"w-32 h-32 mb-4 opacity-80 hover:opacity-100 transition-opacity"}),a.jsx("div",{className:"absolute inset-0 bg-green-500/10 rounded-full animate-ping"})]}),a.jsx("p",{className:"text-green-400 text-sm font-mono",children:" 2024 Israel Cyber Campus.   ."}),a.jsx("p",{className:"text-gray-500 text-xs font-mono mt-2",children:"Terminal v2.0.1 | Matrix Protocol Active"})]})]})]})},Ld=({slide:t})=>{var r;const{content:e}=t;return a.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-start pt-20 px-4",children:[" ",a.jsxs("div",{className:"w-full max-w-7xl flex flex-col",children:[" ",a.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700/50 shadow-2xl flex flex-col justify-center relative overflow-auto",style:{background:e.background||"linear-gradient(135deg, #1e3a8a 0%, #7c3aed 100%)",minHeight:"600px",width:"100%",margin:"0 auto"},children:[a.jsx("div",{className:"absolute inset-0 bg-black/20"}),a.jsx("div",{className:"text-center relative z-10",children:(r=e.elements)==null?void 0:r.map((n,s)=>{var i,o,l,u,h;switch(n.type){case"title":return a.jsx("h1",{style:{...n.style,textShadow:"0 4px 8px rgba(0,0,0,0.3)",fontWeight:"700"},className:"mb-8 text-5xl md:text-6xl",children:n.text},`${n.type}-${s}-${(i=n.text)==null?void 0:i.substring(0,20)}`);case"subtitle":return a.jsx("h2",{style:{...n.style,textShadow:"0 2px 4px rgba(0,0,0,0.3)"},className:"mb-6 text-2xl md:text-3xl",children:n.text},`${n.type}-${s}-${(o=n.text)==null?void 0:o.substring(0,20)}`);case"list":return a.jsx("ul",{style:{...n.style,textShadow:"0 1px 2px rgba(0,0,0,0.3)"},className:"text-right space-y-3",children:(l=n.items)==null?void 0:l.map((f,p)=>a.jsx("li",{className:"mb-3 p-3 bg-white/10 backdrop-blur-sm rounded-lg border border-white/20 hover:bg-white/20 transition-all duration-300",children:f},`item-${p}-${f==null?void 0:f.substring(0,20)}`))},`${n.type}-${s}-list`);case"image":return a.jsx("div",{className:"my-8",children:a.jsx("img",{src:n.src,alt:n.alt||"",style:{...n.style,boxShadow:"0 20px 40px rgba(0,0,0,0.3)",borderRadius:"20px",maxWidth:"100%",height:"auto"},className:"mx-auto transform hover:scale-105 transition-transform duration-300",loading:"lazy",onError:f=>{console.warn(` Failed to load image: ${n.src}`),f.target.style.display="none";const p=document.createElement("div");p.className="text-center p-4 bg-gray-200 rounded-lg border-2 border-dashed border-gray-400",p.innerHTML=`
                            <div class="text-gray-600 text-lg mb-2"></div>
                            <div class="text-gray-500">  </div>
                            <div class="text-sm text-gray-400 mt-1">${n.alt||""}</div>
                          `,f.target.parentNode.appendChild(p)},onLoad:()=>{console.log(` Image loaded successfully: ${n.src}`)}})},`${n.type}-${s}-${(u=n.src)==null?void 0:u.substring(0,20)}`);case"animation":return a.jsx("div",{style:{...n.style,animation:"bounce 2s infinite"},className:"animate-bounce",children:n.element},`${n.type}-${s}-animation`);case"timeline":return a.jsx("div",{className:"my-10 px-2 md:px-8 py-6 bg-white/10 rounded-xl border-l-4 border-cyan-400",style:n.style,children:a.jsx("ul",{className:"timeline space-y-8",children:n.events.map((f,p)=>a.jsxs("li",{className:"flex items-start gap-4",children:[a.jsx("span",{className:"text-2xl",children:f.icon||""}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-bold text-lg",children:[f.year,"  ",f.title]}),a.jsx("div",{className:"text-md opacity-90",children:f.description})]})]},p))})},`timeline-${s}`);case"definition":return a.jsxs("div",{className:"my-8 mx-auto max-w-2xl text-center rounded-xl shadow-lg border-2 border-blue-300 bg-white/70",style:n.style,children:[a.jsx("span",{className:"text-2xl font-bold text-blue-800 block mb-2",children:":"}),a.jsx("span",{className:"block text-xl font-semibold",children:n.text})]},`definition-${s}`);case"comparison":return a.jsx("div",{className:"flex flex-col md:flex-row gap-6 justify-center items-stretch my-8",style:n.style,children:(h=n.items)==null?void 0:h.map((f,p)=>a.jsxs("div",{className:"flex-1 p-6 rounded-xl bg-white/80 shadow border-2 border-gray-300 flex flex-col items-center",children:[a.jsx("span",{className:"text-3xl mb-2",children:f.icon}),a.jsx("div",{className:"font-bold text-lg mb-1",children:f.title}),a.jsx("div",{className:"text-md opacity-80",children:f.description})]},p))},`comparison-${s}`);case"specs":return a.jsx("div",{className:"my-8 max-w-2xl mx-auto bg-white/10 rounded-xl shadow p-6 border border-white/20",style:n.style,children:a.jsx("ul",{className:"space-y-4",children:n.items.map((f,p)=>a.jsxs("li",{className:"flex items-center gap-4 py-2 border-b border-white/20 last:border-b-0",children:[a.jsx("span",{className:"text-2xl",children:f.icon}),a.jsxs("span",{className:"font-bold",children:[f.component,":"]}),a.jsx("span",{className:"ml-2",children:f.spec})]},p))})},`specs-${s}`);case"tip":return a.jsx("div",{className:"my-6 px-4 py-2 rounded-lg bg-blue-50 border-r-4 border-blue-400 text-blue-800 shadow",style:n.style,children:n.text},`tip-${s}`);default:return null}})})]})]})]})},T0=({slide:t,onAnswer:e})=>{var u;const{content:r}=t,[n,s]=S.useState(null),[i,o]=S.useState(!1),l=h=>{s(h),o(!0),e(t.id,{selectedOption:h,isCorrect:!0})};return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",children:a.jsxs("div",{className:"max-w-5xl w-full h-full flex flex-col",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx("h2",{className:"text-4xl font-bold text-white mb-4",style:{textShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:t.title})}),a.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700/50 shadow-2xl flex-1 flex flex-col justify-center",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx("p",{className:"text-2xl text-gray-200",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:r.question})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(u=r.options)==null?void 0:u.map((h,f)=>a.jsx("button",{onClick:()=>l(h.id),disabled:i,className:`p-5 rounded-2xl border-4 transition-all duration-300 transform hover:scale-105 text-lg md:text-xl lg:text-2xl font-bold tracking-wide select-none focus:outline-none focus:ring-4 focus:ring-blue-400/50 ${n===h.id?"bg-gradient-to-r from-blue-600 to-purple-600 border-blue-400 text-white shadow-2xl":"bg-white/10 backdrop-blur-sm border-white/20 text-white hover:bg-white/20"}`,tabIndex:0,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-2xl md:text-3xl",children:h.emoji}),a.jsx("span",{className:"text-lg md:text-xl lg:text-2xl font-semibold",children:h.text})]}),n===h.id&&a.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center",children:a.jsx(Qt,{className:"w-5 h-5 text-blue-600"})})]})},h.id||f))}),i&&a.jsx("div",{className:"mt-8 text-center",children:a.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-xl p-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-green-400 mb-2",children:"  !"}),a.jsx("p",{className:"text-gray-300",children:"   "})]})})]})]})})},j0=({slide:t,onAnswer:e,answers:r})=>{const{content:n}=t,[s,i]=S.useState(!1),[o,l]=S.useState(!1),[u,h]=S.useState(!1),[f,p]=S.useState(!0),x=k=>{if(!k)return null;const F=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,L=k.match(F);return L?`https://www.youtube.com/embed/${L[1]}?rel=0&modestbranding=1&showinfo=0&autoplay=0&enablejsapi=1&origin=${window.location.origin}&widget_referrer=${window.location.origin}&hl=he&cc_load_policy=1`:k},v=()=>{if(typeof window<"u"&&!window.YT){const k=document.createElement("script");k.src="https://www.youtube.com/iframe_api";const F=document.getElementsByTagName("script")[0];F.parentNode.insertBefore(k,F)}},w=x(n.videoUrl);S.useEffect(()=>{i(!1),l(!1),h(!1),p(!0)},[t.id]),S.useEffect(()=>{u&&w&&w.includes("youtube.com")&&v()},[u,w]);const b=()=>{p(!1),i(!0),h(!1),e(t.id,{started:!0,isCorrect:!0})},_=()=>{p(!1),h(!0),console.warn("Video failed to load:",n.videoUrl)},R=()=>{h(!1),p(!0),i(!1)},j=()=>{p(!1),h(!1)};return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",children:a.jsxs("div",{className:"max-w-5xl w-full h-full flex flex-col",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-4xl font-bold text-white mb-4",style:{textShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:t.title}),a.jsx("p",{className:"text-xl text-gray-200",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:n.description})]}),a.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700/50 shadow-2xl flex-1 flex flex-col justify-center",children:[a.jsxs("div",{className:"relative bg-gray-900 rounded-xl overflow-hidden shadow-2xl flex-1 flex flex-col justify-center",children:[a.jsx("div",{className:"aspect-video",children:!u&&w?a.jsx("iframe",{src:w,title:t.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,onLoad:j,onError:_,sandbox:"allow-same-origin allow-scripts allow-presentation allow-popups allow-popups-to-escape-sandbox",loading:"lazy"},`${t.id}-${s}`):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-800",children:a.jsxs("div",{className:"text-center",children:[a.jsx(To,{className:"w-16 h-16 mx-auto mb-4 text-red-400"}),a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"  "}),a.jsx("p",{className:"text-gray-400 mb-4",children:"     "}),a.jsxs("button",{onClick:R,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[a.jsx(Ps,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})]})})}),f&&!u&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),a.jsx("p",{className:"text-white",children:" ..."})]})}),!s&&!f&&!u&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 hover:bg-black/20 transition-all duration-300 cursor-pointer",onClick:b,children:a.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full p-4",children:a.jsx(jn,{className:"w-12 h-12 text-white"})})})]}),o&&a.jsx("div",{className:"mt-8 text-center",children:a.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-xl p-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-green-400 mb-2",children:" !"}),a.jsx("p",{className:"text-gray-300",children:"   "})]})}),u&&a.jsxs("div",{className:"mt-4 text-center",children:[a.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"    -YouTube:"}),a.jsx("a",{href:n.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:a.jsx("span",{children:" -YouTube"})})]})]})]})})},b6=({item:t,isSelected:e,onSelect:r,showRemove:n=!1,onRemove:s})=>a.jsx("div",{onClick:()=>r(t),className:`p-5 mb-4 rounded-2xl border-4 bg-gray-700/90 shadow-2xl transition-all duration-200 cursor-pointer text-lg md:text-xl lg:text-2xl font-bold tracking-wide select-none focus:outline-none focus:ring-4 focus:ring-blue-400/50 ${e?"border-blue-400 bg-blue-800/80 shadow-2xl scale-110":"border-gray-600 hover:border-purple-400 hover:bg-purple-800/60 hover:scale-105"}`,tabIndex:0,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[t.image&&a.jsx("img",{src:t.image,alt:t.text,className:"w-8 h-8 rounded-lg object-cover"}),a.jsx("span",{className:"font-semibold text-white text-lg md:text-xl lg:text-2xl",children:t.text})]}),e&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qt,{className:"h-5 w-5 text-blue-400"}),n&&a.jsx("button",{onClick:i=>{i.stopPropagation(),s(t.id)},className:"p-1 rounded-full bg-red-500 hover:bg-red-600 transition-colors",children:a.jsx(li,{className:"h-4 w-4 text-white"})})]})]})}),aq=({id:t,category:e,items:r,onRemove:n,onItemClick:s,selectedItem:i})=>a.jsxs("div",{className:`min-h-[60px] p-4 rounded-2xl border-4 transition-all duration-300 cursor-pointer text-lg md:text-xl font-bold ${i?"border-blue-400 bg-blue-900/60 shadow-2xl scale-105":"border-gray-600 bg-gray-800/80"}`,style:{borderColor:i?"#60a5fa":e.color,backgroundColor:i?"rgba(30, 58, 138, 0.6)":"rgba(31, 41, 55, 0.8)"},onClick:()=>i&&s(t),tabIndex:0,children:[a.jsxs("div",{className:"mb-1",children:[a.jsx("h5",{className:"font-bold text-lg md:text-xl text-white mb-1",style:{color:e.color},children:e.name}),a.jsx("p",{className:"text-base text-gray-300",children:e.description})]}),a.jsx("div",{className:"space-y-1",children:r.map(o=>a.jsx(b6,{item:o,isSelected:!1,onSelect:()=>{},onRemove:n,showRemove:!0},o.id))}),r.length===0&&a.jsxs("div",{className:"text-center py-2 text-gray-400 border-2 border-dashed border-gray-600 rounded-lg",children:[a.jsx("div",{className:"text-xl mb-1",children:""}),a.jsx("p",{className:"text-xs font-medium",children:"     "}),a.jsx("p",{className:"text-xs text-gray-500",children:"Click item then category"})]})]}),iq=({items:t,onItemSelect:e,selectedItem:r})=>a.jsxs("div",{className:"min-h-[120px] p-4 rounded-2xl border-4 border-dashed border-gray-500 bg-gray-800/60 backdrop-blur-sm",children:[a.jsx("div",{className:"space-y-1",children:t.map(n=>a.jsx(b6,{item:n,isSelected:(r==null?void 0:r.id)===n.id,onSelect:e,onRemove:()=>{},showRemove:!1},n.id))}),t.length===0&&a.jsxs("div",{className:"text-center py-3 text-gray-400",children:[a.jsx("div",{className:"text-2xl mb-1",children:""}),a.jsx("p",{className:"text-sm font-medium",children:"  "}),a.jsx("p",{className:"text-xs text-gray-500",children:"All items placed"})]})]}),oq=({exercise:t,onComplete:e})=>{const[r,n]=S.useState([]),[s,i]=S.useState({}),[o,l]=S.useState(!1),[u,h]=S.useState(!1),[f,p]=S.useState(!1),[x,v]=S.useState(null),w=(t==null?void 0:t.categories)||[],b=(t==null?void 0:t.items)||[];S.useEffect(()=>{n(b.map(I=>({...I,id:`item-${I.id}`,isPlaced:!1})));const L={};w.forEach(I=>{L[I.id]={...I,items:[]}}),i(L)},[b,w]);const _=L=>{v(L)},R=L=>{x&&(n(I=>I.filter(N=>N.id!==x.id)),i(I=>({...I,[L]:{...I[L],items:[...I[L].items,{...x,isPlaced:!0}]}})),v(null))},j=L=>{if(o)return;let I=null,N=null;Object.entries(s).forEach(([T,P])=>{const B=P.items.findIndex(z=>z.id===L);B!==-1&&(I=P.items[B],N=T)}),!(!I||!N)&&(i(T=>({...T,[N]:{...T[N],items:T[N].items.filter(P=>P.id!==L)}})),n(T=>[...T,{...I,isPlaced:!1}]))},k=()=>{let L=!0,I=0;Object.values(s).forEach(N=>{I+=N.items.length,N.items.forEach(T=>{T.correctCategory!==N.id&&(L=!1)})}),I!==b.length&&(L=!1),h(L),l(!0),p(!0),setTimeout(()=>{p(!1),e(L)},3e3)},F=()=>{n(b.map(I=>({...I,id:`item-${I.id}`,isPlaced:!1})));const L={};w.forEach(I=>{L[I.id]={...I,items:[]}}),i(L),l(!1),h(!1),p(!1),v(null)};return a.jsxs("div",{className:"space-y-4 max-w-7xl mx-auto h-full flex flex-col",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 flex-1",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-xl font-bold text-blue-300 text-center mb-3",children:" "}),a.jsx(iq,{items:r,onItemSelect:_,selectedItem:x})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-xl font-bold text-green-300 text-center mb-3",children:""}),w.map(L=>{var I;return a.jsx(aq,{id:L.id,category:L,items:((I=s[L.id])==null?void 0:I.items)||[],onRemove:j,onItemClick:R,selectedItem:x},L.id)})]})]}),a.jsxs("div",{className:"flex justify-center space-x-4 space-x-reverse pt-4",children:[a.jsxs("button",{onClick:F,className:"px-6 py-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-lg border border-gray-600 hover:border-gray-500 transition-all duration-200 flex items-center gap-2",children:[a.jsx(O3,{className:"h-5 w-5"})," "]}),a.jsxs("button",{onClick:k,disabled:Object.values(s).reduce((L,I)=>L+I.items.length,0)!==b.length,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg border border-blue-500 hover:border-blue-400 transition-all duration-200 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Qt,{className:"h-5 w-5"})," "]})]}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-base text-gray-300",children:[" : ",Object.values(s).reduce((L,I)=>L+I.items.length,0)," / ",b.length]})}),f&&a.jsxs("div",{className:`text-center p-4 rounded-xl border-2 ${u?"bg-green-900/30 text-green-200 border-green-500":"bg-red-900/30 text-red-200 border-red-500"}`,children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[u?a.jsx(Qt,{className:"h-6 w-6"}):a.jsx(li,{className:"h-6 w-6"}),a.jsx("span",{className:"text-xl font-bold",children:u?"!   !":" !"})]}),a.jsx("p",{className:"text-base",children:u?" !       !":"   .  !"})]})]})},lq=({exercise:t,onComplete:e})=>{const r=(t==null?void 0:t.pairs)||[],[n,s]=S.useState(null),[i,o]=S.useState(null),[l,u]=S.useState({}),[h,f]=S.useState(!1),[p,x]=S.useState(!1),[v,w]=S.useState(!1),[b,_]=S.useState(0),R=G=>G,j=G=>{h||l[G]!==void 0||(s(G),o(null))},k=G=>{h||Object.values(l).includes(G)||o(G)},F=()=>{if(n===null||i===null)return;const G={...l,[n]:i};u(G),s(null),o(null),R(n)===i&&_(b+1)},L=()=>{const Q=Object.keys(l).filter(ue=>R(parseInt(ue))===l[ue]).length===r.length;x(Q),f(!0),w(!0),setTimeout(()=>{w(!1),e(Q)},3e3)},I=()=>{u({}),s(null),o(null),f(!1),x(!1),w(!1),_(0)},N=G=>Object.values(l).includes(G),T=G=>{const Q=l[G];return Q!==void 0&&R(G)===Q},P=G=>G.tool||G.left||G.command||"",B=G=>G.description||G.right||"",z=G=>G.icon||"",O=()=>r.length>0?r[0].tool?" ":(r[0].command,""):"",D=()=>(r.length>0&&r[0].description,"");return a.jsxs("div",{className:"space-y-4 max-w-6xl mx-auto h-full flex flex-col",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 flex-1",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-xl font-bold text-purple-300 text-center mb-3",children:O()}),a.jsx("div",{className:"space-y-2",children:r.map((G,Q)=>a.jsx(Ke.div,{className:`p-5 rounded-2xl border-4 cursor-pointer transition-all duration-200 text-lg md:text-xl lg:text-2xl font-bold tracking-wide select-none focus:outline-none focus:ring-4 focus:ring-blue-400/50 ${n===Q?"border-blue-400 bg-blue-800/60 shadow-2xl scale-105":l[Q]!==void 0?T(Q)?"border-green-400 bg-green-800/40":"border-red-400 bg-red-800/40":"border-gray-600 bg-gray-700/80 hover:border-purple-400 hover:bg-purple-800/40 hover:scale-105"}`,onClick:()=>j(Q),whileHover:l[Q]===void 0?{scale:1.02}:{},whileTap:l[Q]===void 0?{scale:.98}:{},tabIndex:0,children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-2xl md:text-3xl",children:z(G)}),a.jsx("span",{className:"font-semibold text-white text-lg md:text-xl lg:text-2xl",children:P(G)}),l[Q]!==void 0&&a.jsx(Ke.div,{initial:{scale:0},animate:{scale:1},className:"ml-auto",children:T(Q)?a.jsx(Qt,{className:"h-6 w-6 text-green-400"}):a.jsx(li,{className:"h-6 w-6 text-red-400"})})]})},`left-${Q}`))})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-xl font-bold text-green-300 text-center mb-3",children:D()}),a.jsx("div",{className:"space-y-2",children:r.map((G,Q)=>a.jsx(Ke.div,{className:`p-5 rounded-2xl border-4 cursor-pointer transition-all duration-200 text-lg md:text-xl lg:text-2xl font-bold tracking-wide select-none focus:outline-none focus:ring-4 focus:ring-green-400/50 ${i===Q?"border-blue-400 bg-blue-800/60 shadow-2xl scale-105":N(Q)?"border-gray-500 bg-gray-600/60 opacity-60":"border-gray-600 bg-gray-700/80 hover:border-green-400 hover:bg-green-800/40 hover:scale-105"}`,onClick:()=>k(Q),whileHover:N(Q)?{}:{scale:1.02},whileTap:N(Q)?{}:{scale:.98},tabIndex:0,children:a.jsx("div",{className:"flex items-center gap-4",children:a.jsx("span",{className:"font-semibold text-white text-lg md:text-xl lg:text-2xl",children:B(G)})})},`right-${Q}`))})]})]}),n!==null&&i!==null&&a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:a.jsxs(Ke.button,{onClick:F,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg border border-blue-500 hover:border-blue-400 transition-all duration-200 flex items-center gap-2 mx-auto",whileHover:{scale:1.05},whileTap:{scale:.95},children:[a.jsx(Rf,{className:"h-5 w-5"})," "]})}),a.jsxs("div",{className:"flex justify-center space-x-4 space-x-reverse pt-4",children:[a.jsxs(Ke.button,{onClick:I,className:"px-6 py-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-lg border border-gray-600 hover:border-gray-500 transition-all duration-200 flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[a.jsx(O3,{className:"h-5 w-5"})," "]}),a.jsxs(Ke.button,{onClick:L,disabled:Object.keys(l).length!==r.length,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg border border-blue-500 hover:border-blue-400 transition-all duration-200 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:Object.keys(l).length===r.length?{scale:1.05}:{},whileTap:Object.keys(l).length===r.length?{scale:.95}:{},children:[a.jsx(Qt,{className:"h-5 w-5"})," "]})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:"text-base text-gray-300",children:[": ",Object.keys(l).length," / ",r.length]}),b>0&&a.jsxs("p",{className:"text-base text-green-400 font-semibold",children:[": ",b," / ",Object.keys(l).length]})]}),v&&a.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`text-center p-6 rounded-xl border-2 ${p?"bg-green-900/30 text-green-200 border-green-500":"bg-red-900/30 text-red-200 border-red-500"}`,children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[p?a.jsx(Qt,{className:"h-8 w-8"}):a.jsx(li,{className:"h-8 w-8"}),a.jsx("span",{className:"text-2xl font-bold",children:p?"!   !":" !"})]}),a.jsx("p",{className:"text-lg",children:p?" !        !":"   .  !"})]})]})},KT=({exercise:t,onComplete:e})=>{var O;const r=(t==null?void 0:t.questions)&&t.questions.length>1,[n,s]=S.useState(0),[i,o]=S.useState({}),[l,u]=S.useState(!1),[h,f]=S.useState(0),[p,x]=S.useState(null),[v,w]=S.useState(!1),[b,_]=S.useState(!1),[R,j]=S.useState(!1),[k,F]=S.useState(!1),L=r?t.questions[n]:t,I=r?t.questions.length:1,N=D=>{if(r){if(l)return;o(G=>({...G,[n]:D}))}else{if(v)return;x(D)}},T=()=>{if(r){let D=0;t.questions.forEach((G,Q)=>{i[Q]===G.correctAnswer&&D++}),f(D),u(!0),setTimeout(()=>{e(D===I)},3e3)}else{if(!p)return;const D=p===t.correctAnswer;j(D),w(!0),F(!0),setTimeout(()=>{F(!1),e(D)},3e3)}},P=()=>{n<I-1&&s(n+1)},B=()=>{n>0&&s(n-1)},z=D=>r?l?D===L.correctAnswer?"border-green-400 bg-green-800/30":D===i[n]&&D!==L.correctAnswer?"border-red-400 bg-red-800/30":"border-gray-600 bg-gray-600/50 opacity-60":i[n]===D?"border-blue-400 bg-blue-800/50":"border-gray-600 bg-gray-700/50 hover:border-blue-400 hover:bg-blue-800/30":v?D===t.correctAnswer?"border-green-400 bg-green-800/30":D===p&&D!==t.correctAnswer?"border-red-400 bg-red-800/30":"border-gray-600 bg-gray-600/50 opacity-60":p===D?"border-blue-400 bg-blue-800/50":"border-gray-600 bg-gray-700/50 hover:border-blue-400 hover:bg-blue-800/30";return r&&l?a.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-3xl font-bold text-white mb-4",children:" !"}),a.jsxs("div",{className:"bg-green-900/30 border-2 border-green-500 rounded-xl p-8",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[a.jsx(Qt,{className:"h-12 w-12 text-green-400"}),a.jsxs("span",{className:"text-3xl font-bold text-green-200",children:[": ",h," / ",I]})]}),a.jsx("p",{className:"text-xl text-green-200",children:h===I?"!   !":` ! ${h}    ${I}`})]})]})}):a.jsxs("div",{className:"space-y-4 max-w-4xl mx-auto h-full flex flex-col",children:[r&&!l&&a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("button",{onClick:B,disabled:n===0,className:"flex items-center gap-2 px-4 py-2 bg-gray-700/50 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Bc,{className:"h-5 w-5"}),""]}),a.jsxs("span",{className:"text-gray-300",children:[n+1," / ",I]}),a.jsxs("button",{onClick:P,disabled:n===I-1,className:"flex items-center gap-2 px-4 py-2 bg-gray-700/50 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:["",a.jsx(hg,{className:"h-5 w-5"})]})]}),a.jsxs("div",{className:"text-center mb-6",children:[(L==null?void 0:L.image)&&a.jsx("div",{className:"mb-4",children:a.jsx("img",{src:L.image,alt:"Question",className:"mx-auto max-w-full h-auto rounded-lg shadow-lg",style:{maxHeight:"300px"}})}),(L==null?void 0:L.text)&&a.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700/50",children:[a.jsx("h3",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-white mb-3 leading-relaxed",children:L.text}),(L==null?void 0:L.options)&&L.options.length===4&&a.jsx("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-lg p-3 mb-3",children:a.jsx("p",{className:"text-blue-200 font-semibold text-base md:text-lg",children:"    4 "})}),(L==null?void 0:L.subtext)&&a.jsx("p",{className:"text-gray-300 text-base md:text-lg",children:L.subtext})]})]}),a.jsx("div",{className:"space-y-2 flex-1",children:(O=L==null?void 0:L.options)==null?void 0:O.map((D,G)=>{const Q=typeof D=="string"?D:D.text,ue=D.id||G;return a.jsxs(Ke.div,{className:`p-5 rounded-2xl border-4 cursor-pointer transition-all duration-200 text-lg md:text-xl lg:text-2xl font-bold tracking-wide select-none focus:outline-none focus:ring-4 focus:ring-blue-400/50 ${z(ue)}`,onClick:()=>N(ue),whileHover:!v&&!l?{scale:1.05}:{},whileTap:!v&&!l?{scale:.97}:{},tabIndex:0,children:[a.jsx("div",{className:`w-10 h-10 rounded-full border-4 flex items-center justify-center font-bold text-xl md:text-2xl lg:text-3xl ${(r?i[n]:p)===ue?"border-blue-400 bg-blue-400 text-white":"border-gray-500 bg-gray-600 text-gray-300"}`,children:String.fromCharCode(65+G)}),a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[typeof D=="object"&&D.icon&&a.jsx("span",{className:"text-2xl md:text-3xl",children:D.icon}),a.jsx("span",{className:"font-semibold text-white text-lg md:text-xl lg:text-2xl",children:Q})]}),(r&&l||!r&&v)&&ue===L.correctAnswer&&a.jsx(Ke.div,{initial:{scale:0},animate:{scale:1},children:a.jsx(Qt,{className:"h-5 w-5 text-green-400"})}),(r&&l||!r&&v)&&ue===(r?i[n]:p)&&ue!==L.correctAnswer&&a.jsx(Ke.div,{initial:{scale:0},animate:{scale:1},children:a.jsx(li,{className:"h-5 w-5 text-red-400"})})]},ue)})}),(L==null?void 0:L.hint)&&a.jsxs("div",{className:"text-center",children:[a.jsxs("button",{onClick:()=>_(!b),className:"flex items-center gap-2 mx-auto text-purple-300 hover:text-purple-200 transition-colors",children:[a.jsx(OB,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium text-sm",children:""})]}),b&&a.jsx(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-2 p-3 bg-yellow-900/30 border-2 border-yellow-500 rounded-lg",children:a.jsx("p",{className:"text-yellow-200 font-medium text-sm",children:L.hint})})]}),a.jsx("div",{className:"text-center",children:r?a.jsxs(Ke.button,{onClick:T,disabled:Object.keys(i).length!==I,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg border border-blue-500 hover:border-blue-400 transition-all duration-200 flex items-center gap-2 mx-auto disabled:opacity-50 disabled:cursor-not-allowed",whileHover:Object.keys(i).length===I?{scale:1.05}:{},whileTap:Object.keys(i).length===I?{scale:.95}:{},children:[a.jsx(Rf,{className:"h-5 w-5"})," "]}):a.jsxs(Ke.button,{onClick:T,disabled:!p||v,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg border border-blue-500 hover:border-blue-400 transition-all duration-200 flex items-center gap-2 mx-auto disabled:opacity-50 disabled:cursor-not-allowed",whileHover:p&&!v?{scale:1.05}:{},whileTap:p&&!v?{scale:.95}:{},children:[a.jsx(Rf,{className:"h-5 w-5"})," "]})}),!r&&k&&a.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`text-center p-4 rounded-xl border-2 ${R?"bg-green-900/30 text-green-200 border-green-500":"bg-red-900/30 text-red-200 border-red-500"}`,children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[R?a.jsx(Qt,{className:"h-6 w-6"}):a.jsx(li,{className:"h-6 w-6"}),a.jsx("span",{className:"text-xl font-bold",children:R?"!  !":" !"})]}),(L==null?void 0:L.explanation)&&a.jsx("p",{className:"text-base",children:L.explanation})]})]})},cq=({exercise:t,onComplete:e})=>{const[r,n]=S.useState(t.budget||100),[s,i]=S.useState([]),[o,l]=S.useState(null),[u,h]=S.useState(!1),[f,p]=S.useState({message:"",isPositive:!0}),x=(w,b,_)=>{if(r<_){p({message:"      !",isPositive:!1}),h(!0),setTimeout(()=>h(!1),3e3);return}n(j=>j-_),i(j=>[...j,{taskId:w,action:b,points:_}]),p({message:`  !  ${_} `,isPositive:!0}),h(!0),setTimeout(()=>h(!1),3e3);const R=t.tasks.reduce((j,k)=>j+k.options.length,0);s.length+1>=R&&setTimeout(()=>{e(!0)},2e3)},v=w=>{switch(w){case"desktop":return a.jsx(Ad,{className:"h-6 w-6"});case"files":return a.jsx(CB,{className:"h-6 w-6"});case"settings":return a.jsx(_o,{className:"h-6 w-6"});case"performance":return a.jsx(ts,{className:"h-6 w-6"});default:return a.jsx(AB,{className:"h-6 w-6"})}};return a.jsxs("div",{className:"w-full max-w-6xl mx-auto h-full flex flex-col",children:[a.jsx("div",{className:"bg-gray-700/50 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{children:a.jsx("p",{className:"text-gray-300 text-sm",children:"    "})}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-xl font-bold text-green-400",children:r}),a.jsx("div",{className:"text-xs text-gray-400",children:" "})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 flex-1",children:t.tasks.map(w=>a.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[v(w.id),a.jsxs("div",{children:[a.jsx("h4",{className:"text-base font-semibold text-white",children:w.name}),a.jsx("p",{className:"text-xs text-gray-400",children:w.description})]})]}),a.jsx("div",{className:"space-y-2",children:w.options.map((b,_)=>a.jsxs("button",{onClick:()=>x(w.id,b.action,b.points),disabled:r<b.points,className:"w-full flex justify-between items-center p-2 rounded-lg bg-gray-700/30 hover:bg-gray-600/40 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 border border-gray-600/30 hover:border-gray-500/50",children:[a.jsx("span",{className:"text-white text-sm",children:b.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-xs text-gray-400",children:[b.points," "]}),s.some(R=>R.taskId===w.id&&R.action===b.action)&&a.jsx(Qt,{className:"h-4 w-4 text-green-400"})]})]},_))})]},w.id))}),u&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${f.isPositive?"bg-green-600/90":"bg-red-600/90"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[f.isPositive?a.jsx(Qt,{className:"h-5 w-5 text-white"}):a.jsx(li,{className:"h-5 w-5 text-white"}),a.jsx("span",{className:"text-white font-medium",children:f.message})]})}),a.jsxs("div",{className:"mt-4 bg-gray-700/30 rounded-lg p-3",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-white font-medium text-sm",children:""}),a.jsxs("span",{className:"text-gray-400 text-sm",children:[s.length," / ",t.tasks.reduce((w,b)=>w+b.options.length,0)]})]}),a.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${s.length/t.tasks.reduce((w,b)=>w+b.options.length,0)*100}%`}})})]})]})},uq=({commands:t=[],instructions:e="Try Linux commands in this safe simulator",onComplete:r})=>{const[n,s]=S.useState(""),[i,o]=S.useState([]),[l,u]=S.useState([]),[h,f]=S.useState(0),[p,x]=S.useState(!1),v=S.useRef(null),w=Array.isArray(t)?t:[];S.useEffect(()=>{v.current&&v.current.focus()},[]);const b=j=>{if(j.preventDefault(),!n.trim())return;const k=[...i,n];o(k);const F=w.find(L=>L.command.toLowerCase()===n.toLowerCase());F?(u([...l,{command:n,output:F.output,description:F.description,success:!0}]),f(h+1),x(!1)):(u([...l,{command:n,output:"Command not found. Try another command.",success:!1}]),x(!0)),s("")},_=j=>{j.key==="Enter"&&b(j)},R=w.filter(j=>!i.includes(j.command)).slice(0,3);return a.jsxs("div",{className:"linux-simulator bg-black text-green-400 p-4 rounded-lg font-mono h-full flex flex-col",children:[a.jsx("div",{className:"mb-3",children:a.jsxs("div",{className:"text-sm text-gray-400",children:["  : ",R.map(j=>a.jsx("span",{className:"bg-gray-800 px-2 py-1 rounded mx-1",children:j.command},j.command))]})}),a.jsxs("div",{className:"terminal-output bg-gray-900 p-3 rounded mb-3 h-48 overflow-y-auto flex-1",children:[a.jsxs("div",{className:"mb-2 text-gray-500",children:["student@linux:~$ ",a.jsx("span",{className:"text-green-400",children:"welcome to Linux simulator!"})]}),l.map((j,k)=>a.jsxs("div",{className:"mb-2",children:[a.jsxs("div",{className:"text-gray-500",children:["student@linux:~$ ",a.jsx("span",{className:"text-white",children:j.command})]}),a.jsx("div",{className:`ml-4 ${j.success?"text-green-400":"text-red-400"}`,children:j.output}),j.description&&a.jsxs("div",{className:"ml-4 text-blue-400 text-xs italic",children:[" ",j.description]})]},k)),p&&a.jsx("div",{className:"text-yellow-400 text-xs",children:"    : ls, pwd, whoami, date"})]}),a.jsxs("form",{onSubmit:b,className:"flex items-center mb-3",children:[a.jsx("span",{className:"text-gray-500 mr-2",children:"student@linux:~$"}),a.jsx("input",{ref:v,type:"text",value:n,onChange:j=>s(j.target.value),onKeyDown:_,className:"flex-1 bg-transparent text-green-400 outline-none border-none",placeholder:" ..."})]}),a.jsxs("div",{className:"text-xs text-gray-400 mb-3",children:[": ",h," / ",w.length," ",a.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mt-1",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${w.length>0?h/w.length*100:0}%`}})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-bold text-white mb-2",children:" :"}),a.jsx("div",{className:"grid grid-cols-2 gap-1 text-xs",children:w.map((j,k)=>a.jsxs("div",{className:`p-1 rounded ${i.includes(j.command)?"bg-green-900 text-green-300":"bg-gray-800 text-gray-400"}`,children:[a.jsx("div",{className:"font-bold",children:j.command}),a.jsx("div",{className:"text-xs opacity-75",children:j.description})]},k))})]})]})},dq=({exercise:t,onComplete:e})=>{const[r,n]=S.useState(null),[s,i]=S.useState([]),[o,l]=S.useState(!1),[u,h]=S.useState(0),[f,p]=S.useState(!1),{components:x,connections:v}=t,w=k=>{switch(k){case"computer":return a.jsx(Ad,{className:"h-8 w-8"});case"server":return a.jsx(L3,{className:"h-8 w-8"});case"router":return a.jsx(ZB,{className:"h-8 w-8"});default:return a.jsx(Df,{className:"h-8 w-8"})}},b=k=>{switch(k){case"computer":return"bg-blue-500";case"server":return"bg-green-500";case"router":return"bg-purple-500";default:return"bg-gray-500"}},_=k=>{if(r===null)n(k);else if(r.name!==k.name){const F={from:r.name,to:k.name,protocol:"HTTP"};i([...s,F]),n(null)}else n(null)},R=()=>{l(!0),h(0);const k=setInterval(()=>{h(F=>F>=s.length?(clearInterval(k),l(!1),p(!0),setTimeout(()=>e(!0),2e3),F):F+1)},1e3)},j=()=>{i([]),n(null),l(!1),h(0),p(!1)};return a.jsxs("div",{className:"space-y-4 max-w-6xl mx-auto h-full flex flex-col",children:[a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-xl border-2 border-gray-600 flex-1 relative",children:[a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:x.map((k,F)=>a.jsx(Ke.div,{className:`p-3 rounded-xl border-2 cursor-pointer transition-all duration-200 ${(r==null?void 0:r.name)===k.name?"border-yellow-400 bg-yellow-500/20":"border-gray-600 bg-gray-700/50 hover:border-blue-400 hover:bg-blue-800/30"}`,onClick:()=>_(k),whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`${b(k.type)} rounded-lg p-2 mb-2 mx-auto w-fit`,children:w(k.type)}),a.jsx("h4",{className:"font-bold text-white text-base mb-1",children:k.name}),a.jsx("p",{className:"text-gray-300 text-xs",children:k.ip})]})},k.name))}),a.jsx("div",{className:"space-y-2",children:s.map((k,F)=>a.jsxs(Ke.div,{className:`flex items-center justify-between p-3 rounded-lg border-2 ${o&&F<u?"border-green-400 bg-green-800/30":"border-gray-600 bg-gray-700/50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"text-blue-400 font-bold text-sm",children:k.from}),a.jsx(bo,{className:"h-4 w-4 text-blue-400"}),a.jsx("div",{className:"text-green-400 font-bold text-sm",children:k.to})]}),a.jsx("div",{className:"text-purple-400 font-mono text-sm",children:k.protocol}),o&&F<u&&a.jsx(Qt,{className:"h-5 w-5 text-green-400"})]},`${k.from}-${k.to}`))}),r&&a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-4 p-3 bg-blue-900/30 border-2 border-blue-500 rounded-lg",children:a.jsxs("p",{className:"text-blue-200 text-center text-sm",children:["       ",r.name]})})]}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsxs(Ke.button,{onClick:R,disabled:s.length===0||o,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg border border-green-500 hover:border-green-400 transition-all duration-200 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:s.length>0&&!o?{scale:1.05}:{},whileTap:s.length>0&&!o?{scale:.95}:{},children:[a.jsx(bo,{className:"h-4 w-4"})," "]}),a.jsxs(Ke.button,{onClick:j,disabled:o,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg border border-red-500 hover:border-red-400 transition-all duration-200 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:o?{}:{scale:1.05},whileTap:o?{}:{scale:.95},children:[a.jsx(Df,{className:"h-4 w-4"}),""]})]}),o&&a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-yellow-200 text-base",children:[" ...  ",u+1,"  ",s.length]})}),f&&a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-green-900/30 border-2 border-green-500 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[a.jsx(Qt,{className:"h-6 w-6 text-green-400"}),a.jsx("span",{className:"text-xl font-bold text-green-200",children:"  !"})]}),a.jsx("p",{className:"text-green-200",children:"   "})]})})]})},hq=({content:t,onComplete:e})=>{const[r,n]=S.useState(null),[s,i]=S.useState(0),[o,l]=S.useState(!1),[u,h]=S.useState(t.duration||300);S.useEffect(()=>{if(u>0&&!o){const w=setTimeout(()=>h(u-1),1e3);return()=>clearTimeout(w)}else u===0&&e&&e()},[u,o,e]);const f=w=>{n(w),i(0),l(!0)},p=()=>{s<r.steps.length-1?i(s+1):l(!1)},x=()=>{n(null),i(0),l(!1)},v=w=>{const b=Math.floor(w/60),_=w%60;return`${b}:${_.toString().padStart(2,"0")}`};return a.jsxs("div",{className:"protocol-simulator bg-white rounded-lg shadow-lg p-4 max-w-4xl mx-auto h-full flex flex-col",children:[a.jsx("div",{className:"text-center mb-4",children:a.jsxs("div",{className:"text-sm text-gray-500",children:[" : ",v(u)]})}),r?a.jsxs("div",{className:"simulation-area flex-1",children:[a.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-blue-600 text-white p-4 rounded-lg mb-4",children:[a.jsx("h4",{className:"text-lg font-bold mb-2",children:r.name}),a.jsx("p",{className:"text-xs opacity-90 mb-3",children:r.description}),a.jsxs("div",{className:"steps-container",children:[a.jsx("h5",{className:"text-base font-semibold mb-2",children:" :"}),a.jsx("div",{className:"space-y-1",children:r.steps.map((w,b)=>a.jsx("div",{className:`p-2 rounded-lg transition-all duration-500 ${b<=s?"bg-white text-green-600 font-semibold":"bg-white bg-opacity-20 text-white"}`,children:w},b))})]}),a.jsxs("div",{className:"mt-4 flex justify-center space-x-3",children:[o&&s<r.steps.length-1&&a.jsx("button",{onClick:p,className:"bg-white text-green-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors text-sm",children:" "}),a.jsx("button",{onClick:x,className:"bg-white text-gray-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors text-sm",children:" "})]})]}),!o&&s===r.steps.length-1&&a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-3 py-2 rounded-lg",children:[a.jsx("p",{className:"font-semibold text-sm",children:"  ! "}),a.jsxs("p",{className:"text-xs mt-1",children:["  ",r.name," "]})]})})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4 flex-1",children:t.protocols.map(w=>a.jsxs("button",{onClick:()=>f(w),className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 transform hover:scale-105",children:[a.jsx("h4",{className:"text-base font-semibold mb-2",children:w.name}),a.jsx("p",{className:"text-xs opacity-90",children:w.description})]},w.id))}),a.jsx("div",{className:"text-center mt-4",children:a.jsx("button",{onClick:()=>e&&e(),className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors text-sm",children:" "})})]})},fq=({content:t,onComplete:e})=>{const[r,n]=S.useState(t.initialHtml||"<h1> !</h1>"),[s,i]=S.useState(t.initialCss||"h1 { color: blue; }"),[o,l]=S.useState(t.initialJs||'console.log("Hello World!");'),[u,h]=S.useState(""),[f,p]=S.useState("html"),[x,v]=S.useState(t.duration||600),[w,b]=S.useState(!1),_=S.useRef(null);S.useEffect(()=>{if(x>0){const I=setTimeout(()=>v(x-1),1e3);return()=>clearTimeout(I)}else e&&e()},[x,e]),S.useEffect(()=>{w&&R()},[r,s,o,w]);const R=()=>{try{const I=_.current;if(I&&I.contentDocument){const N=I.contentDocument;N.open(),N.write(`
          <!DOCTYPE html>
          <html dir="rtl" lang="he">
          <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <style>${s}</style>
          </head>
          <body>
            ${r}
            <script>${o}<\/script>
          </body>
          </html>
        `),N.close()}}catch(I){console.log("Iframe not ready yet:",I.message)}},j=()=>{b(!0)},k=I=>{const N=Math.floor(I/60),T=I%60;return`${N}:${T.toString().padStart(2,"0")}`},F=()=>{R()},L=()=>{n(t.initialHtml||"<h1> !</h1>"),i(t.initialCss||"h1 { color: blue; }"),l(t.initialJs||'console.log("Hello World!");')};return a.jsxs("div",{className:"code-editor bg-gray-900 rounded-xl shadow-2xl p-4 max-w-6xl mx-auto border border-gray-700 h-full flex flex-col",children:[a.jsx("div",{className:"text-center mb-4",children:a.jsxs("div",{className:"text-sm text-gray-400 bg-gray-800 px-3 py-1 rounded-lg inline-block",children:[" : ",k(x)]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 flex-1",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex space-x-2 bg-gray-800 p-2 rounded-lg",children:["html","css","js"].map(I=>a.jsx("button",{onClick:()=>p(I),className:`px-4 py-2 rounded-lg font-semibold transition-all duration-200 text-sm ${f===I?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:I.toUpperCase()},I))}),a.jsxs("div",{className:"space-y-4",children:[f==="html"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"HTML"}),a.jsx("textarea",{value:r,onChange:I=>n(I.target.value),className:"w-full h-48 p-3 border border-gray-600 rounded-lg font-mono text-sm bg-gray-800 text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"    -HTML ..."})]}),f==="css"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"CSS"}),a.jsx("textarea",{value:s,onChange:I=>i(I.target.value),className:"w-full h-48 p-3 border border-gray-600 rounded-lg font-mono text-sm bg-gray-800 text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"    -CSS ..."})]}),f==="js"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"JavaScript"}),a.jsx("textarea",{value:o,onChange:I=>l(I.target.value),className:"w-full h-48 p-3 border border-gray-600 rounded-lg font-mono text-sm bg-gray-800 text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"    -JavaScript ..."})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:F,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all duration-200 font-semibold shadow-lg text-sm",children:" "}),a.jsx("button",{onClick:L,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all duration-200 font-semibold shadow-lg text-sm",children:""})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:""}),a.jsx("div",{className:"border border-gray-600 rounded-lg h-64 bg-gray-800 overflow-hidden",children:a.jsx("iframe",{ref:_,onLoad:j,className:"w-full h-full rounded-lg bg-white",title:"Code Output",sandbox:"allow-scripts allow-same-origin",srcDoc:"<!DOCTYPE html><html><head><meta charset='UTF-8'></head><body style='margin:0;padding:20px;font-family:Arial,sans-serif;'><h1>...</h1></body></html>"})})]})]}),a.jsxs("div",{className:"mt-4 p-3 bg-gray-800 border border-gray-700 rounded-xl",children:[a.jsx("h4",{className:"font-semibold text-blue-400 mb-2 text-sm",children:":"}),a.jsxs("ul",{className:"text-xs text-gray-300 space-y-1",children:[a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"   HTML, CSS -JavaScript"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),'   " "    ']}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"      "]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"          "]})]})]}),a.jsx("div",{className:"text-center mt-4",children:a.jsx("button",{onClick:()=>e&&e(),className:"bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-all duration-200 font-semibold shadow-lg text-sm",children:" "})})]})},mq=({content:t,onComplete:e})=>{const[r,n]=S.useState([]),[s,i]=S.useState(null),[o,l]=S.useState(t.duration||900);S.useEffect(()=>{if(o>0){const w=setTimeout(()=>l(o-1),1e3);return()=>clearTimeout(w)}else e&&e()},[o,e]);const u=[{id:"header",name:" ",icon:"",html:"<h1> </h1>",css:"h1 { color: #333; text-align: center; font-size: 2.5rem; margin: 20px 0; }"},{id:"paragraph",name:"",icon:"",html:"<p>  .      .</p>",css:"p { color: #666; font-size: 1.1rem; line-height: 1.6; margin: 15px 0; }"},{id:"image",name:"",icon:"",html:'<img src="https://via.placeholder.com/300x200" alt=" " />',css:"img { max-width: 100%; height: auto; border-radius: 8px; margin: 15px 0; }"},{id:"button",name:"",icon:"",html:`<button onclick="alert('!')"> </button>`,css:"button { background-color: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 1rem; } button:hover { background-color: #0056b3; }"},{id:"list",name:"",icon:"",html:"<ul><li> </li><li> </li><li> </li></ul>",css:"ul { margin: 15px 0; } li { color: #555; font-size: 1rem; margin: 5px 0; }"},{id:"divider",name:" ",icon:"",html:"<hr />",css:"hr { border: none; height: 2px; background-color: #ddd; margin: 20px 0; }"}],h=w=>{const b=Math.floor(w/60),_=w%60;return`${b}:${_.toString().padStart(2,"0")}`},f=w=>{const b={...w,id:`${w.id}-${Date.now()}`,order:r.length};n([...r,b])},p=w=>{n(r.filter(b=>b.id!==w))},x=()=>`
<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> </title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 20px; 
            background-color: #f5f5f5; 
        }
        .container { 
            background-color: white; 
            padding: 30px; 
            border-radius: 10px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
        }
        ${r.map(b=>b.css).join(`
`)}
    </style>
</head>
<body>
    <div class="container">
        ${r.map(b=>b.html).join(`
`)}
    </div>
</body>
</html>`,v=()=>{try{const w=x(),b=new Blob([w],{type:"text/html"}),_=URL.createObjectURL(b),R=document.createElement("a");R.href=_,R.download="my-website.html",R.click(),URL.revokeObjectURL(_)}catch(w){console.error("Error downloading website:",w),alert("  .  .")}};return a.jsxs("div",{className:"website-builder bg-gray-900 rounded-xl shadow-2xl p-8 max-w-7xl mx-auto border border-gray-700",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h3",{className:"text-3xl font-bold text-white mb-3",children:" "}),a.jsx("p",{className:"text-gray-300 mb-4 text-lg",children:t.instructions}),a.jsxs("div",{className:"text-sm text-gray-400 bg-gray-800 px-4 py-2 rounded-lg inline-block",children:[" : ",h(o)]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-1",children:[a.jsx("h4",{className:"text-xl font-semibold text-white mb-6",children:" "}),a.jsx("div",{className:"space-y-3",children:u.map(w=>a.jsx("div",{className:"p-4 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-800 transition-all duration-200 bg-gray-800/50",onClick:()=>f(w),children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-2xl",children:w.icon}),a.jsx("span",{className:"font-medium text-gray-200",children:w.name})]})},w.id))})]}),a.jsxs("div",{className:"lg:col-span-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h4",{className:"text-xl font-semibold text-white",children:"   "}),a.jsx("div",{className:"flex space-x-3",children:a.jsxs("button",{onClick:v,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all duration-200 font-semibold shadow-lg flex items-center space-x-2",children:[a.jsx("span",{children:""}),a.jsx("span",{children:" "})]})})]}),a.jsx("div",{className:"border border-gray-600 rounded-lg p-6 bg-gray-800/50 min-h-96",children:r.length===0?a.jsxs("div",{className:"text-center text-gray-400 py-20",children:[a.jsx("div",{className:"text-6xl mb-6",children:""}),a.jsx("p",{className:"text-lg",children:"        "}),a.jsx("p",{className:"text-sm mt-2 text-gray-500",children:"       "})]}):a.jsx("div",{className:"space-y-3",children:r.map((w,b)=>a.jsxs("div",{className:"p-4 bg-gray-700 border border-gray-600 rounded-lg flex items-center justify-between hover:bg-gray-600 transition-all duration-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-2xl",children:w.icon}),a.jsx("span",{className:"font-medium text-gray-200",children:w.name})]}),a.jsx("div",{className:"flex space-x-2",children:a.jsx("button",{onClick:()=>p(w.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700 transition-all duration-200",children:""})})]},w.id))})})]})]}),a.jsxs("div",{className:"mt-8 p-6 bg-gray-800 border border-gray-700 rounded-xl",children:[a.jsx("h4",{className:"font-semibold text-blue-400 mb-3 text-lg",children:":"}),a.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"       "]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),'   ""   ']}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),'   " "     ']}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"         "]})]})]}),a.jsx("div",{className:"text-center mt-8",children:a.jsx("button",{onClick:()=>e&&e(),className:"bg-gray-700 text-white px-8 py-3 rounded-lg hover:bg-gray-600 transition-all duration-200 font-semibold shadow-lg",children:" "})})]})},it=({variant:t="default",padding:e="md",hoverable:r=!1,clickable:n=!1,className:s="",children:i,onClick:o,role:l="article",...u})=>{const h="rounded-xl transition-all duration-200",f={default:"bg-gray-900 border border-gray-700 text-white",elevated:"bg-gray-800 shadow-lg border border-gray-600 text-white",outlined:"bg-transparent border-2 border-gray-600 text-white",gradient:"bg-gradient-to-br from-cyber-blue to-cyber-purple text-white border-0",dark:"bg-gray-800 border border-gray-700 text-white",light:"bg-white border border-gray-200 text-gray-900"},p={sm:"p-3",md:"p-6",lg:"p-8",xl:"p-10"},x=n?"cursor-pointer":"",v=r?"hover:shadow-xl hover:scale-105":"",w=`${h} ${f[t]} ${p[e]} ${x} ${v} ${s}`,b=_=>{n&&o&&o(_)};return a.jsx("div",{className:w,onClick:b,role:l,tabIndex:n?0:void 0,onKeyDown:n?_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),b(_))}:void 0,...u,children:i})},pq=({content:t,onComplete:e})=>{const[r,n]=S.useState({}),[s,i]=S.useState(""),[o,l]=S.useState(null),[u,h]=S.useState(""),[f,p]=S.useState(0),[x,v]=S.useState([]),[w,b]=S.useState(t.duration||600),[_,R]=S.useState(!1);S.useEffect(()=>{const I={};t.tables.forEach(N=>{I[N.name]={columns:N.columns,data:[...N.sampleData]}}),n(I)},[t.tables]),S.useEffect(()=>{if(w>0){const I=setTimeout(()=>b(w-1),1e3);return()=>clearTimeout(I)}else e&&e({completed:x.length,total:t.exercises.length})},[w,e,x.length,t.exercises.length]);const j=()=>{h(""),l(null);const I=s.trim().toLowerCase();try{if(I.startsWith("select")){const N=I.match(/from\s+(\w+)/);N&&r[N[1]]?l(r[N[1]].data):h("  ")}else if(I.startsWith("create table")){const N=I.match(/create\s+table\s+(\w+)\s*\(([^)]+)\)/i);if(N){const T=N[1],P=N[2].split(",").map(B=>B.trim().split(" ")[0]);n(B=>({...B,[T]:{columns:P,data:[]}})),l({message:` ${T}  `})}else h("   ")}else if(I.startsWith("insert into")){const N=I.match(/insert\s+into\s+(\w+)\s*\(([^)]+)\)\s*values\s*\(([^)]+)\)/i);if(N){const T=N[1],P=N[2].split(",").map(z=>z.trim()),B=N[3].split(",").map(z=>z.trim().replace(/['"]/g,""));if(r[T]){const z={};P.forEach((O,D)=>{z[O]=B[D]}),n(O=>({...O,[T]:{...O[T],data:[...O[T].data,z]}})),l({message:"  "})}else h("  ")}else h("   ")}else h("     ")}catch{h("  ")}},k=()=>{const I=t.exercises[f];if(!I)return;const N=s.toLowerCase();let T=!1;switch(I.id){case 1:T=N.includes("create table")&&N.includes("enrollments");break;case 2:T=N.includes("insert into")&&N.includes("enrollments");break;case 3:T=N.includes("join")||N.includes("select")&&N.includes("from");break;default:T=!0}T&&!x.includes(I.id)&&v(P=>[...P,I.id])};S.useEffect(()=>{k()},[s,f]);const F=I=>{const N=Math.floor(I/60),T=I%60;return`${N}:${T.toString().padStart(2,"0")}`},L=()=>{const I=t.exercises[f];if(!I)return"";switch(I.id){case 1:return"CREATE TABLE enrollments (student_id INT, course_id INT, semester VARCHAR(20))";case 2:return"INSERT INTO enrollments (student_id, course_id, semester) VALUES (1, 1, '2024A')";case 3:return"SELECT students.name, courses.title FROM students JOIN enrollments ON students.id = enrollments.student_id JOIN courses ON courses.id = enrollments.course_id";default:return""}};return a.jsxs("div",{className:"database-simulator p-6 max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"  "}),a.jsx("p",{className:"text-gray-300 mb-4",children:t.instructions}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"text-sm text-gray-400",children:[" ",f+1,"  ",t.exercises.length]}),a.jsxs("div",{className:"text-sm font-mono bg-gray-100 px-3 py-1 rounded text-gray-800",children:[" : ",F(w)]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs(it,{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-white",children:" "}),t.exercises[f]&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2 text-white",children:t.exercises[f].title}),a.jsx("p",{className:"text-gray-300 mb-2",children:t.exercises[f].description}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ut,{onClick:()=>R(!_),variant:"outline",size:"sm",className:"text-blue-400 border-blue-400 hover:bg-blue-400 hover:text-white",children:_?" ":" "}),_&&a.jsxs("p",{className:"text-sm text-blue-400",children:[": ",t.exercises[f].hint]})]}),a.jsx(ut,{onClick:()=>i(L()),variant:"outline",size:"sm",className:"mt-2 text-green-400 border-green-400 hover:bg-green-400 hover:text-white",children:" "})]})]}),a.jsxs(it,{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-white",children:" SQL"}),a.jsx("textarea",{value:s,onChange:I=>i(I.target.value),placeholder:"    ...",className:"w-full h-32 p-3 border border-gray-300 rounded-lg font-mono text-sm bg-gray-800 text-white"}),a.jsx(ut,{onClick:j,className:"mt-3 bg-blue-600 hover:bg-blue-700",children:" "})]}),u&&a.jsxs(it,{className:"bg-red-900/50 border-red-500/50",children:[a.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-2",children:""}),a.jsx("p",{className:"text-red-300",children:u})]}),o&&a.jsxs(it,{className:"bg-green-900/50 border-green-500/50",children:[a.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:""}),o.message?a.jsx("p",{className:"text-green-300",children:o.message}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsx("tr",{className:"border-b border-green-500/30",children:o.length>0&&Object.keys(o[0]).map(I=>a.jsx("th",{className:"text-left p-2 text-green-400",children:I},I))})}),a.jsx("tbody",{children:o.map((I,N)=>a.jsx("tr",{className:"border-b border-green-500/30",children:Object.values(I).map((T,P)=>a.jsx("td",{className:"p-2 text-green-300",children:T},P))},N))})]})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs(it,{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-white",children:" "}),a.jsx("div",{className:"space-y-4",children:Object.entries(r).map(([I,N])=>a.jsxs("div",{className:"border border-gray-600 rounded-lg p-3",children:[a.jsx("h4",{className:"font-medium mb-2 text-white",children:I}),a.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:[": ",N.columns.join(", ")]}),a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"min-w-full text-xs",children:[a.jsx("thead",{children:a.jsx("tr",{className:"border-b border-gray-600",children:N.columns.map(T=>a.jsx("th",{className:"text-left p-1 text-gray-300",children:T},T))})}),a.jsx("tbody",{children:N.data.slice(0,3).map((T,P)=>a.jsx("tr",{className:"border-b border-gray-600",children:N.columns.map(B=>a.jsx("td",{className:"p-1 text-gray-400",children:T[B]},B))},P))})]}),N.data.length>3&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["+",N.data.length-3,"  "]})]})]},I))})]}),a.jsxs(it,{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-white",children:""}),a.jsxs("div",{className:"flex gap-2 mb-3",children:[a.jsx(ut,{onClick:()=>p(Math.max(0,f-1)),disabled:f===0,variant:"outline",size:"sm",className:"text-blue-400 border-blue-400 hover:bg-blue-400 hover:text-white",children:""}),a.jsx(ut,{onClick:()=>p(Math.min(t.exercises.length-1,f+1)),disabled:f===t.exercises.length-1,variant:"outline",size:"sm",className:"text-blue-400 border-blue-400 hover:bg-blue-400 hover:text-white",children:""})]}),a.jsx("div",{className:"space-y-2",children:t.exercises.map((I,N)=>a.jsxs("button",{onClick:()=>p(N),className:`w-full text-left p-2 rounded text-sm ${f===N?"bg-blue-600 text-white":x.includes(I.id)?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[x.includes(I.id)?" ":" ",I.title]},I.id))})]})]})]}),x.length===t.exercises.length&&a.jsxs(it,{className:"mt-6 bg-green-900/50 border-green-500/50",children:[a.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:"  !"}),a.jsx("p",{className:"text-green-300",children:"    !"})]})]})},xq=({content:t,onComplete:e})=>{var D,G;const[r,n]=S.useState(""),[s,i]=S.useState([{id:1,title:" ",url:"",active:!0}]),[o,l]=S.useState([]),[u,h]=S.useState([]),[f,p]=S.useState(1),[x,v]=S.useState([]),[w,b]=S.useState(0),[_,R]=S.useState(t.duration||600),[j,k]=S.useState(!0);S.useEffect(()=>{if(_>0){const Q=setTimeout(()=>R(_-1),1e3);return()=>clearTimeout(Q)}else e&&e(!0)},[_,e]);const F=Q=>{const ue=Math.floor(Q/60),H=Q%60;return`${ue}:${H.toString().padStart(2,"0")}`},L=Q=>{n(Q.target.value)},I=Q=>{if(Q.preventDefault(),r.trim()){const ue=[...u,{url:r,timestamp:new Date().toLocaleTimeString()}];h(ue);const H=s.map(K=>K.id===f?{...K,url:r,title:r.split("/").pop()||r}:K);i(H);const te=t.tasks.find(K=>K.url===r);te&&!x.includes(te.id)&&(v([...x,te.id]),b(w+te.points)),n("")}},N=()=>{const Q={id:Math.max(...s.map(ue=>ue.id))+1,title:" ",url:"",active:!1};i([...s,Q]),p(Q.id)},T=Q=>{if(s.length>1){const ue=s.filter(H=>H.id!==Q);i(ue),f===Q&&p(ue[0].id)}},P=()=>{const Q=s.find(ue=>ue.id===f);if(Q&&Q.url){const ue={id:Date.now(),title:Q.title,url:Q.url};l([...o,ue]);const H=t.tasks.find(te=>te.action==="add_bookmark");H&&!x.includes(H.id)&&(v([...x,H.id]),b(w+H.points))}},B=()=>{h([]);const Q=t.tasks.find(ue=>ue.action==="clear_history");Q&&!x.includes(Q.id)&&(v([...x,Q.id]),b(w+Q.points))},z=()=>{const Q=t.tasks.find(ue=>ue.action==="privacy_settings");Q&&!x.includes(Q.id)&&(v([...x,Q.id]),b(w+Q.points))},O=()=>s.find(Q=>Q.id===f);return a.jsxs("div",{className:"browser-simulator bg-gray-900 rounded-xl shadow-2xl p-6 max-w-6xl mx-auto border border-gray-700",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-3xl font-bold text-white mb-3",children:" "}),a.jsx("p",{className:"text-gray-300 mb-4 text-lg",children:t.instructions}),a.jsxs("div",{className:"flex justify-center items-center space-x-4 text-sm",children:[a.jsxs("div",{className:"text-gray-400 bg-gray-800 px-4 py-2 rounded-lg",children:[" : ",F(_)]}),a.jsxs("div",{className:"text-green-400 bg-gray-800 px-4 py-2 rounded-lg",children:[": ",w]}),a.jsxs("div",{className:"text-blue-400 bg-gray-800 px-4 py-2 rounded-lg",children:[": ",x.length,"/",t.tasks.length]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gray-100 p-3 border-b",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>p(s[0].id),className:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:" "}),a.jsx("button",{onClick:()=>p(s[0].id),className:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:" "}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:" "}),a.jsx("button",{onClick:N,className:"px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600",children:"  "}),a.jsx("button",{onClick:P,className:"px-3 py-1 bg-yellow-500 text-white rounded text-sm hover:bg-yellow-600",children:" "}),a.jsx("button",{onClick:z,className:"px-3 py-1 bg-purple-500 text-white rounded text-sm hover:bg-purple-600",children:" "})]})}),a.jsx("div",{className:"bg-gray-200 p-2 border-b",children:a.jsx("div",{className:"flex space-x-1",children:s.map(Q=>a.jsxs("div",{className:`flex items-center px-3 py-1 rounded-t cursor-pointer ${Q.id===f?"bg-white":"bg-gray-300 hover:bg-gray-400"}`,onClick:()=>p(Q.id),children:[a.jsx("span",{className:"text-sm truncate max-w-32",children:Q.title}),s.length>1&&a.jsx("button",{onClick:ue=>{ue.stopPropagation(),T(Q.id)},className:"ml-2 text-gray-500 hover:text-red-500",children:""})]},Q.id))})}),a.jsx("div",{className:"p-3 border-b",children:a.jsxs("form",{onSubmit:I,className:"flex",children:[a.jsx("input",{type:"text",value:r,onChange:L,placeholder:"  ...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-l focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-r hover:bg-blue-600",children:""})]})}),a.jsx("div",{className:"p-6 min-h-64",children:a.jsx("div",{className:"text-center text-gray-600",children:(D=O())!=null&&D.url?a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold mb-2",children:[" : ",(G=O())==null?void 0:G.url]}),a.jsx("p",{children:"   ..."})]}):a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:"   !"}),a.jsx("p",{children:"     "})]})})})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:" :"}),a.jsx("div",{className:"space-y-2",children:t.tasks.map(Q=>a.jsxs("div",{className:`p-2 rounded text-sm ${x.includes(Q.id)?"bg-green-600/20 text-green-400 border border-green-500/30":"bg-gray-700/50 text-gray-300 border border-gray-600/30"}`,children:[a.jsx("div",{className:"font-semibold",children:Q.description}),a.jsxs("div",{className:"text-xs opacity-75",children:[": ",Q.points]})]},Q.id))})]}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:" :"}),o.length>0?a.jsx("div",{className:"space-y-1",children:o.map(Q=>a.jsx("div",{className:"text-sm text-gray-300 p-1 hover:bg-gray-700 rounded cursor-pointer",children:Q.title},Q.id))}):a.jsx("p",{className:"text-gray-500 text-sm",children:" "})]}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h4",{className:"text-lg font-semibold text-white",children:" :"}),a.jsx("button",{onClick:B,className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:""})]}),u.length>0?a.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:u.slice(-5).map((Q,ue)=>a.jsxs("div",{className:"text-sm text-gray-300 p-1 hover:bg-gray-700 rounded cursor-pointer",children:[a.jsx("div",{children:Q.url}),a.jsx("div",{className:"text-xs text-gray-500",children:Q.timestamp})]},ue))}):a.jsx("p",{className:"text-gray-500 text-sm",children:" "})]})]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-gray-800 border border-gray-700 rounded-xl",children:[a.jsx("h4",{className:"font-semibold text-blue-400 mb-3 text-lg",children:":"}),a.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"     "]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"     "]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"    "]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"   "]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"   "]})]})]}),a.jsx("div",{className:"text-center mt-6",children:a.jsx("button",{onClick:()=>e&&e(!0),className:"bg-gray-700 text-white px-8 py-3 rounded-lg hover:bg-gray-600 transition-all duration-200 font-semibold shadow-lg",children:" "})})]})};function gq({length:t,includeUppercase:e,includeLowercase:r,includeNumbers:n,includeSymbols:s}){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="abcdefghijklmnopqrstuvwxyz",l="0123456789",u="!@#$%^&*()_+-=[]{}|;:,.<>?";let h="";e&&(h+=i),r&&(h+=o),n&&(h+=l),s&&(h+=u),h||(h=o);let f="";for(let p=0;p<t;p++)f+=h.charAt(Math.floor(Math.random()*h.length));return f}const vq=({options:t,tips:e=[],examples:r=[],onComplete:n})=>{const[s,i]=S.useState(""),[o,l]=S.useState(!1),[u,h]=S.useState(!1),f=()=>{const x=gq(t);i(x),l(!1),h(!0),n&&n(!0)},p=()=>{navigator.clipboard.writeText(s),l(!0)};return a.jsxs("div",{className:"flex flex-col items-center gap-6",children:[a.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg text-xl shadow-lg transition",onClick:f,children:"  "}),s&&a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("div",{className:"bg-gray-900 text-green-400 font-mono text-2xl px-6 py-3 rounded-lg shadow border border-green-500 select-all",children:s}),a.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg mt-2",onClick:p,children:o?"!":" "})]}),r&&r.length>0&&a.jsxs("div",{className:"mt-4 text-right w-full max-w-lg",children:[a.jsx("div",{className:"font-bold text-white mb-2",children:"  :"}),a.jsx("ul",{className:"list-disc list-inside text-gray-200",children:r.map((x,v)=>a.jsx("li",{children:x},v))})]}),e&&e.length>0&&a.jsxs("div",{className:"mt-4 text-right w-full max-w-lg",children:[a.jsx("div",{className:"font-bold text-white mb-2",children:"  :"}),a.jsx("ul",{className:"list-disc list-inside text-gray-200",children:e.map((x,v)=>a.jsx("li",{children:x},v))})]}),u&&a.jsx("div",{className:"mt-6 text-green-400 font-bold text-lg",children:" !    "})]})},yq=({content:t,onComplete:e})=>{const[r,n]=S.useState({}),[s,i]=S.useState(!1),o=Object.values(r).reduce((x,v)=>x+((v==null?void 0:v.price)||0),0),l=o>t.budget,u=Object.keys(r).length===t.components.length,h=(x,v)=>{s||n(w=>({...w,[x]:v}))},f=()=>{i(!0),e&&e({selected:r,budgetUsed:o,isCorrect:!l})},p=()=>{n({}),i(!1)};return a.jsxs("div",{className:"w-full max-w-3xl mx-auto space-y-10",children:[a.jsxs("div",{className:`rounded-xl p-6 mb-4 shadow-lg flex flex-col items-center ${l?"bg-red-100 border-red-500 border":"bg-blue-100 border-blue-400 border"}`,children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-800 mb-2",children:[": ",t.budget.toLocaleString(),' "']}),a.jsx("div",{className:`text-xl font-bold ${l?"text-red-600":"text-green-700"}`,children:l?a.jsxs(a.Fragment,{children:[" ! ",a.jsx(bs,{className:"inline ml-2 text-red-500"})]}):a.jsxs(a.Fragment,{children:[" : ",o.toLocaleString(),' "']})}),a.jsx("div",{className:"text-md text-gray-600 mt-1",children:"        !"})]}),a.jsx("div",{className:"space-y-8",children:t.components.map(x=>a.jsxs("div",{className:"bg-white/70 rounded-xl shadow p-6 border border-gray-200",children:[a.jsx("div",{className:"font-bold text-blue-700 mb-3 text-lg",children:x.name}),a.jsx("div",{className:"flex gap-4 flex-wrap",children:x.options.map(v=>{var b;const w=((b=r[x.id])==null?void 0:b.name)===v.name;return a.jsxs("button",{onClick:()=>h(x.id,v),disabled:s,className:`p-4 rounded-lg border-2 min-w-[140px] transition-all duration-150 shadow 
                      ${w?"bg-gradient-to-r from-blue-500 to-emerald-500 text-white border-blue-700 scale-105":"bg-gray-100 text-gray-800 border-gray-400 hover:bg-blue-50"}
                      ${s?"opacity-60 cursor-not-allowed":"hover:scale-105"}`,children:[a.jsx("div",{className:"font-bold text-lg",children:v.name}),a.jsxs("div",{className:"text-md",children:["",v.price," | : ",v.performance]}),a.jsx("div",{className:"text-xs text-gray-600 mt-2",children:v.description})]},v.name)})})]},x.id))}),a.jsxs("div",{className:"flex flex-col items-center mt-8 space-y-3",children:[!s&&a.jsx("button",{onClick:f,disabled:!u||l,className:`px-10 py-4 rounded-lg text-xl font-bold transition-all duration-300 shadow-md 
              ${!u||l?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-700 hover:to-emerald-700"}`,children:" "}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-center mt-4",children:l?a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-xl font-bold flex items-center justify-center",children:[a.jsx(bs,{className:"w-6 h-6 mr-2 text-red-500"})," !   ."]}):a.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-6 py-4 rounded-xl font-bold flex items-center justify-center",children:[a.jsx(Qt,{className:"w-6 h-6 mr-2 text-green-600"})," !    ",o.toLocaleString(),' "!']})}),a.jsxs("button",{onClick:p,className:"mt-6 flex items-center px-6 py-2 bg-blue-100 border border-blue-300 text-blue-700 rounded-lg font-bold hover:bg-blue-200 transition",children:[a.jsx(Ps,{className:"w-5 h-5 ml-2"}),"  "]})]})]}),(s||u)&&a.jsxs("div",{className:"bg-white/90 rounded-xl shadow-md border border-gray-200 p-6 mt-10",children:[a.jsx("div",{className:"font-bold text-blue-800 mb-4 text-lg",children:"  :"}),a.jsx("ul",{className:"list-disc text-gray-700 text-md space-y-2 pr-4",children:t.components.map(x=>{var v;return a.jsxs("li",{children:[a.jsxs("span",{className:"font-bold",children:[x.name,":"]}),"",((v=r[x.id])==null?void 0:v.name)||a.jsx("span",{className:"text-gray-400",children:" "}),r[x.id]&&a.jsxs(a.Fragment,{children:["  ",r[x.id].price," | ",r[x.id].description]})]},x.id)})})]})]})},wq=({content:t,onComplete:e})=>{const[r,n]=S.useState(null),[s,i]=S.useState(!1),o=l=>{n(l),i(!0),e&&e(!0)};return a.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[a.jsx("div",{className:"mb-6 text-lg font-bold text-blue-700 text-center",children:t.instructions}),a.jsx("div",{className:"grid grid-cols-1 gap-6",children:t.scenarios.map((l,u)=>a.jsxs("button",{disabled:s,onClick:()=>o(u),className:`
              flex flex-col items-center justify-center p-6 rounded-xl shadow-lg border-2
              ${r===u?"bg-gradient-to-r from-green-400 to-teal-500 text-white border-green-600 scale-105":"bg-white/80 text-gray-700 border-blue-200 hover:bg-blue-50"}
              transition-all duration-150
            `,children:[a.jsx("div",{className:"text-4xl mb-2",children:l.icon}),a.jsx("div",{className:"font-bold text-lg mb-1",children:l.name}),a.jsx("div",{className:"text-md",children:l.description})]},u))}),r!==null&&a.jsxs("div",{className:"mt-8 p-6 bg-green-50 border-l-4 border-green-400 rounded-xl text-green-700 text-center",children:[a.jsxs("div",{className:"flex items-center justify-center mb-2",children:[a.jsx(Qt,{className:"w-7 h-7 mr-2 text-green-600"}),a.jsx("span",{className:"text-lg font-bold",children:":"})]}),a.jsx("div",{className:"text-lg",children:t.scenarios[r].result})]}),s&&a.jsxs("div",{className:"mt-6 flex items-center justify-center",children:[a.jsx(EB,{className:"w-8 h-8 text-blue-400 mr-2"}),a.jsx("span",{className:"font-bold text-blue-700",children:" ! /      ."})]})]})},A0=({slide:t,onAnswer:e=()=>{},answers:r})=>{const n=(t==null?void 0:t.content)||{},[s,i]=S.useState(!1),o=l=>{i(!0),e(t.id,{completed:!0,isCorrect:l})};return!n||!n.type?a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",children:a.jsx("div",{className:"max-w-5xl w-full flex flex-col",children:a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-4xl font-bold text-white mb-4",style:{textShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:(t==null?void 0:t.title)||"Loading..."}),a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500 mx-auto"})]})})}):a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",children:a.jsxs("div",{className:"max-w-5xl w-full flex flex-col",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-4xl font-bold text-white mb-4",style:{textShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:(t==null?void 0:t.title)||"Interactive Exercise"}),a.jsx("p",{className:"text-xl text-gray-200",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:n.instructions||"    "})]}),a.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700/50 shadow-2xl flex-1 flex flex-col justify-center",children:[n.type==="drag-drop"&&a.jsx(oq,{exercise:n,onComplete:o}),n.type==="matching"&&a.jsx(lq,{exercise:n,onComplete:o}),n.type==="multiple-choice"&&a.jsx(KT,{exercise:n,onComplete:o}),n.type==="quiz"&&a.jsx(KT,{exercise:n,onComplete:o}),n.type==="windows-simulator"&&a.jsx(cq,{exercise:n,onComplete:o}),n.type==="linux-simulator"&&a.jsx(uq,{commands:n.commands||[],instructions:n.instructions||"Try Linux commands in this safe simulator",onComplete:o}),n.type==="network-simulator"&&a.jsx(dq,{exercise:n,onComplete:o}),n.type==="protocol-simulator"&&a.jsx(hq,{content:n,onComplete:o}),n.type==="code-editor"&&a.jsx(fq,{content:n,onComplete:o}),n.type==="website-builder"&&a.jsx(mq,{content:n,onComplete:o}),n.type==="database-simulator"&&a.jsx(pq,{content:n,onComplete:o}),n.type==="browser-simulator"&&a.jsx(xq,{content:n,onComplete:o}),n.type==="password-generator"&&a.jsx(vq,{options:n.options,tips:n.tips,examples:n.examples,onComplete:o}),n.type==="computer-build"&&a.jsx(yq,{content:n,onComplete:o}),n.type==="lab-simulation"&&a.jsx(wq,{content:n,onComplete:o})]}),s&&a.jsx("div",{className:"mt-8 text-center",children:a.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-xl p-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-green-400 mb-2",children:" !"}),a.jsx("p",{className:"text-gray-300",children:" !    "})]})})]})})},C0=({slide:t})=>{const{content:e}=t,[r,n]=S.useState(!1),s=()=>{n(!0)};return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",children:a.jsxs("div",{className:"max-w-5xl w-full flex flex-col",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx("h2",{className:"text-4xl font-bold text-white mb-4",style:{textShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:t.title})}),a.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700/50 shadow-2xl flex-1 flex flex-col justify-center text-center",children:[a.jsx("div",{className:"mb-8",children:a.jsx("div",{className:"w-24 h-24 mx-auto bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center shadow-2xl",children:a.jsx(SB,{className:"w-12 h-12 text-white"})})}),a.jsx("p",{className:"text-2xl text-gray-200 mb-8",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:e.message}),e.timer&&a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[a.jsx("p",{className:"text-xl text-white mb-2",children:" "}),a.jsx("div",{className:"text-4xl font-bold text-orange-400",children:e.timer})]})}),e.activities&&a.jsxs("div",{className:"mb-8",children:[a.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:" :"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.activities.map((i,o)=>a.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20 hover:bg-white/20 transition-all duration-300",children:a.jsx("span",{className:"text-lg text-white",children:i})},`activity-${o}-${i.substring(0,20)}`))})]}),a.jsx("button",{onClick:s,disabled:r,className:`px-8 py-4 rounded-xl text-xl font-bold transition-all duration-300 transform hover:scale-105 ${r?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-green-600 to-blue-600 text-white hover:from-green-700 hover:to-blue-700 shadow-2xl"}`,children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(jn,{className:"w-6 h-6 mr-2"})," "]})}),r&&a.jsx("div",{className:"mt-6",children:a.jsx("div",{className:"bg-green-600/20 border border-green-500/30 rounded-xl p-4",children:a.jsx("p",{className:"text-green-400 font-medium",children:" !"})})})]})]})})},I0=({slide:t,onAnswer:e,answers:r})=>{const{content:n}=t,[s,i]=S.useState(""),[o,l]=S.useState(!1),u=()=>{s.trim()&&(l(!0),e(t.id,{reflection:s.trim(),isCorrect:!0}))};return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",children:a.jsxs("div",{className:"max-w-5xl w-full h-full flex flex-col",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-2xl mb-6",children:a.jsx(R2,{className:"w-10 h-10 text-white"})}),a.jsx("h2",{className:"text-4xl font-bold text-white mb-4",style:{textShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:t.title}),a.jsx("p",{className:"text-xl text-gray-200",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:n.prompt})]}),a.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700/50 shadow-2xl flex-1 flex flex-col justify-center",children:[o?a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-xl p-8",children:[a.jsx("h3",{className:"text-2xl font-bold text-green-400 mb-4",children:"  !"}),a.jsx("p",{className:"text-gray-300 mb-6",children:"   "}),a.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:a.jsxs("p",{className:"text-white italic",children:['"',s,'"']})})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:a.jsx("textarea",{value:s,onChange:h=>i(h.target.value),placeholder:"    ...",className:"w-full h-32 bg-transparent border-none outline-none text-white placeholder-gray-400 resize-none",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"}})}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:u,disabled:!s.trim(),className:`px-8 py-4 rounded-xl text-xl font-bold transition-all duration-300 transform hover:scale-105 ${s.trim()?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 shadow-2xl":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(GB,{className:"w-6 h-6 mr-2"})," "]})})})]}),n.additionalQuestions&&a.jsxs("div",{className:"mt-8",children:[a.jsx("h3",{className:"text-2xl font-bold text-white mb-4 text-center",children:"  :"}),a.jsx("div",{className:"space-y-3",children:n.additionalQuestions.map((h,f)=>a.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:a.jsx("p",{className:"text-gray-200",children:h})},`question-${f}-${h.substring(0,20)}`))})]})]})]})})},R0=({slide:t,onAnswer:e,answers:r})=>{var v;const{content:n}=t,[s,i]=S.useState({}),[o,l]=S.useState(!1),[u,h]=S.useState(0),f=(w,b)=>{o||i(_=>({..._,[w]:b}))},p=()=>{if(Object.keys(s).length===n.questions.length){let w=0;n.questions.forEach((_,R)=>{const j=_.id||`question-${R}`,k=_.correctAnswer||_.correct;s[j]===k&&w++});const b=Math.round(w/n.questions.length*100);h(b),l(!0),e(t.id,{answers:s,score:b,isCorrect:b>=70})}},x=Object.keys(s).length===n.questions.length;return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8 bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:a.jsxs("div",{className:"max-w-5xl w-full h-full flex flex-col",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4 drop-shadow-[0_4px_8px_rgba(0,0,0,0.8)]",style:{textShadow:"0 4px 8px rgba(0,0,0,0.8), 0 0 20px rgba(59,130,246,0.5)"},children:t.title}),n.description&&a.jsx("p",{className:"text-xl md:text-2xl text-blue-200 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]",style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)"},children:n.description})]}),a.jsxs("div",{className:"bg-black/60 backdrop-blur-xl rounded-2xl p-8 border border-blue-500/30 shadow-2xl flex-1 flex flex-col",children:[a.jsx("div",{className:"space-y-8 flex-1 overflow-y-auto",children:(v=n.questions)==null?void 0:v.map((w,b)=>{var _;return a.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[a.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-white mb-4 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]",children:[" ",b+1,": ",w.question]}),a.jsx("div",{className:"space-y-3",children:(_=w.options)==null?void 0:_.map((R,j)=>{const k=typeof R=="string"?R:R.text,F=typeof R=="string"?j:R.id,L=w.id||`question-${b}`,I=w.correctAnswer||w.correct;return a.jsx("button",{onClick:()=>f(L,F),disabled:o,className:`w-full p-5 rounded-2xl border-4 transition-all duration-300 text-right text-lg md:text-xl lg:text-2xl font-bold tracking-wide select-none focus:outline-none focus:ring-4 focus:ring-blue-400/50 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)] ${s[L]===F?o&&F===I?"bg-gradient-to-r from-green-600 to-emerald-600 border-green-400 text-white shadow-lg shadow-green-500/25":o&&F!==I?"bg-gradient-to-r from-red-600 to-pink-600 border-red-400 text-white shadow-lg shadow-red-500/25":"bg-gradient-to-r from-blue-600 to-purple-600 border-blue-400 text-white shadow-lg shadow-blue-500/25":o&&F===I?"bg-gradient-to-r from-green-600 to-emerald-600 border-green-400 text-white shadow-lg shadow-green-500/25":"bg-gray-700/80 border-gray-600 text-gray-300 hover:bg-gray-600/80 hover:text-white"}`,tabIndex:0,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-lg md:text-xl lg:text-2xl drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]",children:k}),s[L]===F&&a.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg",children:o&&F===I?a.jsx(Qt,{className:"w-5 h-5 text-green-600"}):o&&F!==I?a.jsx(li,{className:"w-5 h-5 text-red-600"}):a.jsx(Qt,{className:"w-5 h-5 text-blue-600"})}),o&&F===I&&s[L]!==F&&a.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg",children:a.jsx(Qt,{className:"w-5 h-5 text-green-600"})})]})},`${L}-${F}`)})})]},`question-${b}`)})}),!o&&a.jsx("div",{className:"text-center mt-8",children:a.jsx("button",{onClick:p,disabled:!x,className:`px-8 py-4 rounded-xl text-xl font-bold transition-all duration-300 transform hover:scale-105 drop-shadow-[0_4px_8px_rgba(0,0,0,0.8)] ${x?"bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 shadow-2xl shadow-green-500/25":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:" "})}),o&&a.jsx("div",{className:"mt-8 text-center",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-8 border border-white/20",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full flex items-center justify-center shadow-2xl mb-6",children:a.jsx(V3,{className:"w-10 h-10 text-white"})}),a.jsx("h3",{className:"text-3xl font-bold text-white mb-2 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]",children:" :"}),a.jsxs("div",{className:"text-5xl font-bold text-yellow-400 mb-4 drop-shadow-[0_4px_8px_rgba(0,0,0,0.8)]",children:[u,"%"]}),a.jsx("p",{className:"text-xl text-gray-200 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]",children:u>=90?"!":u>=80?" !":u>=70?"!":" !"})]})})]})]})})};class bq{constructor(){this.sessionStart=Date.now(),this.events=[],this.userId=null,this.lessonId=null}init(e,r=null){this.userId=e,this.lessonId=r,this.sessionStart=Date.now(),this.events=[]}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}logEvent(e,r={}){const n={type:e,timestamp:new Date().toISOString(),sessionTime:Date.now()-this.sessionStart,userId:this.userId,lessonId:this.lessonId,data:r};this.events.push(n);const i={slide_navigation:"",slide_engagement:"",exercise_completion:"",lesson_completion:"",error:"",progress_save:"",user_action:""}[e]||"";console.log(`${i} [Session] ${e}:`,n)}logSlideNavigation(e,r,n){this.logEvent("slide_navigation",{fromSlide:e+1,toSlide:r+1,direction:n,timeSpent:Date.now()-this.sessionStart})}logSlideEngagement(e,r,n){this.logEvent("slide_engagement",{slideId:e,slideType:r,timeSpent:n,engagementLevel:this.calculateEngagementLevel(n)})}calculateEngagementLevel(e){return e<30?"low":e<120?"medium":"high"}logExerciseCompletion(e,r,n){this.logEvent("exercise_completion",{exerciseId:e,isCorrect:r,score:n,timestamp:new Date().toISOString()})}logLessonCompletion(e,r,n){this.logEvent("lesson_completion",{lessonId:e,totalScore:r,timeSpent:n,completionRate:this.calculateCompletionRate(),achievements:this.getUnlockedAchievements()})}calculateCompletionRate(){const e=this.events.filter(n=>n.type==="exercise_completion"&&n.data.isCorrect),r=this.events.filter(n=>n.type==="exercise_completion");return r.length>0?Math.round(e.length/r.length*100):0}getUnlockedAchievements(){return[]}generateSessionSummary(){const e=Date.now()-this.sessionStart,r=this.events.filter(o=>o.type==="slide_navigation"),n=this.events.filter(o=>o.type==="slide_engagement"),s=this.events.filter(o=>o.type==="exercise_completion");return{sessionId:this.generateSessionId(),userId:this.userId,lessonId:this.lessonId,duration:e,totalEvents:this.events.length,slideNavigations:r.length,slideEngagements:n.length,exercisesCompleted:s.length,completionRate:this.calculateCompletionRate(),averageEngagementLevel:this.calculateAverageEngagementLevel(),events:this.events}}calculateAverageEngagementLevel(){const e=this.events.filter(s=>s.type==="slide_engagement");if(e.length===0)return"unknown";const n=e.reduce((s,i)=>s+(i.data.timeSpent||0),0)/e.length;return this.calculateEngagementLevel(n)}exportSessionData(){return{session:this.generateSessionSummary(),analytics:{userBehavior:this.analyzeUserBehavior(),performance:this.analyzePerformance(),recommendations:this.generateRecommendations()}}}analyzeUserBehavior(){const e=this.events.filter(n=>n.type==="slide_navigation"),r=this.events.filter(n=>n.type==="slide_engagement");return{navigationPattern:this.analyzeNavigationPattern(e),engagementPattern:this.analyzeEngagementPattern(r),learningStyle:this.determineLearningStyle()}}analyzeNavigationPattern(e){const r=e.filter(s=>s.data.direction==="forward").length,n=e.filter(s=>s.data.direction==="backward").length;return{forwardMoves:r,backwardMoves:n,pattern:r>n?"progressive":"reviewing",efficiency:this.calculateNavigationEfficiency(e)}}calculateNavigationEfficiency(e){if(e.length===0)return 100;const r=e.filter(s=>s.data.direction==="forward").length,n=e.length;return Math.round(r/n*100)}analyzeEngagementPattern(e){const r=e.map(o=>o.data.engagementLevel),n=r.filter(o=>o==="high").length,s=r.filter(o=>o==="medium").length,i=r.filter(o=>o==="low").length;return{highEngagement:n,mediumEngagement:s,lowEngagement:i,averageEngagement:this.calculateAverageEngagementLevel(),consistency:this.calculateEngagementConsistency(r)}}calculateEngagementConsistency(e){if(e.length===0)return"unknown";const r=new Set(e);return r.size===1?"very_consistent":r.size===2?"consistent":"inconsistent"}determineLearningStyle(){const e=this.events.filter(i=>i.type==="slide_navigation"),r=this.events.filter(i=>i.type==="slide_engagement"),n=r.length>0?r.reduce((i,o)=>i+(o.data.timeSpent||0),0)/r.length:0,s=e.filter(i=>i.data.direction==="backward").length;return n>180&&s>2?"thorough_reviewer":n<60?"quick_learner":s>5?"repetitive_learner":"balanced_learner"}analyzePerformance(){const e=this.events.filter(s=>s.type==="exercise_completion"),r=e.filter(s=>s.data.isCorrect).length,n=e.length;return{accuracy:n>0?Math.round(r/n*100):0,speed:this.calculateAverageResponseTime(),consistency:this.calculatePerformanceConsistency(),improvement:this.calculateImprovementTrend()}}calculateAverageResponseTime(){return this.events.filter(r=>r.type==="exercise_completion").length===0?0:30}calculatePerformanceConsistency(){const e=this.events.filter(s=>s.type==="exercise_completion");if(e.length<3)return"insufficient_data";const r=e.map(s=>s.data.score||0),n=this.calculateVariance(r);return n<10?"very_consistent":n<25?"consistent":"inconsistent"}calculateVariance(e){const r=e.reduce((s,i)=>s+i,0)/e.length;return e.map(s=>Math.pow(s-r,2)).reduce((s,i)=>s+i,0)/e.length}calculateImprovementTrend(){const e=this.events.filter(l=>l.type==="exercise_completion");if(e.length<3)return"insufficient_data";const r=e.map(l=>l.data.score||0),n=r.slice(0,Math.floor(r.length/2)),s=r.slice(Math.floor(r.length/2)),i=n.reduce((l,u)=>l+u,0)/n.length,o=s.reduce((l,u)=>l+u,0)/s.length;return o>i+10?"improving":o<i-10?"declining":"stable"}generateRecommendations(){const e=[],r=this.analyzeUserBehavior(),n=this.analyzePerformance();return r.navigationPattern.efficiency<70&&e.push("Consider reducing backward navigation to improve learning efficiency"),r.engagementPattern.lowEngagement>r.engagementPattern.highEngagement&&e.push("Try spending more time on each slide to improve understanding"),n.accuracy<80&&e.push("Review previous lessons to strengthen foundational knowledge"),r.learningStyle==="quick_learner"&&n.accuracy<90&&e.push("Slow down and review content more thoroughly"),e}}const ri=new bq,_q=(t,e)=>{ri.init(t,e)},Uy=(t,e,r)=>{!ri.userId||!ri.lessonId||ri.logSlideNavigation(t,e,r)},Nq=(t,e,r)=>{!ri.userId||!ri.lessonId||ri.logExerciseCompletion(t,e,r)},Eq=(t,e,r)=>{!ri.userId||!ri.lessonId||ri.logLessonCompletion(t,e,r)},Sq=()=>ri.exportSessionData(),_6=t=>{if(!t)return" ";const e=t instanceof Date?t:new Date(t),n=Math.floor((new Date-e)/(1e3*60));return n<1?"":n<60?` ${n} `:n<1440?` ${Math.floor(n/60)} `:` ${Math.floor(n/1440)} `},kq=()=>{const{currentUser:t,userProfile:e,updateUserProgress:r,trackSlideEngagement:n,setLastLessonSlide:s,getLastLessonSlide:i}=Fa(),o=ns();Ol();const{lessonId:l}=Ix(),[u,h]=S.useState(null),[f,p]=S.useState(0),[x,v]=S.useState(30),[w,b]=S.useState({}),[_,R]=S.useState({}),[j,k]=S.useState(!1),[F,L]=S.useState(0),[I,N]=S.useState(new Set),[T,P]=S.useState(0),[B,z]=S.useState(Date.now()),[O,D]=S.useState(Date.now()),[G,Q]=S.useState(0),[ue,H]=S.useState({width:window.innerWidth,height:window.innerHeight}),te=S.useRef(null),K=S.useRef(null),ce=S.useRef(null),U=S.useRef(null),M=S.useRef([]),X=S.useRef(!1),Y=S.useRef(0),Z=S.useRef(!1),[fe,ie]=S.useState(!0),[me,pe]=S.useState(null),we=S.useCallback(()=>{console.log(" Cleaning up InteractiveLesson timers and listeners"),te.current&&(clearInterval(te.current),te.current=null),K.current&&(clearInterval(K.current),K.current=null),ce.current&&(clearInterval(ce.current),ce.current=null),U.current&&(window.removeEventListener("resize",U.current),U.current=null),M.current.forEach(Re=>{if(typeof Re=="function")try{Re()}catch(ze){console.warn("Error cleaning up Firebase listener:",ze)}}),M.current=[]},[]);S.useEffect(()=>{},[f,l,e,u,i,t]),S.useEffect(()=>{t&&l&&!X.current&&(_q(t.uid,l),console.log(" Session initialized with:",{userId:t.uid,lessonId:l}))},[t,l]),S.useEffect(()=>{if(!e)return;(async()=>{try{const{doc:ze,getDoc:nt}=await Vn(async()=>{const{doc:Ee,getDoc:et}=await Promise.resolve().then(()=>Td);return{doc:Ee,getDoc:et}},void 0),{db:vt}=await Vn(async()=>{const{db:Ee}=await Promise.resolve().then(()=>jd);return{db:Ee}},void 0),Le=ze(vt,"users",t.uid),ye=await nt(Le);if(ye.exists()){const et=ye.data().currentLesson||0;if(parseInt(l)>et){pe("      "),Ws.error("      "),o("/student/dashboard");return}}}catch(ze){console.error("Error checking teacher access:",ze);const nt=e.currentLesson||0;if(parseInt(l)>nt){pe("      "),Ws.error("      "),o("/student/dashboard");return}}})()},[e,l,o,t]),S.useEffect(()=>{let Re=!0;async function ze(){ie(!0),pe(null);try{let nt=await kg(l);if(nt&&nt.slides&&nt.slides.length>0){Re&&h(nt);const vt=nt.originalId||parseInt(l),Le=`lesson-${vt}`;let ye=!1;if(e&&e.progress&&Le&&e.progress[Le]&&e.progress[Le].completed&&(Z.current=!0,ye=!0,console.log(" Lesson already completed, showing completion state")),e&&vt&&!isNaN(vt)){let Ee=i(vt);(ye||Ee<0||Ee>=nt.slides.length)&&(Ee=0,s(vt,0),console.log(" Resetting saved slide position to 0")),p(Ee),console.log(` Loaded saved slide position: ${Ee}`)}X.current=!0}else throw new Error("No slides found in Firebase")}catch(nt){console.error("Error loading lesson:",nt),Re&&pe("  ")}finally{Re&&ie(!1)}}return l&&ze(),()=>{Re=!1}},[l,e,i]),S.useEffect(()=>{if(!u||!e||!X.current)return;const Re=u.slides?u.slides[f]:null;if(!Re)return;z(Date.now()),Q(0);const ze=u.originalId||parseInt(l);ze&&Re.id&&(n(ze,Re.id),N(nt=>new Set([...nt,Re.id]))),ze&&!isNaN(ze)&&(s(ze,f),Y.current=f),Uy(Y.current,f,f>Y.current?"forward":"backward")},[f,u,e,l,n,s]),S.useEffect(()=>{if(!e)return;L(e.totalTimeSpent||0);const Re=new Set;e.progress&&Object.values(e.progress).forEach(ze=>{ze.pagesEngaged&&Array.isArray(ze.pagesEngaged)&&ze.pagesEngaged.forEach(nt=>Re.add(nt))}),I.forEach(ze=>Re.add(ze)),N(Re),P(Math.floor((e.totalTimeSpent||0)/60))},[e]),S.useEffect(()=>{if(u)return ce.current&&clearInterval(ce.current),ce.current=setInterval(()=>{var nt,vt;const Re=Date.now(),ze=Math.floor((Re-B)/1e3);if(Q(ze),u.slides&&((vt=(nt=u.slides[f])==null?void 0:nt.content)!=null&&vt.duration)){const Le=u.slides[f].content.duration,ye=Math.max(0,Le-ze);v(ye)}},1e3),()=>{ce.current&&(clearInterval(ce.current),ce.current=null)}},[B,f,u]),S.useEffect(()=>{const Re=()=>{H({width:window.innerWidth,height:window.innerHeight})};return U.current=Re,window.addEventListener("resize",Re),()=>{U.current&&(window.removeEventListener("resize",U.current),U.current=null)}},[]),S.useEffect(()=>{if(!t)return;const Re=async()=>{try{const{doc:nt,onSnapshot:vt}=await Vn(async()=>{const{doc:et,onSnapshot:lt}=await Promise.resolve().then(()=>Td);return{doc:et,onSnapshot:lt}},void 0),{db:Le}=await Vn(async()=>{const{db:et}=await Promise.resolve().then(()=>jd);return{db:et}},void 0),ye=nt(Le,"users",t.uid),Ee=vt(ye,et=>{var lt;if(et.exists()){const Lt=et.data();console.log(" Real-time user profile update received:",{totalTimeSpent:Lt.totalTimeSpent,totalPagesEngaged:Lt.totalPagesEngaged,completedLessons:((lt=Lt.completedLessons)==null?void 0:lt.length)||0})}},et=>{console.error(" Error listening to user profile updates:",et)});return M.current.push(Ee),Ee}catch(nt){console.error(" Error setting up Firebase listener:",nt)}};let ze;return Re().then(nt=>{ze=nt}),()=>{ze&&(ze(),M.current=M.current.filter(nt=>nt!==ze))}},[t]),S.useEffect(()=>()=>{console.log(" Cleaning up InteractiveLesson component"),we(),X.current=!1},[we]);const Xe=S.useCallback(()=>{if(!u)return;Uy(f,f+1,"forward");const Re=Math.floor((Date.now()-B)/1e3);L(ze=>ze+Re),f<(u.slides?u.slides.length-1:0)&&p(f+1)},[u,f,B]),re=S.useCallback(()=>{if(!u||f<=0)return;Uy(f,f-1,"backward");const Re=Math.floor((Date.now()-B)/1e3);L(ze=>ze+Re),p(Math.max(0,f-1))},[u,f,B]),Ze=S.useCallback((Re,ze)=>{b(vt=>({...vt,[Re]:ze})),Nq(Re,ze.isCorrect||!1,ze.score||0);const nt=Math.floor((Date.now()-B)/1e3);L(vt=>vt+nt)},[B]),Fe=S.useCallback(async()=>{var et,lt,Lt,mt,Mt,hr,Jt,Vr;if(console.log(" Auth state check:",{currentUser:t==null?void 0:t.uid,userProfile:!!e,lesson:!!u}),!u||!e){console.log(" Missing lesson or userProfile, cannot complete lesson");return}if(!t){console.log(" No current user, cannot complete lesson"),Ws.error("  ");return}console.log(" Double-checking auth state before lesson completion...");const Re={currentUser:t==null?void 0:t.uid,userProfile:e==null?void 0:e.uid,lessonId:u==null?void 0:u.id,lessonOriginalId:u==null?void 0:u.originalId};if(console.log(" Auth check details:",Re),!Re.currentUser||!Re.userProfile){console.log(" Authentication check failed, aborting lesson completion");return}const ze=u.originalId||parseInt(l);if(!ze||isNaN(ze)){console.error(" Invalid lesson ID:",l,"lesson.originalId:",u.originalId);return}const nt=`lesson-${ze}`;if((lt=(et=e==null?void 0:e.progress)==null?void 0:et[nt])!=null&&lt.completed){console.log(" Lesson already completed, showing completion state without re-saving"),Ws.success("  ! "),setTimeout(async()=>{try{const wr=await My(ze),Xr=wr?`/student/roadmap?unlocked=${wr.originalId}`:"/student/roadmap";o(Xr,{replace:!0})}catch(wr){console.error(" Error navigating after completion:",wr),o("/student/roadmap",{replace:!0})}},2e3);return}console.log(" Starting lesson completion for lesson:",ze),console.log(" Lesson object details:",{lessonId:l,lessonOriginalId:u.originalId,lessonNumber:ze,lessonTitle:u.title,lessonType:typeof ze});const vt=Math.floor((Date.now()-B)/1e3),Le=F+vt,ye=u.slides?u.slides.map(wr=>wr.id):[];ye.forEach(wr=>{n(ze,wr)}),Eq(ze,Le,Le);const Ee=Sq();console.log(" FINAL SESSION DATA:",Ee),console.log(" LESSON COMPLETION SUMMARY:",{lessonId:ze,lessonTitle:u.title,totalSlides:u.slides?u.slides.length:0,slidesEngaged:ye.length,timeSpent:Le,timeFormatted:be(Le),progressPercentage:100,sessionEvents:((Lt=Ee.session)==null?void 0:Lt.totalEvents)||0,completionRate:((mt=Ee.session)==null?void 0:mt.completionRate)||0,averageEngagement:((Mt=Ee.session)==null?void 0:Mt.averageEngagementLevel)||"unknown",userBehavior:(hr=Ee.analytics)==null?void 0:hr.userBehavior,performance:(Jt=Ee.analytics)==null?void 0:Jt.performance,recommendations:(Vr=Ee.analytics)==null?void 0:Vr.recommendations});try{console.log(" Saving lesson progress..."),console.log(" Debug: Calling updateUserProgress with:",{lessonNumber:ze,completed:!0,score:Le,temporary:!1,lastSlide:f,slideId:null,allSlideIds:ye});const wr=await r(ze,!0,Le,!1,0,null,ye,t);console.log(" Progress saved successfully"),console.log(" Debug: updateUserProgress result:",wr);const Xr=await My(u.id);console.log(" Next lesson found:",Xr),k(!0),Ws.success(" !   ! "),setTimeout(()=>{try{console.log(" Starting navigation to roadmap...");const sn=Xr?`/student/roadmap?unlocked=${Xr.originalId}`:"/student/roadmap";console.log(" Navigating to:",sn),o(sn,{replace:!0}),console.log(" Navigation completed")}catch(sn){console.error(" Error navigating after completion:",sn),o("/student/roadmap",{replace:!0})}},3500)}catch(wr){console.error(" Error completing lesson:",wr),Ws.error("  "),setTimeout(async()=>{const Xr=await My(ze),sn=Xr?`/student/roadmap?unlocked=${Xr.originalId}`:"/student/roadmap";o(sn,{replace:!0})},1e3)}},[u,e,B,F,f,n,r,o,l]),ge=Re=>{const ze=Math.floor(Re/60),nt=Re%60;return`${ze}:${nt.toString().padStart(2,"0")}`},be=Re=>{const ze=Math.floor(Re/3600),nt=Math.floor(Re%3600/60);return ze>0?`${ze}  ${nt} `:`${nt} `},se=Re=>{switch(Re.type){case"presentation":return a.jsx(Ld,{slide:Re});case"poll":return a.jsx(T0,{slide:Re,onAnswer:Ze,answers:w});case"video":return a.jsx(j0,{slide:Re,onAnswer:Ze,answers:w});case"interactive":return a.jsx(A0,{slide:Re,onAnswer:Ze,answers:w});case"break":return a.jsx(C0,{slide:Re});case"reflection":return a.jsx(I0,{slide:Re,onAnswer:Ze,answers:w});case"quiz":return a.jsx(R0,{slide:Re,onAnswer:Ze,answers:w});default:return a.jsxs("div",{className:"text-white",children:["   : ",Re.type]})}};if(fe)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center",children:a.jsx("div",{className:"text-white text-2xl",children:" ..."})});if(me)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center",children:a.jsx("div",{className:"text-white text-2xl",children:me})});const ve=u.slides?u.slides[f]:null,Me=u.slides?(f+1)/u.slides.length*100:0;return ve?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:[a.jsx(k0,{}),j&&a.jsx(iw,{width:ue.width,height:ue.height,recycle:!1,numberOfPieces:200,colors:["#00ff00","#00ffff","#ff00ff","#ffff00","#ff0000"]}),j&&a.jsxs(a.Fragment,{children:[a.jsx(iw,{width:ue.width,height:ue.height,recycle:!1,numberOfPieces:300,colors:["#4ade80","#fbbf24","#3b82f6","#8b5cf6","#ec4899","#ef4444"]}),a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:a.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-emerald-600 rounded-3xl p-8 text-center text-white shadow-2xl border-4 border-green-400 animate-pulse",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h2",{className:"text-3xl font-bold mb-2",children:" !"}),a.jsx("p",{className:"text-xl mb-4",children:"  !"}),a.jsxs("div",{className:"text-lg opacity-90",children:[a.jsxs("p",{children:[" : ",be(F)]}),a.jsxs("p",{children:[" : ",I.size]}),a.jsxs("p",{children:[": ",Math.round(Me),"%"]})]})]})})]}),a.jsxs("div",{className:"flex h-screen",children:[a.jsx("div",{className:"flex-1 overflow-y-auto",children:a.jsx("div",{className:"p-7",children:se(ve)})}),a.jsx("div",{className:"w-92 bg-gray-800/50 backdrop-blur-sm border-l border-gray-700/50 p-7",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(M3,{className:"h-5 w-5 text-blue-400"}),a.jsx("span",{className:"text-white font-semibold",children:" "})]}),a.jsx("p",{className:"text-2xl font-bold text-blue-400",children:be(F)})]}),a.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Pa,{className:"h-5 w-5 text-green-400"}),a.jsx("span",{className:"text-white font-semibold",children:" "})]}),a.jsx("p",{className:"text-2xl font-bold text-green-400",children:I.size})]}),a.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(th,{className:"h-5 w-5 text-yellow-400"}),a.jsx("span",{className:"text-white font-semibold",children:""})]}),a.jsxs("p",{className:"text-2xl font-bold text-yellow-400",children:[Math.round(Me),"%"]})]}),a.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(y0,{className:"h-5 w-5 text-cyan-400"}),a.jsx("span",{className:"text-white font-semibold",children:" "})]}),a.jsx("p",{className:"text-2xl font-bold text-cyan-400",children:ge(G)})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/40 to-purple-900/40 rounded-xl p-7 border border-blue-500/30",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-7",children:[a.jsx(HB,{className:"h-8 w-8 text-blue-400"}),a.jsx("span",{className:"text-white font-bold text-2xl",children:" "})]}),a.jsx("div",{className:"text-center mb-7",children:a.jsx("div",{className:"bg-gray-800/50 rounded-lg p-5 border border-gray-600/50",children:a.jsxs("div",{className:"text-3xl font-bold text-white",children:[" ",f+1,"  ",u.slides?u.slides.length:0]})})}),a.jsxs("div",{className:"flex items-center justify-between space-x-5 space-x-reverse",children:[a.jsx("button",{onClick:re,disabled:f===0,className:"group relative p-5 rounded-xl bg-gradient-to-r from-gray-700/80 to-gray-600/80 hover:from-gray-600/90 hover:to-gray-500/90 disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-300 hover:scale-105 hover:shadow-lg border border-gray-500/30 hover:border-gray-400/50",title:" ",children:a.jsx(Bc,{className:"h-7 w-7 text-white group-hover:text-blue-300 transition-all duration-300"})}),f===(u.slides?u.slides.length-1:0)?a.jsx("button",{onClick:Fe,className:"group relative px-7 py-5 rounded-xl bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 transition-all duration-300 hover:scale-105 hover:shadow-2xl text-white font-bold border-2 border-green-400/50 hover:border-green-300/70",title:" ",children:a.jsx("span",{className:"group-hover:scale-105 transition-transform duration-300 text-xl",children:" "})}):a.jsx("button",{onClick:Xe,className:"group relative p-5 rounded-xl bg-gradient-to-r from-blue-600/80 to-purple-600/80 hover:from-blue-500/90 hover:to-purple-500/90 transition-all duration-300 hover:scale-105 hover:shadow-lg border border-blue-500/30 hover:border-blue-400/50",title:" ",children:a.jsx(hg,{className:"h-7 w-7 text-white group-hover:text-purple-300 transition-all duration-300"})})]})]})]})})]})]}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center",children:a.jsx("div",{className:"text-white text-2xl",children:"      .    ."})})},Tq=["","","","","","","","","","","","","","","","",""],XT=()=>{var me;const{userProfile:t,logout:e,currentUser:r,updateDisplayName:n,changePassword:s}=Fa(),[i,o]=S.useState("overview"),[l,u]=S.useState((t==null?void 0:t.emoji)||""),[h,f]=S.useState(!1),[p,x]=S.useState((t==null?void 0:t.displayName)||""),[v,w]=S.useState(!1),[b,_]=S.useState(!1),[R,j]=S.useState({firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",age:(t==null?void 0:t.age)||"",sex:(t==null?void 0:t.sex)||"male"}),[k,F]=S.useState(!1),[L,I]=S.useState(null),[N,T]=S.useState(!1),[P,B]=S.useState(!1),[z,O]=S.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[D,G]=S.useState(!1),[Q,ue]=S.useState([]),[H,te]=S.useState((t==null?void 0:t.currentLesson)||1);ns();const K=()=>({firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",age:(t==null?void 0:t.age)||"",sex:(t==null?void 0:t.sex)||"male"});S.useEffect(()=>{t&&(j(K()),x(t.displayName||""),u(t.emoji||""))},[t]),S.useEffect(()=>{(async()=>{try{const we=await E0();ue(we)}catch(we){console.error("Error loading lessons:",we),Ie.error("  ")}})()},[]),S.useEffect(()=>{if(!r)return;const pe=async()=>{try{const{doc:Xe,getDoc:re}=await Vn(async()=>{const{doc:be,getDoc:se}=await Promise.resolve().then(()=>Td);return{doc:be,getDoc:se}},void 0),{db:Ze}=await Vn(async()=>{const{db:be}=await Promise.resolve().then(()=>jd);return{db:be}},void 0),Fe=Xe(Ze,"users",r.uid),ge=await re(Fe);if(ge.exists()){const be=ge.data();te(be.currentLesson||1)}}catch(Xe){console.error("Error refreshing currentLesson:",Xe)}};pe();const we=setInterval(pe,1e4);return()=>clearInterval(we)},[r]),S.useEffect(()=>{(async()=>{if((t==null?void 0:t.role)==="student"&&(t!=null&&t.teacherId)){T(!0);try{const we=await ur(bt(He,"users",t.teacherId));we.exists()&&I(we.data())}catch(we){console.error("Error fetching teacher info:",we)}finally{T(!1)}}})()},[t]);const ce=async()=>{if(!r||!p.trim()){Ie.error("     ");return}if(p.trim()===(t==null?void 0:t.displayName)){f(!1);return}w(!0);try{await n(p.trim()),Ie.success("   "),f(!1)}catch(pe){console.error("Error updating display name:",pe),Ie.error("    ")}finally{w(!1)}},U=()=>{x((t==null?void 0:t.displayName)||""),f(!1)},M=()=>t!=null&&t.displayName&&t.displayName!==" "?t.displayName:((t==null?void 0:t.sex)||"male")==="female"?" ":" ",X=()=>{B(!0)},Y=async()=>{const{currentPassword:pe,newPassword:we,confirmPassword:Xe}=z;if(!pe||!we||!Xe){Ie.error("   ");return}if(we.length<6){Ie.error("     6 ");return}if(we!==Xe){Ie.error("    ");return}if(we===pe){Ie.error("      ");return}G(!0);try{await s(pe,we),Ie.success("  "),B(!1),O({currentPassword:"",newPassword:"",confirmPassword:""})}catch(re){console.error("Password change error:",re),Ie.error(re.message||"   ")}finally{G(!1)}},Z=()=>{B(!1),O({currentPassword:"",newPassword:"",confirmPassword:""})},fe=async()=>{try{await e(),Ie.success(" ")}catch(pe){console.error("Logout error:",pe),Ie.error("  ")}},ie=()=>{if(!t)return 0;const pe=t.completedLessons||[];return Math.round(pe.length/Q.length*100)};return t?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900/20 to-purple-900/20 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-blue-500/10 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse delay-1000"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-cyan-500/5 rounded-full blur-3xl animate-pulse delay-500"})]}),a.jsx(k0,{}),a.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto p-6",children:[a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-gray-800/80 via-gray-700/80 to-gray-800/80 backdrop-blur-xl rounded-3xl shadow-2xl p-8 mb-8 border border-gray-600/50",children:a.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-8",children:[a.jsxs("div",{className:"relative",children:[a.jsxs(Ke.div,{className:"relative",whileHover:{scale:1.05},transition:{duration:.3},children:[a.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-blue-500 via-purple-500 to-cyan-500 p-1 shadow-2xl",children:a.jsx("div",{className:"w-full h-full rounded-full bg-gray-800 flex items-center justify-center text-6xl border-4 border-gray-700",children:l})}),a.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center border-4 border-gray-800",children:a.jsx(ts,{className:"w-4 h-4 text-white"})})]}),a.jsx("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:Tq.map(pe=>a.jsx(Ke.button,{className:`text-2xl p-2 rounded-full border-2 transition-all duration-300 ${l===pe?"border-blue-400 bg-blue-500/20 shadow-lg shadow-blue-500/25":"border-gray-600 hover:border-gray-500 hover:bg-gray-700/50"}`,onClick:()=>u(pe),whileHover:{scale:1.1},whileTap:{scale:.95},children:pe},pe))})]}),a.jsxs("div",{className:"flex-1 text-center lg:text-right",children:[a.jsx("div",{className:"mb-6",children:h?a.jsxs("div",{className:"flex items-center justify-center lg:justify-end gap-3 mb-2",children:[a.jsx("input",{type:"text",value:p,onChange:pe=>x(pe.target.value),className:"text-3xl font-bold bg-gray-700/50 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-blue-400 focus:outline-none",placeholder:"  "}),a.jsx(Ke.button,{onClick:ce,disabled:v,className:"bg-green-600 hover:bg-green-500 text-white p-2 rounded-lg transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(eh,{className:"w-5 h-5"})}),a.jsx(Ke.button,{onClick:U,className:"bg-gray-600 hover:bg-gray-500 text-white p-2 rounded-lg transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(Wr,{className:"w-5 h-5"})})]}):a.jsxs("div",{className:"flex items-center justify-center lg:justify-end gap-3 mb-2",children:[a.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent",children:M()}),a.jsx(Ke.button,{onClick:()=>f(!0),className:"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 p-2 rounded-lg transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(z2,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-center lg:justify-end gap-3 text-gray-300",children:[a.jsx(sx,{className:"h-5 w-5 text-blue-400"}),a.jsx("span",{className:"text-lg",children:t==null?void 0:t.email})]}),a.jsxs("div",{className:"flex items-center justify-center lg:justify-end gap-3 text-gray-300",children:[a.jsx(Ff,{className:"h-5 w-5 text-purple-400"}),a.jsx("span",{className:"text-lg font-semibold",children:(t==null?void 0:t.role)==="teacher"?"":(t==null?void 0:t.role)==="student"?"":""})]})]}),(t==null?void 0:t.role)==="student"&&a.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-900/30 to-purple-900/30 rounded-xl p-4 border border-blue-500/30 mb-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-blue-300 mb-3 flex items-center justify-center lg:justify-end gap-2",children:[a.jsx(Rr,{className:"h-5 w-5"})," "]}),N?a.jsxs("div",{className:"flex items-center justify-center lg:justify-end gap-2 text-gray-400",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-400"}),"  ..."]}):L?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-center lg:justify-end gap-2 text-white",children:[a.jsx(Di,{className:"h-4 w-4 text-blue-400"}),a.jsx("span",{className:"font-semibold",children:L.displayName||L.email})]}),a.jsxs("div",{className:"flex items-center justify-center lg:justify-end gap-2 text-gray-300 text-sm",children:[a.jsx(sx,{className:"h-4 w-4 text-blue-400"}),a.jsx("span",{children:L.email})]})]}):a.jsx("div",{className:"text-gray-400 text-center lg:text-right",children:"   "})]}),a.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-end gap-3",children:[a.jsxs(Ke.button,{onClick:X,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[a.jsx(DB,{className:"w-4 h-4"})," "]}),a.jsxs(Ke.button,{onClick:fe,className:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[a.jsx(Wr,{className:"w-4 h-4"}),""]})]}),P&&a.jsxs(Ke.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 bg-gray-700/50 rounded-xl p-4 border border-gray-600/50",children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-4 text-center",children:" "}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"password",value:z.currentPassword,onChange:pe=>O(we=>({...we,currentPassword:pe.target.value})),className:"w-full px-4 py-3 bg-gray-600/50 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none",placeholder:" ",required:!0}),a.jsx("input",{type:"password",value:z.newPassword,onChange:pe=>O(we=>({...we,newPassword:pe.target.value})),className:"w-full px-4 py-3 bg-gray-600/50 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none",placeholder:"  ( 6 )",required:!0}),a.jsx("input",{type:"password",value:z.confirmPassword,onChange:pe=>O(we=>({...we,confirmPassword:pe.target.value})),className:"w-full px-4 py-3 bg-gray-600/50 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none",placeholder:"  ",required:!0}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ke.button,{type:"button",onClick:Y,disabled:D,className:"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 disabled:from-gray-600 disabled:to-gray-600 text-white py-3 rounded-lg font-semibold transition-all duration-300",whileHover:{scale:1.02},whileTap:{scale:.98},children:D?"...":" "}),a.jsx(Ke.button,{type:"button",onClick:Z,disabled:D,className:"px-6 bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-500 hover:to-gray-600 disabled:from-gray-600 disabled:to-gray-600 text-white py-3 rounded-lg font-semibold transition-all duration-300",whileHover:{scale:1.02},whileTap:{scale:.98},children:""})]})]})]})]})]})}),a.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-gray-800/80 via-gray-700/80 to-gray-800/80 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-gray-600/50",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-green-400 to-cyan-400 bg-clip-text text-transparent mb-2",children:" "}),a.jsx("p",{className:"text-gray-300",children:"  !"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-full bg-gray-700/50 rounded-full h-8 mb-4 border border-gray-600/50 overflow-hidden",children:a.jsxs(Ke.div,{className:"h-full bg-gradient-to-r from-green-500 via-cyan-500 to-blue-500 rounded-full flex items-center justify-end pr-4 text-white font-bold text-lg shadow-lg",initial:{width:0},animate:{width:`${ie()}%`},transition:{duration:1.5,ease:"easeOut"},children:[ie(),"%"]})}),a.jsxs("div",{className:"flex justify-between text-sm text-gray-400",children:[a.jsx("span",{children:""}),a.jsxs("span",{className:"font-semibold text-white",children:[((me=t==null?void 0:t.completedLessons)==null?void 0:me.length)||0,"  ",Q.length,"  "]}),a.jsx("span",{children:""})]})]})]})]})]}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-cyber-blue to-cyber-purple",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),a.jsx("p",{children:" ..."})]})})},jq=()=>{const t=ns(),{currentUser:e,userProfile:r}=Ns(),[n,s]=S.useState(!0),[i,o]=S.useState([]),[l,u]=S.useState([]),[h,f]=S.useState([]),[p,x]=S.useState({totalLessons:0,completedLessons:0,activeSessions:0,totalTimeSpent:0});S.useEffect(()=>{v()},[e,r]);const v=async()=>{try{s(!0);const[j,k]=await Promise.all([y6(e.uid),S0()]),F=k.slice().sort((I,N)=>{const T=I.order??I.originalId??0,P=N.order??N.originalId??0;return T!==P?T-P:(I.title||"").localeCompare(N.title||"")});o(j),u(F);const L=[];r!=null&&r.progress&&Object.entries(r.progress).forEach(([I,N])=>{if(N.completed&&N.completedAt){const T=F.find(P=>P.id===parseInt(I));T&&L.push({id:parseInt(I),title:T.title,completedAt:N.completedAt,score:N.score||0})}}),f(L),x({totalLessons:F.length,completedLessons:L.length,activeSessions:j.length,totalTimeSpent:(r==null?void 0:r.totalTimeSpent)||0}),s(!1)}catch(j){console.error("Error loading data:",j),Ie.error("   "),s(!1)}},w=j=>{t(`/student/session/${j}`)},b=async j=>{try{const{doc:k,getDoc:F}=await Vn(async()=>{const{doc:T,getDoc:P}=await Promise.resolve().then(()=>Td);return{doc:T,getDoc:P}},void 0),{db:L}=await Vn(async()=>{const{db:T}=await Promise.resolve().then(()=>jd);return{db:T}},void 0),I=k(L,"users",e.uid),N=await F(I);if(N.exists()){const P=N.data().currentLesson||0;j<=P?t(`/student/lesson/${j}`):Ie.error("      ")}else r!=null&&r.currentLesson&&j<=r.currentLesson?t(`/student/lesson/${j}`):Ie.error("      ")}catch(k){console.error("Error checking lesson access:",k),r!=null&&r.currentLesson&&j<=r.currentLesson?t(`/student/lesson/${j}`):Ie.error("      ")}},_=j=>{if(!j)return"0 ";const k=Date.now()-j.toDate().getTime();return`${Math.floor(k/(1e3*60))} `},R=j=>new Date(j).toLocaleDateString("he-IL",{year:"numeric",month:"short",day:"numeric"});return n?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx(rs,{size:"lg"})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-400",children:p.totalLessons}),a.jsx("div",{className:"text-sm text-gray-300",children:'" '})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-400",children:p.completedLessons}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-400",children:p.activeSessions}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-orange-400",children:Math.floor(p.totalTimeSpent/60)}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})})]}),a.jsx(it,{variant:"dark",className:"mb-8",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Gs,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4",children:r!=null&&r.currentLesson?a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-white font-medium",children:[" ",r.currentLesson]}),a.jsxs("p",{className:"text-sm text-gray-400",children:["     ",r.lessonStartDate?` -${new Date(r.lessonStartDate).toLocaleDateString("he-IL")}`:"  "]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-sm text-green-400",children:""})]})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx(To,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{className:"text-gray-400",children:"    "})]})})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(jn,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:i.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(jn,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-400",children:"   "})]}):i.map(j=>{var k;return a.jsx("div",{className:"p-4 rounded-lg border border-gray-600 bg-gray-700/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium",children:j.lessonName}),a.jsxs("p",{className:"text-sm text-gray-400",children:[j.className,"  ",((k=j.connectedStudents)==null?void 0:k.length)||0,"  "]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["  ",_(j.startTime)]})]}),a.jsxs(ut,{onClick:()=>w(j.id),variant:"primary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(jn,{className:"w-4 h-4"}),a.jsx("span",{children:""})]})]})},j.id)})})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Qt,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:h.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Qt,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-400",children:"   "})]}):h.map(j=>{var k;return a.jsx("div",{className:"p-4 rounded-lg border border-gray-600 bg-gray-700/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium",children:j.title}),a.jsxs("p",{className:"text-sm text-gray-400",children:[" -",R(j.completedAt)]}),a.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[a.jsx("div",{className:"w-16 bg-gray-600 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${j.score}%`}})}),a.jsxs("span",{className:"text-sm text-green-400",children:[j.score,"%"]})]}),a.jsxs("span",{className:"text-xs text-gray-400",children:[j.totalSlides||((k=j.slides)==null?void 0:k.length)||0," "]})]}),a.jsx(ut,{onClick:()=>b(j.id),variant:"secondary",size:"sm",children:" "})]})},j.id)})})]})})]}),a.jsx(it,{variant:"dark",className:"mt-8",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-lg font-bold text-white mb-4",children:" "}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("button",{onClick:()=>t("/student/roadmap"),className:"flex items-center space-x-3 p-4 bg-blue-600 hover:bg-blue-500 rounded-lg transition-colors",children:[a.jsx(Gs,{className:"w-6 h-6 text-white"}),a.jsx("span",{className:"text-white",children:" "})]}),a.jsxs("button",{onClick:()=>t("/student/profile"),className:"flex items-center space-x-3 p-4 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[a.jsx(Rr,{className:"w-6 h-6 text-blue-400"}),a.jsx("span",{className:"text-white",children:" "})]}),a.jsxs("button",{onClick:()=>t("/student/roadmap"),className:"flex items-center space-x-3 p-4 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[a.jsx(th,{className:"w-6 h-6 text-green-400"}),a.jsx("span",{className:"text-white",children:" "})]})]})]})})]})})},Aq=()=>{Ol(),ns();const{logout:t,currentUser:e}=Ns(),{displayName:r,role:n}=jb(),[s,i]=S.useState(!1),[o,l]=S.useState(!1),[u,h]=S.useState(null),[f,p]=S.useState(0),[x,v]=S.useState(!1),w=S.useRef(null);S.useEffect(()=>{const j=k=>{w.current&&!w.current.contains(k.target)&&l(!1)};return o&&document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[o]),S.useEffect(()=>{if(!(e!=null&&e.uid))return;let j=null;return(async()=>{try{await OW(e.uid);const F=await v6(e.uid);if(F.length>0){const L=F[0];h(L),j=Eg(L.id,I=>{I&&I.status==="active"?h(I):(h(null),p(0))})}else h(null),p(0)}catch(F){console.error("Error loading active sessions:",F),h(null)}})(),()=>{j&&j()}},[e==null?void 0:e.uid]),S.useEffect(()=>{if(!(u!=null&&u.startTime)){p(0);return}const j=setInterval(()=>{var L,I;const k=((I=(L=u.startTime)==null?void 0:L.toDate)==null?void 0:I.call(L))||new Date(u.startTime),F=Math.floor((Date.now()-k.getTime())/1e3);p(F)},1e3);return()=>clearInterval(j)},[u==null?void 0:u.startTime]);const b=async()=>{try{u?(await Uf(u.id),Ie.success("   ")):Ie.success(" "),await t(),Ir("TEACHER_LOGOUT",{role:n,uid:r})}catch(j){console.error("Logout error:",j),Ie.error("  ")}},_=async()=>{if(!(!u||x))try{v(!0),await Uf(u.id),h(null),p(0),Ie.success("  "),Ir("SESSION_ENDED_BY_TEACHER",{sessionId:u.id,teacherId:e.uid,lessonId:u.lessonId,duration:f})}catch(j){console.error("Error ending session:",j),Ie.error("   ")}finally{v(!1)}},R=j=>{const k=Math.floor(j/60),F=Math.floor(k/60),L=k%60;return F>0?`${F} ${L}`:`${k} `};return a.jsx("nav",{className:"bg-gray-900/95 backdrop-blur-xl border-b border-gray-700 shadow-lg sticky top-0 z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs(Ei,{to:"/teacher/dashboard",className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(ts,{className:"w-5 h-5 text-gray-100"})}),a.jsx("span",{className:"text-xl font-bold text-gray-200",children:"Israel Cyber Campus"}),a.jsx("span",{className:"text-sm text-blue-400 bg-blue-500/10 px-2 py-1 rounded-full",children:" "})]})}),a.jsx("div",{className:"hidden lg:flex items-center space-x-6"}),u&&a.jsxs("div",{className:"hidden md:flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2 bg-green-500/10 border border-green-500/20 rounded-lg px-3 py-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-green-400 text-sm font-medium",children:""}),a.jsx("span",{className:"text-gray-300 text-sm",children:u.lessonName||` ${u.lessonId}`}),a.jsx("span",{className:"text-gray-400 text-xs",children:R(f)})]}),a.jsxs(Ei,{to:`/teacher/session/${u.id}`,className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded-lg text-gray-100 text-sm font-medium transition-colors",children:[a.jsx(jn,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]}),a.jsxs("button",{onClick:_,disabled:x,className:"flex items-center space-x-2 bg-red-600 hover:bg-red-700 disabled:bg-red-800 px-3 py-2 rounded-lg text-gray-100 text-sm font-medium transition-colors",children:[a.jsx(Wr,{className:"w-4 h-4"}),a.jsx("span",{children:x?"...":" "})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",ref:w,children:[a.jsxs("button",{onClick:()=>l(!o),className:"flex items-center space-x-3 bg-gray-800/50 hover:bg-gray-700/50 px-4 py-2 rounded-lg text-gray-200 transition-all duration-200",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx(ts,{className:"w-4 h-4 text-gray-100"})}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"text-sm font-medium block",children:r}),a.jsx("span",{className:"text-xs text-gray-400",children:""})]})]}),o&&a.jsxs(Ke.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-56 bg-gray-800 rounded-lg shadow-xl border border-gray-600 py-2 z-50",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-gray-600",children:[a.jsx("p",{className:"text-sm text-gray-200",children:r}),a.jsx("p",{className:"text-xs text-gray-400",children:""})]}),a.jsxs("div",{className:"py-1",children:[a.jsxs(Ei,{to:"/teacher/profile",className:"flex items-center px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",onClick:()=>l(!1),children:[a.jsx(Di,{className:"w-4 h-4 mr-3"}),""]}),a.jsxs(Ei,{to:"/teacher/settings",className:"flex items-center px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",onClick:()=>l(!1),children:[a.jsx(_o,{className:"w-4 h-4 mr-3"}),""]})]}),a.jsx("div",{className:"border-t border-gray-600 pt-1",children:a.jsxs("button",{onClick:b,className:"flex items-center w-full px-4 py-2 text-sm text-red-400 hover:bg-gray-700 hover:text-red-300 transition-colors",children:[a.jsx(P3,{className:"w-4 h-4 mr-3"}),""]})})]})]}),a.jsx("button",{onClick:()=>i(!s),className:"lg:hidden p-2 rounded-lg text-gray-400 hover:text-white hover:bg-gray-700 transition-colors",children:s?a.jsx(Wr,{className:"w-6 h-6"}):a.jsx(UB,{className:"w-6 h-6"})})]})]}),s&&a.jsxs(Ke.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"lg:hidden border-t border-gray-700 py-4",children:[u&&a.jsxs("div",{className:"mb-4 p-3 bg-green-500/10 border border-green-500/20 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-green-400 text-sm font-medium",children:" "})]}),a.jsx("span",{className:"text-gray-300 text-sm",children:R(f)})]}),a.jsx("p",{className:"text-gray-300 text-sm mt-1",children:u.lessonName||` ${u.lessonId}`}),a.jsxs("div",{className:"flex space-x-2 mt-2",children:[a.jsx(Ei,{to:`/teacher/session/${u.id}`,className:"flex-1 bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded text-center text-gray-100 text-sm font-medium transition-colors",onClick:()=>i(!1),children:" "}),a.jsx("button",{onClick:_,disabled:x,className:"flex-1 bg-red-600 hover:bg-red-700 disabled:bg-red-800 px-3 py-2 rounded text-center text-gray-100 text-sm font-medium transition-colors",children:x?"...":""})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Ei,{to:"/teacher/dashboard",className:"flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg transition-colors",onClick:()=>i(!1),children:[a.jsx(I3,{className:"w-5 h-5 mr-3"}),""]}),a.jsxs(Ei,{to:"/teacher/profile",className:"flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg transition-colors",onClick:()=>i(!1),children:[a.jsx(Di,{className:"w-5 h-5 mr-3"}),""]}),a.jsxs(Ei,{to:"/teacher/settings",className:"flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg transition-colors",onClick:()=>i(!1),children:[a.jsx(_o,{className:"w-5 h-5 mr-3"}),""]})]})]})]})})},N6=()=>{const{currentUser:t}=Ns(),[e,r]=S.useState([]),[n,s]=S.useState([]),[i,o]=S.useState([]),[l,u]=S.useState(!0),[h,f]=S.useState(""),[p,x]=S.useState("all"),[v,w]=S.useState([]),[b,_]=S.useState(null),[R,j]=S.useState(!1),[k,F]=S.useState(null),[L,I]=S.useState({name:"",description:"",maxStudents:30,initialLesson:""});S.useEffect(()=>{N()},[]);const N=async()=>{try{u(!0),console.log(" Loading data for teacher:",t.uid),console.log(" Fetching students...");const H=await b3();console.log(" Students fetched:",H.length,"students"),console.log(" Students data:",H),console.log(" Fetching classes...");const te=await zl(t.uid);console.log(" Classes fetched:",te.length,"classes"),console.log(" Classes data:",te),console.log(" Fetching lessons...");const ce=(await S0()).slice().sort((U,M)=>{const X=U.order??U.originalId??0,Y=M.order??M.originalId??0;return X!==Y?X-Y:(U.title||"").localeCompare(M.title||"")});console.log(" Lessons fetched:",ce.length,"lessons"),console.log(" Lessons data:",ce),r(H),s(te),o(ce),console.log(" All data loaded successfully")}catch(H){console.error(" Error loading data:",H),console.error("Error details:",{message:H.message,code:H.code,stack:H.stack}),Ie.error("  ")}finally{u(!1)}},T=e.filter(H=>{var ce,U;const te=((ce=H.displayName)==null?void 0:ce.toLowerCase().includes(h.toLowerCase()))||((U=H.email)==null?void 0:U.toLowerCase().includes(h.toLowerCase())),K=p==="all"||p==="assigned"&&H.assignedToClass||p==="unassigned"&&!H.assignedToClass;return te&&K}),P=async H=>{if(H.preventDefault(),!L.name.trim()){Ie.error("    ");return}try{const te=await p3(L,t.uid);s(K=>[te,...K]),I({name:"",description:"",maxStudents:30,initialLesson:""}),j(!1),Ie.success("  ")}catch(te){console.error("Error creating class:",te),Ie.error("  ")}},B=async H=>{if(H.preventDefault(),!k.name.trim()){Ie.error("    ");return}try{await x3(k.id,{name:k.name,description:k.description,maxStudents:k.maxStudents},t.uid),s(te=>te.map(K=>K.id===k.id?{...K,...k}:K)),F(null),Ie.success("  ")}catch(te){console.error("Error updating class:",te),Ie.error("  ")}},z=async H=>{if(confirm("      ?"))try{await g3(H,t.uid),s(te=>te.filter(K=>K.id!==H)),Ie.success("  ")}catch(te){console.error("Error deleting class:",te),Ie.error("  ")}},O=async(H,te)=>{try{await _3(H,te,t.uid),r(K=>K.map(ce=>({...ce,classId:te.includes(ce.id)?H:ce.classId,teacherId:te.includes(ce.id)?t.uid:ce.teacherId,assignedToClass:te.includes(ce.id),assignedToTeacher:te.includes(ce.id)}))),s(K=>K.map(ce=>ce.id===H?{...ce,studentIds:te}:ce)),Ie.success("  ")}catch(K){console.error("Error assigning students:",K),Ie.error("  ")}},D=(H,te)=>{_(te),H.dataTransfer.effectAllowed="move"},G=H=>{H.preventDefault(),H.dataTransfer.dropEffect="move"},Q=(H,te)=>{if(H.preventDefault(),!b)return;const ce=[...te.studentIds||[],b.id];O(te.id,ce),_(null)},ue=async(H,te)=>{var U;const ce=(((U=n.find(M=>M.id===H))==null?void 0:U.studentIds)||[]).filter(M=>M!==te);await O(H,ce)};return l?a.jsx(rs,{}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"  "}),a.jsx("p",{className:"text-gray-400",children:"    "})]}),a.jsxs("button",{onClick:()=>j(!0),className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[a.jsx(hd,{className:"w-5 h-5"}),a.jsx("span",{children:"  "})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-white",children:" "}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx(jo,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:" ...",value:h,onChange:H=>f(H.target.value),className:"bg-gray-700 text-white pl-10 pr-4 py-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("select",{value:p,onChange:H=>x(H.target.value),className:"bg-gray-700 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:" "}),a.jsx("option",{value:"assigned",children:""}),a.jsx("option",{value:"unassigned",children:" "})]})]})]}),a.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:a.jsx(bn,{children:T.map(H=>a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},draggable:!0,onDragStart:te=>D(te,H),className:`p-3 rounded-lg cursor-move transition-colors ${H.assignedToClass?"bg-green-900/50 border border-green-500/50":"bg-gray-700 hover:bg-gray-600"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${H.assignedToClass?"bg-green-400":"bg-gray-400"}`}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:H.displayName}),a.jsx("p",{className:"text-gray-400 text-sm",children:H.email})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[H.assignedToClass&&a.jsx("span",{className:"text-green-400 text-xs bg-green-900/50 px-2 py-1 rounded",children:""}),a.jsx(W2,{className:"w-4 h-4 text-gray-400"})]})]})},H.id))})})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-white",children:""}),a.jsxs("span",{className:"text-gray-400 text-sm",children:[n.length," "]})]}),a.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:a.jsx(bn,{children:n.map(H=>{var te,K;return a.jsxs(Ke.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},onDragOver:G,onDrop:ce=>Q(ce,H),className:`p-4 rounded-lg border-2 border-dashed transition-colors ${b?"border-blue-500 bg-blue-900/20":"border-gray-600"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-semibold",children:H.name}),a.jsx("p",{className:"text-gray-400 text-sm",children:H.description})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>F(H),className:"p-1 hover:bg-gray-700 rounded",children:a.jsx(z2,{className:"w-4 h-4 text-gray-400"})}),a.jsx("button",{onClick:()=>z(H.id),className:"p-1 hover:bg-red-600 rounded",children:a.jsx(ua,{className:"w-4 h-4 text-red-400"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-3",children:[a.jsxs("span",{children:[((te=H.studentIds)==null?void 0:te.length)||0," / ",H.maxStudents," "]}),a.jsx("span",{children:H.isActive?"":" "})]}),a.jsx("div",{className:"space-y-1",children:(K=H.studentIds)==null?void 0:K.map(ce=>{const U=e.find(M=>M.id===ce);return U?a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700 rounded",children:[a.jsx("span",{className:"text-white text-sm",children:U.displayName}),a.jsx("button",{onClick:()=>ue(H.id,ce),className:"p-1 hover:bg-red-600 rounded",children:a.jsx(Wr,{className:"w-3 h-3 text-red-400"})})]},ce):null})}),(!H.studentIds||H.studentIds.length===0)&&a.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"      "})]},H.id)})})})]})]}),a.jsx(bn,{children:R&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"  "}),a.jsxs("form",{onSubmit:P,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsx("input",{type:"text",value:L.name,onChange:H=>I(te=>({...te,name:H.target.value})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:":  '"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:""}),a.jsx("textarea",{value:L.description,onChange:H=>I(te=>({...te,description:H.target.value})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"   "})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"   "}),a.jsx("input",{type:"number",value:L.maxStudents,onChange:H=>I(te=>({...te,maxStudents:parseInt(H.target.value)})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"  ()"}),a.jsxs("select",{value:L.initialLesson,onChange:H=>I(te=>({...te,initialLesson:H.target.value})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"   ()"}),i.map(H=>{var K;const te=H.originalId||H.order;return a.jsxs("option",{value:te,children:[" ",te," - ",H.title," (",H.totalSlides||((K=H.slides)==null?void 0:K.length)||0," )"]},H.id)})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition-colors",children:" "}),a.jsx("button",{type:"button",onClick:()=>j(!1),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-2 rounded-lg transition-colors",children:""})]})]})]})})}),a.jsx(bn,{children:k&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:" "}),a.jsxs("form",{onSubmit:B,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsx("input",{type:"text",value:k.name,onChange:H=>F(te=>({...te,name:H.target.value})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:""}),a.jsx("textarea",{value:k.description,onChange:H=>F(te=>({...te,description:H.target.value})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"   "}),a.jsx("input",{type:"number",value:k.maxStudents,onChange:H=>F(te=>({...te,maxStudents:parseInt(H.target.value)})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"50"})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition-colors",children:" "}),a.jsx("button",{type:"button",onClick:()=>F(null),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-2 rounded-lg transition-colors",children:""})]})]})]})})})]})},E6=()=>{var ge,be;const{currentUser:t}=Ns(),[e,r]=S.useState(null),[n,s]=S.useState([]),[i,o]=S.useState(0),[l,u]=S.useState({}),[h,f]=S.useState(""),[p,x]=S.useState(!1),[v,w]=S.useState(!1),[b,_]=S.useState(!0),[R,j]=S.useState(!1),[k,F]=S.useState(!0),[L,I]=S.useState(""),[N,T]=S.useState("all"),[P,B]=S.useState({}),[z,O]=S.useState({}),[D,G]=S.useState(!1),[Q,ue]=S.useState(5e3),[H,te]=S.useState(null),[K,ce]=S.useState(null),[U,M]=S.useState(!1),X=async()=>{var se;try{x(!0),ce(null),console.log(" Loading lessons with slide counts from database...");const ve=await S0();console.log(` Loaded ${ve.length} lessons with slide counts from database`),s(ve),ve.length===0?(ce("No lessons found. Please check your database connection."),Ie.error("No lessons found. Please check your database connection.")):e||(r(ve[0]),console.log(` Auto-selected lesson: ${ve[0].title} with ${((se=ve[0].slides)==null?void 0:se.length)||0} slides`))}catch(ve){console.error(" Error loading lessons:",ve),ce(`Failed to load lessons: ${ve.message}`),Ie.error(`Failed to load lessons: ${ve.message}`)}finally{x(!1)}},Y=async se=>{var ve;console.log(" Lesson changed to:",se);try{const Me=n.find(Re=>Re.id===se);Me?(console.log(" Found lesson data:",Me.title),console.log(` Lesson has ${((ve=Me.slides)==null?void 0:ve.length)||0} slides loaded`),r(Me),o(0),t!=null&&t.uid&&await Z(Me.id)):(console.error(" Lesson not found in loaded lessons"),Ie.error("Lesson not found"))}catch(Me){console.error(" Error loading lesson:",Me),Ie.error("Failed to load lesson")}},Z=async se=>{try{if(!(t!=null&&t.uid))return;const ve=await ug(t.uid,se),Me={};ve.forEach(Re=>{Me[Re.slideId]=Re.content}),u(Me),console.log(` Loaded ${ve.length} teacher notes for lesson ${se}`)}catch(ve){console.error(" Error loading teacher notes:",ve)}},fe=async()=>{var se;try{if(!(t!=null&&t.uid)||!(e!=null&&e.id)||!h.trim())return;w(!0);const ve=(se=e.slides)==null?void 0:se[i];if(!ve){Ie.error("No slide data available");return}const Me=ve.id;await E3(t.uid,e.id,Me,{content:h.trim(),slideIndex:i}),u(Re=>({...Re,[Me]:h.trim()})),f(""),Ie.success("Note saved successfully")}catch(ve){console.error(" Error saving note:",ve),Ie.error("Failed to save note")}finally{w(!1)}};S.useEffect(()=>{X()},[]),S.useEffect(()=>{t!=null&&t.uid&&(e!=null&&e.id)&&Z(e.id)},[t==null?void 0:t.uid,e==null?void 0:e.id]),S.useEffect(()=>{if(D&&(e!=null&&e.slides)){const se=setInterval(()=>{o(ve=>ve<e.slides.length-1?ve+1:(G(!1),ve))},Q);return te(se),()=>clearInterval(se)}},[D,Q,e==null?void 0:e.slides]);const ie=se=>{e!=null&&e.slides&&se>=0&&se<e.slides.length&&(o(se),we(se))},me=()=>{e!=null&&e.slides&&i<e.slides.length-1&&ie(i+1)},pe=()=>{i>0&&ie(i-1)},we=se=>{var Re;if(!(e!=null&&e.slides)||se>=e.slides.length){f("");return}const ve=(Re=e.slides[se])==null?void 0:Re.id,Me=l[ve]||"";f(Me)};S.useEffect(()=>{we(i)},[i,e,l]);const Xe=se=>{if(!se)return null;try{switch(se.type){case"presentation":return a.jsx(Ld,{slide:se});case"poll":return a.jsx(T0,{slide:se,onSubmit:ve=>re(se.id,ve)});case"video":return a.jsx(j0,{slide:se});case"interactive":return a.jsx(A0,{slide:se,onComplete:ve=>re(se.id,ve)});case"break":return a.jsx(C0,{slide:se});case"reflection":return a.jsx(I0,{slide:se,onSubmit:ve=>re(se.id,ve)});case"quiz":return a.jsx(R0,{slide:se,onSubmit:ve=>re(se.id,ve)});default:return a.jsx("div",{className:"text-center py-8",children:a.jsxs("p",{className:"text-gray-400",children:["Unsupported slide type: ",se.type]})})}}catch(ve){return console.error("Error rendering slide:",ve),a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-red-400",children:"Error rendering slide"})})}},re=(se,ve)=>{B(Me=>({...Me,[se]:ve})),O(Me=>({...Me,[se]:!0}))},Ze=se=>{switch(se){case"presentation":return a.jsx(_l,{className:"w-4 h-4"});case"poll":return a.jsx(pg,{className:"w-4 h-4"});case"video":return a.jsx(jn,{className:"w-4 h-4"});case"interactive":return a.jsx(_o,{className:"w-4 h-4"});case"break":return a.jsx(Cd,{className:"w-4 h-4"});case"reflection":return a.jsx(Gs,{className:"w-4 h-4"});case"quiz":return a.jsx(Qt,{className:"w-4 h-4"});default:return a.jsx(_l,{className:"w-4 h-4"})}},Fe=n.filter(se=>{var ve,Me;return((ve=se.title)==null?void 0:ve.toLowerCase().includes(L.toLowerCase()))||((Me=se.description)==null?void 0:Me.toLowerCase().includes(L.toLowerCase()))}).sort((se,ve)=>{const Me=se.order??se.originalId??0,Re=ve.order??ve.originalId??0;return Me!==Re?Me-Re:(se.title||"").localeCompare(ve.title||"")});return p?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(rs,{})}):K?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(To,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsx("p",{className:"text-red-400",children:K}),a.jsx("button",{onClick:X,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]}):a.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Gs,{className:"w-8 h-8 text-blue-400"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Slide Preview Manager"}),a.jsx("p",{className:"text-gray-400",children:"Preview and manage lesson slides"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:()=>_(!b),className:`px-4 py-2 rounded-lg flex items-center space-x-2 ${b?"bg-blue-600":"bg-gray-700"}`,children:[a.jsx(Pa,{className:"w-4 h-4"}),a.jsx("span",{children:"Preview"})]}),a.jsx("button",{onClick:()=>j(!R),className:"px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600",children:R?a.jsx(O2,{className:"w-4 h-4"}):a.jsx(L2,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsx(it,{className:"h-full",children:a.jsxs("div",{className:"p-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Lessons"}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search lessons...",value:L,onChange:se=>I(se.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-blue-500"})]})}),a.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Fe.map(se=>{var ve;return a.jsx("button",{onClick:()=>Y(se.id),className:`w-full text-left p-3 rounded-lg transition-colors ${(e==null?void 0:e.id)===se.id?"bg-blue-600 text-white":"bg-gray-800 hover:bg-gray-700"}`,children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Gs,{className:"w-4 h-4"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:se.title}),a.jsxs("p",{className:"text-sm opacity-75",children:[se.totalSlides||((ve=se.slides)==null?void 0:ve.length)||0," slides"]})]})]})},se.id)})})]})})}),a.jsx("div",{className:"lg:col-span-3",children:e?a.jsxs("div",{className:"space-y-6",children:[a.jsx(it,{children:a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:e.title}),a.jsx("p",{className:"text-gray-400",children:e.description})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm text-gray-400",children:["Slide ",i+1," of ",e.totalSlides||((ge=e.slides)==null?void 0:ge.length)||0]}),a.jsxs("p",{className:"text-sm text-gray-400",children:[e.totalSlides||((be=e.slides)==null?void 0:be.length)||0," total slides"]})]})]})})}),e.slides&&e.slides.length>0&&a.jsx(it,{children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Slide Navigation"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>G(!D),className:`px-3 py-1 rounded ${D?"bg-red-600":"bg-green-600"}`,children:D?a.jsx(Cd,{className:"w-4 h-4"}):a.jsx(jn,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>F(!k),className:"px-3 py-1 bg-gray-700 rounded hover:bg-gray-600",children:a.jsx(C3,{className:"w-4 h-4"})})]})]}),k&&a.jsx("div",{className:"grid grid-cols-6 gap-2 mb-4",children:e.slides.map((se,ve)=>a.jsx("button",{onClick:()=>ie(ve),className:`p-2 rounded text-xs ${ve===i?"bg-blue-600 text-white":"bg-gray-800 hover:bg-gray-700"}`,children:a.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[Ze(se.type),a.jsx("span",{children:ve+1})]})},`slide-${se.id}-order-${se.order||ve}`))}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:pe,disabled:i===0,className:"px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(Bc,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>ie(0),disabled:i===0,className:"px-3 py-1 bg-gray-700 rounded hover:bg-gray-600 disabled:opacity-50",children:a.jsx(V2,{className:"w-4 h-4"})}),a.jsxs("span",{className:"text-sm",children:[i+1," / ",e.slides.length]}),a.jsx("button",{onClick:()=>ie(e.slides.length-1),disabled:i===e.slides.length-1,className:"px-3 py-1 bg-gray-700 rounded hover:bg-gray-600 disabled:opacity-50",children:a.jsx(B2,{className:"w-4 h-4"})})]}),a.jsx("button",{onClick:me,disabled:i===e.slides.length-1,className:"px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(hg,{className:"w-4 h-4"})})]})]})}),e.slides&&e.slides[i]&&a.jsx(it,{children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:e.slides[i].title}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[Ze(e.slides[i].type),a.jsx("span",{children:e.slides[i].type})]})]}),a.jsx("div",{className:"border border-gray-700 rounded-lg p-4 bg-gray-800",children:Xe(e.slides[i])})]})}),a.jsx(it,{children:a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Teacher Notes"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("textarea",{value:h,onChange:se=>f(se.target.value),placeholder:"Add your notes for this slide...",className:"w-full h-32 p-3 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-blue-500 resize-none"}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>f(""),className:"px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Clear"}),a.jsxs("button",{onClick:fe,disabled:v||!h.trim(),className:"px-4 py-2 bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[v?a.jsx(rs,{}):a.jsx(eh,{className:"w-4 h-4"}),a.jsx("span",{children:"Save Note"})]})]})]})]})})]}):a.jsx(it,{children:a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(Gs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Lesson Selected"}),a.jsx("p",{className:"text-gray-400",children:"Select a lesson from the sidebar to preview its slides"})]})})})]})]})})},S6=()=>{ns();const{currentUser:t}=Ns(),[e,r]=S.useState(!0),[n,s]=S.useState([]),[i,o]=S.useState([]),[l,u]=S.useState({}),[h,f]=S.useState({}),[p,x]=S.useState([]),[v,w]=S.useState({}),[b,_]=S.useState(null),[R,j]=S.useState(""),[k,F]=S.useState("all"),[L,I]=S.useState(!0),[N,T]=S.useState(!0),[P,B]=S.useState(null),[z,O]=S.useState(new Set);S.useEffect(()=>{if(!t){Ir("UNAUTHORIZED_ACCESS_ATTEMPT",{role:"none"},{component:"ClassroomInterface"});return}const ie=A2({role:"teacher"},"view_classrooms");if(!ie.success){Ir("INSUFFICIENT_PERMISSIONS",{role:"teacher",uid:t.uid},{component:"ClassroomInterface",reason:ie.message}),Ie.error("    ");return}D(),G()},[t]);const D=async()=>{try{r(!0),B(null);const[ie,me]=await Promise.all([zl(t.uid),S0()]),pe=me.slice().sort((Ze,Fe)=>{const ge=Ze.order??Ze.originalId??0,be=Fe.order??Fe.originalId??0;return ge!==be?ge-be:(Ze.title||"").localeCompare(Fe.title||"")});s(ie),o(pe);const we={};for(const Ze of ie)try{const ge=(await C2(Ze.id)).map(be=>({uid:be.uid||"unknown",displayName:be.displayName||be.email||"  ",email:be.email||"",role:be.role||"student",classId:be.classId||Ze.id,progress:typeof be.progress=="number"?be.progress:0,completedLessons:Array.isArray(be.completedLessons)?be.completedLessons:[],totalTimeSpent:typeof be.totalTimeSpent=="number"?be.totalTimeSpent:0,lastActivityAt:be.lastActivityAt||null,createdAt:be.createdAt||new Date().toISOString()}));we[Ze.id]=ge}catch(Fe){console.error(`Error loading students for class ${Ze.id}:`,Fe),we[Ze.id]=[]}u(we);const Xe=await w3(t.uid);f(Xe);const re=await I2(t.uid,20);x(re),r(!1)}catch(ie){console.error("Error loading classroom data:",ie),B(ie.message),r(!1)}},G=()=>{const ie=Q();return()=>{ie&&ie()}},Q=()=>{w({})},ue=ie=>{const me=new Set(z);me.has(ie)?me.delete(ie):me.add(ie),O(me)},H=(ie,me)=>{const pe=v[me];if(!pe)return"offline";const we=pe.connectedStudents.includes(ie.uid),Xe=ie.lastActivityAt,re=Xe&&Date.now()-new Date(Xe).getTime()<3e5;return we&&re?"online":we&&!re?"idle":"offline"},te=ie=>{switch(ie){case"online":return a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"});case"idle":return a.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"});case"offline":return a.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"});default:return a.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"})}},K=ie=>{switch(ie){case"online":return"";case"idle":return" ";case"offline":return"";default:return" "}},ce=ie=>{switch(ie){case"online":return"text-green-400";case"idle":return"text-yellow-400";case"offline":return"text-gray-400";default:return"text-gray-400"}},U=n.filter(ie=>{if(R&&!ie.name.toLowerCase().includes(R.toLowerCase()))return!1;if(k!=="all"){const me=v[ie.id];if(k==="active"&&!me||k==="inactive"&&me)return!1}return!0}),M=ie=>{const me=l[ie.id]||[];if(me.length===0)return 0;const pe=me.reduce((we,Xe)=>{let re=0;if(typeof Xe.progress=="number")re=Xe.progress;else if(Xe.progress&&typeof Xe.progress=="object"){const Ze=Object.values(Xe.progress).filter(Fe=>typeof Fe=="number");re=Ze.length>0?Ze.reduce((Fe,ge)=>Fe+ge,0)/Ze.length:0}return we+re},0);return Math.round(pe/me.length)},X=ie=>{const me=l[ie.id]||[],pe=v[ie.id],we=me.filter(Ze=>H(Ze,ie.id)==="online").length,Xe=me.filter(Ze=>H(Ze,ie.id)==="idle").length,re=me.filter(Ze=>H(Ze,ie.id)==="offline").length;return{total:me.length,online:we,idle:Xe,offline:re,progress:M(ie),hasActiveSession:!!pe}},Y=async()=>{Ie.loading(" ..."),await D(),Ie.dismiss(),Ie.success("  ")},Z=async(ie,me)=>{try{await wo(t.uid,{type:`student_${me}`,title:`  - ${me}`,description:` ${me}    ${ie}`,metadata:{studentId:ie,action:me}}),Ie.success(` ${me}  `)}catch(pe){console.error("Error performing student action:",pe),Ie.error("   ")}},fe=async(ie,me)=>{try{if(!me){Ie.error("  ");return}const pe=new Date().toISOString(),we=n.find(be=>be.id===ie),Xe=(we==null?void 0:we.unlockedLessons)||[],re={lessonId:me,unlockedAt:pe,unlockedBy:t.uid,unlockedByTeacher:t.displayName||t.email},Ze=bt(He,"classes",ie);await Un(Ze,{currentLesson:me,lessonStartDate:pe,lastUpdated:pe,unlockedLessons:[...Xe,re]});const ge=(l[ie]||[]).map(async be=>{const se=bt(He,"users",be.uid);await Un(se,{currentLesson:me,lastUpdated:pe})});await Promise.all(ge),Ie.success(` ${me}    -        ${me}`),await D()}catch(pe){console.error("Error assigning lesson:",pe),Ie.error("   ")}};return cg({role:"teacher"})?e?a.jsx("div",{className:"bg-black min-h-screen flex items-center justify-center",children:a.jsx(rs,{})}):P?a.jsxs("div",{className:"text-center py-8 bg-black min-h-screen flex flex-col items-center justify-center",children:[a.jsx(To,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsx("p",{className:"text-red-400 mb-4",children:"   "}),a.jsx(ut,{onClick:D,children:" "})]}):a.jsxs("div",{className:"space-y-6 p-6 bg-black min-h-screen",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:" "}),a.jsx("p",{className:"text-white",children:"    "})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(ut,{onClick:()=>T(!N),variant:N?"primary":"secondary",size:"sm",children:[N?a.jsx(A3,{className:"w-4 h-4"}):a.jsx(wB,{className:"w-4 h-4"}),N?" ":" "]}),a.jsxs(ut,{onClick:Y,variant:"secondary",size:"sm",children:[a.jsx(Ps,{className:"w-4 h-4"}),""]})]})]}),a.jsx(it,{children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white"}),a.jsx("input",{type:"text",placeholder:" ...",value:R,onChange:ie=>j(ie.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),a.jsxs("select",{value:k,onChange:ie=>F(ie.target.value),className:"px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",className:"bg-gray-800 text-white",children:" "}),a.jsx("option",{value:"active",className:"bg-gray-800 text-white",children:" "}),a.jsx("option",{value:"inactive",className:"bg-gray-800 text-white",children:"  "})]}),a.jsxs(ut,{onClick:()=>I(!L),variant:L?"primary":"secondary",size:"sm",children:[L?a.jsx(Pa,{className:"w-4 h-4"}):a.jsx(F2,{className:"w-4 h-4"}),L?" ":" "]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(it,{className:"bg-gradient-to-br from-blue-500 to-blue-600",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Rr,{className:"w-8 h-8 text-white"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-blue-100 text-sm",children:'" '}),a.jsx("p",{className:"text-white text-2xl font-bold",children:n.length})]})]})}),a.jsx(it,{className:"bg-gradient-to-br from-green-500 to-green-600",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(bo,{className:"w-8 h-8 text-white"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-green-100 text-sm",children:" "}),a.jsx("p",{className:"text-white text-2xl font-bold",children:Object.keys(v).length})]})]})}),a.jsx(it,{className:"bg-gradient-to-br from-purple-500 to-purple-600",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(th,{className:"w-8 h-8 text-white"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-purple-100 text-sm",children:" "}),a.jsxs("p",{className:"text-white text-2xl font-bold",children:[n.length>0?Math.round(n.reduce((ie,me)=>ie+M(me),0)/n.length):0,"%"]})]})]})}),a.jsx(it,{className:"bg-gradient-to-br from-orange-500 to-orange-600",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(j3,{className:"w-8 h-8 text-white"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-orange-100 text-sm",children:" "}),a.jsx("p",{className:"text-white text-2xl font-bold",children:Object.values(l).flat().filter(ie=>Object.keys(v).some(me=>H(ie,me)==="online")).length})]})]})})]}),a.jsx("div",{className:"space-y-4",children:U.map(ie=>{var Xe,re,Ze;const me=X(ie),pe=z.has(ie.id),we=v[ie.id];return a.jsx(it,{className:"hover:bg-gray-800 transition-colors",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[we?a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}):a.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),a.jsx("h3",{className:"text-xl font-semibold text-white",children:ie.name||"  "})]}),we&&a.jsxs("div",{className:"flex items-center space-x-2 text-green-400 text-sm",children:[a.jsx(Al,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-white font-semibold",children:[me.total," "]}),a.jsxs("p",{className:"text-white text-sm",children:[" ",me.progress,"%"]})]}),a.jsx(ut,{onClick:()=>ue(ie.id),variant:"ghost",size:"sm",children:pe?a.jsx(NB,{className:"w-5 h-5"}):a.jsx(_B,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),a.jsxs("span",{className:"text-green-400 text-sm",children:[me.online," "]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),a.jsxs("span",{className:"text-yellow-400 text-sm",children:[me.idle,"  "]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),a.jsxs("span",{className:"text-white text-sm",children:[me.offline," "]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(gg,{className:"w-4 h-4 text-blue-400"}),a.jsxs("span",{className:"text-blue-400 text-sm",children:[me.progress,"% "]})]})]}),a.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center space-x-2",children:[a.jsx(Gs,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("span",{className:"text-sm text-gray-300",children:[" : ",ie.currentLesson||" "]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",style:{position:"relative",zIndex:1},children:[a.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm text-gray-300",children:" "}),a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})]}),a.jsx("p",{className:"text-white font-medium",children:ie.currentLesson?` ${ie.currentLesson}`:" "}),a.jsx("p",{className:"text-xs text-gray-400",children:ie.lessonStartDate?` -${new Date(ie.lessonStartDate).toLocaleDateString("he-IL")}`:" "}),ie.unlockedLessons&&ie.unlockedLessons.length>0&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-600",children:[a.jsxs("p",{className:"text-xs text-green-400",children:[ie.unlockedLessons.length,"  "]}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:ie.unlockedLessons.sort((Fe,ge)=>Fe.lessonId-ge.lessonId).map(Fe=>a.jsx("span",{className:"inline-block px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded border border-green-500/30",children:Fe.lessonId},Fe.lessonId))})]})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3 relative overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm text-gray-300",children:" "}),a.jsx(_o,{className:"w-4 h-4 text-gray-400"})]}),a.jsx("div",{className:"flex items-center space-x-2 lesson-assignment-select",children:a.jsxs("select",{className:"flex-1 bg-gray-600 text-white text-sm rounded px-2 py-1 border border-gray-500 max-w-full",value:ie.currentLesson||"",onChange:Fe=>fe(ie.id,parseInt(Fe.target.value)),style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",position:"relative",zIndex:10},children:[a.jsx("option",{value:"",children:" "}),i.map(Fe=>{var ve;const ge=Fe.originalId||Fe.order,be=(ve=ie.unlockedLessons)==null?void 0:ve.some(Me=>Me.lessonId===ge),se=ge===ie.currentLesson;return a.jsxs("option",{value:ge,className:be?"text-green-400":"text-white",style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[be?" ":"","   ",ge," - ",Fe.title,be&&!se?" ( )":"",se?" ()":""]},Fe.id)})]})}),a.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"         "})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm text-gray-300",children:" "}),a.jsx(y0,{className:"w-4 h-4 text-gray-400"})]}),a.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mb-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${me.progress}%`}})}),a.jsxs("p",{className:"text-xs text-gray-400",children:[me.progress,"%   ",((Xe=ie.completedLessons)==null?void 0:Xe.length)||0," "]}),ie.unlockedLessons&&ie.unlockedLessons.length>0&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-600",children:[a.jsxs("p",{className:"text-xs text-blue-400",children:[" : ",ie.unlockedLessons.length,"/",i.length]}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:i.map(Fe=>{var se,ve;const ge=Fe.originalId||Fe.order,be=(se=ie.unlockedLessons)==null?void 0:se.some(Me=>Me.lessonId===ge);return a.jsx("span",{className:`inline-block w-6 h-6 text-xs rounded flex items-center justify-center border ${be?"bg-green-500/20 text-green-400 border-green-500/30":"bg-gray-600/50 text-gray-400 border-gray-500/30"}`,title:`${Fe.title} (${Fe.totalSlides||((ve=Fe.slides)==null?void 0:ve.length)||0} )`,children:ge},Fe.id)})})]})]})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h5",{className:"text-md font-semibold text-white flex items-center space-x-2",children:[a.jsx(nx,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]}),a.jsxs("span",{className:"text-sm text-gray-300",children:[((re=ie.unlockedLessons)==null?void 0:re.length)||0,"  "]})]}),ie.unlockedLessons&&ie.unlockedLessons.length>0?a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:ie.unlockedLessons.sort((Fe,ge)=>new Date(ge.unlockedAt)-new Date(Fe.unlockedAt)).map((Fe,ge)=>{var be;return a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-600/50 rounded-lg border border-gray-500/30",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-blue-400 font-bold text-sm",children:Fe.lessonId})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-white font-medium",children:[" ",Fe.lessonId," - ",((be=i.find(se=>(se.originalId||se.order)===Fe.lessonId))==null?void 0:be.title)||"  "]}),a.jsxs("p",{className:"text-xs text-gray-400",children:["   ",Fe.unlockedByTeacher]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-300",children:new Date(Fe.unlockedAt).toLocaleDateString("he-IL")}),a.jsx("p",{className:"text-xs text-gray-500",children:new Date(Fe.unlockedAt).toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"})})]})]},`${Fe.lessonId}-${Fe.unlockedAt}`)})}):a.jsxs("div",{className:"text-center py-6",children:[a.jsx(nx,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),a.jsx("p",{className:"text-gray-400",children:"   "}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"     "})]})]})]}),pe&&a.jsxs("div",{className:"mt-6 border-t border-gray-700 pt-4",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(l[ie.id]||[]).map(Fe=>{const ge=H(Fe,ie.id);return!L&&ge==="offline"?null:a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[te(ge),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:Fe.displayName||Fe.email||"  "}),a.jsx("p",{className:`text-xs ${ce(ge)}`,children:K(ge)})]})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-white text-sm",children:(()=>{if(typeof Fe.progress=="number")return`${Fe.progress}%`;if(Fe.progress&&typeof Fe.progress=="object"){const be=Object.values(Fe.progress).filter(ve=>typeof ve=="number"),se=be.length>0?be.reduce((ve,Me)=>ve+Me,0)/be.length:0;return`${Math.round(se)}%`}return"0%"})()}),a.jsx("p",{className:"text-white text-xs",children:Fe.lastActivityAt?new Date(Fe.lastActivityAt).toLocaleTimeString("he-IL"):" "})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(ut,{onClick:()=>Z(Fe.uid,"message"),variant:"ghost",size:"sm",title:" ",children:a.jsx(pg,{className:"w-4 h-4"})}),a.jsx(ut,{onClick:()=>Z(Fe.uid,"monitor"),variant:"ghost",size:"sm",title:" ",children:a.jsx(Pa,{className:"w-4 h-4"})})]})]})]},Fe.uid)})}),!L&&(l[ie.id]||[]).filter(Fe=>H(Fe,ie.id)==="offline").length>0&&a.jsx("div",{className:"mt-4 text-center",children:a.jsxs("p",{className:"text-white text-sm",children:[(Ze=l[ie.id])==null?void 0:Ze.filter(Fe=>H(Fe,ie.id)==="offline").length,"   "]})})]})]})},ie.id)})}),a.jsx(it,{children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:" "}),a.jsx("div",{className:"space-y-3",children:p.slice(0,10).map((ie,me)=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800 rounded-lg",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-white text-sm",children:ie.title||""}),a.jsx("p",{className:"text-white text-xs",children:ie.description||" "})]}),a.jsx("span",{className:"text-white text-xs",children:ie.timestamp?_6(ie.timestamp):" "})]},me))})]})})]}):(Ir("STUDENT_ACCESS_ATTEMPT",{role:"student",uid:t==null?void 0:t.uid},{component:"ClassroomInterface"}),a.jsx("div",{className:"text-center py-8 bg-black min-h-screen flex items-center justify-center",children:a.jsx("p",{className:"text-red-400",children:"     "})}))},k6=()=>{const{currentUser:t}=Ns(),[e,r]=S.useState(!0),[n,s]=S.useState(null),[i,o]=S.useState(null),[l,u]=S.useState(null),[h,f]=S.useState(null),[p,x]=S.useState(null),[v,w]=S.useState([]),[b,_]=S.useState([]);S.useEffect(()=>{t&&R()},[t]);const R=async()=>{try{r(!0),s(null);const[I,N,T]=await Promise.all([zl(t.uid),v0(t.uid),MW(t.uid,20)]);console.log(" DEBUG - Real Analytics Data:",{classesCount:I.length,studentsCount:N.length,studentsData:N.map(B=>({id:B.uid,name:B.displayName,classId:B.classId})),classesData:I.map(B=>({id:B.id,name:B.name,studentIds:B.studentIds}))});const P={totalClasses:I.length,totalStudents:N.length,totalActiveStudents:N.filter(B=>B.lastActivity>Date.now()-7*24*60*60*1e3).length,averageProgress:Math.round(N.reduce((B,z)=>{var O,D;return B+(((D=(O=z.progress)==null?void 0:O.completedLessons)==null?void 0:D.length)||0)},0)/Math.max(N.length,1)*10),averageTimeSpent:Math.round(N.reduce((B,z)=>B+(z.totalTimeSpent||0),0)/Math.max(N.length,1)/60)};console.log(" DEBUG - Analytics Data Created:",P),w(I),_(N),o(P),x(T),I.length>0&&!l&&(u(I[0].id),await j(I[0].id))}catch(I){console.error("Error loading real analytics:",I),s(I.message)}finally{r(!1)}},j=async I=>{try{console.log("Loading analytics for class:",I);const N=b.filter(P=>P.classId===I),T={totalStudents:N.length,averageProgress:Math.round(N.reduce((P,B)=>{var z,O;return P+(((O=(z=B.progress)==null?void 0:z.completedLessons)==null?void 0:O.length)||0)},0)/Math.max(N.length,1)*10),averageTimeSpent:Math.round(N.reduce((P,B)=>P+(B.totalTimeSpent||0),0)/Math.max(N.length,1)/60),completedLessons:N.reduce((P,B)=>{var O;return(((O=B.progress)==null?void 0:O.completedLessons)||[]).forEach(D=>{P[D]=(P[D]||0)+1}),P},{})};f(T),console.log("Class analytics loaded:",T)}catch(N){console.error("Error loading class analytics:",N),s(N.message)}},k=async I=>{try{u(I),await j(I)}catch(N){console.error("Error changing class:",N),s(N.message)}},F=I=>{if(!I)return" ";try{const N=I.toDate?I.toDate():new Date(I);return isNaN(N.getTime())?" ":N.toLocaleDateString("he-IL",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return" "}},L=I=>{if(!I||I===0||typeof I!="number")return"0 ";const N=Math.floor(I/60),T=I%60;return N>0?`${N}  ${T} `:`${T} `};return e?a.jsx("div",{className:"min-h-screen bg-black text-white p-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-400",children:"    ..."})]})})}):n?a.jsx("div",{className:"min-h-screen bg-black text-white p-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsxs("p",{className:"text-red-400 text-lg",children:["  : ",n]}),a.jsx("button",{onClick:R,className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:" "})]})})}):a.jsx("div",{className:"min-h-screen bg-black text-white p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),a.jsx("p",{className:"text-gray-400",children:"        "})]}),a.jsxs("button",{onClick:R,disabled:e,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),a.jsx("span",{children:" "})]})]}),i&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx(it,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:""}),a.jsx("p",{className:"text-3xl font-bold text-blue-400",children:i.totalClasses||v.length}),a.jsx("p",{className:"text-sm text-gray-400",children:" "})]})}),a.jsx(it,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:""}),a.jsx("p",{className:"text-3xl font-bold text-green-400",children:i.totalStudents||b.length}),a.jsxs("p",{className:"text-sm text-gray-400",children:[i.totalActiveStudents||0," "]})]})}),a.jsx(it,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:" "}),a.jsxs("p",{className:"text-3xl font-bold text-yellow-400",children:[i.averageProgress||0,"%"]})]})}),a.jsx(it,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:" "}),a.jsx("p",{className:"text-3xl font-bold text-purple-400",children:L(i.averageTimeSpent||0)})]})})]}),v.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"   "}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(I=>{var N;return a.jsxs("button",{onClick:()=>k(I.id),className:`p-4 rounded-lg border-2 transition-all ${l===I.id?"border-blue-500 bg-blue-900/20":"border-gray-700 bg-gray-900 hover:border-gray-600"}`,children:[a.jsx("h3",{className:"font-semibold text-white",children:I.name}),a.jsxs("p",{className:"text-sm text-gray-400",children:[((N=I.studentIds)==null?void 0:N.length)||0," "]})]},I.id)})})]}),h&&a.jsxs("div",{className:"mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:[" : ",h.className]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-4",children:[a.jsx(it,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:""}),a.jsx("p",{className:"text-3xl font-bold text-green-400",children:typeof h.totalStudents=="number"?h.totalStudents:0}),a.jsxs("p",{className:"text-sm text-gray-400",children:[typeof h.activeStudents=="number"?h.activeStudents:0," "]})]})}),a.jsx(it,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:" "}),a.jsxs("p",{className:"text-3xl font-bold text-yellow-400",children:[typeof h.averageProgress=="number"?h.averageProgress:0,"%"]})]})}),a.jsx(it,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:" "}),a.jsx("p",{className:"text-3xl font-bold text-blue-400",children:typeof h.averageCompletedLessons=="number"?h.averageCompletedLessons:0})]})}),a.jsx(it,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:" "}),a.jsx("p",{className:"text-3xl font-bold text-purple-400",children:L(h.averageTimeSpent||0)})]})})]}),h.students&&h.students.length>0&&a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:" "}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm text-gray-300",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-1 text-right",children:""}),a.jsx("th",{className:"px-2 py-1 text-right",children:""}),a.jsx("th",{className:"px-2 py-1 text-right",children:" "}),a.jsx("th",{className:"px-2 py-1 text-right",children:""}),a.jsx("th",{className:"px-2 py-1 text-right",children:" "})]})}),a.jsx("tbody",{children:h.students.map(I=>a.jsxs("tr",{className:"border-b border-gray-700",children:[a.jsx("td",{className:"px-2 py-1",children:I.displayName||"  "}),a.jsxs("td",{className:"px-2 py-1",children:[typeof I.progress=="number"?I.progress:0,"%"]}),a.jsx("td",{className:"px-2 py-1",children:Array.isArray(I.completedLessons)?I.completedLessons.length:0}),a.jsx("td",{className:"px-2 py-1",children:L(I.totalTimeSpent||0)}),a.jsx("td",{className:"px-2 py-1",children:F(I.lastActivityAt)})]},I.uid))})]})})]})]}),p&&a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"  "}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-4",children:[a.jsx(it,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:" "}),a.jsx("p",{className:"text-3xl font-bold text-blue-400",children:typeof p.totalSessions=="number"?p.totalSessions:0})]})}),a.jsx(it,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:" "}),a.jsx("p",{className:"text-3xl font-bold text-green-400",children:typeof p.averageAttendance=="number"?p.averageAttendance:0})]})}),a.jsx(it,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:'" '}),a.jsx("p",{className:"text-3xl font-bold text-purple-400",children:typeof p.totalAttendance=="number"?p.totalAttendance:0})]})}),a.jsx(it,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:" "}),a.jsx("p",{className:"text-3xl font-bold text-orange-400",children:Object.keys(p.studentAttendance||{}).length})]})})]}),p.detailedSessions&&p.detailedSessions.length>0&&a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"     "}),a.jsx("div",{className:"space-y-6",children:p.detailedSessions.slice(0,5).map(I=>a.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-semibold text-white",children:I.lessonName||` ${I.lessonId||" "}`}),a.jsx("p",{className:"text-gray-400 text-sm",children:I.className}),a.jsx("p",{className:"text-gray-400 text-sm",children:F(I.date)})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400",children:I.attendance}),a.jsx("div",{className:"text-sm text-gray-400",children:""}),a.jsx("div",{className:"text-sm text-gray-400",children:L(I.duration)})]})]}),I.students&&I.students.length>0&&a.jsxs("div",{className:"mt-4",children:[a.jsx("h6",{className:"text-md font-semibold text-gray-300 mb-2",children:" :"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:I.students.map(N=>a.jsxs("div",{className:"flex items-center justify-between bg-gray-600 rounded p-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),a.jsx("span",{className:"text-sm text-white",children:N.name})]}),a.jsxs("div",{className:"text-xs text-gray-400 text-left",children:[a.jsxs("div",{children:[": ",F(N.joinedAt)]}),a.jsxs("div",{children:[" : ",F(N.lastActivity)]}),a.jsxs("div",{children:[": ",N.currentSlide]})]})]},N.id))})]})]},I.sessionId))})]}),p.studentAttendance&&Object.keys(p.studentAttendance).length>0&&a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"  "}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm text-gray-300",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-1 text-right",children:" "}),a.jsx("th",{className:"px-2 py-1 text-right",children:" "}),a.jsx("th",{className:"px-2 py-1 text-right",children:" "}),a.jsx("th",{className:"px-2 py-1 text-right",children:"  "}),a.jsx("th",{className:"px-2 py-1 text-right",children:" "})]})}),a.jsx("tbody",{children:Object.entries(p.studentAttendance).sort(([,I],[,N])=>N.sessionsAttended-I.sessionsAttended).slice(0,10).map(([I,N])=>a.jsxs("tr",{className:"border-b border-gray-700",children:[a.jsx("td",{className:"px-2 py-1",children:N.name}),a.jsx("td",{className:"px-2 py-1",children:N.sessionsAttended}),a.jsxs("td",{className:"px-2 py-1",children:[N.attendancePercentage,"%"]}),a.jsx("td",{className:"px-2 py-1",children:L(N.averageTimePerSession||0)}),a.jsx("td",{className:"px-2 py-1",children:F(N.lastAttendance)})]},I))})]})})]})]}),v.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-gray-400 text-lg",children:"   "}),a.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"     "})]})]})})},Cq=()=>{var I;const t=ns(),{currentUser:e,loading:r,role:n}=Ns(),[s,i]=S.useState("overview"),[o,l]=S.useState(!0),[u,h]=S.useState({totalStudents:0,activeClasses:0,completedLessons:0,averageProgress:0}),[f,p]=S.useState([]),[x,v]=S.useState([]),[w,b]=S.useState([]),[_,R]=S.useState(null),j=[{id:"overview",label:" ",icon:bo,description:"    ",color:"blue"},{id:"classroom",label:" ",icon:Ad,description:"    ",color:"green"},{id:"realAnalytics",label:"  ",icon:gg,description:"      ",color:"cyan"},{id:"studentPool",label:" ",icon:Rr,description:"   ",color:"indigo"},{id:"slidePreview",label:" ",icon:_l,description:"      ",color:"yellow"}];S.useEffect(()=>{r||(async()=>{try{if(console.log(" Checking teacher access...",{currentUser:!!e,authLoading:r,role:n}),r){console.log(" Auth still loading...");return}if(!e){console.log(" No user found, redirecting to login"),Ie.error("     "),t("/login");return}if(n!=="teacher"){console.log(" User is not a teacher, role:",n),Ie.error("     "),t("/login");return}console.log(" Teacher access granted!"),await Ir("teacher_dashboard_access",{userId:e.uid,role:n,timestamp:new Date().toISOString()}),l(!0);const[T,P,B]=await Promise.all([zl(e.uid),v0(e.uid),I2(e.uid,5)]);p(T),v(P),b(B);const z=P.length,O=T.filter(Q=>Q.isActive).length,D=T.length,G=P.filter(Q=>!Q.classId).length;h({totalStudents:z,activeClasses:O,completedLessons:D,averageProgress:G}),l(!1)}catch(T){console.error(" Access check or stats load error:",T),Ie.error("      "),t("/login")}})()},[e,n,r,t]);const k=N=>{i(N),Ir("teacher_tab_change",{userId:e==null?void 0:e.uid,fromTab:s,toTab:N,timestamp:new Date().toISOString()})},F=()=>{switch(s){case"overview":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-400",children:u.totalStudents}),a.jsx("div",{className:"text-sm text-gray-300",children:'" '})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-400",children:u.activeClasses}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-400",children:u.completedLessons}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-3xl font-bold text-orange-400",children:[u.averageProgress,"%"]}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:" "}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("button",{onClick:()=>t("/teacher/session/create"),className:"flex items-center space-x-3 p-4 bg-blue-600 hover:bg-blue-500 rounded-lg transition-colors",children:[a.jsx(jn,{className:"w-6 h-6 text-white"}),a.jsx("span",{className:"text-white",children:"  "})]}),a.jsxs("button",{onClick:()=>k("classroom"),className:"flex items-center space-x-3 p-4 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[a.jsx(Ad,{className:"w-6 h-6 text-green-400"}),a.jsx("span",{className:"text-white",children:" "})]}),a.jsxs("button",{onClick:()=>k("slidePreview"),className:"flex items-center space-x-3 p-4 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[a.jsx(_l,{className:"w-6 h-6 text-purple-400"}),a.jsx("span",{className:"text-white",children:" "})]}),a.jsxs("button",{onClick:()=>k("realAnalytics"),className:"flex items-center space-x-3 p-4 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[a.jsx(y0,{className:"w-6 h-6 text-yellow-400"}),a.jsx("span",{className:"text-white",children:" "})]})]})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:" "}),w.length===0?a.jsx("div",{className:"text-center text-gray-400 py-8",children:a.jsx("p",{children:"  "})}):a.jsx("div",{className:"space-y-3",children:w.map(N=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-700 rounded-lg",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${N.type==="class_created"?"bg-green-400":N.type==="class_deleted"?"bg-red-400":N.type==="student_added"?"bg-blue-400":N.type==="student_removed"?"bg-orange-400":N.type==="class_edited"?"bg-yellow-400":N.type==="notes_created"?"bg-purple-400":N.type==="notes_updated"?"bg-indigo-400":N.type==="notes_deleted"?"bg-pink-400":"bg-gray-400"}`}),a.jsx("span",{className:"text-gray-300 flex-1 text-right",children:N.description}),a.jsx("span",{className:"text-gray-500 text-sm",children:N.timestamp?_6(N.timestamp):" "})]},N.id))})]})]});case"classroom":return a.jsx(S6,{});case"realAnalytics":return a.jsx(k6,{});case"studentPool":return a.jsx(N6,{});case"slidePreview":return a.jsx(E6,{});default:return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(bo,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:" "}),a.jsx("p",{className:"text-gray-400",children:"   "})]})}},L=N=>{const T={blue:"border-blue-500 bg-blue-500/10 text-blue-400",green:"border-green-500 bg-green-500/10 text-green-400",yellow:"border-yellow-500 bg-yellow-500/10 text-yellow-400",purple:"border-purple-500 bg-purple-500/10 text-purple-400",indigo:"border-indigo-500 bg-indigo-500/10 text-indigo-400",pink:"border-pink-500 bg-pink-500/10 text-pink-400",orange:"border-orange-500 bg-orange-500/10 text-orange-400",cyan:"border-cyan-500 bg-cyan-500/10 text-cyan-400",red:"border-red-500 bg-red-500/10 text-red-400"};return T[N]||T.blue};return o||r?a.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:a.jsx(rs,{size:"lg"})}):_?a.jsx("div",{className:"text-center text-red-600 p-4 bg-black min-h-screen flex items-center justify-center",children:a.jsx("p",{children:_})}):a.jsx(G2,{children:a.jsx("div",{className:"min-h-screen bg-black text-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"flex flex-wrap gap-2 bg-gray-800 p-2 rounded-lg",children:j.map(N=>{const T=N.icon,P=s===N.id;return a.jsxs("button",{onClick:()=>k(N.id),className:`flex items-center space-x-2 px-4 py-3 rounded-md transition-all duration-200 ${P?`${L(N.color)} border-2`:"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:[a.jsx(T,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:N.label})]},N.id)})}),a.jsx("div",{className:"mt-4 text-center",children:a.jsx("p",{className:"text-gray-400",children:(I=j.find(N=>N.id===s))==null?void 0:I.description})})]}),a.jsx(bn,{mode:"wait",children:a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"bg-gray-800 rounded-lg p-6",children:F()},s)})]})})})},Iq=()=>{var ce,U,M,X;const{sessionId:t}=Ix(),e=ns(),{currentUser:r}=Ns(),[n,s]=S.useState(null),[i,o]=S.useState(null),[l,u]=S.useState(0),[h,f]=S.useState(!1),[p,x]=S.useState(!1),[v,w]=S.useState(!1),[b,_]=S.useState(!0),[R,j]=S.useState(!1),[k,F]=S.useState(!1),[L,I]=S.useState({}),[N,T]=S.useState(null);if(S.useEffect(()=>{if(!r){Ir("UNAUTHORIZED_ACCESS_ATTEMPT",{role:"none"},{component:"SessionHosting"});return}const Y=A2({role:"teacher"},"host_sessions");if(!Y.success){Ir("INSUFFICIENT_PERMISSIONS",{role:"teacher",uid:r.uid},{component:"SessionHosting",reason:Y.message}),Ie.error("    "),e("/teacher/dashboard");return}P()},[r,t,e]),S.useEffect(()=>{if(n){const Y=Eg(t,Z=>{Z?(s(Z),u(Z.currentSlide||0)):(Ie.error(" "),e("/teacher/dashboard"))});return()=>Y()}},[t,e]),!cg({role:"teacher"}))return Ir("STUDENT_ACCESS_ATTEMPT",{role:"student",uid:r==null?void 0:r.uid},{component:"SessionHosting"}),a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-red-400",children:"    "})});const P=async()=>{try{_(!0),T(null),console.log(" Loading session data for session ID:",t);const Y=await Ab(t);console.log(" Session data loaded:",Y);let Z=null;try{if(Z=await kg(Y.lessonId),Z&&Z.slides&&Z.slides.length>0)Z={...Z,content:{slides:Z.slides}};else throw new Error("No slides found in Firebase")}catch(me){console.error("Failed to load lesson from database:",me),Ie.error("    "),e("/teacher/dashboard");return}if(!Z)throw new Error(`Lesson ${Y.lessonId} not found`);console.log(" Lesson data loaded:",Z);const fe=await ug(r.uid,Y.lessonId),ie={};fe.forEach(me=>{ie[me.slideId]=me.content}),s(Y),o(Z),I(ie),u(Y.currentSlide||0),_(!1),console.log(" Session data loaded successfully")}catch(Y){console.error(" Error loading session:",Y),T(Y.message),_(!1)}},B=()=>{f(!h),Ie.success(h?" ":" ")},z=async()=>{if(l<i.slides.length-1){const Y=l+1;try{await kc(t,Y),u(Y),Ie.success(`  ${Y+1}`)}catch(Z){console.error("Error updating slide:",Z),Ie.error("   ")}}},O=async()=>{if(l>0){const Y=l-1;try{await kc(t,Y),u(Y),Ie.success(`  ${Y+1}`)}catch(Z){console.error("Error updating slide:",Z),Ie.error("   ")}}},D=()=>{x(!p),p?document.exitFullscreen():document.documentElement.requestFullscreen()},G=()=>{w(!v),Ie.success(v?" ":" ")},Q=()=>{F(!k)},ue=async()=>{if(window.confirm("      ?"))try{await Uf(t),Ie.success(" "),e("/teacher/dashboard")}catch(Y){console.error("Error ending session:",Y),Ie.error("   ")}},H=Y=>{switch(Y.type){case"presentation":return a.jsx(Ld,{slide:Y});case"poll":return a.jsx(T0,{slide:Y});case"video":return a.jsx(j0,{slide:Y});case"interactive":return a.jsx(A0,{slide:Y,onAnswer:()=>{}});case"break":return a.jsx(C0,{slide:Y});case"reflection":return a.jsx(I0,{slide:Y});case"quiz":return a.jsx(R0,{slide:Y});default:return a.jsxs("div",{className:"text-white",children:["   : ",Y.type]})}};if(N)return a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md mx-auto p-8",children:[a.jsx("div",{className:"text-6xl mb-6",children:""}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"  "}),a.jsx("p",{className:"text-gray-400 mb-6",children:N.includes("Session not found")?"    .    .":N}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs(ut,{onClick:()=>e("/teacher/session/create"),variant:"primary",size:"lg",className:"w-full",children:[a.jsx(jn,{className:"w-5 h-5 mr-2"}),"  "]}),a.jsx(ut,{onClick:()=>e("/teacher/dashboard"),variant:"secondary",size:"lg",className:"w-full",children:"  "})]})]})});if(b)return a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx(rs,{size:"lg"})});if(!n||!i)return a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md mx-auto p-8",children:[a.jsx("div",{className:"text-6xl mb-6",children:""}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:" ..."}),a.jsx("p",{className:"text-gray-400 mb-6",children:"     "}),a.jsx(rs,{size:"lg"})]})});const te=(ce=i==null?void 0:i.slides)==null?void 0:ce[l],K=te?L[te.id]:null;return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:[a.jsx("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4",children:a.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between space-y-4 lg:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(ut,{onClick:()=>e("/teacher/dashboard"),variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Bc,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-white",children:n.lessonName}),a.jsxs("p",{className:"text-gray-300 text-sm",children:[n.className,"  ",((U=n.connectedStudents)==null?void 0:U.length)||0,"/",((M=n.studentIds)==null?void 0:M.length)||0,"  "]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs(ut,{onClick:()=>j(!R),variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Rr,{className:"w-4 h-4"}),a.jsxs("span",{children:[" (",((X=n.connectedStudents)==null?void 0:X.length)||0,")"]})]}),a.jsxs(ut,{onClick:()=>e("/teacher/dashboard"),variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Ad,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsx(ut,{onClick:ue,variant:"danger",size:"sm",children:" "})]})]})}),a.jsxs("div",{className:"flex flex-col lg:flex-row min-h-screen",children:[a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"flex-1 bg-gray-900 p-8 relative overflow-auto",children:[i&&i.slides&&i.slides[l]?a.jsx("div",{className:"w-full max-w-4xl mx-auto",children:H(i.slides[l])}):a.jsx("div",{className:"text-center text-gray-400",children:a.jsx("p",{children:"  "})}),a.jsx("button",{onClick:D,className:"absolute top-4 right-4 p-2 bg-gray-800/50 hover:bg-gray-700/50 rounded-lg text-gray-300 hover:text-white transition-colors",children:p?a.jsx(O2,{className:"w-5 h-5"}):a.jsx(L2,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"bg-gray-800/50 border-t border-gray-700 p-4",children:a.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between space-y-4 lg:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(ut,{onClick:O,disabled:l===0,variant:"secondary",size:"sm",children:a.jsx(V2,{className:"w-4 h-4"})}),a.jsxs(ut,{onClick:B,variant:"primary",size:"lg",className:"flex items-center space-x-2",children:[h?a.jsx(Cd,{className:"w-5 h-5"}):a.jsx(jn,{className:"w-5 h-5"}),a.jsx("span",{children:h?"":""})]}),a.jsx(ut,{onClick:z,disabled:l===i.slides.length-1,variant:"secondary",size:"sm",children:a.jsx(B2,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(ut,{onClick:G,variant:"secondary",size:"sm",children:v?a.jsx(z3,{className:"w-4 h-4"}):a.jsx(U3,{className:"w-4 h-4"})}),a.jsxs(ut,{onClick:Q,variant:k?"primary":"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Gs,{className:"w-4 h-4"}),a.jsx("span",{children:""})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("span",{className:"text-sm text-gray-300",children:[l+1," / ",i.slides.length]}),a.jsx("div",{className:"w-24 lg:w-32 bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(l+1)/i.slides.length*100}%`}})})]})]})})]}),a.jsx("div",{className:`w-full lg:w-80 bg-gray-800/50 border-t lg:border-l border-gray-700 transition-all duration-300 ${R?"block":"hidden"}`,children:a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:" "}),a.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:n.connectedStudents&&n.connectedStudents.length>0?n.connectedStudents.map(Y=>a.jsx("div",{className:"p-3 rounded-lg border border-gray-600 bg-gray-700/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:Y.name}),a.jsxs("p",{className:"text-sm text-gray-400",children:[" ",Y.currentSlide+1]})]}),a.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]})},Y.id)):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Rr,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-400",children:"  "})]})})]})})]}),k&&K&&a.jsxs("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 max-w-md bg-yellow-900/90 backdrop-blur-sm rounded-lg p-4 border border-yellow-700 z-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Gs,{className:"w-4 h-4 text-yellow-400"}),a.jsx("span",{className:"text-yellow-400 font-medium text-sm",children:" "})]}),a.jsx("button",{onClick:Q,className:"text-yellow-400 hover:text-yellow-200 transition-colors",children:""})]}),a.jsx("p",{className:"text-yellow-200 text-sm",children:K})]})]})},Rq=()=>{const t=ns(),{currentUser:e}=Ns(),[r,n]=S.useState(!0),[s,i]=S.useState(!1),[o,l]=S.useState([]),[u,h]=S.useState([]),[f,p]=S.useState([]),[x,v]=S.useState(null),[w,b]=S.useState(null),[_,R]=S.useState("");S.useEffect(()=>{j()},[e]);const j=async()=>{try{n(!0);const[T,P,B]=await Promise.all([zl(e.uid),v0(e.uid),S0()]),z=B.slice().sort((O,D)=>{const G=O.order??O.originalId??0,Q=D.order??D.originalId??0;return G!==Q?G-Q:(O.title||"").localeCompare(D.title||"")});l(T),h(P),p(z),n(!1)}catch(T){console.error("Error loading data:",T),Ie.error("   "),n(!1)}},k=async()=>{var T;if(!x||!w){Ie.error("   ");return}try{i(!0);const P={teacherId:e.uid,teacherName:e.displayName||e.email,classId:x.id,className:x.name,lessonId:w.id,lessonName:w.title,studentIds:x.studentIds||[],totalSlides:w.totalSlides||((T=w.slides)==null?void 0:T.length)||0},B=await PW(P);Ie.success("  !"),t(`/teacher/session/${B}`)}catch(P){console.error("Error starting session:",P),Ie.error("   "),i(!1)}},F=o.filter(T=>T.name.toLowerCase().includes(_.toLowerCase())),L=T=>T.studentIds?T.studentIds.length:0,I=T=>!T||!T.slides?0:T.slides.reduce((P,B)=>P+(B.duration||3),0),N=T=>{var P;return T&&(T.totalSlides||((P=T.slides)==null?void 0:P.length))||0};return r?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx(rs,{size:"lg"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:[a.jsx("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(ut,{onClick:()=>t("/teacher/dashboard"),variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Bc,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-white",children:"  "}),a.jsx("p",{className:"text-gray-300 text-sm",children:"    "})]})]})})}),a.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsx(it,{variant:"dark",className:"border-gray-700",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Rr,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(jo,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:" ...",value:_,onChange:T=>R(T.target.value),className:"w-full pr-10 pl-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"})]})}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:F.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Rr,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-400",children:"  "})]}):F.map(T=>a.jsx("div",{onClick:()=>v(T),className:`p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ${(x==null?void 0:x.id)===T.id?"border-blue-500 bg-blue-500/10":"border-gray-600 bg-gray-700 hover:border-gray-500"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium",children:T.name}),a.jsxs("p",{className:"text-sm text-gray-400",children:[L(T)," "]})]}),(x==null?void 0:x.id)===T.id&&a.jsx(Qt,{className:"w-5 h-5 text-blue-400"})]})},T.id))})]})}),a.jsx(it,{variant:"dark",className:"border-gray-700",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Gs,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:f.map(T=>a.jsx("div",{onClick:()=>b(T),className:`p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ${(w==null?void 0:w.id)===T.id?"border-green-500 bg-green-500/10":"border-gray-600 bg-gray-700 hover:border-gray-500"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium",children:T.title}),a.jsxs("p",{className:"text-sm text-gray-400",children:[N(T),"   ",I(T)," "]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:T.description})]}),(w==null?void 0:w.id)===T.id&&a.jsx(Qt,{className:"w-5 h-5 text-green-400"})]})},T.id))})]})})]}),(x||w)&&a.jsx(it,{variant:"dark",className:"border-gray-700 mt-8",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-lg font-bold text-white mb-4",children:" "}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[x&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-400 mb-2",children:x.name}),a.jsxs("div",{className:"text-sm text-gray-400",children:[L(x)," "]})]}),w&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400 mb-2",children:w.title}),a.jsxs("div",{className:"text-sm text-gray-400",children:[N(w)," "]})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-400 mb-2",children:[w?I(w):0," "]}),a.jsx("div",{className:"text-sm text-gray-400",children:" "})]})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs(ut,{onClick:k,disabled:!x||!w||s,variant:"primary",size:"lg",className:"flex items-center space-x-2 mx-auto",children:[s?a.jsx(rs,{size:"sm"}):a.jsx(jn,{className:"w-5 h-5"}),a.jsx("span",{children:s?" ...":" "})]})})]})})]})]})},Pq=()=>{var Ds,ma;const{sessionId:t}=Ix(),e=ns(),{currentUser:r}=Ns(),{role:n}=jb(),[s,i]=S.useState(null),[o,l]=S.useState(null),[u,h]=S.useState(0),[f,p]=S.useState(!1),[x,v]=S.useState(!1),[w,b]=S.useState(!1),[_,R]=S.useState(!0),[j,k]=S.useState([]),[F,L]=S.useState(!1),[I,N]=S.useState(!0),[T,P]=S.useState(!1),[B,z]=S.useState(!0),[O,D]=S.useState(!1),[G,Q]=S.useState([]),[ue,H]=S.useState([]),[te,K]=S.useState({}),[ce,U]=S.useState(0),[M,X]=S.useState(null),[Y,Z]=S.useState({}),[fe,ie]=S.useState([]),[me,pe]=S.useState(!0),[we,Xe]=S.useState(!1),[re,Ze]=S.useState([]),[Fe,ge]=S.useState(!0),[be,se]=S.useState("live"),[ve,Me]=S.useState([]),[Re,ze]=S.useState({totalStudents:0,activeStudents:0,averageEngagement:0,questionsAnswered:0}),nt=()=>{i(null),l(null),k([]),Me([]),ze({totalStudents:0,activeStudents:0,averageEngagement:0,questionsAnswered:0})};if(S.useEffect(()=>{if(!r){Ir("UNAUTHORIZED_ACCESS_ATTEMPT",{role:"none"},{component:"LessonController"});return}const pt=A2({role:n},"control_lessons");if(!pt.success){Ir("INSUFFICIENT_PERMISSIONS",{role:n,uid:r.uid},{component:"LessonController",reason:pt.message}),Ie.error("    "),e("/teacher/dashboard");return}vt()},[r,n,t,e]),S.useEffect(()=>{if(!t||!r)return;console.log(" Setting up real-time session listener for:",t);const pt=Eg(t,Wt=>{Wt?i(cr=>{var Sr,Cn,Hn;return!cr||((Sr=cr.connectedStudents)==null?void 0:Sr.length)!==((Cn=Wt.connectedStudents)==null?void 0:Cn.length)||cr.currentSlide!==Wt.currentSlide||cr.status!==Wt.status?(console.log(" Session updated:",{connectedStudents:((Hn=Wt.connectedStudents)==null?void 0:Hn.length)||0,currentSlide:Wt.currentSlide,status:Wt.status}),Wt):cr}):(console.log(" Session not found or ended"),Ie.error("    "),e("/teacher/dashboard"))});return()=>{console.log(" Cleaning up session listener for:",t),pt(),nt()}},[t,r]),!cg({role:n}))return Ir("STUDENT_ACCESS_ATTEMPT",{role:n,uid:r==null?void 0:r.uid},{component:"LessonController"}),a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-red-400",children:"    "})});const vt=async()=>{try{const pt=await Ab(t);i(pt),h(pt.currentSlide||0);let Wt=null;try{if(Wt=await kg(pt.lessonId),Wt&&Wt.slides&&Wt.slides.length>0)Wt={...Wt,content:{slides:Wt.slides}};else throw new Error("No slides found in database")}catch(cr){console.error("Failed to load lesson from database:",cr),Ie.error("    "),e("/teacher/dashboard");return}if(l(Wt),r!=null&&r.uid){const cr=await ug(r.uid,pt.lessonId.toString()),Sr={};cr.forEach(Cn=>{Sr[Cn.slideId]=Cn.content}),K(Sr)}R(!1)}catch(pt){console.error("Error loading session:",pt),R(!1)}};S.useEffect(()=>{var Sr,Cn;if(!(s!=null&&s.startTime)){U(0);return}const pt=((Cn=(Sr=s.startTime)==null?void 0:Sr.toDate)==null?void 0:Cn.call(Sr))||new Date(s.startTime),Wt=Math.floor((Date.now()-pt.getTime())/1e3);U(Wt);const cr=setInterval(()=>{const Hn=Math.floor((Date.now()-pt.getTime())/1e3);U(Hn)},1e3);return()=>clearInterval(cr)},[s==null?void 0:s.startTime]);const Le=()=>{p(!f),Ie.success(f?" ":" ")},ye=async()=>{if(o&&u<o.slides.length-1){const pt=u+1;h(pt),await kc(t,pt)}},Ee=async()=>{if(u>0){const pt=u-1;h(pt),await kc(t,pt)}},et=()=>{v(!x),x?document.exitFullscreen():document.documentElement.requestFullscreen()},lt=()=>{b(!w),Ie.success(w?" ":" ")},Lt=()=>{z(!B),Ie.success(B?"   ":"   ")},mt=()=>{D(!O),Ie.success(O?"   ":"   ")},Mt=async()=>{try{await Uf(t),e("/teacher/dashboard")}catch(pt){console.error("Error ending session:",pt)}},hr=pt=>{const Wt=j.find(cr=>cr.id===pt);Ie.success(` ${Wt.name}`)},Jt=pt=>{var Hn;if(!pt)return"00:00";const Wt=((Hn=pt==null?void 0:pt.toDate)==null?void 0:Hn.call(pt))||new Date(pt),cr=Math.floor((Date.now()-Wt.getTime())/1e3),Sr=Math.floor(cr/60),Cn=cr%60;return`${Sr.toString().padStart(2,"0")}:${Cn.toString().padStart(2,"0")}`},Vr=()=>{ge(!Fe),Ie.success(Fe?"   ":"  ")},wr=async()=>{try{await kc(t,u),Ie.success("    ")}catch(pt){console.error("Error forcing slide sync:",pt),Ie.error("  ")}},Xr=()=>{const pt=be==="live"?"individual":"live";se(pt),Ie.success(pt==="live"?"   ":"   ")};if(_)return a.jsx(rs,{});if(!s||!o)return a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Session Not Found"}),a.jsx("p",{className:"text-gray-400",children:"The requested session could not be loaded."})]})});const sn=(Ds=o==null?void 0:o.slides)==null?void 0:Ds[u],$n=sn?te[sn.id]:null;return a.jsxs("div",{className:"min-h-screen bg-gray-900",children:[a.jsx("div",{className:"bg-gray-800 border-b border-gray-700 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-green-400 font-medium",children:"LIVE"})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-white",children:s.lessonName}),a.jsxs("p",{className:"text-gray-300 text-sm",children:[s.className,"  ",s.activeStudents||0,"  "]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${be==="live"?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-green-600/20 text-green-300 border border-green-500/30"}`,children:be==="live"?" ":" "})}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${Fe?"bg-red-600/20 text-red-300 border border-red-500/30":"bg-green-600/20 text-green-300 border border-green-500/30"}`,children:Fe?" ":" "})}),a.jsxs("div",{className:"flex items-center space-x-2 text-gray-300",children:[a.jsx(Al,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:Jt(s.startTime)})]}),a.jsx(ut,{onClick:Mt,variant:"danger",size:"sm",children:" "})]})]})}),a.jsx("div",{className:"bg-gray-700/50 border-b border-gray-600 p-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(ut,{onClick:Xr,variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:be==="live"?" ":" "}),a.jsxs(ut,{onClick:Vr,variant:Fe?"danger":"success",size:"sm",className:"flex items-center space-x-2",children:[Fe?a.jsx(Uc,{className:"w-4 h-4"}):a.jsx(nx,{className:"w-4 h-4"}),a.jsx("span",{children:Fe?" ":" "})]}),a.jsxs(ut,{onClick:wr,variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Rr,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-300",children:[a.jsxs("span",{children:[" : ",ve.length]}),a.jsxs("span",{children:[" : ",Re.averageEngagement,"%"]}),a.jsxs("span",{children:[" : ",Re.questionsAnswered]})]})]})}),a.jsxs("div",{className:"flex h-screen",children:[a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"flex-1 bg-gray-900 p-8 flex items-center justify-center relative",children:[a.jsx("div",{className:"w-full max-w-4xl",children:o&&o.slides&&o.slides[u]?a.jsxs("div",{className:"bg-white rounded-lg shadow-2xl p-8 min-h-96",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:o.slides[u].title||` ${u+1}`}),a.jsxs("p",{className:"text-gray-600 text-sm",children:[o.title,"   ",u+1,"  ",o.slides.length]})]}),a.jsxs("div",{className:"prose prose-lg max-w-none",children:[o.slides[u].content&&a.jsx("div",{className:"text-gray-700",dangerouslySetInnerHTML:{__html:typeof o.slides[u].content=="string"?o.slides[u].content:JSON.stringify(o.slides[u].content)}}),o.slides[u].type==="video"&&o.slides[u].videoUrl&&a.jsx("div",{className:"mt-4",children:a.jsx("video",{className:"w-full rounded-lg",controls:!0,src:o.slides[u].videoUrl,children:"Your browser does not support the video tag."})}),o.slides[u].type==="quiz"&&a.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[a.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:":"}),a.jsx("p",{className:"text-blue-700",children:o.slides[u].question})]})]})]}):a.jsx("div",{className:"text-center text-gray-400",children:a.jsx("p",{children:"  "})})}),a.jsx("button",{onClick:et,className:"absolute top-4 right-4 p-2 bg-gray-800/50 hover:bg-gray-700/50 rounded-lg text-gray-300 hover:text-white transition-colors",children:x?a.jsx(O2,{className:"w-5 h-5"}):a.jsx(L2,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"bg-gray-800/50 border-t border-gray-700 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(ut,{onClick:Ee,disabled:u===0,variant:"secondary",size:"sm",children:a.jsx(V2,{className:"w-4 h-4"})}),a.jsxs(ut,{onClick:Le,variant:"primary",size:"lg",className:"flex items-center space-x-2",children:[f?a.jsx(Cd,{className:"w-5 h-5"}):a.jsx(jn,{className:"w-5 h-5"}),a.jsx("span",{children:f?"":""})]}),a.jsx(ut,{onClick:ye,disabled:u===o.slides.length-1,variant:"secondary",size:"sm",children:a.jsx(B2,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(ut,{onClick:lt,variant:"secondary",size:"sm",children:w?a.jsx(z3,{className:"w-4 h-4"}):a.jsx(U3,{className:"w-4 h-4"})}),a.jsx(ut,{onClick:Lt,variant:B?"secondary":"danger",size:"sm",children:B?a.jsx($B,{className:"w-4 h-4"}):a.jsx(zB,{className:"w-4 h-4"})}),a.jsx(ut,{onClick:mt,variant:O?"secondary":"danger",size:"sm",children:O?a.jsx(q2,{className:"w-4 h-4"}):a.jsx(JB,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("span",{className:"text-sm text-gray-300",children:[u+1," / ",o.slides.length]}),a.jsx("div",{className:"w-32 bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(u+1)/o.slides.length*100}%`}})})]})]})})]}),a.jsxs("div",{className:"w-96 bg-gray-800/50 border-l border-gray-700 overflow-y-auto",children:[G.length>0&&a.jsxs("div",{className:"p-4 border-b border-gray-700",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center space-x-2",children:[a.jsx(IB,{className:"w-5 h-5 text-yellow-400"}),a.jsxs("span",{children:["  (",G.length,")"]})]}),a.jsx("div",{className:"space-y-3",children:G.map(pt=>a.jsx(it,{className:"p-3 bg-yellow-500/10 border-yellow-500/20",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:pt.name}),a.jsx("p",{className:"text-yellow-300 text-sm",children:pt.question}),a.jsxs("p",{className:"text-gray-400 text-xs",children:[Math.floor((Date.now()-pt.time.getTime())/1e3/60)," "]})]}),a.jsx(ut,{onClick:()=>hr(pt.id),variant:"secondary",size:"sm",children:""})]})},pt.id))})]}),ue.length>0&&a.jsxs("div",{className:"p-4 border-b border-gray-700",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center space-x-2",children:[a.jsx(bs,{className:"w-5 h-5 text-blue-400"}),a.jsxs("span",{children:["  (",ue.length,")"]})]}),a.jsx("div",{className:"space-y-3",children:ue.map(pt=>a.jsxs(it,{className:"p-3 bg-blue-500/10 border-blue-500/20",children:[a.jsx("p",{className:"text-white font-medium mb-2",children:pt.question}),a.jsx("div",{className:"space-y-2",children:pt.answers.map((Wt,cr)=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700/50 rounded",children:[a.jsx("span",{className:"text-gray-300 text-sm",children:Wt}),a.jsxs("span",{className:"text-blue-400 text-xs",children:[Math.round(pt.responses/s.activeStudents*100),"%"]})]},cr))}),a.jsxs("p",{className:"text-gray-400 text-xs mt-2",children:[pt.responses,"   ",s.activeStudents," "]})]},pt.id))})]}),a.jsxs("div",{className:"p-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center space-x-2",children:[a.jsx(Rr,{className:"w-5 h-5"}),a.jsxs("span",{children:[" (",((ma=s.connectedStudents)==null?void 0:ma.length)||0,")"]})]}),a.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:s.connectedStudents&&s.connectedStudents.length>0?s.connectedStudents.map(pt=>a.jsx("div",{className:"p-3 rounded-lg border bg-green-500/10 border-green-500/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:pt.name}),a.jsx("p",{className:"text-sm text-gray-400",children:" "})]})}),a.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]})},pt.id)):a.jsx("div",{className:"p-4 text-center",children:a.jsx("p",{className:"text-gray-400",children:"  "})})})]})]})]}),$n&&a.jsxs("div",{className:"fixed bottom-4 right-4 max-w-md bg-yellow-900/90 backdrop-blur-sm rounded-lg p-4 border border-yellow-700",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Gs,{className:"w-4 h-4 text-yellow-400"}),a.jsx("span",{className:"text-yellow-400 font-medium text-sm",children:"Teacher Notes"})]}),a.jsx("p",{className:"text-yellow-200 text-sm",children:$n})]})]})},Dq=()=>{var Xe,re,Ze,Fe,ge,be;const{sessionId:t}=Ix(),e=ns(),{currentUser:r,trackSlideEngagement:n}=Ns(),[s,i]=S.useState(null),[o,l]=S.useState(null),[u,h]=S.useState(0),[f,p]=S.useState(!0),[x,v]=S.useState(!1),[w,b]=S.useState(!1),[_,R]=S.useState({}),[j,k]=S.useState(new Set),[F,L]=S.useState([]),[I,N]=S.useState(""),[T,P]=S.useState(!1),[B,z]=S.useState(""),[O,D]=S.useState({slidesViewed:0,interactions:0,timeSpent:0}),[G,Q]=S.useState(!1),[ue,H]=S.useState("individual"),[te,K]=S.useState(!1);S.useEffect(()=>{t&&r&&ce()},[t,r]),S.useEffect(()=>{if(s){let se=null,ve=0;const Me=3,Re=()=>{try{console.log(" Setting up session listener for student session:",t),se=Eg(t,ze=>{var nt;if(ze){console.log(" Session updated:",ze.lessonName),i(ze);const vt=ze.currentSlide||0,Le=ze.status==="active"&&ze.teacherId;if(Q(Le),H(Le?"live":"individual"),K(Le),Le&&h(vt),o&&((nt=o.slides)!=null&&nt[vt])){const ye=o.slides[vt];ye.id&&!j.has(ye.id)&&(n(o.originalId,ye.id),k(Ee=>new Set([...Ee,ye.id])),console.log(" Live Session Slide Engagement:",{sessionId:t,lessonId:o.originalId,slideId:ye.id,slideTitle:ye.title,totalSlidesEngaged:j.size+1}))}Le||h(vt),ve=0}else console.log(" Session ended or not found"),Ie.error(" "),e("/student/dashboard")})}catch(ze){console.error(" Error setting up session listener:",ze),ve++,ve<Me?(console.log(` Retrying session listener (${ve}/${Me})...`),setTimeout(Re,2e3*ve)):(console.error(" Max retries reached for session listener"),Ie.error("   "))}};return Re(),()=>{se&&(console.log(" Cleaning up session listener"),se())}}},[t,e,o,n,j]);const ce=async()=>{try{p(!0);const se=await Ab(t);i(se);const ve=await kg(se.lessonId);ve.slides&&ve.slides.sort((Me,Re)=>{const ze=Me.order??Me.sortOrder??0,nt=Re.order??Re.sortOrder??0;return ze-nt}),l(ve),h(se.currentSlide||0),p(!1)}catch(se){console.error("Error loading session:",se),Ie.error("   "),e("/student/dashboard")}},U=async()=>{if(!s||!r){console.warn("[handleJoinSession] Missing session or currentUser",{session:s,currentUser:r});return}console.log("[handleJoinSession] Called",{sessionId:t,studentId:r.uid,studentName:r.displayName||r.email,session:s,currentUser:r});try{v(!0);const se=await DW(t,r.uid,r.displayName||r.email);console.log("[handleJoinSession] joinSession success",{result:se}),b(!0),Ie.success("  !")}catch(se){console.error("[handleJoinSession] Error joining session:",se),Ie.error("   "),v(!1)}},M=async()=>{if(!(!s||!r))try{await FW(t,r.uid),b(!1),Ie.success("  "),e("/student/dashboard")}catch(se){console.error("Error leaving session:",se),Ie.error("   ")}},X=(se,ve)=>{R(Me=>({...Me,[se]:ve})),o&&se&&!j.has(se)&&(n(o.originalId,se),k(Me=>new Set([...Me,se])),console.log(" Live Session Answer Submitted:",{sessionId:t,lessonId:o.originalId,slideId:se,answer:ve,totalSlidesEngaged:j.size+1}))},Y=()=>s?s.status==="ended"?"ended":s.isLocked?"locked":"active":"loading",Z=se=>{if(!se)return"0 ";const ve=Date.now()-se.toDate().getTime();return`${Math.floor(ve/(1e3*60))} `},fe=se=>{switch(o&&se.id&&!j.has(se.id)&&(n(o.originalId,se.id),k(ve=>new Set([...ve,se.id]))),se.type){case"presentation":return a.jsx(Ld,{slide:se});case"poll":return a.jsx(T0,{slide:se,onAnswer:X,answers:_});case"quiz":return a.jsx(R0,{slide:se,onAnswer:X,answers:_});case"video":return a.jsx(j0,{slide:se,onAnswer:X,answers:_});case"interactive":return a.jsx(A0,{slide:se,onAnswer:X,answers:_});case"break":return a.jsx(C0,{slide:se});case"reflection":return a.jsx(I0,{slide:se,onAnswer:X,answers:_});default:return a.jsx(Ld,{slide:se})}};S.useCallback((se,ve={})=>{D(Me=>({...Me,interactions:Me.interactions+1}));try{const Me=bt(He,"sessions",t);Un(Me,{studentEngagement:{[r.uid]:{[se]:{timestamp:Ft(),data:ve}}}})}catch(Me){console.error("Error tracking engagement:",Me)}},[t,r.uid]);const ie=()=>{if(te){Ie.error("     ");return}if(o&&u<o.slides.length-1){const se=u+1;h(se),G&&kc(t,se)}},me=()=>{if(te){Ie.error("     ");return}if(u>0){const se=u-1;h(se),G&&kc(t,se)}};if(f)return a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx(rs,{size:"lg"})});if(!s||!o)return a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(To,{className:"w-16 h-16 mx-auto mb-4 text-red-400"}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"  "}),a.jsx("p",{className:"text-gray-400 mb-4",children:"        "}),a.jsx(ut,{onClick:()=>e("/student/dashboard"),variant:"primary",children:" "})]})});const pe=Y(),we=(Xe=o.slides)==null?void 0:Xe[u];return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:[a.jsx(k0,{}),a.jsx("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(ut,{onClick:M,variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Bc,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-white",children:s.lessonName}),a.jsxs("p",{className:"text-gray-300 text-sm",children:[s.className,"  ",((re=s.connectedStudents)==null?void 0:re.length)||0,"  "]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-gray-300",children:[a.jsx(Al,{className:"w-4 h-4"}),a.jsx("span",{children:Z(s.startTime)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[pe==="active"&&a.jsxs("div",{className:"flex items-center space-x-1 text-green-400",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-sm",children:""})]}),pe==="paused"&&a.jsxs("div",{className:"flex items-center space-x-1 text-yellow-400",children:[a.jsx(Cd,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:""})]}),pe==="ended"&&a.jsxs("div",{className:"flex items-center space-x-1 text-red-400",children:[a.jsx(Qt,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:""})]})]})]})]})}),G&&a.jsx("div",{className:"bg-blue-600/20 border-b border-blue-500/30 p-3",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-300",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),a.jsx("span",{className:"font-medium",children:"  -   "}),te&&a.jsx("span",{className:"text-xs bg-blue-500/30 px-2 py-1 rounded",children:" "})]})}),ue==="individual"&&a.jsx("div",{className:"bg-green-600/20 border-b border-green-500/30 p-3",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-300",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),a.jsx("span",{className:"font-medium",children:"  -   "})]})}),pe==="locked"&&a.jsx("div",{className:"bg-yellow-600/20 border-b border-yellow-500/30 p-3",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-yellow-300",children:[a.jsx(Uc,{className:"w-4 h-4"}),a.jsx("span",{children:"  -   "})]})}),pe==="ended"&&a.jsx("div",{className:"bg-red-600/20 border-b border-red-500/30 p-3",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-red-300",children:[a.jsx(Qt,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})}),a.jsx("div",{className:"flex-1 relative",children:w?a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"bg-gray-800/50 border-b border-gray-700 p-2",children:a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-300",children:[a.jsxs("span",{children:[" ",u+1,"  ",((Ze=o.slides)==null?void 0:Ze.length)||0]}),a.jsxs("span",{children:[" : ",j.size]})]})}),a.jsx("div",{className:"p-6",children:we?a.jsx("div",{className:"max-w-4xl mx-auto",children:fe(we)}):a.jsx("div",{className:"text-center text-gray-400",children:a.jsx("p",{children:"  "})})}),a.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-gray-800/90 backdrop-blur-sm rounded-full p-2 border border-gray-600/50",children:a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsx("button",{onClick:me,disabled:u===0||te,className:`p-3 rounded-full transition-all duration-200 ${u===0||te?"bg-gray-600/50 text-gray-400 cursor-not-allowed":"bg-blue-600/80 hover:bg-blue-500 text-white hover:scale-110"}`,title:te?"  ":" ",children:a.jsx(Bc,{className:"w-5 h-5"})}),a.jsx("div",{className:"px-4 py-2 bg-gray-700/50 rounded-full",children:a.jsxs("span",{className:"text-white text-sm font-medium",children:[u+1," / ",((Fe=o.slides)==null?void 0:Fe.length)||0]})}),a.jsx("button",{onClick:ie,disabled:u===(((ge=o.slides)==null?void 0:ge.length)||0)-1||te,className:`p-3 rounded-full transition-all duration-200 ${u===(((be=o.slides)==null?void 0:be.length)||0)-1||te?"bg-gray-600/50 text-gray-400 cursor-not-allowed":"bg-blue-600/80 hover:bg-blue-500 text-white hover:scale-110"}`,title:te?"  ":" ",children:a.jsx(hg,{className:"w-5 h-5"})})]})}),te&&a.jsx("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-yellow-600/90 backdrop-blur-sm rounded-lg p-3 border border-yellow-500/50",children:a.jsxs("div",{className:"flex items-center space-x-2 text-yellow-200 text-sm",children:[a.jsx(Uc,{className:"w-4 h-4"}),a.jsx("span",{children:"   -  "})]})})]}):a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(it,{className:"max-w-md w-full",children:a.jsxs("div",{className:"text-center p-6",children:[a.jsx(Rr,{className:"w-16 h-16 mx-auto mb-4 text-blue-400"}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:" "}),a.jsx("p",{className:"text-gray-400 mb-6",children:"        "}),a.jsx(ut,{onClick:U,disabled:x,variant:"primary",className:"w-full",children:x?"...":" "})]})})})})]})};let zy=null,$y=null;const Fq=30*1e3,T6=async(t=!1)=>{try{if(!t&&zy&&$y&&Date.now()-$y<Fq)return zy;const[e,r,n,s]=await Promise.all([zt(Dt(He,"users")),zt(Dt(He,"lessons")),zt(Dt(He,"sessions")),zt(nr(Dt(He,"security_logs"),ca("timestamp","desc"),no(100)))]);let i=0,o=0,l=0,u=0,h=0,f=0;const p=new Date(Date.now()-7*24*60*60*1e3);e.forEach(N=>{var P,B,z,O;const T=N.data();switch(i++,T.role){case"student":o++;break;case"teacher":l++;break;case"system_manager":u++;break;default:o++;break}((B=(P=T.lastLogin)==null?void 0:P.toDate)==null?void 0:B.call(P))>new Date(Date.now()-24*60*60*1e3)&&h++,((O=(z=T.createdAt)==null?void 0:z.toDate)==null?void 0:O.call(z))>p&&f++});const x=r.size;let v=0;const w=[];console.log(` Processing ${x} lessons for analytics...`);for(const N of r.docs){const T=N.data(),B=(await zt(Dt(He,"lessons",N.id,"slides"))).docs;v+=B.length,console.log(` Lesson ${N.id}: ${B.length} slides`),w.push({id:N.id,title:T.title,slideCount:B.length,difficulty:T.difficulty,targetAge:T.targetAge})}console.log(` Total slides found: ${v}`);const b=n.size;let _=0,R=0;n.forEach(N=>{const T=N.data();T.status==="active"?_++:T.status==="completed"&&R++});const j=s.docs.slice(0,10).map(N=>{var P,B;const T=N.data();return{id:N.id,type:T.type||T.eventType||"security",message:T.description||T.message||T.action||"Security event",timestamp:((B=(P=T.timestamp)==null?void 0:P.toDate)==null?void 0:B.call(P))||new Date,userId:T.userId||T.userEmail||T.user||"System",action:T.action||T.eventType||"security_event"}}),k=new Date(Date.now()-24*60*60*1e3),F=e.docs.filter(N=>{var B,z,O,D;const T=N.data(),P=((z=(B=T.lastActivityAt)==null?void 0:B.toDate)==null?void 0:z.call(B))||((D=(O=T.lastLogin)==null?void 0:O.toDate)==null?void 0:D.call(O));return P&&P>k});console.log(` Found ${F.length} active users today`);const L=await Lq(),I={users:{total:i,students:o,teachers:l,systemManagers:u,active:h,newThisWeek:f,growthRate:i>0?(f/i*100).toFixed(1):0},content:{totalLessons:x,totalSlides:v,lessonStats:w,averageSlidesPerLesson:x>0?(v/x).toFixed(1):0},sessions:{total:b,active:_,completed:R,completionRate:b>0?(R/b*100).toFixed(1):0},activities:{recent:j,totalToday:j.filter(N=>N.timestamp>new Date(Date.now()-24*60*60*1e3)).length+F.length},system:L,lastUpdated:new Date};return zy=I,$y=Date.now(),I}catch{throw new Error("Failed to load system statistics")}},Lq=async()=>{try{const t=await Promise.allSettled([ur(bt(He,"system","health")),zt(nr(Dt(He,"users"),no(1))),Promise.resolve(!0),Sn(bt(He,"system","health-check"),{timestamp:Ft()})]),e={database:t[0].status==="fulfilled"?"online":"offline",auth:t[1].status==="fulfilled"?"online":"offline",storage:t[2].status==="fulfilled"?"online":"offline",realtime:t[3].status==="fulfilled"?"online":"offline"},r=Object.values(e).every(n=>n==="online");return{status:e,overall:r?"healthy":"degraded",lastChecked:new Date}}catch{return{status:{database:"unknown",auth:"unknown",storage:"unknown",realtime:"unknown"},overall:"unknown",lastChecked:new Date}}},Oq=async()=>{try{const t=Dt(He,"securityEvents"),e=nr(t,ca("timestamp","desc"),no(50)),r=await zt(e),n=Dt(He,"userActivities"),s=nr(n,ca("timestamp","desc"),no(50)),i=await zt(s),o=Dt(He,"sessions"),l=nr(o,yr("status","==","active")),u=await zt(l);return{security:{events:r.docs.map(f=>{var p,x;return{id:f.id,...f.data(),timestamp:((x=(p=f.data().timestamp)==null?void 0:p.toDate)==null?void 0:x.call(p))||new Date}}),criticalCount:r.docs.filter(f=>f.data().severity==="critical").length,warningCount:r.docs.filter(f=>f.data().severity==="warning").length},activities:{recent:i.docs.map(f=>{var p,x;return{id:f.id,...f.data(),timestamp:((x=(p=f.data().timestamp)==null?void 0:p.toDate)==null?void 0:x.call(p))||new Date}}),totalToday:i.docs.filter(f=>{var p,x;return((x=(p=f.data().timestamp)==null?void 0:p.toDate)==null?void 0:x.call(p))>new Date(Date.now()-24*60*60*1e3)}).length},sessions:{active:u.docs.map(f=>{var p,x;return{id:f.id,...f.data(),timestamp:((x=(p=f.data().timestamp)==null?void 0:p.toDate)==null?void 0:x.call(p))||new Date}}),count:u.size},lastUpdated:new Date}}catch{throw new Error("Failed to load system monitoring data")}},Mq=t=>{try{return Jd(Dt(He,"securityEvents"),r=>{const n=r.docs.map(s=>{var i,o;return{id:s.id,...s.data(),timestamp:((o=(i=s.data().timestamp)==null?void 0:i.toDate)==null?void 0:o.call(i))||new Date}});t({type:"security_events",data:n,timestamp:new Date})},r=>{})}catch{return()=>{}}},Vq=async(t="7d")=>{try{const e=new Date;let r;switch(t){case"24h":r=new Date(e.getTime()-24*60*60*1e3);break;case"7d":r=new Date(e.getTime()-7*24*60*60*1e3);break;case"30d":r=new Date(e.getTime()-30*24*60*60*1e3);break;default:r=new Date(e.getTime()-7*24*60*60*1e3)}const n=Dt(He,"users"),s=nr(n,yr("createdAt",">=",tn.fromDate(r)),ca("createdAt","desc")),i=await zt(s),o=Dt(He,"userActivities"),l=nr(o,yr("timestamp",">=",tn.fromDate(r)),ca("timestamp","desc")),u=await zt(l),h={timeRange:t,users:{new:i.size,byRole:{students:0,teachers:0,systemManagers:0}},activities:{total:u.size,byType:{}},trends:{daily:[],weekly:[]}};return i.forEach(f=>{switch(f.data().role){case"student":h.users.byRole.students++;break;case"teacher":h.users.byRole.teachers++;break;case"system_manager":h.users.byRole.systemManagers++;break}}),u.forEach(f=>{const p=f.data(),x=p.type||p.action||"unknown";h.activities.byType[x]=(h.activities.byType[x]||0)+1}),h}catch{throw new Error("Failed to load user analytics")}},Bq=async(t="all")=>{try{const e={};if(t==="all"||t==="users"){const r=await zt(Dt(He,"users"));e.users=r.docs.map(n=>{var s,i,o,l,u,h;return{id:n.id,...n.data(),createdAt:((i=(s=n.data().createdAt)==null?void 0:s.toDate)==null?void 0:i.call(s))||null,lastLogin:((l=(o=n.data().lastLogin)==null?void 0:o.toDate)==null?void 0:l.call(o))||null,updatedAt:((h=(u=n.data().updatedAt)==null?void 0:u.toDate)==null?void 0:h.call(u))||null}})}if(t==="all"||t==="lessons"){const r=await zt(Dt(He,"lessons"));e.lessons=r.docs.map(n=>{var s,i,o,l;return{id:n.id,...n.data(),createdAt:((i=(s=n.data().createdAt)==null?void 0:s.toDate)==null?void 0:i.call(s))||null,updatedAt:((l=(o=n.data().updatedAt)==null?void 0:o.toDate)==null?void 0:l.call(o))||null}})}if(t==="all"||t==="sessions"){const r=await zt(Dt(He,"sessions"));e.sessions=r.docs.map(n=>{var s,i,o,l;return{id:n.id,...n.data(),createdAt:((i=(s=n.data().createdAt)==null?void 0:s.toDate)==null?void 0:i.call(s))||null,updatedAt:((l=(o=n.data().updatedAt)==null?void 0:o.toDate)==null?void 0:l.call(o))||null}})}if(t==="all"||t==="logs"){const r=await zt(Dt(He,"securityEvents"));e.logs=r.docs.map(n=>{var s,i;return{id:n.id,...n.data(),timestamp:((i=(s=n.data().timestamp)==null?void 0:s.toDate)==null?void 0:i.call(s))||null}})}return e.exportInfo={timestamp:new Date,dataType:t,totalRecords:Object.values(e).reduce((r,n)=>r+(Array.isArray(n)?n.length:0),0)},e}catch{throw new Error("Failed to export system data")}},Uq=({isOpen:t,onClose:e,onSuccess:r})=>{const[n,s]=S.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",grade:"",school:"",phone:""}),[i,o]=S.useState(!1),[l,u]=S.useState({}),h=v=>{const{name:w,value:b}=v.target;s(_=>({..._,[w]:b})),l[w]&&u(_=>({..._,[w]:""}))},f=()=>{const v={};return n.firstName.trim()||(v.firstName="    "),n.lastName.trim()||(v.lastName="    "),n.email.trim()?/\S+@\S+\.\S+/.test(n.email)||(v.email="  "):v.email="   ",n.password?n.password.length<6&&(v.password="    6 "):v.password="   ",n.password!==n.confirmPassword&&(v.confirmPassword="  "),n.grade.trim()||(v.grade="   "),u(v),Object.keys(v).length===0},p=async v=>{if(v.preventDefault(),!!f()){o(!0);try{const w=`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,b={uid:w,email:n.email.toLowerCase(),displayName:`${n.firstName} ${n.lastName}`,role:"student",firstName:n.firstName,lastName:n.lastName,grade:n.grade,school:n.school||"",phone:n.phone||"",classId:null,teacherId:null,progress:{1:{completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date}},completedLessons:[],currentLesson:1,totalTimeSpent:0,totalPagesEngaged:0,achievements:[],streak:0,password:n.password,hasFirebaseAuth:!1,isActive:!0,createdAt:Ft(),lastLogin:null,lastActivityDate:Ft(),updatedAt:Ft()};await Sn(bt(He,"users",w),b),Ir("STUDENT_CREATED",{studentId:w,studentEmail:n.email,createdBy:"system_manager",timestamp:new Date().toISOString()}),Ie.success("  !    ."),s({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",grade:"",school:"",phone:""}),r&&r(w),e()}catch(w){console.error("Error creating student:",w);let b="   ";w.code==="permission-denied"?b="   ":w.message&&w.message.includes("already exists")&&(b="    "),Ie.error(b)}finally{o(!1)}}},x=()=>{i||(s({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",grade:"",school:"",phone:""}),u({}),e())};return a.jsx(bn,{children:t&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:x}),a.jsxs(Ke.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:a.jsx(ax,{className:"w-6 h-6 text-blue-400"})}),a.jsx("h2",{className:"text-xl font-bold text-white",children:"  "})]}),a.jsx("button",{onClick:x,disabled:i,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",children:a.jsx(Wr,{className:"w-5 h-5 text-gray-400"})})]}),a.jsx("div",{className:"mb-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:a.jsxs("p",{className:"text-blue-300 text-sm",children:[a.jsx(ax,{className:"w-4 h-4 inline mr-2"}),"       .     ."]})}),a.jsxs("form",{onSubmit:p,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"  *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Di,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",name:"firstName",value:n.firstName,onChange:h,className:`w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg border focus:outline-none focus:ring-2 ${l.firstName?"border-red-500 focus:ring-red-500":"border-gray-600 focus:ring-blue-500"}`,placeholder:" ",disabled:i})]}),l.firstName&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.firstName})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"  *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Di,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",name:"lastName",value:n.lastName,onChange:h,className:`w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg border focus:outline-none focus:ring-2 ${l.lastName?"border-red-500 focus:ring-red-500":"border-gray-600 focus:ring-blue-500"}`,placeholder:" ",disabled:i})]}),l.lastName&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.lastName})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:" *"}),a.jsxs("div",{className:"relative",children:[a.jsx(sx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"email",name:"email",value:n.email,onChange:h,className:`w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg border focus:outline-none focus:ring-2 ${l.email?"border-red-500 focus:ring-red-500":"border-gray-600 focus:ring-blue-500"}`,placeholder:"student@example.com",disabled:i})]}),l.email&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.email})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:" *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Uc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"password",name:"password",value:n.password,onChange:h,className:`w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg border focus:outline-none focus:ring-2 ${l.password?"border-red-500 focus:ring-red-500":"border-gray-600 focus:ring-blue-500"}`,placeholder:" 6 ",disabled:i})]}),l.password&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.password})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"  *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Uc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"password",name:"confirmPassword",value:n.confirmPassword,onChange:h,className:`w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg border focus:outline-none focus:ring-2 ${l.confirmPassword?"border-red-500 focus:ring-red-500":"border-gray-600 focus:ring-blue-500"}`,placeholder:" ",disabled:i})]}),l.confirmPassword&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.confirmPassword})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:" *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ff,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsxs("select",{name:"grade",value:n.grade,onChange:h,className:`w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg border focus:outline-none focus:ring-2 ${l.grade?"border-red-500 focus:ring-red-500":"border-gray-600 focus:ring-blue-500"}`,disabled:i,children:[a.jsx("option",{value:"",children:" "}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""})]})]}),l.grade&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.grade})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:" "}),a.jsx("input",{type:"text",name:"school",value:n.school,onChange:h,className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"  ",disabled:i})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:""}),a.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:h,className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"050-1234567",disabled:i})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(ut,{type:"button",onClick:x,variant:"secondary",className:"flex-1",disabled:i,children:""}),a.jsx(ut,{type:"submit",className:"flex-1",disabled:i,children:i?"...":" "})]})]})]})]})})},zq=({onClose:t,onSuccess:e})=>{const[r,n]=S.useState(""),[s,i]=S.useState([]),[o,l]=S.useState(""),[u,h]=S.useState(!1),[f,p]=S.useState([]),[x,v]=S.useState([]),[w,b]=S.useState(!0);S.useEffect(()=>{_()},[]);const _=async()=>{try{b(!0);const F=Dt(He,"users"),L=nr(F,yr("role","==","teacher")),I=await zt(L),N=[];I.forEach(z=>{const O=z.data();N.push({id:z.id,name:O.displayName||O.email,email:O.email})}),p(N);const T=nr(F,yr("role","==","student")),P=await zt(T),B=[];P.forEach(z=>{const O=z.data();B.push({id:z.id,name:O.displayName||O.email,email:O.email,assigned:!!O.teacherId})}),v(B)}catch(F){console.error("Error loading teachers and students:",F),Ie.error("   ")}finally{b(!1)}},R=x.filter(F=>F.name.toLowerCase().includes(o.toLowerCase())||F.email.toLowerCase().includes(o.toLowerCase())),j=F=>{i(L=>L.includes(F)?L.filter(I=>I!==F):[...L,F])},k=async F=>{var L;if(F.preventDefault(),!r){Ie.error("  ");return}if(s.length===0){Ie.error("  ");return}h(!0);try{const I=g0(He),N=r;for(const T of s){const B=bt(He,"users",T);I.update(B,{teacherId:N,updatedAt:Ft()})}await I.commit(),Ir("STUDENTS_ASSIGNED_TO_TEACHER",{teacherId:N,studentIds:s,assignedBy:(L=Ja.currentUser)==null?void 0:L.uid,timestamp:new Date().toISOString()}),Ie.success(`${s.length}   `),e()}catch(I){console.error("Error assigning students:",I),Ie.error("   ")}finally{h(!1)}};return a.jsx(bn,{children:a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:a.jsx(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center space-x-2",children:[a.jsx(Rr,{className:"w-5 h-5"}),a.jsx("span",{children:"  "})]}),a.jsx(ut,{onClick:t,variant:"secondary",size:"sm",className:"flex items-center space-x-1",children:a.jsx(Wr,{className:"w-4 h-4"})})]}),a.jsxs("form",{onSubmit:k,className:"space-y-6",children:[w?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-300",children:" ..."})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsxs("select",{value:r,onChange:F=>n(F.target.value),required:!0,className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"",children:" ..."}),f.map(F=>a.jsxs("option",{value:F.id,children:[F.name," (",F.email,")"]},F.id))]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("label",{className:"block text-gray-300 text-sm",children:" "}),a.jsxs("div",{className:"text-sm text-gray-400",children:[" ",s.length," "]})]}),a.jsxs("div",{className:"relative mb-4",children:[a.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:" ...",value:o,onChange:F=>l(F.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"})]}),a.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-600 rounded",children:R.map(F=>a.jsxs("div",{className:`flex items-center justify-between p-3 border-b border-gray-600 hover:bg-gray-700 cursor-pointer ${s.includes(F.id)?"bg-blue-600/20":""}`,onClick:()=>j(F.id),children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:s.includes(F.id),onChange:()=>j(F.id),className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white font-medium",children:F.name}),a.jsx("div",{className:"text-gray-400 text-sm",children:F.email})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[F.assigned&&a.jsx("span",{className:"text-green-400 text-xs",children:""}),a.jsx(W2,{className:"w-4 h-4 text-gray-400"})]})]},F.id))})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(ut,{type:"submit",disabled:u||w||!r||s.length===0,variant:"primary",className:"flex-1 flex items-center justify-center space-x-2",children:u?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Rr,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})}),a.jsx(ut,{onClick:t,variant:"secondary",className:"flex-1",children:""})]})]})]})})})})},$q=({user:t,onClose:e,onSuccess:r})=>{const[n,s]=S.useState(!1),[i,o]=S.useState(""),l=async()=>{var u;if(i!==""){Ie.error('  "" ');return}s(!0);try{const h=t.documentId||t.uid,f=bt(He,"users",h);await lg(f),Ir("USER_DELETED",{userId:h,userEmail:t.email,deletedBy:(u=Ja.currentUser)==null?void 0:u.uid,timestamp:new Date().toISOString()}),Ie.success("  "),r()}catch(h){console.error("Error deleting user:",h),Ie.error("   ")}finally{s(!1)}};return t?a.jsx(bn,{children:a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:a.jsx(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg w-full max-w-md",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-red-400 flex items-center space-x-2",children:[a.jsx(ua,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx(ut,{onClick:e,variant:"secondary",size:"sm",className:"flex items-center space-x-1",children:a.jsx(Wr,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(bs,{className:"w-5 h-5 text-red-400"}),a.jsx("span",{className:"text-red-400 font-semibold",children:"!"})]}),a.jsx("p",{className:"text-red-300 text-sm",children:"     .     ."})]}),a.jsx("div",{className:"bg-gray-700/50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-600 rounded-full flex items-center justify-center",children:a.jsx(Di,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white font-medium",children:t.displayName}),a.jsx("div",{className:"text-gray-400 text-sm",children:t.email}),a.jsx("div",{className:"text-gray-400 text-sm capitalize",children:t.role})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:' "" '}),a.jsx("input",{type:"text",value:i,onChange:u=>o(u.target.value),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-red-500 focus:outline-none",placeholder:""})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(ut,{onClick:l,disabled:n||i!=="",variant:"danger",className:"flex-1 flex items-center justify-center space-x-2",children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(ua,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})}),a.jsx(ut,{onClick:e,variant:"secondary",className:"flex-1",children:""})]})]})]})})})}):null},Hq=({user:t,onClose:e,onSuccess:r})=>{const[n,s]=S.useState({displayName:"",firstName:"",lastName:"",age:"",sex:"male",role:"student"}),[i,o]=S.useState(!1);S.useEffect(()=>{t&&s({displayName:t.displayName||"",firstName:t.firstName||"",lastName:t.lastName||"",age:t.age||"",sex:t.sex||"male",role:t.role||"student"})},[t]);const l=async h=>{var f;h.preventDefault(),o(!0);try{const p={displayName:n.displayName,firstName:n.firstName,lastName:n.lastName,role:n.role,updatedAt:Ft()};n.role==="student"&&(p.age=n.age?parseInt(n.age):null,p.sex=n.sex);const x=t.documentId||t.uid,v=bt(He,"users",x);await Un(v,p),Ir("USER_UPDATED",{userId:x,userEmail:t.email,updatedBy:(f=Ja.currentUser)==null?void 0:f.uid,updatedFields:Object.keys(p),timestamp:new Date().toISOString()}),Ie.success("  "),r()}catch(p){console.error("Error updating user:",p),Ie.error("   ")}finally{o(!1)}},u=h=>{s({...n,[h.target.name]:h.target.value})};return t?a.jsx(bn,{children:a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:a.jsx(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg w-full max-w-md",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center space-x-2",children:[a.jsx(Di,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx(ut,{onClick:e,variant:"secondary",size:"sm",className:"flex items-center space-x-1",children:a.jsx(Wr,{className:"w-4 h-4"})})]}),a.jsxs("form",{onSubmit:l,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(sx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"email",value:t.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 bg-gray-700/50 text-gray-400 rounded border border-gray-600 cursor-not-allowed"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsxs("div",{className:"relative",children:[a.jsx(Di,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",name:"displayName",value:n.displayName,onChange:u,className:"w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",placeholder:" "})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsx("input",{type:"text",name:"firstName",value:n.firstName,onChange:u,className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",placeholder:" "})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsx("input",{type:"text",name:"lastName",value:n.lastName,onChange:u,className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",placeholder:" "})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(bB,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"number",name:"age",value:n.age,onChange:u,min:"1",max:"120",className:"w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",placeholder:""})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:""}),a.jsxs("select",{name:"sex",value:n.sex,onChange:u,className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"male",children:""}),a.jsx("option",{value:"female",children:""})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(RB,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsxs("select",{name:"role",value:n.role,onChange:u,className:"w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"student",children:""}),a.jsx("option",{value:"teacher",children:""}),a.jsx("option",{value:"system_manager",children:" "})]})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(ut,{type:"submit",disabled:i,variant:"primary",className:"flex-1 flex items-center justify-center space-x-2",children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(eh,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})}),a.jsx(ut,{onClick:e,variant:"secondary",className:"flex-1",children:""})]})]})]})})})}):null},j6=()=>{const{currentUser:t}=Fa(),[e,r]=S.useState([]),[n,s]=S.useState([]),[i,o]=S.useState(!0),[l,u]=S.useState(""),[h,f]=S.useState("all"),[p,x]=S.useState([]),[v,w]=S.useState(!1),[b,_]=S.useState(!1),[R,j]=S.useState(!1),[k,F]=S.useState(!1),[L,I]=S.useState(null);S.useEffect(()=>{N()},[]),S.useEffect(()=>{let H=e;h!=="all"&&(H=H.filter(te=>te.role===h)),l&&(H=H.filter(te=>{var K,ce,U,M;return((K=te.displayName)==null?void 0:K.toLowerCase().includes(l.toLowerCase()))||((ce=te.email)==null?void 0:ce.toLowerCase().includes(l.toLowerCase()))||((U=te.firstName)==null?void 0:U.toLowerCase().includes(l.toLowerCase()))||((M=te.lastName)==null?void 0:M.toLowerCase().includes(l.toLowerCase()))})),s(H)},[e,l,h]);const N=async()=>{try{o(!0);const H=Dt(He,"users"),te=await zt(H),K=[];te.forEach(ce=>{var X,Y,Z,fe,ie,me;const U=ce.data(),M=ce.id;K.push({uid:M,documentId:M,...U,createdAt:((Y=(X=U.createdAt)==null?void 0:X.toDate)==null?void 0:Y.call(X))||U.createdAt||new Date,lastLogin:((fe=(Z=U.lastLogin)==null?void 0:Z.toDate)==null?void 0:fe.call(Z))||U.lastLogin||new Date,updatedAt:((me=(ie=U.updatedAt)==null?void 0:ie.toDate)==null?void 0:me.call(ie))||U.updatedAt||new Date})}),K.sort((ce,U)=>{const M=ce.displayName||ce.email||"",X=U.displayName||U.email||"";return M.localeCompare(X)}),r(K),o(!1)}catch(H){console.error("Error loading users:",H),Ie.error("   "),o(!1)}},T=H=>{x(te=>te.includes(H)?te.filter(K=>K!==H):[...te,H])},P=()=>{p.length===n.length?x([]):x(n.map(H=>H.uid))},B=H=>{I(H),j(!0)},z=H=>{I(H),F(!0)},O=()=>{if(p.length===0){Ie.error("   ");return}j(!0)},D=()=>{const H=e.length,te=e.filter(U=>U.role==="student").length,K=e.filter(U=>U.role==="teacher").length,ce=e.filter(U=>U.role==="student"&&!U.teacherId).length;return{totalUsers:H,students:te,teachers:K,unassignedStudents:ce}},G=H=>new Date(H).toLocaleDateString("he-IL",{year:"numeric",month:"short",day:"numeric"}),Q=H=>{const te={student:{label:"",icon:Ff,color:"text-green-400"},teacher:{label:"",icon:ts,color:"text-blue-400"},system_manager:{label:" ",icon:ts,color:"text-purple-400"}};return te[H]||te.student};if(i)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(rs,{size:"lg"})});const ue=D();return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:" "}),a.jsx("p",{className:"text-gray-300",children:" ,  "})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(ut,{onClick:N,variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Ps,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsxs(ut,{onClick:()=>w(!0),variant:"primary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(ax,{className:"w-4 h-4"}),a.jsx("span",{children:"  "})]}),a.jsxs(ut,{onClick:()=>_(!0),variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Rr,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Rr,{className:"w-8 h-8 mx-auto mb-2 text-blue-400"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:ue.totalUsers}),a.jsx("div",{className:"text-sm text-gray-300",children:'" '})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ff,{className:"w-8 h-8 mx-auto mb-2 text-green-400"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:ue.students}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ts,{className:"w-8 h-8 mx-auto mb-2 text-purple-400"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:ue.teachers}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx(QB,{className:"w-8 h-8 mx-auto mb-2 text-orange-400"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:ue.unassignedStudents}),a.jsx("div",{className:"text-sm text-gray-300",children:"  "})]})})]}),a.jsx(it,{variant:"dark",children:a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"  , ...",value:l,onChange:H=>u(H.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none"})]})}),a.jsx("div",{className:"md:w-48",children:a.jsxs("select",{value:h,onChange:H=>f(H.target.value),className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"all",children:" "}),a.jsx("option",{value:"student",children:""}),a.jsx("option",{value:"teacher",children:""}),a.jsx("option",{value:"system_manager",children:" "})]})}),p.length>0&&a.jsx("div",{className:"flex space-x-2",children:a.jsxs(ut,{onClick:O,variant:"danger",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(ua,{className:"w-4 h-4"}),a.jsxs("span",{children:["  (",p.length,")"]})]})})]})})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-700",children:[a.jsx("th",{className:"text-right p-4",children:a.jsx("input",{type:"checkbox",checked:p.length===n.length&&n.length>0,onChange:P,className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-500"})}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:""}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:""}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:""}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:" "}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:" "}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:""})]})}),a.jsx("tbody",{children:n.map(H=>{var ce,U,M;const te=Q(H.role),K=p.includes(H.uid);return a.jsxs(Ke.tr,{initial:{opacity:0},animate:{opacity:1},className:"border-b border-gray-700 hover:bg-gray-700/50 transition-colors",children:[a.jsx("td",{className:"p-4",children:a.jsx("input",{type:"checkbox",checked:K,onChange:()=>T(H.uid),className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-500"})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium",children:((ce=H.displayName)==null?void 0:ce.charAt(0))||((U=H.email)==null?void 0:U.charAt(0))})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white font-medium",children:H.displayName}),a.jsx("div",{className:"text-gray-400 text-sm",children:H.email})]})]})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:`flex items-center space-x-2 ${te.color}`,children:[a.jsx(te.icon,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:te.label})]})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"text-sm text-gray-300",children:[H.role==="student"&&a.jsxs("div",{children:[a.jsxs("div",{children:[": ",H.age||" "]}),a.jsxs("div",{children:[": ",H.sex==="male"?"":""]}),H.teacherId&&a.jsx("div",{className:"text-green-400",children:" "})]}),H.role==="teacher"&&a.jsx("div",{children:a.jsxs("div",{children:[": ",((M=H.teacherClasses)==null?void 0:M.length)||0]})})]})}),a.jsx("td",{className:"p-4 text-sm text-gray-300",children:G(H.createdAt)}),a.jsx("td",{className:"p-4 text-sm text-gray-300",children:G(H.lastLogin)}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(ut,{onClick:()=>z(H),variant:"secondary",size:"sm",className:"flex items-center space-x-1",children:[a.jsx(z2,{className:"w-3 h-3"}),a.jsx("span",{children:""})]}),a.jsxs(ut,{onClick:()=>B(H),variant:"danger",size:"sm",className:"flex items-center space-x-1",children:[a.jsx(ua,{className:"w-3 h-3"}),a.jsx("span",{children:""})]})]})})]},H.uid)})})]}),n.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Rr,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-400",children:"  "})]})]})}),a.jsxs(bn,{children:[b&&a.jsx(zq,{onClose:()=>_(!1),onSuccess:()=>{_(!1),N(),Ie.success("  ")}}),R&&a.jsx($q,{user:L,onClose:()=>j(!1),onSuccess:()=>{j(!1),I(null),x([]),N(),Ie.success("  ")}}),k&&a.jsx(Hq,{user:L,onClose:()=>F(!1),onSuccess:()=>{F(!1),I(null),N(),Ie.success("  ")}}),a.jsx(Uq,{isOpen:v,onClose:()=>w(!1),onSuccess:()=>{w(!1),N()}})]})]})},Wq=({slide:t,onSave:e,onCancel:r})=>{var Fe;const[n,s]=S.useState(t||{}),[i,o]=S.useState(null),[l,u]=S.useState(!1),[h,f]=S.useState(!0),[p,x]=S.useState(!1),[v,w]=S.useState("gradient"),[b,_]=S.useState(null),[R,j]=S.useState(!1),[k,F]=S.useState("content"),[L,I]=S.useState(!1),[N,T]=S.useState(null),[P,B]=S.useState(null);S.useRef(null),S.useEffect(()=>{if(t)try{s({...t,content:t.content||{elements:[]}}),T(null)}catch(ge){console.error("Error initializing slide:",ge),T("Failed to load slide data. Please try again.")}},[t]);const z=ge=>{const be=O(ge);s({...n,type:ge,content:be})},O=ge=>{switch(ge){case"presentation":return{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",elements:[{type:"title",text:" ",style:{fontSize:"3rem",color:"white",textAlign:"center",marginBottom:"2rem"}}]};case"poll":return{question:"  ",options:[{id:1,text:" 1",emoji:""},{id:2,text:" 2",emoji:""},{id:3,text:" 3",emoji:""},{id:4,text:" 4",emoji:""}],allowMultiple:!1,showResults:!0,duration:120};case"quiz":return{questions:[{id:1,question:"  ",options:[{id:"a",text:" "},{id:"b",text:" "},{id:"c",text:" "},{id:"d",text:" "}],correctAnswer:"a",explanation:"  "}],passingScore:70,showResults:!0,duration:300};case"video":return{description:" ",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",autoplay:!1,showControls:!0,duration:180};case"interactive":return{type:"drag-drop",instructions:" ",categories:[{id:"cat1",name:" 1",color:"#4CAF50"},{id:"cat2",name:" 2",color:"#2196F3"}],items:[{id:1,text:" 1",correctCategory:"cat1"},{id:2,text:" 2",correctCategory:"cat2"}]};case"break":return{duration:300,message:" !",activities:["  "," ","  "]};case"reflection":return{question:"  ?",placeholder:"    ...",minWords:10,maxWords:200,duration:180};default:return{}}},D=(ge,be)=>{try{if(T(null),ge==="type")s(se=>({...se,type:be,content:{...se.content,type:be==="interactive"?"drag-drop":void 0}}));else if(ge.startsWith("content.")){const se=ge.replace("content.","");s(ve=>({...ve,content:{...ve.content,[se]:be}}))}else s(se=>({...se,[ge]:be}))}catch(se){console.error(" Error updating content:",se),T(`Failed to update content: ${se.message}`)}},G=(ge,be)=>{const se=[...n.content.elements];se[ge]={...se[ge],...be},s({...n,content:{...n.content,elements:se}})},Q=ge=>{const be={type:ge,text:ge==="title"?" ":" ",style:{fontSize:ge==="title"?"3rem":"1.5rem",color:"white",textAlign:"center",direction:"rtl",fontFamily:"Arial, sans-serif",fontWeight:ge==="title"?"bold":"normal"}};s({...n,content:{...n.content,elements:[...n.content.elements||[],be]}})},ue=ge=>{const be=(n.content.elements||[]).filter((se,ve)=>ve!==ge);s({...n,content:{...n.content,elements:be}}),o(null)},H=(ge,be,se)=>{const ve=[...n.content.options];ve[ge]={...ve[ge],[be]:se},D("options",ve)},te=()=>{const ge={id:Date.now(),text:" ",emoji:""},be=[...n.content.options||[],ge];D("options",be)},K=ge=>{const be=(n.content.options||[]).filter((se,ve)=>ve!==ge);D("options",be)},ce=(ge,be,se)=>{const ve=[...n.content.questions];ve[ge]={...ve[ge],[be]:se},D("questions",ve)},U=()=>{const ge={id:Date.now(),question:" ",options:[{id:"a",text:" "},{id:"b",text:" "},{id:"c",text:" "},{id:"d",text:" "}],correctAnswer:"a",explanation:"  "},be=[...n.content.questions||[],ge];D("questions",be)},M=ge=>{const be=(n.content.questions||[]).filter((se,ve)=>ve!==ge);D("questions",be)},X=ge=>{s({...n,content:{...n.content,background:ge}})},Y=async()=>{var ge;try{if(j(!0),T(null),B(null),!n.title||n.title.trim()==="")throw new Error("Slide title is required");if(!n.type)throw new Error("Slide type is required");if(n.type==="interactive"&&((ge=n.content)!=null&&ge.type)&&!["windows-simulator","linux-simulator","network-simulator","protocol-simulator","code-editor","website-builder","database-simulator","browser-simulator","drag-drop","matching","multiple-choice"].includes(n.content.type))throw new Error(`Invalid interactive type: ${n.content.type}`);console.log(" Saving slide with data:",n),await e(n),B("Slide saved successfully!"),setTimeout(()=>B(null),3e3)}catch(be){console.error(" Error saving slide:",be),T(`Failed to save slide: ${be.message}`)}finally{j(!1)}},Z=()=>{const ge={...n};switch(n.type){case"presentation":return a.jsx(Ld,{slide:ge});case"poll":return a.jsx(T0,{slide:ge,onAnswer:()=>{},answers:{}});case"quiz":return a.jsx(R0,{slide:ge,onAnswer:()=>{},answers:{}});case"video":return a.jsx(j0,{slide:ge,onAnswer:()=>{},answers:{}});case"interactive":return a.jsx(A0,{slide:ge,onAnswer:()=>{},answers:{}});case"break":return a.jsx(C0,{slide:ge});case"reflection":return a.jsx(I0,{slide:ge,onAnswer:()=>{},answers:{}});default:return a.jsx("div",{className:"text-white p-8",children:"   "})}},fe=()=>{var ge,be,se;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Background"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Type"}),a.jsxs("select",{value:v,onChange:ve=>w(ve.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[a.jsx("option",{value:"gradient",children:"Gradient"}),a.jsx("option",{value:"solid",children:"Solid Color"}),a.jsx("option",{value:"image",children:"Image"})]})]}),v==="gradient"&&a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("button",{onClick:()=>X("linear-gradient(135deg, #667eea 0%, #764ba2 100%)"),className:"h-12 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 hover:scale-105 transition-transform"}),a.jsx("button",{onClick:()=>X("linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"),className:"h-12 rounded-lg bg-gradient-to-br from-pink-400 to-red-500 hover:scale-105 transition-transform"}),a.jsx("button",{onClick:()=>X("linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"),className:"h-12 rounded-lg bg-gradient-to-br from-blue-400 to-cyan-400 hover:scale-105 transition-transform"}),a.jsx("button",{onClick:()=>X("linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"),className:"h-12 rounded-lg bg-gradient-to-br from-green-400 to-teal-400 hover:scale-105 transition-transform"})]}),v==="solid"&&a.jsx("input",{type:"color",value:((ge=n.content)==null?void 0:ge.background)||"#667eea",onChange:ve=>X(ve.target.value),className:"w-full h-12 rounded-lg border border-gray-600"})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Elements"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>Q("title"),className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:a.jsx(hd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Q("text"),className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:a.jsx(B3,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"space-y-4",children:(se=(be=n.content)==null?void 0:be.elements)==null?void 0:se.map((ve,Me)=>{var Re,ze,nt;return a.jsxs("div",{className:`p-3 rounded-lg border-2 transition-all ${i===Me?"border-blue-500 bg-blue-900 bg-opacity-20":"border-gray-600 hover:border-gray-500"}`,onClick:()=>o(Me),children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-xs text-gray-400 uppercase",children:ve.type==="title"?"":""}),a.jsx("button",{onClick:vt=>{vt.stopPropagation(),ue(Me)},className:"p-1 text-red-400 hover:text-red-300",children:a.jsx(ua,{className:"w-3 h-3"})})]}),a.jsx("input",{type:"text",value:ve.text,onChange:vt=>G(Me,{text:vt.target.value}),className:"w-full bg-transparent text-white border-none outline-none",style:{fontSize:((Re=ve.style)==null?void 0:Re.fontSize)||"1.5rem"}}),i===Me&&a.jsx("div",{className:"mt-3 p-3 bg-gray-700 rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:" "}),a.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:parseFloat(((ze=ve.style)==null?void 0:ze.fontSize)||"1.5rem"),onChange:vt=>G(Me,{style:{...ve.style,fontSize:`${vt.target.value}rem`}}),className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:""}),a.jsx("input",{type:"color",value:((nt=ve.style)==null?void 0:nt.color)||"#ffffff",onChange:vt=>G(Me,{style:{...ve.style,color:vt.target.value}}),className:"w-full h-8 rounded border border-gray-600"})]})]})})]},`element-${Me}-${ve.type}-${ve.id||Me}`)})})]})]})},ie=()=>{var ge,be,se,ve,Me;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Question"}),a.jsx("input",{type:"text",value:((ge=n.content)==null?void 0:ge.question)||"",onChange:Re=>D("question",Re.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"Enter your poll question..."})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Options"}),a.jsx("button",{onClick:te,className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:a.jsx(hd,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"space-y-3",children:(se=(be=n.content)==null?void 0:be.options)==null?void 0:se.map((Re,ze)=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-700 rounded-lg",children:[a.jsx("input",{type:"text",value:Re.emoji,onChange:nt=>H(ze,"emoji",nt.target.value),className:"w-16 bg-gray-600 border border-gray-500 rounded px-2 py-1 text-center",placeholder:""}),a.jsx("input",{type:"text",value:Re.text,onChange:nt=>H(ze,"text",nt.target.value),className:"flex-1 bg-gray-600 border border-gray-500 rounded px-3 py-1 text-white",placeholder:"Option text..."}),a.jsx("button",{onClick:()=>K(ze),className:"p-1 text-red-400 hover:text-red-300",children:a.jsx(ua,{className:"w-4 h-4"})})]},`option-${ze}-${Re.id||Re.text||ze}`))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (seconds)"}),a.jsx("input",{type:"number",value:((ve=n.content)==null?void 0:ve.duration)||120,onChange:Re=>D("duration",parseInt(Re.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Allow Multiple"}),a.jsx("input",{type:"checkbox",checked:((Me=n.content)==null?void 0:Me.allowMultiple)||!1,onChange:Re=>D("allowMultiple",Re.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded"})]})]})]})},me=()=>{var ge,be,se,ve;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Questions"}),a.jsx("button",{onClick:U,className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:a.jsx(hd,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"space-y-4",children:(be=(ge=n.content)==null?void 0:ge.questions)==null?void 0:be.map((Me,Re)=>{var ze;return a.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-300",children:["Question ",Re+1]}),a.jsx("button",{onClick:()=>M(Re),className:"p-1 text-red-400 hover:text-red-300",children:a.jsx(ua,{className:"w-4 h-4"})})]}),a.jsx("input",{type:"text",value:Me.question,onChange:nt=>ce(Re,"question",nt.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white mb-3",placeholder:"Enter question..."}),a.jsx("div",{className:"space-y-2",children:(ze=Me.options)==null?void 0:ze.map((nt,vt)=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"radio",name:`correct-${Re}`,checked:Me.correctAnswer===nt.id,onChange:()=>ce(Re,"correctAnswer",nt.id),className:"w-4 h-4 text-blue-600 bg-gray-600 border-gray-500"}),a.jsx("input",{type:"text",value:nt.text,onChange:Le=>{const ye=[...Me.options];ye[vt]={...ye[vt],text:Le.target.value},ce(Re,"options",ye)},className:"flex-1 bg-gray-600 border border-gray-500 rounded px-3 py-1 text-white",placeholder:`Option ${nt.id}`})]},`option-${Re}-${vt}-${nt.id||nt.text||vt}`))}),a.jsx("input",{type:"text",value:Me.explanation,onChange:nt=>ce(Re,"explanation",nt.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white mt-3",placeholder:"Explanation for correct answer..."})]},`question-${Re}-${Me.id||Me.question||Re}`)})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Passing Score (%)"}),a.jsx("input",{type:"number",value:((se=n.content)==null?void 0:se.passingScore)||70,onChange:Me=>D("passingScore",parseInt(Me.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (seconds)"}),a.jsx("input",{type:"number",value:((ve=n.content)==null?void 0:ve.duration)||300,onChange:Me=>D("duration",parseInt(Me.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]})]})]})},pe=()=>{var ge,be,se,ve;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Video URL"}),a.jsx("input",{type:"text",value:((ge=n.content)==null?void 0:ge.videoUrl)||"",onChange:Me=>D("videoUrl",Me.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"https://www.youtube.com/embed/..."}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Use YouTube embed URLs (e.g., https://www.youtube.com/embed/VIDEO_ID)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),a.jsx("textarea",{value:((be=n.content)==null?void 0:be.description)||"",onChange:Me=>D("description",Me.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white h-20 resize-none",placeholder:"Describe the video content..."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (seconds)"}),a.jsx("input",{type:"number",value:((se=n.content)==null?void 0:se.duration)||180,onChange:Me=>D("duration",parseInt(Me.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Autoplay"}),a.jsx("input",{type:"checkbox",checked:((ve=n.content)==null?void 0:ve.autoplay)||!1,onChange:Me=>D("autoplay",Me.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded"})]})]})]})},we=()=>{var ge,be,se,ve,Me,Re;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Exercise Type"}),a.jsxs("select",{value:((ge=n.content)==null?void 0:ge.type)||"drag-drop",onChange:ze=>D("type",ze.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[a.jsx("option",{value:"drag-drop",children:"Click-Based Exercise"}),a.jsx("option",{value:"matching",children:"Matching"}),a.jsx("option",{value:"multiple-choice",children:"Multiple Choice"}),a.jsx("option",{value:"windows-simulator",children:"Windows Simulator"}),a.jsx("option",{value:"linux-simulator",children:"Linux Simulator"}),a.jsx("option",{value:"network-simulator",children:"Network Simulator"}),a.jsx("option",{value:"protocol-simulator",children:"Protocol Simulator"}),a.jsx("option",{value:"code-editor",children:"Code Editor"}),a.jsx("option",{value:"website-builder",children:"Website Builder"}),a.jsx("option",{value:"database-simulator",children:"Database Simulator"}),a.jsx("option",{value:"browser-simulator",children:"Browser Simulator"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Instructions"}),a.jsx("textarea",{value:((be=n.content)==null?void 0:be.instructions)||"",onChange:ze=>D("instructions",ze.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white h-20 resize-none",placeholder:"Enter exercise instructions..."})]}),(((se=n.content)==null?void 0:se.type)==="drag-drop"||((ve=n.content)==null?void 0:ve.type)==="matching")&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Categories"}),a.jsx("div",{className:"space-y-3",children:(Re=(Me=n.content)==null?void 0:Me.categories)==null?void 0:Re.map((ze,nt)=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-700 rounded-lg",children:[a.jsx("input",{type:"text",value:ze.name,onChange:vt=>{const Le=[...n.content.categories];Le[nt]={...Le[nt],name:vt.target.value},D("categories",Le)},className:"flex-1 bg-gray-600 border border-gray-500 rounded px-3 py-1 text-white",placeholder:"Category name..."}),a.jsx("input",{type:"color",value:ze.color,onChange:vt=>{const Le=[...n.content.categories];Le[nt]={...Le[nt],color:vt.target.value},D("categories",Le)},className:"w-12 h-8 rounded border border-gray-600"})]},nt))})]})]})},Xe=()=>{var ge,be,se,ve;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Break Message"}),a.jsx("input",{type:"text",value:((ge=n.content)==null?void 0:ge.message)||"",onChange:Me=>D("message",Me.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"Time for a break!"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (seconds)"}),a.jsx("input",{type:"number",value:((be=n.content)==null?void 0:be.duration)||300,onChange:Me=>D("duration",parseInt(Me.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Suggested Activities"}),a.jsx("textarea",{value:((ve=(se=n.content)==null?void 0:se.activities)==null?void 0:ve.join(`
`))||"",onChange:Me=>D("activities",Me.target.value.split(`
`).filter(Re=>Re.trim())),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white h-20 resize-none",placeholder:"Enter suggested activities (one per line)..."})]})]})},re=()=>{var ge,be,se,ve,Me;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reflection Question"}),a.jsx("input",{type:"text",value:((ge=n.content)==null?void 0:ge.question)||"",onChange:Re=>D("question",Re.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"What did you learn today?"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Placeholder Text"}),a.jsx("input",{type:"text",value:((be=n.content)==null?void 0:be.placeholder)||"",onChange:Re=>D("placeholder",Re.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"Write your thoughts here..."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min Words"}),a.jsx("input",{type:"number",value:((se=n.content)==null?void 0:se.minWords)||10,onChange:Re=>D("minWords",parseInt(Re.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Words"}),a.jsx("input",{type:"number",value:((ve=n.content)==null?void 0:ve.maxWords)||200,onChange:Re=>D("maxWords",parseInt(Re.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (seconds)"}),a.jsx("input",{type:"number",value:((Me=n.content)==null?void 0:Me.duration)||180,onChange:Re=>D("duration",parseInt(Re.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]})]})},Ze=({children:ge})=>{const[be,se]=S.useState(null);if(be)return a.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-6 text-center",children:[a.jsx(bs,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-red-200 mb-2",children:"Preview Error"}),a.jsx("p",{className:"text-red-300 mb-4",children:"Failed to render slide preview due to an error."}),a.jsxs("button",{onClick:()=>se(null),className:"flex items-center space-x-2 bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 transition-colors mx-auto",children:[a.jsx(Ps,{className:"w-4 h-4"}),a.jsx("span",{children:"Retry Preview"})]})]});try{return a.jsx("div",{onError:ve=>{console.error("Preview error:",ve),se(ve)},children:ge})}catch(ve){return console.error("Preview rendering error:",ve),se(ve),null}};return a.jsxs("div",{className:"min-h-screen bg-gray-900 flex",children:[a.jsxs("div",{className:"w-96 bg-gray-800 border-r border-gray-700 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:t!=null&&t.id?"Edit Slide":"Create Slide"}),a.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-white transition-colors",children:a.jsx(Wr,{className:"w-5 h-5"})})]}),a.jsxs(bn,{children:[N&&a.jsxs(Ke.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 bg-red-900/50 border border-red-500 text-red-200 px-3 py-2 rounded-lg flex items-center space-x-2",children:[a.jsx(To,{className:"w-4 h-4"}),a.jsx("span",{className:"flex-1 text-sm",children:N}),a.jsx("button",{onClick:()=>T(null),className:"text-red-300 hover:text-red-100",children:a.jsx(Wr,{className:"w-3 h-3"})})]}),P&&a.jsxs(Ke.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 bg-green-900/50 border border-green-500 text-green-200 px-3 py-2 rounded-lg flex items-center space-x-2",children:[a.jsx(dg,{className:"w-4 h-4"}),a.jsx("span",{className:"flex-1 text-sm",children:P}),a.jsx("button",{onClick:()=>B(null),className:"text-green-300 hover:text-green-100",children:a.jsx(Wr,{className:"w-3 h-3"})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),a.jsx("input",{type:"text",value:n.title||"",onChange:ge=>D("title",ge.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"Enter slide title..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Type"}),a.jsxs("select",{value:n.type||"presentation",onChange:ge=>z(ge.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[a.jsx("option",{value:"presentation",children:"Presentation"}),a.jsx("option",{value:"poll",children:"Poll"}),a.jsx("option",{value:"quiz",children:"Quiz"}),a.jsx("option",{value:"video",children:"Video"}),a.jsx("option",{value:"interactive",children:"Interactive"}),a.jsx("option",{value:"break",children:"Break"}),a.jsx("option",{value:"reflection",children:"Reflection"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Order"}),a.jsx("input",{type:"number",value:n.order||1,onChange:ge=>D("order",parseInt(ge.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",min:"1"})]})]})]}),a.jsx("div",{className:"flex border-b border-gray-700",children:["content","style","json"].map(ge=>a.jsx("button",{onClick:()=>F(ge),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${k===ge?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,children:ge.charAt(0).toUpperCase()+ge.slice(1)},ge))}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[k==="content"&&a.jsxs("div",{className:"space-y-6",children:[n.type==="presentation"&&fe(),n.type==="poll"&&ie(),n.type==="quiz"&&me(),n.type==="video"&&pe(),n.type==="interactive"&&we(),n.type==="break"&&Xe(),n.type==="reflection"&&re()]}),k==="style"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Background"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)","linear-gradient(135deg, #fa709a 0%, #fee140 100%)","linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)"].map(ge=>{var be;return a.jsx("button",{onClick:()=>X(ge),className:`w-full h-12 rounded-lg border-2 transition-all ${((be=n.content)==null?void 0:be.background)===ge?"border-blue-400 scale-105":"border-gray-600 hover:border-gray-500"}`,style:{background:ge}},ge)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Background"}),a.jsx("input",{type:"text",value:((Fe=n.content)==null?void 0:Fe.background)||"",onChange:ge=>X(ge.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"Enter CSS background value..."})]})]}),k==="json"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"JSON Editor"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>{try{const ge=JSON.stringify(n,null,2);navigator.clipboard.writeText(ge),B("JSON copied to clipboard!"),setTimeout(()=>B(null),2e3)}catch(ge){T("Failed to copy JSON: "+ge.message)}},className:"p-2 text-gray-400 hover:text-white transition-colors",title:"Copy JSON",children:a.jsx(D2,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{try{const ge=JSON.stringify(n,null,2),be=new Blob([ge],{type:"application/json"}),se=URL.createObjectURL(be),ve=document.createElement("a");ve.href=se,ve.download=`slide-${n.title||"untitled"}.json`,ve.click(),URL.revokeObjectURL(se),B("JSON downloaded!"),setTimeout(()=>B(null),2e3)}catch(ge){T("Failed to download JSON: "+ge.message)}},className:"p-2 text-gray-400 hover:text-white transition-colors",title:"Download JSON",children:a.jsx(mg,{className:"w-4 h-4"})})]})]}),a.jsx("textarea",{value:JSON.stringify(n,null,2),onChange:ge=>{try{const be=JSON.parse(ge.target.value);s(be),T(null)}catch(be){T("Invalid JSON: "+be.message)}},className:"w-full h-64 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white font-mono text-sm resize-none",placeholder:"Enter valid JSON..."}),N&&a.jsxs("div",{className:"text-red-400 text-sm",children:[a.jsx(bs,{className:"w-4 h-4 inline mr-1"}),N]})]})]}),a.jsx("div",{className:"p-6 border-t border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>I(!L),className:"flex items-center space-x-2 text-gray-400 hover:text-white transition-colors",children:[a.jsx(Pa,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm",children:[L?"Hide":"Show"," Preview"]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),a.jsx("button",{onClick:Y,disabled:R,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:R?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Saving..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(eh,{className:"w-4 h-4"}),a.jsx("span",{children:"Save"})]})})]})]})})]}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx("div",{className:"bg-gray-800 border-b border-gray-700 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Slide Preview"}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("button",{onClick:()=>I(!L),className:"flex items-center space-x-2 bg-gray-700 text-white px-3 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:[a.jsx(Pa,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm",children:[L?"Hide":"Show"," Preview"]})]})})]})}),a.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:a.jsx("div",{className:"w-full max-w-4xl h-full",children:a.jsx(Ze,{children:Z()})})})]})]})},qq=[{id:"cyber-shield",url:"https://img.icons8.com/color/96/cyber-security.png",name:"Cyber Shield"},{id:"hacker",url:"https://img.icons8.com/color/96/hacker.png",name:"Hacker"},{id:"computer",url:"https://img.icons8.com/color/96/computer.png",name:"Computer"},{id:"network",url:"https://img.icons8.com/color/96/network.png",name:"Network"},{id:"database",url:"https://img.icons8.com/color/96/database.png",name:"Database"},{id:"code",url:"https://img.icons8.com/color/96/code.png",name:"Code"},{id:"browser",url:"https://img.icons8.com/color/96/browser.png",name:"Browser"},{id:"server",url:"https://img.icons8.com/color/96/server.png",name:"Server"},{id:"book",url:"https://img.icons8.com/color/96/book.png",name:"Book"},{id:"graduation-cap",url:"https://img.icons8.com/color/96/graduation-cap.png",name:"Graduation"},{id:"lightbulb",url:"https://img.icons8.com/color/96/lightbulb.png",name:"Idea"},{id:"target",url:"https://img.icons8.com/color/96/target.png",name:"Target"},{id:"trophy",url:"https://img.icons8.com/color/96/trophy.png",name:"Trophy"},{id:"star",url:"https://img.icons8.com/color/96/star.png",name:"Star"},{id:"arrow-right",url:"https://img.icons8.com/color/96/arrow-right.png",name:"Arrow"},{id:"check-circle",url:"https://img.icons8.com/color/96/check-circle.png",name:"Check"},{id:"warning",url:"https://img.icons8.com/color/96/warning.png",name:"Warning"},{id:"info",url:"https://img.icons8.com/color/96/info.png",name:"Info"},{id:"question",url:"https://img.icons8.com/color/96/question.png",name:"Question"},{id:"settings",url:"https://img.icons8.com/color/96/settings.png",name:"Settings"},{id:"gear",url:"https://img.icons8.com/color/96/gear.png",name:"Gear"},{id:"lock",url:"https://img.icons8.com/color/96/lock.png",name:"Lock"},{id:"key",url:"https://img.icons8.com/color/96/key.png",name:"Key"}],Gq={codeEditor:{name:"Code Editor",template:{type:"interactive",component:"CodeEditor",content:{language:"javascript",code:'console.log("Hello, World!");',theme:"vs-dark",readOnly:!1}}},dragDrop:{name:"Click-Based Exercise",template:{type:"interactive",component:"DragDropExercise",content:{items:[{id:"1",text:"Item 1",correctCategory:"A"},{id:"2",text:"Item 2",correctCategory:"B"}],categories:[{id:"A",name:"Category A",color:"#4CAF50",description:"First category"},{id:"B",name:"Category B",color:"#2196F3",description:"Second category"}]}}},quiz:{name:"Interactive Quiz",template:{type:"interactive",component:"MultipleChoiceExercise",content:{question:"What is cybersecurity?",options:[{id:"a",text:"Protecting computers",correct:!0},{id:"b",text:"Breaking into systems",correct:!1},{id:"c",text:"Playing games",correct:!1}]}}},simulator:{name:"Simulator",template:{type:"interactive",component:"BrowserSimulator",content:{url:"https://example.com",allowNavigation:!0,showConsole:!0}}}},Kq=({slide:t,onSave:e,onCancel:r})=>{var H,te,K,ce;const[n,s]=S.useState(t||{}),[i,o]=S.useState("visual"),[l,u]=S.useState(!1),[h,f]=S.useState(!1),[p,x]=S.useState(null),[v,w]=S.useState(null),[b,_]=S.useState([]),[R,j]=S.useState(-1),k=S.useRef(null);S.useEffect(()=>{n.id||s({id:`slide-${Date.now()}`,title:" ",type:"presentation",content:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",elements:[{id:"title-1",type:"title",text:" ",style:{fontSize:"3rem",color:"white",textAlign:"center",direction:"rtl",fontFamily:"Arial, sans-serif",position:"absolute",top:"20%",left:"50%",transform:"translateX(-50%)"}}]}}),F(n)},[]);const F=U=>{const M=b.slice(0,R+1);M.push(JSON.parse(JSON.stringify(U))),_(M),j(M.length-1)},L=()=>{R>0&&(j(R-1),s(JSON.parse(JSON.stringify(b[R-1]))))},I=()=>{R<b.length-1&&(j(R+1),s(JSON.parse(JSON.stringify(b[R+1]))))},N=U=>{s(U),F(U),w(null)},T=U=>{try{const M=JSON.parse(U);N(M),w(null)}catch(M){w(M.message)}},P=U=>{const M={id:`image-${Date.now()}`,type:"image",src:U.url,alt:U.name,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"200px",height:"200px",cursor:"move",userSelect:"none"}},X={...n,content:{...n.content,elements:[...n.content.elements,M]}};N(X),u(!1)},B=U=>{x(U)},z=(U,M)=>{const X=n.content.elements.map(Z=>Z.id===U?{...Z,style:{...Z.style,top:`${M.y}px`,left:`${M.x}px`}}:Z),Y={...n,content:{...n.content,elements:X}};N(Y)},O=(U,M)=>{const X=n.content.elements.map(Z=>Z.id===U?{...Z,style:{...Z.style,width:`${M.width}px`,height:`${M.height}px`}}:Z),Y={...n,content:{...n.content,elements:X}};N(Y)},D=U=>{var X;const M=(((X=n.content)==null?void 0:X.elements)||[]).filter(Y=>Y.id!==U);s({...n,content:{...n.content,elements:M}}),x(null)},G=()=>{const U={id:`text-${Date.now()}`,type:"text",text:" ",style:{position:"absolute",top:"30%",left:"50%",transform:"translateX(-50%)",fontSize:"1.5rem",color:"white",textAlign:"center",direction:"rtl",fontFamily:"Arial, sans-serif",cursor:"move",userSelect:"none"}},M={...n,content:{...n.content,elements:[...n.content.elements,U]}};N(M)},Q=U=>{const M={...n,type:U.template.type,content:U.template.content};N(M),f(!1)},ue=()=>{if(v){alert("Please fix JSON errors before saving");return}e(n)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-gray-900 rounded-lg shadow-2xl w-full max-w-7xl h-full max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"bg-gray-800 px-6 py-4 rounded-t-lg flex items-center justify-between border-b border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"  "}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>o("visual"),className:`px-3 py-1 rounded ${i==="visual"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"}`,children:a.jsx(WB,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>o("json"),className:`px-3 py-1 rounded ${i==="json"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"}`,children:a.jsx(Pf,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:L,disabled:R<=0,className:"p-2 rounded bg-gray-700 text-gray-300 hover:bg-gray-600 disabled:opacity-50",children:a.jsx(YB,{className:"w-4 h-4"})}),a.jsx("button",{onClick:I,disabled:R>=b.length-1,className:"p-2 rounded bg-gray-700 text-gray-300 hover:bg-gray-600 disabled:opacity-50",children:a.jsx(qB,{className:"w-4 h-4"})}),a.jsxs("button",{onClick:ue,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center space-x-2",children:[a.jsx(eh,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsx("button",{onClick:r,className:"p-2 rounded bg-gray-700 text-gray-300 hover:bg-gray-600",children:a.jsx(Wr,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[a.jsxs("div",{className:"w-80 bg-gray-800 border-r border-gray-700 flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" "}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:""}),a.jsx("input",{type:"text",value:n.title||"",onChange:U=>N({...n,title:U.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:""}),a.jsxs("select",{value:n.type||"presentation",onChange:U=>N({...n,type:U.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",children:[a.jsx("option",{value:"presentation",children:""}),a.jsx("option",{value:"poll",children:""}),a.jsx("option",{value:"quiz",children:""}),a.jsx("option",{value:"video",children:""}),a.jsx("option",{value:"interactive",children:""}),a.jsx("option",{value:"break",children:""}),a.jsx("option",{value:"reflection",children:""}),a.jsx("option",{value:"summary",children:""})]})]}),n.type==="video"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"URL "}),a.jsx("input",{type:"url",value:((H=n.content)==null?void 0:H.videoUrl)||"",onChange:U=>N({...n,content:{...n.content,videoUrl:U.target.value}}),placeholder:"https://www.youtube.com/watch?v=...",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]})]})]}),a.jsxs("div",{className:"p-4 border-b border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:""}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>u(!0),className:"w-full px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center space-x-2",children:[a.jsx(PB,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]}),a.jsxs("button",{onClick:G,className:"w-full px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center space-x-2",children:[a.jsx(B3,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]}),n.type==="interactive"&&a.jsxs("button",{onClick:()=>f(!0),className:"w-full px-3 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 flex items-center space-x-2",children:[a.jsx(Id,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})]})]}),p&&a.jsx("div",{className:"p-4 flex-1",children:a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" "})})]}),a.jsx("div",{className:"flex-1 flex flex-col",children:i==="visual"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-1 bg-gray-900 p-4",children:a.jsx("div",{ref:k,className:"w-full h-full bg-white rounded-lg shadow-lg relative overflow-hidden",style:{background:((te=n.content)==null?void 0:te.background)||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:(ce=(K=n.content)==null?void 0:K.elements)==null?void 0:ce.map(U=>a.jsx(Xq,{element:U,isSelected:p===U.id,onClick:()=>B(U.id),onDrag:z,onResize:O,onDelete:D},U.id))})}),a.jsxs("div",{className:"h-32 bg-gray-800 border-t border-gray-700 p-4",children:[a.jsx("h4",{className:"text-white font-semibold mb-2",children:" "}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-sm",children:""}),a.jsx("button",{className:"px-3 py-1 bg-gray-600 text-white rounded text-sm",children:""})]})]})]}):a.jsx("div",{className:"flex-1 p-4",children:a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:" JSON"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:()=>navigator.clipboard.writeText(JSON.stringify(n,null,2)),className:"px-3 py-1 bg-gray-700 text-white rounded text-sm flex items-center space-x-1",children:[a.jsx(D2,{className:"w-3 h-3"}),a.jsx("span",{children:""})]}),a.jsxs("button",{onClick:()=>{navigator.clipboard.readText().then(U=>{try{const M=JSON.parse(U);N(M)}catch{w("Invalid JSON format")}})},className:"px-3 py-1 bg-gray-700 text-white rounded text-sm flex items-center space-x-1",children:[a.jsx(H2,{className:"w-3 h-3"}),a.jsx("span",{children:""})]})]})]}),v&&a.jsxs("div",{className:"mb-4 p-3 bg-red-900 border border-red-700 rounded text-red-200 flex items-center space-x-2",children:[a.jsx(To,{className:"w-4 h-4"}),a.jsxs("span",{children:[" JSON: ",v]})]}),a.jsx("textarea",{value:JSON.stringify(n,null,2),onChange:U=>T(U.target.value),className:"flex-1 p-4 bg-gray-800 border border-gray-600 rounded text-green-400 font-mono text-sm resize-none",placeholder:"Enter JSON here..."})]})})})]}),a.jsx(bn,{children:l&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:a.jsxs(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg p-6 max-w-4xl max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:" "}),a.jsx("button",{onClick:()=>u(!1),className:"p-2 rounded bg-gray-700 text-gray-300 hover:bg-gray-600",children:a.jsx(Wr,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"grid grid-cols-4 gap-4",children:qq.map(U=>a.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-600 transition-colors",onClick:()=>P(U),children:[a.jsx("img",{src:U.url,alt:U.name,className:"w-full h-24 object-contain mb-2"}),a.jsx("p",{className:"text-white text-sm text-center",children:U.name})]},U.id))})]})})}),a.jsx(bn,{children:h&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:a.jsxs(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg p-6 max-w-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:"  "}),a.jsx("button",{onClick:()=>f(!1),className:"p-2 rounded bg-gray-700 text-gray-300 hover:bg-gray-600",children:a.jsx(Wr,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(Gq).map(([U,M])=>a.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-600 transition-colors",onClick:()=>Q(M),children:[a.jsx("h4",{className:"text-white font-semibold mb-2",children:M.name}),a.jsx("p",{className:"text-gray-300 text-sm",children:"  "})]},U))})]})})})]})})},Xq=({element:t,isSelected:e,onClick:r,onDrag:n,onResize:s,onDelete:i})=>{const[o,l]=S.useState(!1),[u,h]=S.useState({x:0,y:0}),f=w=>{if(w.target.closest(".resize-handle"))return;l(!0);const b=w.currentTarget.getBoundingClientRect();h({x:w.clientX-b.left,y:w.clientY-b.top}),r()},p=w=>{if(!o)return;const b=w.clientX-u.x,_=w.clientY-u.y;n(t.id,{x:b,y:_})},x=()=>{l(!1)};S.useEffect(()=>{if(o)return document.addEventListener("mousemove",p),document.addEventListener("mouseup",x),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",x)}},[o,u]);const v=()=>{switch(t.type){case"title":case"text":return a.jsx("div",{style:t.style,className:`cursor-move ${e?"ring-2 ring-blue-500":""}`,onMouseDown:f,children:t.text});case"image":return a.jsx("div",{style:t.style,className:`cursor-move ${e?"ring-2 ring-blue-500":""}`,onMouseDown:f,children:a.jsx("img",{src:t.src,alt:t.alt,className:"w-full h-full object-contain",draggable:!1})});default:return null}};return a.jsxs("div",{className:"relative",children:[v(),e&&a.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[a.jsx("button",{onClick:()=>i(t.id),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center pointer-events-auto hover:bg-red-600",children:a.jsx(ua,{className:"w-3 h-3"})}),a.jsx("div",{className:"resize-handle absolute -bottom-1 -right-1 w-3 h-3 bg-blue-500 rounded-full cursor-se-resize pointer-events-auto"}),a.jsx("div",{className:"resize-handle absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full cursor-ne-resize pointer-events-auto"}),a.jsx("div",{className:"resize-handle absolute -bottom-1 -left-1 w-3 h-3 bg-blue-500 rounded-full cursor-sw-resize pointer-events-auto"}),a.jsx("div",{className:"resize-handle absolute -top-1 -left-1 w-3 h-3 bg-blue-500 rounded-full cursor-nw-resize pointer-events-auto"})]})]})},Yq={cybersecurity:{name:"Cybersecurity Fundamentals",description:"Complete lesson on cybersecurity basics",difficulty:"beginner",duration:90,slides:[{type:"presentation",title:"  ",content:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",elements:[{type:"title",text:"  ",style:{fontSize:"3rem",color:"white",textAlign:"center",direction:"rtl",fontFamily:"Arial, sans-serif"}}]}},{type:"poll",title:"  ",content:{question:"     ?",options:["","","",""]}},{type:"video",title:"  ",content:{videoUrl:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",description:"   "}},{type:"interactive",title:" ",content:{component:"BrowserSimulator",url:"https://example.com",allowNavigation:!0,showConsole:!0}},{type:"quiz",title:" ",content:{question:"      ?",options:[{id:"a",text:"  ",correct:!1},{id:"b",text:" ",correct:!1},{id:"c",text:"  ",correct:!0},{id:"d",text:"  ",correct:!1}]}},{type:"break",title:"",content:{duration:300,message:"  "}},{type:"reflection",title:"",content:{question:"  ?",prompt:"   "}},{type:"summary",title:"",content:{points:["  "," "," "]}}]},computerBasics:{name:"Computer Basics",description:"Introduction to computer hardware and software",difficulty:"beginner",duration:60,slides:[{type:"presentation",title:" ",content:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",elements:[{type:"title",text:" ",style:{fontSize:"3rem",color:"white",textAlign:"center",direction:"rtl",fontFamily:"Arial, sans-serif"}}]}},{type:"interactive",title:" ",content:{component:"ComputerSimulator",showComponents:!0,allowInteraction:!0}},{type:"quiz",title:" ",content:{question:"     ?",options:[{id:"a",text:"RAM",correct:!1},{id:"b",text:"CPU",correct:!0},{id:"c",text:"GPU",correct:!1},{id:"d",text:"HDD",correct:!1}]}}]},networking:{name:"Networking Fundamentals",description:"Learn about computer networks and protocols",difficulty:"intermediate",duration:75,slides:[{type:"presentation",title:" ",content:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",elements:[{type:"title",text:"  ",style:{fontSize:"3rem",color:"white",textAlign:"center",direction:"rtl",fontFamily:"Arial, sans-serif"}}]}},{type:"interactive",title:" ",content:{component:"NetworkSimulator",showTopology:!0,allowConfiguration:!0}}]}},Qq=[{id:"presentation",name:"",icon:LB,color:"blue"},{id:"poll",name:"",icon:pg,color:"green"},{id:"quiz",name:"",icon:th,color:"purple"},{id:"video",name:"",icon:q2,color:"red"},{id:"interactive",name:"",icon:Id,color:"yellow"},{id:"break",name:"",icon:Cd,color:"gray"},{id:"reflection",name:"",icon:xg,color:"pink"},{id:"summary",name:"",icon:dg,color:"teal"}],Jq=({onGenerate:t,onCancel:e})=>{const[r,n]=S.useState(null),[s,i]=S.useState({title:"",description:"",difficulty:"beginner",duration:60}),[o,l]=S.useState([]),[u,h]=S.useState([]),[f,p]=S.useState(!1),[x,v]=S.useState(0),w=F=>{n(F),h(F.slides.map((L,I)=>({...L,order:I+1,id:`slide-${Date.now()}-${I}`})))},b=()=>{const F=[];o.forEach((L,I)=>{const N={id:`slide-${Date.now()}-${I}`,order:I+1,title:`${L.name} ${I+1}`,type:L.id};switch(L.id){case"presentation":F.push({...N,content:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",elements:[{type:"title",text:N.title,style:{fontSize:"3rem",color:"white",textAlign:"center",direction:"rtl",fontFamily:"Arial, sans-serif"}}]}});break;case"poll":F.push({...N,content:{question:" ",options:[" 1"," 2"," 3"," 4"]}});break;case"quiz":F.push({...N,content:{question:" ",options:[{id:"a",text:" ",correct:!1},{id:"b",text:" ",correct:!0},{id:"c",text:" ",correct:!1},{id:"d",text:" ",correct:!1}]}});break;case"video":F.push({...N,content:{videoUrl:"",description:" "}});break;case"interactive":F.push({...N,content:{component:"CodeEditor",language:"javascript",code:'console.log("Hello, World!");',theme:"vs-dark",readOnly:!1}});break;case"break":F.push({...N,content:{duration:300,message:"  "}});break;case"reflection":F.push({...N,content:{question:" ?",prompt:"   "}});break;case"summary":F.push({...N,content:{points:[" 1"," 2"," 3"]}});break;default:F.push(N)}}),h(F)},_=F=>{l(L=>L.find(I=>I.id===F.id)?L.filter(I=>I.id!==F.id):[...L,F])},R=(F,L)=>{const I=[...u],[N]=I.splice(F,1);I.splice(L,0,N),I.forEach((T,P)=>{T.order=P+1}),h(I)},j=F=>{const L=u.filter((I,N)=>N!==F);L.forEach((I,N)=>{I.order=N+1}),h(L)},k=()=>{const F={...s,slides:u,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};t(F)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-gray-900 rounded-lg shadow-2xl w-full max-w-6xl h-full max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"bg-gray-800 px-6 py-4 rounded-t-lg flex items-center justify-between border-b border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(U2,{className:"w-6 h-6 text-purple-400"}),a.jsx("h2",{className:"text-xl font-bold text-white",children:"Lesson Generator"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>p(!f),className:`px-3 py-1 rounded ${f?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"}`,children:a.jsx(Pa,{className:"w-4 h-4"})}),a.jsx("button",{onClick:e,className:"p-2 rounded bg-gray-700 text-gray-300 hover:bg-gray-600",children:a.jsx(Wr,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[a.jsxs("div",{className:"w-80 bg-gray-800 border-r border-gray-700 flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" "}),a.jsx("div",{className:"space-y-2",children:Object.entries(Yq).map(([F,L])=>a.jsxs("button",{onClick:()=>w(L),className:`w-full p-3 rounded-lg text-left transition-colors ${(r==null?void 0:r.name)===L.name?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[a.jsx("h4",{className:"font-semibold",children:L.name}),a.jsx("p",{className:"text-sm opacity-75",children:L.description}),a.jsxs("div",{className:"flex items-center space-x-2 mt-2 text-xs",children:[a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(Al,{className:"w-3 h-3"}),a.jsxs("span",{children:[L.duration," min"]})]}),a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(Rr,{className:"w-3 h-3"}),a.jsx("span",{children:L.difficulty})]})]})]},F))})]}),a.jsxs("div",{className:"p-4 border-b border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"  "}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",placeholder:" ",value:s.title,onChange:F=>i({...s,title:F.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"}),a.jsx("textarea",{placeholder:" ",value:s.description,onChange:F=>i({...s,description:F.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white resize-none",rows:"3"}),a.jsxs("select",{value:s.difficulty,onChange:F=>i({...s,difficulty:F.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",children:[a.jsx("option",{value:"beginner",children:""}),a.jsx("option",{value:"intermediate",children:""}),a.jsx("option",{value:"advanced",children:""})]}),a.jsx("input",{type:"number",placeholder:" ()",value:s.duration,onChange:F=>i({...s,duration:parseInt(F.target.value)||60}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]})]}),a.jsxs("div",{className:"p-4 flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" "}),a.jsx("div",{className:"space-y-2",children:Qq.map(F=>{const L=F.icon,I=o.find(N=>N.id===F.id);return a.jsxs("button",{onClick:()=>_(F),className:`w-full p-3 rounded-lg text-left transition-colors flex items-center space-x-3 ${I?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[a.jsx(L,{className:"w-5 h-5"}),a.jsx("span",{children:F.name}),I&&a.jsx(dg,{className:"w-4 h-4 ml-auto"})]},F.id)})}),a.jsx("button",{onClick:b,disabled:o.length===0,className:"w-full mt-4 px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]}),a.jsx("div",{className:"flex-1 flex flex-col",children:f?a.jsx("div",{className:"flex-1 bg-gray-900 p-4",children:a.jsx("div",{className:"h-full bg-white rounded-lg shadow-lg relative overflow-hidden",children:u[x]&&a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4",children:u[x].title}),a.jsxs("p",{className:"text-gray-600",children:[": ",u[x].type]})]})}),a.jsxs("div",{className:"p-4 bg-gray-100 flex items-center justify-between",children:[a.jsx("button",{onClick:()=>v(Math.max(0,x-1)),disabled:x===0,className:"px-3 py-1 bg-blue-600 text-white rounded disabled:opacity-50",children:""}),a.jsxs("span",{className:"text-sm text-gray-600",children:[x+1," / ",u.length]}),a.jsx("button",{onClick:()=>v(Math.min(u.length-1,x+1)),disabled:x===u.length-1,className:"px-3 py-1 bg-blue-600 text-white rounded disabled:opacity-50",children:""})]})]})})}):a.jsx("div",{className:"flex-1 p-4",children:a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white",children:["  (",u.length,")"]}),a.jsx("button",{onClick:k,disabled:u.length===0,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:" "})]}),a.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:u.map((F,L)=>a.jsx(Ke.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("span",{className:"text-sm text-gray-400",children:["#",F.order]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-semibold",children:F.title}),a.jsx("p",{className:"text-gray-400 text-sm",children:F.type})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>R(L,Math.max(0,L-1)),disabled:L===0,className:"p-1 text-gray-400 hover:text-white disabled:opacity-50",children:""}),a.jsx("button",{onClick:()=>R(L,Math.min(u.length-1,L+1)),disabled:L===u.length-1,className:"p-1 text-gray-400 hover:text-white disabled:opacity-50",children:""}),a.jsx("button",{onClick:()=>j(L),className:"p-1 text-red-400 hover:text-red-300",children:a.jsx(ua,{className:"w-4 h-4"})})]})]})},F.id))})]})})})]})]})})},YT=({children:t,slideTitle:e,onError:r})=>{const[n,s]=S.useState(!1),[i,o]=S.useState(null);return n?a.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-6 text-center",children:[a.jsx(bs,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsxs("h3",{className:"text-lg font-semibold text-red-200 mb-2",children:["Preview Error - ",e]}),a.jsx("p",{className:"text-red-300 mb-4",children:"This slide contains content that cannot be previewed safely."}),i&&a.jsxs("details",{className:"text-left bg-red-900/30 rounded p-3 mb-4",children:[a.jsx("summary",{className:"cursor-pointer text-red-200 font-medium",children:"Technical Details"}),a.jsx("pre",{className:"text-xs text-red-300 mt-2 whitespace-pre-wrap",children:i})]}),a.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[a.jsxs("button",{onClick:()=>{s(!1),o(null)},className:"flex items-center space-x-2 bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[a.jsx(Ps,{className:"w-4 h-4"}),a.jsx("span",{children:"Retry Preview"})]}),a.jsxs("button",{onClick:()=>r&&r(i),className:"flex items-center space-x-2 bg-gray-600 text-white px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(cf,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit Slide"})]})]})]}):a.jsx("div",{onError:l=>{console.error("Slide preview error:",l),s(!0),o(l.message||"Unknown error occurred")},children:t})},Zq=({slide:t,onEdit:e})=>{var i,o;const[r,n]=S.useState(null),s=l=>{console.error("Slide preview failed:",l),n(l)};if(r)return a.jsx(YT,{slideTitle:t.title||"Unknown Slide",onError:s,children:a.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-6 text-center",children:[a.jsx(bs,{className:"w-12 h-12 text-yellow-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-yellow-200 mb-2",children:"Preview Unavailable"}),a.jsx("p",{className:"text-yellow-300 mb-4",children:"This slide type cannot be previewed in the content manager."}),a.jsxs("button",{onClick:()=>e(t),className:"flex items-center space-x-2 bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors mx-auto",children:[a.jsx(cf,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit Slide"})]})]})});try{return t.type==="interactive"&&((i=t.content)!=null&&i.type)&&["windows-simulator","linux-simulator","network-simulator","protocol-simulator","code-editor","website-builder","database-simulator","browser-simulator"].includes(t.content.type)?a.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-6 text-center",children:[a.jsx(jn,{className:"w-12 h-12 text-blue-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-blue-200 mb-2",children:"Interactive Exercise"}),a.jsxs("p",{className:"text-blue-300 mb-2",children:["Type: ",t.content.type.replace("-"," ").toUpperCase()]}),t.content.instructions&&a.jsx("p",{className:"text-blue-300 text-sm mb-4",children:t.content.instructions}),a.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[a.jsxs("button",{onClick:()=>e(t),className:"flex items-center space-x-2 bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(cf,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit Exercise"})]}),a.jsx("div",{className:"text-blue-300 text-sm",children:" Preview not available for simulators"})]})]}):a.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:t.title}),a.jsx("span",{className:"text-sm text-gray-400 bg-gray-700 px-2 py-1 rounded",children:t.type})]}),(o=t.content)!=null&&o.elements&&t.content.elements.length>0?a.jsxs("div",{className:"space-y-3",children:[t.content.elements.slice(0,3).map((l,u)=>a.jsxs("div",{className:"text-gray-300 text-sm",children:[l.type==="title"&&a.jsx("strong",{children:l.text}),l.type==="subtitle"&&a.jsx("em",{children:l.text}),l.type==="text"&&a.jsx("span",{children:l.text}),l.type==="image"&&a.jsxs("span",{children:[" Image: ",l.alt||"No alt text"]}),l.type==="video"&&a.jsxs("span",{children:[" Video: ",l.src||"No source"]}),l.type==="timer"&&a.jsxs("span",{children:[" Timer: ",l.duration,"s"]})]},u)),t.content.elements.length>3&&a.jsxs("div",{className:"text-gray-500 text-sm",children:["+",t.content.elements.length-3," more elements"]})]}):a.jsx("p",{className:"text-gray-400 italic",children:"No content to preview"}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:a.jsx("button",{onClick:()=>e(t),className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Edit Slide"})})]})}catch(l){return console.error("Error rendering slide preview:",l),a.jsx(YT,{slideTitle:t.title||"Unknown Slide",onError:s,children:a.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-6 text-center",children:[a.jsx(bs,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-red-200 mb-2",children:"Preview Error"}),a.jsx("p",{className:"text-red-300 mb-4",children:"Failed to render slide preview due to an error."}),a.jsxs("button",{onClick:()=>e(t),className:"flex items-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors mx-auto",children:[a.jsx(cf,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit Slide"})]})]})})}},eG=()=>{const[t,e]=S.useState([]),[r,n]=S.useState(null),[s,i]=S.useState([]),[o,l]=S.useState(null),[u,h]=S.useState(null),[f,p]=S.useState(null),[x,v]=S.useState(!1),[w,b]=S.useState(!1),[_,R]=S.useState(!0),[j,k]=S.useState(null),[F,L]=S.useState(""),[I,N]=S.useState("grid"),[T,P]=S.useState(!1),[B,z]=S.useState(null),[O,D]=S.useState(null),[G,Q]=S.useState(null),[ue,H]=S.useState(null),[te,K]=S.useState(!1),[ce,U]=S.useState(!1),[M,X]=S.useState(0);S.useEffect(()=>{Y()},[]);const Y=async()=>{try{R(!0),k(null),console.log(" Loading lessons from database...");const Ee=(await E0()).sort((et,lt)=>{const Lt=et.originalId||et.order||0,mt=lt.originalId||lt.order||0;return Lt-mt});console.log(` Loaded ${Ee.length} lessons (sorted by order)`),e(Ee),Ee.length===0&&k("No lessons found. Please check your database connection or run the sync script.")}catch(ye){console.error(" Error loading lessons:",ye),k(`Failed to load lessons: ${ye.message}. Please check your database connection.`),M<3&&(ye.message.includes("network")||ye.message.includes("permission"))&&setTimeout(()=>{X(Ee=>Ee+1),Y()},2e3)}finally{R(!1)}},Z=async ye=>{try{k(null),console.log(` Loading slides for lesson ${ye}...`);const Ee=await Sg(ye);console.log(" Raw slides data from database:",Ee);const et=Ee.map((lt,Lt)=>{const mt=`${ye}_slide_${lt.order||Lt+1}`,Mt=lt.order||Lt+1;return console.log(` Slide ${Lt+1}:`,{originalId:lt.originalId,uniqueKey:mt,displayId:Mt,title:lt.title,contentKeys:lt.content?Object.keys(lt.content):"no content"}),{...lt,uniqueKey:mt,displayId:Mt}});console.log(` Loaded ${et.length} slides for lesson ${ye}:`,et.map(lt=>({uniqueKey:lt.uniqueKey,displayId:lt.displayId,title:lt.title}))),i(et),et.length===0&&console.log(" No slides found for this lesson")}catch(Ee){console.error(" Error loading slides:",Ee),console.error(" Error details:",{message:Ee.message,stack:Ee.stack,lessonId:ye}),k(`Failed to load slides: ${Ee.message}`),i([])}},fe=async ye=>{try{(r==null?void 0:r.id)===ye.id?(n(null),i([]),h(null),l(null)):(i([]),h(null),l(null),n(ye),await Z(ye.id))}catch(Ee){console.error(" Error handling lesson click:",Ee),k(`Failed to load lesson: ${Ee.message}`)}},ie=ye=>{try{h(ye),P(!1),z(null)}catch(Ee){console.error(" Error handling slide click:",Ee),k(`Failed to preview slide: ${Ee.message}`)}},me=ye=>{try{l(ye),h(null)}catch(Ee){console.error(" Error handling edit slide:",Ee),k(`Failed to edit slide: ${Ee.message}`)}},pe=async ye=>{try{if(k(null),H(null),!r)throw new Error("No lesson selected");console.log(" Saving slide..."),console.log(" Slide data to save:",ye),console.log(" Selected lesson:",r),console.log(" Editing slide:",o);const Ee=ye.originalId||(o==null?void 0:o.originalId)||(o==null?void 0:o.id);if(!Ee)throw new Error("No slideId (originalId) found for saving!");const et={...ye,lessonId:r.id,uniqueKey:o.uniqueKey||`${r.id}_slide_${ye.order||s.length+1}`,displayId:ye.order||s.length+1};if(console.log(" Final slide data to save:",et),o.id||o.originalId)console.log(" Updating existing slide with ID:",Ee),await WW(Ee,et),H("Slide updated successfully!"),console.log(" Slide updated");else{const Lt=`slide${s.length+1}`;et.originalId=Lt,console.log(" Creating new slide with ID:",Lt),await qT({...et,originalId:Lt},Lt),H("Slide created successfully!"),console.log(" Slide created")}console.log(" Reloading slides after save..."),await Z(r.id),l(null),setTimeout(()=>H(null),3e3)}catch(Ee){console.error(" Error saving slide:",Ee),console.error(" Error details:",{message:Ee.message,stack:Ee.stack,slideData:ye,selectedLesson:r}),k(`Failed to save slide: ${Ee.message}`)}},we=async ye=>{try{k(null),console.log(` Deleting slide ${ye}...`),await qW(ye,r.id),await Z(r.id),h(null),H("Slide deleted successfully!"),console.log(" Slide deleted"),setTimeout(()=>H(null),3e3)}catch(Ee){console.error(" Error deleting slide:",Ee),k(`Failed to delete slide: ${Ee.message}`)}},Xe=()=>{if(!r){k("Please select a lesson first");return}let ye=0;s.forEach(Lt=>{const mt=String(Lt.originalId||Lt.id).match(/^slide(\d+)$/);if(mt){const Mt=parseInt(mt[1],10);Mt>ye&&(ye=Mt)}});const Ee=ye+1,et=`slide${Ee}`,lt={lessonId:r.id,originalId:et,title:" ",type:"presentation",order:Ee,uniqueKey:`${r.id}_slide_${Ee}`,displayId:Ee,content:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",elements:[{type:"text",content:" ",style:{fontSize:"2rem",fontWeight:"bold",color:"#ffffff",textAlign:"center",position:"absolute",top:"20%",left:"50%",transform:"translateX(-50%)"}}]}};l(lt)},re=ye=>{if(!r){k("Please select a lesson first");return}const Ee={...ye,id:null,title:`${ye.title} ()`,order:s.length+1,uniqueKey:`${r.id}_slide_${s.length+1}`,displayId:s.length+1};l(Ee)},Ze=()=>{try{p({title:"",description:"",icon:"",duration:"60 ",difficulty:"",targetAge:"10-13",breakDuration:10}),v(!0)}catch(ye){console.error(" Error creating new lesson:",ye),k(`Failed to create new lesson: ${ye.message}`)}},Fe=ye=>{try{p(ye),v(!0)}catch(Ee){console.error(" Error editing lesson:",Ee),k(`Failed to edit lesson: ${Ee.message}`)}},ge=async ye=>{try{k(null),H(null),console.log(" Saving lesson..."),f.id?(await $W(f.id,ye),H("Lesson updated successfully!"),console.log(" Lesson updated")):(await WT(ye),H("Lesson created successfully!"),console.log(" Lesson created")),await Y(),v(!1),p(null),setTimeout(()=>H(null),3e3)}catch(Ee){console.error(" Error saving lesson:",Ee),k(`Failed to save lesson: ${Ee.message}`)}},be=async ye=>{try{k(null),console.log(` Deleting lesson ${ye}...`),await HW(ye),await Y(),Q(null),H("Lesson deleted successfully!"),console.log(" Lesson deleted"),setTimeout(()=>H(null),3e3)}catch(Ee){console.error(" Error deleting lesson:",Ee),k(`Failed to delete lesson: ${Ee.message}`)}},se=async ye=>{try{k(null),H(null),console.log(" Generating lesson...");const Ee=await WT({title:ye.title,description:ye.description,difficulty:ye.difficulty,duration:ye.duration});for(const et of ye.slides)await qT({...et,lessonId:Ee.id});await Y(),U(!1),H("Lesson generated successfully!"),console.log(" Lesson generated"),setTimeout(()=>H(null),3e3)}catch(Ee){console.error(" Error generating lesson:",Ee),k(`Failed to generate lesson: ${Ee.message}`)}},ve=(ye,Ee)=>{try{D(Ee)}catch(et){console.error(" Error starting drag:",et)}},Me=ye=>{try{ye.preventDefault()}catch(Ee){console.error(" Error during drag over:",Ee)}},Re=async(ye,Ee)=>{try{if(ye.preventDefault(),!O||O.id===Ee.id)return;console.log(" Reordering slides..."),H("Slide reordering will be implemented soon!"),setTimeout(()=>H(null),3e3),D(null)}catch(et){console.error(" Error dropping slide:",et),k(`Failed to reorder slides: ${et.message}`)}},ze=()=>{X(0),k(null),Y()},nt=ye=>{switch(ye){case"presentation":return a.jsx(_l,{className:"w-4 h-4"});case"poll":return a.jsx(pg,{className:"w-4 h-4"});case"quiz":return a.jsx(th,{className:"w-4 h-4"});case"video":return a.jsx(q2,{className:"w-4 h-4"});case"interactive":return a.jsx(Id,{className:"w-4 h-4"});case"break":return a.jsx(Al,{className:"w-4 h-4"});case"reflection":return a.jsx(Gs,{className:"w-4 h-4"});default:return a.jsx(_l,{className:"w-4 h-4"})}},vt=ye=>{switch(ye){case"presentation":return"bg-blue-500";case"poll":return"bg-green-500";case"quiz":return"bg-yellow-500";case"video":return"bg-red-500";case"interactive":return"bg-purple-500";case"break":return"bg-gray-500";case"reflection":return"bg-indigo-500";default:return"bg-blue-500"}},Le=t.filter(ye=>{var Ee,et;return((Ee=ye.title)==null?void 0:Ee.toLowerCase().includes(F.toLowerCase()))||((et=ye.description)==null?void 0:et.toLowerCase().includes(F.toLowerCase()))});return _?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-300",children:"Loading content..."})]})}):o?a.jsxs("div",{className:"min-h-screen bg-gray-900",children:[a.jsx("div",{className:"bg-gray-800 shadow-lg border-b border-gray-700",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{onClick:()=>l(null),className:"flex items-center space-x-2 text-gray-300 hover:text-white transition-colors",children:[a.jsx(T3,{className:"w-5 h-5 rotate-90"}),a.jsx("span",{children:"Back to Content"})]}),a.jsx("span",{className:"text-gray-600",children:"|"}),a.jsx("h1",{className:"text-xl font-semibold text-white",children:o.id?"Edit Slide":"Create New Slide"})]})})})}),a.jsx("div",{children:te?a.jsx(Kq,{slide:o,onSave:pe,onCancel:()=>l(null)}):a.jsx(Wq,{slide:o,onSave:pe,onCancel:()=>l(null)})})]}):a.jsx("div",{className:"min-h-screen bg-gray-900",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Content Manager"}),a.jsx("p",{className:"text-gray-400",children:"Manage your lessons and slides with advanced editing tools"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:Ze,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(hd,{className:"w-4 h-4"}),a.jsx("span",{children:"New Lesson"})]}),a.jsxs("button",{onClick:()=>U(!0),className:"flex items-center space-x-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:[a.jsx(U2,{className:"w-4 h-4"}),a.jsx("span",{children:"Generate Lesson"})]}),a.jsxs("button",{onClick:()=>K(!te),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${te?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,title:te?"Switch to Basic Editor":"Switch to Advanced Editor",children:[a.jsx(Id,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:te?"Advanced":"Basic"})]}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-white transition-colors",children:a.jsx(_o,{className:"w-6 h-6"})})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search lessons...",value:F,onChange:ye=>L(ye.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-white placeholder-gray-400"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>N("grid"),className:`p-2 rounded-lg transition-colors ${I==="grid"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:a.jsx(C3,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>N("list"),className:`p-2 rounded-lg transition-colors ${I==="list"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:a.jsx(MB,{className:"w-5 h-5"})})]})]})]}),a.jsxs(bn,{children:[j&&a.jsxs(Ke.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded-lg flex items-center space-x-2",children:[a.jsx(To,{className:"w-5 h-5"}),a.jsx("span",{className:"flex-1",children:j}),a.jsxs("div",{className:"flex items-center space-x-2",children:[M>0&&a.jsxs("button",{onClick:ze,className:"flex items-center space-x-1 bg-red-600 text-white px-2 py-1 rounded text-sm hover:bg-red-700 transition-colors",children:[a.jsx(Ps,{className:"w-3 h-3"}),a.jsx("span",{children:"Retry"})]}),a.jsx("button",{onClick:()=>k(null),className:"text-red-300 hover:text-red-100",children:a.jsx(Wr,{className:"w-4 h-4"})})]})]}),ue&&a.jsxs(Ke.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 bg-green-900/50 border border-green-500 text-green-200 px-4 py-3 rounded-lg flex items-center space-x-2",children:[a.jsx(dg,{className:"w-5 h-5"}),a.jsx("span",{className:"flex-1",children:ue}),a.jsx("button",{onClick:()=>H(null),className:"text-green-300 hover:text-green-100",children:a.jsx(Wr,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:Le.map(ye=>a.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-gray-800 rounded-lg p-6 cursor-pointer transition-all duration-200 hover:bg-gray-700 hover:shadow-lg ${(r==null?void 0:r.id)===ye.id?"ring-2 ring-blue-500 bg-gray-700":""}`,onClick:()=>fe(ye),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"text-2xl",children:ye.icon||""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:ye.title}),a.jsx("p",{className:"text-sm text-gray-400",children:ye.difficulty})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),Fe(ye)},className:"p-2 text-gray-400 hover:text-white transition-colors",title:"Edit Lesson",children:a.jsx(Tk,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),Q(ye)},className:"p-2 text-gray-400 hover:text-red-400 transition-colors",title:"Delete Lesson",children:a.jsx(ua,{className:"w-4 h-4"})})]})]}),a.jsx("p",{className:"text-gray-300 text-sm mb-4 line-clamp-2",children:ye.description}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(Al,{className:"w-3 h-3"}),a.jsx("span",{children:ye.duration})]}),a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(Rr,{className:"w-3 h-3"}),a.jsx("span",{children:ye.targetAge})]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(xg,{className:"w-3 h-3"}),a.jsxs("span",{children:[ye.breakDuration||0,"m break"]})]})]}),(r==null?void 0:r.id)===ye.id&&a.jsxs(Ke.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 pt-4 border-t border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-300",children:["Slides (",s.length,")"]}),a.jsxs("button",{onClick:Ee=>{Ee.stopPropagation(),Xe()},className:"flex items-center space-x-1 bg-blue-600 text-white px-2 py-1 rounded text-sm hover:bg-blue-700 transition-colors",children:[a.jsx(hd,{className:"w-3 h-3"}),a.jsx("span",{children:"Add Slide"})]})]}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:s.length===0?a.jsxs("div",{className:"text-center py-4 text-gray-500",children:[a.jsx(_l,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No slides yet"})]}):s.map((Ee,et)=>a.jsxs(Ke.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:et*.1},className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-colors ${(u==null?void 0:u.uniqueKey)===Ee.uniqueKey?"bg-blue-600/20 border border-blue-500/30":"bg-gray-700/50 hover:bg-gray-700"}`,onClick:lt=>{lt.stopPropagation(),ie(Ee)},draggable:!0,onDragStart:lt=>ve(lt,Ee),onDragOver:Me,onDrop:lt=>Re(lt,Ee),children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${vt(Ee.type)}`}),a.jsxs("div",{className:"flex items-center space-x-2 min-w-0",children:[nt(Ee.type),a.jsxs("span",{className:"text-sm text-gray-300 truncate",children:[Ee.displayId,". ",Ee.title]})]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:lt=>{lt.stopPropagation(),me(Ee)},className:"p-1 text-gray-400 hover:text-white transition-colors",title:"Edit Slide",children:a.jsx(Tk,{className:"w-3 h-3"})}),a.jsx("button",{onClick:lt=>{lt.stopPropagation(),re(Ee)},className:"p-1 text-gray-400 hover:text-blue-400 transition-colors",title:"Duplicate Slide",children:a.jsx(D2,{className:"w-3 h-3"})}),a.jsx("button",{onClick:lt=>{lt.stopPropagation(),we(Ee.id)},className:"p-1 text-gray-400 hover:text-red-400 transition-colors",title:"Delete Slide",children:a.jsx(ua,{className:"w-3 h-3"})})]})]},Ee.uniqueKey))})]})]},`lesson-${ye.id}`))}),a.jsx(bn,{children:u&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",onClick:()=>h(null),children:a.jsxs(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:ye=>ye.stopPropagation(),children:[a.jsxs("div",{className:"bg-gray-700 px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[nt(u.type),a.jsx("h2",{className:"text-lg font-semibold text-white",children:u.title}),a.jsx("span",{className:"text-sm text-gray-400 bg-gray-600 px-2 py-1 rounded",children:u.type})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:()=>me(u),className:"flex items-center space-x-2 bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(cf,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit"})]}),a.jsx("button",{onClick:()=>h(null),className:"p-2 text-gray-400 hover:text-white transition-colors",children:a.jsx(Wr,{className:"w-5 h-5"})})]})]}),a.jsx("div",{className:"p-6",children:a.jsx(Zq,{slide:u,onEdit:me})})]})})}),a.jsx(bn,{children:ce&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",onClick:()=>U(!1),children:a.jsx(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:ye=>ye.stopPropagation(),children:a.jsx(Jq,{onGenerate:se,onCancel:()=>U(!1)})})})}),a.jsx(bn,{children:G&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",onClick:()=>Q(null),children:a.jsx(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg shadow-2xl max-w-md w-full p-6",onClick:ye=>ye.stopPropagation(),children:a.jsxs("div",{className:"text-center",children:[a.jsx(bs,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsxs("h3",{className:"text-lg font-semibold text-white mb-2",children:["Delete ",G.title,"?"]}),a.jsx("p",{className:"text-gray-300 mb-6",children:"This action cannot be undone. All slides in this lesson will also be deleted."}),a.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[a.jsxs("button",{onClick:()=>Q(null),className:"flex items-center space-x-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(Wr,{className:"w-4 h-4"}),a.jsx("span",{children:"Cancel"})]}),a.jsxs("button",{onClick:()=>{be(G.id),Q(null)},className:"flex items-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[a.jsx(ua,{className:"w-4 h-4"}),a.jsx("span",{children:"Delete"})]})]})]})})})}),a.jsx(bn,{children:x&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",onClick:()=>v(!1),children:a.jsx(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg shadow-2xl max-w-2xl w-full p-6",onClick:ye=>ye.stopPropagation(),children:a.jsx(tG,{lesson:f,onSave:ge,onCancel:()=>v(!1)})})})})]})})},tG=({lesson:t,onSave:e,onCancel:r})=>{const[n,s]=S.useState(t||{}),i=(l,u)=>{s(h=>({...h,[l]:u}))},o=()=>{e(n)};return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:t!=null&&t.id?"Edit Lesson":"Create New Lesson"}),a.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-white transition-colors",children:a.jsx(Wr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),a.jsx("input",{type:"text",value:n.title||"",onChange:l=>i("title",l.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter lesson title..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),a.jsx("textarea",{value:n.description||"",onChange:l=>i("description",l.target.value),rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter lesson description..."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Order"}),a.jsx("input",{type:"number",value:n.order||1,onChange:l=>i("order",parseInt(l.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (minutes)"}),a.jsx("input",{type:"number",value:n.duration||60,onChange:l=>i("duration",parseInt(l.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Difficulty"}),a.jsxs("select",{value:n.difficulty||"beginner",onChange:l=>i("difficulty",l.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"beginner",children:"Beginner"}),a.jsx("option",{value:"intermediate",children:"Intermediate"}),a.jsx("option",{value:"advanced",children:"Advanced"})]})]})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-8",children:[a.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),a.jsx("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t!=null&&t.id?"Update Lesson":"Create Lesson"})]})]})};var Hy={exports:{}},Wy,QT;function rG(){if(QT)return Wy;QT=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Wy=t,Wy}var qy,JT;function nG(){if(JT)return qy;JT=1;var t=rG();function e(){}function r(){}return r.resetWarningCache=e,qy=function(){function n(o,l,u,h,f,p){if(p!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},qy}var ZT;function sG(){return ZT||(ZT=1,Hy.exports=nG()()),Hy.exports}var aG=sG();const _r=Ew(aG),iG=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Od(t,e,r){const n=oG(t),{webkitRelativePath:s}=t,i=typeof e=="string"?e:typeof s=="string"&&s.length>0?s:`./${t.name}`;return typeof n.path!="string"&&e4(n,"path",i),e4(n,"relativePath",i),n}function oG(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const n=e.split(".").pop().toLowerCase(),s=iG.get(n);s&&Object.defineProperty(t,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return t}function e4(t,e,r){Object.defineProperty(t,e,{value:r,writable:!1,configurable:!1,enumerable:!0})}const lG=[".DS_Store","Thumbs.db"];function cG(t){return Xc(this,void 0,void 0,function*(){return mx(t)&&uG(t.dataTransfer)?mG(t.dataTransfer,t.type):dG(t)?hG(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?fG(t):[]})}function uG(t){return mx(t)}function dG(t){return mx(t)&&mx(t.target)}function mx(t){return typeof t=="object"&&t!==null}function hG(t){return ow(t.target.files).map(e=>Od(e))}function fG(t){return Xc(this,void 0,void 0,function*(){return(yield Promise.all(t.map(r=>r.getFile()))).map(r=>Od(r))})}function mG(t,e){return Xc(this,void 0,void 0,function*(){if(t.items){const r=ow(t.items).filter(s=>s.kind==="file");if(e!=="drop")return r;const n=yield Promise.all(r.map(pG));return t4(A6(n))}return t4(ow(t.files).map(r=>Od(r)))})}function t4(t){return t.filter(e=>lG.indexOf(e.name)===-1)}function ow(t){if(t===null)return[];const e=[];for(let r=0;r<t.length;r++){const n=t[r];e.push(n)}return e}function pG(t){if(typeof t.webkitGetAsEntry!="function")return r4(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?C6(e):r4(t,e)}function A6(t){return t.reduce((e,r)=>[...e,...Array.isArray(r)?A6(r):[r]],[])}function r4(t,e){return Xc(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const i=yield t.getAsFileSystemHandle();if(i===null)throw new Error(`${t} is not a File`);if(i!==void 0){const o=yield i.getFile();return o.handle=i,Od(o)}}const n=t.getAsFile();if(!n)throw new Error(`${t} is not a File`);return Od(n,(r=e==null?void 0:e.fullPath)!==null&&r!==void 0?r:void 0)})}function xG(t){return Xc(this,void 0,void 0,function*(){return t.isDirectory?C6(t):gG(t)})}function C6(t){const e=t.createReader();return new Promise((r,n)=>{const s=[];function i(){e.readEntries(o=>Xc(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(xG));s.push(l),i()}else try{const l=yield Promise.all(s);r(l)}catch(l){n(l)}}),o=>{n(o)})}i()})}function gG(t){return Xc(this,void 0,void 0,function*(){return new Promise((e,r)=>{t.file(n=>{const s=Od(n,t.fullPath);e(s)},n=>{r(n)})})})}var lp={},n4;function vG(){return n4||(n4=1,lp.__esModule=!0,lp.default=function(t,e){if(t&&e){var r=Array.isArray(e)?e:e.split(",");if(r.length===0)return!0;var n=t.name||"",s=(t.type||"").toLowerCase(),i=s.replace(/\/.*$/,"");return r.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?n.toLowerCase().endsWith(l):l.endsWith("/*")?i===l.replace(/\/.*$/,""):s===l})}return!0}),lp}var yG=vG();const Gy=Ew(yG);function s4(t){return _G(t)||bG(t)||R6(t)||wG()}function wG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _G(t){if(Array.isArray(t))return lw(t)}function a4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function i4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a4(Object(r),!0).forEach(function(n){I6(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function I6(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zf(t,e){return SG(t)||EG(t,e)||R6(t,e)||NG()}function NG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R6(t,e){if(t){if(typeof t=="string")return lw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lw(t,e)}}function lw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function EG(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],s=!0,i=!1,o,l;try{for(r=r.call(t);!(s=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));s=!0);}catch(u){i=!0,l=u}finally{try{!s&&r.return!=null&&r.return()}finally{if(i)throw l}}return n}}function SG(t){if(Array.isArray(t))return t}var kG=typeof Gy=="function"?Gy:Gy.default,TG="file-invalid-type",jG="file-too-large",AG="file-too-small",CG="too-many-files",IG=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=e.split(","),n=r.length>1?"one of ".concat(r.join(", ")):r[0];return{code:TG,message:"File type must be ".concat(n)}},o4=function(e){return{code:jG,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},l4=function(e){return{code:AG,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},RG={code:CG,message:"Too many files"};function P6(t,e){var r=t.type==="application/x-moz-file"||kG(t,e);return[r,r?null:IG(e)]}function D6(t,e,r){if(gc(t.size))if(gc(e)&&gc(r)){if(t.size>r)return[!1,o4(r)];if(t.size<e)return[!1,l4(e)]}else{if(gc(e)&&t.size<e)return[!1,l4(e)];if(gc(r)&&t.size>r)return[!1,o4(r)]}return[!0,null]}function gc(t){return t!=null}function PG(t){var e=t.files,r=t.accept,n=t.minSize,s=t.maxSize,i=t.multiple,o=t.maxFiles,l=t.validator;return!i&&e.length>1||i&&o>=1&&e.length>o?!1:e.every(function(u){var h=P6(u,r),f=zf(h,1),p=f[0],x=D6(u,n,s),v=zf(x,1),w=v[0],b=l?l(u):null;return p&&w&&!b})}function px(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function cp(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function c4(t){t.preventDefault()}function DG(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function FG(t){return t.indexOf("Edge/")!==-1}function LG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return DG(t)||FG(t)}function wi(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return e.some(function(l){return!px(n)&&l&&l.apply(void 0,[n].concat(i)),px(n)})}}function OG(){return"showOpenFilePicker"in window}function MG(t){if(gc(t)){var e=Object.entries(t).filter(function(r){var n=zf(r,2),s=n[0],i=n[1],o=!0;return F6(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(i)||!i.every(L6))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(r,n){var s=zf(n,2),i=s[0],o=s[1];return i4(i4({},r),{},I6({},i,o))},{});return[{description:"Files",accept:e}]}return t}function VG(t){if(gc(t))return Object.entries(t).reduce(function(e,r){var n=zf(r,2),s=n[0],i=n[1];return[].concat(s4(e),[s],s4(i))},[]).filter(function(e){return F6(e)||L6(e)}).join(",")}function BG(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function UG(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function F6(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function L6(t){return/^.*\.[\w]+$/.test(t)}var zG=["children"],$G=["open"],HG=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],WG=["refKey","onChange","onClick"];function qG(t){return XG(t)||KG(t)||O6(t)||GG()}function GG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function XG(t){if(Array.isArray(t))return cw(t)}function Ky(t,e){return JG(t)||QG(t,e)||O6(t,e)||YG()}function YG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O6(t,e){if(t){if(typeof t=="string")return cw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cw(t,e)}}function cw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function QG(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],s=!0,i=!1,o,l;try{for(r=r.call(t);!(s=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));s=!0);}catch(u){i=!0,l=u}finally{try{!s&&r.return!=null&&r.return()}finally{if(i)throw l}}return n}}function JG(t){if(Array.isArray(t))return t}function u4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function $r(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u4(Object(r),!0).forEach(function(n){uw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uw(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xx(t,e){if(t==null)return{};var r=ZG(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ZG(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}var Rb=S.forwardRef(function(t,e){var r=t.children,n=xx(t,zG),s=V6(n),i=s.open,o=xx(s,$G);return S.useImperativeHandle(e,function(){return{open:i}},[i]),Ic.createElement(S.Fragment,null,r($r($r({},o),{},{open:i})))});Rb.displayName="Dropzone";var M6={disabled:!1,getFilesFromEvent:cG,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Rb.defaultProps=M6;Rb.propTypes={children:_r.func,accept:_r.objectOf(_r.arrayOf(_r.string)),multiple:_r.bool,preventDropOnDocument:_r.bool,noClick:_r.bool,noKeyboard:_r.bool,noDrag:_r.bool,noDragEventsBubbling:_r.bool,minSize:_r.number,maxSize:_r.number,maxFiles:_r.number,disabled:_r.bool,getFilesFromEvent:_r.func,onFileDialogCancel:_r.func,onFileDialogOpen:_r.func,useFsAccessApi:_r.bool,autoFocus:_r.bool,onDragEnter:_r.func,onDragLeave:_r.func,onDragOver:_r.func,onDrop:_r.func,onDropAccepted:_r.func,onDropRejected:_r.func,onError:_r.func,validator:_r.func};var dw={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function V6(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=$r($r({},M6),t),r=e.accept,n=e.disabled,s=e.getFilesFromEvent,i=e.maxSize,o=e.minSize,l=e.multiple,u=e.maxFiles,h=e.onDragEnter,f=e.onDragLeave,p=e.onDragOver,x=e.onDrop,v=e.onDropAccepted,w=e.onDropRejected,b=e.onFileDialogCancel,_=e.onFileDialogOpen,R=e.useFsAccessApi,j=e.autoFocus,k=e.preventDropOnDocument,F=e.noClick,L=e.noKeyboard,I=e.noDrag,N=e.noDragEventsBubbling,T=e.onError,P=e.validator,B=S.useMemo(function(){return VG(r)},[r]),z=S.useMemo(function(){return MG(r)},[r]),O=S.useMemo(function(){return typeof _=="function"?_:d4},[_]),D=S.useMemo(function(){return typeof b=="function"?b:d4},[b]),G=S.useRef(null),Q=S.useRef(null),ue=S.useReducer(eK,dw),H=Ky(ue,2),te=H[0],K=H[1],ce=te.isFocused,U=te.isFileDialogActive,M=S.useRef(typeof window<"u"&&window.isSecureContext&&R&&OG()),X=function(){!M.current&&U&&setTimeout(function(){if(Q.current){var ye=Q.current.files;ye.length||(K({type:"closeDialog"}),D())}},300)};S.useEffect(function(){return window.addEventListener("focus",X,!1),function(){window.removeEventListener("focus",X,!1)}},[Q,U,D,M]);var Y=S.useRef([]),Z=function(ye){G.current&&G.current.contains(ye.target)||(ye.preventDefault(),Y.current=[])};S.useEffect(function(){return k&&(document.addEventListener("dragover",c4,!1),document.addEventListener("drop",Z,!1)),function(){k&&(document.removeEventListener("dragover",c4),document.removeEventListener("drop",Z))}},[G,k]),S.useEffect(function(){return!n&&j&&G.current&&G.current.focus(),function(){}},[G,j,n]);var fe=S.useCallback(function(Le){T?T(Le):console.error(Le)},[T]),ie=S.useCallback(function(Le){Le.preventDefault(),Le.persist(),Re(Le),Y.current=[].concat(qG(Y.current),[Le.target]),cp(Le)&&Promise.resolve(s(Le)).then(function(ye){if(!(px(Le)&&!N)){var Ee=ye.length,et=Ee>0&&PG({files:ye,accept:B,minSize:o,maxSize:i,multiple:l,maxFiles:u,validator:P}),lt=Ee>0&&!et;K({isDragAccept:et,isDragReject:lt,isDragActive:!0,type:"setDraggedFiles"}),h&&h(Le)}}).catch(function(ye){return fe(ye)})},[s,h,fe,N,B,o,i,l,u,P]),me=S.useCallback(function(Le){Le.preventDefault(),Le.persist(),Re(Le);var ye=cp(Le);if(ye&&Le.dataTransfer)try{Le.dataTransfer.dropEffect="copy"}catch{}return ye&&p&&p(Le),!1},[p,N]),pe=S.useCallback(function(Le){Le.preventDefault(),Le.persist(),Re(Le);var ye=Y.current.filter(function(et){return G.current&&G.current.contains(et)}),Ee=ye.indexOf(Le.target);Ee!==-1&&ye.splice(Ee,1),Y.current=ye,!(ye.length>0)&&(K({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),cp(Le)&&f&&f(Le))},[G,f,N]),we=S.useCallback(function(Le,ye){var Ee=[],et=[];Le.forEach(function(lt){var Lt=P6(lt,B),mt=Ky(Lt,2),Mt=mt[0],hr=mt[1],Jt=D6(lt,o,i),Vr=Ky(Jt,2),wr=Vr[0],Xr=Vr[1],sn=P?P(lt):null;if(Mt&&wr&&!sn)Ee.push(lt);else{var $n=[hr,Xr];sn&&($n=$n.concat(sn)),et.push({file:lt,errors:$n.filter(function(Ds){return Ds})})}}),(!l&&Ee.length>1||l&&u>=1&&Ee.length>u)&&(Ee.forEach(function(lt){et.push({file:lt,errors:[RG]})}),Ee.splice(0)),K({acceptedFiles:Ee,fileRejections:et,isDragReject:et.length>0,type:"setFiles"}),x&&x(Ee,et,ye),et.length>0&&w&&w(et,ye),Ee.length>0&&v&&v(Ee,ye)},[K,l,B,o,i,u,x,v,w,P]),Xe=S.useCallback(function(Le){Le.preventDefault(),Le.persist(),Re(Le),Y.current=[],cp(Le)&&Promise.resolve(s(Le)).then(function(ye){px(Le)&&!N||we(ye,Le)}).catch(function(ye){return fe(ye)}),K({type:"reset"})},[s,we,fe,N]),re=S.useCallback(function(){if(M.current){K({type:"openDialog"}),O();var Le={multiple:l,types:z};window.showOpenFilePicker(Le).then(function(ye){return s(ye)}).then(function(ye){we(ye,null),K({type:"closeDialog"})}).catch(function(ye){BG(ye)?(D(ye),K({type:"closeDialog"})):UG(ye)?(M.current=!1,Q.current?(Q.current.value=null,Q.current.click()):fe(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):fe(ye)});return}Q.current&&(K({type:"openDialog"}),O(),Q.current.value=null,Q.current.click())},[K,O,D,R,we,fe,z,l]),Ze=S.useCallback(function(Le){!G.current||!G.current.isEqualNode(Le.target)||(Le.key===" "||Le.key==="Enter"||Le.keyCode===32||Le.keyCode===13)&&(Le.preventDefault(),re())},[G,re]),Fe=S.useCallback(function(){K({type:"focus"})},[]),ge=S.useCallback(function(){K({type:"blur"})},[]),be=S.useCallback(function(){F||(LG()?setTimeout(re,0):re())},[F,re]),se=function(ye){return n?null:ye},ve=function(ye){return L?null:se(ye)},Me=function(ye){return I?null:se(ye)},Re=function(ye){N&&ye.stopPropagation()},ze=S.useMemo(function(){return function(){var Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ye=Le.refKey,Ee=ye===void 0?"ref":ye,et=Le.role,lt=Le.onKeyDown,Lt=Le.onFocus,mt=Le.onBlur,Mt=Le.onClick,hr=Le.onDragEnter,Jt=Le.onDragOver,Vr=Le.onDragLeave,wr=Le.onDrop,Xr=xx(Le,HG);return $r($r(uw({onKeyDown:ve(wi(lt,Ze)),onFocus:ve(wi(Lt,Fe)),onBlur:ve(wi(mt,ge)),onClick:se(wi(Mt,be)),onDragEnter:Me(wi(hr,ie)),onDragOver:Me(wi(Jt,me)),onDragLeave:Me(wi(Vr,pe)),onDrop:Me(wi(wr,Xe)),role:typeof et=="string"&&et!==""?et:"presentation"},Ee,G),!n&&!L?{tabIndex:0}:{}),Xr)}},[G,Ze,Fe,ge,be,ie,me,pe,Xe,L,I,n]),nt=S.useCallback(function(Le){Le.stopPropagation()},[]),vt=S.useMemo(function(){return function(){var Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ye=Le.refKey,Ee=ye===void 0?"ref":ye,et=Le.onChange,lt=Le.onClick,Lt=xx(Le,WG),mt=uw({accept:B,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:se(wi(et,Xe)),onClick:se(wi(lt,nt)),tabIndex:-1},Ee,Q);return $r($r({},mt),Lt)}},[Q,r,l,Xe,n]);return $r($r({},te),{},{isFocused:ce&&!n,getRootProps:ze,getInputProps:vt,rootRef:G,inputRef:Q,open:se(re)})}function eK(t,e){switch(e.type){case"focus":return $r($r({},t),{},{isFocused:!0});case"blur":return $r($r({},t),{},{isFocused:!1});case"openDialog":return $r($r({},dw),{},{isFileDialogActive:!0});case"closeDialog":return $r($r({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return $r($r({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return $r($r({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return $r({},dw);default:return t}}function d4(){}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var gx={};gx.version="0.18.5";var B6=1252,tK=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Pb={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Db=function(t){tK.indexOf(t)!=-1&&(B6=Pb[0]=t)};function rK(){Db(1252)}var ei=function(t){Db(t)};function Fb(){ei(1200),rK()}function h4(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function nK(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function U6(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var Jh=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?nK(t.slice(2)):e==254&&r==255?U6(t.slice(2)):e==65279?t.slice(1):t},up=function(e){return String.fromCharCode(e)},f4=function(e){return String.fromCharCode(e)},$f,pl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Hf(t){for(var e="",r=0,n=0,s=0,i=0,o=0,l=0,u=0,h=0;h<t.length;)r=t.charCodeAt(h++),i=r>>2,n=t.charCodeAt(h++),o=(r&3)<<4|n>>4,s=t.charCodeAt(h++),l=(n&15)<<2|s>>6,u=s&63,isNaN(n)?l=u=64:isNaN(s)&&(u=64),e+=pl.charAt(i)+pl.charAt(o)+pl.charAt(l)+pl.charAt(u);return e}function fa(t){var e="",r=0,n=0,s=0,i=0,o=0,l=0,u=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var h=0;h<t.length;)i=pl.indexOf(t.charAt(h++)),o=pl.indexOf(t.charAt(h++)),r=i<<2|o>>4,e+=String.fromCharCode(r),l=pl.indexOf(t.charAt(h++)),n=(o&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),u=pl.indexOf(t.charAt(h++)),s=(l&3)<<6|u,u!==64&&(e+=String.fromCharCode(s));return e}var Ht=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Ao=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Rl(t){return Ht?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function m4(t){return Ht?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var ia=function(e){return Ht?Ao(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Tg(t){if(typeof ArrayBuffer>"u")return ia(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function Hl(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function sK(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function Lb(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return Lb(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Mn=Ht?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Ao(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function aK(t){for(var e=[],r=0,n=t.length+250,s=Rl(t.length+255),i=0;i<t.length;++i){var o=t.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=t.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>n&&(e.push(s.slice(0,r)),r=0,s=Rl(65535),n=65530)}return e.push(s.slice(0,r)),Mn(e)}var Rs=/\u0000/g,Zh=/[\u0001-\u0006]/g;function fd(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function ti(t,e){var r=""+t;return r.length>=e?r:en("0",e-r.length)+r}function Ob(t,e){var r=""+t;return r.length>=e?r:en(" ",e-r.length)+r}function vx(t,e){var r=""+t;return r.length>=e?r:r+en(" ",e-r.length)}function iK(t,e){var r=""+Math.round(t);return r.length>=e?r:en("0",e-r.length)+r}function oK(t,e){var r=""+t;return r.length>=e?r:en("0",e-r.length)+r}var p4=Math.pow(2,32);function Hu(t,e){if(t>p4||t<-p4)return iK(t,e);var r=Math.round(t);return oK(r,e)}function yx(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var x4=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Xy=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function lK(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Tt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},g4={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},cK={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function wx(t,e,r){for(var n=t<0?-1:1,s=t*n,i=0,o=1,l=0,u=1,h=0,f=0,p=Math.floor(s);h<e&&(p=Math.floor(s),l=p*o+i,f=p*h+u,!(s-p<5e-8));)s=1/(s-p),i=o,o=l,u=h,h=f;if(f>e&&(h>e?(f=u,l=i):(f=h,l=o)),!r)return[0,n*l,f];var x=Math.floor(n*l/f);return[x,n*l-x*f,f]}function Ec(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),i=0,o=[],l={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var u=new Date(1900,0,1);u.setDate(u.getDate()+n-1),o=[u.getFullYear(),u.getMonth()+1,u.getDate()],i=u.getDay(),n<60&&(i=(i+6)%7),r&&(i=pK(u,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var z6=new Date(1899,11,31,0,0,0),uK=z6.getTime(),dK=new Date(1900,2,1,0,0,0);function $6(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=dK&&(r+=24*60*60*1e3),(r-(uK+(t.getTimezoneOffset()-z6.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Mb(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function hK(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function fK(t){var e=t<0?12:11,r=Mb(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function mK(t){var e=Mb(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function Wf(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=fK(t):e===10?r=t.toFixed(10).substr(0,12):r=mK(t),Mb(hK(r.toUpperCase()))}function zc(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Wf(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Da(14,$6(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function pK(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function xK(t,e,r,n){var s="",i=0,o=0,l=r.y,u,h=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:u=l%100,h=2;break;default:u=l%1e4,h=4;break}break;case 109:switch(e.length){case 1:case 2:u=r.m,h=e.length;break;case 3:return Xy[r.m-1][1];case 5:return Xy[r.m-1][0];default:return Xy[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:u=r.d,h=e.length;break;case 3:return x4[r.q][0];default:return x4[r.q][1]}break;case 104:switch(e.length){case 1:case 2:u=1+(r.H+11)%12,h=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:u=r.H,h=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:u=r.M,h=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?ti(r.S,e.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),e==="s"?i===0?"0":""+i/o:(s=ti(i,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":u=r.D*24+r.H;break;case"[m]":case"[mm]":u=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":u=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}h=e.length===3?1:2;break;case 101:u=l,h=1;break}var f=h>0?ti(u,h):"";return f}function xl(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var H6=/%/g;function gK(t,e,r){var n=e.replace(H6,""),s=e.length-n.length;return uo(t,n,r*Math.pow(10,2*s))+en("%",s)}function vK(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return uo(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function W6(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+W6(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,u,h,f){return u+h+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var q6=/# (\?+)( ?)\/( ?)(\d+)/;function yK(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),i=Math.floor(s/n),o=s-i*n,l=n;return r+(i===0?"":""+i)+" "+(o===0?en(" ",t[1].length+1+t[4].length):Ob(o,t[1].length)+t[2]+"/"+t[3]+ti(l,t[4].length))}function wK(t,e,r){return r+(e===0?"":""+e)+en(" ",t[1].length+2+t[4].length)}var G6=/^#*0*\.([0#]+)/,K6=/\).*[0#]/,X6=/\(###\) ###\\?-####/;function As(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function v4(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function y4(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function bK(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function _K(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Sa(t,e,r){if(t.charCodeAt(0)===40&&!e.match(K6)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Sa("n",n,r):"("+Sa("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return vK(t,e,r);if(e.indexOf("%")!==-1)return gK(t,e,r);if(e.indexOf("E")!==-1)return W6(e,r);if(e.charCodeAt(0)===36)return"$"+Sa(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,o,l,u=Math.abs(r),h=r<0?"-":"";if(e.match(/^00+$/))return h+Hu(u,e.length);if(e.match(/^[#?]+$/))return s=Hu(r,0),s==="0"&&(s=""),s.length>e.length?s:As(e.substr(0,e.length-s.length))+s;if(i=e.match(q6))return yK(i,u,h);if(e.match(/^#+0+$/))return h+Hu(u,e.length-e.indexOf("0"));if(i=e.match(G6))return s=v4(r,i[1].length).replace(/^([^\.]+)$/,"$1."+As(i[1])).replace(/\.$/,"."+As(i[1])).replace(/\.(\d*)$/,function(w,b){return"."+b+en("0",As(i[1]).length-b.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return h+v4(u,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return h+xl(Hu(u,0));if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Sa(t,e,-r):xl(""+(Math.floor(r)+bK(r,i[1].length)))+"."+ti(y4(r,i[1].length),i[1].length);if(i=e.match(/^#,#*,#0/))return Sa(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=fd(Sa(t,e.replace(/[\\-]/g,""),r)),o=0,fd(fd(e.replace(/\\/g,"")).replace(/[0#]/g,function(w){return o<s.length?s.charAt(o++):w==="0"?"0":""}));if(e.match(X6))return s=Sa(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=wx(u,Math.pow(10,o)-1,!1),s=""+h,f=uo("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=vx(l[2],o),f.length<i[4].length&&(f=As(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=wx(u,Math.pow(10,o)-1,!0),h+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Ob(l[1],o)+i[2]+"/"+i[3]+vx(l[2],o):en(" ",2*o+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=Hu(r,0),e.length<=s.length?s:As(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var p=e.indexOf(".")-o,x=e.length-s.length-p;return As(e.substr(0,p)+s+e.substr(e.length-x))}if(i=e.match(/^00,000\.([#0]*0)$/))return o=y4(r,i[1].length),r<0?"-"+Sa(t,e,-r):xl(_K(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?ti(0,3-w.length):"")+w})+"."+ti(o,i[1].length);switch(e){case"###,##0.00":return Sa(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var v=xl(Hu(u,0));return v!=="0"?h+v:"";case"###,###.00":return Sa(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Sa(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function NK(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return uo(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function EK(t,e,r){var n=e.replace(H6,""),s=e.length-n.length;return uo(t,n,r*Math.pow(10,2*s))+en("%",s)}function Y6(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Y6(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,u,h,f){return u+h+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function _i(t,e,r){if(t.charCodeAt(0)===40&&!e.match(K6)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?_i("n",n,r):"("+_i("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return NK(t,e,r);if(e.indexOf("%")!==-1)return EK(t,e,r);if(e.indexOf("E")!==-1)return Y6(e,r);if(e.charCodeAt(0)===36)return"$"+_i(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,o,l,u=Math.abs(r),h=r<0?"-":"";if(e.match(/^00+$/))return h+ti(u,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:As(e.substr(0,e.length-s.length))+s;if(i=e.match(q6))return wK(i,u,h);if(e.match(/^#+0+$/))return h+ti(u,e.length-e.indexOf("0"));if(i=e.match(G6))return s=(""+r).replace(/^([^\.]+)$/,"$1."+As(i[1])).replace(/\.$/,"."+As(i[1])),s=s.replace(/\.(\d*)$/,function(w,b){return"."+b+en("0",As(i[1]).length-b.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return h+(""+u).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return h+xl(""+u);if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+_i(t,e,-r):xl(""+r)+"."+en("0",i[1].length);if(i=e.match(/^#,#*,#0/))return _i(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=fd(_i(t,e.replace(/[\\-]/g,""),r)),o=0,fd(fd(e.replace(/\\/g,"")).replace(/[0#]/g,function(w){return o<s.length?s.charAt(o++):w==="0"?"0":""}));if(e.match(X6))return s=_i(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=wx(u,Math.pow(10,o)-1,!1),s=""+h,f=uo("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=vx(l[2],o),f.length<i[4].length&&(f=As(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=wx(u,Math.pow(10,o)-1,!0),h+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Ob(l[1],o)+i[2]+"/"+i[3]+vx(l[2],o):en(" ",2*o+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:As(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var p=e.indexOf(".")-o,x=e.length-s.length-p;return As(e.substr(0,p)+s+e.substr(e.length-x))}if(i=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+_i(t,e,-r):xl(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?ti(0,3-w.length):"")+w})+"."+ti(0,i[1].length);switch(e){case"###,###":case"##,###":case"#,###":var v=xl(""+u);return v!=="0"?h+v:"";default:if(e.match(/\.[0#?]*$/))return _i(t,e.slice(0,e.lastIndexOf(".")),r)+As(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function uo(t,e,r){return(r|0)===r?_i(t,e,r):Sa(t,e,r)}function SK(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var Q6=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function sh(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":yx(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(Q6))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function kK(t,e,r,n){for(var s=[],i="",o=0,l="",u="t",h,f,p,x="H";o<t.length;)switch(l=t.charAt(o)){case"G":if(!yx(t,o))throw new Error("unrecognized character "+l+" in "+t);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(p=t.charCodeAt(++o))!==34&&o<t.length;)i+=String.fromCharCode(p);s[s.length]={t:"t",v:i},++o;break;case"\\":var v=t.charAt(++o),w=v==="("||v===")"?v:"t";s[s.length]={t:w,v},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(h==null&&(h=Ec(e,r,t.charAt(o+1)==="2"),h==null))return"";s[s.length]={t:"X",v:t.substr(o,2)},u=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||h==null&&(h=Ec(e,r),h==null))return"";for(i=l;++o<t.length&&t.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&u.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=x),s[s.length]={t:l,v:i},u=l;break;case"A":case"a":case"":var b={t:l,v:l};if(h==null&&(h=Ec(e,r)),t.substr(o,3).toUpperCase()==="A/P"?(h!=null&&(b.v=h.H>=12?"P":"A"),b.t="T",x="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(h!=null&&(b.v=h.H>=12?"PM":"AM"),b.t="T",o+=5,x="h"):t.substr(o,5).toUpperCase()==="/"?(h!=null&&(b.v=h.H>=12?"":""),b.t="T",o+=5,x="h"):(b.t="t",++o),h==null&&b.t==="T")return"";s[s.length]=b,u=l;break;case"[":for(i=l;t.charAt(o++)!=="]"&&o<t.length;)i+=t.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(Q6)){if(h==null&&(h=Ec(e,r),h==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},u=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",sh(t)||(s[s.length]={t:"t",v:i}));break;case".":if(h!=null){for(i=l;++o<t.length&&(l=t.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;t.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},u=l;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)i+=t.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);s[s.length]={t:"t",v:l},++o;break}var _=0,R=0,j;for(o=s.length-1,u="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=x,u="h",_<1&&(_=1);break;case"s":(j=s[o].v.match(/\.0+$/))&&(R=Math.max(R,j[0].length-1)),_<3&&(_=3);case"d":case"y":case"M":case"e":u=s[o].t;break;case"m":u==="s"&&(s[o].t="M",_<2&&(_=2));break;case"X":break;case"Z":_<1&&s[o].v.match(/[Hh]/)&&(_=1),_<2&&s[o].v.match(/[Mm]/)&&(_=2),_<3&&s[o].v.match(/[Ss]/)&&(_=3)}switch(_){case 0:break;case 1:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M),h.M>=60&&(h.M=0,++h.H);break;case 2:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M);break}var k="",F;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=xK(s[o].t.charCodeAt(0),s[o].v,h,R),s[o].t="t";break;case"n":case"?":for(F=o+1;s[F]!=null&&((l=s[F].t)==="?"||l==="D"||(l===" "||l==="t")&&s[F+1]!=null&&(s[F+1].t==="?"||s[F+1].t==="t"&&s[F+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[F].v==="/"||s[F].v===" "&&s[F+1]!=null&&s[F+1].t=="?"));)s[o].v+=s[F].v,s[F]={v:"",t:";"},++F;k+=s[o].v,o=F-1;break;case"G":s[o].t="t",s[o].v=zc(e,r);break}var L="",I,N;if(k.length>0){k.charCodeAt(0)==40?(I=e<0&&k.charCodeAt(0)===45?-e:e,N=uo("n",k,I)):(I=e<0&&n>1?-e:e,N=uo("n",k,I),I<0&&s[0]&&s[0].t=="t"&&(N=N.substr(1),s[0].v="-"+s[0].v)),F=N.length-1;var T=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){T=o;break}var P=s.length;if(T===s.length&&N.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(F>=s[o].v.length-1?(F-=s[o].v.length,s[o].v=N.substr(F+1,s[o].v.length)):F<0?s[o].v="":(s[o].v=N.substr(0,F+1),F=-1),s[o].t="t",P=o);F>=0&&P<s.length&&(s[P].v=N.substr(0,F+1)+s[P].v)}else if(T!==s.length&&N.indexOf("E")===-1){for(F=N.indexOf(".")-1,o=T;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(f=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")-1:s[o].v.length-1,L=s[o].v.substr(f+1);f>=0;--f)F>=0&&(s[o].v.charAt(f)==="0"||s[o].v.charAt(f)==="#")&&(L=N.charAt(F--)+L);s[o].v=L,s[o].t="t",P=o}for(F>=0&&P<s.length&&(s[P].v=N.substr(0,F+1)+s[P].v),F=N.indexOf(".")+1,o=T;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==T)){for(f=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")+1:0,L=s[o].v.substr(0,f);f<s[o].v.length;++f)F<N.length&&(L+=N.charAt(F++));s[o].v=L,s[o].t="t",P=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(I=n>1&&e<0&&o>0&&s[o-1].v==="-"?-e:e,s[o].v=uo(s[o].t,s[o].v,I),s[o].t="t");var B="";for(o=0;o!==s.length;++o)s[o]!=null&&(B+=s[o].v);return B}var w4=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function b4(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function TK(t,e){var r=SK(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(w4),l=r[1].match(w4);return b4(e,o)?[n,r[0]]:b4(e,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,i]}function Da(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Tt)[t],n==null&&(n=r.table&&r.table[g4[t]]||Tt[g4[t]]),n==null&&(n=cK[t]||"General");break}if(yx(n,0))return zc(e,r);e instanceof Date&&(e=$6(e,r.date1904));var s=TK(n,e);if(yx(s[1]))return zc(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return kK(s[1],e,r,s[0])}function ho(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Tt[r]==null){e<0&&(e=r);continue}if(Tt[r]==t){e=r;break}}e<0&&(e=391)}return Tt[e]=t,e}function jg(t){for(var e=0;e!=392;++e)t[e]!==void 0&&ho(t[e],e)}function ah(){Tt=lK()}var jK={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},J6=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function AK(t){var e=typeof t=="number"?Tt[t]:t;return e=e.replace(J6,"(\\d+)"),new RegExp("^"+e+"$")}function CK(t,e,r){var n=-1,s=-1,i=-1,o=-1,l=-1,u=-1;(e.match(J6)||[]).forEach(function(p,x){var v=parseInt(r[x+1],10);switch(p.toLowerCase().charAt(0)){case"y":n=v;break;case"d":i=v;break;case"h":o=v;break;case"s":u=v;break;case"m":o>=0?l=v:s=v;break}}),u>=0&&l==-1&&s>=0&&(l=s,s=-1);var h=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);h.length==7&&(h="0"+h),h.length==8&&(h="20"+h);var f=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2);return o==-1&&l==-1&&u==-1?h:n==-1&&s==-1&&i==-1?f:h+"T"+f}var IK=function(){var t={};t.version="1.2.0";function e(){for(var N=0,T=new Array(256),P=0;P!=256;++P)N=P,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,T[P]=N;return typeof Int32Array<"u"?new Int32Array(T):T}var r=e();function n(N){var T=0,P=0,B=0,z=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)z[B]=N[B];for(B=0;B!=256;++B)for(P=N[B],T=256+B;T<4096;T+=256)P=z[T]=P>>>8^N[P&255];var O=[];for(B=1;B!=16;++B)O[B-1]=typeof Int32Array<"u"?z.subarray(B*256,B*256+256):z.slice(B*256,B*256+256);return O}var s=n(r),i=s[0],o=s[1],l=s[2],u=s[3],h=s[4],f=s[5],p=s[6],x=s[7],v=s[8],w=s[9],b=s[10],_=s[11],R=s[12],j=s[13],k=s[14];function F(N,T){for(var P=T^-1,B=0,z=N.length;B<z;)P=P>>>8^r[(P^N.charCodeAt(B++))&255];return~P}function L(N,T){for(var P=T^-1,B=N.length-15,z=0;z<B;)P=k[N[z++]^P&255]^j[N[z++]^P>>8&255]^R[N[z++]^P>>16&255]^_[N[z++]^P>>>24]^b[N[z++]]^w[N[z++]]^v[N[z++]]^x[N[z++]]^p[N[z++]]^f[N[z++]]^h[N[z++]]^u[N[z++]]^l[N[z++]]^o[N[z++]]^i[N[z++]]^r[N[z++]];for(B+=15;z<B;)P=P>>>8^r[(P^N[z++])&255];return~P}function I(N,T){for(var P=T^-1,B=0,z=N.length,O=0,D=0;B<z;)O=N.charCodeAt(B++),O<128?P=P>>>8^r[(P^O)&255]:O<2048?(P=P>>>8^r[(P^(192|O>>6&31))&255],P=P>>>8^r[(P^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,D=N.charCodeAt(B++)&1023,P=P>>>8^r[(P^(240|O>>8&7))&255],P=P>>>8^r[(P^(128|O>>2&63))&255],P=P>>>8^r[(P^(128|D>>6&15|(O&3)<<4))&255],P=P>>>8^r[(P^(128|D&63))&255]):(P=P>>>8^r[(P^(224|O>>12&15))&255],P=P>>>8^r[(P^(128|O>>6&63))&255],P=P>>>8^r[(P^(128|O&63))&255]);return~P}return t.table=r,t.bstr=F,t.buf=L,t.str=I,t}(),Nt=function(){var e={};e.version="1.2.1";function r(q,ae){for(var ee=q.split("/"),ne=ae.split("/"),oe=0,le=0,Se=Math.min(ee.length,ne.length);oe<Se;++oe){if(le=ee[oe].length-ne[oe].length)return le;if(ee[oe]!=ne[oe])return ee[oe]<ne[oe]?-1:1}return ee.length-ne.length}function n(q){if(q.charAt(q.length-1)=="/")return q.slice(0,-1).indexOf("/")===-1?q:n(q.slice(0,-1));var ae=q.lastIndexOf("/");return ae===-1?q:q.slice(0,ae+1)}function s(q){if(q.charAt(q.length-1)=="/")return s(q.slice(0,-1));var ae=q.lastIndexOf("/");return ae===-1?q:q.slice(ae+1)}function i(q,ae){typeof ae=="string"&&(ae=new Date(ae));var ee=ae.getHours();ee=ee<<6|ae.getMinutes(),ee=ee<<5|ae.getSeconds()>>>1,q.write_shift(2,ee);var ne=ae.getFullYear()-1980;ne=ne<<4|ae.getMonth()+1,ne=ne<<5|ae.getDate(),q.write_shift(2,ne)}function o(q){var ae=q.read_shift(2)&65535,ee=q.read_shift(2)&65535,ne=new Date,oe=ee&31;ee>>>=5;var le=ee&15;ee>>>=4,ne.setMilliseconds(0),ne.setFullYear(ee+1980),ne.setMonth(le-1),ne.setDate(oe);var Se=ae&31;ae>>>=5;var De=ae&63;return ae>>>=6,ne.setHours(ae),ne.setMinutes(De),ne.setSeconds(Se<<1),ne}function l(q){Jn(q,0);for(var ae={},ee=0;q.l<=q.length-4;){var ne=q.read_shift(2),oe=q.read_shift(2),le=q.l+oe,Se={};switch(ne){case 21589:ee=q.read_shift(1),ee&1&&(Se.mtime=q.read_shift(4)),oe>5&&(ee&2&&(Se.atime=q.read_shift(4)),ee&4&&(Se.ctime=q.read_shift(4))),Se.mtime&&(Se.mt=new Date(Se.mtime*1e3));break}q.l=le,ae[ne]=Se}return ae}var u;function h(){return u||(u={})}function f(q,ae){if(q[0]==80&&q[1]==75)return ma(q,ae);if((q[0]|32)==109&&(q[1]|32)==105)return Kl(q,ae);if(q.length<512)throw new Error("CFB file size "+q.length+" < 512");var ee=3,ne=512,oe=0,le=0,Se=0,De=0,ke=0,je=[],Ae=q.slice(0,512);Jn(Ae,0);var Ge=p(Ae);switch(ee=Ge[0],ee){case 3:ne=512;break;case 4:ne=4096;break;case 0:if(Ge[1]==0)return ma(q,ae);default:throw new Error("Major Version: Expected 3 or 4 saw "+ee)}ne!==512&&(Ae=q.slice(0,ne),Jn(Ae,28));var st=q.slice(0,ne);x(Ae,ee);var dt=Ae.read_shift(4,"i");if(ee===3&&dt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+dt);Ae.l+=4,Se=Ae.read_shift(4,"i"),Ae.l+=4,Ae.chk("00100000","Mini Stream Cutoff Size: "),De=Ae.read_shift(4,"i"),oe=Ae.read_shift(4,"i"),ke=Ae.read_shift(4,"i"),le=Ae.read_shift(4,"i");for(var Je=-1,Ye=0;Ye<109&&(Je=Ae.read_shift(4,"i"),!(Je<0));++Ye)je[Ye]=Je;var It=v(q,ne);_(ke,le,It,ne,je);var lr=j(It,Se,je,ne);lr[Se].name="!Directory",oe>0&&De!==D&&(lr[De].name="!MiniFAT"),lr[je[0]].name="!FAT",lr.fat_addrs=je,lr.ssz=ne;var ar={},fr=[],Ma=[],ui=[];k(Se,lr,It,fr,oe,ar,Ma,De),w(Ma,ui,fr),fr.shift();var Ys={FileIndex:Ma,FullPaths:ui};return ae&&ae.raw&&(Ys.raw={header:st,sectors:It}),Ys}function p(q){if(q[q.l]==80&&q[q.l+1]==75)return[0,0];q.chk(G,"Header Signature: "),q.l+=16;var ae=q.read_shift(2,"u");return[q.read_shift(2,"u"),ae]}function x(q,ae){var ee=9;switch(q.l+=2,ee=q.read_shift(2)){case 9:if(ae!=3)throw new Error("Sector Shift: Expected 9 saw "+ee);break;case 12:if(ae!=4)throw new Error("Sector Shift: Expected 12 saw "+ee);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ee)}q.chk("0600","Mini Sector Shift: "),q.chk("000000000000","Reserved: ")}function v(q,ae){for(var ee=Math.ceil(q.length/ae)-1,ne=[],oe=1;oe<ee;++oe)ne[oe-1]=q.slice(oe*ae,(oe+1)*ae);return ne[ee-1]=q.slice(ee*ae),ne}function w(q,ae,ee){for(var ne=0,oe=0,le=0,Se=0,De=0,ke=ee.length,je=[],Ae=[];ne<ke;++ne)je[ne]=Ae[ne]=ne,ae[ne]=ee[ne];for(;De<Ae.length;++De)ne=Ae[De],oe=q[ne].L,le=q[ne].R,Se=q[ne].C,je[ne]===ne&&(oe!==-1&&je[oe]!==oe&&(je[ne]=je[oe]),le!==-1&&je[le]!==le&&(je[ne]=je[le])),Se!==-1&&(je[Se]=ne),oe!==-1&&ne!=je[ne]&&(je[oe]=je[ne],Ae.lastIndexOf(oe)<De&&Ae.push(oe)),le!==-1&&ne!=je[ne]&&(je[le]=je[ne],Ae.lastIndexOf(le)<De&&Ae.push(le));for(ne=1;ne<ke;++ne)je[ne]===ne&&(le!==-1&&je[le]!==le?je[ne]=je[le]:oe!==-1&&je[oe]!==oe&&(je[ne]=je[oe]));for(ne=1;ne<ke;++ne)if(q[ne].type!==0){if(De=ne,De!=je[De])do De=je[De],ae[ne]=ae[De]+"/"+ae[ne];while(De!==0&&je[De]!==-1&&De!=je[De]);je[ne]=-1}for(ae[0]+="/",ne=1;ne<ke;++ne)q[ne].type!==2&&(ae[ne]+="/")}function b(q,ae,ee){for(var ne=q.start,oe=q.size,le=[],Se=ne;ee&&oe>0&&Se>=0;)le.push(ae.slice(Se*O,Se*O+O)),oe-=O,Se=vc(ee,Se*4);return le.length===0?Oe(0):Mn(le).slice(0,q.size)}function _(q,ae,ee,ne,oe){var le=D;if(q===D){if(ae!==0)throw new Error("DIFAT chain shorter than expected")}else if(q!==-1){var Se=ee[q],De=(ne>>>2)-1;if(!Se)return;for(var ke=0;ke<De&&(le=vc(Se,ke*4))!==D;++ke)oe.push(le);_(vc(Se,ne-4),ae-1,ee,ne,oe)}}function R(q,ae,ee,ne,oe){var le=[],Se=[];oe||(oe=[]);var De=ne-1,ke=0,je=0;for(ke=ae;ke>=0;){oe[ke]=!0,le[le.length]=ke,Se.push(q[ke]);var Ae=ee[Math.floor(ke*4/ne)];if(je=ke*4&De,ne<4+je)throw new Error("FAT boundary crossed: "+ke+" 4 "+ne);if(!q[Ae])break;ke=vc(q[Ae],je)}return{nodes:le,data:P4([Se])}}function j(q,ae,ee,ne){var oe=q.length,le=[],Se=[],De=[],ke=[],je=ne-1,Ae=0,Ge=0,st=0,dt=0;for(Ae=0;Ae<oe;++Ae)if(De=[],st=Ae+ae,st>=oe&&(st-=oe),!Se[st]){ke=[];var Je=[];for(Ge=st;Ge>=0;){Je[Ge]=!0,Se[Ge]=!0,De[De.length]=Ge,ke.push(q[Ge]);var Ye=ee[Math.floor(Ge*4/ne)];if(dt=Ge*4&je,ne<4+dt)throw new Error("FAT boundary crossed: "+Ge+" 4 "+ne);if(!q[Ye]||(Ge=vc(q[Ye],dt),Je[Ge]))break}le[st]={nodes:De,data:P4([ke])}}return le}function k(q,ae,ee,ne,oe,le,Se,De){for(var ke=0,je=ne.length?2:0,Ae=ae[q].data,Ge=0,st=0,dt;Ge<Ae.length;Ge+=128){var Je=Ae.slice(Ge,Ge+128);Jn(Je,64),st=Je.read_shift(2),dt=Wb(Je,0,st-je),ne.push(dt);var Ye={name:dt,type:Je.read_shift(1),color:Je.read_shift(1),L:Je.read_shift(4,"i"),R:Je.read_shift(4,"i"),C:Je.read_shift(4,"i"),clsid:Je.read_shift(16),state:Je.read_shift(4,"i"),start:0,size:0},It=Je.read_shift(2)+Je.read_shift(2)+Je.read_shift(2)+Je.read_shift(2);It!==0&&(Ye.ct=F(Je,Je.l-8));var lr=Je.read_shift(2)+Je.read_shift(2)+Je.read_shift(2)+Je.read_shift(2);lr!==0&&(Ye.mt=F(Je,Je.l-8)),Ye.start=Je.read_shift(4,"i"),Ye.size=Je.read_shift(4,"i"),Ye.size<0&&Ye.start<0&&(Ye.size=Ye.type=0,Ye.start=D,Ye.name=""),Ye.type===5?(ke=Ye.start,oe>0&&ke!==D&&(ae[ke].name="!StreamData")):Ye.size>=4096?(Ye.storage="fat",ae[Ye.start]===void 0&&(ae[Ye.start]=R(ee,Ye.start,ae.fat_addrs,ae.ssz)),ae[Ye.start].name=Ye.name,Ye.content=ae[Ye.start].data.slice(0,Ye.size)):(Ye.storage="minifat",Ye.size<0?Ye.size=0:ke!==D&&Ye.start!==D&&ae[ke]&&(Ye.content=b(Ye,ae[ke].data,(ae[De]||{}).data))),Ye.content&&Jn(Ye.content,0),le[dt]=Ye,Se.push(Ye)}}function F(q,ae){return new Date((aa(q,ae+4)/1e7*Math.pow(2,32)+aa(q,ae)/1e7-11644473600)*1e3)}function L(q,ae){return h(),f(u.readFileSync(q),ae)}function I(q,ae){var ee=ae&&ae.type;switch(ee||Ht&&Buffer.isBuffer(q)&&(ee="buffer"),ee||"base64"){case"file":return L(q,ae);case"base64":return f(ia(fa(q)),ae);case"binary":return f(ia(q),ae)}return f(q,ae)}function N(q,ae){var ee=ae||{},ne=ee.root||"Root Entry";if(q.FullPaths||(q.FullPaths=[]),q.FileIndex||(q.FileIndex=[]),q.FullPaths.length!==q.FileIndex.length)throw new Error("inconsistent CFB structure");q.FullPaths.length===0&&(q.FullPaths[0]=ne+"/",q.FileIndex[0]={name:ne,type:5}),ee.CLSID&&(q.FileIndex[0].clsid=ee.CLSID),T(q)}function T(q){var ae="Sh33tJ5";if(!Nt.find(q,"/"+ae)){var ee=Oe(4);ee[0]=55,ee[1]=ee[3]=50,ee[2]=54,q.FileIndex.push({name:ae,type:2,content:ee,size:4,L:69,R:69,C:69}),q.FullPaths.push(q.FullPaths[0]+ae),P(q)}}function P(q,ae){N(q);for(var ee=!1,ne=!1,oe=q.FullPaths.length-1;oe>=0;--oe){var le=q.FileIndex[oe];switch(le.type){case 0:ne?ee=!0:(q.FileIndex.pop(),q.FullPaths.pop());break;case 1:case 2:case 5:ne=!0,isNaN(le.R*le.L*le.C)&&(ee=!0),le.R>-1&&le.L>-1&&le.R==le.L&&(ee=!0);break;default:ee=!0;break}}if(!(!ee&&!ae)){var Se=new Date(1987,1,19),De=0,ke=Object.create?Object.create(null):{},je=[];for(oe=0;oe<q.FullPaths.length;++oe)ke[q.FullPaths[oe]]=!0,q.FileIndex[oe].type!==0&&je.push([q.FullPaths[oe],q.FileIndex[oe]]);for(oe=0;oe<je.length;++oe){var Ae=n(je[oe][0]);ne=ke[Ae],ne||(je.push([Ae,{name:s(Ae).replace("/",""),type:1,clsid:ue,ct:Se,mt:Se,content:null}]),ke[Ae]=!0)}for(je.sort(function(dt,Je){return r(dt[0],Je[0])}),q.FullPaths=[],q.FileIndex=[],oe=0;oe<je.length;++oe)q.FullPaths[oe]=je[oe][0],q.FileIndex[oe]=je[oe][1];for(oe=0;oe<je.length;++oe){var Ge=q.FileIndex[oe],st=q.FullPaths[oe];if(Ge.name=s(st).replace("/",""),Ge.L=Ge.R=Ge.C=-(Ge.color=1),Ge.size=Ge.content?Ge.content.length:0,Ge.start=0,Ge.clsid=Ge.clsid||ue,oe===0)Ge.C=je.length>1?1:-1,Ge.size=0,Ge.type=5;else if(st.slice(-1)=="/"){for(De=oe+1;De<je.length&&n(q.FullPaths[De])!=st;++De);for(Ge.C=De>=je.length?-1:De,De=oe+1;De<je.length&&n(q.FullPaths[De])!=n(st);++De);Ge.R=De>=je.length?-1:De,Ge.type=1}else n(q.FullPaths[oe+1]||"")==n(st)&&(Ge.R=oe+1),Ge.type=2}}}function B(q,ae){var ee=ae||{};if(ee.fileType=="mad")return Br(q,ee);switch(P(q),ee.fileType){case"zip":return Wt(q,ee)}var ne=function(dt){for(var Je=0,Ye=0,It=0;It<dt.FileIndex.length;++It){var lr=dt.FileIndex[It];if(lr.content){var ar=lr.content.length;ar>0&&(ar<4096?Je+=ar+63>>6:Ye+=ar+511>>9)}}for(var fr=dt.FullPaths.length+3>>2,Ma=Je+7>>3,ui=Je+127>>7,Ys=Ma+Ye+fr+ui,an=Ys+127>>7,Do=an<=109?0:Math.ceil((an-109)/127);Ys+an+Do+127>>7>an;)Do=++an<=109?0:Math.ceil((an-109)/127);var kr=[1,Do,an,ui,fr,Ye,Je,0];return dt.FileIndex[0].size=Je<<6,kr[7]=(dt.FileIndex[0].start=kr[0]+kr[1]+kr[2]+kr[3]+kr[4]+kr[5])+(kr[6]+7>>3),kr}(q),oe=Oe(ne[7]<<9),le=0,Se=0;{for(le=0;le<8;++le)oe.write_shift(1,Q[le]);for(le=0;le<8;++le)oe.write_shift(2,0);for(oe.write_shift(2,62),oe.write_shift(2,3),oe.write_shift(2,65534),oe.write_shift(2,9),oe.write_shift(2,6),le=0;le<3;++le)oe.write_shift(2,0);for(oe.write_shift(4,0),oe.write_shift(4,ne[2]),oe.write_shift(4,ne[0]+ne[1]+ne[2]+ne[3]-1),oe.write_shift(4,0),oe.write_shift(4,4096),oe.write_shift(4,ne[3]?ne[0]+ne[1]+ne[2]-1:D),oe.write_shift(4,ne[3]),oe.write_shift(-4,ne[1]?ne[0]-1:D),oe.write_shift(4,ne[1]),le=0;le<109;++le)oe.write_shift(-4,le<ne[2]?ne[1]+le:-1)}if(ne[1])for(Se=0;Se<ne[1];++Se){for(;le<236+Se*127;++le)oe.write_shift(-4,le<ne[2]?ne[1]+le:-1);oe.write_shift(-4,Se===ne[1]-1?D:Se+1)}var De=function(dt){for(Se+=dt;le<Se-1;++le)oe.write_shift(-4,le+1);dt&&(++le,oe.write_shift(-4,D))};for(Se=le=0,Se+=ne[1];le<Se;++le)oe.write_shift(-4,H.DIFSECT);for(Se+=ne[2];le<Se;++le)oe.write_shift(-4,H.FATSECT);De(ne[3]),De(ne[4]);for(var ke=0,je=0,Ae=q.FileIndex[0];ke<q.FileIndex.length;++ke)Ae=q.FileIndex[ke],Ae.content&&(je=Ae.content.length,!(je<4096)&&(Ae.start=Se,De(je+511>>9)));for(De(ne[6]+7>>3);oe.l&511;)oe.write_shift(-4,H.ENDOFCHAIN);for(Se=le=0,ke=0;ke<q.FileIndex.length;++ke)Ae=q.FileIndex[ke],Ae.content&&(je=Ae.content.length,!(!je||je>=4096)&&(Ae.start=Se,De(je+63>>6)));for(;oe.l&511;)oe.write_shift(-4,H.ENDOFCHAIN);for(le=0;le<ne[4]<<2;++le){var Ge=q.FullPaths[le];if(!Ge||Ge.length===0){for(ke=0;ke<17;++ke)oe.write_shift(4,0);for(ke=0;ke<3;++ke)oe.write_shift(4,-1);for(ke=0;ke<12;++ke)oe.write_shift(4,0);continue}Ae=q.FileIndex[le],le===0&&(Ae.start=Ae.size?Ae.start-1:D);var st=le===0&&ee.root||Ae.name;if(je=2*(st.length+1),oe.write_shift(64,st,"utf16le"),oe.write_shift(2,je),oe.write_shift(1,Ae.type),oe.write_shift(1,Ae.color),oe.write_shift(-4,Ae.L),oe.write_shift(-4,Ae.R),oe.write_shift(-4,Ae.C),Ae.clsid)oe.write_shift(16,Ae.clsid,"hex");else for(ke=0;ke<4;++ke)oe.write_shift(4,0);oe.write_shift(4,Ae.state||0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,Ae.start),oe.write_shift(4,Ae.size),oe.write_shift(4,0)}for(le=1;le<q.FileIndex.length;++le)if(Ae=q.FileIndex[le],Ae.size>=4096)if(oe.l=Ae.start+1<<9,Ht&&Buffer.isBuffer(Ae.content))Ae.content.copy(oe,oe.l,0,Ae.size),oe.l+=Ae.size+511&-512;else{for(ke=0;ke<Ae.size;++ke)oe.write_shift(1,Ae.content[ke]);for(;ke&511;++ke)oe.write_shift(1,0)}for(le=1;le<q.FileIndex.length;++le)if(Ae=q.FileIndex[le],Ae.size>0&&Ae.size<4096)if(Ht&&Buffer.isBuffer(Ae.content))Ae.content.copy(oe,oe.l,0,Ae.size),oe.l+=Ae.size+63&-64;else{for(ke=0;ke<Ae.size;++ke)oe.write_shift(1,Ae.content[ke]);for(;ke&63;++ke)oe.write_shift(1,0)}if(Ht)oe.l=oe.length;else for(;oe.l<oe.length;)oe.write_shift(1,0);return oe}function z(q,ae){var ee=q.FullPaths.map(function(ke){return ke.toUpperCase()}),ne=ee.map(function(ke){var je=ke.split("/");return je[je.length-(ke.slice(-1)=="/"?2:1)]}),oe=!1;ae.charCodeAt(0)===47?(oe=!0,ae=ee[0].slice(0,-1)+ae):oe=ae.indexOf("/")!==-1;var le=ae.toUpperCase(),Se=oe===!0?ee.indexOf(le):ne.indexOf(le);if(Se!==-1)return q.FileIndex[Se];var De=!le.match(Zh);for(le=le.replace(Rs,""),De&&(le=le.replace(Zh,"!")),Se=0;Se<ee.length;++Se)if((De?ee[Se].replace(Zh,"!"):ee[Se]).replace(Rs,"")==le||(De?ne[Se].replace(Zh,"!"):ne[Se]).replace(Rs,"")==le)return q.FileIndex[Se];return null}var O=64,D=-2,G="d0cf11e0a1b11ae1",Q=[208,207,17,224,161,177,26,225],ue="00000000000000000000000000000000",H={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:G,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ue,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function te(q,ae,ee){h();var ne=B(q,ee);u.writeFileSync(ae,ne)}function K(q){for(var ae=new Array(q.length),ee=0;ee<q.length;++ee)ae[ee]=String.fromCharCode(q[ee]);return ae.join("")}function ce(q,ae){var ee=B(q,ae);switch(ae&&ae.type||"buffer"){case"file":return h(),u.writeFileSync(ae.filename,ee),ee;case"binary":return typeof ee=="string"?ee:K(ee);case"base64":return Hf(typeof ee=="string"?ee:K(ee));case"buffer":if(Ht)return Buffer.isBuffer(ee)?ee:Ao(ee);case"array":return typeof ee=="string"?ia(ee):ee}return ee}var U;function M(q){try{var ae=q.InflateRaw,ee=new ae;if(ee._processChunk(new Uint8Array([3,0]),ee._finishFlushFlag),ee.bytesRead)U=q;else throw new Error("zlib does not expose bytesRead")}catch(ne){console.error("cannot use native zlib: "+(ne.message||ne))}}function X(q,ae){if(!U)return $n(q,ae);var ee=U.InflateRaw,ne=new ee,oe=ne._processChunk(q.slice(q.l),ne._finishFlushFlag);return q.l+=ne.bytesRead,oe}function Y(q){return U?U.deflateRawSync(q):mt(q)}var Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ie=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function me(q){var ae=(q<<1|q<<11)&139536|(q<<5|q<<15)&558144;return(ae>>16|ae>>8|ae)&255}for(var pe=typeof Uint8Array<"u",we=pe?new Uint8Array(256):[],Xe=0;Xe<256;++Xe)we[Xe]=me(Xe);function re(q,ae){var ee=we[q&255];return ae<=8?ee>>>8-ae:(ee=ee<<8|we[q>>8&255],ae<=16?ee>>>16-ae:(ee=ee<<8|we[q>>16&255],ee>>>24-ae))}function Ze(q,ae){var ee=ae&7,ne=ae>>>3;return(q[ne]|(ee<=6?0:q[ne+1]<<8))>>>ee&3}function Fe(q,ae){var ee=ae&7,ne=ae>>>3;return(q[ne]|(ee<=5?0:q[ne+1]<<8))>>>ee&7}function ge(q,ae){var ee=ae&7,ne=ae>>>3;return(q[ne]|(ee<=4?0:q[ne+1]<<8))>>>ee&15}function be(q,ae){var ee=ae&7,ne=ae>>>3;return(q[ne]|(ee<=3?0:q[ne+1]<<8))>>>ee&31}function se(q,ae){var ee=ae&7,ne=ae>>>3;return(q[ne]|(ee<=1?0:q[ne+1]<<8))>>>ee&127}function ve(q,ae,ee){var ne=ae&7,oe=ae>>>3,le=(1<<ee)-1,Se=q[oe]>>>ne;return ee<8-ne||(Se|=q[oe+1]<<8-ne,ee<16-ne)||(Se|=q[oe+2]<<16-ne,ee<24-ne)||(Se|=q[oe+3]<<24-ne),Se&le}function Me(q,ae,ee){var ne=ae&7,oe=ae>>>3;return ne<=5?q[oe]|=(ee&7)<<ne:(q[oe]|=ee<<ne&255,q[oe+1]=(ee&7)>>8-ne),ae+3}function Re(q,ae,ee){var ne=ae&7,oe=ae>>>3;return ee=(ee&1)<<ne,q[oe]|=ee,ae+1}function ze(q,ae,ee){var ne=ae&7,oe=ae>>>3;return ee<<=ne,q[oe]|=ee&255,ee>>>=8,q[oe+1]=ee,ae+8}function nt(q,ae,ee){var ne=ae&7,oe=ae>>>3;return ee<<=ne,q[oe]|=ee&255,ee>>>=8,q[oe+1]=ee&255,q[oe+2]=ee>>>8,ae+16}function vt(q,ae){var ee=q.length,ne=2*ee>ae?2*ee:ae+5,oe=0;if(ee>=ae)return q;if(Ht){var le=m4(ne);if(q.copy)q.copy(le);else for(;oe<q.length;++oe)le[oe]=q[oe];return le}else if(pe){var Se=new Uint8Array(ne);if(Se.set)Se.set(q);else for(;oe<ee;++oe)Se[oe]=q[oe];return Se}return q.length=ne,q}function Le(q){for(var ae=new Array(q),ee=0;ee<q;++ee)ae[ee]=0;return ae}function ye(q,ae,ee){var ne=1,oe=0,le=0,Se=0,De=0,ke=q.length,je=pe?new Uint16Array(32):Le(32);for(le=0;le<32;++le)je[le]=0;for(le=ke;le<ee;++le)q[le]=0;ke=q.length;var Ae=pe?new Uint16Array(ke):Le(ke);for(le=0;le<ke;++le)je[oe=q[le]]++,ne<oe&&(ne=oe),Ae[le]=0;for(je[0]=0,le=1;le<=ne;++le)je[le+16]=De=De+je[le-1]<<1;for(le=0;le<ke;++le)De=q[le],De!=0&&(Ae[le]=je[De+16]++);var Ge=0;for(le=0;le<ke;++le)if(Ge=q[le],Ge!=0)for(De=re(Ae[le],ne)>>ne-Ge,Se=(1<<ne+4-Ge)-1;Se>=0;--Se)ae[De|Se<<Ge]=Ge&15|le<<4;return ne}var Ee=pe?new Uint16Array(512):Le(512),et=pe?new Uint16Array(32):Le(32);if(!pe){for(var lt=0;lt<512;++lt)Ee[lt]=0;for(lt=0;lt<32;++lt)et[lt]=0}(function(){for(var q=[],ae=0;ae<32;ae++)q.push(5);ye(q,et,32);var ee=[];for(ae=0;ae<=143;ae++)ee.push(8);for(;ae<=255;ae++)ee.push(9);for(;ae<=279;ae++)ee.push(7);for(;ae<=287;ae++)ee.push(8);ye(ee,Ee,288)})();var Lt=function(){for(var ae=pe?new Uint8Array(32768):[],ee=0,ne=0;ee<ie.length-1;++ee)for(;ne<ie[ee+1];++ne)ae[ne]=ee;for(;ne<32768;++ne)ae[ne]=29;var oe=pe?new Uint8Array(259):[];for(ee=0,ne=0;ee<fe.length-1;++ee)for(;ne<fe[ee+1];++ne)oe[ne]=ee;function le(De,ke){for(var je=0;je<De.length;){var Ae=Math.min(65535,De.length-je),Ge=je+Ae==De.length;for(ke.write_shift(1,+Ge),ke.write_shift(2,Ae),ke.write_shift(2,~Ae&65535);Ae-- >0;)ke[ke.l++]=De[je++]}return ke.l}function Se(De,ke){for(var je=0,Ae=0,Ge=pe?new Uint16Array(32768):[];Ae<De.length;){var st=Math.min(65535,De.length-Ae);if(st<10){for(je=Me(ke,je,+(Ae+st==De.length)),je&7&&(je+=8-(je&7)),ke.l=je/8|0,ke.write_shift(2,st),ke.write_shift(2,~st&65535);st-- >0;)ke[ke.l++]=De[Ae++];je=ke.l*8;continue}je=Me(ke,je,+(Ae+st==De.length)+2);for(var dt=0;st-- >0;){var Je=De[Ae];dt=(dt<<5^Je)&32767;var Ye=-1,It=0;if((Ye=Ge[dt])&&(Ye|=Ae&-32768,Ye>Ae&&(Ye-=32768),Ye<Ae))for(;De[Ye+It]==De[Ae+It]&&It<250;)++It;if(It>2){Je=oe[It],Je<=22?je=ze(ke,je,we[Je+1]>>1)-1:(ze(ke,je,3),je+=5,ze(ke,je,we[Je-23]>>5),je+=3);var lr=Je<8?0:Je-4>>2;lr>0&&(nt(ke,je,It-fe[Je]),je+=lr),Je=ae[Ae-Ye],je=ze(ke,je,we[Je]>>3),je-=3;var ar=Je<4?0:Je-2>>1;ar>0&&(nt(ke,je,Ae-Ye-ie[Je]),je+=ar);for(var fr=0;fr<It;++fr)Ge[dt]=Ae&32767,dt=(dt<<5^De[Ae])&32767,++Ae;st-=It-1}else Je<=143?Je=Je+48:je=Re(ke,je,1),je=ze(ke,je,we[Je]),Ge[dt]=Ae&32767,++Ae}je=ze(ke,je,0)-1}return ke.l=(je+7)/8|0,ke.l}return function(ke,je){return ke.length<8?le(ke,je):Se(ke,je)}}();function mt(q){var ae=Oe(50+Math.floor(q.length*1.1)),ee=Lt(q,ae);return ae.slice(0,ee)}var Mt=pe?new Uint16Array(32768):Le(32768),hr=pe?new Uint16Array(32768):Le(32768),Jt=pe?new Uint16Array(128):Le(128),Vr=1,wr=1;function Xr(q,ae){var ee=be(q,ae)+257;ae+=5;var ne=be(q,ae)+1;ae+=5;var oe=ge(q,ae)+4;ae+=4;for(var le=0,Se=pe?new Uint8Array(19):Le(19),De=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ke=1,je=pe?new Uint8Array(8):Le(8),Ae=pe?new Uint8Array(8):Le(8),Ge=Se.length,st=0;st<oe;++st)Se[Z[st]]=le=Fe(q,ae),ke<le&&(ke=le),je[le]++,ae+=3;var dt=0;for(je[0]=0,st=1;st<=ke;++st)Ae[st]=dt=dt+je[st-1]<<1;for(st=0;st<Ge;++st)(dt=Se[st])!=0&&(De[st]=Ae[dt]++);var Je=0;for(st=0;st<Ge;++st)if(Je=Se[st],Je!=0){dt=we[De[st]]>>8-Je;for(var Ye=(1<<7-Je)-1;Ye>=0;--Ye)Jt[dt|Ye<<Je]=Je&7|st<<3}var It=[];for(ke=1;It.length<ee+ne;)switch(dt=Jt[se(q,ae)],ae+=dt&7,dt>>>=3){case 16:for(le=3+Ze(q,ae),ae+=2,dt=It[It.length-1];le-- >0;)It.push(dt);break;case 17:for(le=3+Fe(q,ae),ae+=3;le-- >0;)It.push(0);break;case 18:for(le=11+se(q,ae),ae+=7;le-- >0;)It.push(0);break;default:It.push(dt),ke<dt&&(ke=dt);break}var lr=It.slice(0,ee),ar=It.slice(ee);for(st=ee;st<286;++st)lr[st]=0;for(st=ne;st<30;++st)ar[st]=0;return Vr=ye(lr,Mt,286),wr=ye(ar,hr,30),ae}function sn(q,ae){if(q[0]==3&&!(q[1]&3))return[Rl(ae),2];for(var ee=0,ne=0,oe=m4(ae||1<<18),le=0,Se=oe.length>>>0,De=0,ke=0;(ne&1)==0;){if(ne=Fe(q,ee),ee+=3,ne>>>1)ne>>1==1?(De=9,ke=5):(ee=Xr(q,ee),De=Vr,ke=wr);else{ee&7&&(ee+=8-(ee&7));var je=q[ee>>>3]|q[(ee>>>3)+1]<<8;if(ee+=32,je>0)for(!ae&&Se<le+je&&(oe=vt(oe,le+je),Se=oe.length);je-- >0;)oe[le++]=q[ee>>>3],ee+=8;continue}for(;;){!ae&&Se<le+32767&&(oe=vt(oe,le+32767),Se=oe.length);var Ae=ve(q,ee,De),Ge=ne>>>1==1?Ee[Ae]:Mt[Ae];if(ee+=Ge&15,Ge>>>=4,(Ge>>>8&255)===0)oe[le++]=Ge;else{if(Ge==256)break;Ge-=257;var st=Ge<8?0:Ge-4>>2;st>5&&(st=0);var dt=le+fe[Ge];st>0&&(dt+=ve(q,ee,st),ee+=st),Ae=ve(q,ee,ke),Ge=ne>>>1==1?et[Ae]:hr[Ae],ee+=Ge&15,Ge>>>=4;var Je=Ge<4?0:Ge-2>>1,Ye=ie[Ge];for(Je>0&&(Ye+=ve(q,ee,Je),ee+=Je),!ae&&Se<dt&&(oe=vt(oe,dt+100),Se=oe.length);le<dt;)oe[le]=oe[le-Ye],++le}}}return ae?[oe,ee+7>>>3]:[oe.slice(0,le),ee+7>>>3]}function $n(q,ae){var ee=q.slice(q.l||0),ne=sn(ee,ae);return q.l+=ne[1],ne[0]}function Ds(q,ae){if(q)typeof console<"u"&&console.error(ae);else throw new Error(ae)}function ma(q,ae){var ee=q;Jn(ee,0);var ne=[],oe=[],le={FileIndex:ne,FullPaths:oe};N(le,{root:ae.root});for(var Se=ee.length-4;(ee[Se]!=80||ee[Se+1]!=75||ee[Se+2]!=5||ee[Se+3]!=6)&&Se>=0;)--Se;ee.l=Se+4,ee.l+=4;var De=ee.read_shift(2);ee.l+=6;var ke=ee.read_shift(4);for(ee.l=ke,Se=0;Se<De;++Se){ee.l+=20;var je=ee.read_shift(4),Ae=ee.read_shift(4),Ge=ee.read_shift(2),st=ee.read_shift(2),dt=ee.read_shift(2);ee.l+=8;var Je=ee.read_shift(4),Ye=l(ee.slice(ee.l+Ge,ee.l+Ge+st));ee.l+=Ge+st+dt;var It=ee.l;ee.l=Je+4,pt(ee,je,Ae,le,Ye),ee.l=It}return le}function pt(q,ae,ee,ne,oe){q.l+=2;var le=q.read_shift(2),Se=q.read_shift(2),De=o(q);if(le&8257)throw new Error("Unsupported ZIP encryption");for(var ke=q.read_shift(4),je=q.read_shift(4),Ae=q.read_shift(4),Ge=q.read_shift(2),st=q.read_shift(2),dt="",Je=0;Je<Ge;++Je)dt+=String.fromCharCode(q[q.l++]);if(st){var Ye=l(q.slice(q.l,q.l+st));(Ye[21589]||{}).mt&&(De=Ye[21589].mt),((oe||{})[21589]||{}).mt&&(De=oe[21589].mt)}q.l+=st;var It=q.slice(q.l,q.l+je);switch(Se){case 8:It=X(q,Ae);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Se)}var lr=!1;le&8&&(ke=q.read_shift(4),ke==134695760&&(ke=q.read_shift(4),lr=!0),je=q.read_shift(4),Ae=q.read_shift(4)),je!=ae&&Ds(lr,"Bad compressed size: "+ae+" != "+je),Ae!=ee&&Ds(lr,"Bad uncompressed size: "+ee+" != "+Ae),Ss(ne,dt,It,{unsafe:!0,mt:De})}function Wt(q,ae){var ee=ae||{},ne=[],oe=[],le=Oe(1),Se=ee.compression?8:0,De=0,ke=0,je=0,Ae=0,Ge=0,st=q.FullPaths[0],dt=st,Je=q.FileIndex[0],Ye=[],It=0;for(ke=1;ke<q.FullPaths.length;++ke)if(dt=q.FullPaths[ke].slice(st.length),Je=q.FileIndex[ke],!(!Je.size||!Je.content||dt=="Sh33tJ5")){var lr=Ae,ar=Oe(dt.length);for(je=0;je<dt.length;++je)ar.write_shift(1,dt.charCodeAt(je)&127);ar=ar.slice(0,ar.l),Ye[Ge]=IK.buf(Je.content,0);var fr=Je.content;Se==8&&(fr=Y(fr)),le=Oe(30),le.write_shift(4,67324752),le.write_shift(2,20),le.write_shift(2,De),le.write_shift(2,Se),Je.mt?i(le,Je.mt):le.write_shift(4,0),le.write_shift(-4,Ye[Ge]),le.write_shift(4,fr.length),le.write_shift(4,Je.content.length),le.write_shift(2,ar.length),le.write_shift(2,0),Ae+=le.length,ne.push(le),Ae+=ar.length,ne.push(ar),Ae+=fr.length,ne.push(fr),le=Oe(46),le.write_shift(4,33639248),le.write_shift(2,0),le.write_shift(2,20),le.write_shift(2,De),le.write_shift(2,Se),le.write_shift(4,0),le.write_shift(-4,Ye[Ge]),le.write_shift(4,fr.length),le.write_shift(4,Je.content.length),le.write_shift(2,ar.length),le.write_shift(2,0),le.write_shift(2,0),le.write_shift(2,0),le.write_shift(2,0),le.write_shift(4,0),le.write_shift(4,lr),It+=le.l,oe.push(le),It+=ar.length,oe.push(ar),++Ge}return le=Oe(22),le.write_shift(4,101010256),le.write_shift(2,0),le.write_shift(2,0),le.write_shift(2,Ge),le.write_shift(2,Ge),le.write_shift(4,It),le.write_shift(4,Ae),le.write_shift(2,0),Mn([Mn(ne),Mn(oe),le])}var cr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Sr(q,ae){if(q.ctype)return q.ctype;var ee=q.name||"",ne=ee.match(/\.([^\.]+)$/);return ne&&cr[ne[1]]||ae&&(ne=(ee=ae).match(/[\.\\]([^\.\\])+$/),ne&&cr[ne[1]])?cr[ne[1]]:"application/octet-stream"}function Cn(q){for(var ae=Hf(q),ee=[],ne=0;ne<ae.length;ne+=76)ee.push(ae.slice(ne,ne+76));return ee.join(`\r
`)+`\r
`}function Hn(q){var ae=q.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(je){var Ae=je.charCodeAt(0).toString(16).toUpperCase();return"="+(Ae.length==1?"0"+Ae:Ae)});ae=ae.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ae.charAt(0)==`
`&&(ae="=0D"+ae.slice(1)),ae=ae.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ee=[],ne=ae.split(`\r
`),oe=0;oe<ne.length;++oe){var le=ne[oe];if(le.length==0){ee.push("");continue}for(var Se=0;Se<le.length;){var De=76,ke=le.slice(Se,Se+De);ke.charAt(De-1)=="="?De--:ke.charAt(De-2)=="="?De-=2:ke.charAt(De-3)=="="&&(De-=3),ke=le.slice(Se,Se+De),Se+=De,Se<le.length&&(ke+="="),ee.push(ke)}}return ee.join(`\r
`)}function Gl(q){for(var ae=[],ee=0;ee<q.length;++ee){for(var ne=q[ee];ee<=q.length&&ne.charAt(ne.length-1)=="=";)ne=ne.slice(0,ne.length-1)+q[++ee];ae.push(ne)}for(var oe=0;oe<ae.length;++oe)ae[oe]=ae[oe].replace(/[=][0-9A-Fa-f]{2}/g,function(le){return String.fromCharCode(parseInt(le.slice(1),16))});return ia(ae.join(`\r
`))}function Oa(q,ae,ee){for(var ne="",oe="",le="",Se,De=0;De<10;++De){var ke=ae[De];if(!ke||ke.match(/^\s*$/))break;var je=ke.match(/^(.*?):\s*([^\s].*)$/);if(je)switch(je[1].toLowerCase()){case"content-location":ne=je[2].trim();break;case"content-type":le=je[2].trim();break;case"content-transfer-encoding":oe=je[2].trim();break}}switch(++De,oe.toLowerCase()){case"base64":Se=ia(fa(ae.slice(De).join("")));break;case"quoted-printable":Se=Gl(ae.slice(De));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+oe)}var Ae=Ss(q,ne.slice(ee.length),Se,{unsafe:!0});le&&(Ae.ctype=le)}function Kl(q,ae){if(K(q.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ee=ae&&ae.root||"",ne=(Ht&&Buffer.isBuffer(q)?q.toString("binary"):K(q)).split(`\r
`),oe=0,le="";for(oe=0;oe<ne.length;++oe)if(le=ne[oe],!!/^Content-Location:/i.test(le)&&(le=le.slice(le.indexOf("file")),ee||(ee=le.slice(0,le.lastIndexOf("/")+1)),le.slice(0,ee.length)!=ee))for(;ee.length>0&&(ee=ee.slice(0,ee.length-1),ee=ee.slice(0,ee.lastIndexOf("/")+1),le.slice(0,ee.length)!=ee););var Se=(ne[1]||"").match(/boundary="(.*?)"/);if(!Se)throw new Error("MAD cannot find boundary");var De="--"+(Se[1]||""),ke=[],je=[],Ae={FileIndex:ke,FullPaths:je};N(Ae);var Ge,st=0;for(oe=0;oe<ne.length;++oe){var dt=ne[oe];dt!==De&&dt!==De+"--"||(st++&&Oa(Ae,ne.slice(Ge,oe),ee),Ge=oe)}return Ae}function Br(q,ae){var ee=ae||{},ne=ee.boundary||"SheetJS";ne="------="+ne;for(var oe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ne.slice(2)+'"',"","",""],le=q.FullPaths[0],Se=le,De=q.FileIndex[0],ke=1;ke<q.FullPaths.length;++ke)if(Se=q.FullPaths[ke].slice(le.length),De=q.FileIndex[ke],!(!De.size||!De.content||Se=="Sh33tJ5")){Se=Se.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(It){return"_x"+It.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(It){return"_u"+It.charCodeAt(0).toString(16)+"_"});for(var je=De.content,Ae=Ht&&Buffer.isBuffer(je)?je.toString("binary"):K(je),Ge=0,st=Math.min(1024,Ae.length),dt=0,Je=0;Je<=st;++Je)(dt=Ae.charCodeAt(Je))>=32&&dt<128&&++Ge;var Ye=Ge>=st*4/5;oe.push(ne),oe.push("Content-Location: "+(ee.root||"file:///C:/SheetJS/")+Se),oe.push("Content-Transfer-Encoding: "+(Ye?"quoted-printable":"base64")),oe.push("Content-Type: "+Sr(De,Se)),oe.push(""),oe.push(Ye?Hn(Ae):Cn(Ae))}return oe.push(ne+`--\r
`),oe.join(`\r
`)}function Ro(q){var ae={};return N(ae,q),ae}function Ss(q,ae,ee,ne){var oe=ne&&ne.unsafe;oe||N(q);var le=!oe&&Nt.find(q,ae);if(!le){var Se=q.FullPaths[0];ae.slice(0,Se.length)==Se?Se=ae:(Se.slice(-1)!="/"&&(Se+="/"),Se=(Se+ae).replace("//","/")),le={name:s(ae),type:2},q.FileIndex.push(le),q.FullPaths.push(Se),oe||Nt.utils.cfb_gc(q)}return le.content=ee,le.size=ee?ee.length:0,ne&&(ne.CLSID&&(le.clsid=ne.CLSID),ne.mt&&(le.mt=ne.mt),ne.ct&&(le.ct=ne.ct)),le}function Mi(q,ae){N(q);var ee=Nt.find(q,ae);if(ee){for(var ne=0;ne<q.FileIndex.length;++ne)if(q.FileIndex[ne]==ee)return q.FileIndex.splice(ne,1),q.FullPaths.splice(ne,1),!0}return!1}function Vi(q,ae,ee){N(q);var ne=Nt.find(q,ae);if(ne){for(var oe=0;oe<q.FileIndex.length;++oe)if(q.FileIndex[oe]==ne)return q.FileIndex[oe].name=s(ee),q.FullPaths[oe]=ee,!0}return!1}function Po(q){P(q,!0)}return e.find=z,e.read=I,e.parse=f,e.write=ce,e.writeFile=te,e.utils={cfb_new:Ro,cfb_add:Ss,cfb_del:Mi,cfb_mov:Vi,cfb_gc:Po,ReadShift:pf,CheckField:w5,prep_blob:Jn,bconcat:Mn,use_zlib:M,_deflateRaw:mt,_inflateRaw:$n,consts:H},e}();function RK(t){return typeof t=="string"?Tg(t):Array.isArray(t)?sK(t):t}function P0(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=Tg(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?ki(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var s=new Blob([RK(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,t);if(typeof saveAs<"u")return saveAs(s,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=Hl(e)),l.write(e),l.close(),e}catch(u){if(!u.message||!u.message.match(/onstruct/))throw u}throw new Error("cannot save file "+t)}function PK(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function nn(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function _4(t,e){for(var r=[],n=nn(t),s=0;s!==n.length;++s)r[t[n[s]][e]]==null&&(r[t[n[s]][e]]=n[s]);return r}function Ag(t){for(var e=[],r=nn(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function Cg(t){for(var e=[],r=nn(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function DK(t){for(var e=[],r=nn(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var bx=new Date(1899,11,30,0,0,0);function An(t,e){var r=t.getTime(),n=bx.getTime()+(t.getTimezoneOffset()-bx.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var Z6=new Date,FK=bx.getTime()+(Z6.getTimezoneOffset()-bx.getTimezoneOffset())*6e4,N4=Z6.getTimezoneOffset();function Ig(t){var e=new Date;return e.setTime(t*24*60*60*1e3+FK),e.getTimezoneOffset()!==N4&&e.setTime(e.getTime()+(e.getTimezoneOffset()-N4)*6e4),e}function LK(t){var e=0,r=0,n=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(s[i],10)}return e}var E4=new Date("2017-02-19T19:06:09.000Z"),e5=isNaN(E4.getFullYear())?new Date("2/19/17"):E4,OK=e5.getFullYear()==2017;function Dr(t,e){var r=new Date(t);if(OK)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(e5.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function $c(t,e){if(Ht&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return ki(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return ki(U6(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return ki(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return ki(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function Fr(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Fr(t[r]));return e}function en(t,e){for(var r="";r.length<e;)r+=t;return r}function ni(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(e=Number(n)))?e/r:e}var MK=["january","february","march","april","may","june","july","august","september","october","november","december"];function Md(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),i=e.getDate();if(isNaN(i))return r;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&MK.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var VK=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(t||typeof n=="string")return r.split(n);for(var i=r.split(n),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}}();function t5(t){return t?t.content&&t.type?$c(t.content,!0):t.data?Jh(t.data):t.asNodeBuffer&&Ht?Jh(t.asNodeBuffer().toString("binary")):t.asBinary?Jh(t.asBinary()):t._data&&t._data.getContent?Jh($c(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function r5(t){if(!t)return null;if(t.data)return h4(t.data);if(t.asNodeBuffer&&Ht)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?h4(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function BK(t){return t&&t.name.slice(-4)===".bin"?r5(t):t5(t)}function Aa(t,e){for(var r=t.FullPaths||nn(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||s==o)return t.files?t.files[r[i]]:t.FileIndex[i]}return null}function Vb(t,e){var r=Aa(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function vn(t,e,r){if(!r)return BK(Vb(t,e));if(!e)return null;try{return vn(t,e)}catch{return null}}function oa(t,e,r){if(!r)return t5(Vb(t,e));if(!e)return null;try{return oa(t,e)}catch{return null}}function UK(t,e,r){return r5(Vb(t,e))}function S4(t){for(var e=t.FullPaths||nn(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Ut(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Ht?n=Ao(r):n=aK(r),Nt.utils.cfb_add(t,e,n)}Nt.utils.cfb_add(t,e,r)}else t.file(e,r)}function Bb(){return Nt.utils.cfb_new()}function n5(t,e){switch(e.type){case"base64":return Nt.read(t,{type:"base64"});case"binary":return Nt.read(t,{type:"binary"});case"buffer":case"array":return Nt.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function ef(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var fn=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,zK=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,k4=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,$K=/<[^>]*>/g,Es=fn.match(k4)?k4:$K,HK=/<\w*:/,WK=/<(\/?)\w+:/;function Rt(t,e,r){for(var n={},s=0,i=0;s!==t.length&&!((i=t.charCodeAt(s))===32||i===10||i===13);++s);if(e||(n[0]=t.slice(0,s)),s===t.length)return n;var o=t.match(zK),l=0,u="",h=0,f="",p="",x=1;if(o)for(h=0;h!=o.length;++h){for(p=o[h],i=0;i!=p.length&&p.charCodeAt(i)!==61;++i);for(f=p.slice(0,i).trim();p.charCodeAt(i+1)==32;)++i;for(x=(s=p.charCodeAt(i+1))==34||s==39?1:0,u=p.slice(i+1+x,p.length-x),l=0;l!=f.length&&f.charCodeAt(l)!==58;++l);if(l===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),n[f]=u,n[f.toLowerCase()]=u;else{var v=(l===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(l+1);if(n[v]&&f.slice(l-3,l)=="ext")continue;n[v]=u,n[v.toLowerCase()]=u}}return n}function Li(t){return t.replace(WK,"<$1")}var s5={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Ub=Ag(s5),rr=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(t,function(l,u){return s5[l]||String.fromCharCode(parseInt(u,l.indexOf("x")>-1?16:10))||l}).replace(e,function(l,u){return String.fromCharCode(parseInt(u,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}}(),zb=/[&<>'"]/g,qK=/[\u0000-\u0008\u000b-\u001f]/g;function gr(t){var e=t+"";return e.replace(zb,function(r){return Ub[r]}).replace(qK,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function T4(t){return gr(t).replace(/ /g,"_x0020_")}var a5=/[\u0000-\u001f]/g;function $b(t){var e=t+"";return e.replace(zb,function(r){return Ub[r]}).replace(/\n/g,"<br/>").replace(a5,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function GK(t){var e=t+"";return e.replace(zb,function(r){return Ub[r]}).replace(a5,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var j4=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function KK(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function Cr(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Yy(t){for(var e="",r=0,n=0,s=0,i=0,o=0,l=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=s&63,e+=String.fromCharCode(o);continue}if(i=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}o=t.charCodeAt(r++),l=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function A4(t){var e=Rl(2*t.length),r,n,s=1,i=0,o=0,l;for(n=0;n<t.length;n+=s)s=1,(l=t.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(n+1)&63),s=2):l<240?(r=(l&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(l&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(e[i++]=o&255,e[i++]=o>>>8,o=0),e[i++]=r%256,e[i++]=r>>>8;return e.slice(0,i).toString("ucs2")}function C4(t){return Ao(t,"binary").toString("utf8")}var dp="foo bar baz",vr=Ht&&(C4(dp)==Yy(dp)&&C4||A4(dp)==Yy(dp)&&A4)||Yy,ki=Ht?function(t){return Ao(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},qf=function(){var t={};return function(r,n){var s=r+"|"+(n||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),i5=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}}(),XK=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),YK=/<\/?(?:vt:)?variant>/g,QK=/<(?:vt:)([^>]*)>([\s\S]*)</;function I4(t,e){var r=Rt(t),n=t.match(XK(r.baseType))||[],s=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var o=i.replace(YK,"").match(QK);o&&s.push({v:vr(o[2]),t:o[1]})}),s}var o5=/(^\s|\s$|\n)/;function Zn(t,e){return"<"+t+(e.match(o5)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Gf(t){return nn(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function rt(t,e,r){return"<"+t+(r!=null?Gf(r):"")+(e!=null?(e.match(o5)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function hw(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function JK(t,e){switch(typeof t){case"string":var r=rt("vt:lpwstr",gr(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return rt((t|0)==t?"vt:i4":"vt:r8",gr(String(t)));case"boolean":return rt("vt:bool",t?"true":"false")}if(t instanceof Date)return rt("vt:filetime",hw(t));throw new Error("Unable to serialize "+t)}function Hb(t){if(Ht&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return vr(Hl(Lb(t)));throw new Error("Bad input format: expected Buffer or string")}var Kf=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,kn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},su=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],sa={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function ZK(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,i=5;i>=0;--i)s=s*256+t[e+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function eX(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,i=0,o=n?-e:e;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(e)?26985:0);for(var l=0;l<=5;++l,i/=256)t[r+l]=i&255;t[r+6]=(s&15)<<4|i&15,t[r+7]=s>>4|n}var R4=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,i=t[0][n].length;s<i;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},P4=Ht?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Ao(e)})):R4(t)}:R4,D4=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(so(t,s)));return n.join("").replace(Rs,"")},Wb=Ht?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(Rs,""):D4(t,e,r)}:D4,F4=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},l5=Ht?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):F4(t,e,r)}:F4,L4=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(Ju(t,s)));return n.join("")},D0=Ht?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):L4(e,r,n)}:L4,c5=function(t,e){var r=aa(t,e);return r>0?D0(t,e+4,e+4+r-1):""},u5=c5,d5=function(t,e){var r=aa(t,e);return r>0?D0(t,e+4,e+4+r-1):""},h5=d5,f5=function(t,e){var r=2*aa(t,e);return r>0?D0(t,e+4,e+4+r-1):""},m5=f5,p5=function(e,r){var n=aa(e,r);return n>0?Wb(e,r+4,r+4+n):""},x5=p5,g5=function(t,e){var r=aa(t,e);return r>0?D0(t,e+4,e+4+r):""},v5=g5,y5=function(t,e){return ZK(t,e)},_x=y5,qb=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Ht&&(u5=function(e,r){if(!Buffer.isBuffer(e))return c5(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},h5=function(e,r){if(!Buffer.isBuffer(e))return d5(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},m5=function(e,r){if(!Buffer.isBuffer(e))return f5(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},x5=function(e,r){if(!Buffer.isBuffer(e))return p5(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},v5=function(e,r){if(!Buffer.isBuffer(e))return g5(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},_x=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):y5(e,r)},qb=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Ju=function(t,e){return t[e]},so=function(t,e){return t[e+1]*256+t[e]},tX=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},aa=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},vc=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},rX=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function pf(t,e){var r="",n,s,i=[],o,l,u,h;switch(e){case"dbcs":if(h=this.l,Ht&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(u=0;u<t;++u)r+=String.fromCharCode(so(this,h)),h+=2;t*=2;break;case"utf8":r=D0(this,this.l,this.l+t);break;case"utf16le":t*=2,r=Wb(this,this.l,this.l+t);break;case"wstr":return pf.call(this,t,"dbcs");case"lpstr-ansi":r=u5(this,this.l),t=4+aa(this,this.l);break;case"lpstr-cp":r=h5(this,this.l),t=4+aa(this,this.l);break;case"lpwstr":r=m5(this,this.l),t=4+2*aa(this,this.l);break;case"lpp4":t=4+aa(this,this.l),r=x5(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+aa(this,this.l),r=v5(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(o=Ju(this,this.l+t++))!==0;)i.push(up(o));r=i.join("");break;case"_wstr":for(t=0,r="";(o=so(this,this.l+t))!==0;)i.push(up(o)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",h=this.l,u=0;u<t;++u){if(this.lens&&this.lens.indexOf(h)!==-1)return o=Ju(this,h),this.l=h+1,l=pf.call(this,t-u,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(up(so(this,h))),h+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",h=this.l,u=0;u!=t;++u){if(this.lens&&this.lens.indexOf(h)!==-1)return o=Ju(this,h),this.l=h+1,l=pf.call(this,t-u,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(up(Ju(this,h))),h+=1}r=i.join("");break;default:switch(t){case 1:return n=Ju(this,this.l),this.l++,n;case 2:return n=(e==="i"?tX:so)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?vc:rX)(this,this.l),this.l+=4,n):(s=aa(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=_x(this,this.l):s=_x([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=l5(this,this.l,t);break}}return this.l+=t,r}var nX=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},sX=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},aX=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function iX(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)aX(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var o=e.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,nX(this,e,this.l);break;case 8:if(n=8,r==="f"){eX(this,e,this.l);break}case 16:break;case-4:n=4,sX(this,e,this.l);break}return this.l+=n,this}function w5(t,e){var r=l5(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Jn(t,e){t.l=e,t.read_shift=pf,t.chk=w5,t.write_shift=iX}function _s(t,e){t.l+=e}function Oe(t){var e=Rl(t);return Jn(e,0),e}function Co(t,e,r){if(t){var n,s,i;Jn(t,t.l||0);for(var o=t.length,l=0,u=0;t.l<o;){l=t.read_shift(1),l&128&&(l=(l&127)+((t.read_shift(1)&127)<<7));var h=e0[l]||e0[65535];for(n=t.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=t.read_shift(1))&127)<<7*s;u=t.l+i;var f=h.f&&h.f(t,i,r);if(t.l=u,e(f,h,l))return}}}function Ks(){var t=[],e=Ht?256:2048,r=function(h){var f=Oe(h);return Jn(f,0),f},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},i=function(h){return n&&h<n.length-n.l?n:(s(),n=r(Math.max(h+1,e)))},o=function(){return s(),Mn(t)},l=function(h){s(),n=h,n.l==null&&(n.l=n.length),i(e)};return{next:i,push:l,end:o,_bufs:t}}function $e(t,e,r,n){var s=+e,i;if(!isNaN(s)){n||(n=e0[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var o=t.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&qb(r)&&t.push(r)}}function xf(t,e,r){var n=Fr(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function O4(t,e,r){var n=Fr(t);return n.s=xf(n.s,e.s,r),n.e=xf(n.e,e.s,r),n}function gf(t,e){if(t.cRel&&t.c<0)for(t=Fr(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Fr(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=jt(t);return!t.cRel&&t.cRel!=null&&(r=cX(r)),!t.rRel&&t.rRel!=null&&(r=oX(r)),r}function Qy(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+qr(t.s.c)+":"+(t.e.cRel?"":"$")+qr(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+hn(t.s.r)+":"+(t.e.rRel?"":"$")+hn(t.e.r):gf(t.s,e.biff)+":"+gf(t.e,e.biff)}function Gb(t){return parseInt(lX(t),10)-1}function hn(t){return""+(t+1)}function oX(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function lX(t){return t.replace(/\$(\d+)$/,"$1")}function Kb(t){for(var e=uX(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function qr(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function cX(t){return t.replace(/^([A-Z])/,"$$$1")}function uX(t){return t.replace(/^\$([A-Z])/,"$1")}function dX(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Gr(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function jt(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Xs(t){var e=t.indexOf(":");return e==-1?{s:Gr(t),e:Gr(t)}:{s:Gr(t.slice(0,e)),e:Gr(t.slice(e+1))}}function Bt(t,e){return typeof e>"u"||typeof e=="number"?Bt(t.s,t.e):(typeof t!="string"&&(t=jt(t)),typeof e!="string"&&(e=jt(e)),t==e?t:t+":"+e)}function sr(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=t.length;for(r=0;n<i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===i||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function M4(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Da(t.z,r?An(e):e)}catch{}try{return t.w=Da((t.XF||{}).numFmtId||(r?14:0),r?An(e):e)}catch{return""+e}}function Eo(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Io[t.v]||t.v:e==null?M4(t,t.v):M4(t,e))}function Wl(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function b5(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,i=t||(s?[]:{}),o=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var u=typeof n.origin=="string"?Gr(n.origin):n.origin;o=u.r,l=u.c}i["!ref"]||(i["!ref"]="A1:A1")}var h={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var f=sr(i["!ref"]);h.s.c=f.s.c,h.s.r=f.s.r,h.e.c=Math.max(h.e.c,f.e.c),h.e.r=Math.max(h.e.r,f.e.r),o==-1&&(h.e.r=o=f.e.r+1)}for(var p=0;p!=e.length;++p)if(e[p]){if(!Array.isArray(e[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var x=0;x!=e[p].length;++x)if(!(typeof e[p][x]>"u")){var v={v:e[p][x]},w=o+p,b=l+x;if(h.s.r>w&&(h.s.r=w),h.s.c>b&&(h.s.c=b),h.e.r<w&&(h.e.r=w),h.e.c<b&&(h.e.c=b),e[p][x]&&typeof e[p][x]=="object"&&!Array.isArray(e[p][x])&&!(e[p][x]instanceof Date))v=e[p][x];else if(Array.isArray(v.v)&&(v.f=e[p][x][1],v.v=v.v[0]),v.v===null)if(v.f)v.t="n";else if(n.nullError)v.t="e",v.v=0;else if(n.sheetStubs)v.t="z";else continue;else typeof v.v=="number"?v.t="n":typeof v.v=="boolean"?v.t="b":v.v instanceof Date?(v.z=n.dateNF||Tt[14],n.cellDates?(v.t="d",v.w=Da(v.z,An(v.v))):(v.t="n",v.v=An(v.v),v.w=Da(v.z,v.v))):v.t="s";if(s)i[w]||(i[w]=[]),i[w][b]&&i[w][b].z&&(v.z=i[w][b].z),i[w][b]=v;else{var _=jt({c:b,r:w});i[_]&&i[_].z&&(v.z=i[_].z),i[_]=v}}}return h.s.c<1e7&&(i["!ref"]=Bt(h)),i}function ih(t,e){return b5(null,t,e)}function hX(t){return t.read_shift(4,"i")}function si(t,e){return e||(e=Oe(4)),e.write_shift(4,t),e}function ys(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Bn(t,e){var r=!1;return e==null&&(r=!0,e=Oe(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function fX(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function mX(t,e){return e||(e=Oe(4)),e.write_shift(2,0),e.write_shift(2,0),e}function Xb(t,e){var r=t.l,n=t.read_shift(1),s=ys(t),i=[],o={t:s,h:s};if((n&1)!==0){for(var l=t.read_shift(4),u=0;u!=l;++u)i.push(fX(t));o.r=i}else o.r=[{ich:0,ifnt:0}];return t.l=r+e,o}function pX(t,e){var r=!1;return e==null&&(r=!0,e=Oe(15+4*t.t.length)),e.write_shift(1,0),Bn(t.t,e),r?e.slice(0,e.l):e}var xX=Xb;function gX(t,e){var r=!1;return e==null&&(r=!0,e=Oe(23+4*t.t.length)),e.write_shift(1,1),Bn(t.t,e),e.write_shift(4,1),mX({},e),r?e.slice(0,e.l):e}function La(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function au(t,e){return e==null&&(e=Oe(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function iu(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function ou(t,e){return e==null&&(e=Oe(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var vX=ys,_5=Bn;function Yb(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function Nx(t,e){var r=!1;return e==null&&(r=!0,e=Oe(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var yX=ys,fw=Yb,Qb=Nx;function Jb(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?_x([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):vc(e,0)>>2;return r?s/100:s}function N5(t,e){e==null&&(e=Oe(4));var r=0,n=0,s=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?s:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function E5(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function wX(t,e){return e||(e=Oe(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var lu=E5,oh=wX;function xs(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Hc(t,e){return(e||Oe(8)).write_shift(8,t,"f")}function bX(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),i=t.read_shift(2,"i"),o=t.read_shift(1),l=t.read_shift(1),u=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var h=Tc[s];h&&(e.rgb=Yf(h));break;case 2:e.rgb=Yf([o,l,u]);break;case 3:e.theme=s;break}return i!=0&&(e.tint=i>0?i/32767:i/32768),e}function Ex(t,e){if(e||(e=Oe(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function _X(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function NX(t,e){e||(e=Oe(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function S5(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function EX(t){return S5(t,1)}function SX(t){return S5(t,2)}var Zb=2,$s=3,hp=11,V4=12,Sx=19,fp=64,kX=65,TX=71,jX=4108,AX=4126,Ln=80,k5=81,CX=[Ln,k5],mw={1:{n:"CodePage",t:Zb},2:{n:"Category",t:Ln},3:{n:"PresentationFormat",t:Ln},4:{n:"ByteCount",t:$s},5:{n:"LineCount",t:$s},6:{n:"ParagraphCount",t:$s},7:{n:"SlideCount",t:$s},8:{n:"NoteCount",t:$s},9:{n:"HiddenCount",t:$s},10:{n:"MultimediaClipCount",t:$s},11:{n:"ScaleCrop",t:hp},12:{n:"HeadingPairs",t:jX},13:{n:"TitlesOfParts",t:AX},14:{n:"Manager",t:Ln},15:{n:"Company",t:Ln},16:{n:"LinksUpToDate",t:hp},17:{n:"CharacterCount",t:$s},19:{n:"SharedDoc",t:hp},22:{n:"HyperlinksChanged",t:hp},23:{n:"AppVersion",t:$s,p:"version"},24:{n:"DigSig",t:kX},26:{n:"ContentType",t:Ln},27:{n:"ContentStatus",t:Ln},28:{n:"Language",t:Ln},29:{n:"Version",t:Ln},255:{},2147483648:{n:"Locale",t:Sx},2147483651:{n:"Behavior",t:Sx},1919054434:{}},pw={1:{n:"CodePage",t:Zb},2:{n:"Title",t:Ln},3:{n:"Subject",t:Ln},4:{n:"Author",t:Ln},5:{n:"Keywords",t:Ln},6:{n:"Comments",t:Ln},7:{n:"Template",t:Ln},8:{n:"LastAuthor",t:Ln},9:{n:"RevNumber",t:Ln},10:{n:"EditTime",t:fp},11:{n:"LastPrinted",t:fp},12:{n:"CreatedDate",t:fp},13:{n:"ModifiedDate",t:fp},14:{n:"PageCount",t:$s},15:{n:"WordCount",t:$s},16:{n:"CharCount",t:$s},17:{n:"Thumbnail",t:TX},18:{n:"Application",t:Ln},19:{n:"DocSecurity",t:$s},255:{},2147483648:{n:"Locale",t:Sx},2147483651:{n:"Behavior",t:Sx},1919054434:{}},B4={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},IX=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function RX(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var PX=RX([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Tc=Fr(PX),Io={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},T5={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},xw={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},mp={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function e_(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function DX(t){var e=e_();if(!t||!t.match)return e;var r={};if((t.match(Es)||[]).forEach(function(n){var s=Rt(n);switch(s[0].replace(HK,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":e[xw[s.ContentType]]!==void 0&&e[xw[s.ContentType]].push(s.PartName);break}}),e.xmlns!==kn.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function j5(t,e){var r=DK(xw),n=[],s;n[n.length]=fn,n[n.length]=rt("Types",null,{xmlns:kn.CT,"xmlns:xsd":kn.xsd,"xmlns:xsi":kn.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(u){return rt("Default",null,{Extension:u[0],ContentType:u[1]})}));var i=function(u){t[u]&&t[u].length>0&&(s=t[u][0],n[n.length]=rt("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:mp[u][e.bookType]||mp[u].xlsx}))},o=function(u){(t[u]||[]).forEach(function(h){n[n.length]=rt("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:mp[u][e.bookType]||mp[u].xlsx})})},l=function(u){(t[u]||[]).forEach(function(h){n[n.length]=rt("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:r[u][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Gt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Xf(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function vf(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Es)||[]).forEach(function(s){var i=Rt(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:ef(i.Target,e);r[l]=o,n[i.Id]=o}}),r["!id"]=n,r}function md(t){var e=[fn,rt("Relationships",null,{xmlns:kn.RELS})];return nn(t["!id"]).forEach(function(r){e[e.length]=rt("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function xr(t,e,r,n,s,i){if(s||(s={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,s.Id="rId"+e,s.Type=n,s.Target=r,[Gt.HLINK,Gt.XPATH,Gt.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),t["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][s.Id]=s,t[("/"+s.Target).replace("//","/")]=s,e}var FX="application/vnd.oasis.opendocument.spreadsheet";function LX(t,e){for(var r=Hb(t),n,s;n=Kf.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=Rt(n[0],!1),s.path=="/"&&s.type!==FX)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function OX(t){var e=[fn];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function U4(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function MX(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function VX(t){var e=[fn];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(U4(t[r][0],t[r][1])),e.push(MX("",t[r][0]));return e.push(U4("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function A5(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+gx.version+"</meta:generator></office:meta></office:document-meta>"}var Ra=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],BX=function(){for(var t=new Array(Ra.length),e=0;e<Ra.length;++e){var r=Ra[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function C5(t){var e={};t=vr(t);for(var r=0;r<Ra.length;++r){var n=Ra[r],s=t.match(BX[r]);s!=null&&s.length>0&&(e[n[1]]=rr(s[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=Dr(e[n[1]]))}return e}function Jy(t,e,r,n,s){s[t]!=null||e==null||e===""||(s[t]=e,e=gr(e),n[n.length]=r?rt(t,e,r):Zn(t,e))}function I5(t,e){var r=e||{},n=[fn,rt("cp:coreProperties",null,{"xmlns:cp":kn.CORE_PROPS,"xmlns:dc":kn.dc,"xmlns:dcterms":kn.dcterms,"xmlns:dcmitype":kn.dcmitype,"xmlns:xsi":kn.xsi})],s={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&Jy("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:hw(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),t.ModifiedDate!=null&&Jy("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:hw(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var i=0;i!=Ra.length;++i){var o=Ra[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:t?t[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&Jy(o[0],l,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var jc=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],R5=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function P5(t,e,r,n){var s=[];if(typeof t=="string")s=I4(t,n);else for(var i=0;i<t.length;++i)s=s.concat(t[i].map(function(f){return{v:f}}));var o=typeof e=="string"?I4(e,n).map(function(f){return f.v}):e,l=0,u=0;if(o.length>0)for(var h=0;h!==s.length;h+=2){switch(u=+s[h+1].v,s[h].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=u,r.SheetNames=o.slice(l,l+u);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=u,r.DefinedNames=o.slice(l,l+u);break;case"Charts":case"Diagramme":r.Chartsheets=u,r.ChartNames=o.slice(l,l+u);break}l+=u}}function UX(t,e,r){var n={};return e||(e={}),t=vr(t),jc.forEach(function(s){var i=(t.match(qf(s[0]))||[])[1];switch(s[2]){case"string":i&&(e[s[1]]=rr(i));break;case"bool":e[s[1]]=i==="true";break;case"raw":var o=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(n[s[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&P5(n.HeadingPairs,n.TitlesOfParts,e,r),e}function D5(t){var e=[],r=rt;return t||(t={}),t.Application="SheetJS",e[e.length]=fn,e[e.length]=rt("Properties",null,{xmlns:kn.EXT_PROPS,"xmlns:vt":kn.vt}),jc.forEach(function(n){if(t[n[1]]!==void 0){var s;switch(n[2]){case"string":s=gr(String(t[n[1]]));break;case"bool":s=t[n[1]]?"true":"false";break}s!==void 0&&(e[e.length]=r(n[0],s))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+gr(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var zX=/<[^>]+>[^<]*/g;function $X(t,e){var r={},n="",s=t.match(zX);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=Rt(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=rr(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var u=o.split(">"),h=u[0].slice(4),f=u[1];switch(h){case"lpstr":case"bstr":case"lpwstr":r[n]=rr(f);break;case"bool":r[n]=Cr(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(f);break;case"filetime":case"date":r[n]=Dr(f);break;case"cy":case"error":r[n]=rr(f);break;default:if(h.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",o,h,u)}}else if(o.slice(0,2)!=="</"){if(e.WTF)throw new Error(o)}}}return r}function F5(t){var e=[fn,rt("Properties",null,{xmlns:kn.CUST_PROPS,"xmlns:vt":kn.vt})];if(!t)return e.join("");var r=1;return nn(t).forEach(function(s){++r,e[e.length]=rt("property",JK(t[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:gr(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var gw={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Zy;function HX(t,e,r){Zy||(Zy=Ag(gw)),e=Zy[e]||e,t[e]=r}function WX(t,e){var r=[];return nn(gw).map(function(n){for(var s=0;s<Ra.length;++s)if(Ra[s][1]==n)return Ra[s];for(s=0;s<jc.length;++s)if(jc[s][1]==n)return jc[s];throw n}).forEach(function(n){if(t[n[1]]!=null){var s=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Zn(gw[n[1]]||n[1],s))}}),rt("DocumentProperties",r.join(""),{xmlns:sa.o})}function qX(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return t&&nn(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)){for(var o=0;o<Ra.length;++o)if(i==Ra[o][1])return;for(o=0;o<jc.length;++o)if(i==jc[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=t[i],u="string";typeof l=="number"?(u="float",l=String(l)):l===!0||l===!1?(u="boolean",l=l?"1":"0"):l=String(l),s.push(rt(T4(i),l,{"dt:dt":u}))}}),e&&nn(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)&&!(t&&Object.prototype.hasOwnProperty.call(t,i))){var o=e[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(rt(T4(i),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+sa.o+'">'+s.join("")+"</"+n+">"}function t_(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function GX(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),s+=i);var o=Oe(8);return o.write_shift(4,n),o.write_shift(4,s),o}function L5(t,e,r){var n=t.l,s=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return s}function O5(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function M5(t,e,r){return e===31?O5(t):L5(t,e,r)}function vw(t,e,r){return M5(t,e,r===!1?0:4)}function KX(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return M5(t,e,0)}function XX(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var s=t.l;r[n]=t.read_shift(0,"lpwstr").replace(Rs,""),t.l-s&2&&(t.l+=2)}return r}function YX(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(Rs,"");return r}function QX(t){var e=t.l,r=kx(t,k5);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=kx(t,$s);return[r,n]}function JX(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(QX(t));return r}function z4(t,e){for(var r=t.read_shift(4),n={},s=0;s!=r;++s){var i=t.read_shift(4),o=t.read_shift(4);n[i]=t.read_shift(o,e===1200?"utf16le":"utf8").replace(Rs,"").replace(Zh,"!"),e===1200&&o%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function V5(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function ZX(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function kx(t,e,r){var n=t.read_shift(2),s,i=r||{};if(t.l+=2,e!==V4&&n!==e&&CX.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===V4?n:e){case 2:return s=t.read_shift(2,"i"),i.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return L5(t,n,4).replace(Rs,"");case 31:return O5(t);case 64:return t_(t);case 65:return V5(t);case 71:return ZX(t);case 80:return vw(t,n,!i.raw).replace(Rs,"");case 81:return KX(t,n).replace(Rs,"");case 4108:return JX(t);case 4126:case 4127:return n==4127?XX(t):YX(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function $4(t,e){var r=Oe(4),n=Oe(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Oe(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=GX(e);break;case 31:case 80:for(n=Oe(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Mn([r,n])}function H4(t,e){var r=t.l,n=t.read_shift(4),s=t.read_shift(4),i=[],o=0,l=0,u=-1,h={};for(o=0;o!=s;++o){var f=t.read_shift(4),p=t.read_shift(4);i[o]=[f,p+r]}i.sort(function(j,k){return j[1]-k[1]});var x={};for(o=0;o!=s;++o){if(t.l!==i[o][1]){var v=!0;if(o>0&&e)switch(e[i[o-1][0]].t){case 2:t.l+2===i[o][1]&&(t.l+=2,v=!1);break;case 80:t.l<=i[o][1]&&(t.l=i[o][1],v=!1);break;case 4108:t.l<=i[o][1]&&(t.l=i[o][1],v=!1);break}if((!e||o==0)&&t.l<=i[o][1]&&(v=!1,t.l=i[o][1]),v)throw new Error("Read Error: Expected address "+i[o][1]+" at "+t.l+" :"+o)}if(e){var w=e[i[o][0]];if(x[w.n]=kx(t,w.t,{raw:!0}),w.p==="version"&&(x[w.n]=String(x[w.n]>>16)+"."+("0000"+String(x[w.n]&65535)).slice(-4)),w.n=="CodePage")switch(x[w.n]){case 0:x[w.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:ei(l=x[w.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+x[w.n])}}else if(i[o][0]===1){if(l=x.CodePage=kx(t,Zb),ei(l),u!==-1){var b=t.l;t.l=i[u][1],h=z4(t,l),t.l=b}}else if(i[o][0]===0){if(l===0){u=o,t.l=i[o+1][1];continue}h=z4(t,l)}else{var _=h[i[o][0]],R;switch(t[t.l]){case 65:t.l+=4,R=V5(t);break;case 30:t.l+=4,R=vw(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,R=vw(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,R=t.read_shift(4,"i");break;case 19:t.l+=4,R=t.read_shift(4);break;case 5:t.l+=4,R=t.read_shift(8,"f");break;case 11:t.l+=4,R=ln(t,4);break;case 64:t.l+=4,R=Dr(t_(t));break;default:throw new Error("unparsed value: "+t[t.l])}x[_]=R}}return t.l=r+n,x}var B5=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function eY(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function W4(t,e,r){var n=Oe(8),s=[],i=[],o=8,l=0,u=Oe(8),h=Oe(8);if(u.write_shift(4,2),u.write_shift(4,1200),h.write_shift(4,1),i.push(u),s.push(h),o+=8+u.length,!e){h=Oe(8),h.write_shift(4,0),s.unshift(h);var f=[Oe(4)];for(f[0].write_shift(4,t.length),l=0;l<t.length;++l){var p=t[l][0];for(u=Oe(8+2*(p.length+1)+(p.length%2?0:2)),u.write_shift(4,l+2),u.write_shift(4,p.length+1),u.write_shift(0,p,"dbcs");u.l!=u.length;)u.write_shift(1,0);f.push(u)}u=Mn(f),i.unshift(u),o+=8+u.length}for(l=0;l<t.length;++l)if(!(e&&!e[t[l][0]])&&!(B5.indexOf(t[l][0])>-1||R5.indexOf(t[l][0])>-1)&&t[l][1]!=null){var x=t[l][1],v=0;if(e){v=+e[t[l][0]];var w=r[v];if(w.p=="version"&&typeof x=="string"){var b=x.split(".");x=(+b[0]<<16)+(+b[1]||0)}u=$4(w.t,x)}else{var _=eY(x);_==-1&&(_=31,x=String(x)),u=$4(_,x)}i.push(u),h=Oe(8),h.write_shift(4,e?v:2+l),s.push(h),o+=8+u.length}var R=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,R),R+=i[l].length;return n.write_shift(4,o),n.write_shift(4,i.length),Mn([n].concat(s).concat(i))}function q4(t,e,r){var n=t.content;if(!n)return{};Jn(n,0);var s,i,o,l,u=0;n.chk("feff","Byte Order: "),n.read_shift(2);var h=n.read_shift(4),f=n.read_shift(16);if(f!==Nt.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),l=n.read_shift(4),s===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);s===2&&(o=n.read_shift(16),u=n.read_shift(4));var p=H4(n,e),x={SystemIdentifier:h};for(var v in p)x[v]=p[v];if(x.FMTID=i,s===1)return x;if(u-n.l==2&&(n.l+=2),n.l!==u)throw new Error("Length mismatch 2: "+n.l+" !== "+u);var w;try{w=H4(n,null)}catch{}for(v in w)x[v]=w[v];return x.FMTID=[i,o],x}function G4(t,e,r,n,s,i){var o=Oe(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Nt.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,s?68:48);var u=W4(t,r,n);if(l.push(u),s){var h=W4(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+u.length),l.push(h)}return Mn(l)}function al(t,e){return t.read_shift(e),null}function tY(t,e){e||(e=Oe(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function rY(t,e,r){for(var n=[],s=t.l+e;t.l<s;)n.push(r(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return n}function ln(t,e){return t.read_shift(e)===1}function Cs(t,e){return e||(e=Oe(2)),e.write_shift(2,+!!t),e}function yn(t){return t.read_shift(2,"u")}function Ca(t,e){return e||(e=Oe(2)),e.write_shift(2,t),e}function U5(t,e){return rY(t,e,yn)}function nY(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function z5(t,e,r){return r||(r=Oe(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function F0(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=n?t.read_shift(n,s):"";return o}function sY(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,s=r&8,i=1+(r&1),o=0,l,u={};s&&(o=t.read_shift(2)),n&&(l=t.read_shift(4));var h=i==2?"dbcs-cont":"sbcs-cont",f=e===0?"":t.read_shift(e,h);return s&&(t.l+=4*o),n&&(t.l+=l),u.t=f,s||(u.raw="<t>"+u.t+"</t>",u.r=u.t),u}function aY(t){var e=t.t||"",r=Oe(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Oe(2*e.length);n.write_shift(2*e.length,e,"utf16le");var s=[r,n];return Mn(s)}function Wc(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function L0(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Wc(t,n,r)}function cu(t,e,r){if(r.biff>5)return L0(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function $5(t,e,r){return r||(r=Oe(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function iY(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function oY(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var s=t.read_shift((n?e-24:e)>>1,"utf16le").replace(Rs,"");return n&&(t.l+=24),s}function lY(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=t.read_shift(i>>1,"utf16le").replace(Rs,"");return r+o}function cY(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return oY(t);case"0303000000000000c000000000000046":return lY(t);default:throw new Error("Unsupported Moniker "+r)}}function pp(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(Rs,""):"";return r}function K4(t,e){e||(e=Oe(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function uY(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=t.read_shift(2);t.l+=2;var i,o,l,u,h="",f,p;s&16&&(i=pp(t,r-t.l)),s&128&&(o=pp(t,r-t.l)),(s&257)===257&&(l=pp(t,r-t.l)),(s&257)===1&&(u=cY(t,r-t.l)),s&8&&(h=pp(t,r-t.l)),s&32&&(f=t.read_shift(16)),s&64&&(p=t_(t)),t.l=r;var x=o||l||u||"";x&&h&&(x+="#"+h),x||(x="#"+h),s&2&&x.charAt(0)=="/"&&x.charAt(1)!="/"&&(x="file://"+x);var v={Target:x};return f&&(v.guid=f),p&&(v.time=p),i&&(v.Tooltip=i),v}function dY(t){var e=Oe(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),i=s>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}e.write_shift(4,2),e.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)e.write_shift(4,o[r]);if(i==28)n=n.slice(1),K4(n,e);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));var l=s>-1?n.slice(0,s):n;for(e.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)e.write_shift(2,l.charCodeAt(r));e.write_shift(2,0),i&8&&K4(s>-1?n.slice(s+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));for(var u=0;n.slice(u*3,u*3+3)=="../"||n.slice(u*3,u*3+3)=="..\\";)++u;for(e.write_shift(2,u),e.write_shift(4,n.length-3*u+1),r=0;r<n.length-3*u;++r)e.write_shift(1,n.charCodeAt(r+3*u)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function H5(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),s=t.read_shift(1);return[e,r,n,s]}function W5(t,e){var r=H5(t);return r[3]=0,r}function Oi(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function qc(t,e,r,n){return n||(n=Oe(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function hY(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function fY(t,e,r){return e===0?"":cu(t,e,r)}function mY(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),i=t.read_shift(n,"i"),o=t.read_shift(n,"i");return[s,i,o]}function q5(t){var e=t.read_shift(2),r=Jb(t);return[e,r]}function pY(t,e,r){t.l+=4,e-=4;var n=t.l+e,s=F0(t,e,r),i=t.read_shift(2);if(n-=t.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return t.l+=i,s}function Rg(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function G5(t,e){return e||(e=Oe(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function K5(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),s=t.read_shift(1);return{s:{c:n,r:e},e:{c:s,r}}}var xY=K5;function X5(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function gY(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function vY(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function cs(t){t.l+=2,t.l+=t.read_shift(2)}var yY={0:cs,4:cs,5:cs,6:cs,7:vY,8:cs,9:cs,10:cs,11:cs,12:cs,13:gY,14:cs,15:cs,16:cs,17:cs,18:cs,19:cs,20:cs,21:X5};function wY(t,e){for(var r=t.l+e,n=[];t.l<r;){var s=t.read_shift(2);t.l-=2;try{n.push(yY[s](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function xp(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function r_(t,e,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Oe(s);return i.write_shift(2,n),i.write_shift(2,e),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function bY(t,e){return e===0||t.read_shift(2),1200}function _Y(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,s=cu(t,0,r);return t.read_shift(e+n-t.l),s}function NY(t,e){var r=!e||e.biff==8,n=Oe(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function EY(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function SY(t,e,r){var n=t.read_shift(4),s=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=F0(t,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:s,dt:i,name:o}}function kY(t,e){var r=!e||e.biff>=8?2:1,n=Oe(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function TY(t,e){for(var r=t.l+e,n=t.read_shift(4),s=t.read_shift(4),i=[],o=0;o!=s&&t.l<r;++o)i.push(sY(t));return i.Count=n,i.Unique=s,i}function jY(t,e){var r=Oe(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],s=0;s<t.length;++s)n[s]=aY(t[s]);var i=Mn([r].concat(n));return i.parts=[r.length].concat(n.map(function(o){return o.length})),i}function AY(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function CY(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function IY(t){var e=hY(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function RY(t){return t.read_shift(2),t.read_shift(4)}function X4(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var s=t.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function PY(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),u=t.read_shift(2),h=t.read_shift(2);return{Pos:[e,r],Dim:[n,s],Flags:i,CurTab:o,FirstTab:l,Selected:u,TabRatio:h}}function DY(){var t=Oe(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function FY(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function LY(t){var e=Oe(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function OY(){}function MY(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=F0(t,0,r),n}function VY(t,e){var r=t.name||"Arial",n=e&&e.biff==5,s=n?15+r.length:16+2*r.length,i=Oe(s);return i.write_shift(2,t.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function BY(t){var e=Oi(t);return e.isst=t.read_shift(4),e}function UY(t,e,r,n){var s=Oe(10);return qc(t,e,n,s),s.write_shift(4,r),s}function zY(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,s=Oi(t);r.biff==2&&t.l++;var i=L0(t,n-t.l,r);return s.val=i,s}function $Y(t,e,r,n,s){var i=!s||s.biff==8,o=Oe(8+ +i+(1+i)*r.length);return qc(t,e,n,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function HY(t,e,r){var n=t.read_shift(2),s=cu(t,0,r);return[n,s]}function WY(t,e,r,n){var s=r&&r.biff==5;n||(n=Oe(s?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(s?1:2,e.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}var qY=cu;function Y4(t,e,r){var n=t.l+e,s=r.biff==8||!r.biff?4:2,i=t.read_shift(s),o=t.read_shift(s),l=t.read_shift(2),u=t.read_shift(2);return t.l=n,{s:{r:i,c:l},e:{r:o,c:u}}}function GY(t,e){var r=e.biff==8||!e.biff?4:2,n=Oe(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function KY(t){var e=t.read_shift(2),r=t.read_shift(2),n=q5(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function XY(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(q5(t));if(t.l!==r)throw new Error("MulRK read error");var o=t.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:o,rkrec:i}}function YY(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var o=t.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:o,ixfe:i}}function QY(t,e,r,n){var s={},i=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(4),u=t.read_shift(2);return s.patternType=IX[l>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=u&127,s.icvBack=u>>7&127,s.fsxButton=u>>14&1),s}function JY(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=QY(t,e,n.fStyle,r),n}function Q4(t,e,r,n){var s=r&&r.biff==5;n||(n=Oe(s?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var i=0;return t.numFmtId>0&&s&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function ZY(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function eQ(t){var e=Oe(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function J4(t,e,r){var n=Oi(t);(r.biff==2||e==9)&&++t.l;var s=nY(t);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function tQ(t,e,r,n,s,i){var o=Oe(8);return qc(t,e,n,o),z5(r,i,o),o}function rQ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Oi(t),s=xs(t);return n.val=s,n}function nQ(t,e,r,n){var s=Oe(14);return qc(t,e,n,s),Hc(r,s),s}var Z4=fY;function sQ(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=Wc(t,i),l=[];n>t.l;)l.push(L0(t));return[i,s,o,l]}function ej(t,e,r){var n=t.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=pY(t,e-2,r)),i.body=s||t.read_shift(e-2),typeof s=="string"&&(i.Name=s),i}var aQ=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function tj(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(r&&r.biff==2?1:2),u=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),u=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var h=Wc(t,o,r);s&32&&(h=aQ[h.charCodeAt(0)]);var f=n-t.l;r&&r.biff==2&&--f;var p=n==t.l||l===0||!(f>0)?[]:wte(t,f,r,l);return{chKey:i,Name:h,itab:u,rgce:p}}function Y5(t,e,r){if(r.biff<8)return iQ(t,e,r);for(var n=[],s=t.l+e,i=t.read_shift(r.biff>8?4:2);i--!==0;)n.push(mY(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function iQ(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=F0(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function oQ(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),s=t.read_shift(2),i=Wc(t,n,r),o=Wc(t,s,r);return[i,o]}function lQ(t,e,r){var n=K5(t);t.l++;var s=t.read_shift(1);return e-=8,[bte(t,e,r),s,n]}function rj(t,e,r){var n=xY(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,vte(t,e,r)]}function cQ(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function uQ(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=cu(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:s},l,o,i]}}function dQ(t,e,r){return uQ(t,e,r)}function hQ(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(Rg(t));return r}function fQ(t){var e=Oe(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)G5(t[r],e);return e}function mQ(t,e,r){if(r&&r.biff<8)return xQ(t,e,r);var n=X5(t),s=wY(t,e-22,n[1]);return{cmo:n,ft:s}}var pQ={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=r,{fmt:n}}};function xQ(t,e,r){t.l+=4;var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var o=[];return o.push((pQ[n]||_s)(t,e,r)),{cmo:[s,n,i],ft:o}}function gQ(t,e,r){var n=t.l,s="";try{t.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:o=iY(t,6,r);var l=t.read_shift(2);t.read_shift(2),yn(t,2);var u=t.read_shift(2);t.l+=u;for(var h=1;h<t.lens.length-1;++h){if(t.l-n!=t.lens[h])throw new Error("TxO: bad continue record");var f=t[t.l],p=Wc(t,t.lens[h+1]-t.lens[h]-1);if(s+=p,s.length>=(f?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return t.l=n+e,{t:s}}catch{return t.l=n+e,{t:s}}}function vQ(t,e){var r=Rg(t);t.l+=16;var n=uY(t,e-24);return[r,n]}function yQ(t){var e=Oe(24),r=Gr(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(n[s],16));return Mn([e,dY(t[1])])}function wQ(t,e){t.read_shift(2);var r=Rg(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(Rs,""),[r,n]}function bQ(t){var e=t[1].Tooltip,r=Oe(10+2*(e.length+1));r.write_shift(2,2048);var n=Gr(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<e.length;++s)r.write_shift(2,e.charCodeAt(s));return r.write_shift(2,0),r}function _Q(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=B4[r]||r,r=t.read_shift(2),e[1]=B4[r]||r,e}function NQ(t){return t||(t=Oe(4)),t.write_shift(2,1),t.write_shift(2,1),t}function EQ(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(W5(t));return r}function SQ(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(W5(t));return r}function kQ(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function Q5(t,e,r){if(!r.cellStyles)return _s(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),i=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(n),u=t.read_shift(2);n==2&&(t.l+=2);var h={s,e:i,w:o,ixfe:l,flags:u};return(r.biff>=5||!r.biff)&&(h.level=u>>8&7),h}function TQ(t,e){var r=Oe(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function jQ(t,e){var r={};return e<32||(t.l+=16,r.header=xs(t),r.footer=xs(t),t.l+=2),r}function AQ(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var s=t.read_shift(1);return t.l+=3,s&16&&(n.area=!0),n}function CQ(t){for(var e=Oe(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var IQ=Oi,RQ=U5,PQ=L0;function DQ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,s}function FQ(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Oi(t);++t.l;var s=cu(t,e-7,r);return n.t="str",n.val=s,n}function LQ(t){var e=Oi(t);++t.l;var r=xs(t);return e.t="n",e.val=r,e}function OQ(t,e,r){var n=Oe(15);return B0(n,t,e),n.write_shift(8,r,"f"),n}function MQ(t){var e=Oi(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function VQ(t,e,r){var n=Oe(9);return B0(n,t,e),n.write_shift(2,r),n}function BQ(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function UQ(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function zQ(t,e,r){var n=t.l+e,s=Oi(t),i=t.read_shift(2),o=Wc(t,i,r);return t.l=n,s.t="str",s.val=o,s}var $Q=[2,3,48,49,131,139,140,245],yw=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Ag({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,u){var h=[],f=Rl(1);switch(u.type){case"base64":f=ia(fa(l));break;case"binary":f=ia(l);break;case"buffer":case"array":f=l;break}Jn(f,0);var p=f.read_shift(1),x=!!(p&136),v=!1,w=!1;switch(p){case 2:break;case 3:break;case 48:v=!0,x=!0;break;case 49:v=!0,x=!0;break;case 131:break;case 139:break;case 140:w=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var b=0,_=521;p==2&&(b=f.read_shift(2)),f.l+=3,p!=2&&(b=f.read_shift(4)),b>1048576&&(b=1e6),p!=2&&(_=f.read_shift(2));var R=f.read_shift(2),j=u.codepage||1252;p!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(j=t[f[f.l]]),f.l+=1,f.l+=2),w&&(f.l+=36);for(var k=[],F={},L=Math.min(f.length,p==2?521:_-10-(v?264:0)),I=w?32:11;f.l<L&&f[f.l]!=13;)switch(F={},F.name=$f.utils.decode(j,f.slice(f.l,f.l+I)).replace(/[\u0000\r\n].*$/g,""),f.l+=I,F.type=String.fromCharCode(f.read_shift(1)),p!=2&&!w&&(F.offset=f.read_shift(4)),F.len=f.read_shift(1),p==2&&(F.offset=f.read_shift(2)),F.dec=f.read_shift(1),F.name.length&&k.push(F),p!=2&&(f.l+=w?13:14),F.type){case"B":(!v||F.len!=8)&&u.WTF&&console.log("Skipping "+F.name+":"+F.type);break;case"G":case"P":u.WTF&&console.log("Skipping "+F.name+":"+F.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+F.type)}if(f[f.l]!==13&&(f.l=_-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=_;var N=0,T=0;for(h[0]=[],T=0;T!=k.length;++T)h[0][T]=k[T].name;for(;b-- >0;){if(f[f.l]===42){f.l+=R;continue}for(++f.l,h[++N]=[],T=0,T=0;T!=k.length;++T){var P=f.slice(f.l,f.l+k[T].len);f.l+=k[T].len,Jn(P,0);var B=$f.utils.decode(j,P);switch(k[T].type){case"C":B.trim().length&&(h[N][T]=B.replace(/\s+$/,""));break;case"D":B.length===8?h[N][T]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):h[N][T]=B;break;case"F":h[N][T]=parseFloat(B.trim());break;case"+":case"I":h[N][T]=w?P.read_shift(-4,"i")^2147483648:P.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":h[N][T]=!0;break;case"N":case"F":h[N][T]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!x)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));h[N][T]="##MEMO##"+(w?parseInt(B.trim(),10):P.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(h[N][T]=+B||0);break;case"@":h[N][T]=new Date(P.read_shift(-8,"f")-621356832e5);break;case"T":h[N][T]=new Date((P.read_shift(4)-2440588)*864e5+P.read_shift(4));break;case"Y":h[N][T]=P.read_shift(4,"i")/1e4+P.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":h[N][T]=-P.read_shift(-8,"f");break;case"B":if(v&&k[T].len==8){h[N][T]=P.read_shift(8,"f");break}case"G":case"P":P.l+=k[T].len;break;case"0":if(k[T].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+k[T].type)}}}if(p!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return u&&u.sheetRows&&(h=h.slice(0,u.sheetRows)),u.DBF=k,h}function n(l,u){var h=u||{};h.dateNF||(h.dateNF="yyyymmdd");var f=ih(r(l,h),h);return f["!cols"]=h.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete h.DBF,f}function s(l,u){try{return Wl(n(l,u),u)}catch(h){if(u&&u.WTF)throw h}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,u){var h=u||{};if(+h.codepage>=0&&ei(+h.codepage),h.type=="string")throw new Error("Cannot write DBF to JS string");var f=Ks(),p=Ax(l,{header:1,raw:!0,cellDates:!0}),x=p[0],v=p.slice(1),w=l["!cols"]||[],b=0,_=0,R=0,j=1;for(b=0;b<x.length;++b){if(((w[b]||{}).DBF||{}).name){x[b]=w[b].DBF.name,++R;continue}if(x[b]!=null){if(++R,typeof x[b]=="number"&&(x[b]=x[b].toString(10)),typeof x[b]!="string")throw new Error("DBF Invalid column name "+x[b]+" |"+typeof x[b]+"|");if(x.indexOf(x[b])!==b){for(_=0;_<1024;++_)if(x.indexOf(x[b]+"_"+_)==-1){x[b]+="_"+_;break}}}}var k=sr(l["!ref"]),F=[],L=[],I=[];for(b=0;b<=k.e.c-k.s.c;++b){var N="",T="",P=0,B=[];for(_=0;_<v.length;++_)v[_][b]!=null&&B.push(v[_][b]);if(B.length==0||x[b]==null){F[b]="?";continue}for(_=0;_<B.length;++_){switch(typeof B[_]){case"number":T="B";break;case"string":T="C";break;case"boolean":T="L";break;case"object":T=B[_]instanceof Date?"D":"C";break;default:T="C"}P=Math.max(P,String(B[_]).length),N=N&&N!=T?"C":T}P>250&&(P=250),T=((w[b]||{}).DBF||{}).type,T=="C"&&w[b].DBF.len>P&&(P=w[b].DBF.len),N=="B"&&T=="N"&&(N="N",I[b]=w[b].DBF.dec,P=w[b].DBF.len),L[b]=N=="C"||T=="N"?P:i[N]||0,j+=L[b],F[b]=N}var z=f.next(32);for(z.write_shift(4,318902576),z.write_shift(4,v.length),z.write_shift(2,296+32*R),z.write_shift(2,j),b=0;b<4;++b)z.write_shift(4,0);for(z.write_shift(4,0|(+e[B6]||3)<<8),b=0,_=0;b<x.length;++b)if(x[b]!=null){var O=f.next(32),D=(x[b].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,D,"sbcs"),O.write_shift(1,F[b]=="?"?"C":F[b],"sbcs"),O.write_shift(4,_),O.write_shift(1,L[b]||i[F[b]]||0),O.write_shift(1,I[b]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),_+=L[b]||i[F[b]]||0}var G=f.next(264);for(G.write_shift(4,13),b=0;b<65;++b)G.write_shift(4,0);for(b=0;b<v.length;++b){var Q=f.next(j);for(Q.write_shift(1,0),_=0;_<x.length;++_)if(x[_]!=null)switch(F[_]){case"L":Q.write_shift(1,v[b][_]==null?63:v[b][_]?84:70);break;case"B":Q.write_shift(8,v[b][_]||0,"f");break;case"N":var ue="0";for(typeof v[b][_]=="number"&&(ue=v[b][_].toFixed(I[_]||0)),R=0;R<L[_]-ue.length;++R)Q.write_shift(1,32);Q.write_shift(1,ue,"sbcs");break;case"D":v[b][_]?(Q.write_shift(4,("0000"+v[b][_].getFullYear()).slice(-4),"sbcs"),Q.write_shift(2,("00"+(v[b][_].getMonth()+1)).slice(-2),"sbcs"),Q.write_shift(2,("00"+v[b][_].getDate()).slice(-2),"sbcs")):Q.write_shift(8,"00000000","sbcs");break;case"C":var H=String(v[b][_]!=null?v[b][_]:"").slice(0,L[_]);for(Q.write_shift(1,H,"sbcs"),R=0;R<L[_]-H.length;++R)Q.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:s,to_sheet:n,from_sheet:o}}(),J5=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+nn(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(x,v){var w=t[v];return typeof w=="number"?f4(w):w},n=function(x,v,w){var b=v.charCodeAt(0)-32<<4|w.charCodeAt(0)-48;return b==59?x:f4(b)};t["|"]=254;function s(x,v){switch(v.type){case"base64":return i(fa(x),v);case"binary":return i(x,v);case"buffer":return i(Ht&&Buffer.isBuffer(x)?x.toString("binary"):Hl(x),v);case"array":return i($c(x),v)}throw new Error("Unrecognized type "+v.type)}function i(x,v){var w=x.split(/[\n\r]+/),b=-1,_=-1,R=0,j=0,k=[],F=[],L=null,I={},N=[],T=[],P=[],B=0,z;for(+v.codepage>=0&&ei(+v.codepage);R!==w.length;++R){B=0;var O=w[R].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),D=O.replace(/;;/g,"\0").split(";").map(function(Z){return Z.replace(/\u0000/g,";")}),G=D[0],Q;if(O.length>0)switch(G){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&F.push(O.slice(3).replace(/;;/g,";"));break;case"C":var ue=!1,H=!1,te=!1,K=!1,ce=-1,U=-1;for(j=1;j<D.length;++j)switch(D[j].charAt(0)){case"A":break;case"X":_=parseInt(D[j].slice(1))-1,H=!0;break;case"Y":for(b=parseInt(D[j].slice(1))-1,H||(_=0),z=k.length;z<=b;++z)k[z]=[];break;case"K":Q=D[j].slice(1),Q.charAt(0)==='"'?Q=Q.slice(1,Q.length-1):Q==="TRUE"?Q=!0:Q==="FALSE"?Q=!1:isNaN(ni(Q))?isNaN(Md(Q).getDate())||(Q=Dr(Q)):(Q=ni(Q),L!==null&&sh(L)&&(Q=Ig(Q))),ue=!0;break;case"E":K=!0;var M=pd(D[j].slice(1),{r:b,c:_});k[b][_]=[k[b][_],M];break;case"S":te=!0,k[b][_]=[k[b][_],"S5S"];break;case"G":break;case"R":ce=parseInt(D[j].slice(1))-1;break;case"C":U=parseInt(D[j].slice(1))-1;break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+O)}if(ue&&(k[b][_]&&k[b][_].length==2?k[b][_][0]=Q:k[b][_]=Q,L=null),te){if(K)throw new Error("SYLK shared formula cannot have own formula");var X=ce>-1&&k[ce][U];if(!X||!X[1])throw new Error("SYLK shared formula cannot find base");k[b][_][1]=xR(X[1],{r:b-ce,c:_-U})}break;case"F":var Y=0;for(j=1;j<D.length;++j)switch(D[j].charAt(0)){case"X":_=parseInt(D[j].slice(1))-1,++Y;break;case"Y":for(b=parseInt(D[j].slice(1))-1,z=k.length;z<=b;++z)k[z]=[];break;case"M":B=parseInt(D[j].slice(1))/20;break;case"F":break;case"G":break;case"P":L=F[parseInt(D[j].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(P=D[j].slice(1).split(" "),z=parseInt(P[0],10);z<=parseInt(P[1],10);++z)B=parseInt(P[2],10),T[z-1]=B===0?{hidden:!0}:{wch:B},Pl(T[z-1]);break;case"C":_=parseInt(D[j].slice(1))-1,T[_]||(T[_]={});break;case"R":b=parseInt(D[j].slice(1))-1,N[b]||(N[b]={}),B>0?(N[b].hpt=B,N[b].hpx=Bd(B)):B===0&&(N[b].hidden=!0);break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+O)}Y<1&&(L=null);break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+O)}}return N.length>0&&(I["!rows"]=N),T.length>0&&(I["!cols"]=T),v&&v.sheetRows&&(k=k.slice(0,v.sheetRows)),[k,I]}function o(x,v){var w=s(x,v),b=w[0],_=w[1],R=ih(b,v);return nn(_).forEach(function(j){R[j]=_[j]}),R}function l(x,v){return Wl(o(x,v),v)}function u(x,v,w,b){var _="C;Y"+(w+1)+";X"+(b+1)+";K";switch(x.t){case"n":_+=x.v||0,x.f&&!x.F&&(_+=";E"+l_(x.f,{r:w,c:b}));break;case"b":_+=x.v?"TRUE":"FALSE";break;case"e":_+=x.w||x.v;break;case"d":_+='"'+(x.w||x.v)+'"';break;case"s":_+='"'+x.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return _}function h(x,v){v.forEach(function(w,b){var _="F;W"+(b+1)+" "+(b+1)+" ";w.hidden?_+="0":(typeof w.width=="number"&&!w.wpx&&(w.wpx=Qf(w.width)),typeof w.wpx=="number"&&!w.wch&&(w.wch=Jf(w.wpx)),typeof w.wch=="number"&&(_+=Math.round(w.wch))),_.charAt(_.length-1)!=" "&&x.push(_)})}function f(x,v){v.forEach(function(w,b){var _="F;";w.hidden?_+="M0;":w.hpt?_+="M"+20*w.hpt+";":w.hpx&&(_+="M"+20*Zf(w.hpx)+";"),_.length>2&&x.push(_+"R"+(b+1))})}function p(x,v){var w=["ID;PWXL;N;E"],b=[],_=sr(x["!ref"]),R,j=Array.isArray(x),k=`\r
`;w.push("P;PGeneral"),w.push("F;P0;DG0G8;M255"),x["!cols"]&&h(w,x["!cols"]),x["!rows"]&&f(w,x["!rows"]),w.push("B;Y"+(_.e.r-_.s.r+1)+";X"+(_.e.c-_.s.c+1)+";D"+[_.s.c,_.s.r,_.e.c,_.e.r].join(" "));for(var F=_.s.r;F<=_.e.r;++F)for(var L=_.s.c;L<=_.e.c;++L){var I=jt({r:F,c:L});R=j?(x[F]||[])[L]:x[I],!(!R||R.v==null&&(!R.f||R.F))&&b.push(u(R,x,F,L))}return w.join(k)+k+b.join(k)+k+"E"+k}return{to_workbook:l,to_sheet:o,from_sheet:p}}(),Z5=function(){function t(i,o){switch(o.type){case"base64":return e(fa(i),o);case"binary":return e(i,o);case"buffer":return e(Ht&&Buffer.isBuffer(i)?i.toString("binary"):Hl(i),o);case"array":return e($c(i),o)}throw new Error("Unrecognized type "+o.type)}function e(i,o){for(var l=i.split(`
`),u=-1,h=-1,f=0,p=[];f!==l.length;++f){if(l[f].trim()==="BOT"){p[++u]=[],h=0;continue}if(!(u<0)){var x=l[f].trim().split(","),v=x[0],w=x[1];++f;for(var b=l[f]||"";(b.match(/["]/g)||[]).length&1&&f<l.length-1;)b+=`
`+l[++f];switch(b=b.trim(),+v){case-1:if(b==="BOT"){p[++u]=[],h=0;continue}else if(b!=="EOD")throw new Error("Unrecognized DIF special command "+b);break;case 0:b==="TRUE"?p[u][h]=!0:b==="FALSE"?p[u][h]=!1:isNaN(ni(w))?isNaN(Md(w).getDate())?p[u][h]=w:p[u][h]=Dr(w):p[u][h]=ni(w),++h;break;case 1:b=b.slice(1,b.length-1),b=b.replace(/""/g,'"'),b&&b.match(/^=".*"$/)&&(b=b.slice(2,-1)),p[u][h++]=b!==""?b:null;break}if(b==="EOD")break}}return o&&o.sheetRows&&(p=p.slice(0,o.sheetRows)),p}function r(i,o){return ih(t(i,o),o)}function n(i,o){return Wl(r(i,o),o)}var s=function(){var i=function(u,h,f,p,x){u.push(h),u.push(f+","+p),u.push('"'+x.replace(/"/g,'""')+'"')},o=function(u,h,f,p){u.push(h+","+f),u.push(h==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(u){var h=[],f=sr(u["!ref"]),p,x=Array.isArray(u);i(h,"TABLE",0,1,"sheetjs"),i(h,"VECTORS",0,f.e.r-f.s.r+1,""),i(h,"TUPLES",0,f.e.c-f.s.c+1,""),i(h,"DATA",0,0,"");for(var v=f.s.r;v<=f.e.r;++v){o(h,-1,0,"BOT");for(var w=f.s.c;w<=f.e.c;++w){var b=jt({r:v,c:w});if(p=x?(u[v]||[])[w]:u[b],!p){o(h,1,0,"");continue}switch(p.t){case"n":var _=p.w;!_&&p.v!=null&&(_=p.v),_==null?p.f&&!p.F?o(h,1,0,"="+p.f):o(h,1,0,""):o(h,0,_,"V");break;case"b":o(h,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":o(h,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=Da(p.z||Tt[14],An(Dr(p.v)))),o(h,0,p.w,"V");break;default:o(h,1,0,"")}}}o(h,-1,0,"EOD");var R=`\r
`,j=h.join(R);return j}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),eR=function(){function t(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(p,x){for(var v=p.split(`
`),w=-1,b=-1,_=0,R=[];_!==v.length;++_){var j=v[_].trim().split(":");if(j[0]==="cell"){var k=Gr(j[1]);if(R.length<=k.r)for(w=R.length;w<=k.r;++w)R[w]||(R[w]=[]);switch(w=k.r,b=k.c,j[2]){case"t":R[w][b]=t(j[3]);break;case"v":R[w][b]=+j[3];break;case"vtf":var F=j[j.length-1];case"vtc":switch(j[3]){case"nl":R[w][b]=!!+j[4];break;default:R[w][b]=+j[4];break}j[2]=="vtf"&&(R[w][b]=[R[w][b],F])}}}return x&&x.sheetRows&&(R=R.slice(0,x.sheetRows)),R}function n(p,x){return ih(r(p,x),x)}function s(p,x){return Wl(n(p,x),x)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),u="--SocialCalcSpreadsheetControlSave--";function h(p){if(!p||!p["!ref"])return"";for(var x=[],v=[],w,b="",_=Xs(p["!ref"]),R=Array.isArray(p),j=_.s.r;j<=_.e.r;++j)for(var k=_.s.c;k<=_.e.c;++k)if(b=jt({r:j,c:k}),w=R?(p[j]||[])[k]:p[b],!(!w||w.v==null||w.t==="z")){switch(v=["cell",b,"t"],w.t){case"s":case"str":v.push(e(w.v));break;case"n":w.f?(v[2]="vtf",v[3]="n",v[4]=w.v,v[5]=e(w.f)):(v[2]="v",v[3]=w.v);break;case"b":v[2]="vt"+(w.f?"f":"c"),v[3]="nl",v[4]=w.v?"1":"0",v[5]=e(w.f||(w.v?"TRUE":"FALSE"));break;case"d":var F=An(Dr(w.v));v[2]="vtc",v[3]="nd",v[4]=""+F,v[5]=w.w||Da(w.z||Tt[14],F);break;case"e":continue}x.push(v.join(":"))}return x.push("sheet:c:"+(_.e.c-_.s.c+1)+":r:"+(_.e.r-_.s.r+1)+":tvf:1"),x.push("valueformat:1:text-wiki"),x.join(`
`)}function f(p){return[i,o,l,o,h(p),u].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:f}}(),Vd=function(){function t(f,p,x,v,w){w.raw?p[x][v]=f:f===""||(f==="TRUE"?p[x][v]=!0:f==="FALSE"?p[x][v]=!1:isNaN(ni(f))?isNaN(Md(f).getDate())?p[x][v]=f:p[x][v]=Dr(f):p[x][v]=ni(f))}function e(f,p){var x=p||{},v=[];if(!f||f.length===0)return v;for(var w=f.split(/[\r\n]/),b=w.length-1;b>=0&&w[b].length===0;)--b;for(var _=10,R=0,j=0;j<=b;++j)R=w[j].indexOf(" "),R==-1?R=w[j].length:R++,_=Math.max(_,R);for(j=0;j<=b;++j){v[j]=[];var k=0;for(t(w[j].slice(0,_).trim(),v,j,k,x),k=1;k<=(w[j].length-_)/10+1;++k)t(w[j].slice(_+(k-1)*10,_+k*10).trim(),v,j,k,x)}return x.sheetRows&&(v=v.slice(0,x.sheetRows)),v}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(f){for(var p={},x=!1,v=0,w=0;v<f.length;++v)(w=f.charCodeAt(v))==34?x=!x:!x&&w in r&&(p[w]=(p[w]||0)+1);w=[];for(v in p)Object.prototype.hasOwnProperty.call(p,v)&&w.push([p[v],v]);if(!w.length){p=n;for(v in p)Object.prototype.hasOwnProperty.call(p,v)&&w.push([p[v],v])}return w.sort(function(b,_){return b[0]-_[0]||n[b[1]]-n[_[1]]}),r[w.pop()[1]]||44}function i(f,p){var x=p||{},v="",w=x.dense?[]:{},b={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(v=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(v=f.charAt(4),f=f.slice(6)):v=s(f.slice(0,1024)):x&&x.FS?v=x.FS:v=s(f.slice(0,1024));var _=0,R=0,j=0,k=0,F=0,L=v.charCodeAt(0),I=!1,N=0,T=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var P=x.dateNF!=null?AK(x.dateNF):null;function B(){var z=f.slice(k,F),O={};if(z.charAt(0)=='"'&&z.charAt(z.length-1)=='"'&&(z=z.slice(1,-1).replace(/""/g,'"')),z.length===0)O.t="z";else if(x.raw)O.t="s",O.v=z;else if(z.trim().length===0)O.t="s",O.v=z;else if(z.charCodeAt(0)==61)z.charCodeAt(1)==34&&z.charCodeAt(z.length-1)==34?(O.t="s",O.v=z.slice(2,-1).replace(/""/g,'"')):see(z)?(O.t="n",O.f=z.slice(1)):(O.t="s",O.v=z);else if(z=="TRUE")O.t="b",O.v=!0;else if(z=="FALSE")O.t="b",O.v=!1;else if(!isNaN(j=ni(z)))O.t="n",x.cellText!==!1&&(O.w=z),O.v=j;else if(!isNaN(Md(z).getDate())||P&&z.match(P)){O.z=x.dateNF||Tt[14];var D=0;P&&z.match(P)&&(z=CK(z,x.dateNF,z.match(P)||[]),D=1),x.cellDates?(O.t="d",O.v=Dr(z,D)):(O.t="n",O.v=An(Dr(z,D))),x.cellText!==!1&&(O.w=Da(O.z,O.v instanceof Date?An(O.v):O.v)),x.cellNF||delete O.z}else O.t="s",O.v=z;if(O.t=="z"||(x.dense?(w[_]||(w[_]=[]),w[_][R]=O):w[jt({c:R,r:_})]=O),k=F+1,T=f.charCodeAt(k),b.e.c<R&&(b.e.c=R),b.e.r<_&&(b.e.r=_),N==L)++R;else if(R=0,++_,x.sheetRows&&x.sheetRows<=_)return!0}e:for(;F<f.length;++F)switch(N=f.charCodeAt(F)){case 34:T===34&&(I=!I);break;case L:case 10:case 13:if(!I&&B())break e;break}return F-k>0&&B(),w["!ref"]=Bt(b),w}function o(f,p){return!(p&&p.PRN)||p.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?i(f,p):ih(e(f,p),p)}function l(f,p){var x="",v=p.type=="string"?[0,0,0,0]:x_(f,p);switch(p.type){case"base64":x=fa(f);break;case"binary":x=f;break;case"buffer":p.codepage==65001?x=f.toString("utf8"):p.codepage&&typeof $f<"u"||(x=Ht&&Buffer.isBuffer(f)?f.toString("binary"):Hl(f));break;case"array":x=$c(f);break;case"string":x=f;break;default:throw new Error("Unrecognized type "+p.type)}return v[0]==239&&v[1]==187&&v[2]==191?x=vr(x.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?x=vr(x):p.type=="binary"&&typeof $f<"u",x.slice(0,19)=="socialcalc:version:"?eR.to_sheet(p.type=="string"?x:vr(x),p):o(x,p)}function u(f,p){return Wl(l(f,p),p)}function h(f){for(var p=[],x=sr(f["!ref"]),v,w=Array.isArray(f),b=x.s.r;b<=x.e.r;++b){for(var _=[],R=x.s.c;R<=x.e.c;++R){var j=jt({r:b,c:R});if(v=w?(f[b]||[])[R]:f[j],!v||v.v==null){_.push("          ");continue}for(var k=(v.w||(Eo(v),v.w)||"").slice(0,10);k.length<10;)k+=" ";_.push(k+(R===0?" ":""))}p.push(_.join(""))}return p.join(`
`)}return{to_workbook:u,to_sheet:l,from_sheet:h}}();function HQ(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var s=J5.to_workbook(t,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return Vd.to_workbook(t,e)}}var Ac=function(){function t(M,X,Y){if(M){Jn(M,M.l||0);for(var Z=Y.Enum||ce;M.l<M.length;){var fe=M.read_shift(2),ie=Z[fe]||Z[65535],me=M.read_shift(2),pe=M.l+me,we=ie.f&&ie.f(M,me,Y);if(M.l=pe,X(we,ie,fe))return}}}function e(M,X){switch(X.type){case"base64":return r(ia(fa(M)),X);case"binary":return r(ia(M),X);case"buffer":case"array":return r(M,X)}throw"Unsupported type "+X.type}function r(M,X){if(!M)return M;var Y=X||{},Z=Y.dense?[]:{},fe="Sheet1",ie="",me=0,pe={},we=[],Xe=[],re={s:{r:0,c:0},e:{r:0,c:0}},Ze=Y.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)Y.Enum=ce,t(M,function(se,ve,Me){switch(Me){case 0:Y.vers=se,se>=4096&&(Y.qpro=!0);break;case 6:re=se;break;case 204:se&&(ie=se);break;case 222:ie=se;break;case 15:case 51:Y.qpro||(se[1].v=se[1].v.slice(1));case 13:case 14:case 16:Me==14&&(se[2]&112)==112&&(se[2]&15)>1&&(se[2]&15)<15&&(se[1].z=Y.dateNF||Tt[14],Y.cellDates&&(se[1].t="d",se[1].v=Ig(se[1].v))),Y.qpro&&se[3]>me&&(Z["!ref"]=Bt(re),pe[fe]=Z,we.push(fe),Z=Y.dense?[]:{},re={s:{r:0,c:0},e:{r:0,c:0}},me=se[3],fe=ie||"Sheet"+(me+1),ie="");var Re=Y.dense?(Z[se[0].r]||[])[se[0].c]:Z[jt(se[0])];if(Re){Re.t=se[1].t,Re.v=se[1].v,se[1].z!=null&&(Re.z=se[1].z),se[1].f!=null&&(Re.f=se[1].f);break}Y.dense?(Z[se[0].r]||(Z[se[0].r]=[]),Z[se[0].r][se[0].c]=se[1]):Z[jt(se[0])]=se[1];break}},Y);else if(M[2]==26||M[2]==14)Y.Enum=U,M[2]==14&&(Y.qpro=!0,M.l=0),t(M,function(se,ve,Me){switch(Me){case 204:fe=se;break;case 22:se[1].v=se[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(se[3]>me&&(Z["!ref"]=Bt(re),pe[fe]=Z,we.push(fe),Z=Y.dense?[]:{},re={s:{r:0,c:0},e:{r:0,c:0}},me=se[3],fe="Sheet"+(me+1)),Ze>0&&se[0].r>=Ze)break;Y.dense?(Z[se[0].r]||(Z[se[0].r]=[]),Z[se[0].r][se[0].c]=se[1]):Z[jt(se[0])]=se[1],re.e.c<se[0].c&&(re.e.c=se[0].c),re.e.r<se[0].r&&(re.e.r=se[0].r);break;case 27:se[14e3]&&(Xe[se[14e3][0]]=se[14e3][1]);break;case 1537:Xe[se[0]]=se[1],se[0]==me&&(fe=se[1]);break}},Y);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(Z["!ref"]=Bt(re),pe[ie||fe]=Z,we.push(ie||fe),!Xe.length)return{SheetNames:we,Sheets:pe};for(var Fe={},ge=[],be=0;be<Xe.length;++be)pe[we[be]]?(ge.push(Xe[be]||we[be]),Fe[Xe[be]]=pe[Xe[be]]||pe[we[be]]):(ge.push(Xe[be]),Fe[Xe[be]]={"!ref":"A1"});return{SheetNames:ge,Sheets:Fe}}function n(M,X){var Y=X||{};if(+Y.codepage>=0&&ei(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK1 to JS string");var Z=Ks(),fe=sr(M["!ref"]),ie=Array.isArray(M),me=[];at(Z,0,i(1030)),at(Z,6,u(fe));for(var pe=Math.min(fe.e.r,8191),we=fe.s.r;we<=pe;++we)for(var Xe=hn(we),re=fe.s.c;re<=fe.e.c;++re){we===fe.s.r&&(me[re]=qr(re));var Ze=me[re]+Xe,Fe=ie?(M[we]||[])[re]:M[Ze];if(!(!Fe||Fe.t=="z"))if(Fe.t=="n")(Fe.v|0)==Fe.v&&Fe.v>=-32768&&Fe.v<=32767?at(Z,13,v(we,re,Fe.v)):at(Z,14,b(we,re,Fe.v));else{var ge=Eo(Fe);at(Z,15,p(we,re,ge.slice(0,239)))}}return at(Z,1),Z.end()}function s(M,X){var Y=X||{};if(+Y.codepage>=0&&ei(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK3 to JS string");var Z=Ks();at(Z,0,o(M));for(var fe=0,ie=0;fe<M.SheetNames.length;++fe)(M.Sheets[M.SheetNames[fe]]||{})["!ref"]&&at(Z,27,K(M.SheetNames[fe],ie++));var me=0;for(fe=0;fe<M.SheetNames.length;++fe){var pe=M.Sheets[M.SheetNames[fe]];if(!(!pe||!pe["!ref"])){for(var we=sr(pe["!ref"]),Xe=Array.isArray(pe),re=[],Ze=Math.min(we.e.r,8191),Fe=we.s.r;Fe<=Ze;++Fe)for(var ge=hn(Fe),be=we.s.c;be<=we.e.c;++be){Fe===we.s.r&&(re[be]=qr(be));var se=re[be]+ge,ve=Xe?(pe[Fe]||[])[be]:pe[se];if(!(!ve||ve.t=="z"))if(ve.t=="n")at(Z,23,B(Fe,be,me,ve.v));else{var Me=Eo(ve);at(Z,22,N(Fe,be,me,Me.slice(0,239)))}}++me}}return at(Z,1),Z.end()}function i(M){var X=Oe(2);return X.write_shift(2,M),X}function o(M){var X=Oe(26);X.write_shift(2,4096),X.write_shift(2,4),X.write_shift(4,0);for(var Y=0,Z=0,fe=0,ie=0;ie<M.SheetNames.length;++ie){var me=M.SheetNames[ie],pe=M.Sheets[me];if(!(!pe||!pe["!ref"])){++fe;var we=Xs(pe["!ref"]);Y<we.e.r&&(Y=we.e.r),Z<we.e.c&&(Z=we.e.c)}}return Y>8191&&(Y=8191),X.write_shift(2,Y),X.write_shift(1,fe),X.write_shift(1,Z),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(1,1),X.write_shift(1,2),X.write_shift(4,0),X.write_shift(4,0),X}function l(M,X,Y){var Z={s:{c:0,r:0},e:{c:0,r:0}};return X==8&&Y.qpro?(Z.s.c=M.read_shift(1),M.l++,Z.s.r=M.read_shift(2),Z.e.c=M.read_shift(1),M.l++,Z.e.r=M.read_shift(2),Z):(Z.s.c=M.read_shift(2),Z.s.r=M.read_shift(2),X==12&&Y.qpro&&(M.l+=2),Z.e.c=M.read_shift(2),Z.e.r=M.read_shift(2),X==12&&Y.qpro&&(M.l+=2),Z.s.c==65535&&(Z.s.c=Z.e.c=Z.s.r=Z.e.r=0),Z)}function u(M){var X=Oe(8);return X.write_shift(2,M.s.c),X.write_shift(2,M.s.r),X.write_shift(2,M.e.c),X.write_shift(2,M.e.r),X}function h(M,X,Y){var Z=[{c:0,r:0},{t:"n",v:0},0,0];return Y.qpro&&Y.vers!=20768?(Z[0].c=M.read_shift(1),Z[3]=M.read_shift(1),Z[0].r=M.read_shift(2),M.l+=2):(Z[2]=M.read_shift(1),Z[0].c=M.read_shift(2),Z[0].r=M.read_shift(2)),Z}function f(M,X,Y){var Z=M.l+X,fe=h(M,X,Y);if(fe[1].t="s",Y.vers==20768){M.l++;var ie=M.read_shift(1);return fe[1].v=M.read_shift(ie,"utf8"),fe}return Y.qpro&&M.l++,fe[1].v=M.read_shift(Z-M.l,"cstr"),fe}function p(M,X,Y){var Z=Oe(7+Y.length);Z.write_shift(1,255),Z.write_shift(2,X),Z.write_shift(2,M),Z.write_shift(1,39);for(var fe=0;fe<Z.length;++fe){var ie=Y.charCodeAt(fe);Z.write_shift(1,ie>=128?95:ie)}return Z.write_shift(1,0),Z}function x(M,X,Y){var Z=h(M,X,Y);return Z[1].v=M.read_shift(2,"i"),Z}function v(M,X,Y){var Z=Oe(7);return Z.write_shift(1,255),Z.write_shift(2,X),Z.write_shift(2,M),Z.write_shift(2,Y,"i"),Z}function w(M,X,Y){var Z=h(M,X,Y);return Z[1].v=M.read_shift(8,"f"),Z}function b(M,X,Y){var Z=Oe(13);return Z.write_shift(1,255),Z.write_shift(2,X),Z.write_shift(2,M),Z.write_shift(8,Y,"f"),Z}function _(M,X,Y){var Z=M.l+X,fe=h(M,X,Y);if(fe[1].v=M.read_shift(8,"f"),Y.qpro)M.l=Z;else{var ie=M.read_shift(2);F(M.slice(M.l,M.l+ie),fe),M.l+=ie}return fe}function R(M,X,Y){var Z=X&32768;return X&=-32769,X=(Z?M:0)+(X>=8192?X-16384:X),(Z?"":"$")+(Y?qr(X):hn(X))}var j={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},k=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function F(M,X){Jn(M,0);for(var Y=[],Z=0,fe="",ie="",me="",pe="";M.l<M.length;){var we=M[M.l++];switch(we){case 0:Y.push(M.read_shift(8,"f"));break;case 1:ie=R(X[0].c,M.read_shift(2),!0),fe=R(X[0].r,M.read_shift(2),!1),Y.push(ie+fe);break;case 2:{var Xe=R(X[0].c,M.read_shift(2),!0),re=R(X[0].r,M.read_shift(2),!1);ie=R(X[0].c,M.read_shift(2),!0),fe=R(X[0].r,M.read_shift(2),!1),Y.push(Xe+re+":"+ie+fe)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:Y.push("("+Y.pop()+")");break;case 5:Y.push(M.read_shift(2));break;case 6:{for(var Ze="";we=M[M.l++];)Ze+=String.fromCharCode(we);Y.push('"'+Ze.replace(/"/g,'""')+'"')}break;case 8:Y.push("-"+Y.pop());break;case 23:Y.push("+"+Y.pop());break;case 22:Y.push("NOT("+Y.pop()+")");break;case 20:case 21:pe=Y.pop(),me=Y.pop(),Y.push(["AND","OR"][we-20]+"("+me+","+pe+")");break;default:if(we<32&&k[we])pe=Y.pop(),me=Y.pop(),Y.push(me+k[we]+pe);else if(j[we]){if(Z=j[we][1],Z==69&&(Z=M[M.l++]),Z>Y.length){console.error("WK1 bad formula parse 0x"+we.toString(16)+":|"+Y.join("|")+"|");return}var Fe=Y.slice(-Z);Y.length-=Z,Y.push(j[we][0]+"("+Fe.join(",")+")")}else return we<=7?console.error("WK1 invalid opcode "+we.toString(16)):we<=24?console.error("WK1 unsupported op "+we.toString(16)):we<=30?console.error("WK1 invalid opcode "+we.toString(16)):we<=115?console.error("WK1 unsupported function opcode "+we.toString(16)):console.error("WK1 unrecognized opcode "+we.toString(16))}}Y.length==1?X[1].f=""+Y[0]:console.error("WK1 bad formula parse |"+Y.join("|")+"|")}function L(M){var X=[{c:0,r:0},{t:"n",v:0},0];return X[0].r=M.read_shift(2),X[3]=M[M.l++],X[0].c=M[M.l++],X}function I(M,X){var Y=L(M);return Y[1].t="s",Y[1].v=M.read_shift(X-4,"cstr"),Y}function N(M,X,Y,Z){var fe=Oe(6+Z.length);fe.write_shift(2,M),fe.write_shift(1,Y),fe.write_shift(1,X),fe.write_shift(1,39);for(var ie=0;ie<Z.length;++ie){var me=Z.charCodeAt(ie);fe.write_shift(1,me>=128?95:me)}return fe.write_shift(1,0),fe}function T(M,X){var Y=L(M);Y[1].v=M.read_shift(2);var Z=Y[1].v>>1;if(Y[1].v&1)switch(Z&7){case 0:Z=(Z>>3)*5e3;break;case 1:Z=(Z>>3)*500;break;case 2:Z=(Z>>3)/20;break;case 3:Z=(Z>>3)/200;break;case 4:Z=(Z>>3)/2e3;break;case 5:Z=(Z>>3)/2e4;break;case 6:Z=(Z>>3)/16;break;case 7:Z=(Z>>3)/64;break}return Y[1].v=Z,Y}function P(M,X){var Y=L(M),Z=M.read_shift(4),fe=M.read_shift(4),ie=M.read_shift(2);if(ie==65535)return Z===0&&fe===3221225472?(Y[1].t="e",Y[1].v=15):Z===0&&fe===3489660928?(Y[1].t="e",Y[1].v=42):Y[1].v=0,Y;var me=ie&32768;return ie=(ie&32767)-16446,Y[1].v=(1-me*2)*(fe*Math.pow(2,ie+32)+Z*Math.pow(2,ie)),Y}function B(M,X,Y,Z){var fe=Oe(14);if(fe.write_shift(2,M),fe.write_shift(1,Y),fe.write_shift(1,X),Z==0)return fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(2,65535),fe;var ie=0,me=0,pe=0,we=0;return Z<0&&(ie=1,Z=-Z),me=Math.log2(Z)|0,Z/=Math.pow(2,me-31),we=Z>>>0,(we&2147483648)==0&&(Z/=2,++me,we=Z>>>0),Z-=we,we|=2147483648,we>>>=0,Z*=Math.pow(2,32),pe=Z>>>0,fe.write_shift(4,pe),fe.write_shift(4,we),me+=16383+(ie?32768:0),fe.write_shift(2,me),fe}function z(M,X){var Y=P(M);return M.l+=X-14,Y}function O(M,X){var Y=L(M),Z=M.read_shift(4);return Y[1].v=Z>>6,Y}function D(M,X){var Y=L(M),Z=M.read_shift(8,"f");return Y[1].v=Z,Y}function G(M,X){var Y=D(M);return M.l+=X-10,Y}function Q(M,X){return M[M.l+X-1]==0?M.read_shift(X,"cstr"):""}function ue(M,X){var Y=M[M.l++];Y>X-1&&(Y=X-1);for(var Z="";Z.length<Y;)Z+=String.fromCharCode(M[M.l++]);return Z}function H(M,X,Y){if(!(!Y.qpro||X<21)){var Z=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var fe=M.read_shift(X-21,"cstr");return[Z,fe]}}function te(M,X){for(var Y={},Z=M.l+X;M.l<Z;){var fe=M.read_shift(2);if(fe==14e3){for(Y[fe]=[0,""],Y[fe][0]=M.read_shift(2);M[M.l];)Y[fe][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return Y}function K(M,X){var Y=Oe(5+M.length);Y.write_shift(2,14e3),Y.write_shift(2,X);for(var Z=0;Z<M.length;++Z){var fe=M.charCodeAt(Z);Y[Y.l++]=fe>127?95:fe}return Y[Y.l++]=0,Y}var ce={0:{n:"BOF",f:yn},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:x},14:{n:"NUMBER",f:w},15:{n:"LABEL",f},16:{n:"FORMULA",f:_},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Q},222:{n:"SHEETNAMELP",f:ue},65535:{n:""}},U={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:P},24:{n:"NUMBER18",f:T},25:{n:"FORMULA19",f:z},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:te},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:G},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Q},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:H},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}}();function WQ(t){var e={},r=t.match(Es),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=Rt(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;e.cp=Pb[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=i.val;break;case"<sz":e.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":i.rgb&&(e.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return e}var qQ=function(){var t=qf("t"),e=qf("rPr");function r(i){var o=i.match(t);if(!o)return{t:"s",v:""};var l={t:"s",v:rr(o[1])},u=i.match(e);return u&&(l.s=WQ(u[1])),l}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(s).map(r).filter(function(l){return l.v})}}(),GQ=function(){var e=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var u=s.valign||"";return u=="superscript"||u=="super"?u="sup":u=="subscript"&&(u="sub"),u!=""&&(i.push("<"+u+">"),o.push("</"+u+">")),o.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(e,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),KQ=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,XQ=/<(?:\w+:)?r>/,YQ=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function n_(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=rr(vr(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=vr(t),r&&(n.h=$b(n.t))):t.match(XQ)&&(n.r=vr(t),n.t=rr(vr((t.replace(YQ,"").match(KQ)||[]).join("").replace(Es,""))),r&&(n.h=GQ(qQ(n.r)))),n):{t:""}}var QQ=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,JQ=/<(?:\w+:)?(?:si|sstItem)>/g,ZQ=/<\/(?:\w+:)?(?:si|sstItem)>/;function eJ(t,e){var r=[],n="";if(!t)return r;var s=t.match(QQ);if(s){n=s[2].replace(JQ,"").split(ZQ);for(var i=0;i!=n.length;++i){var o=n_(n[i].trim(),e);o!=null&&(r[r.length]=o)}s=Rt(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var tJ=/^\s|\s$|[\t\n\r]/;function tR(t,e){if(!e.bookSST)return"";var r=[fn];r[r.length]=rt("sst",null,{xmlns:su[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var s=t[n],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(tJ)&&(i+=' xml:space="preserve"'),i+=">"+gr(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function rJ(t){return[t.read_shift(4),t.read_shift(4)]}function nJ(t,e){var r=[],n=!1;return Co(t,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||e.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function sJ(t,e){return e||(e=Oe(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var aJ=pX;function iJ(t){var e=Ks();$e(e,159,sJ(t));for(var r=0;r<t.length;++r)$e(e,19,aJ(t[r]));return $e(e,160),e.end()}function rR(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function fo(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function oJ(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=fo(t,4),e.U=fo(t,4),e.W=fo(t,4),e}function lJ(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},s=t.read_shift(4),i=[];s-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=i,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function cJ(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(lJ(t));return e}function uJ(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function dJ(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=fo(t,4),e.U=fo(t,4),e.W=fo(t,4),e}function hJ(t){var e=dJ(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function nR(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function sR(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function fJ(t){var e=fo(t);switch(e.Minor){case 2:return[e.Minor,mJ(t)];case 3:return[e.Minor,pJ()];case 4:return[e.Minor,xJ(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function mJ(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=nR(t,r),s=sR(t,t.length-t.l);return{t:"Std",h:n,v:s}}function pJ(){throw new Error("File is password-protected: ECMA-376 Extensible")}function xJ(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Es,function(i){var o=Rt(i);switch(Li(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function gJ(t,e){var r={},n=r.EncryptionVersionInfo=fo(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,r.EncryptionHeader=nR(t,s),e-=s,r.EncryptionVerifier=sR(t,e),r}function vJ(t){var e={},r=e.EncryptionVersionInfo=fo(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function s_(t){var e=0,r,n=rR(t),s=n.length+1,i,o,l,u,h;for(r=Rl(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(e&16384)===0?0:1,u=e<<1&32767,h=l|u,e=h^o;return e^52811}var aR=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},s=function(o,l){return n(o^l)},i=function(o){for(var l=e[o.length-1],u=104,h=o.length-1;h>=0;--h)for(var f=o[h],p=0;p!=7;++p)f&64&&(l^=r[u]),f*=2,--u;return l};return function(o){for(var l=rR(o),u=i(l),h=l.length,f=Rl(16),p=0;p!=16;++p)f[p]=0;var x,v,w;for((h&1)===1&&(x=u>>8,f[h]=s(t[0],x),--h,x=u&255,v=l[l.length-1],f[h]=s(v,x));h>0;)--h,x=u>>8,f[h]=s(l[h],x),--h,x=u&255,f[h]=s(l[h],x);for(h=15,w=15-l.length;w>0;)x=u>>8,f[h]=s(t[w],x),--h,--w,x=u&255,f[h]=s(l[h],x),--h,--w;return f}}(),yJ=function(t,e,r,n,s){s||(s=e),n||(n=aR(t));var i,o;for(i=0;i!=e.length;++i)o=e[i],o^=n[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,n]},wJ=function(t){var e=0,r=aR(t);return function(n){var s=yJ("",n,e,r);return e=s[1],s[0]}};function bJ(t,e,r,n){var s={key:yn(t),verificationBytes:yn(t)};return r.password&&(s.verifier=s_(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=wJ(r.password)),s}function _J(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=vJ(t):n.Data=gJ(t,e),n}function NJ(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?_J(t,e-2,n):bJ(t,r.biff>=8?e:e-2,r,n),n}var iR=function(){function t(s,i){switch(i.type){case"base64":return e(fa(s),i);case"binary":return e(s,i);case"buffer":return e(Ht&&Buffer.isBuffer(s)?s.toString("binary"):Hl(s),i);case"array":return e($c(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){var o=i||{},l=o.dense?[]:{},u=s.match(/\\trowd.*?\\row\b/g);if(!u.length)throw new Error("RTF missing table");var h={s:{c:0,r:0},e:{c:0,r:u.length-1}};return u.forEach(function(f,p){Array.isArray(l)&&(l[p]=[]);for(var x=/\\\w+\b/g,v=0,w,b=-1;w=x.exec(f);){switch(w[0]){case"\\cell":var _=f.slice(v,x.lastIndex-w[0].length);if(_[0]==" "&&(_=_.slice(1)),++b,_.length){var R={v:_,t:"s"};Array.isArray(l)?l[p][b]=R:l[jt({r:p,c:b})]=R}break}v=x.lastIndex}b>h.e.c&&(h.e.c=b)}),l["!ref"]=Bt(h),l}function r(s,i){return Wl(t(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],o=sr(s["!ref"]),l,u=Array.isArray(s),h=o.s.r;h<=o.e.r;++h){i.push("\\trowd\\trautofit1");for(var f=o.s.c;f<=o.e.c;++f)i.push("\\cellx"+(f+1));for(i.push("\\pard\\intbl"),f=o.s.c;f<=o.e.c;++f){var p=jt({r:h,c:f});l=u?(s[h]||[])[f]:s[p],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(Eo(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function EJ(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Yf(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function SJ(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(e,r,n),i=Math.min(e,r,n),o=s-i;if(o===0)return[0,0,e];var l=0,u=0,h=s+i;switch(u=o/(h>1?2-h:h),s){case e:l=((r-n)/o+6)%6;break;case r:l=(n-e)/o+2;break;case n:l=(e-r)/o+4;break}return[l/6,u,h/2]}function kJ(t){var e=t[0],r=t[1],n=t[2],s=r*2*(n<.5?n:1-n),i=n-s/2,o=[i,i,i],l=6*e,u;if(r!==0)switch(l|0){case 0:case 6:u=s*l,o[0]+=s,o[1]+=u;break;case 1:u=s*(2-l),o[0]+=u,o[1]+=s;break;case 2:u=s*(l-2),o[1]+=s,o[2]+=u;break;case 3:u=s*(4-l),o[1]+=u,o[2]+=s;break;case 4:u=s*(l-4),o[2]+=s,o[0]+=u;break;case 5:u=s*(6-l),o[2]+=u,o[0]+=s;break}for(var h=0;h!=3;++h)o[h]=Math.round(o[h]*255);return o}function Tx(t,e){if(e===0)return t;var r=SJ(EJ(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),Yf(kJ(r))}var oR=6,TJ=15,jJ=1,ps=oR;function Qf(t){return Math.floor((t+Math.round(128/ps)/256)*ps)}function Jf(t){return Math.floor((t-5)/ps*100+.5)/100}function jx(t){return Math.round((t*ps+5)/ps*256)/256}function e1(t){return jx(Jf(Qf(t)))}function a_(t){var e=Math.abs(t-e1(t)),r=ps;if(e>.005)for(ps=jJ;ps<TJ;++ps)Math.abs(t-e1(t))<=e&&(e=Math.abs(t-e1(t)),r=ps);ps=r}function Pl(t){t.width?(t.wpx=Qf(t.width),t.wch=Jf(t.wpx),t.MDW=ps):t.wpx?(t.wch=Jf(t.wpx),t.width=jx(t.wch),t.MDW=ps):typeof t.wch=="number"&&(t.width=jx(t.wch),t.wpx=Qf(t.width),t.MDW=ps),t.customWidth&&delete t.customWidth}var AJ=96,lR=AJ;function Zf(t){return t*96/lR}function Bd(t){return t*lR/96}var CJ={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function IJ(t,e,r,n){e.Borders=[];var s={},i=!1;(t[0].match(Es)||[]).forEach(function(o){var l=Rt(o);switch(Li(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=Cr(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=Cr(l.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function RJ(t,e,r,n){e.Fills=[];var s={},i=!1;(t[0].match(Es)||[]).forEach(function(o){var l=Rt(o);switch(Li(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function PJ(t,e,r,n){e.Fonts=[];var s={},i=!1;(t[0].match(Es)||[]).forEach(function(o){var l=Rt(o);switch(Li(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=vr(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?Cr(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?Cr(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?Cr(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?Cr(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?Cr(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?Cr(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?Cr(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=Pb[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=Cr(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var u=Tc[s.color.index];s.color.index==81&&(u=Tc[1]),u||(u=Tc[1]),s.color.rgb=u[0].toString(16)+u[1].toString(16)+u[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Tx(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function DJ(t,e,r){e.NumberFmt=[];for(var n=nn(Tt),s=0;s<n.length;++s)e.NumberFmt[n[s]]=Tt[n[s]];var i=t[0].match(Es);if(i)for(s=0;s<i.length;++s){var o=Rt(i[s]);switch(Li(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=rr(vr(o.formatCode)),u=parseInt(o.numFmtId,10);if(e.NumberFmt[u]=l,u>0){if(u>392){for(u=392;u>60&&e.NumberFmt[u]!=null;--u);e.NumberFmt[u]=l}ho(l,u)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function FJ(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=rt("numFmt",null,{numFmtId:n,formatCode:gr(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=rt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var gp=["numFmtId","fillId","fontId","borderId","xfId"],vp=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function LJ(t,e,r){e.CellXf=[];var n,s=!1;(t[0].match(Es)||[]).forEach(function(i){var o=Rt(i),l=0;switch(Li(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<gp.length;++l)n[gp[l]]&&(n[gp[l]]=parseInt(n[gp[l]],10));for(l=0;l<vp.length;++l)n[vp[l]]&&(n[vp[l]]=Cr(n[vp[l]]));if(e.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[l]){n.numFmtId=l;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var u={};o.vertical&&(u.vertical=o.vertical),o.horizontal&&(u.horizontal=o.horizontal),o.textRotation!=null&&(u.textRotation=o.textRotation),o.indent&&(u.indent=o.indent),o.wrapText&&(u.wrapText=Cr(o.wrapText)),n.alignment=u;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function OJ(t){var e=[];return e[e.length]=rt("cellXfs",null),t.forEach(function(r){e[e.length]=rt("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=rt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var MJ=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,u,h){var f={};if(!l)return f;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var p;return(p=l.match(e))&&DJ(p,f,h),(p=l.match(s))&&PJ(p,f,u,h),(p=l.match(n))&&RJ(p,f,u,h),(p=l.match(i))&&IJ(p,f,u,h),(p=l.match(r))&&LJ(p,f,h),f}}();function cR(t,e){var r=[fn,rt("styleSheet",null,{xmlns:su[0],"xmlns:vt":kn.vt})],n;return t.SSF&&(n=FJ(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=OJ(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function VJ(t,e){var r=t.read_shift(2),n=ys(t);return[r,n]}function BJ(t,e,r){r||(r=Oe(6+4*e.length)),r.write_shift(2,t),Bn(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function UJ(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=_X(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=t.read_shift(2);switch(i===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(n.underline=o);var l=t.read_shift(1);l>0&&(n.family=l);var u=t.read_shift(1);switch(u>0&&(n.charset=u),t.l++,n.color=bX(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=ys(t),n}function zJ(t,e){e||(e=Oe(25+4*32)),e.write_shift(2,t.sz*20),NX(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),Ex(t.color,e);var n=0;return n=2,e.write_shift(1,n),Bn(t.name,e),e.length>e.l?e.slice(0,e.l):e}var $J=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],t1,HJ=_s;function nj(t,e){e||(e=Oe(4*3+8*7+16*1)),t1||(t1=Ag($J));var r=t1[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(Ex({auto:1},e),Ex({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function WJ(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}function uR(t,e,r){r||(r=Oe(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function zh(t,e){return e||(e=Oe(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var qJ=_s;function GJ(t,e){return e||(e=Oe(51)),e.write_shift(1,0),zh(null,e),zh(null,e),zh(null,e),zh(null,e),zh(null,e),e.length>e.l?e.slice(0,e.l):e}function KJ(t,e){return e||(e=Oe(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),Nx(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function XJ(t,e,r){var n=Oe(2052);return n.write_shift(4,t),Nx(e,n),Nx(r,n),n.length>n.l?n.slice(0,n.l):n}function YJ(t,e,r){var n={};n.NumberFmt=[];for(var s in Tt)n.NumberFmt[s]=Tt[s];n.CellXf=[],n.Fonts=[];var i=[],o=!1;return Co(t,function(u,h,f){switch(f){case 44:n.NumberFmt[u[0]]=u[1],ho(u[1],u[0]);break;case 43:n.Fonts.push(u),u.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(u.color.rgb=Tx(e.themeElements.clrScheme[u.color.theme].rgb,u.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(u);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(f),o=!0;break;case 38:i.pop(),o=!1;break;default:if(h.T>0)i.push(f);else if(h.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}function QJ(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&++r}),r!=0&&($e(t,615,si(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&$e(t,44,BJ(s,e[s]))}),$e(t,616))}}function JJ(t){var e=1;$e(t,611,si(e)),$e(t,43,zJ({sz:12,color:{theme:1},name:"Calibri",family:2})),$e(t,612)}function ZJ(t){var e=2;$e(t,603,si(e)),$e(t,45,nj({patternType:"none"})),$e(t,45,nj({patternType:"gray125"})),$e(t,604)}function eZ(t){var e=1;$e(t,613,si(e)),$e(t,46,GJ()),$e(t,614)}function tZ(t){var e=1;$e(t,626,si(e)),$e(t,47,uR({numFmtId:0},65535)),$e(t,627)}function rZ(t,e){$e(t,617,si(e.length)),e.forEach(function(r){$e(t,47,uR(r,0))}),$e(t,618)}function nZ(t){var e=1;$e(t,619,si(e)),$e(t,48,KJ({xfId:0,name:"Normal"})),$e(t,620)}function sZ(t){var e=0;$e(t,505,si(e)),$e(t,506)}function aZ(t){var e=0;$e(t,508,XJ(e,"TableStyleMedium9","PivotStyleMedium4")),$e(t,509)}function iZ(t,e){var r=Ks();return $e(r,278),QJ(r,t.SSF),JJ(r),ZJ(r),eZ(r),tZ(r),rZ(r,e.cellXfs),nZ(r),sZ(r),aZ(r),$e(r,279),r.end()}var oZ=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function lZ(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Es)||[]).forEach(function(s){var i=Rt(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(e.themeElements.clrScheme[oZ.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function cZ(){}function uZ(){}var dZ=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,hZ=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,fZ=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function mZ(t,e,r){e.themeElements={};var n;[["clrScheme",dZ,lZ],["fontScheme",hZ,cZ],["fmtScheme",fZ,uZ]].forEach(function(s){if(!(n=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,e,r)})}var pZ=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function dR(t,e){(!t||t.length===0)&&(t=i_());var r,n={};if(!(r=t.match(pZ)))throw new Error("themeElements not found in theme");return mZ(r[0],n,e),n.raw=t,n}function i_(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[fn];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function xZ(t,e,r){var n=t.l+e,s=t.read_shift(4);if(s!==124226){if(!r.cellStyles){t.l=n;return}var i=t.slice(t.l);t.l=n;var o;try{o=n5(i,{type:"array"})}catch{return}var l=oa(o,"theme/theme/theme1.xml",!0);if(l)return dR(l,r)}}function gZ(t){return t.read_shift(4)}function vZ(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=yZ(t,4);break;case 2:e.xclrValue=H5(t);break;case 3:e.xclrValue=gZ(t);break;case 4:t.l+=4;break}return t.l+=8,e}function yZ(t,e){return _s(t,e)}function wZ(t,e){return _s(t,e)}function bZ(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=vZ(t);break;case 6:n[1]=wZ(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function _Z(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),i=[];s-- >0;)i.push(bZ(t,r-t.l));return{ixfe:n,ext:i}}function NZ(t,e){e.forEach(function(r){r[0]})}function EZ(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:ys(t)}}function SZ(t){var e=Oe(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Bn(t.name,e),e.slice(0,e.l)}function kZ(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function TZ(t){var e=Oe(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function jZ(t,e){var r=Oe(8+2*e.length);return r.write_shift(4,t),Bn(e,r),r.slice(0,r.l)}function AZ(t){return t.l+=4,t.read_shift(4)!=0}function CZ(t,e){var r=Oe(8);return r.write_shift(4,t),r.write_shift(4,1),r}function IZ(t,e,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return Co(t,function(u,h,f){switch(f){case 335:n.Types.push({name:u.name});break;case 51:u.forEach(function(p){l==1?n.Cell.push({type:n.Types[p[0]-1].name,index:p[1]}):l==0&&n.Value.push({type:n.Types[p[0]-1].name,index:p[1]})});break;case 337:l=u?1:0;break;case 338:l=2;break;case 35:i.push(f),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!h.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}function RZ(){var t=Ks();return $e(t,332),$e(t,334,si(1)),$e(t,335,SZ({name:"XLDAPR",version:12e4,flags:3496657072})),$e(t,336),$e(t,339,jZ(1,"XLDAPR")),$e(t,52),$e(t,35,si(514)),$e(t,4096,si(0)),$e(t,4097,Ca(1)),$e(t,36),$e(t,53),$e(t,340),$e(t,337,CZ(1)),$e(t,51,TZ([[1,0]])),$e(t,338),$e(t,333),t.end()}function PZ(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var s=!1,i=2,o;return t.replace(Es,function(l){var u=Rt(l);switch(Li(u[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:u.name});break;case"</metadataType>":break;case"<futureMetadata":for(var h=0;h<n.Types.length;++h)n.Types[h].name==u.name&&(o=n.Types[h]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[u.t-1].name,index:+u.v}):i==0&&n.Value.push({type:n.Types[u.t-1].name,index:+u.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+u.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+u[0]+" in metadata")}return l}),n}function hR(){var t=[fn];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function DZ(t){var e=[];if(!t)return e;var r=1;return(t.match(Es)||[]).forEach(function(n){var s=Rt(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,e.push(s);break}}),e}function FZ(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=jt(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function LZ(t,e,r){var n=[];return Co(t,function(i,o,l){switch(l){case 63:n.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function OZ(t,e,r,n){if(!t)return t;var s=n||{},i=!1;Co(t,function(l,u,h){switch(h){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!u.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+h.toString(16))}}},s)}function MZ(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var id=1024;function fR(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[rt("xml",null,{"xmlns:v":sa.v,"xmlns:o":sa.o,"xmlns:x":sa.x,"xmlns:mv":sa.mv}).replace(/\/>/,">"),rt("o:shapelayout",rt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),rt("v:shapetype",[rt("v:stroke",null,{joinstyle:"miter"}),rt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];id<t*1e3;)id+=1e3;return e.forEach(function(i){var o=Gr(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var u=l.type=="gradient"?rt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,h=rt("v:fill",u,l),f={on:"t",obscured:"t"};++id,s=s.concat(["<v:shape"+Gf({id:"_x0000_s"+id,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",h,rt("v:shadow",null,f),rt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Zn("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Zn("x:AutoFill","False"),Zn("x:Row",String(o.r)),Zn("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function sj(t,e,r,n){var s=Array.isArray(t),i;e.forEach(function(o){var l=Gr(o.ref);if(s?(t[l.r]||(t[l.r]=[]),i=t[l.r][l.c]):i=t[o.ref],!i){i={t:"z"},s?t[l.r][l.c]=i:t[o.ref]=i;var u=sr(t["!ref"]||"BDWGO1000001:A1");u.s.r>l.r&&(u.s.r=l.r),u.e.r<l.r&&(u.e.r=l.r),u.s.c>l.c&&(u.s.c=l.c),u.e.c<l.c&&(u.e.c=l.c);var h=Bt(u);h!==t["!ref"]&&(t["!ref"]=h)}i.c||(i.c=[]);var f={a:o.author,t:o.t,r:o.r,T:r};o.h&&(f.h=o.h);for(var p=i.c.length-1;p>=0;--p){if(!r&&i.c[p].T)return;r&&!i.c[p].T&&i.c.splice(p,1)}if(r&&n){for(p=0;p<n.length;++p)if(f.a==n[p].id){f.a=n[p].name||f.a;break}}i.c.push(f)})}function VZ(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var u=Rt(l[0]),h={author:u.authorId&&r[u.authorId]||"sheetjsghost",ref:u.ref,guid:u.guid},f=Gr(u.ref);if(!(e.sheetRows&&e.sheetRows<=f.r)){var p=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),x=!!p&&!!p[1]&&n_(p[1])||{r:"",t:"",h:""};h.r=x.r,x.r=="<t></t>"&&(x.t=x.h=""),h.t=(x.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(h.h=x.h),n.push(h)}}}}),n}function mR(t){var e=[fn,rt("comments",null,{xmlns:su[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(s){var i=gr(s.a);r.indexOf(i)==-1&&(r.push(i),e.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var s=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(u){u.a&&(s=r.indexOf(gr(u.a))),i.push(u.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),i.length<=1)e.push(Zn("t",gr(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;e.push(Zn("t",gr(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function BZ(t,e){var r=[],n=!1,s={},i=0;return t.replace(Es,function(l,u){var h=Rt(l);switch(Li(h[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:h.personId,guid:h.id,ref:h.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=u+l.length;break;case"</text>":s.t=t.slice(i,u).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+h[0]+" in threaded comments")}return l}),r}function UZ(t,e,r){var n=[fn,rt("ThreadedComments",null,{xmlns:kn.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var u={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=u.id:u.parentId=i,o.ID=u.id,o.a&&(u.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),n.push(rt("threadedComment",Zn("text",o.t||""),u))})}),n.push("</ThreadedComments>"),n.join("")}function zZ(t,e){var r=[],n=!1;return t.replace(Es,function(i){var o=Rt(i);switch(Li(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function $Z(t){var e=[fn,rt("personList",null,{xmlns:kn.TCMNT,"xmlns:x":su[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(rt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function HZ(t){var e={};e.iauthor=t.read_shift(4);var r=lu(t);return e.rfx=r.s,e.ref=jt(r.s),t.l+=16,e}function WZ(t,e){return e==null&&(e=Oe(36)),e.write_shift(4,t[1].iauthor),oh(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var qZ=ys;function GZ(t){return Bn(t.slice(0,54))}function KZ(t,e){var r=[],n=[],s={},i=!1;return Co(t,function(l,u,h){switch(h){case 632:n.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!u.T){if(!i||e.WTF)throw new Error("Unexpected record 0x"+h.toString(16))}}}),r}function XZ(t){var e=Ks(),r=[];return $e(e,628),$e(e,630),t.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),$e(e,632,GZ(s.a)))})}),$e(e,631),$e(e,633),t.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:Gr(n[0]),e:Gr(n[0])};$e(e,635,WZ([i,s])),s.t&&s.t.length>0&&$e(e,637,gX(s)),$e(e,636),delete s.iauthor})}),$e(e,634),$e(e,629),e.end()}var YZ="application/vnd.ms-office.vbaProject";function QZ(t){var e=Nt.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Nt.utils.cfb_add(e,s,t.FileIndex[n].content)}}),Nt.write(e)}function JZ(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Nt.utils.cfb_add(t,s,e.FileIndex[n].content)}})}var pR=["xlsb","xlsm","xlam","biff8","xla"];function ZZ(){return{"!type":"dialog"}}function eee(){return{"!type":"dialog"}}function tee(){return{"!type":"macro"}}function ree(){return{"!type":"macro"}}var pd=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,i,o){var l=!1,u=!1;i.length==0?u=!0:i.charAt(0)=="["&&(u=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var h=i.length>0?parseInt(i,10)|0:0,f=o.length>0?parseInt(o,10)|0:0;return l?f+=e.c:--f,u?h+=e.r:--h,s+(l?"":"$")+qr(f)+(u?"":"$")+hn(h)}return function(s,i){return e=i,s.replace(t,r)}}(),o_=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,l_=function(){return function(e,r){return e.replace(o_,function(n,s,i,o,l,u){var h=Kb(o)-(i?0:r.c),f=Gb(u)-(l?0:r.r),p=f==0?"":l?f+1:"["+f+"]",x=h==0?"":i?h+1:"["+h+"]";return s+"R"+p+"C"+x})}}();function xR(t,e){return t.replace(o_,function(r,n,s,i,o,l){return n+(s=="$"?s+i:qr(Kb(i)+e.c))+(o=="$"?o+l:hn(Gb(l)+e.r))})}function nee(t,e,r){var n=Xs(e),s=n.s,i=Gr(r),o={r:i.r-s.r,c:i.c-s.c};return xR(t,o)}function see(t){return t.length!=1}function aj(t){return t.replace(/_xlfn\./g,"")}function xn(t){t.l+=1}function Dl(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function gR(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return vR(t);r.biff==12&&(n=4)}var s=t.read_shift(n),i=t.read_shift(n),o=Dl(t),l=Dl(t);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function vR(t){var e=Dl(t),r=Dl(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function aee(t,e,r){if(r.biff<8)return vR(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),i=Dl(t),o=Dl(t);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function yR(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return iee(t);var n=t.read_shift(r&&r.biff==12?4:2),s=Dl(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function iee(t){var e=Dl(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function oee(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function lee(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return cee(t);var s=t.read_shift(n>=12?4:2),i=t.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function cee(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function uee(t,e,r){var n=(t[t.l++]&96)>>5,s=gR(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function dee(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var o=gR(t,i,r);return[n,s,o]}function hee(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function fee(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[n,s]}function mee(t,e,r){var n=(t[t.l++]&96)>>5,s=aee(t,e-1,r);return[n,s]}function pee(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function ij(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function xee(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function gee(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function vee(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function yee(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function wee(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function wR(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function bee(t){return t.read_shift(2),wR(t)}function _ee(t){return t.read_shift(2),wR(t)}function Nee(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=yR(t,0,r);return[n,s]}function Eee(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=lee(t,0,r);return[n,s]}function See(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=yR(t,0,r);return[n,s,i]}function kee(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[Ate[s],NR[s],n]}function Tee(t,e,r){var n=t[t.l++],s=t.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:jee(t);return[s,(i[0]===0?NR:jte)[i[1]]]}function jee(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Aee(t,e,r){t.l+=r&&r.biff==2?3:4}function Cee(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Iee(t){return t.l++,Io[t.read_shift(1)]}function Ree(t){return t.l++,t.read_shift(2)}function Pee(t){return t.l++,t.read_shift(1)!==0}function Dee(t){return t.l++,xs(t)}function Fee(t,e,r){return t.l++,F0(t,e-1,r)}function Lee(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=ln(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=Io[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=xs(t);break;case 2:r[1]=cu(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Oee(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?lu:Rg)(t));return s}function Mee(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=Lee(t,r.biff);return o}function Vee(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,i]}function Bee(t,e,r){if(r.biff==5)return Uee(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),i=t.read_shift(4);return[n,s,i]}function Uee(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function zee(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function $ee(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Hee(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function Wee(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[n,s]}var qee=_s,Gee=_s,Kee=_s;function O0(t,e,r){return t.l+=2,[oee(t)]}function c_(t){return t.l+=6,[]}var Xee=O0,Yee=c_,Qee=c_,Jee=O0;function bR(t){return t.l+=2,[yn(t),t.read_shift(2)&1]}var Zee=O0,ete=bR,tte=c_,rte=O0,nte=O0,ste=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function ate(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),i=t.read_shift(2),o=ste[r>>2&31];return{ixti:e,coltype:r&3,rt:o,idx:n,c:s,C:i}}function ite(t){return t.l+=2,[t.read_shift(4)]}function ote(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function lte(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function cte(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function ute(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function dte(t){return t.l+=4,[0,0]}var oj={1:{n:"PtgExp",f:Cee},2:{n:"PtgTbl",f:Kee},3:{n:"PtgAdd",f:xn},4:{n:"PtgSub",f:xn},5:{n:"PtgMul",f:xn},6:{n:"PtgDiv",f:xn},7:{n:"PtgPower",f:xn},8:{n:"PtgConcat",f:xn},9:{n:"PtgLt",f:xn},10:{n:"PtgLe",f:xn},11:{n:"PtgEq",f:xn},12:{n:"PtgGe",f:xn},13:{n:"PtgGt",f:xn},14:{n:"PtgNe",f:xn},15:{n:"PtgIsect",f:xn},16:{n:"PtgUnion",f:xn},17:{n:"PtgRange",f:xn},18:{n:"PtgUplus",f:xn},19:{n:"PtgUminus",f:xn},20:{n:"PtgPercent",f:xn},21:{n:"PtgParen",f:xn},22:{n:"PtgMissArg",f:xn},23:{n:"PtgStr",f:Fee},26:{n:"PtgSheet",f:ote},27:{n:"PtgEndSheet",f:lte},28:{n:"PtgErr",f:Iee},29:{n:"PtgBool",f:Pee},30:{n:"PtgInt",f:Ree},31:{n:"PtgNum",f:Dee},32:{n:"PtgArray",f:pee},33:{n:"PtgFunc",f:kee},34:{n:"PtgFuncVar",f:Tee},35:{n:"PtgName",f:Vee},36:{n:"PtgRef",f:Nee},37:{n:"PtgArea",f:uee},38:{n:"PtgMemArea",f:zee},39:{n:"PtgMemErr",f:qee},40:{n:"PtgMemNoMem",f:Gee},41:{n:"PtgMemFunc",f:$ee},42:{n:"PtgRefErr",f:Hee},43:{n:"PtgAreaErr",f:hee},44:{n:"PtgRefN",f:Eee},45:{n:"PtgAreaN",f:mee},46:{n:"PtgMemAreaN",f:cte},47:{n:"PtgMemNoMemN",f:ute},57:{n:"PtgNameX",f:Bee},58:{n:"PtgRef3d",f:See},59:{n:"PtgArea3d",f:dee},60:{n:"PtgRefErr3d",f:Wee},61:{n:"PtgAreaErr3d",f:fee},255:{}},hte={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},fte={1:{n:"PtgElfLel",f:bR},2:{n:"PtgElfRw",f:rte},3:{n:"PtgElfCol",f:Xee},6:{n:"PtgElfRwV",f:nte},7:{n:"PtgElfColV",f:Jee},10:{n:"PtgElfRadical",f:Zee},11:{n:"PtgElfRadicalS",f:tte},13:{n:"PtgElfColS",f:Yee},15:{n:"PtgElfColSV",f:Qee},16:{n:"PtgElfRadicalLel",f:ete},25:{n:"PtgList",f:ate},29:{n:"PtgSxName",f:ite},255:{}},mte={0:{n:"PtgAttrNoop",f:dte},1:{n:"PtgAttrSemi",f:wee},2:{n:"PtgAttrIf",f:vee},4:{n:"PtgAttrChoose",f:xee},8:{n:"PtgAttrGoto",f:gee},16:{n:"PtgAttrSum",f:Aee},32:{n:"PtgAttrBaxcel",f:ij},33:{n:"PtgAttrBaxcel",f:ij},64:{n:"PtgAttrSpace",f:bee},65:{n:"PtgAttrSpaceSemi",f:_ee},128:{n:"PtgAttrIfError",f:yee},255:{}};function M0(t,e,r,n){if(n.biff<8)return _s(t,e);for(var s=t.l+e,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=Mee(t,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=Oee(t,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=t.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return e=s-t.l,e!==0&&i.push(_s(t,e)),i}function V0(t,e,r){for(var n=t.l+e,s,i,o=[];n!=t.l;)e=n-t.l,i=t[t.l],s=oj[i]||oj[hte[i]],(i===24||i===25)&&(s=(i===24?fte:mte)[t[t.l+1]]),!s||!s.f?_s(t,e):o.push([s.n,s.f(t,e,r)]);return o}function pte(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],i=0;i<n.length;++i){var o=n[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var xte={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function gte(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function _R(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function lj(t,e,r){var n=_R(t,e,r);return n=="#REF"?n:gte(n,r)}function fs(t,e,r,n,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],u,h,f,p=0,x=0,v,w="";if(!t[0]||!t[0][0])return"";for(var b=-1,_="",R=0,j=t[0].length;R<j;++R){var k=t[0][R];switch(k[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(u=l.pop(),h=l.pop(),b>=0){switch(t[0][b][1][0]){case 0:_=en(" ",t[0][b][1][1]);break;case 1:_=en("\r",t[0][b][1][1]);break;default:if(_="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][b][1][0])}h=h+_,b=-1}l.push(h+xte[k[0]]+u);break;case"PtgIsect":u=l.pop(),h=l.pop(),l.push(h+" "+u);break;case"PtgUnion":u=l.pop(),h=l.pop(),l.push(h+","+u);break;case"PtgRange":u=l.pop(),h=l.pop(),l.push(h+":"+u);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=xf(k[1][1],o,s),l.push(gf(f,i));break;case"PtgRefN":f=r?xf(k[1][1],r,s):k[1][1],l.push(gf(f,i));break;case"PtgRef3d":p=k[1][1],f=xf(k[1][2],o,s),w=lj(n,p,s),l.push(w+"!"+gf(f,i));break;case"PtgFunc":case"PtgFuncVar":var F=k[1][0],L=k[1][1];F||(F=0),F&=127;var I=F==0?[]:l.slice(-F);l.length-=F,L==="User"&&(L=I.shift()),l.push(L+"("+I.join(",")+")");break;case"PtgBool":l.push(k[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(k[1]);break;case"PtgNum":l.push(String(k[1]));break;case"PtgStr":l.push('"'+k[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(k[1]);break;case"PtgAreaN":v=O4(k[1][1],r?{s:r}:o,s),l.push(Qy(v,s));break;case"PtgArea":v=O4(k[1][1],o,s),l.push(Qy(v,s));break;case"PtgArea3d":p=k[1][1],v=k[1][2],w=lj(n,p,s),l.push(w+"!"+Qy(v,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":x=k[1][2];var N=(n.names||[])[x-1]||(n[0]||[])[x],T=N?N.Name:"SH33TJSNAME"+String(x);T&&T.slice(0,6)=="_xlfn."&&!s.xlfn&&(T=T.slice(6)),l.push(T);break;case"PtgNameX":var P=k[1][1];x=k[1][2];var B;if(s.biff<=5)P<0&&(P=-P),n[P]&&(B=n[P][x]);else{var z="";if(((n[P]||[])[0]||[])[0]==14849||(((n[P]||[])[0]||[])[0]==1025?n[P][x]&&n[P][x].itab>0&&(z=n.SheetNames[n[P][x].itab-1]+"!"):z=n.SheetNames[x-1]+"!"),n[P]&&n[P][x])z+=n[P][x].Name;else if(n[0]&&n[0][x])z+=n[0][x].Name;else{var O=(_R(n,P,s)||"").split(";;");O[x-1]?z=O[x-1]:z+="SH33TJSERRX"}l.push(z);break}B||(B={Name:"SH33TJSERRY"}),l.push(B.Name);break;case"PtgParen":var D="(",G=")";if(b>=0){switch(_="",t[0][b][1][0]){case 2:D=en(" ",t[0][b][1][1])+D;break;case 3:D=en("\r",t[0][b][1][1])+D;break;case 4:G=en(" ",t[0][b][1][1])+G;break;case 5:G=en("\r",t[0][b][1][1])+G;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][b][1][0])}b=-1}l.push(D+l.pop()+G);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":f={c:k[1][1],r:k[1][0]};var Q={c:r.c,r:r.r};if(n.sharedf[jt(f)]){var ue=n.sharedf[jt(f)];l.push(fs(ue,o,Q,n,s))}else{var H=!1;for(u=0;u!=n.arrayf.length;++u)if(h=n.arrayf[u],!(f.c<h[0].s.c||f.c>h[0].e.c)&&!(f.r<h[0].s.r||f.r>h[0].e.r)){l.push(fs(h[1],o,Q,n,s)),H=!0;break}H||l.push(k[1])}break;case"PtgArray":l.push("{"+pte(k[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":b=R;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+k[1].idx+"[#"+k[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(k));default:throw new Error("Unrecognized Formula Token: "+String(k))}var te=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&b>=0&&te.indexOf(t[0][R][0])==-1){k=t[0][b];var K=!0;switch(k[1][0]){case 4:K=!1;case 0:_=en(" ",k[1][1]);break;case 5:K=!1;case 1:_=en("\r",k[1][1]);break;default:if(_="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+k[1][0])}l.push((K?_:"")+l.pop()+(K?"":_)),b=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function vte(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,o=t.read_shift(s);if(o==65535)return[[],_s(t,e-2)];var l=V0(t,o,r);return e!==o+s&&(i=M0(t,e-o-s,l,r)),t.l=n,[l,i]}function yte(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,o=t.read_shift(s);if(o==65535)return[[],_s(t,e-2)];var l=V0(t,o,r);return e!==o+s&&(i=M0(t,e-o-s,l,r)),t.l=n,[l,i]}function wte(t,e,r,n){var s=t.l+e,i=V0(t,n,r),o;return s!==t.l&&(o=M0(t,s-t.l,i,r)),[i,o]}function bte(t,e,r){var n=t.l+e,s,i=t.read_shift(2),o=V0(t,i,r);return i==65535?[[],_s(t,e-2)]:(e!==i+2&&(s=M0(t,n-i-2,o,r)),[o,s])}function _te(t){var e;if(so(t,t.l+6)!==65535)return[xs(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function Nte(t){if(t==null){var e=Oe(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Hc(t);return Hc(0)}function r1(t,e,r){var n=t.l+e,s=Oi(t);r.biff==2&&++t.l;var i=_te(t),o=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var l=yte(t,n-t.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function Ete(t,e,r,n,s){var i=qc(e,r,s),o=Nte(t.v),l=Oe(6),u=33;l.write_shift(2,u),l.write_shift(4,0);for(var h=Oe(t.bf.length),f=0;f<t.bf.length;++f)h[f]=t.bf[f];var p=Mn([i,o,l,h]);return p}function Pg(t,e,r){var n=t.read_shift(4),s=V0(t,n,r),i=t.read_shift(4),o=i>0?M0(t,i,s,r):null;return[s,o]}var Ste=Pg,Dg=Pg,kte=Pg,Tte=Pg,jte={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},NR={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Ate={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function cj(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Cte(t){var e="of:="+t.replace(o_,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function n1(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function Ite(t){return t.replace(/\./,"!")}var yf={},xd={},wf=typeof Map<"u";function u_(t,e,r){var n=0,s=t.length;if(r){if(wf?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var i=wf?r.get(e):r[e];n<i.length;++n)if(t[i[n]].t===e)return t.Count++,i[n]}}else for(;n<s;++n)if(t[n].t===e)return t.Count++,n;return t[s]={t:e},t.Count++,t.Unique++,r&&(wf?(r.has(e)||r.set(e,[]),r.get(e).push(s)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(s))),s}function Fg(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(ps=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=Jf(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=jx(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function Cc(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function ql(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],s=60,i=t.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){ho(e.z,s),r.ssf[s]=e.z,r.revssf[e.z]=n=s;break}}for(s=0;s!=i;++s)if(t[s].numFmtId===n)return s;return t[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function ER(t,e,r,n,s,i){try{n.cellNF&&(t.z=Tt[e])}catch(l){if(n.WTF)throw l}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Dr(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Tt[e]==null&&ho(jK[e]||"General",e),t.t==="e")t.w=t.w||Io[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Wf(t.v);else if(t.t==="d"){var o=An(t.v);(o|0)===o?t.w=o.toString(10):t.w=Wf(o)}else{if(t.v===void 0)return"";t.w=zc(t.v,xd)}else t.t==="d"?t.w=Da(e,An(t.v),xd):t.w=Da(e,t.v,xd)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{t.s=i.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=Tx(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=Tx(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&i.Fills)throw l}}}function Rte(t,e,r){if(t&&t["!ref"]){var n=sr(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function Pte(t,e){var r=sr(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Bt(r))}var Dte=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Fte=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Lte=/<(?:\w:)?hyperlink [^>]*>/mg,Ote=/"(\w*:\w*)"/,Mte=/<(?:\w:)?col\b[^>]*[\/]?>/g,Vte=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Bte=/<(?:\w:)?pageMargins[^>]*\/>/g,SR=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Ute=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,zte=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function $te(t,e,r,n,s,i,o){if(!t)return t;n||(n={"!id":{}});var l=e.dense?[]:{},u={s:{r:2e6,c:2e6},e:{r:0,c:0}},h="",f="",p=t.match(Fte);p?(h=t.slice(0,p.index),f=t.slice(p.index+p[0].length)):h=f=t;var x=h.match(SR);x?d_(x[0],l,s,r):(x=h.match(Ute))&&Wte(x[0],x[1]||"",l,s,r);var v=(h.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(v>0){var w=h.slice(v,v+50).match(Ote);w&&Pte(l,w[1])}var b=h.match(zte);b&&b[1]&&sre(b[1],s);var _=[];if(e.cellStyles){var R=h.match(Mte);R&&Zte(_,R)}p&&ore(p[1],l,e,u,i,o);var j=f.match(Vte);j&&(l["!autofilter"]=tre(j[0]));var k=[],F=f.match(Dte);if(F)for(v=0;v!=F.length;++v)k[v]=sr(F[v].slice(F[v].indexOf('"')+1));var L=f.match(Lte);L&&Yte(l,L,n);var I=f.match(Bte);if(I&&(l["!margins"]=Qte(Rt(I[0]))),!l["!ref"]&&u.e.c>=u.s.c&&u.e.r>=u.s.r&&(l["!ref"]=Bt(u)),e.sheetRows>0&&l["!ref"]){var N=sr(l["!ref"]);e.sheetRows<=+N.e.r&&(N.e.r=e.sheetRows-1,N.e.r>u.e.r&&(N.e.r=u.e.r),N.e.r<N.s.r&&(N.s.r=N.e.r),N.e.c>u.e.c&&(N.e.c=u.e.c),N.e.c<N.s.c&&(N.s.c=N.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Bt(N))}return _.length>0&&(l["!cols"]=_),k.length>0&&(l["!merges"]=k),l}function Hte(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Bt(t[r])+'"/>';return e+"</mergeCells>"}function d_(t,e,r,n){var s=Rt(t);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=rr(vr(s.codeName)))}function Wte(t,e,r,n,s){d_(t.slice(0,t.indexOf(">")),r,n,s)}function qte(t,e,r,n,s){var i=!1,o={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var u=e.SheetNames[r];try{e.Workbook&&(u=e.Workbook.Sheets[r].CodeName||u)}catch{}i=!0,o.codeName=ki(gr(u))}if(t&&t["!outline"]){var h={summaryBelow:1,summaryRight:1};t["!outline"].above&&(h.summaryBelow=0),t["!outline"].left&&(h.summaryRight=0),l=(l||"")+rt("outlinePr",null,h)}!i&&!l||(s[s.length]=rt("sheetPr",l,o))}var Gte=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Kte=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Xte(t){var e={sheet:1};return Gte.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),Kte.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=s_(t.password).toString(16).toUpperCase()),rt("sheetProtection",null,e)}function Yte(t,e,r){for(var n=Array.isArray(t),s=0;s!=e.length;++s){var i=Rt(vr(e[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+rr(i.location))):(i.Target="#"+rr(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=sr(i.ref),u=l.s.r;u<=l.e.r;++u)for(var h=l.s.c;h<=l.e.c;++h){var f=jt({c:h,r:u});n?(t[u]||(t[u]=[]),t[u][h]||(t[u][h]={t:"z",v:void 0}),t[u][h].l=i):(t[f]||(t[f]={t:"z",v:void 0}),t[f].l=i)}}}function Qte(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function Jte(t){return Cc(t),rt("pageMargins",null,t)}function Zte(t,e){for(var r=!1,n=0;n!=e.length;++n){var s=Rt(e[n],!0);s.hidden&&(s.hidden=Cr(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,a_(s.width)),Pl(s);i<=o;)t[i++]=Fr(s)}}function ere(t,e){for(var r=["<cols>"],n,s=0;s!=e.length;++s)(n=e[s])&&(r[r.length]=rt("col",null,Fg(s,n)));return r[r.length]="</cols>",r.join("")}function tre(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function rre(t,e,r,n){var s=typeof t.ref=="string"?t.ref:Bt(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Xs(s);o.s.r==o.e.r&&(o.e.r=Xs(e["!ref"]).e.r,s=Bt(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),rt("autoFilter",null,{ref:s})}var nre=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function sre(t,e){e.Views||(e.Views=[{}]),(t.match(nre)||[]).forEach(function(r,n){var s=Rt(r);e.Views[n]||(e.Views[n]={}),+s.zoomScale&&(e.Views[n].zoom=+s.zoomScale),Cr(s.rightToLeft)&&(e.Views[n].RTL=!0)})}function are(t,e,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),rt("sheetViews",rt("sheetView",null,s),{})}function ire(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var s="",i=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":s=t.v?"1":"0";break;case"n":s=""+t.v;break;case"e":s=Io[t.v];break;case"d":n&&n.cellDates?s=Dr(t.v,-1).toISOString():(t=Fr(t),t.t="n",s=""+(t.v=An(Dr(t.v)))),typeof t.z>"u"&&(t.z=Tt[14]);break;default:s=t.v;break}var l=Zn("v",gr(s)),u={r:e},h=ql(n.cellXfs,t,n);switch(h!==0&&(u.s=h),t.t){case"n":break;case"d":u.t="d";break;case"b":u.t="b";break;case"e":u.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Zn("v",""+u_(n.Strings,t.v,n.revStrings)),u.t="s";break}u.t="str";break}if(t.t!=i&&(t.t=i,t.v=o),typeof t.f=="string"&&t.f){var f=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;l=rt("f",gr(t.f),f)+(t.v!=null?l:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(u.cm=1),rt("c",l,u)}var ore=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=qf("v"),o=qf("f");return function(u,h,f,p,x,v){for(var w=0,b="",_=[],R=[],j=0,k=0,F=0,L="",I,N,T=0,P=0,B,z,O=0,D=0,G=Array.isArray(v.CellXf),Q,ue=[],H=[],te=Array.isArray(h),K=[],ce={},U=!1,M=!!f.sheetStubs,X=u.split(e),Y=0,Z=X.length;Y!=Z;++Y){b=X[Y].trim();var fe=b.length;if(fe!==0){var ie=0;e:for(w=0;w<fe;++w)switch(b[w]){case">":if(b[w-1]!="/"){++w;break e}if(f&&f.cellStyles){if(N=Rt(b.slice(ie,w),!0),T=N.r!=null?parseInt(N.r,10):T+1,P=-1,f.sheetRows&&f.sheetRows<T)continue;ce={},U=!1,N.ht&&(U=!0,ce.hpt=parseFloat(N.ht),ce.hpx=Bd(ce.hpt)),N.hidden=="1"&&(U=!0,ce.hidden=!0),N.outlineLevel!=null&&(U=!0,ce.level=+N.outlineLevel),U&&(K[T-1]=ce)}break;case"<":ie=w;break}if(ie>=w)break;if(N=Rt(b.slice(ie,w),!0),T=N.r!=null?parseInt(N.r,10):T+1,P=-1,!(f.sheetRows&&f.sheetRows<T)){p.s.r>T-1&&(p.s.r=T-1),p.e.r<T-1&&(p.e.r=T-1),f&&f.cellStyles&&(ce={},U=!1,N.ht&&(U=!0,ce.hpt=parseFloat(N.ht),ce.hpx=Bd(ce.hpt)),N.hidden=="1"&&(U=!0,ce.hidden=!0),N.outlineLevel!=null&&(U=!0,ce.level=+N.outlineLevel),U&&(K[T-1]=ce)),_=b.slice(w).split(t);for(var me=0;me!=_.length&&_[me].trim().charAt(0)=="<";++me);for(_=_.slice(me),w=0;w!=_.length;++w)if(b=_[w].trim(),b.length!==0){if(R=b.match(r),j=w,k=0,F=0,b="<c "+(b.slice(0,1)=="<"?">":"")+b,R!=null&&R.length===2){for(j=0,L=R[1],k=0;k!=L.length&&!((F=L.charCodeAt(k)-64)<1||F>26);++k)j=26*j+F;--j,P=j}else++P;for(k=0;k!=b.length&&b.charCodeAt(k)!==62;++k);if(++k,N=Rt(b.slice(0,k),!0),N.r||(N.r=jt({r:T-1,c:P})),L=b.slice(k),I={t:""},(R=L.match(i))!=null&&R[1]!==""&&(I.v=rr(R[1])),f.cellFormula){if((R=L.match(o))!=null&&R[1]!==""){if(I.f=rr(vr(R[1])).replace(/\r\n/g,`
`),f.xlfn||(I.f=aj(I.f)),R[0].indexOf('t="array"')>-1)I.F=(L.match(s)||[])[1],I.F.indexOf(":")>-1&&ue.push([sr(I.F),I.F]);else if(R[0].indexOf('t="shared"')>-1){z=Rt(R[0]);var pe=rr(vr(R[1]));f.xlfn||(pe=aj(pe)),H[parseInt(z.si,10)]=[z,pe,N.r]}}else(R=L.match(/<f[^>]*\/>/))&&(z=Rt(R[0]),H[z.si]&&(I.f=nee(H[z.si][1],H[z.si][2],N.r)));var we=Gr(N.r);for(k=0;k<ue.length;++k)we.r>=ue[k][0].s.r&&we.r<=ue[k][0].e.r&&we.c>=ue[k][0].s.c&&we.c<=ue[k][0].e.c&&(I.F=ue[k][1])}if(N.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(M)I.t="z";else continue;else I.t=N.t||"n";switch(p.s.c>P&&(p.s.c=P),p.e.c<P&&(p.e.c=P),I.t){case"n":if(I.v==""||I.v==null){if(!M)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!M)continue;I.t="z"}else B=yf[parseInt(I.v,10)],I.v=B.t,I.r=B.r,f.cellHTML&&(I.h=B.h);break;case"str":I.t="s",I.v=I.v!=null?vr(I.v):"",f.cellHTML&&(I.h=$b(I.v));break;case"inlineStr":R=L.match(n),I.t="s",R!=null&&(B=n_(R[1]))?(I.v=B.t,f.cellHTML&&(I.h=B.h)):I.v="";break;case"b":I.v=Cr(I.v);break;case"d":f.cellDates?I.v=Dr(I.v,1):(I.v=An(Dr(I.v,1)),I.t="n");break;case"e":(!f||f.cellText!==!1)&&(I.w=I.v),I.v=T5[I.v];break}if(O=D=0,Q=null,G&&N.s!==void 0&&(Q=v.CellXf[N.s],Q!=null&&(Q.numFmtId!=null&&(O=Q.numFmtId),f.cellStyles&&Q.fillId!=null&&(D=Q.fillId))),ER(I,O,D,f,x,v),f.cellDates&&G&&I.t=="n"&&sh(Tt[O])&&(I.t="d",I.v=Ig(I.v)),N.cm&&f.xlmeta){var Xe=(f.xlmeta.Cell||[])[+N.cm-1];Xe&&Xe.type=="XLDAPR"&&(I.D=!0)}if(te){var re=Gr(N.r);h[re.r]||(h[re.r]=[]),h[re.r][re.c]=I}else h[N.r]=I}}}}K.length>0&&(h["!rows"]=K)}}();function lre(t,e,r,n){var s=[],i=[],o=sr(t["!ref"]),l="",u,h="",f=[],p=0,x=0,v=t["!rows"],w=Array.isArray(t),b={r:h},_,R=-1;for(x=o.s.c;x<=o.e.c;++x)f[x]=qr(x);for(p=o.s.r;p<=o.e.r;++p){for(i=[],h=hn(p),x=o.s.c;x<=o.e.c;++x){u=f[x]+h;var j=w?(t[p]||[])[x]:t[u];j!==void 0&&(l=ire(j,u,t,e))!=null&&i.push(l)}(i.length>0||v&&v[p])&&(b={r:h},v&&v[p]&&(_=v[p],_.hidden&&(b.hidden=1),R=-1,_.hpx?R=Zf(_.hpx):_.hpt&&(R=_.hpt),R>-1&&(b.ht=R,b.customHeight=1),_.level&&(b.outlineLevel=_.level)),s[s.length]=rt("row",i.join(""),b))}if(v)for(;p<v.length;++p)v&&v[p]&&(b={r:p+1},_=v[p],_.hidden&&(b.hidden=1),R=-1,_.hpx?R=Zf(_.hpx):_.hpt&&(R=_.hpt),R>-1&&(b.ht=R,b.customHeight=1),_.level&&(b.outlineLevel=_.level),s[s.length]=rt("row","",b));return s.join("")}function kR(t,e,r,n){var s=[fn,rt("worksheet",null,{xmlns:su[0],"xmlns:r":kn.r})],i=r.SheetNames[t],o=0,l="",u=r.Sheets[i];u==null&&(u={});var h=u["!ref"]||"A1",f=sr(h);if(f.e.c>16383||f.e.r>1048575){if(e.WTF)throw new Error("Range "+h+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),h=Bt(f)}n||(n={}),u["!comments"]=[];var p=[];qte(u,r,t,e,s),s[s.length]=rt("dimension",null,{ref:h}),s[s.length]=are(u,e,t,r),e.sheetFormat&&(s[s.length]=rt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),u["!cols"]!=null&&u["!cols"].length>0&&(s[s.length]=ere(u,u["!cols"])),s[o=s.length]="<sheetData/>",u["!links"]=[],u["!ref"]!=null&&(l=lre(u,e),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),u["!protect"]&&(s[s.length]=Xte(u["!protect"])),u["!autofilter"]!=null&&(s[s.length]=rre(u["!autofilter"],u,r,t)),u["!merges"]!=null&&u["!merges"].length>0&&(s[s.length]=Hte(u["!merges"]));var x=-1,v,w=-1;return u["!links"].length>0&&(s[s.length]="<hyperlinks>",u["!links"].forEach(function(b){b[1].Target&&(v={ref:b[0]},b[1].Target.charAt(0)!="#"&&(w=xr(n,-1,gr(b[1].Target).replace(/#.*$/,""),Gt.HLINK),v["r:id"]="rId"+w),(x=b[1].Target.indexOf("#"))>-1&&(v.location=gr(b[1].Target.slice(x+1))),b[1].Tooltip&&(v.tooltip=gr(b[1].Tooltip)),s[s.length]=rt("hyperlink",null,v))}),s[s.length]="</hyperlinks>"),delete u["!links"],u["!margins"]!=null&&(s[s.length]=Jte(u["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=Zn("ignoredErrors",rt("ignoredError",null,{numberStoredAsText:1,sqref:h}))),p.length>0&&(w=xr(n,-1,"../drawings/drawing"+(t+1)+".xml",Gt.DRAW),s[s.length]=rt("drawing",null,{"r:id":"rId"+w}),u["!drawing"]=p),u["!comments"].length>0&&(w=xr(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Gt.VML),s[s.length]=rt("legacyDrawing",null,{"r:id":"rId"+w}),u["!legacy"]=w),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function cre(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function ure(t,e,r){var n=Oe(145),s=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var i=320;s.hpx?i=Zf(s.hpx)*20:s.hpt&&(i=s.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,u=n.l;n.l+=4;for(var h={r:t,c:0},f=0;f<16;++f)if(!(e.s.c>f+1<<10||e.e.c<f<<10)){for(var p=-1,x=-1,v=f<<10;v<f+1<<10;++v){h.c=v;var w=Array.isArray(r)?(r[h.r]||[])[h.c]:r[jt(h)];w&&(p<0&&(p=v),x=v)}p<0||(++l,n.write_shift(4,p),n.write_shift(4,x))}var b=n.l;return n.l=u,n.write_shift(4,l),n.l=b,n.length>n.l?n.slice(0,n.l):n}function dre(t,e,r,n){var s=ure(n,r,e);(s.length>17||(e["!rows"]||[])[n])&&$e(t,0,s)}var hre=lu,fre=oh;function mre(){}function pre(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=vX(t),r}function xre(t,e,r){r==null&&(r=Oe(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return Ex({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),_5(t,r),r.slice(0,r.l)}function gre(t){var e=La(t);return[e]}function vre(t,e,r){return r==null&&(r=Oe(8)),au(e,r)}function yre(t){var e=iu(t);return[e]}function wre(t,e,r){return r==null&&(r=Oe(4)),ou(e,r)}function bre(t){var e=La(t),r=t.read_shift(1);return[e,r,"b"]}function _re(t,e,r){return r==null&&(r=Oe(9)),au(e,r),r.write_shift(1,t.v?1:0),r}function Nre(t){var e=iu(t),r=t.read_shift(1);return[e,r,"b"]}function Ere(t,e,r){return r==null&&(r=Oe(5)),ou(e,r),r.write_shift(1,t.v?1:0),r}function Sre(t){var e=La(t),r=t.read_shift(1);return[e,r,"e"]}function kre(t,e,r){return r==null&&(r=Oe(9)),au(e,r),r.write_shift(1,t.v),r}function Tre(t){var e=iu(t),r=t.read_shift(1);return[e,r,"e"]}function jre(t,e,r){return r==null&&(r=Oe(8)),ou(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function Are(t){var e=La(t),r=t.read_shift(4);return[e,r,"s"]}function Cre(t,e,r){return r==null&&(r=Oe(12)),au(e,r),r.write_shift(4,e.v),r}function Ire(t){var e=iu(t),r=t.read_shift(4);return[e,r,"s"]}function Rre(t,e,r){return r==null&&(r=Oe(8)),ou(e,r),r.write_shift(4,e.v),r}function Pre(t){var e=La(t),r=xs(t);return[e,r,"n"]}function Dre(t,e,r){return r==null&&(r=Oe(16)),au(e,r),Hc(t.v,r),r}function TR(t){var e=iu(t),r=xs(t);return[e,r,"n"]}function Fre(t,e,r){return r==null&&(r=Oe(12)),ou(e,r),Hc(t.v,r),r}function Lre(t){var e=La(t),r=Jb(t);return[e,r,"n"]}function Ore(t,e,r){return r==null&&(r=Oe(12)),au(e,r),N5(t.v,r),r}function Mre(t){var e=iu(t),r=Jb(t);return[e,r,"n"]}function Vre(t,e,r){return r==null&&(r=Oe(8)),ou(e,r),N5(t.v,r),r}function Bre(t){var e=La(t),r=Xb(t);return[e,r,"is"]}function Ure(t){var e=La(t),r=ys(t);return[e,r,"str"]}function zre(t,e,r){return r==null&&(r=Oe(12+4*t.v.length)),au(e,r),Bn(t.v,r),r.length>r.l?r.slice(0,r.l):r}function $re(t){var e=iu(t),r=ys(t);return[e,r,"str"]}function Hre(t,e,r){return r==null&&(r=Oe(8+4*t.v.length)),ou(e,r),Bn(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Wre(t,e,r){var n=t.l+e,s=La(t);s.r=r["!row"];var i=t.read_shift(1),o=[s,i,"b"];if(r.cellFormula){t.l+=2;var l=Dg(t,n-t.l,r);o[3]=fs(l,null,s,r.supbooks,r)}else t.l=n;return o}function qre(t,e,r){var n=t.l+e,s=La(t);s.r=r["!row"];var i=t.read_shift(1),o=[s,i,"e"];if(r.cellFormula){t.l+=2;var l=Dg(t,n-t.l,r);o[3]=fs(l,null,s,r.supbooks,r)}else t.l=n;return o}function Gre(t,e,r){var n=t.l+e,s=La(t);s.r=r["!row"];var i=xs(t),o=[s,i,"n"];if(r.cellFormula){t.l+=2;var l=Dg(t,n-t.l,r);o[3]=fs(l,null,s,r.supbooks,r)}else t.l=n;return o}function Kre(t,e,r){var n=t.l+e,s=La(t);s.r=r["!row"];var i=ys(t),o=[s,i,"str"];if(r.cellFormula){t.l+=2;var l=Dg(t,n-t.l,r);o[3]=fs(l,null,s,r.supbooks,r)}else t.l=n;return o}var Xre=lu,Yre=oh;function Qre(t,e){return e==null&&(e=Oe(4)),e.write_shift(4,t),e}function Jre(t,e){var r=t.l+e,n=lu(t),s=Yb(t),i=ys(t),o=ys(t),l=ys(t);t.l=r;var u={rfx:n,relId:s,loc:i,display:l};return o&&(u.Tooltip=o),u}function Zre(t,e){var r=Oe(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));oh({s:Gr(t[0]),e:Gr(t[0])},r),Qb("rId"+e,r);var n=t[1].Target.indexOf("#"),s=n==-1?"":t[1].Target.slice(n+1);return Bn(s||"",r),Bn(t[1].Tooltip||"",r),Bn("",r),r.slice(0,r.l)}function ene(){}function tne(t,e,r){var n=t.l+e,s=E5(t),i=t.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=Ste(t,n-t.l,r);o[1]=l}else t.l=n;return o}function rne(t,e,r){var n=t.l+e,s=lu(t),i=[s];if(r.cellFormula){var o=Tte(t,n-t.l,r);i[1]=o,t.l=n}else t.l=n;return i}function nne(t,e,r){r==null&&(r=Oe(18));var n=Fg(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),r.write_shift(2,s),r}var jR=["left","right","top","bottom","header","footer"];function sne(t){var e={};return jR.forEach(function(r){e[r]=xs(t)}),e}function ane(t,e){return e==null&&(e=Oe(6*8)),Cc(t),jR.forEach(function(r){Hc(t[r],e)}),e}function ine(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function one(t,e,r){r==null&&(r=Oe(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function lne(t){var e=Oe(24);return e.write_shift(4,4),e.write_shift(4,1),oh(t,e),e}function cne(t,e){return e==null&&(e=Oe(16*4+2)),e.write_shift(2,t.password?s_(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function une(){}function dne(){}function hne(t,e,r,n,s,i,o){if(!t)return t;var l=e||{};n||(n={"!id":{}});var u=l.dense?[]:{},h,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},p=!1,x=!1,v,w,b,_,R,j,k,F,L,I=[];l.biff=12,l["!row"]=0;var N=0,T=!1,P=[],B={},z=l.supbooks||s.supbooks||[[]];if(z.sharedf=B,z.arrayf=P,z.SheetNames=s.SheetNames||s.Sheets.map(function(te){return te.name}),!l.supbooks&&(l.supbooks=z,s.Names))for(var O=0;O<s.Names.length;++O)z[0][O+1]=s.Names[O];var D=[],G=[],Q=!1;e0[16]={n:"BrtShortReal",f:TR};var ue;if(Co(t,function(K,ce,U){if(!x)switch(U){case 148:h=K;break;case 0:v=K,l.sheetRows&&l.sheetRows<=v.r&&(x=!0),F=hn(_=v.r),l["!row"]=v.r,(K.hidden||K.hpt||K.level!=null)&&(K.hpt&&(K.hpx=Bd(K.hpt)),G[K.r]=K);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(w={t:K[2]},K[2]){case"n":w.v=K[1];break;case"s":k=yf[K[1]],w.v=k.t,w.r=k.r;break;case"b":w.v=!!K[1];break;case"e":w.v=K[1],l.cellText!==!1&&(w.w=Io[w.v]);break;case"str":w.t="s",w.v=K[1];break;case"is":w.t="s",w.v=K[1].t;break}if((b=o.CellXf[K[0].iStyleRef])&&ER(w,b.numFmtId,null,l,i,o),R=K[0].c==-1?R+1:K[0].c,l.dense?(u[_]||(u[_]=[]),u[_][R]=w):u[qr(R)+F]=w,l.cellFormula){for(T=!1,N=0;N<P.length;++N){var M=P[N];v.r>=M[0].s.r&&v.r<=M[0].e.r&&R>=M[0].s.c&&R<=M[0].e.c&&(w.F=Bt(M[0]),T=!0)}!T&&K.length>3&&(w.f=K[3])}if(f.s.r>v.r&&(f.s.r=v.r),f.s.c>R&&(f.s.c=R),f.e.r<v.r&&(f.e.r=v.r),f.e.c<R&&(f.e.c=R),l.cellDates&&b&&w.t=="n"&&sh(Tt[b.numFmtId])){var X=Ec(w.v);X&&(w.t="d",w.v=new Date(X.y,X.m-1,X.d,X.H,X.M,X.S,X.u))}ue&&(ue.type=="XLDAPR"&&(w.D=!0),ue=void 0);break;case 1:case 12:if(!l.sheetStubs||p)break;w={t:"z",v:void 0},R=K[0].c==-1?R+1:K[0].c,l.dense?(u[_]||(u[_]=[]),u[_][R]=w):u[qr(R)+F]=w,f.s.r>v.r&&(f.s.r=v.r),f.s.c>R&&(f.s.c=R),f.e.r<v.r&&(f.e.r=v.r),f.e.c<R&&(f.e.c=R),ue&&(ue.type=="XLDAPR"&&(w.D=!0),ue=void 0);break;case 176:I.push(K);break;case 49:ue=((l.xlmeta||{}).Cell||[])[K-1];break;case 494:var Y=n["!id"][K.relId];for(Y?(K.Target=Y.Target,K.loc&&(K.Target+="#"+K.loc),K.Rel=Y):K.relId==""&&(K.Target="#"+K.loc),_=K.rfx.s.r;_<=K.rfx.e.r;++_)for(R=K.rfx.s.c;R<=K.rfx.e.c;++R)l.dense?(u[_]||(u[_]=[]),u[_][R]||(u[_][R]={t:"z",v:void 0}),u[_][R].l=K):(j=jt({c:R,r:_}),u[j]||(u[j]={t:"z",v:void 0}),u[j].l=K);break;case 426:if(!l.cellFormula)break;P.push(K),L=l.dense?u[_][R]:u[qr(R)+F],L.f=fs(K[1],f,{r:v.r,c:R},z,l),L.F=Bt(K[0]);break;case 427:if(!l.cellFormula)break;B[jt(K[0].s)]=K[1],L=l.dense?u[_][R]:u[qr(R)+F],L.f=fs(K[1],f,{r:v.r,c:R},z,l);break;case 60:if(!l.cellStyles)break;for(;K.e>=K.s;)D[K.e--]={width:K.w/256,hidden:!!(K.flags&1),level:K.level},Q||(Q=!0,a_(K.w/256)),Pl(D[K.e+1]);break;case 161:u["!autofilter"]={ref:Bt(K)};break;case 476:u["!margins"]=K;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),K.name&&(s.Sheets[r].CodeName=K.name),(K.above||K.left)&&(u["!outline"]={above:K.above,left:K.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),K.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:p=!0;break;case 36:p=!1;break;case 37:p=!0;break;case 38:p=!1;break;default:if(!ce.T){if(!p||l.WTF)throw new Error("Unexpected record 0x"+U.toString(16))}}},l),delete l.supbooks,delete l["!row"],!u["!ref"]&&(f.s.r<2e6||h&&(h.e.r>0||h.e.c>0||h.s.r>0||h.s.c>0))&&(u["!ref"]=Bt(h||f)),l.sheetRows&&u["!ref"]){var H=sr(u["!ref"]);l.sheetRows<=+H.e.r&&(H.e.r=l.sheetRows-1,H.e.r>f.e.r&&(H.e.r=f.e.r),H.e.r<H.s.r&&(H.s.r=H.e.r),H.e.c>f.e.c&&(H.e.c=f.e.c),H.e.c<H.s.c&&(H.s.c=H.e.c),u["!fullref"]=u["!ref"],u["!ref"]=Bt(H))}return I.length>0&&(u["!merges"]=I),D.length>0&&(u["!cols"]=D),G.length>0&&(u["!rows"]=G),u}function fne(t,e,r,n,s,i,o){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=Fr(e),e.z=e.z||Tt[14],e.v=An(Dr(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var u={r,c:n};switch(u.s=ql(s.cellXfs,e,s),e.l&&i["!links"].push([jt(u),e.l]),e.c&&i["!comments"].push([jt(u),e.c]),e.t){case"s":case"str":return s.bookSST?(l=u_(s.Strings,e.v,s.revStrings),u.t="s",u.v=l,o?$e(t,18,Rre(e,u)):$e(t,7,Cre(e,u))):(u.t="str",o?$e(t,17,Hre(e,u)):$e(t,6,zre(e,u))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?$e(t,13,Vre(e,u)):$e(t,2,Ore(e,u)):o?$e(t,16,Fre(e,u)):$e(t,5,Dre(e,u)),!0;case"b":return u.t="b",o?$e(t,15,Ere(e,u)):$e(t,4,_re(e,u)),!0;case"e":return u.t="e",o?$e(t,14,jre(e,u)):$e(t,3,kre(e,u)),!0}return o?$e(t,12,wre(e,u)):$e(t,1,vre(e,u)),!0}function mne(t,e,r,n){var s=sr(e["!ref"]||"A1"),i,o="",l=[];$e(t,145);var u=Array.isArray(e),h=s.e.r;e["!rows"]&&(h=Math.max(s.e.r,e["!rows"].length-1));for(var f=s.s.r;f<=h;++f){o=hn(f),dre(t,e,s,f);var p=!1;if(f<=s.e.r)for(var x=s.s.c;x<=s.e.c;++x){f===s.s.r&&(l[x]=qr(x)),i=l[x]+o;var v=u?(e[f]||[])[x]:e[i];if(!v){p=!1;continue}p=fne(t,v,f,x,n,e,p)}}$e(t,146)}function pne(t,e){!e||!e["!merges"]||($e(t,177,Qre(e["!merges"].length)),e["!merges"].forEach(function(r){$e(t,176,Yre(r))}),$e(t,178))}function xne(t,e){!e||!e["!cols"]||($e(t,390),e["!cols"].forEach(function(r,n){r&&$e(t,60,nne(n,r))}),$e(t,391))}function gne(t,e){!e||!e["!ref"]||($e(t,648),$e(t,649,lne(sr(e["!ref"]))),$e(t,650))}function vne(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var s=xr(r,-1,n[1].Target.replace(/#.*$/,""),Gt.HLINK);$e(t,494,Zre(n,s))}}),delete e["!links"]}function yne(t,e,r,n){if(e["!comments"].length>0){var s=xr(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Gt.VML);$e(t,551,Qb("rId"+s)),e["!legacy"]=s}}function wne(t,e,r,n){if(e["!autofilter"]){var s=e["!autofilter"],i=typeof s.ref=="string"?s.ref:Bt(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=Xs(i);l.s.r==l.e.r&&(l.e.r=Xs(e["!ref"]).e.r,i=Bt(l));for(var u=0;u<o.length;++u){var h=o[u];if(h.Name=="_xlnm._FilterDatabase"&&h.Sheet==n){h.Ref="'"+r.SheetNames[n]+"'!"+i;break}}u==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),$e(t,161,oh(sr(i))),$e(t,162)}}function bne(t,e,r){$e(t,133),$e(t,137,one(e,r)),$e(t,138),$e(t,134)}function _ne(t,e){e["!protect"]&&$e(t,535,cne(e["!protect"]))}function Nne(t,e,r,n){var s=Ks(),i=r.SheetNames[t],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[t].CodeName||l)}catch{}var u=sr(o["!ref"]||"A1");if(u.e.c>16383||u.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],$e(s,129),(r.vbaraw||o["!outline"])&&$e(s,147,xre(l,o["!outline"])),$e(s,148,fre(u)),bne(s,o,r.Workbook),xne(s,o),mne(s,o,t,e),_ne(s,o),wne(s,o,r,t),pne(s,o),vne(s,o,n),o["!margins"]&&$e(s,476,ane(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&gne(s,o),yne(s,o,t,n),$e(s,130),s.end()}function Ene(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(e[+o[1]]=r?+o[2]:o[2])});var s=rr((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[e,s,n]}function Sne(t,e,r,n,s,i){var o=i||{"!type":"chart"};if(!t)return i;var l=0,u=0,h="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(p){var x=Ene(p);f.s.r=f.s.c=0,f.e.c=l,h=qr(l),x[0].forEach(function(v,w){o[h+hn(w)]={t:"n",v,z:x[1]},u=w}),f.e.r<u&&(f.e.r=u),++l}),l>0&&(o["!ref"]=Bt(f)),o}function kne(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=t.match(SR);return l&&d_(l[0],i,s,r),(o=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function Tne(t,e){t.l+=10;var r=ys(t);return{name:r}}function jne(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Co(t,function(u,h,f){switch(f){case 550:i["!rel"]=u;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),u.name&&(s.Sheets[r].CodeName=u.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(h.T>0)){if(!(h.T<0)){if(!o||e.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},e),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var h_=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Ane=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Cne=[],Ine=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function uj(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],s=0;s!=e.length;++s){var i=e[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Cr(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function dj(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Cr(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function AR(t){dj(t.WBProps,h_),dj(t.CalcPr,Ine),uj(t.WBView,Ane),uj(t.Sheets,Cne),xd.date1904=Cr(t.WBProps.date1904)}function Rne(t){return!t.Workbook||!t.Workbook.WBProps?"false":Cr(t.Workbook.WBProps.date1904)?"true":"false"}var Pne="][*?/\\".split("");function CR(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Pne.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Dne(t,e,r){t.forEach(function(n,s){CR(n);for(var i=0;i<s;++i)if(n==t[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=e&&e[s]&&e[s].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function Fne(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];Dne(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)Rte(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var Lne=/<\w+:workbook/;function One(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},o=0;if(t.replace(Es,function(u,h){var f=Rt(u);switch(Li(f[0])){case"<?xml":break;case"<workbook":u.match(Lne)&&(s="xmlns"+u.match(/<(\w+):/)[1]),r.xmlns=f[s];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":h_.forEach(function(p){if(f[p[0]]!=null)switch(p[2]){case"bool":r.WBProps[p[0]]=Cr(f[p[0]]);break;case"int":r.WBProps[p[0]]=parseInt(f[p[0]],10);break;default:r.WBProps[p[0]]=f[p[0]]}}),f.codeName&&(r.WBProps.CodeName=vr(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=rr(vr(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=vr(f.name),f.comment&&(i.Comment=f.comment),f.localSheetId&&(i.Sheet=+f.localSheetId),Cr(f.hidden||"0")&&(i.Hidden=!0),o=h+u.length;break;case"</definedName>":i.Ref=rr(vr(t.slice(o,h))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return u}),su.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return AR(r),r}function IR(t){var e=[fn];e[e.length]=rt("workbook",null,{xmlns:su[0],"xmlns:r":kn.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(h_.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=rt("workbookPr",null,n);var s=t.Workbook&&t.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",i=0;i!=t.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==t.SheetNames.length&&(i=0),e[e.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",i=0;i!=t.SheetNames.length;++i){var o={name:gr(t.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=rt("sheet",null,o)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var u={name:l.Name};l.Comment&&(u.comment=l.Comment),l.Sheet!=null&&(u.localSheetId=""+l.Sheet),l.Hidden&&(u.hidden="1"),l.Ref&&(e[e.length]=rt("definedName",gr(l.Ref),u))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Mne(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=fw(t),r.name=ys(t),r}function Vne(t,e){return e||(e=Oe(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),Qb(t.strRelID,e),Bn(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Bne(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?ys(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Une(t,e){e||(e=Oe(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),_5(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function zne(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function $ne(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),i=yX(t),o=kte(t,0,r),l=Yb(t);t.l=n;var u={Name:i,Ptg:o};return s<268435455&&(u.Sheet=s),l&&(u.Comment=l),u}function Hne(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;e||(e={}),e.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],e0[16]={n:"BrtFRTArchID$",f:zne},Co(t,function(u,h,f){switch(f){case 156:o.SheetNames.push(u.name),r.Sheets.push(u);break;case 153:r.WBProps=u;break;case 39:u.Sheet!=null&&(e.SID=u.Sheet),u.Ref=fs(u.Ptg,null,null,o,e),delete e.SID,delete u.Ptg,i.push(u);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([f,u]):o[0]=[f,u],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(u),o.XTI=o.XTI.concat(u);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(f),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(f),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!h.T){if(!s||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},e),AR(r),r.Names=i,r.supbooks=o,r}function Wne(t,e){$e(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};$e(t,156,Vne(s))}$e(t,144)}function qne(t,e){e||(e=Oe(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Bn("SheetJS",e),Bn(gx.version,e),Bn(gx.version,e),Bn("7262",e),e.length>e.l?e.slice(0,e.l):e}function Gne(t,e){e||(e=Oe(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function Kne(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,s=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&i==-1&&(i=n);i>s||($e(t,135),$e(t,158,Gne(s)),$e(t,136))}}function Xne(t,e){var r=Ks();return $e(r,131),$e(r,128,qne()),$e(r,153,Une(t.Workbook&&t.Workbook.WBProps||null)),Kne(r,t),Wne(r,t),$e(r,132),r.end()}function Yne(t,e,r){return e.slice(-4)===".bin"?Hne(t,r):One(t,r)}function Qne(t,e,r,n,s,i,o,l){return e.slice(-4)===".bin"?hne(t,n,r,s,i,o,l):$te(t,n,r,s,i,o,l)}function Jne(t,e,r,n,s,i,o,l){return e.slice(-4)===".bin"?jne(t,n,r,s,i):kne(t,n,r,s,i)}function Zne(t,e,r,n,s,i,o,l){return e.slice(-4)===".bin"?tee():ree()}function ese(t,e,r,n,s,i,o,l){return e.slice(-4)===".bin"?ZZ():eee()}function tse(t,e,r,n){return e.slice(-4)===".bin"?YJ(t,r,n):MJ(t,r,n)}function rse(t,e,r){return dR(t,r)}function nse(t,e,r){return e.slice(-4)===".bin"?nJ(t,r):eJ(t,r)}function sse(t,e,r){return e.slice(-4)===".bin"?KZ(t,r):VZ(t,r)}function ase(t,e,r){return e.slice(-4)===".bin"?LZ(t):DZ(t)}function ise(t,e,r,n){return r.slice(-4)===".bin"?OZ(t,e,r,n):void 0}function ose(t,e,r){return e.slice(-4)===".bin"?IZ(t,e,r):PZ(t,e,r)}function lse(t,e,r){return(e.slice(-4)===".bin"?Xne:IR)(t)}function cse(t,e,r,n,s){return(e.slice(-4)===".bin"?Nne:kR)(t,r,n,s)}function use(t,e,r){return(e.slice(-4)===".bin"?iZ:cR)(t,r)}function dse(t,e,r){return(e.slice(-4)===".bin"?iJ:tR)(t,r)}function hse(t,e,r){return(e.slice(-4)===".bin"?XZ:mR)(t)}function fse(t){return(t.slice(-4)===".bin"?RZ:hR)()}var RR=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,PR=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Ya(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=t.match(RR),i,o,l,u;if(s)for(u=0;u!=s.length;++u)i=s[u].match(PR),(o=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),n[l]=i[2].slice(1,i[2].length-1));return n}function mse(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(RR),s,i,o,l;if(n)for(l=0;l!=n.length;++l)s=n[l].match(PR),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var bf;function pse(t,e){var r=bf[t]||rr(t);return r==="General"?zc(e):Da(r,e)}function xse(t,e,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Cr(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=Dr(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[rr(e)]=s}function gse(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||Io[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Wf(t.v):t.w=zc(t.v):t.w=pse(e||"General",t.v)}catch(i){if(r.WTF)throw i}try{var n=bf[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&sh(n)){var s=Ec(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function vse(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=CJ[n.Pattern]||n.Pattern)}t[e.ID]=e}function yse(t,e,r,n,s,i,o,l,u,h){var f="General",p=n.StyleID,x={};h=h||{};var v=[],w=0;for(p===void 0&&l&&(p=l.StyleID),p===void 0&&o&&(p=o.StyleID);i[p]!==void 0&&(i[p].nf&&(f=i[p].nf),i[p].Interior&&v.push(i[p].Interior),!!i[p].Parent);)p=i[p].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Cr(t);break;case"String":n.t="s",n.r=j4(rr(t)),n.v=t.indexOf("<")>-1?rr(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(Dr(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=rr(t):n.v<60&&(n.v=n.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=T5[t],h.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=j4(e||t));break}if(gse(n,f,h),h.cellFormula!==!1)if(n.Formula){var b=rr(n.Formula);b.charCodeAt(0)==61&&(b=b.slice(1)),n.f=pd(b,s),delete n.Formula,n.ArrayRange=="RC"?n.F=pd("RC:RC",s):n.ArrayRange&&(n.F=pd(n.ArrayRange,s),u.push([sr(n.F),n.F]))}else for(w=0;w<u.length;++w)s.r>=u[w][0].s.r&&s.r<=u[w][0].e.r&&s.c>=u[w][0].s.c&&s.c<=u[w][0].e.c&&(n.F=u[w][1]);h.cellStyles&&(v.forEach(function(_){!x.patternType&&_.patternType&&(x.patternType=_.patternType)}),n.s=x),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function wse(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function s1(t,e){var r=e||{};ah();var n=Jh(Hb(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=vr(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=Fr(r);return o.type="string",Vd.to_workbook(n,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ve){s.indexOf("<"+ve)>=0&&(i=!0)}),i)return aae(n,r);bf={"General Number":"General","General Date":Tt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Tt[15],"Short Date":Tt[14],"Long Time":Tt[19],"Medium Time":Tt[18],"Short Time":Tt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Tt[2],Standard:Tt[4],Percent:Tt[10],Scientific:Tt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,u=[],h,f={},p=[],x=r.dense?[]:{},v="",w={},b={},_=Ya('<Data ss:Type="String">'),R=0,j=0,k=0,F={s:{r:2e6,c:2e6},e:{r:0,c:0}},L={},I={},N="",T=0,P=[],B={},z={},O=0,D=[],G=[],Q={},ue=[],H,te=!1,K=[],ce=[],U={},M=0,X=0,Y={Sheets:[],WBProps:{date1904:!1}},Z={};Kf.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var fe="";l=Kf.exec(n);)switch(l[3]=(fe=l[3]).toLowerCase()){case"data":if(fe=="data"){if(l[1]==="/"){if((h=u.pop())[0]!==l[3])throw new Error("Bad state: "+h.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&u.push([l[3],!0]);break}if(u[u.length-1][1])break;l[1]==="/"?yse(n.slice(R,l.index),N,_,u[u.length-1][0]=="comment"?Q:w,{c:j,r:k},L,ue[j],b,K,r):(N="",_=Ya(l[0]),R=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(G.length>0&&(w.c=G),(!r.sheetRows||r.sheetRows>k)&&w.v!==void 0&&(r.dense?(x[k]||(x[k]=[]),x[k][j]=w):x[qr(j)+hn(k)]=w),w.HRef&&(w.l={Target:rr(w.HRef)},w.HRefScreenTip&&(w.l.Tooltip=w.HRefScreenTip),delete w.HRef,delete w.HRefScreenTip),(w.MergeAcross||w.MergeDown)&&(M=j+(parseInt(w.MergeAcross,10)|0),X=k+(parseInt(w.MergeDown,10)|0),P.push({s:{c:j,r:k},e:{c:M,r:X}})),!r.sheetStubs)w.MergeAcross?j=M+1:++j;else if(w.MergeAcross||w.MergeDown){for(var ie=j;ie<=M;++ie)for(var me=k;me<=X;++me)(ie>j||me>k)&&(r.dense?(x[me]||(x[me]=[]),x[me][ie]={t:"z"}):x[qr(ie)+hn(me)]={t:"z"});j=M+1}else++j;else w=mse(l[0]),w.Index&&(j=+w.Index-1),j<F.s.c&&(F.s.c=j),j>F.e.c&&(F.e.c=j),l[0].slice(-2)==="/>"&&++j,G=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(k<F.s.r&&(F.s.r=k),k>F.e.r&&(F.e.r=k),l[0].slice(-2)==="/>"&&(b=Ya(l[0]),b.Index&&(k=+b.Index-1)),j=0,++k):(b=Ya(l[0]),b.Index&&(k=+b.Index-1),U={},(b.AutoFitHeight=="0"||b.Height)&&(U.hpx=parseInt(b.Height,10),U.hpt=Zf(U.hpx),ce[k]=U),b.Hidden=="1"&&(U.hidden=!0,ce[k]=U));break;case"worksheet":if(l[1]==="/"){if((h=u.pop())[0]!==l[3])throw new Error("Bad state: "+h.join("|"));p.push(v),F.s.r<=F.e.r&&F.s.c<=F.e.c&&(x["!ref"]=Bt(F),r.sheetRows&&r.sheetRows<=F.e.r&&(x["!fullref"]=x["!ref"],F.e.r=r.sheetRows-1,x["!ref"]=Bt(F))),P.length&&(x["!merges"]=P),ue.length>0&&(x["!cols"]=ue),ce.length>0&&(x["!rows"]=ce),f[v]=x}else F={s:{r:2e6,c:2e6},e:{r:0,c:0}},k=j=0,u.push([l[3],!1]),h=Ya(l[0]),v=rr(h.Name),x=r.dense?[]:{},P=[],K=[],ce=[],Z={name:v,Hidden:0},Y.Sheets.push(Z);break;case"table":if(l[1]==="/"){if((h=u.pop())[0]!==l[3])throw new Error("Bad state: "+h.join("|"))}else{if(l[0].slice(-2)=="/>")break;u.push([l[3],!1]),ue=[],te=!1}break;case"style":l[1]==="/"?vse(L,I,r):I=Ya(l[0]);break;case"numberformat":I.nf=rr(Ya(l[0]).Format||"General"),bf[I.nf]&&(I.nf=bf[I.nf]);for(var pe=0;pe!=392&&Tt[pe]!=I.nf;++pe);if(pe==392){for(pe=57;pe!=392;++pe)if(Tt[pe]==null){ho(I.nf,pe);break}}break;case"column":if(u[u.length-1][0]!=="table")break;if(H=Ya(l[0]),H.Hidden&&(H.hidden=!0,delete H.Hidden),H.Width&&(H.wpx=parseInt(H.Width,10)),!te&&H.wpx>10){te=!0,ps=oR;for(var we=0;we<ue.length;++we)ue[we]&&Pl(ue[we])}te&&Pl(H),ue[H.Index-1||ue.length]=H;for(var Xe=0;Xe<+H.Span;++Xe)ue[ue.length]=Fr(H);break;case"namedrange":if(l[1]==="/")break;Y.Names||(Y.Names=[]);var re=Rt(l[0]),Ze={Name:re.Name,Ref:pd(re.RefersTo.slice(1),{r:0,c:0})};Y.Sheets.length>0&&(Ze.Sheet=Y.Sheets.length-1),Y.Names.push(Ze);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?N+=n.slice(T,l.index):T=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=Ya(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?HX(B,fe,n.slice(O,l.index)):O=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((h=u.pop())[0]!==l[3])throw new Error("Bad state: "+h.join("|"))}else u.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((h=u.pop())[0]!==l[3])throw new Error("Bad state: "+h.join("|"));wse(Q),G.push(Q)}else u.push([l[3],!1]),h=Ya(l[0]),Q={a:h.Author};break;case"autofilter":if(l[1]==="/"){if((h=u.pop())[0]!==l[3])throw new Error("Bad state: "+h.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Fe=Ya(l[0]);x["!autofilter"]={ref:pd(Fe.Range).replace(/\$/g,"")},u.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((h=u.pop())[0]!==l[3])throw new Error("Bad state: "+h.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&u.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((h=u.pop())[0]!==l[3])throw new Error("Bad state: "+h.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&u.push([l[3],!0]);break;case"null":break;default:if(u.length==0&&l[3]=="document"||u.length==0&&l[3]=="uof")return xj(n,r);var ge=!0;switch(u[u.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ge=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ge=!1}break;case"excelworkbook":switch(l[3]){case"date1904":Y.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ge=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ge=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(O,l.index)){case"SheetHidden":Z.Hidden=1;break;case"SheetVeryHidden":Z.Hidden=2;break}else O=l.index+l[0].length;break;case"header":x["!margins"]||Cc(x["!margins"]={},"xlml"),isNaN(+Rt(l[0]).Margin)||(x["!margins"].header=+Rt(l[0]).Margin);break;case"footer":x["!margins"]||Cc(x["!margins"]={},"xlml"),isNaN(+Rt(l[0]).Margin)||(x["!margins"].footer=+Rt(l[0]).Margin);break;case"pagemargins":var be=Rt(l[0]);x["!margins"]||Cc(x["!margins"]={},"xlml"),isNaN(+be.Top)||(x["!margins"].top=+be.Top),isNaN(+be.Left)||(x["!margins"].left=+be.Left),isNaN(+be.Right)||(x["!margins"].right=+be.Right),isNaN(+be.Bottom)||(x["!margins"].bottom=+be.Bottom);break;case"displayrighttoleft":Y.Views||(Y.Views=[]),Y.Views[0]||(Y.Views[0]={}),Y.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":x["!outline"]||(x["!outline"]={}),x["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":x["!outline"]||(x["!outline"]={}),x["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ge=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ge=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ge=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ge=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ge=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ge=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ge=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ge=!1}break;case"smarttags":break;default:ge=!1;break}if(ge||l[3].match(/!\[CDATA/))break;if(!u[u.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+u.join("|");if(u[u.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?xse(z,fe,D,n.slice(O,l.index)):(D=l,O=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+u.join("|")}var se={};return!r.bookSheets&&!r.bookProps&&(se.Sheets=f),se.SheetNames=p,se.Workbook=Y,se.SSF=Fr(Tt),se.Props=B,se.Custprops=z,se}function ww(t,e){switch(m_(e=e||{}),e.type||"base64"){case"base64":return s1(fa(t),e);case"binary":case"buffer":case"file":return s1(t,e);case"array":return s1(Hl(t),e)}}function bse(t,e){var r=[];return t.Props&&r.push(WX(t.Props,e)),t.Custprops&&r.push(qX(t.Props,t.Custprops)),r.join("")}function _se(){return""}function Nse(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,s){var i=[];i.push(rt("NumberFormat",null,{"ss:Format":gr(Tt[n.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(rt("Style",i.join(""),o))}),rt("Styles",r.join(""))}function DR(t){return rt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+l_(t.Ref,{r:0,c:0})})}function Ese(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var s=e[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(DR(s)))}return rt("Names",r.join(""))}function Sse(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(DR(l)))}return i.join("")}function kse(t,e,r,n){if(!t)return"";var s=[];if(t["!margins"]&&(s.push("<PageSetup>"),t["!margins"].header&&s.push(rt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&s.push(rt("Footer",null,{"x:Margin":t["!margins"].footer})),s.push(rt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(rt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),t["!protect"]&&(s.push(Zn("ProtectContents","True")),t["!protect"].objects&&s.push(Zn("ProtectObjects","True")),t["!protect"].scenarios&&s.push(Zn("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?s.push(Zn("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&s.push(Zn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":rt("WorksheetOptions",s.join(""),{xmlns:sa.x})}function Tse(t){return t.map(function(e){var r=KK(e.t||""),n=rt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return rt("Comment",n,{"ss:Author":e.a})}).join("")}function jse(t,e,r,n,s,i,o){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+gr(l_(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var u=Gr(t.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(u.r==o.r?"":"["+(u.r-o.r)+"]")+"C"+(u.c==o.c?"":"["+(u.c-o.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=gr(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=gr(t.l.Tooltip))),r["!merges"])for(var h=r["!merges"],f=0;f!=h.length;++f)h[f].s.c!=o.c||h[f].s.r!=o.r||(h[f].e.c>h[f].s.c&&(l["ss:MergeAcross"]=h[f].e.c-h[f].s.c),h[f].e.r>h[f].s.r&&(l["ss:MergeDown"]=h[f].e.r-h[f].s.r));var p="",x="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":p="Number",x=String(t.v);break;case"b":p="Boolean",x=t.v?"1":"0";break;case"e":p="Error",x=Io[t.v];break;case"d":p="DateTime",x=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Tt[14]);break;case"s":p="String",x=GK(t.v||"");break}var v=ql(n.cellXfs,t,n);l["ss:StyleID"]="s"+(21+v),l["ss:Index"]=o.c+1;var w=t.v!=null?x:"",b=t.t=="z"?"":'<Data ss:Type="'+p+'">'+w+"</Data>";return(t.c||[]).length>0&&(b+=Tse(t.c)),rt("Cell",b,l)}function Ase(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Bd(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Cse(t,e,r,n){if(!t["!ref"])return"";var s=sr(t["!ref"]),i=t["!merges"]||[],o=0,l=[];t["!cols"]&&t["!cols"].forEach(function(_,R){Pl(_);var j=!!_.width,k=Fg(R,_),F={"ss:Index":R+1};j&&(F["ss:Width"]=Qf(k.width)),_.hidden&&(F["ss:Hidden"]="1"),l.push(rt("Column",null,F))});for(var u=Array.isArray(t),h=s.s.r;h<=s.e.r;++h){for(var f=[Ase(h,(t["!rows"]||[])[h])],p=s.s.c;p<=s.e.c;++p){var x=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>p)&&!(i[o].s.r>h)&&!(i[o].e.c<p)&&!(i[o].e.r<h)){(i[o].s.c!=p||i[o].s.r!=h)&&(x=!0);break}if(!x){var v={r:h,c:p},w=jt(v),b=u?(t[h]||[])[p]:t[w];f.push(jse(b,w,t,e,r,n,v))}}f.push("</Row>"),f.length>2&&l.push(f.join(""))}return l.join("")}function Ise(t,e,r){var n=[],s=r.SheetNames[t],i=r.Sheets[s],o=i?Sse(i,e,t,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=i?Cse(i,e,t,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(kse(i,e,t,r)),n.join("")}function Rse(t,e){e||(e={}),t.SSF||(t.SSF=Fr(Tt)),t.SSF&&(ah(),jg(t.SSF),e.revssf=Cg(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],ql(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(bse(t,e)),r.push(_se()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(rt("Worksheet",Ise(n,e,t),{"ss:Name":gr(t.SheetNames[n])}));return r[2]=Nse(t,e),r[3]=Ese(t),fn+rt("Workbook",r.join(""),{xmlns:sa.ss,"xmlns:o":sa.o,"xmlns:x":sa.x,"xmlns:ss":sa.ss,"xmlns:dt":sa.dt,"xmlns:html":sa.html})}function Pse(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=EX(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=SX(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var Dse=[60,1084,2066,2165,2175];function Fse(t,e,r,n,s){var i=n,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var u=so(r,r.l),h=bw[u],f=0;h!=null&&Dse.indexOf(u)>-1;)i=so(r,r.l+2),f=r.l+4,u==2066?f+=4:(u==2165||u==2175)&&(f+=12),l=r.slice(f,r.l+4+i),o.push(l),r.l+=4+i,h=bw[u=so(r,r.l)];var p=Mn(o);Jn(p,0);var x=0;p.lens=[];for(var v=0;v<o.length;++v)p.lens.push(x),x+=o[v].length;if(p.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+p.length+" < "+n;return e.f(p,p.length,s)}function bi(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Tt[n])}catch(i){if(e.WTF)throw i}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||Io[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Wf(t.v):t.w=zc(t.v):t.w=Da(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(i){if(e.WTF)throw i}if(e.cellDates&&n&&t.t=="n"&&sh(Tt[n]||String(n))){var s=Ec(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function yp(t,e,r){return{v:t,ixfe:e,t:r}}function Lse(t,e){var r={opts:{}},n={},s=e.dense?[]:{},i={},o={},l=null,u=[],h="",f={},p,x="",v,w,b,_,R={},j=[],k,F,L=[],I=[],N={Sheets:[],WBProps:{date1904:!1},Views:[{}]},T={},P=function(mt){return mt<8?Tc[mt]:mt<64&&I[mt-8]||Tc[mt]},B=function(mt,Mt,hr){var Jt=Mt.XF.data;if(!(!Jt||!Jt.patternType||!hr||!hr.cellStyles)){Mt.s={},Mt.s.patternType=Jt.patternType;var Vr;(Vr=Yf(P(Jt.icvFore)))&&(Mt.s.fgColor={rgb:Vr}),(Vr=Yf(P(Jt.icvBack)))&&(Mt.s.bgColor={rgb:Vr})}},z=function(mt,Mt,hr){if(!(U>1)&&!(hr.sheetRows&&mt.r>=hr.sheetRows)){if(hr.cellStyles&&Mt.XF&&Mt.XF.data&&B(mt,Mt,hr),delete Mt.ixfe,delete Mt.XF,p=mt,x=jt(mt),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),mt.r<o.s.r&&(o.s.r=mt.r),mt.c<o.s.c&&(o.s.c=mt.c),mt.r+1>o.e.r&&(o.e.r=mt.r+1),mt.c+1>o.e.c&&(o.e.c=mt.c+1),hr.cellFormula&&Mt.f){for(var Jt=0;Jt<j.length;++Jt)if(!(j[Jt][0].s.c>mt.c||j[Jt][0].s.r>mt.r)&&!(j[Jt][0].e.c<mt.c||j[Jt][0].e.r<mt.r)){Mt.F=Bt(j[Jt][0]),(j[Jt][0].s.c!=mt.c||j[Jt][0].s.r!=mt.r)&&delete Mt.f,Mt.f&&(Mt.f=""+fs(j[Jt][1],o,mt,K,O));break}}hr.dense?(s[mt.r]||(s[mt.r]=[]),s[mt.r][mt.c]=Mt):s[x]=Mt}},O={enc:!1,sbcch:0,snames:[],sharedf:R,arrayf:j,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(O.password=e.password);var D,G=[],Q=[],ue=[],H=[],te=!1,K=[];K.SheetNames=O.snames,K.sharedf=O.sharedf,K.arrayf=O.arrayf,K.names=[],K.XTI=[];var ce=0,U=0,M=0,X=[],Y=[],Z;O.codepage=1200,ei(1200);for(var fe=!1;t.l<t.length-1;){var ie=t.l,me=t.read_shift(2);if(me===0&&ce===10)break;var pe=t.l===t.length?0:t.read_shift(2),we=bw[me];if(we&&we.f){if(e.bookSheets&&ce===133&&me!==133)break;if(ce=me,we.r===2||we.r==12){var Xe=t.read_shift(2);if(pe-=2,!O.enc&&Xe!==me&&((Xe&255)<<8|Xe>>8)!==me)throw new Error("rt mismatch: "+Xe+"!="+me);we.r==12&&(t.l+=10,pe-=10)}var re={};if(me===10?re=we.f(t,pe,O):re=Fse(me,we,t,pe,O),U==0&&[9,521,1033,2057].indexOf(ce)===-1)continue;switch(me){case 34:r.opts.Date1904=N.WBProps.date1904=re;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(O.enc||(t.l=0),O.enc=re,!e.password)throw new Error("File is password-protected");if(re.valid==null)throw new Error("Encryption scheme unsupported");if(!re.valid)throw new Error("Password is incorrect");break;case 92:O.lastuser=re;break;case 66:var Ze=Number(re);switch(Ze){case 21010:Ze=1200;break;case 32768:Ze=1e4;break;case 32769:Ze=1252;break}ei(O.codepage=Ze),fe=!0;break;case 317:O.rrtabid=re;break;case 25:O.winlocked=re;break;case 439:r.opts.RefreshAll=re;break;case 12:r.opts.CalcCount=re;break;case 16:r.opts.CalcDelta=re;break;case 17:r.opts.CalcIter=re;break;case 13:r.opts.CalcMode=re;break;case 14:r.opts.CalcPrecision=re;break;case 95:r.opts.CalcSaveRecalc=re;break;case 15:O.CalcRefMode=re;break;case 2211:r.opts.FullCalc=re;break;case 129:re.fDialog&&(s["!type"]="dialog"),re.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),re.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:L.push(re);break;case 430:K.push([re]),K[K.length-1].XTI=[];break;case 35:case 547:K[K.length-1].push(re);break;case 24:case 536:Z={Name:re.Name,Ref:fs(re.rgce,o,null,K,O)},re.itab>0&&(Z.Sheet=re.itab-1),K.names.push(Z),K[0]||(K[0]=[],K[0].XTI=[]),K[K.length-1].push(re),re.Name=="_xlnm._FilterDatabase"&&re.itab>0&&re.rgce&&re.rgce[0]&&re.rgce[0][0]&&re.rgce[0][0][0]=="PtgArea3d"&&(Y[re.itab-1]={ref:Bt(re.rgce[0][0][1][2])});break;case 22:O.ExternCount=re;break;case 23:K.length==0&&(K[0]=[],K[0].XTI=[]),K[K.length-1].XTI=K[K.length-1].XTI.concat(re),K.XTI=K.XTI.concat(re);break;case 2196:if(O.biff<8)break;Z!=null&&(Z.Comment=re[1]);break;case 18:s["!protect"]=re;break;case 19:re!==0&&O.WTF&&console.error("Password verifier: "+re);break;case 133:i[re.pos]=re,O.snames.push(re.name);break;case 10:{if(--U)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=Bt(o),e.sheetRows&&e.sheetRows<=o.e.r){var Fe=o.e.r;o.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Bt(o),o.e.r=Fe}o.e.r++,o.e.c++}G.length>0&&(s["!merges"]=G),Q.length>0&&(s["!objects"]=Q),ue.length>0&&(s["!cols"]=ue),H.length>0&&(s["!rows"]=H),N.Sheets.push(T)}h===""?f=s:n[h]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(O.biff===8&&(O.biff={9:2,521:3,1033:4}[me]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[re.BIFFVer]||8),O.biffguess=re.BIFFVer==0,re.BIFFVer==0&&re.dt==4096&&(O.biff=5,fe=!0,ei(O.codepage=28591)),O.biff==8&&re.BIFFVer==0&&re.dt==16&&(O.biff=2),U++)break;if(s=e.dense?[]:{},O.biff<8&&!fe&&(fe=!0,ei(O.codepage=e.codepage||1252)),O.biff<5||re.BIFFVer==0&&re.dt==4096){h===""&&(h="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ge={pos:t.l-pe,name:h};i[ge.pos]=ge,O.snames.push(h)}else h=(i[ie]||{name:""}).name;re.dt==32&&(s["!type"]="chart"),re.dt==64&&(s["!type"]="macro"),G=[],Q=[],O.arrayf=j=[],ue=[],H=[],te=!1,T={Hidden:(i[ie]||{hs:0}).hs,name:h}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[re.r]||[])[re.c]:s[jt({c:re.c,r:re.r})])&&++re.c,k={ixfe:re.ixfe,XF:L[re.ixfe]||{},v:re.val,t:"n"},M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z({c:re.c,r:re.r},k,e);break;case 5:case 517:k={ixfe:re.ixfe,XF:L[re.ixfe],v:re.val,t:re.t},M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z({c:re.c,r:re.r},k,e);break;case 638:k={ixfe:re.ixfe,XF:L[re.ixfe],v:re.rknum,t:"n"},M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z({c:re.c,r:re.r},k,e);break;case 189:for(var be=re.c;be<=re.C;++be){var se=re.rkrec[be-re.c][0];k={ixfe:se,XF:L[se],v:re.rkrec[be-re.c][1],t:"n"},M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z({c:be,r:re.r},k,e)}break;case 6:case 518:case 1030:{if(re.val=="String"){l=re;break}if(k=yp(re.val,re.cell.ixfe,re.tt),k.XF=L[k.ixfe],e.cellFormula){var ve=re.formula;if(ve&&ve[0]&&ve[0][0]&&ve[0][0][0]=="PtgExp"){var Me=ve[0][0][1][0],Re=ve[0][0][1][1],ze=jt({r:Me,c:Re});R[ze]?k.f=""+fs(re.formula,o,re.cell,K,O):k.F=((e.dense?(s[Me]||[])[Re]:s[ze])||{}).F}else k.f=""+fs(re.formula,o,re.cell,K,O)}M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z(re.cell,k,e),l=re}break;case 7:case 519:if(l)l.val=re,k=yp(re,l.cell.ixfe,"s"),k.XF=L[k.ixfe],e.cellFormula&&(k.f=""+fs(l.formula,o,l.cell,K,O)),M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z(l.cell,k,e),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{j.push(re);var nt=jt(re[0].s);if(v=e.dense?(s[re[0].s.r]||[])[re[0].s.c]:s[nt],e.cellFormula&&v){if(!l||!nt||!v)break;v.f=""+fs(re[1],o,re[0],K,O),v.F=Bt(re[0])}}break;case 1212:{if(!e.cellFormula)break;if(x){if(!l)break;R[jt(l.cell)]=re[0],v=e.dense?(s[l.cell.r]||[])[l.cell.c]:s[jt(l.cell)],(v||{}).f=""+fs(re[0],o,p,K,O)}}break;case 253:k=yp(u[re.isst].t,re.ixfe,"s"),u[re.isst].h&&(k.h=u[re.isst].h),k.XF=L[k.ixfe],M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z({c:re.c,r:re.r},k,e);break;case 513:e.sheetStubs&&(k={ixfe:re.ixfe,XF:L[re.ixfe],t:"z"},M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z({c:re.c,r:re.r},k,e));break;case 190:if(e.sheetStubs)for(var vt=re.c;vt<=re.C;++vt){var Le=re.ixfe[vt-re.c];k={ixfe:Le,XF:L[Le],t:"z"},M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z({c:vt,r:re.r},k,e)}break;case 214:case 516:case 4:k=yp(re.val,re.ixfe,"s"),k.XF=L[k.ixfe],M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z({c:re.c,r:re.r},k,e);break;case 0:case 512:U===1&&(o=re);break;case 252:u=re;break;case 1054:if(O.biff==4){X[M++]=re[1];for(var ye=0;ye<M+163&&Tt[ye]!=re[1];++ye);ye>=163&&ho(re[1],M+163)}else ho(re[1],re[0]);break;case 30:{X[M++]=re;for(var Ee=0;Ee<M+163&&Tt[Ee]!=re;++Ee);Ee>=163&&ho(re,M+163)}break;case 229:G=G.concat(re);break;case 93:Q[re.cmo[0]]=O.lastobj=re;break;case 438:O.lastobj.TxO=re;break;case 127:O.lastobj.ImData=re;break;case 440:for(_=re[0].s.r;_<=re[0].e.r;++_)for(b=re[0].s.c;b<=re[0].e.c;++b)v=e.dense?(s[_]||[])[b]:s[jt({c:b,r:_})],v&&(v.l=re[1]);break;case 2048:for(_=re[0].s.r;_<=re[0].e.r;++_)for(b=re[0].s.c;b<=re[0].e.c;++b)v=e.dense?(s[_]||[])[b]:s[jt({c:b,r:_})],v&&v.l&&(v.l.Tooltip=re[1]);break;case 28:{if(O.biff<=5&&O.biff>=2)break;v=e.dense?(s[re[0].r]||[])[re[0].c]:s[jt(re[0])];var et=Q[re[2]];v||(e.dense?(s[re[0].r]||(s[re[0].r]=[]),v=s[re[0].r][re[0].c]={t:"z"}):v=s[jt(re[0])]={t:"z"},o.e.r=Math.max(o.e.r,re[0].r),o.s.r=Math.min(o.s.r,re[0].r),o.e.c=Math.max(o.e.c,re[0].c),o.s.c=Math.min(o.s.c,re[0].c)),v.c||(v.c=[]),w={a:re[1],t:et.TxO.t},v.c.push(w)}break;case 2173:NZ(L[re.ixfe],re.ext);break;case 125:{if(!O.cellStyles)break;for(;re.e>=re.s;)ue[re.e--]={width:re.w/256,level:re.level||0,hidden:!!(re.flags&1)},te||(te=!0,a_(re.w/256)),Pl(ue[re.e+1])}break;case 520:{var lt={};re.level!=null&&(H[re.r]=lt,lt.level=re.level),re.hidden&&(H[re.r]=lt,lt.hidden=!0),re.hpt&&(H[re.r]=lt,lt.hpt=re.hpt,lt.hpx=Bd(re.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Cc(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[me]]=re;break;case 161:s["!margins"]||Cc(s["!margins"]={}),s["!margins"].header=re.header,s["!margins"].footer=re.footer;break;case 574:re.RTL&&(N.Views[0].RTL=!0);break;case 146:I=re;break;case 2198:D=re;break;case 140:F=re;break;case 442:h?T.CodeName=re||T.name:N.WBProps.CodeName=re||"ThisWorkbook";break}}else we||console.error("Missing Info for XLS Record 0x"+me.toString(16)),t.l+=pe}return r.SheetNames=nn(i).sort(function(Lt,mt){return Number(Lt)-Number(mt)}).map(function(Lt){return i[Lt].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&Y.forEach(function(Lt,mt){r.Sheets[r.SheetNames[mt]]["!autofilter"]=Lt}),r.Strings=u,r.SSF=Fr(Tt),O.enc&&(r.Encryption=O.enc),D&&(r.Themes=D),r.Metadata={},F!==void 0&&(r.Metadata.Country=F),K.names.length>0&&(N.Names=K.names),r.Workbook=N,r}var _f={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Ose(t,e,r){var n=Nt.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=q4(n,mw,_f.DSI);for(var i in s)e[i]=s[i]}catch(h){if(r.WTF)throw h}var o=Nt.find(t,"/!SummaryInformation");if(o&&o.size>0)try{var l=q4(o,pw,_f.SI);for(var u in l)e[u]==null&&(e[u]=l[u])}catch(h){if(r.WTF)throw h}e.HeadingPairs&&e.TitlesOfParts&&(P5(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function Mse(t,e){var r=[],n=[],s=[],i=0,o,l=_4(mw,"n"),u=_4(pw,"n");if(t.Props)for(o=nn(t.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(u,o[i])?n:s).push([o[i],t.Props[o[i]]]);if(t.Custprops)for(o=nn(t.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(t.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(u,o[i])?n:s).push([o[i],t.Custprops[o[i]]]);var h=[];for(i=0;i<s.length;++i)B5.indexOf(s[i][0])>-1||R5.indexOf(s[i][0])>-1||s[i][1]!=null&&h.push(s[i]);n.length&&Nt.utils.cfb_add(e,"/SummaryInformation",G4(n,_f.SI,u,pw)),(r.length||h.length)&&Nt.utils.cfb_add(e,"/DocumentSummaryInformation",G4(r,_f.DSI,l,mw,h.length?h:null,_f.UDI))}function FR(t,e){e||(e={}),m_(e),Fb(),e.codepage&&Db(e.codepage);var r,n;if(t.FullPaths){if(Nt.find(t,"/encryption"))throw new Error("File is password-protected");r=Nt.find(t,"!CompObj"),n=Nt.find(t,"/Workbook")||Nt.find(t,"/Book")}else{switch(e.type){case"base64":t=ia(fa(t));break;case"binary":t=ia(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Jn(t,0),n={content:t}}var s,i;if(r&&Pse(r),e.bookProps&&!e.bookSheets)s={};else{var o=Ht?"buffer":"array";if(n&&n.content)s=Lse(n.content,e);else if((i=Nt.find(t,"PerfectOffice_MAIN"))&&i.content)s=Ac.to_workbook(i.content,(e.type=o,e));else if((i=Nt.find(t,"NativeContent_MAIN"))&&i.content)s=Ac.to_workbook(i.content,(e.type=o,e));else throw(i=Nt.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Nt.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=QZ(t))}var l={};return t.FullPaths&&Ose(t,l,e),s.Props=s.Custprops=l,e.bookFiles&&(s.cfb=t),s}function Vse(t,e){var r=e||{},n=Nt.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Nt.utils.cfb_add(n,s,LR(t,r)),r.biff==8&&(t.Props||t.Custprops)&&Mse(t,n),r.biff==8&&t.vbaraw&&JZ(n,Nt.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var e0={0:{f:cre},1:{f:gre},2:{f:Lre},3:{f:Sre},4:{f:bre},5:{f:Pre},6:{f:Ure},7:{f:Are},8:{f:Kre},9:{f:Gre},10:{f:Wre},11:{f:qre},12:{f:yre},13:{f:Mre},14:{f:Tre},15:{f:Nre},16:{f:TR},17:{f:$re},18:{f:Ire},19:{f:Xb},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:$ne},40:{},42:{},43:{f:UJ},44:{f:VJ},45:{f:HJ},46:{f:qJ},47:{f:WJ},48:{},49:{f:hX},50:{},51:{f:kZ},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Q5},62:{f:Bre},63:{f:FZ},64:{f:une},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:_s,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:ine},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:pre},148:{f:hre,p:16},151:{f:ene},152:{},153:{f:Bne},154:{},155:{},156:{f:Mne},157:{},158:{},159:{T:1,f:rJ},160:{T:-1},161:{T:1,f:lu},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Xre},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:EZ},336:{T:-1},337:{f:AZ,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:fw},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Y5},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:tne},427:{f:rne},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:sne},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:mre},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Jre},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:fw},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:qZ},633:{T:1},634:{T:-1},635:{T:1,f:HZ},636:{T:-1},637:{f:xX},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Tne},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:dne},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},bw={6:{f:r1},10:{f:al},12:{f:yn},13:{f:yn},14:{f:ln},15:{f:ln},16:{f:xs},17:{f:ln},18:{f:ln},19:{f:yn},20:{f:Z4},21:{f:Z4},23:{f:Y5},24:{f:tj},25:{f:ln},26:{},27:{},28:{f:dQ},29:{},34:{f:ln},35:{f:ej},38:{f:xs},39:{f:xs},40:{f:xs},41:{f:xs},42:{f:ln},43:{f:ln},47:{f:NJ},49:{f:MY},51:{f:yn},60:{},61:{f:PY},64:{f:ln},65:{f:OY},66:{f:yn},77:{},80:{},81:{},82:{},85:{f:yn},89:{},90:{},91:{},92:{f:_Y},93:{f:mQ},94:{},95:{f:ln},96:{},97:{},99:{f:ln},125:{f:Q5},128:{f:ZY},129:{f:EY},130:{f:yn},131:{f:ln},132:{f:ln},133:{f:SY},134:{},140:{f:_Q},141:{f:yn},144:{},146:{f:SQ},151:{},152:{},153:{},154:{},155:{},156:{f:yn},157:{},158:{},160:{f:RQ},161:{f:jQ},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:XY},190:{f:YY},193:{f:al},197:{},198:{},199:{},200:{},201:{},202:{f:ln},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:yn},220:{},221:{f:ln},222:{},224:{f:JY},225:{f:bY},226:{f:al},227:{},229:{f:hQ},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:TY},253:{f:BY},255:{f:AY},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:U5},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:ln},353:{f:al},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:sQ},431:{f:ln},432:{},433:{},434:{},437:{},438:{f:gQ},439:{f:ln},440:{f:vQ},441:{},442:{f:L0},443:{},444:{f:yn},445:{},446:{},448:{f:al},449:{f:RY,r:2},450:{f:al},512:{f:Y4},513:{f:IQ},515:{f:rQ},516:{f:zY},517:{f:J4},519:{f:PQ},520:{f:CY},523:{},545:{f:rj},549:{f:X4},566:{},574:{f:FY},638:{f:KY},659:{},1048:{},1054:{f:HY},1084:{},1212:{f:lQ},2048:{f:wQ},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:xp},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:al},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:kQ,r:12},2173:{f:_Z,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:ln,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:oQ,r:12},2197:{},2198:{f:xZ,r:12},2199:{},2200:{},2201:{},2202:{f:cQ,r:12},2203:{f:al},2204:{},2205:{},2206:{},2207:{},2211:{f:IY},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:yn},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:AQ},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:EQ},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:Y4},1:{},2:{f:MQ},3:{f:LQ},4:{f:FQ},5:{f:J4},7:{f:BQ},8:{},9:{f:xp},11:{},22:{f:yn},30:{f:qY},31:{},32:{},33:{f:rj},36:{},37:{f:X4},50:{f:UQ},62:{},52:{},67:{},68:{f:yn},69:{},86:{},126:{},127:{f:DQ},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:zQ},223:{},234:{},354:{},421:{},518:{f:r1},521:{f:xp},536:{f:tj},547:{f:ej},561:{},579:{},1030:{f:r1},1033:{f:xp},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function at(t,e,r,n){var s=e;if(!isNaN(s)){var i=n||(r||[]).length||0,o=t.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&qb(r)&&t.push(r)}}function Bse(t,e,r,n){var s=(r||[]).length||0;if(s<=8224)return at(t,e,r,s);var i=e;if(!isNaN(i)){for(var o=r.parts||[],l=0,u=0,h=0;h+(o[l]||8224)<=8224;)h+=o[l]||8224,l++;var f=t.next(4);for(f.write_shift(2,i),f.write_shift(2,h),t.push(r.slice(u,u+h)),u+=h;u<s;){for(f=t.next(4),f.write_shift(2,60),h=0;h+(o[l]||8224)<=8224;)h+=o[l]||8224,l++;f.write_shift(2,h),t.push(r.slice(u,u+h)),u+=h}}}function B0(t,e,r){return t||(t=Oe(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function Use(t,e,r,n){var s=Oe(9);return B0(s,t,e),z5(r,n||"b",s),s}function zse(t,e,r){var n=Oe(8+2*r.length);return B0(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function $se(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?An(Dr(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?at(t,2,VQ(r,n,s)):at(t,3,OQ(r,n,s));return;case"b":case"e":at(t,5,Use(r,n,e.v,e.t));return;case"s":case"str":at(t,4,zse(r,n,(e.v||"").slice(0,255)));return}at(t,1,B0(null,r,n))}function Hse(t,e,r,n){var s=Array.isArray(e),i=sr(e["!ref"]||"A1"),o,l="",u=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=Bt(i)}for(var h=i.s.r;h<=i.e.r;++h){l=hn(h);for(var f=i.s.c;f<=i.e.c;++f){h===i.s.r&&(u[f]=qr(f)),o=u[f]+l;var p=s?(e[h]||[])[f]:e[o];p&&$se(t,p,h,f)}}}function Wse(t,e){for(var r=e||{},n=Ks(),s=0,i=0;i<t.SheetNames.length;++i)t.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return at(n,r.biff==4?1033:r.biff==3?521:9,r_(t,16,r)),Hse(n,t.Sheets[t.SheetNames[s]],s,r),at(n,10),n.end()}function qse(t,e,r){at(t,49,VY({sz:12,name:"Arial"},r))}function Gse(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&at(t,1054,WY(s,e[s],r))})}function Kse(t,e){var r=Oe(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),at(t,2151,r),r=Oe(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),G5(sr(e["!ref"]||"A1"),r),r.write_shift(4,4),at(t,2152,r)}function Xse(t,e){for(var r=0;r<16;++r)at(t,224,Q4({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){at(t,224,Q4(n,0,e))})}function Yse(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];at(t,440,yQ(n)),n[1].Tooltip&&at(t,2048,bQ(n))}delete e["!links"]}function Qse(t,e){if(e){var r=0;e.forEach(function(n,s){++r<=256&&n&&at(t,125,TQ(Fg(s,n),s))})}}function Jse(t,e,r,n,s){var i=16+ql(s.cellXfs,e,s);if(e.v==null&&!e.bf){at(t,513,qc(r,n,i));return}if(e.bf)at(t,6,Ete(e,r,n,s,i));else switch(e.t){case"d":case"n":var o=e.t=="d"?An(Dr(e.v)):e.v;at(t,515,nQ(r,n,o,i));break;case"b":case"e":at(t,517,tQ(r,n,e.v,i,s,e.t));break;case"s":case"str":if(s.bookSST){var l=u_(s.Strings,e.v,s.revStrings);at(t,253,UY(r,n,l,i))}else at(t,516,$Y(r,n,(e.v||"").slice(0,255),i,s));break;default:at(t,513,qc(r,n,i))}}function Zse(t,e,r){var n=Ks(),s=r.SheetNames[t],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[t]||{},u=Array.isArray(i),h=e.biff==8,f,p="",x=[],v=sr(i["!ref"]||"A1"),w=h?65536:16384;if(v.e.c>255||v.e.r>=w){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");v.e.c=Math.min(v.e.c,255),v.e.r=Math.min(v.e.c,w-1)}at(n,2057,r_(r,16,e)),at(n,13,Ca(1)),at(n,12,Ca(100)),at(n,15,Cs(!0)),at(n,17,Cs(!1)),at(n,16,Hc(.001)),at(n,95,Cs(!0)),at(n,42,Cs(!1)),at(n,43,Cs(!1)),at(n,130,Ca(1)),at(n,128,eQ()),at(n,131,Cs(!1)),at(n,132,Cs(!1)),h&&Qse(n,i["!cols"]),at(n,512,GY(v,e)),h&&(i["!links"]=[]);for(var b=v.s.r;b<=v.e.r;++b){p=hn(b);for(var _=v.s.c;_<=v.e.c;++_){b===v.s.r&&(x[_]=qr(_)),f=x[_]+p;var R=u?(i[b]||[])[_]:i[f];R&&(Jse(n,R,b,_,e),h&&R.l&&i["!links"].push([f,R.l]))}}var j=l.CodeName||l.name||s;return h&&at(n,574,LY((o.Views||[])[0])),h&&(i["!merges"]||[]).length&&at(n,229,fQ(i["!merges"])),h&&Yse(n,i),at(n,442,$5(j)),h&&Kse(n,i),at(n,10),n.end()}function eae(t,e,r){var n=Ks(),s=(t||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,u=r.biff==5;if(at(n,2057,r_(t,5,r)),r.bookType=="xla"&&at(n,135),at(n,225,l?Ca(1200):null),at(n,193,tY(2)),u&&at(n,191),u&&at(n,192),at(n,226),at(n,92,NY("SheetJS",r)),at(n,66,Ca(l?1200:1252)),l&&at(n,353,Ca(0)),l&&at(n,448),at(n,317,CQ(t.SheetNames.length)),l&&t.vbaraw&&at(n,211),l&&t.vbaraw){var h=o.CodeName||"ThisWorkbook";at(n,442,$5(h))}at(n,156,Ca(17)),at(n,25,Cs(!1)),at(n,18,Cs(!1)),at(n,19,Ca(0)),l&&at(n,431,Cs(!1)),l&&at(n,444,Ca(0)),at(n,61,DY()),at(n,64,Cs(!1)),at(n,141,Ca(0)),at(n,34,Cs(Rne(t)=="true")),at(n,14,Cs(!0)),l&&at(n,439,Cs(!1)),at(n,218,Ca(0)),qse(n,t,r),Gse(n,t.SSF,r),Xse(n,r),l&&at(n,352,Cs(!1));var f=n.end(),p=Ks();l&&at(p,140,NQ()),l&&r.Strings&&Bse(p,252,jY(r.Strings)),at(p,10);var x=p.end(),v=Ks(),w=0,b=0;for(b=0;b<t.SheetNames.length;++b)w+=(l?12:11)+(l?2:1)*t.SheetNames[b].length;var _=f.length+w+x.length;for(b=0;b<t.SheetNames.length;++b){var R=i[b]||{};at(v,133,kY({pos:_,hs:R.Hidden||0,dt:0,name:t.SheetNames[b]},r)),_+=e[b].length}var j=v.end();if(w!=j.length)throw new Error("BS8 "+w+" != "+j.length);var k=[];return f.length&&k.push(f),j.length&&k.push(j),x.length&&k.push(x),Mn(k)}function tae(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=Fr(Tt)),t&&t.SSF&&(ah(),jg(t.SSF),r.revssf=Cg(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,p_(r),r.cellXfs=[],ql(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var s=0;s<t.SheetNames.length;++s)n[n.length]=Zse(s,r,t);return n.unshift(eae(t,n,r)),Mn(n)}function LR(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var s=Xs(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=e||{};switch(i.biff||2){case 8:case 5:return tae(t,e);case 4:case 3:case 2:return Wse(t,e)}throw new Error("invalid type "+i.bookType+" for BIFF")}function hj(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),o=s.index,l=i&&i.index||t.length,u=VK(t.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),h=-1,f=0,p=0,x=0,v={s:{r:1e7,c:1e7},e:{r:0,c:0}},w=[];for(o=0;o<u.length;++o){var b=u[o].trim(),_=b.slice(0,3).toLowerCase();if(_=="<tr"){if(++h,r.sheetRows&&r.sheetRows<=h){--h;break}f=0;continue}if(!(_!="<td"&&_!="<th")){var R=b.split(/<\/t[dh]>/i);for(l=0;l<R.length;++l){var j=R[l].trim();if(j.match(/<t[dh]/i)){for(var k=j,F=0;k.charAt(0)=="<"&&(F=k.indexOf(">"))>-1;)k=k.slice(F+1);for(var L=0;L<w.length;++L){var I=w[L];I.s.c==f&&I.s.r<h&&h<=I.e.r&&(f=I.e.c+1,L=-1)}var N=Rt(j.slice(0,j.indexOf(">")));x=N.colspan?+N.colspan:1,((p=+N.rowspan)>1||x>1)&&w.push({s:{r:h,c:f},e:{r:h+(p||1)-1,c:f+x-1}});var T=N.t||N["data-t"]||"";if(!k.length){f+=x;continue}if(k=i5(k),v.s.r>h&&(v.s.r=h),v.e.r<h&&(v.e.r=h),v.s.c>f&&(v.s.c=f),v.e.c<f&&(v.e.c=f),!k.length){f+=x;continue}var P={t:"s",v:k};r.raw||!k.trim().length||T=="s"||(k==="TRUE"?P={t:"b",v:!0}:k==="FALSE"?P={t:"b",v:!1}:isNaN(ni(k))?isNaN(Md(k).getDate())||(P={t:"d",v:Dr(k)},r.cellDates||(P={t:"n",v:An(P.v)}),P.z=r.dateNF||Tt[14]):P={t:"n",v:ni(k)}),r.dense?(n[h]||(n[h]=[]),n[h][f]=P):n[jt({r:h,c:f})]=P,f+=x}}}}return n["!ref"]=Bt(v),w.length&&(n["!merges"]=w),n}function rae(t,e,r,n){for(var s=t["!merges"]||[],i=[],o=e.s.c;o<=e.e.c;++o){for(var l=0,u=0,h=0;h<s.length;++h)if(!(s[h].s.r>r||s[h].s.c>o)&&!(s[h].e.r<r||s[h].e.c<o)){if(s[h].s.r<r||s[h].s.c<o){l=-1;break}l=s[h].e.r-s[h].s.r+1,u=s[h].e.c-s[h].s.c+1;break}if(!(l<0)){var f=jt({r,c:o}),p=n.dense?(t[r]||[])[o]:t[f],x=p&&p.v!=null&&(p.h||$b(p.w||(Eo(p),p.w)||""))||"",v={};l>1&&(v.rowspan=l),u>1&&(v.colspan=u),n.editable?x='<span contenteditable="true">'+x+"</span>":p&&(v["data-t"]=p&&p.t||"z",p.v!=null&&(v["data-v"]=p.v),p.z!=null&&(v["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(x='<a href="'+p.l.Target+'">'+x+"</a>")),v.id=(n.id||"sjs")+"-"+f,i.push(rt("td",x,v))}}var w="<tr>";return w+i.join("")+"</tr>"}var nae='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',sae="</body></html>";function aae(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Wl(hj(r[0],e),e);var n=v_();return r.forEach(function(s,i){y_(n,hj(s,e),"Sheet"+(i+1))}),n}function iae(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function OR(t,e){var r=e||{},n=r.header!=null?r.header:nae,s=r.footer!=null?r.footer:sae,i=[n],o=Xs(t["!ref"]);r.dense=Array.isArray(t),i.push(iae(t,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(rae(t,o,l,r));return i.push("</table>"+s),i.join("")}function MR(t,e,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var o=typeof n.origin=="string"?Gr(n.origin):n.origin;s=o.r,i=o.c}var l=e.getElementsByTagName("tr"),u=Math.min(n.sheetRows||1e7,l.length),h={s:{r:0,c:0},e:{r:s,c:i}};if(t["!ref"]){var f=Xs(t["!ref"]);h.s.r=Math.min(h.s.r,f.s.r),h.s.c=Math.min(h.s.c,f.s.c),h.e.r=Math.max(h.e.r,f.e.r),h.e.c=Math.max(h.e.c,f.e.c),s==-1&&(h.e.r=s=f.e.r+1)}var p=[],x=0,v=t["!rows"]||(t["!rows"]=[]),w=0,b=0,_=0,R=0,j=0,k=0;for(t["!cols"]||(t["!cols"]=[]);w<l.length&&b<u;++w){var F=l[w];if(fj(F)){if(n.display)continue;v[b]={hidden:!0}}var L=F.children;for(_=R=0;_<L.length;++_){var I=L[_];if(!(n.display&&fj(I))){var N=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):i5(I.innerHTML),T=I.getAttribute("data-z")||I.getAttribute("z");for(x=0;x<p.length;++x){var P=p[x];P.s.c==R+i&&P.s.r<b+s&&b+s<=P.e.r&&(R=P.e.c+1-i,x=-1)}k=+I.getAttribute("colspan")||1,((j=+I.getAttribute("rowspan")||1)>1||k>1)&&p.push({s:{r:b+s,c:R+i},e:{r:b+s+(j||1)-1,c:R+i+(k||1)-1}});var B={t:"s",v:N},z=I.getAttribute("data-t")||I.getAttribute("t")||"";N!=null&&(N.length==0?B.t=z||"z":n.raw||N.trim().length==0||z=="s"||(N==="TRUE"?B={t:"b",v:!0}:N==="FALSE"?B={t:"b",v:!1}:isNaN(ni(N))?isNaN(Md(N).getDate())||(B={t:"d",v:Dr(N)},n.cellDates||(B={t:"n",v:An(B.v)}),B.z=n.dateNF||Tt[14]):B={t:"n",v:ni(N)})),B.z===void 0&&T!=null&&(B.z=T);var O="",D=I.getElementsByTagName("A");if(D&&D.length)for(var G=0;G<D.length&&!(D[G].hasAttribute("href")&&(O=D[G].getAttribute("href"),O.charAt(0)!="#"));++G);O&&O.charAt(0)!="#"&&(B.l={Target:O}),n.dense?(t[b+s]||(t[b+s]=[]),t[b+s][R+i]=B):t[jt({c:R+i,r:b+s})]=B,h.e.c<R+i&&(h.e.c=R+i),R+=k}}++b}return p.length&&(t["!merges"]=(t["!merges"]||[]).concat(p)),h.e.r=Math.max(h.e.r,b-1+s),t["!ref"]=Bt(h),b>=u&&(t["!fullref"]=Bt((h.e.r=l.length-w+b-1+s,h))),t}function VR(t,e){var r=e||{},n=r.dense?[]:{};return MR(n,t,e)}function oae(t,e){return Wl(VR(t,e),e)}function fj(t){var e="",r=lae(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function lae(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function cae(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=rr(e.replace(/<[^>]*>/g,""));return[r]}var mj={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function BR(t,e){var r=e||{},n=Hb(t),s=[],i,o,l={name:""},u="",h=0,f,p,x={},v=[],w=r.dense?[]:{},b,_,R={value:""},j="",k=0,F=[],L=-1,I=-1,N={s:{r:1e6,c:1e7},e:{r:0,c:0}},T=0,P={},B=[],z={},O=0,D=0,G=[],Q=1,ue=1,H=[],te={Names:[]},K={},ce=["",""],U=[],M={},X="",Y=0,Z=!1,fe=!1,ie=0;for(Kf.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");b=Kf.exec(n);)switch(b[3]=b[3].replace(/_.*$/,"")){case"table":case"":b[1]==="/"?(N.e.c>=N.s.c&&N.e.r>=N.s.r?w["!ref"]=Bt(N):w["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=N.e.r&&(w["!fullref"]=w["!ref"],N.e.r=r.sheetRows-1,w["!ref"]=Bt(N)),B.length&&(w["!merges"]=B),G.length&&(w["!rows"]=G),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),v.push(f.name),x[f.name]=w,fe=!1):b[0].charAt(b[0].length-2)!=="/"&&(f=Rt(b[0],!1),L=I=-1,N.s.r=N.s.c=1e7,N.e.r=N.e.c=0,w=r.dense?[]:{},B=[],G=[],fe=!0);break;case"table-row-group":b[1]==="/"?--T:++T;break;case"table-row":case"":if(b[1]==="/"){L+=Q,Q=1;break}if(p=Rt(b[0],!1),p.?L=p.-1:L==-1&&(L=0),Q=+p["number-rows-repeated"]||1,Q<10)for(ie=0;ie<Q;++ie)T>0&&(G[L+ie]={level:T});I=-1;break;case"covered-table-cell":b[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(w[L]||(w[L]=[]),w[L][I]={t:"z"}):w[jt({r:L,c:I})]={t:"z"}),j="",F=[];break;case"table-cell":case"":if(b[0].charAt(b[0].length-2)==="/")++I,R=Rt(b[0],!1),ue=parseInt(R["number-columns-repeated"]||"1",10),_={t:"z",v:null},R.formula&&r.cellFormula!=!1&&(_.f=cj(rr(R.formula))),(R.||R["value-type"])=="string"&&(_.t="s",_.v=rr(R["string-value"]||""),r.dense?(w[L]||(w[L]=[]),w[L][I]=_):w[jt({r:L,c:I})]=_),I+=ue-1;else if(b[1]!=="/"){++I,j="",k=0,F=[],ue=1;var me=Q?L+Q-1:L;if(I>N.e.c&&(N.e.c=I),I<N.s.c&&(N.s.c=I),L<N.s.r&&(N.s.r=L),me>N.e.r&&(N.e.r=me),R=Rt(b[0],!1),U=[],M={},_={t:R.||R["value-type"],v:null},r.cellFormula)if(R.formula&&(R.formula=rr(R.formula)),R["number-matrix-columns-spanned"]&&R["number-matrix-rows-spanned"]&&(O=parseInt(R["number-matrix-rows-spanned"],10)||0,D=parseInt(R["number-matrix-columns-spanned"],10)||0,z={s:{r:L,c:I},e:{r:L+O-1,c:I+D-1}},_.F=Bt(z),H.push([z,_.F])),R.formula)_.f=cj(R.formula);else for(ie=0;ie<H.length;++ie)L>=H[ie][0].s.r&&L<=H[ie][0].e.r&&I>=H[ie][0].s.c&&I<=H[ie][0].e.c&&(_.F=H[ie][1]);switch((R["number-columns-spanned"]||R["number-rows-spanned"])&&(O=parseInt(R["number-rows-spanned"],10)||0,D=parseInt(R["number-columns-spanned"],10)||0,z={s:{r:L,c:I},e:{r:L+O-1,c:I+D-1}},B.push(z)),R["number-columns-repeated"]&&(ue=parseInt(R["number-columns-repeated"],10)),_.t){case"boolean":_.t="b",_.v=Cr(R["boolean-value"]);break;case"float":_.t="n",_.v=parseFloat(R.value);break;case"percentage":_.t="n",_.v=parseFloat(R.value);break;case"currency":_.t="n",_.v=parseFloat(R.value);break;case"date":_.t="d",_.v=Dr(R["date-value"]),r.cellDates||(_.t="n",_.v=An(_.v)),_.z="m/d/yy";break;case"time":_.t="n",_.v=LK(R["time-value"])/86400,r.cellDates&&(_.t="d",_.v=Ig(_.v)),_.z="HH:MM:SS";break;case"number":_.t="n",_.v=parseFloat(R.);break;default:if(_.t==="string"||_.t==="text"||!_.t)_.t="s",R["string-value"]!=null&&(j=rr(R["string-value"]),F=[]);else throw new Error("Unsupported value type "+_.t)}}else{if(Z=!1,_.t==="s"&&(_.v=j||"",F.length&&(_.R=F),Z=k==0),K.Target&&(_.l=K),U.length>0&&(_.c=U,U=[]),j&&r.cellText!==!1&&(_.w=j),Z&&(_.t="z",delete _.v),(!Z||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=L))for(var pe=0;pe<Q;++pe){if(ue=parseInt(R["number-columns-repeated"]||"1",10),r.dense)for(w[L+pe]||(w[L+pe]=[]),w[L+pe][I]=pe==0?_:Fr(_);--ue>0;)w[L+pe][I+ue]=Fr(_);else for(w[jt({r:L+pe,c:I})]=_;--ue>0;)w[jt({r:L+pe,c:I+ue})]=Fr(_);N.e.c<=I&&(N.e.c=I)}ue=parseInt(R["number-columns-repeated"]||"1",10),I+=ue-1,ue=0,_={},j="",F=[]}K={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(b[1]==="/"){if((i=s.pop())[0]!==b[3])throw"Bad state: "+i}else b[0].charAt(b[0].length-2)!=="/"&&s.push([b[3],!0]);break;case"annotation":if(b[1]==="/"){if((i=s.pop())[0]!==b[3])throw"Bad state: "+i;M.t=j,F.length&&(M.R=F),M.a=X,U.push(M)}else b[0].charAt(b[0].length-2)!=="/"&&s.push([b[3],!1]);X="",Y=0,j="",k=0,F=[];break;case"creator":b[1]==="/"?X=n.slice(Y,b.index):Y=b.index+b[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(b[1]==="/"){if((i=s.pop())[0]!==b[3])throw"Bad state: "+i}else b[0].charAt(b[0].length-2)!=="/"&&s.push([b[3],!1]);j="",k=0,F=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(b[1]==="/"){if(P[l.name]=u,(i=s.pop())[0]!==b[3])throw"Bad state: "+i}else b[0].charAt(b[0].length-2)!=="/"&&(u="",l=Rt(b[0],!1),s.push([b[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=Rt(b[0],!1),u+=mj[b[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=Rt(b[0],!1),u+=mj[b[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(b[0].slice(-2)==="/>")break;if(b[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":u+=n.slice(h,b.index);break}else h=b.index+b[0].length;break;case"named-range":o=Rt(b[0],!1),ce=n1(o["cell-range-address"]);var we={Name:o.name,Ref:ce[0]+"!"+ce[1]};fe&&(we.Sheet=v.length),te.Names.push(we);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(b[1]==="/"&&(!R||!R["string-value"])){var Xe=cae(n.slice(k,b.index));j=(j.length>0?j+`
`:"")+Xe[0]}else Rt(b[0],!1),k=b.index+b[0].length;break;case"s":break;case"database-range":if(b[1]==="/")break;try{ce=n1(Rt(b[0])["target-range-address"]),x[ce[0]]["!autofilter"]={ref:ce[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(b[1]!=="/"){if(K=Rt(b[0],!1),!K.href)break;K.Target=rr(K.href),delete K.href,K.Target.charAt(0)=="#"&&K.Target.indexOf(".")>-1?(ce=n1(K.Target.slice(1)),K.Target="#"+ce[0]+"!"+ce[1]):K.Target.match(/^\.\.[\\\/]/)&&(K.Target=K.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(b[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(b)}}var re={Sheets:x,SheetNames:v,Workbook:te};return r.bookSheets&&delete re.Sheets,re}function pj(t,e){e=e||{},Aa(t,"META-INF/manifest.xml")&&LX(vn(t,"META-INF/manifest.xml"),e);var r=oa(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=BR(vr(r),e);return Aa(t,"meta.xml")&&(n.Props=C5(vn(t,"meta.xml"))),n}function xj(t,e){return BR(t,e)}var uae=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Gf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return fn+e}}(),gj=function(){var t=function(i){return gr(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,o,l){var u=[];u.push('      <table:table table:name="'+gr(o.SheetNames[l])+`" table:style-name="ta1">
`);var h=0,f=0,p=Xs(i["!ref"]||"A1"),x=i["!merges"]||[],v=0,w=Array.isArray(i);if(i["!cols"])for(f=0;f<=p.e.c;++f)u.push("        <table:table-column"+(i["!cols"][f]?' table:style-name="co'+i["!cols"][f].ods+'"':"")+`></table:table-column>
`);var b="",_=i["!rows"]||[];for(h=0;h<p.s.r;++h)b=_[h]?' table:style-name="ro'+_[h].ods+'"':"",u.push("        <table:table-row"+b+`></table:table-row>
`);for(;h<=p.e.r;++h){for(b=_[h]?' table:style-name="ro'+_[h].ods+'"':"",u.push("        <table:table-row"+b+`>
`),f=0;f<p.s.c;++f)u.push(e);for(;f<=p.e.c;++f){var R=!1,j={},k="";for(v=0;v!=x.length;++v)if(!(x[v].s.c>f)&&!(x[v].s.r>h)&&!(x[v].e.c<f)&&!(x[v].e.r<h)){(x[v].s.c!=f||x[v].s.r!=h)&&(R=!0),j["table:number-columns-spanned"]=x[v].e.c-x[v].s.c+1,j["table:number-rows-spanned"]=x[v].e.r-x[v].s.r+1;break}if(R){u.push(r);continue}var F=jt({r:h,c:f}),L=w?(i[h]||[])[f]:i[F];if(L&&L.f&&(j["table:formula"]=gr(Cte(L.f)),L.F&&L.F.slice(0,F.length)==F)){var I=Xs(L.F);j["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,j["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!L){u.push(e);continue}switch(L.t){case"b":k=L.v?"TRUE":"FALSE",j["office:value-type"]="boolean",j["office:boolean-value"]=L.v?"true":"false";break;case"n":k=L.w||String(L.v||0),j["office:value-type"]="float",j["office:value"]=L.v||0;break;case"s":case"str":k=L.v==null?"":L.v,j["office:value-type"]="string";break;case"d":k=L.w||Dr(L.v).toISOString(),j["office:value-type"]="date",j["office:date-value"]=Dr(L.v).toISOString(),j["table:style-name"]="ce1";break;default:u.push(e);continue}var N=t(k);if(L.l&&L.l.Target){var T=L.l.Target;T=T.charAt(0)=="#"?"#"+Ite(T.slice(1)):T,T.charAt(0)!="#"&&!T.match(/^\w+:/)&&(T="../"+T),N=rt("text:a",N,{"xlink:href":T.replace(/&/g,"&amp;")})}u.push("          "+rt("table:table-cell",rt("text:p",N,{}),j)+`
`)}u.push(`        </table:table-row>
`)}return u.push(`      </table:table>
`),u.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(h){return o.Sheets[h]}).forEach(function(h){if(h&&h["!cols"]){for(var f=0;f<h["!cols"].length;++f)if(h["!cols"][f]){var p=h["!cols"][f];if(p.width==null&&p.wpx==null&&p.wch==null)continue;Pl(p),p.ods=l;var x=h["!cols"][f].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+x+`"/>
`),i.push(`  </style:style>
`),++l}}});var u=0;o.SheetNames.map(function(h){return o.Sheets[h]}).forEach(function(h){if(h&&h["!rows"]){for(var f=0;f<h["!rows"].length;++f)if(h["!rows"][f]){h["!rows"][f].ods=u;var p=h["!rows"][f].hpx+"px";i.push('  <style:style style:name="ro'+u+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+p+`"/>
`),i.push(`  </style:style>
`),++u}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var u=[fn],h=Gf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=Gf({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(u.push("<office:document"+h+f+`>
`),u.push(A5().replace(/office:document-meta/g,"office:meta"))):u.push("<office:document-content"+h+`>
`),s(u,o),u.push(`  <office:body>
`),u.push(`    <office:spreadsheet>
`);for(var p=0;p!=o.SheetNames.length;++p)u.push(n(o.Sheets[o.SheetNames[p]],o,p));return u.push(`    </office:spreadsheet>
`),u.push(`  </office:body>
`),l.bookType=="fods"?u.push("</office:document>"):u.push("</office:document-content>"),u.join("")}}();function UR(t,e){if(e.bookType=="fods")return gj(t,e);var r=Bb(),n="",s=[],i=[];return n="mimetype",Ut(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Ut(r,n,gj(t,e)),s.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",Ut(r,n,uae(t,e)),s.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",Ut(r,n,fn+A5()),s.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",Ut(r,n,VX(i)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Ut(r,n,OX(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Gc(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function _w(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):vr(Hl(t))}function dae(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):ia(ki(t))}function hae(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function Fl(t){var e=t.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function vj(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function fae(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,s=e+13;s>=e;--s)n=n*256+t[s];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function mae(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var i=0;s>=1;++i,s/=256)t[e+i]=s&255;t[e+15]|=r>=0?0:128}function t0(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function pr(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function rn(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function or(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=t0(t,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var u=r[0];t[r[0]++]>=128;);l=t.slice(u,r[0])}break;case 5:o=4,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=t0(t,r),l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var h={data:l,type:i};e[s]==null?e[s]=[h]:e[s].push(h)}return e}function Xn(t){var e=[];return t.forEach(function(r,n){r.forEach(function(s){s.data&&(e.push(pr(n*8+s.type)),s.type==2&&e.push(pr(s.data.length)),e.push(s.data))})}),Fl(e)}function f_(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function ka(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=t0(t,n),i=or(t.slice(n[0],n[0]+s));n[0]+=s;var o={id:rn(i[1][0].data),messages:[]};i[2].forEach(function(l){var u=or(l.data),h=rn(u[3][0].data);o.messages.push({meta:u,data:t.slice(n[0],n[0]+h)}),n[0]+=h}),(e=i[3])!=null&&e[0]&&(o.merge=rn(i[3][0].data)>>>0>0),r.push(o)}return r}function Wu(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:pr(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:pr(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:pr(o.data.length)}],n[2].push({data:Xn(o.meta),type:2})});var i=Xn(n);e.push(pr(i.length)),e.push(i),s.forEach(function(o){return e.push(o)})}),Fl(e)}function pae(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=t0(e,r),s=[];r[0]<e.length;){var i=e[r[0]]&3;if(i==0){var o=e[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=e[r[0]],l>1&&(o|=e[r[0]+1]<<8),l>2&&(o|=e[r[0]+2]<<16),l>3&&(o|=e[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(e.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var u=0,h=0;if(i==1?(h=(e[r[0]]>>2&7)+4,u=(e[r[0]++]&224)<<3,u|=e[r[0]++]):(h=(e[r[0]++]>>2)+1,i==2?(u=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(u=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Fl(s)],u==0)throw new Error("Invalid offset 0");if(u>s[0].length)throw new Error("Invalid offset beyond length");if(h>=u)for(s.push(s[0].slice(-u)),h-=u;h>=s[s.length-1].length;)s.push(s[s.length-1]),h-=s[s.length-1].length;s.push(s[0].slice(-u,-u+h))}}var f=Fl(s);if(f.length!=n)throw new Error("Unexpected length: ".concat(f.length," != ").concat(n));return f}function Ta(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(pae(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Fl(e)}function qu(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),s=new Uint8Array(4);e.push(s);var i=pr(n),o=i.length;e.push(i),n<=60?(o++,e.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),o+=n,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=n}return Fl(e)}function xae(t,e,r,n){var s=Gc(t),i=s.getUint32(4,!0),o=(n>1?12:8)+vj(i&(n>1?3470:398))*4,l=-1,u=-1,h=NaN,f=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=vj(i&(n>1?12288:4096))*4,i&16&&(u=s.getUint32(o,!0),o+=4),i&32&&(h=s.getFloat64(o,!0),o+=8),i&64&&(f.setTime(f.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var p;switch(t[2]){case 0:break;case 2:p={t:"n",v:h};break;case 3:p={t:"s",v:e[u]};break;case 5:p={t:"d",v:f};break;case 6:p={t:"b",v:h>0};break;case 7:p={t:"n",v:h/86400};break;case 8:p={t:"e",v:0};break;case 9:if(l>-1)p={t:"s",v:r[l]};else if(u>-1)p={t:"s",v:e[u]};else if(!isNaN(h))p={t:"n",v:h};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return p}function gae(t,e,r){var n=Gc(t),s=n.getUint32(8,!0),i=12,o=-1,l=-1,u=NaN,h=NaN,f=new Date(2001,0,1);s&1&&(u=fae(t,i),i+=16),s&2&&(h=n.getFloat64(i,!0),i+=8),s&4&&(f.setTime(f.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=n.getUint32(i,!0),i+=4),s&16&&(o=n.getUint32(i,!0),i+=4);var p;switch(t[1]){case 0:break;case 2:p={t:"n",v:u};break;case 3:p={t:"s",v:e[l]};break;case 5:p={t:"d",v:f};break;case 6:p={t:"b",v:h>0};break;case 7:p={t:"n",v:h/86400};break;case 8:p={t:"e",v:0};break;case 9:if(o>-1)p={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:p={t:"n",v:u};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return p}function a1(t,e){var r=new Uint8Array(32),n=Gc(r),s=12,i=0;switch(r[0]=5,t.t){case"n":r[1]=2,mae(r,s,t.v),i|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,t.v?1:0,!0),i|=2,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(s,e.indexOf(t.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,i,!0),r.slice(0,s)}function i1(t,e){var r=new Uint8Array(32),n=Gc(r),s=12,i=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(s,t.v,!0),i|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,t.v?1:0,!0),i|=32,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(s,e.indexOf(t.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,i,!0),r.slice(0,s)}function vae(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return xae(t,e,r,t[0]);case 5:return gae(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function hs(t){var e=or(t);return t0(e[1][0].data)}function yj(t,e){var r=or(e.data),n=rn(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=or(o.data),u=rn(l[1][0].data)>>>0;switch(n){case 1:i[u]=_w(l[3][0].data);break;case 8:{var h=t[hs(l[9][0].data)][0],f=or(h.data),p=t[hs(f[1][0].data)][0],x=rn(p.meta[1][0].data);if(x!=2001)throw new Error("2000 unexpected reference to ".concat(x));var v=or(p.data);i[u]=v[3].map(function(w){return _w(w.data)}).join("")}break}}),i}function yae(t,e){var r,n,s,i,o,l,u,h,f,p,x,v,w,b,_=or(t),R=rn(_[1][0].data)>>>0,j=rn(_[2][0].data)>>>0,k=((n=(r=_[8])==null?void 0:r[0])==null?void 0:n.data)&&rn(_[8][0].data)>0||!1,F,L;if((i=(s=_[7])==null?void 0:s[0])!=null&&i.data&&e!=0)F=(l=(o=_[7])==null?void 0:o[0])==null?void 0:l.data,L=(h=(u=_[6])==null?void 0:u[0])==null?void 0:h.data;else if((p=(f=_[4])==null?void 0:f[0])!=null&&p.data&&e!=1)F=(v=(x=_[4])==null?void 0:x[0])==null?void 0:v.data,L=(b=(w=_[3])==null?void 0:w[0])==null?void 0:b.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var I=k?4:1,N=Gc(F),T=[],P=0;P<F.length/2;++P){var B=N.getUint16(P*2,!0);B<65535&&T.push([P,B])}if(T.length!=j)throw"Expected ".concat(j," cells, found ").concat(T.length);var z=[];for(P=0;P<T.length-1;++P)z[T[P][0]]=L.subarray(T[P][1]*I,T[P+1][1]*I);return T.length>=1&&(z[T[T.length-1][0]]=L.subarray(T[T.length-1][1]*I)),{R,cells:z}}function wae(t,e){var r,n=or(e.data),s=(r=n==null?void 0:n[7])!=null&&r[0]?rn(n[7][0].data)>>>0>0?1:0:-1,i=f_(n[5],function(o){return yae(o,s)});return{nrows:rn(n[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(u,h){if(o[l.R][h])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(h));o[l.R][h]=u}),o},[])}}function bae(t,e,r){var n,s=or(e.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(rn(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(rn(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=Bt(i);var o=or(s[4][0].data),l=yj(t,t[hs(o[4][0].data)][0]),u=(n=o[17])!=null&&n[0]?yj(t,t[hs(o[17][0].data)][0]):[],h=or(o[3][0].data),f=0;h[1].forEach(function(p){var x=or(p.data),v=t[hs(x[2][0].data)][0],w=rn(v.meta[1][0].data);if(w!=6002)throw new Error("6001 unexpected reference to ".concat(w));var b=wae(t,v);b.data.forEach(function(_,R){_.forEach(function(j,k){var F=jt({r:f+R,c:k}),L=vae(j,l,u);L&&(r[F]=L)})}),f+=b.nrows})}function _ae(t,e){var r=or(e.data),n={"!ref":"A1"},s=t[hs(r[2][0].data)],i=rn(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return bae(t,s[0],n),n}function Nae(t,e){var r,n=or(e.data),s={name:(r=n[1])!=null&&r[0]?_w(n[1][0].data):"",sheets:[]},i=f_(n[2],hs);return i.forEach(function(o){t[o].forEach(function(l){var u=rn(l.meta[1][0].data);u==6e3&&s.sheets.push(_ae(t,l))})}),s}function Eae(t,e){var r=v_(),n=or(e.data),s=f_(n[1],hs);if(s.forEach(function(i){t[i].forEach(function(o){var l=rn(o.meta[1][0].data);if(l==2){var u=Nae(t,o);u.sheets.forEach(function(h,f){y_(r,h,f==0?u.name:u.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function o1(t){var e,r,n,s,i={},o=[];if(t.FullPaths.forEach(function(u){if(u.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(u){if(u.name.match(/\.iwa$/)){var h;try{h=Ta(u.content)}catch(p){return console.log("?? "+u.content.length+" "+(p.message||p))}var f;try{f=ka(h)}catch(p){return console.log("## "+(p.message||p))}f.forEach(function(p){i[p.id]=p.messages,o.push(p.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(n=(r=(e=i==null?void 0:i[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&rn(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(u){i[u].forEach(function(h){var f=rn(h.meta[1][0].data)>>>0;if(f==1)if(!l)l=h;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return Eae(i,l)}function Sae(t,e,r){var n,s,i,o;if(!((n=t[6])!=null&&n[0])||!((s=t[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=t[8])==null?void 0:i[0])==null?void 0:o.data)&&rn(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var u=0,h=Gc(t[7][0].data),f=0,p=[],x=Gc(t[4][0].data),v=0,w=[],b=0;b<e.length;++b){if(e[b]==null){h.setUint16(b*2,65535,!0),x.setUint16(b*2,65535);continue}h.setUint16(b*2,f,!0),x.setUint16(b*2,v,!0);var _,R;switch(typeof e[b]){case"string":_=a1({t:"s",v:e[b]},r),R=i1({t:"s",v:e[b]},r);break;case"number":_=a1({t:"n",v:e[b]},r),R=i1({t:"n",v:e[b]},r);break;case"boolean":_=a1({t:"b",v:e[b]},r),R=i1({t:"b",v:e[b]},r);break;default:throw new Error("Unsupported value "+e[b])}p.push(_),f+=_.length,w.push(R),v+=R.length,++u}for(t[2][0].data=pr(u);b<t[7][0].data.length/2;++b)h.setUint16(b*2,65535,!0),x.setUint16(b*2,65535,!0);return t[6][0].data=Fl(p),t[3][0].data=Fl(w),u}function kae(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Xs(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Bt(n)));var i=Ax(r,{range:n,header:1}),o=["~Sh33tJ5~"];i.forEach(function(X){return X.forEach(function(Y){typeof Y=="string"&&o.push(Y)})});var l={},u=[],h=Nt.read(e.numbers,{type:"base64"});h.FileIndex.map(function(X,Y){return[X,h.FullPaths[Y]]}).forEach(function(X){var Y=X[0],Z=X[1];if(Y.type==2&&Y.name.match(/\.iwa/)){var fe=Y.content,ie=Ta(fe),me=ka(ie);me.forEach(function(pe){u.push(pe.id),l[pe.id]={deps:[],location:Z,type:rn(pe.messages[0].meta[1][0].data)}})}}),u.sort(function(X,Y){return X-Y});var f=u.filter(function(X){return X>1}).map(function(X){return[X,pr(X)]});h.FileIndex.map(function(X,Y){return[X,h.FullPaths[Y]]}).forEach(function(X){var Y=X[0];if(X[1],!!Y.name.match(/\.iwa/)){var Z=ka(Ta(Y.content));Z.forEach(function(fe){fe.messages.forEach(function(ie){f.forEach(function(me){fe.messages.some(function(pe){return rn(pe.meta[1][0].data)!=11006&&hae(pe.data,me[1])})&&l[me[0]].deps.push(fe.id)})})})}});for(var p=Nt.find(h,l[1].location),x=ka(Ta(p.content)),v,w=0;w<x.length;++w){var b=x[w];b.id==1&&(v=b)}var _=hs(or(v.messages[0].data)[1][0].data);for(p=Nt.find(h,l[_].location),x=ka(Ta(p.content)),w=0;w<x.length;++w)b=x[w],b.id==_&&(v=b);for(_=hs(or(v.messages[0].data)[2][0].data),p=Nt.find(h,l[_].location),x=ka(Ta(p.content)),w=0;w<x.length;++w)b=x[w],b.id==_&&(v=b);for(_=hs(or(v.messages[0].data)[2][0].data),p=Nt.find(h,l[_].location),x=ka(Ta(p.content)),w=0;w<x.length;++w)b=x[w],b.id==_&&(v=b);var R=or(v.messages[0].data);{R[6][0].data=pr(n.e.r+1),R[7][0].data=pr(n.e.c+1);var j=hs(R[46][0].data),k=Nt.find(h,l[j].location),F=ka(Ta(k.content));{for(var L=0;L<F.length&&F[L].id!=j;++L);if(F[L].id!=j)throw"Bad ColumnRowUIDMapArchive";var I=or(F[L].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var N=0;N<=n.e.c;++N){var T=[];T[1]=T[2]=[{type:0,data:pr(N+420690)}],I[1].push({type:2,data:Xn(T)}),I[2].push({type:0,data:pr(N)}),I[3].push({type:0,data:pr(N)})}I[4]=[],I[5]=[],I[6]=[];for(var P=0;P<=n.e.r;++P)T=[],T[1]=T[2]=[{type:0,data:pr(P+726270)}],I[4].push({type:2,data:Xn(T)}),I[5].push({type:0,data:pr(P)}),I[6].push({type:0,data:pr(P)});F[L].messages[0].data=Xn(I)}k.content=qu(Wu(F)),k.size=k.content.length,delete R[46];var B=or(R[4][0].data);{B[7][0].data=pr(n.e.r+1);var z=or(B[1][0].data),O=hs(z[2][0].data);k=Nt.find(h,l[O].location),F=ka(Ta(k.content));{if(F[0].id!=O)throw"Bad HeaderStorageBucket";var D=or(F[0].messages[0].data);for(P=0;P<i.length;++P){var G=or(D[2][0].data);G[1][0].data=pr(P),G[4][0].data=pr(i[P].length),D[2][P]={type:D[2][0].type,data:Xn(G)}}F[0].messages[0].data=Xn(D)}k.content=qu(Wu(F)),k.size=k.content.length;var Q=hs(B[2][0].data);k=Nt.find(h,l[Q].location),F=ka(Ta(k.content));{if(F[0].id!=Q)throw"Bad HeaderStorageBucket";for(D=or(F[0].messages[0].data),N=0;N<=n.e.c;++N)G=or(D[2][0].data),G[1][0].data=pr(N),G[4][0].data=pr(n.e.r+1),D[2][N]={type:D[2][0].type,data:Xn(G)};F[0].messages[0].data=Xn(D)}k.content=qu(Wu(F)),k.size=k.content.length;var ue=hs(B[4][0].data);(function(){for(var X=Nt.find(h,l[ue].location),Y=ka(Ta(X.content)),Z,fe=0;fe<Y.length;++fe){var ie=Y[fe];ie.id==ue&&(Z=ie)}var me=or(Z.messages[0].data);{me[3]=[];var pe=[];o.forEach(function(re,Ze){pe[1]=[{type:0,data:pr(Ze)}],pe[2]=[{type:0,data:pr(1)}],pe[3]=[{type:2,data:dae(re)}],me[3].push({type:2,data:Xn(pe)})})}Z.messages[0].data=Xn(me);var we=Wu(Y),Xe=qu(we);X.content=Xe,X.size=X.content.length})();var H=or(B[3][0].data);{var te=H[1][0];delete H[2];var K=or(te.data);{var ce=hs(K[2][0].data);(function(){for(var X=Nt.find(h,l[ce].location),Y=ka(Ta(X.content)),Z,fe=0;fe<Y.length;++fe){var ie=Y[fe];ie.id==ce&&(Z=ie)}var me=or(Z.messages[0].data);{delete me[6],delete H[7];var pe=new Uint8Array(me[5][0].data);me[5]=[];for(var we=0,Xe=0;Xe<=n.e.r;++Xe){var re=or(pe);we+=Sae(re,i[Xe],o),re[1][0].data=pr(Xe),me[5].push({data:Xn(re),type:2})}me[1]=[{type:0,data:pr(n.e.c+1)}],me[2]=[{type:0,data:pr(n.e.r+1)}],me[3]=[{type:0,data:pr(we)}],me[4]=[{type:0,data:pr(n.e.r+1)}]}Z.messages[0].data=Xn(me);var Ze=Wu(Y),Fe=qu(Ze);X.content=Fe,X.size=X.content.length})()}te.data=Xn(K)}B[3][0].data=Xn(H)}R[4][0].data=Xn(B)}v.messages[0].data=Xn(R);var U=Wu(x),M=qu(U);return p.content=M,p.size=p.content.length,h}function zR(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function m_(t){zR([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function p_(t){zR([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function Tae(t){return Gt.WS.indexOf(t)>-1?"sheet":t==Gt.CS?"chart":t==Gt.DS?"dialog":t==Gt.MS?"macro":t&&t.length?t:"sheet"}function jae(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,Tae(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function Aae(t,e,r,n,s,i,o,l,u,h,f,p){try{i[n]=vf(oa(t,r,!0),e);var x=vn(t,e),v;switch(l){case"sheet":v=Qne(x,e,s,u,i[n],h,f,p);break;case"chart":if(v=Jne(x,e,s,u,i[n],h,f,p),!v||!v["!drawel"])break;var w=ef(v["!drawel"].Target,e),b=Xf(w),_=MZ(oa(t,w,!0),vf(oa(t,b,!0),w)),R=ef(_,w),j=Xf(R);v=Sne(oa(t,R,!0),R,u,vf(oa(t,j,!0),R),h,v);break;case"macro":v=Zne(x,e,s,u,i[n],h,f,p);break;case"dialog":v=ese(x,e,s,u,i[n],h,f,p);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=v;var k=[];i&&i[n]&&nn(i[n]).forEach(function(F){var L="";if(i[n][F].Type==Gt.CMNT){L=ef(i[n][F].Target,e);var I=sse(vn(t,L,!0),L,u);if(!I||!I.length)return;sj(v,I,!1)}i[n][F].Type==Gt.TCMNT&&(L=ef(i[n][F].Target,e),k=k.concat(BZ(vn(t,L,!0),u)))}),k&&k.length&&sj(v,k,!0,u.people||[])}catch(F){if(u.WTF)throw F}}function Ea(t){return t.charAt(0)=="/"?t.slice(1):t}function Cae(t,e){if(ah(),e=e||{},m_(e),Aa(t,"META-INF/manifest.xml")||Aa(t,"objectdata.xml"))return pj(t,e);if(Aa(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof o1<"u"){if(t.FileIndex)return o1(t);var r=Nt.utils.cfb_new();return S4(t).forEach(function(G){Ut(r,G,UK(t,G))}),o1(r)}throw new Error("Unsupported NUMBERS file")}if(!Aa(t,"[Content_Types].xml"))throw Aa(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Aa(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=S4(t),s=DX(oa(t,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",vn(t,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!vn(t,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var u={},h={};if(!e.bookSheets&&!e.bookProps){if(yf=[],s.sst)try{yf=nse(vn(t,Ea(s.sst)),s.sst,e)}catch(G){if(e.WTF)throw G}e.cellStyles&&s.themes.length&&(u=rse(oa(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(h=tse(vn(t,Ea(s.style)),s.style,u,e))}s.links.map(function(G){try{var Q=vf(oa(t,Xf(Ea(G))),G);return ise(vn(t,Ea(G)),Q,G,e)}catch{}});var f=Yne(vn(t,Ea(s.workbooks[0])),s.workbooks[0],e),p={},x="";s.coreprops.length&&(x=vn(t,Ea(s.coreprops[0]),!0),x&&(p=C5(x)),s.extprops.length!==0&&(x=vn(t,Ea(s.extprops[0]),!0),x&&UX(x,p,e)));var v={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(x=oa(t,Ea(s.custprops[0]),!0),x&&(v=$X(x,e)));var w={};if((e.bookSheets||e.bookProps)&&(f.Sheets?o=f.Sheets.map(function(Q){return Q.name}):p.Worksheets&&p.SheetNames.length>0&&(o=p.SheetNames),e.bookProps&&(w.Props=p,w.Custprops=v),e.bookSheets&&typeof o<"u"&&(w.SheetNames=o),e.bookSheets?w.SheetNames:e.bookProps))return w;o={};var b={};e.bookDeps&&s.calcchain&&(b=ase(vn(t,Ea(s.calcchain)),s.calcchain));var _=0,R={},j,k;{var F=f.Sheets;p.Worksheets=F.length,p.SheetNames=[];for(var L=0;L!=F.length;++L)p.SheetNames[L]=F[L].name}var I=i?"bin":"xml",N=s.workbooks[0].lastIndexOf("/"),T=(s.workbooks[0].slice(0,N+1)+"_rels/"+s.workbooks[0].slice(N+1)+".rels").replace(/^\//,"");Aa(t,T)||(T="xl/_rels/workbook."+I+".rels");var P=vf(oa(t,T,!0),T.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=ose(vn(t,Ea(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=zZ(vn(t,Ea(s.people[0])),e)),P&&(P=jae(P,f.Sheets));var B=vn(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(_=0;_!=p.Worksheets;++_){var z="sheet";if(P&&P[_]?(j="xl/"+P[_][1].replace(/[\/]?xl\//,""),Aa(t,j)||(j=P[_][1]),Aa(t,j)||(j=T.replace(/_rels\/.*$/,"")+P[_][1]),z=P[_][2]):(j="xl/worksheets/sheet"+(_+1-B)+"."+I,j=j.replace(/sheet0\./,"sheet.")),k=j.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(_!=e.sheets)continue e;break;case"string":if(p.SheetNames[_].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var O=!1,D=0;D!=e.sheets.length;++D)typeof e.sheets[D]=="number"&&e.sheets[D]==_&&(O=1),typeof e.sheets[D]=="string"&&e.sheets[D].toLowerCase()==p.SheetNames[_].toLowerCase()&&(O=1);if(!O)continue e}}Aae(t,j,k,p.SheetNames[_],_,R,o,z,e,f,u,h)}return w={Directory:s,Workbook:f,Props:p,Custprops:v,Deps:b,Sheets:o,SheetNames:p.SheetNames,Strings:yf,Styles:h,Themes:u,SSF:Fr(Tt)},e&&e.bookFiles&&(t.files?(w.keys=n,w.files=t.files):(w.keys=[],w.files={},t.FullPaths.forEach(function(G,Q){G=G.replace(/^Root Entry[\/]/,""),w.keys.push(G),w.files[G]=t.FileIndex[Q]}))),e&&e.bookVBA&&(s.vba.length>0?w.vbaraw=vn(t,Ea(s.vba[0]),!0):s.defaults&&s.defaults.bin===YZ&&(w.vbaraw=vn(t,"xl/vbaProject.bin",!0))),w}function Iae(t,e){var r=e||{},n="Workbook",s=Nt.find(t,n);try{if(n="/!DataSpaces/Version",s=Nt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(oJ(s.content),n="/!DataSpaces/DataSpaceMap",s=Nt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=cJ(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Nt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=uJ(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Nt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);hJ(s.content)}catch{}if(n="/EncryptionInfo",s=Nt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=fJ(s.content);if(n="/EncryptedPackage",s=Nt.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Rae(t,e){return e.bookType=="ods"?UR(t,e):e.bookType=="numbers"?kae(t,e):e.bookType=="xlsb"?Pae(t,e):Dae(t,e)}function Pae(t,e){id=1024,t&&!t.SSF&&(t.SSF=Fr(Tt)),t&&t.SSF&&(ah(),jg(t.SSF),e.revssf=Cg(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,wf?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=pR.indexOf(e.bookType)>-1,s=e_();p_(e=e||{});var i=Bb(),o="",l=0;if(e.cellXfs=[],ql(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Ut(i,o,I5(t.Props,e)),s.coreprops.push(o),xr(e.rels,2,o,Gt.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var u=[],h=0;h<t.SheetNames.length;++h)(t.Workbook.Sheets[h]||{}).Hidden!=2&&u.push(t.SheetNames[h]);t.Props.SheetNames=u}for(t.Props.Worksheets=t.Props.SheetNames.length,Ut(i,o,D5(t.Props)),s.extprops.push(o),xr(e.rels,3,o,Gt.EXT_PROPS),t.Custprops!==t.Props&&nn(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Ut(i,o,F5(t.Custprops)),s.custprops.push(o),xr(e.rels,4,o,Gt.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var f={"!id":{}},p=t.Sheets[t.SheetNames[l-1]],x=(p||{})["!type"]||"sheet";switch(x){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Ut(i,o,cse(l-1,o,e,t,f)),s.sheets.push(o),xr(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Gt.WS[0])}if(p){var v=p["!comments"],w=!1,b="";v&&v.length>0&&(b="xl/comments"+l+"."+r,Ut(i,b,hse(v,b)),s.comments.push(b),xr(f,-1,"../comments"+l+"."+r,Gt.CMNT),w=!0),p["!legacy"]&&w&&Ut(i,"xl/drawings/vmlDrawing"+l+".vml",fR(l,p["!comments"])),delete p["!comments"],delete p["!legacy"]}f["!id"].rId1&&Ut(i,Xf(o),md(f))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,Ut(i,o,dse(e.Strings,o,e)),s.strs.push(o),xr(e.wbrels,-1,"sharedStrings."+r,Gt.SST)),o="xl/workbook."+r,Ut(i,o,lse(t,o)),s.workbooks.push(o),xr(e.rels,1,o,Gt.WB),o="xl/theme/theme1.xml",Ut(i,o,i_(t.Themes,e)),s.themes.push(o),xr(e.wbrels,-1,"theme/theme1.xml",Gt.THEME),o="xl/styles."+r,Ut(i,o,use(t,o,e)),s.styles.push(o),xr(e.wbrels,-1,"styles."+r,Gt.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",Ut(i,o,t.vbaraw),s.vba.push(o),xr(e.wbrels,-1,"vbaProject.bin",Gt.VBA)),o="xl/metadata."+r,Ut(i,o,fse(o)),s.metadata.push(o),xr(e.wbrels,-1,"metadata."+r,Gt.XLMETA),Ut(i,"[Content_Types].xml",j5(s,e)),Ut(i,"_rels/.rels",md(e.rels)),Ut(i,"xl/_rels/workbook."+r+".rels",md(e.wbrels)),delete e.revssf,delete e.ssf,i}function Dae(t,e){id=1024,t&&!t.SSF&&(t.SSF=Fr(Tt)),t&&t.SSF&&(ah(),jg(t.SSF),e.revssf=Cg(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,wf?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=pR.indexOf(e.bookType)>-1,s=e_();p_(e=e||{});var i=Bb(),o="",l=0;if(e.cellXfs=[],ql(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Ut(i,o,I5(t.Props,e)),s.coreprops.push(o),xr(e.rels,2,o,Gt.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var u=[],h=0;h<t.SheetNames.length;++h)(t.Workbook.Sheets[h]||{}).Hidden!=2&&u.push(t.SheetNames[h]);t.Props.SheetNames=u}t.Props.Worksheets=t.Props.SheetNames.length,Ut(i,o,D5(t.Props)),s.extprops.push(o),xr(e.rels,3,o,Gt.EXT_PROPS),t.Custprops!==t.Props&&nn(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Ut(i,o,F5(t.Custprops)),s.custprops.push(o),xr(e.rels,4,o,Gt.CUST_PROPS));var f=["SheetJ5"];for(e.tcid=0,l=1;l<=t.SheetNames.length;++l){var p={"!id":{}},x=t.Sheets[t.SheetNames[l-1]],v=(x||{})["!type"]||"sheet";switch(v){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Ut(i,o,kR(l-1,e,t,p)),s.sheets.push(o),xr(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Gt.WS[0])}if(x){var w=x["!comments"],b=!1,_="";if(w&&w.length>0){var R=!1;w.forEach(function(j){j[1].forEach(function(k){k.T==!0&&(R=!0)})}),R&&(_="xl/threadedComments/threadedComment"+l+"."+r,Ut(i,_,UZ(w,f,e)),s.threadedcomments.push(_),xr(p,-1,"../threadedComments/threadedComment"+l+"."+r,Gt.TCMNT)),_="xl/comments"+l+"."+r,Ut(i,_,mR(w)),s.comments.push(_),xr(p,-1,"../comments"+l+"."+r,Gt.CMNT),b=!0}x["!legacy"]&&b&&Ut(i,"xl/drawings/vmlDrawing"+l+".vml",fR(l,x["!comments"])),delete x["!comments"],delete x["!legacy"]}p["!id"].rId1&&Ut(i,Xf(o),md(p))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,Ut(i,o,tR(e.Strings,e)),s.strs.push(o),xr(e.wbrels,-1,"sharedStrings."+r,Gt.SST)),o="xl/workbook."+r,Ut(i,o,IR(t)),s.workbooks.push(o),xr(e.rels,1,o,Gt.WB),o="xl/theme/theme1.xml",Ut(i,o,i_(t.Themes,e)),s.themes.push(o),xr(e.wbrels,-1,"theme/theme1.xml",Gt.THEME),o="xl/styles."+r,Ut(i,o,cR(t,e)),s.styles.push(o),xr(e.wbrels,-1,"styles."+r,Gt.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",Ut(i,o,t.vbaraw),s.vba.push(o),xr(e.wbrels,-1,"vbaProject.bin",Gt.VBA)),o="xl/metadata."+r,Ut(i,o,hR()),s.metadata.push(o),xr(e.wbrels,-1,"metadata."+r,Gt.XLMETA),f.length>1&&(o="xl/persons/person.xml",Ut(i,o,$Z(f)),s.people.push(o),xr(e.wbrels,-1,"persons/person.xml",Gt.PEOPLE)),Ut(i,"[Content_Types].xml",j5(s,e)),Ut(i,"_rels/.rels",md(e.rels)),Ut(i,"xl/_rels/workbook."+r+".rels",md(e.wbrels)),delete e.revssf,delete e.ssf,i}function x_(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=fa(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Fae(t,e){return Nt.find(t,"EncryptedPackage")?Iae(t,e):FR(t,e)}function Lae(t,e){var r,n=t,s=e||{};return s.type||(s.type=Ht&&Buffer.isBuffer(t)?"buffer":"base64"),r=n5(n,s),Cae(r,s)}function $R(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return ww(t.slice(r),e);default:break e}return Vd.to_workbook(t,e)}function Oae(t,e){var r="",n=x_(t,e);switch(e.type){case"base64":r=fa(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=$c(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=vr(r)),e.type="binary",$R(r,e)}function Mae(t,e){var r=t;return e.type=="base64"&&(r=fa(r)),r=$f.utils.decode(1200,r.slice(2),"str"),e.type="binary",$R(r,e)}function Vae(t){return t.match(/[^\x00-\x7F]/)?ki(t):t}function l1(t,e,r,n){return n?(r.type="string",Vd.to_workbook(t,r)):Vd.to_workbook(e,r)}function Nw(t,e){Fb();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return Nw(new Uint8Array(t),(r=Fr(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),xd={},r.dateNF&&(xd.dateNF=r.dateNF),r.type||(r.type=Ht&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Ht?"buffer":"binary",n=PK(t),typeof Uint8Array<"u"&&!Ht&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=Vae(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Fr(r),r.type="array",Nw(Lb(n),r)}switch((s=x_(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return Fae(Nt.read(n,r),r);break;case 9:if(s[1]<=8)return FR(n,r);break;case 60:return ww(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return HQ(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return Z5.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Lae(n,r):l1(t,n,r,i);case 239:return s[3]===60?ww(n,r):l1(t,n,r,i);case 255:if(s[1]===254)return Mae(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Ac.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Ac.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return yw.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return iR.to_workbook(n,r);break;case 10:case 13:case 32:return Oae(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return $Q.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?yw.to_workbook(n,r):l1(t,n,r,i)}function HR(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return P0(e.file,Nt.write(t,{type:Ht?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Nt.write(t,e)}function Bae(t,e){var r=Fr(e||{}),n=Rae(t,r);return Uae(n,r)}function Uae(t,e){var r={},n=Ht?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var s=t.FullPaths?Nt.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(Tg(s))}return e.password&&typeof encrypt_agile<"u"?HR(encrypt_agile(s,e.password),e):e.type==="file"?P0(e.file,s):e.type=="string"?vr(s):s}function zae(t,e){var r=e||{},n=Vse(t,r);return HR(n,r)}function Ni(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return Hf(ki(n));case"binary":return ki(n);case"string":return t;case"file":return P0(e.file,n,"utf8");case"buffer":return Ht?Ao(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Ni(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function $ae(t,e){switch(e.type){case"base64":return Hf(t);case"binary":return t;case"string":return t;case"file":return P0(e.file,t,"binary");case"buffer":return Ht?Ao(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function wp(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?Hf(r):e.type=="string"?vr(r):r;case"file":return P0(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function WR(t,e){Fb(),Fne(t);var r=Fr(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=WR(t,r);return r.type="array",Tg(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=t.SheetNames.indexOf(r.sheet),!t.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Ni(Rse(t,r),r);case"slk":case"sylk":return Ni(J5.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"htm":case"html":return Ni(OR(t.Sheets[t.SheetNames[s]],r),r);case"txt":return $ae(qR(t.Sheets[t.SheetNames[s]],r),r);case"csv":return Ni(g_(t.Sheets[t.SheetNames[s]],r),r,"\uFEFF");case"dif":return Ni(Z5.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"dbf":return wp(yw.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"prn":return Ni(Vd.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"rtf":return Ni(iR.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"eth":return Ni(eR.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"fods":return Ni(UR(t,r),r);case"wk1":return wp(Ac.sheet_to_wk1(t.Sheets[t.SheetNames[s]],r),r);case"wk3":return wp(Ac.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),wp(LR(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),zae(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Bae(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Hae(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function Wae(t,e,r){var n={};return n.type="file",n.file=e,Hae(n),WR(t,n)}function qae(t,e,r,n,s,i,o,l){var u=hn(r),h=l.defval,f=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),p=!0,x=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(x,"__rowNum__",{value:r,enumerable:!1})}catch{x.__rowNum__=r}else x.__rowNum__=r;if(!o||t[r])for(var v=e.s.c;v<=e.e.c;++v){var w=o?t[r][v]:t[n[v]+u];if(w===void 0||w.t===void 0){if(h===void 0)continue;i[v]!=null&&(x[i[v]]=h);continue}var b=w.v;switch(w.t){case"z":if(b==null)break;continue;case"e":b=b==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+w.t)}if(i[v]!=null){if(b==null)if(w.t=="e"&&b===null)x[i[v]]=null;else if(h!==void 0)x[i[v]]=h;else if(f&&b===null)x[i[v]]=null;else continue;else x[i[v]]=f&&(w.t!=="n"||w.t==="n"&&l.rawNumbers!==!1)?b:Eo(w,b,l);b!=null&&(p=!1)}}return{row:x,isempty:p}}function Ax(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],o=0,l="",u={s:{r:0,c:0},e:{r:0,c:0}},h=e||{},f=h.range!=null?h.range:t["!ref"];switch(h.header===1?n=1:h.header==="A"?n=2:Array.isArray(h.header)?n=3:h.header==null&&(n=0),typeof f){case"string":u=sr(f);break;case"number":u=sr(t["!ref"]),u.s.r=f;break;default:u=f}n>0&&(s=0);var p=hn(u.s.r),x=[],v=[],w=0,b=0,_=Array.isArray(t),R=u.s.r,j=0,k={};_&&!t[R]&&(t[R]=[]);var F=h.skipHidden&&t["!cols"]||[],L=h.skipHidden&&t["!rows"]||[];for(j=u.s.c;j<=u.e.c;++j)if(!(F[j]||{}).hidden)switch(x[j]=qr(j),r=_?t[R][j]:t[x[j]+p],n){case 1:i[j]=j-u.s.c;break;case 2:i[j]=x[j];break;case 3:i[j]=h.header[j-u.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Eo(r,null,h),b=k[o]||0,!b)k[o]=1;else{do l=o+"_"+b++;while(k[l]);k[o]=b,k[l]=1}i[j]=l}for(R=u.s.r+s;R<=u.e.r;++R)if(!(L[R]||{}).hidden){var I=qae(t,u,R,x,n,i,_,h);(I.isempty===!1||(n===1?h.blankrows!==!1:h.blankrows))&&(v[w++]=I.row)}return v.length=w,v}var wj=/"/g;function Gae(t,e,r,n,s,i,o,l){for(var u=!0,h=[],f="",p=hn(r),x=e.s.c;x<=e.e.c;++x)if(n[x]){var v=l.dense?(t[r]||[])[x]:t[n[x]+p];if(v==null)f="";else if(v.v!=null){u=!1,f=""+(l.rawNumbers&&v.t=="n"?v.v:Eo(v,null,l));for(var w=0,b=0;w!==f.length;++w)if((b=f.charCodeAt(w))===s||b===i||b===34||l.forceQuotes){f='"'+f.replace(wj,'""')+'"';break}f=="ID"&&(f='"ID"')}else v.f!=null&&!v.F?(u=!1,f="="+v.f,f.indexOf(",")>=0&&(f='"'+f.replace(wj,'""')+'"')):f="";h.push(f)}return l.blankrows===!1&&u?null:h.join(o)}function g_(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=sr(t["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,u=l.charCodeAt(0),h=new RegExp((i=="|"?"\\|":i)+"+$"),f="",p=[];n.dense=Array.isArray(t);for(var x=n.skipHidden&&t["!cols"]||[],v=n.skipHidden&&t["!rows"]||[],w=s.s.c;w<=s.e.c;++w)(x[w]||{}).hidden||(p[w]=qr(w));for(var b=0,_=s.s.r;_<=s.e.r;++_)(v[_]||{}).hidden||(f=Gae(t,s,_,p,o,u,i,n),f!=null&&(n.strip&&(f=f.replace(h,"")),(f||n.blankrows!==!1)&&r.push((b++?l:"")+f)));return delete n.dense,r.join("")}function qR(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=g_(t,e);return r}function Kae(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=sr(t["!ref"]),i="",o=[],l,u=[],h=Array.isArray(t);for(l=s.s.c;l<=s.e.c;++l)o[l]=qr(l);for(var f=s.s.r;f<=s.e.r;++f)for(i=hn(f),l=s.s.c;l<=s.e.c;++l)if(e=o[l]+i,r=h?(t[f]||[])[l]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}u[u.length]=e+"="+n}return u}function GR(t,e,r){var n=r||{},s=+!n.skipHeader,i=t||{},o=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var u=typeof n.origin=="string"?Gr(n.origin):n.origin;o=u.r,l=u.c}var h,f={s:{c:0,r:0},e:{c:l,r:o+e.length-1+s}};if(i["!ref"]){var p=sr(i["!ref"]);f.e.c=Math.max(f.e.c,p.e.c),f.e.r=Math.max(f.e.r,p.e.r),o==-1&&(o=p.e.r+1,f.e.r=o+e.length-1+s)}else o==-1&&(o=0,f.e.r=e.length-1+s);var x=n.header||[],v=0;e.forEach(function(b,_){nn(b).forEach(function(R){(v=x.indexOf(R))==-1&&(x[v=x.length]=R);var j=b[R],k="z",F="",L=jt({c:l+v,r:o+_+s});h=r0(i,L),j&&typeof j=="object"&&!(j instanceof Date)?i[L]=j:(typeof j=="number"?k="n":typeof j=="boolean"?k="b":typeof j=="string"?k="s":j instanceof Date?(k="d",n.cellDates||(k="n",j=An(j)),F=n.dateNF||Tt[14]):j===null&&n.nullError&&(k="e",j=0),h?(h.t=k,h.v=j,delete h.w,delete h.R,F&&(h.z=F)):i[L]=h={t:k,v:j},F&&(h.z=F))})}),f.e.c=Math.max(f.e.c,l+x.length-1);var w=hn(o);if(s)for(v=0;v<x.length;++v)i[qr(v+l)+w]={t:"s",v:x[v]};return i["!ref"]=Bt(f),i}function Xae(t,e){return GR(null,t,e)}function r0(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Gr(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?r0(t,jt(e)):r0(t,jt({r:e,c:r||0}))}function Yae(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function v_(){return{SheetNames:[],Sheets:{}}}function y_(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=o+s)!=-1;++s);}if(CR(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Qae(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=Yae(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Jae(t,e){return t.z=e,t}function KR(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Zae(t,e,r){return KR(t,"#"+e,r)}function eie(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function tie(t,e,r,n){for(var s=typeof e!="string"?e:sr(e),i=typeof e=="string"?e:Bt(e),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var u=r0(t,o,l);u.t="n",u.F=i,delete u.v,o==s.s.r&&l==s.s.c&&(u.f=r,n&&(u.D=!0))}return t}var bp={encode_col:qr,encode_row:hn,encode_cell:jt,encode_range:Bt,decode_col:Kb,decode_row:Gb,split_cell:dX,decode_cell:Gr,decode_range:Xs,format_cell:Eo,sheet_add_aoa:b5,sheet_add_json:GR,sheet_add_dom:MR,aoa_to_sheet:ih,json_to_sheet:Xae,table_to_sheet:VR,table_to_book:oae,sheet_to_csv:g_,sheet_to_txt:qR,sheet_to_json:Ax,sheet_to_html:OR,sheet_to_formulae:Kae,sheet_to_row_object_array:Ax,sheet_get_cell:r0,book_new:v_,book_append_sheet:y_,book_set_sheet_visibility:Qae,cell_set_number_format:Jae,cell_set_hyperlink:KR,cell_set_internal_link:Zae,cell_add_comment:eie,sheet_set_array_formula:tie,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const XR=()=>{const[t,e]=S.useState(null),[r,n]=S.useState({}),[s,i]=S.useState(0),[o,l]=S.useState(!1),[u,h]=S.useState(null),[f,p]=S.useState([]),[x,v]=S.useState([]),w={email:"",firstName:"",lastName:"",age:"",sex:"",role:"student"},b=["email","firstName","lastName"],_=async O=>{try{const D=`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,G=R(),Q=O.role||"student",ue={uid:D,email:O.email.toLowerCase(),displayName:`${O.firstName} ${O.lastName}`,role:Q,firstName:O.firstName,lastName:O.lastName,age:O.age?parseInt(O.age):null,sex:O.sex||null,password:G,hasFirebaseAuth:!1,isActive:!0,createdAt:Ft(),lastLogin:null,lastActivityDate:Ft(),updatedAt:Ft()};return Q==="student"?(ue.progress={1:{completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date}},ue.completedLessons=[],ue.currentLesson=1,ue.totalTimeSpent=0,ue.totalPagesEngaged=0,ue.achievements=[],ue.streak=0):Q==="teacher"?(ue.teacherClasses=[],ue.teacherPermissions=["manage_students","view_analytics","add_comments"],ue.teacherSettings={defaultClassId:null,notificationPreferences:{emailNotifications:!0,studentProgressAlerts:!0,classUpdates:!0}}):Q==="system_manager"&&(ue.systemManagerPermissions=["manage_users","manage_content","manage_system","view_logs","import_data","export_data"],ue.systemManagerSettings={defaultLanguage:"he",notificationPreferences:{emailNotifications:!0,systemAlerts:!0,userActivityReports:!0}}),await Sn(bt(He,"users",D),ue),Ir("USER_CREATED_VIA_IMPORT",{userId:D,userEmail:O.email,userRole:Q,createdBy:"system_manager",timestamp:new Date().toISOString()}),console.log(" User created via import:",D,"Role:",Q),{success:!0,userId:D,password:G}}catch(D){throw console.error("Error creating user:",D),new Error(j(D))}},R=()=>{const O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let D="";for(let G=0;G<12;G++)D+=O.charAt(Math.floor(Math.random()*O.length));return D},j=O=>O.code==="permission-denied"?"   ":O.message&&O.message.includes("already exists")?"    ":O.message&&O.message.includes("invalid")?"  ":"   ",k=S.useCallback(O=>{const D=O[0];if(!D)return;const G=new FileReader;G.onload=Q=>{try{const ue=Nw(Q.target.result,{type:"binary"}),H=ue.SheetNames[0],te=ue.Sheets[H],K=bp.sheet_to_json(te,{header:1});if(K.length<2){Ie.error("        ");return}const ce=K[0],U=K.slice(1).filter(X=>X.some(Y=>Y!==null&&Y!=="")),M={};ce.forEach((X,Y)=>{const Z=X==null?void 0:X.toString().toLowerCase();Z.includes("email")||Z.includes("")?M.email=Y:Z.includes("first")||Z.includes("")?M.firstName=Y:Z.includes("last")||Z.includes("")?M.lastName=Y:Z.includes("age")||Z.includes("")?M.age=Y:(Z.includes("sex")||Z.includes("gender")||Z.includes(""))&&(M.sex=Y)}),e({headers:ce,rows:U,fileName:D.name}),n(M),v(U.slice(0,5)),p([]),h(null),i(0),Ie.success(`  : ${U.length}  `)}catch(ue){console.error("Error reading Excel file:",ue),Ie.error("   ")}},G.readAsBinaryString(D)},[]),{getRootProps:F,getInputProps:L,isDragActive:I}=V6({onDrop:k,accept:{"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"]},multiple:!1}),N=()=>{if(!t)return!1;const O=[];return t.rows.forEach((D,G)=>{const Q={};if(Object.entries(r).forEach(([ue,H])=>{H!==""&&H!==null&&(Q[ue]=D[H])}),b.forEach(ue=>{(!Q[ue]||Q[ue].toString().trim()==="")&&O.push(` ${G+2}:  ${ue} `)}),Q.email&&!T(Q.email)&&O.push(` ${G+2}:    `),Q.age){const ue=parseInt(Q.age);(isNaN(ue)||ue<5||ue>18)&&O.push(` ${G+2}:    (5-18)`)}if(Q.sex){const ue=Q.sex.toString().toLowerCase();["male","female","","","m","f"].includes(ue)||O.push(` ${G+2}:    `)}}),p(O),O.length===0},T=O=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O),P=async()=>{if(!N()){Ie.error(` ${f.length} .     .`);return}l(!0),i(0);try{const O={total:t.rows.length,success:0,failed:0,errors:[]};for(let D=0;D<t.rows.length;D++){const G=t.rows[D],Q={};Object.entries(r).forEach(([ue,H])=>{H!==""&&H!==null&&(Q[ue]=G[H])});try{await _(Q),O.success++}catch(ue){O.failed++,O.errors.push(` ${D+2}: ${ue.message}`)}i((D+1)/t.rows.length*100)}h(O),O.success>0&&Ie.success(` ${O.success}  `),O.failed>0&&Ie.error(`${O.failed}   `)}catch(O){console.error("Import error:",O),Ie.error("   ")}finally{l(!1)}},B=()=>{e(null),n({}),i(0),l(!1),h(null),p([]),v([])},z=()=>{const O=[["email","firstName","lastName","age","sex"],["student1@example.com","","","12","male"],["student2@example.com","","","11","female"]],D=bp.aoa_to_sheet(O),G=bp.book_new();bp.book_append_sheet(G,D,"Template"),Wae(G,"user_import_template.xlsx")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"   Excel"}),a.jsx("p",{className:"text-gray-300",children:"    Excel"})]}),a.jsxs(ut,{onClick:z,variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(mg,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})]}),a.jsx(it,{variant:"dark",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{...F(),className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ${I?"border-blue-500 bg-blue-500/10":"border-gray-600 hover:border-gray-500"}`,children:[a.jsx("input",{...L()}),t?a.jsxs("div",{children:[a.jsx(jB,{className:"w-12 h-12 mx-auto mb-4 text-green-400"}),a.jsx("p",{className:"text-lg text-white mb-2",children:t.fileName}),a.jsxs("p",{className:"text-gray-400 text-sm",children:[t.rows.length,"  "]})]}):a.jsxs("div",{children:[a.jsx(H2,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-lg text-white mb-2",children:I?"   ":"  Excel    "}),a.jsx("p",{className:"text-gray-400 text-sm",children:"  .xlsx -.xls"})]})]})})}),t&&a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(BB,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(w).map(([O,D])=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-300 text-sm mb-2",children:[O==="email"&&"",O==="firstName"&&" ",O==="lastName"&&" ",O==="age"&&"",O==="sex"&&"",O==="role"&&"",b.includes(O)&&a.jsx("span",{className:"text-red-400",children:"*"})]}),O==="role"?a.jsxs("select",{value:r[O]||D,onChange:G=>n({...r,[O]:G.target.value}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"student",children:""}),a.jsx("option",{value:"teacher",children:""})]}):a.jsxs("select",{value:r[O]||"",onChange:G=>n({...r,[O]:G.target.value}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"",children:" "}),t.headers.map((G,Q)=>a.jsxs("option",{value:Q,children:[G," ( ",Q+1,")"]},Q))]})]},O))})]})}),f.length>0&&a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-red-400 mb-4 flex items-center space-x-2",children:[a.jsx(bs,{className:"w-5 h-5"}),a.jsxs("span",{children:["  (",f.length,")"]})]}),a.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2",children:f.map((O,D)=>a.jsx("div",{className:"text-red-400 text-sm p-2 bg-red-500/10 rounded",children:O},D))})]})}),t&&x.length>0&&a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Pa,{className:"w-5 h-5"}),a.jsx("span",{children:"  (5  )"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsx("tr",{className:"border-b border-gray-700",children:t.headers.map((O,D)=>a.jsx("th",{className:"text-right p-2 text-gray-300",children:O},D))})}),a.jsx("tbody",{children:x.map((O,D)=>a.jsx("tr",{className:"border-b border-gray-700",children:O.map((G,Q)=>a.jsx("td",{className:"p-2 text-gray-300",children:G||"-"},Q))},D))})]})})]})}),o&&a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Ps,{className:"w-5 h-5 animate-spin"}),a.jsx("span",{children:" ..."})]}),a.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mb-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})}),a.jsxs("p",{className:"text-gray-300 text-sm",children:[Math.round(s),"% "]})]})}),u&&a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Qt,{className:"w-5 h-5 text-green-400"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:u.total}),a.jsx("div",{className:"text-gray-300 text-sm",children:'"'})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400",children:u.success}),a.jsx("div",{className:"text-gray-300 text-sm",children:" "})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-400",children:u.failed}),a.jsx("div",{className:"text-gray-300 text-sm",children:""})]})]}),u.errors.length>0&&a.jsxs("div",{className:"max-h-40 overflow-y-auto space-y-2",children:[a.jsx("h4",{className:"text-red-400 font-semibold",children:":"}),u.errors.map((O,D)=>a.jsx("div",{className:"text-red-400 text-sm p-2 bg-red-500/10 rounded",children:O},D))]})]})}),t&&a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(ut,{onClick:P,disabled:o||f.length>0,variant:"primary",className:"flex items-center space-x-2",children:o?a.jsxs(a.Fragment,{children:[a.jsx(Ps,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})}),a.jsxs(ut,{onClick:B,variant:"secondary",className:"flex items-center space-x-2",children:[a.jsx(Wr,{className:"w-4 h-4"}),a.jsx("span",{children:""})]})]})]})},YR=()=>{const[t,e]=S.useState({systemName:"Israel Cyber Campus",defaultLanguage:"he",maintenanceMode:!1,emailNotifications:!0,maxFileSize:10,sessionTimeout:30,theme:"dark",maxUsersPerSession:50,enableLiveSessions:!0,enableAnalytics:!0,securityLevel:"high"}),[r,n]=S.useState(!0),[s,i]=S.useState(!1),[o,l]=S.useState({database:"checking",auth:"checking",storage:"checking",realtime:"checking"});S.useEffect(()=>{u(),h();const x=bt(He,"system","settings"),v=Jd(x,w=>{if(w.exists()){const b=w.data();e(_=>({..._,...b}))}},w=>{console.error("Error listening to settings changes:",w)});return()=>v()},[]);const u=async()=>{try{n(!0),console.log(" Loading system settings from Firebase...");const x=bt(He,"system","settings"),v=await ur(x);if(v.exists()){const w=v.data();e(b=>({...b,...w})),console.log(" Settings loaded from database")}else console.log(" Creating default system settings..."),await Sn(x,t),console.log(" Default settings created")}catch(x){console.error(" Error loading settings:",x),Ie.error("    ")}finally{n(!1)}},h=async()=>{try{console.log(" Checking system status...");try{await ur(bt(He,"system","health")),l(x=>({...x,database:"online"}))}catch{l(v=>({...v,database:"offline"}))}try{await ur(bt(He,"users","health-check")),l(x=>({...x,auth:"online"}))}catch{l(v=>({...v,auth:"online"}))}l(x=>({...x,storage:"online"}));try{const x=bt(He,"system","realtime-test");await Sn(x,{timestamp:new Date}),await ur(x),l(v=>({...v,realtime:"online"}))}catch{l(v=>({...v,realtime:"offline"}))}console.log(" System status check completed")}catch(x){console.error(" Error checking system status:",x)}},f=async()=>{try{i(!0),console.log(" Saving system settings...");const x=bt(He,"system","settings");await Sn(x,{...t,updatedAt:new Date,updatedBy:"system_manager"}),Ie.success("   "),console.log(" Settings saved successfully")}catch(x){console.error(" Error saving settings:",x),Ie.error("    ")}finally{i(!1)}},p=x=>{const v={online:{icon:Qt,color:"text-green-400",text:""},offline:{icon:li,color:"text-red-400",text:" "},checking:{icon:Ps,color:"text-yellow-400",text:"..."}};return v[x]||v.checking};return r?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h2",{className:"text-2xl font-bold text-white",children:" "})}),a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(rs,{size:"lg"})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:" "}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(ut,{onClick:h,variant:"secondary",className:"flex items-center space-x-2",children:[a.jsx(Ps,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]}),a.jsx(ut,{onClick:f,variant:"primary",disabled:s,className:"flex items-center space-x-2",children:s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(eh,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Df,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsx("input",{type:"text",value:t.systemName,onChange:x=>e({...t,systemName:x.target.value}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"  "}),a.jsxs("select",{value:t.defaultLanguage,onChange:x=>e({...t,defaultLanguage:x.target.value}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"he",children:""}),a.jsx("option",{value:"en",children:"English"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsxs("select",{value:t.theme,onChange:x=>e({...t,theme:x.target.value}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"dark",children:""}),a.jsx("option",{value:"light",children:""})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsxs("select",{value:t.securityLevel,onChange:x=>e({...t,securityLevel:x.target.value}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"low",children:""}),a.jsx("option",{value:"medium",children:""}),a.jsx("option",{value:"high",children:""})]})]})]})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(ts,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:" "}),a.jsx("input",{type:"checkbox",checked:t.maintenanceMode,onChange:x=>e({...t,maintenanceMode:x.target.checked}),className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"   ()"}),a.jsx("input",{type:"number",value:t.sessionTimeout,onChange:x=>e({...t,sessionTimeout:parseInt(x.target.value)}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"   (MB)"}),a.jsx("input",{type:"number",value:t.maxFileSize,onChange:x=>e({...t,maxFileSize:parseInt(x.target.value)}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"  "}),a.jsx("input",{type:"number",value:t.maxUsersPerSession,onChange:x=>e({...t,maxUsersPerSession:parseInt(x.target.value)}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"})]})]})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(A3,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:" "}),a.jsx("input",{type:"checkbox",checked:t.emailNotifications,onChange:x=>e({...t,emailNotifications:x.target.checked}),className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:" "}),a.jsx("input",{type:"checkbox",checked:t.enableLiveSessions,onChange:x=>e({...t,enableLiveSessions:x.target.checked}),className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:""}),a.jsx("input",{type:"checkbox",checked:t.enableAnalytics,onChange:x=>e({...t,enableAnalytics:x.target.checked}),className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-500"})]})]})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(fg,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"space-y-4",children:[Object.entries(o).map(([x,v])=>{const w=p(v),b=w.icon;return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300 capitalize",children:x==="database"?" ":x==="auth"?" ":x==="storage"?" ":x==="realtime"?" ":x}),a.jsxs("div",{className:`flex items-center space-x-2 ${w.color}`,children:[a.jsx(b,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:w.text})]})]},x)}),a.jsx("div",{className:"pt-4 border-t border-gray-600",children:a.jsx("div",{className:"text-sm text-gray-400",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Qt,{className:"w-4 h-4 text-green-400"}),a.jsx("span",{children:"  "})]})})})]})]})})]}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(_o,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:" :"}),a.jsx("span",{className:"text-white ml-2",children:t.systemName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:":"}),a.jsx("span",{className:"text-white ml-2",children:t.defaultLanguage==="he"?"":"English"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:" :"}),a.jsx("span",{className:`ml-2 ${t.maintenanceMode?"text-red-400":"text-green-400"}`,children:t.maintenanceMode?"":" "})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:" :"}),a.jsx("span",{className:`ml-2 ${t.enableLiveSessions?"text-green-400":"text-red-400"}`,children:t.enableLiveSessions?"":" "})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:":"}),a.jsx("span",{className:`ml-2 ${t.enableAnalytics?"text-green-400":"text-red-400"}`,children:t.enableAnalytics?"":" "})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:" :"}),a.jsx("span",{className:"text-white ml-2 capitalize",children:t.securityLevel})]})]})]})})]})},QR=()=>{const[t,e]=S.useState([]),[r,n]=S.useState(!0),[s,i]=S.useState("all"),[o,l]=S.useState(""),[u,h]=S.useState(null),[f,p]=S.useState(!0);S.useEffect(()=>{x()},[]);const x=async(j=!1)=>{try{j||n(!0),console.log(" Loading system logs from Firebase...");const k=Dt(He,"securityEvents");let F=nr(k,ca("timestamp","desc"),no(50));j&&u&&(F=nr(k,ca("timestamp","desc"),B1(u),no(50)));const L=await zt(F),I=Dt(He,"userActivities");let N=nr(I,ca("timestamp","desc"),no(50));j&&u&&(N=nr(I,ca("timestamp","desc"),B1(u),no(50)));const T=await zt(N),P=[];L.forEach(O=>{var G,Q;const D=O.data();P.push({id:`security_${O.id}`,type:D.severity||"info",message:D.description||D.event,timestamp:((Q=(G=D.timestamp)==null?void 0:G.toDate)==null?void 0:Q.call(G))||new Date,userId:D.userId||D.userEmail,action:D.eventType||"security_event",source:"security",details:D})}),T.forEach(O=>{var G,Q;const D=O.data();P.push({id:`activity_${O.id}`,type:D.type||"info",message:D.description||D.action,timestamp:((Q=(G=D.timestamp)==null?void 0:G.toDate)==null?void 0:Q.call(G))||new Date,userId:D.userId||D.userEmail,action:D.action||"user_activity",source:"activity",details:D})}),P.sort((O,D)=>D.timestamp-O.timestamp),e(j?O=>[...O,...P]:P);const B=L.docs[L.docs.length-1],z=T.docs[T.docs.length-1];h(B||z),p(L.docs.length===50||T.docs.length===50),console.log(` Loaded ${P.length} system logs`),j||n(!1)}catch(k){console.error(" Error loading system logs:",k),Ie.error("    "),n(!1)}},v=()=>{f&&!r&&x(!0)},w=()=>{h(null),p(!0),x()},b=()=>{try{const j=[["Type","Message","User","Action","Timestamp"],...R.map(I=>[I.type,I.message,I.userId||"System",I.action,I.timestamp.toLocaleString("he-IL")])].map(I=>I.map(N=>`"${N}"`).join(",")).join(`
`),k=new Blob([j],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a"),L=URL.createObjectURL(k);F.setAttribute("href",L),F.setAttribute("download",`system_logs_${new Date().toISOString().split("T")[0]}.csv`),F.style.visibility="hidden",document.body.appendChild(F),F.click(),document.body.removeChild(F),Ie.success("   ")}catch(j){console.error("Error exporting logs:",j),Ie.error("   ")}},_=j=>{const k={info:{icon:Ek,color:"text-blue-400",bgColor:"bg-blue-500/10"},warning:{icon:bs,color:"text-yellow-400",bgColor:"bg-yellow-500/10"},success:{icon:Qt,color:"text-green-400",bgColor:"bg-green-500/10"},error:{icon:li,color:"text-red-400",bgColor:"bg-red-500/10"},security:{icon:ts,color:"text-purple-400",bgColor:"bg-purple-500/10"}};return k[j]||k.info},R=t.filter(j=>{const k=s==="all"||j.type===s,F=j.message.toLowerCase().includes(o.toLowerCase())||j.userId&&j.userId.toLowerCase().includes(o.toLowerCase());return k&&F});return r&&t.length===0?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h2",{className:"text-2xl font-bold text-white",children:" "})}),a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(rs,{size:"lg"})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:" "}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(ut,{onClick:w,variant:"secondary",className:"flex items-center space-x-2",children:[a.jsx(Ps,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsxs(ut,{onClick:b,variant:"secondary",className:"flex items-center space-x-2",children:[a.jsx(mg,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})]})]}),a.jsx(it,{variant:"dark",children:a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:" ...",value:o,onChange:j=>l(j.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none"})]})}),a.jsx("div",{className:"md:w-48",children:a.jsxs("select",{value:s,onChange:j=>i(j.target.value),className:"w-full px-3 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"all",children:" "}),a.jsx("option",{value:"info",children:""}),a.jsx("option",{value:"warning",children:""}),a.jsx("option",{value:"success",children:""}),a.jsx("option",{value:"error",children:""}),a.jsx("option",{value:"security",children:""})]})})]})})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-700",children:[a.jsx("th",{className:"text-right p-4 text-gray-300",children:""}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:""}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:""}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:""}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:""})]})}),a.jsx("tbody",{children:R.map(j=>{const k=_(j.type),F=k.icon;return a.jsxs("tr",{className:"border-b border-gray-700 hover:bg-gray-700/50",children:[a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:`flex items-center space-x-2 ${k.color}`,children:[a.jsx(F,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm capitalize",children:j.type})]})}),a.jsx("td",{className:"p-4",children:a.jsx("div",{className:"text-white text-sm",children:j.message})}),a.jsx("td",{className:"p-4",children:a.jsx("div",{className:"text-gray-300 text-sm",children:j.userId||""})}),a.jsx("td",{className:"p-4",children:a.jsx("div",{className:"text-gray-400 text-sm",children:j.action})}),a.jsx("td",{className:"p-4",children:a.jsx("div",{className:"text-gray-400 text-sm",children:j.timestamp.toLocaleString("he-IL")})})]},j.id)})})]}),R.length===0&&!r&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(TB,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-400",children:"  "})]}),f&&a.jsx("div",{className:"text-center py-4",children:a.jsx(ut,{onClick:v,variant:"secondary",disabled:r,children:r?"...":"  "})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center p-4",children:[a.jsx(Ek,{className:"w-8 h-8 mx-auto mb-2 text-blue-400"}),a.jsx("div",{className:"text-2xl font-bold text-white",children:t.filter(j=>j.type==="info").length}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center p-4",children:[a.jsx(bs,{className:"w-8 h-8 mx-auto mb-2 text-yellow-400"}),a.jsx("div",{className:"text-2xl font-bold text-white",children:t.filter(j=>j.type==="warning").length}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center p-4",children:[a.jsx(Qt,{className:"w-8 h-8 mx-auto mb-2 text-green-400"}),a.jsx("div",{className:"text-2xl font-bold text-white",children:t.filter(j=>j.type==="success").length}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center p-4",children:[a.jsx(li,{className:"w-8 h-8 mx-auto mb-2 text-red-400"}),a.jsx("div",{className:"text-2xl font-bold text-white",children:t.filter(j=>j.type==="error").length}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center p-4",children:[a.jsx(ts,{className:"w-8 h-8 mx-auto mb-2 text-purple-400"}),a.jsx("div",{className:"text-2xl font-bold text-white",children:t.filter(j=>j.type==="security").length}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})})]})]})},rie=()=>{var j,k,F,L,I,N,T,P,B,z,O,D,G,Q,ue,H,te,K,ce;const[t,e]=S.useState(null),[r,n]=S.useState(null),[s,i]=S.useState(null),[o,l]=S.useState(!0),[u,h]=S.useState("7d"),[f,p]=S.useState(!1),[x,v]=S.useState(!1);S.useEffect(()=>{w()},[u]);const w=async()=>{try{l(!0),console.log(" Loading comprehensive analytics...");const[U,M,X]=await Promise.all([T6(!0),Vq(u),Oq()]);e(U),n(M),i(X),console.log(" Analytics loaded successfully")}catch(U){console.error(" Error loading analytics:",U),Ie.error("   ")}finally{l(!1)}},b=async(U="all")=>{var M,X,Y,Z,fe,ie,me;try{v(!0),console.log(" Exporting analytics data...");const pe=await Bq(U),we=[["Metric","Value","Timestamp"],["Total Users",((M=t==null?void 0:t.users)==null?void 0:M.total)||0,new Date().toISOString()],["Active Users",((X=t==null?void 0:t.users)==null?void 0:X.active)||0,new Date().toISOString()],["Total Lessons",((Y=t==null?void 0:t.content)==null?void 0:Y.totalLessons)||0,new Date().toISOString()],["Total Sessions",((Z=t==null?void 0:t.sessions)==null?void 0:Z.total)||0,new Date().toISOString()],["Active Sessions",((fe=t==null?void 0:t.sessions)==null?void 0:fe.active)||0,new Date().toISOString()],["User Growth Rate",`${((ie=t==null?void 0:t.users)==null?void 0:ie.growthRate)||0}%`,new Date().toISOString()],["Session Completion Rate",`${((me=t==null?void 0:t.sessions)==null?void 0:me.completionRate)||0}%`,new Date().toISOString()]].map(Fe=>Fe.map(ge=>`"${ge}"`).join(",")).join(`
`),Xe=new Blob([we],{type:"text/csv;charset=utf-8;"}),re=document.createElement("a"),Ze=URL.createObjectURL(Xe);re.setAttribute("href",Ze),re.setAttribute("download",`system_analytics_${new Date().toISOString().split("T")[0]}.csv`),re.style.visibility="hidden",document.body.appendChild(re),re.click(),document.body.removeChild(re),Ie.success("  ")}catch(pe){console.error(" Error exporting analytics:",pe),Ie.error("   ")}finally{v(!1)}},_=(U,M)=>{if(!M||M===0)return{icon:kk,color:"text-gray-400",text:"  "};const X=(U-M)/M*100;return X>5?{icon:gg,color:"text-green-400",text:`+${X.toFixed(1)}%`}:X<-5?{icon:XB,color:"text-red-400",text:`${X.toFixed(1)}%`}:{icon:kk,color:"text-yellow-400",text:`${X.toFixed(1)}%`}},R=({title:U,value:M,icon:X,trend:Y,color:Z="blue",subtitle:fe})=>{const ie=Y?_(Y.current,Y.previous):null,me=ie==null?void 0:ie.icon;return a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-lg bg-${Z}-500/20 flex items-center justify-center`,children:a.jsx(X,{className:`w-6 h-6 text-${Z}-400`})}),ie&&a.jsxs("div",{className:`flex items-center space-x-2 ${ie.color}`,children:[a.jsx(me,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:ie.text})]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("div",{className:"text-3xl font-bold text-white",children:M}),a.jsx("div",{className:"text-sm text-gray-300",children:U})]}),fe&&a.jsx("div",{className:"text-xs text-gray-400",children:fe})]})})};return o?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h2",{className:"text-2xl font-bold text-white",children:" "})}),a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(rs,{size:"lg"})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:" "}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("select",{value:u,onChange:U=>h(U.target.value),className:"px-3 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"24h",children:"24 "}),a.jsx("option",{value:"7d",children:"7 "}),a.jsx("option",{value:"30d",children:"30 "})]}),a.jsxs(ut,{onClick:w,variant:"secondary",className:"flex items-center space-x-2",children:[a.jsx(Ps,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsx(ut,{onClick:()=>b("all"),variant:"secondary",disabled:x,className:"flex items-center space-x-2",children:x?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(mg,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(R,{title:" ",value:((j=t==null?void 0:t.users)==null?void 0:j.total)||0,icon:Rr,color:"blue",subtitle:`${((k=t==null?void 0:t.users)==null?void 0:k.active)||0} `}),a.jsx(R,{title:"",value:((F=t==null?void 0:t.content)==null?void 0:F.totalLessons)||0,icon:Gs,color:"green",subtitle:`${((L=t==null?void 0:t.content)==null?void 0:L.totalSlides)||0} `}),a.jsx(R,{title:"",value:((I=t==null?void 0:t.sessions)==null?void 0:I.total)||0,icon:jn,color:"purple",subtitle:`${((N=t==null?void 0:t.sessions)==null?void 0:N.active)||0} `}),a.jsx(R,{title:" ",value:((T=t==null?void 0:t.activities)==null?void 0:T.totalToday)||0,icon:bo,color:"orange",subtitle:" "})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(y0,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"  "}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-white font-semibold",children:[((P=t==null?void 0:t.users)==null?void 0:P.growthRate)||0,"%"]}),((B=t==null?void 0:t.users)==null?void 0:B.growthRate)>0?a.jsx(T3,{className:"w-4 h-4 text-green-400"}):a.jsx(yB,{className:"w-4 h-4 text-red-400"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"  "}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-white font-semibold",children:[((z=t==null?void 0:t.sessions)==null?void 0:z.completionRate)||0,"%"]}),a.jsx(Qt,{className:"w-4 h-4 text-green-400"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"  "}),a.jsx("span",{className:"text-white font-semibold",children:((O=t==null?void 0:t.users)==null?void 0:O.newThisWeek)||0})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"  "}),a.jsx("span",{className:"text-white font-semibold",children:((D=t==null?void 0:t.content)==null?void 0:D.averageSlidesPerLesson)||0})]})]})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(ts,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"  "}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-red-400 font-semibold",children:((G=s==null?void 0:s.security)==null?void 0:G.criticalCount)||0}),a.jsx(bs,{className:"w-4 h-4 text-red-400"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:" "}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-yellow-400 font-semibold",children:((Q=s==null?void 0:s.security)==null?void 0:Q.warningCount)||0}),a.jsx(bs,{className:"w-4 h-4 text-yellow-400"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:" "}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`font-semibold ${((ue=t==null?void 0:t.system)==null?void 0:ue.overall)==="healthy"?"text-green-400":"text-yellow-400"}`,children:((H=t==null?void 0:t.system)==null?void 0:H.overall)==="healthy"?"":""}),a.jsx(Qt,{className:"w-4 h-4 text-green-400"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:" "}),a.jsx("span",{className:"text-white font-semibold",children:((te=s==null?void 0:s.sessions)==null?void 0:te.count)||0})]})]})]})})]}),r&&a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Rr,{className:"w-5 h-5"}),a.jsxs("span",{children:["  - ",u==="24h"?"24 ":u==="7d"?"7 ":"30 "]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-400",children:r.users.new}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-400",children:r.activities.total}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-400",children:r.users.byRole.students+r.users.byRole.teachers}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})]}),f&&a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-700",children:[a.jsx("h4",{className:"text-md font-semibold text-white mb-3",children:" "}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(r.activities.byType).map(([U,M])=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg",children:[a.jsx("span",{className:"text-gray-300 capitalize",children:U.replace("_"," ")}),a.jsx("span",{className:"text-white font-semibold",children:M})]},U))})]}),a.jsx("div",{className:"mt-4 text-center",children:a.jsx(ut,{onClick:()=>p(!f),variant:"secondary",size:"sm",className:"flex items-center space-x-2 mx-auto",children:f?a.jsxs(a.Fragment,{children:[a.jsx(F2,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]}):a.jsxs(a.Fragment,{children:[a.jsx(Pa,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})})})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(bo,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"space-y-3",children:(ce=(K=t==null?void 0:t.activities)==null?void 0:K.recent)==null?void 0:ce.slice(0,10).map(U=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${U.type==="error"?"bg-red-400":U.type==="warning"?"bg-yellow-400":U.type==="success"?"bg-green-400":"bg-blue-400"}`}),a.jsx("span",{className:"text-sm text-gray-300",children:U.message})]}),a.jsx("span",{className:"text-xs text-gray-400",children:U.timestamp.toLocaleTimeString("he-IL")})]},U.id))})]})})]})},nie=t=>{const e={blue:"border-blue-500 text-blue-500 hover:bg-blue-500/10",green:"border-green-500 text-green-500 hover:bg-green-500/10",purple:"border-purple-500 text-purple-500 hover:bg-purple-500/10",orange:"border-orange-500 text-orange-500 hover:bg-orange-500/10",gray:"border-gray-500 text-gray-500 hover:bg-gray-500/10",red:"border-red-500 text-red-500 hover:bg-red-500/10"};return e[t]||e.blue},sie=t=>{const e={info:"text-blue-400",warning:"text-yellow-400",error:"text-red-400",success:"text-green-400"};return e[t]||e.info},bj=({stats:t,recentActivities:e,onRefresh:r,isRefreshing:n=!1})=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:" "}),a.jsx("div",{className:"flex space-x-2",children:a.jsx(ut,{variant:"secondary",size:"sm",onClick:r,disabled:n,className:"flex items-center space-x-2",children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ps,{className:"w-4 h-4"}),a.jsx("span",{children:""})]})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Rr,{className:"w-8 h-8 mx-auto mb-2 text-blue-400"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalUsers}),a.jsx("div",{className:"text-sm text-gray-300",children:'" '})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ax,{className:"w-8 h-8 mx-auto mb-2 text-green-400"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalStudents}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ts,{className:"w-8 h-8 mx-auto mb-2 text-purple-400"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalTeachers}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]})}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Gs,{className:"w-8 h-8 mx-auto mb-2 text-orange-400"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalLessons}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]})})]}),a.jsx(it,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(bo,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"space-y-3",children:e.map(s=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${s.severity==="warning"?"bg-yellow-400":s.severity==="error"?"bg-red-400":s.severity==="success"?"bg-green-400":"bg-blue-400"}`}),a.jsx("span",{className:`text-sm ${sie(s.severity)}`,children:s.message})]}),a.jsx("span",{className:"text-xs text-gray-400",children:new Date(s.timestamp).toLocaleTimeString("he-IL")})]},s.id))})]})})]}),aie=()=>{const t=ns(),{currentUser:e,loading:r,role:n}=Fa(),[s,i]=S.useState("overview"),[o,l]=S.useState(!0),[u,h]=S.useState(!1),[f,p]=S.useState({totalUsers:0,totalStudents:0,totalTeachers:0,totalLessons:0}),[x,v]=S.useState([]),[w,b]=S.useState(null),_=[{id:"overview",label:" ",icon:bo,description:"    ",color:"blue"},{id:"analytics",label:"",icon:y0,description:"  ",color:"indigo"},{id:"users",label:" ",icon:Rr,description:",     ",color:"green"},{id:"content",label:" ",icon:_l,description:" ,  ",color:"purple"},{id:"imports",label:" ",icon:H2,description:"   Excel",color:"orange"},{id:"settings",label:" ",icon:_o,description:"   ",color:"gray"},{id:"logs",label:"",icon:fg,description:"  ",color:"red"}];S.useEffect(()=>{r||(async()=>{try{if(console.log(" Checking system manager access...",{currentUser:!!e,authLoading:r,role:n}),r){console.log(" Auth still loading...");return}if(!e){console.log(" No user found, redirecting to login"),Ie.error("      "),t("/login");return}if(n!=="system_manager"){console.log(" User is not a system manager, role:",n),Ie.error("      "),t("/login");return}console.log(" System manager access granted!"),await Ir("system_manager_dashboard_access",{userId:e.uid,role:n,timestamp:new Date().toISOString()}),l(!0),await R(),l(!1)}catch(I){console.error(" Access check or stats load error:",I),Ie.error("      "),t("/login")}})()},[e,n,r,t]),S.useEffect(()=>{if(e&&n==="system_manager"){console.log(" Setting up real-time system monitoring...");const L=Mq(I=>{if(console.log(" Real-time system update received:",I),I.type==="security_events"&&I.data.length>0){const N=I.data.slice(0,3).map(T=>({id:T.id,type:T.severity||"info",message:T.description||T.event,timestamp:T.timestamp,severity:T.severity||"info"}));v(T=>[...N,...T].slice(0,5))}});return()=>{console.log(" Cleaning up real-time monitoring..."),L()}}},[e,n]);const R=async(L=!1)=>{try{L&&h(!0),console.log(" Loading comprehensive system statistics...");const I=await T6(L);p({totalUsers:I.users.total,totalStudents:I.users.students,totalTeachers:I.users.teachers,totalLessons:I.content.totalLessons});const N=I.activities.recent.map(T=>({id:T.id,type:T.type,message:T.message,timestamp:T.timestamp,severity:T.type==="error"?"error":T.type==="warning"?"warning":T.type==="success"?"success":"info"}));v(N.slice(0,5)),console.log(" Comprehensive system statistics loaded successfully"),L&&Ie.success("  ")}catch(I){console.error(" Error loading system stats:",I),Ie.error("    "),p({totalUsers:0,totalStudents:0,totalTeachers:0,totalLessons:0})}finally{L&&h(!1)}},j=()=>{R(!0)},k=L=>{i(L)},F=()=>{switch(s){case"overview":return a.jsx(bj,{stats:f,recentActivities:x,onRefresh:j,isRefreshing:u});case"analytics":return a.jsx(rie,{});case"users":return a.jsx(j6,{});case"content":return a.jsx(eG,{});case"imports":return a.jsx(XR,{});case"settings":return a.jsx(YR,{});case"logs":return a.jsx(QR,{});default:return a.jsx(bj,{stats:f,recentActivities:x,onRefresh:j,isRefreshing:u})}};return o?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx(rs,{size:"lg"})}):a.jsx(G2,{children:a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:a.jsxs("div",{className:"flex h-screen",children:[a.jsx("div",{className:"w-64 bg-gray-800/50 border-r border-gray-700 p-4",children:a.jsx("div",{className:"space-y-2",children:_.map(L=>a.jsxs("button",{onClick:()=>k(L.id),className:`w-full flex items-center space-x-3 p-3 rounded-lg transition-all duration-200 ${s===L.id?"bg-blue-600 text-white shadow-lg":`border border-transparent ${nie(L.color)}`}`,children:[a.jsx(L.icon,{className:"w-5 h-5"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"font-medium",children:L.label}),a.jsx("div",{className:"text-xs opacity-75",children:L.description})]})]},L.id))})}),a.jsx("div",{className:"flex-1 overflow-auto",children:a.jsx("div",{className:"p-6",children:a.jsx(bn,{mode:"wait",children:a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:F()},s)})})})]})})})},iie=()=>{const t=ns(),{currentUser:e,logout:r}=Fa(),n=async()=>{try{await r(),t("/login")}catch(s){console.error("Logout error:",s)}};return a.jsx("nav",{className:"bg-gray-800/50 border-b border-gray-700 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ts,{className:"w-8 h-8 text-blue-400"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-white",children:" "}),a.jsx("p",{className:"text-gray-300 text-sm",children:(e==null?void 0:e.displayName)||(e==null?void 0:e.email)})]})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(ut,{onClick:()=>t("/system-manager/settings"),variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(_o,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsxs(ut,{onClick:()=>t("/system-manager/profile"),variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Di,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsxs(ut,{onClick:n,variant:"danger",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(P3,{className:"w-4 h-4"}),a.jsx("span",{children:""})]})]})]})})},oie=({children:t,requiredRole:e=null})=>{const{currentUser:r,loading:n,role:s}=Fa();return n?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):r?e&&s!==e?a.jsx(Jr,{to:"/",replace:!0}):a.jsx(a.Fragment,{children:t}):a.jsx(Jr,{to:"/login",replace:!0})},eo=({children:t})=>{const{currentUser:e,loading:r,role:n}=Fa();return r?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e?n!=="teacher"?n==="system_manager"?a.jsx(Jr,{to:"/system-manager/dashboard",replace:!0}):a.jsx(Jr,{to:"/student/roadmap",replace:!0}):a.jsx(a.Fragment,{children:t}):a.jsx(Jr,{to:"/login",replace:!0})},$h=({children:t})=>{const{currentUser:e,loading:r,role:n}=Fa();return r?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e?n!=="student"?n==="system_manager"?a.jsx(Jr,{to:"/system-manager/dashboard",replace:!0}):n==="teacher"?a.jsx(Jr,{to:"/teacher/dashboard",replace:!0}):a.jsx(Jr,{to:"/student/roadmap",replace:!0}):a.jsx(a.Fragment,{children:t}):a.jsx(Jr,{to:"/login",replace:!0})},Gu=({children:t})=>{const{currentUser:e,loading:r,role:n}=Fa();return r?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e?n!=="system_manager"?n==="teacher"?a.jsx(Jr,{to:"/teacher/dashboard",replace:!0}):a.jsx(Jr,{to:"/student/roadmap",replace:!0}):a.jsx(a.Fragment,{children:t}):a.jsx(Jr,{to:"/login",replace:!0})},lie=()=>{const{currentUser:t,role:e}=Fa(),r=S.useMemo(()=>t?e==="system_manager"?a.jsx(Jr,{to:"/system-manager/dashboard",replace:!0}):e==="teacher"?a.jsx(Jr,{to:"/teacher/dashboard",replace:!0}):a.jsx(Jr,{to:"/student/roadmap",replace:!0}):a.jsx(IW,{}),[t,e]),n=S.useMemo(()=>t?e==="system_manager"?a.jsx(Jr,{to:"/system-manager/dashboard",replace:!0}):e==="teacher"?a.jsx(Jr,{to:"/teacher/dashboard",replace:!0}):a.jsx(Jr,{to:"/student/roadmap",replace:!0}):a.jsx(Jr,{to:"/login",replace:!0}),[t,e]);return a.jsx(uF,{children:a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:[t&&e==="student"&&a.jsx(k0,{}),t&&e==="student"&&a.jsx(w6,{position:"top-right"}),t&&e==="student"&&a.jsx(BW,{}),t&&e==="teacher"&&a.jsx(Aq,{}),t&&e==="system_manager"&&a.jsx(iie,{}),a.jsxs(nF,{children:[a.jsx(Ar,{path:"/",element:n}),a.jsx(Ar,{path:"/login",element:r}),a.jsx(Ar,{path:"/student",element:a.jsx(oie,{children:a.jsx(Jr,{to:"/student/roadmap",replace:!0})})}),a.jsx(Ar,{path:"/student/roadmap",element:a.jsx($h,{children:a.jsx(sq,{})})}),a.jsx(Ar,{path:"/student/lesson/:lessonId",element:a.jsx($h,{children:a.jsx(kq,{})})}),a.jsx(Ar,{path:"/student/session/:sessionId",element:a.jsx($h,{children:a.jsx(Dq,{})})}),a.jsx(Ar,{path:"/student/profile",element:a.jsx($h,{children:a.jsx(XT,{})})}),a.jsx(Ar,{path:"/student/dashboard",element:a.jsx($h,{children:a.jsx(jq,{})})}),a.jsx(Ar,{path:"/teacher/dashboard",element:a.jsx(eo,{children:a.jsx(Cq,{})})}),a.jsx(Ar,{path:"/teacher/session/create",element:a.jsx(eo,{children:a.jsx(Rq,{})})}),a.jsx(Ar,{path:"/teacher/session/:sessionId",element:a.jsx(eo,{children:a.jsx(Iq,{})})}),a.jsx(Ar,{path:"/teacher/controller/:sessionId",element:a.jsx(eo,{children:a.jsx(Pq,{})})}),a.jsx(Ar,{path:"/teacher/slides",element:a.jsx(eo,{children:a.jsx(E6,{})})}),a.jsx(Ar,{path:"/teacher/profile",element:a.jsx(eo,{children:a.jsx(XT,{})})}),a.jsx(Ar,{path:"/teacher/real-analytics",element:a.jsx(eo,{children:a.jsx(k6,{})})}),a.jsx(Ar,{path:"/teacher/classroom-interface",element:a.jsx(eo,{children:a.jsx(S6,{})})}),a.jsx(Ar,{path:"/teacher/student-pool",element:a.jsx(eo,{children:a.jsx(N6,{})})}),a.jsx(Ar,{path:"/system-manager",element:a.jsx(Gu,{children:a.jsx(Jr,{to:"/system-manager/dashboard",replace:!0})})}),a.jsx(Ar,{path:"/system-manager/dashboard",element:a.jsx(Gu,{children:a.jsx(aie,{})})}),a.jsx(Ar,{path:"/system-manager/users",element:a.jsx(Gu,{children:a.jsx(j6,{})})}),a.jsx(Ar,{path:"/system-manager/imports",element:a.jsx(Gu,{children:a.jsx(XR,{})})}),a.jsx(Ar,{path:"/system-manager/settings",element:a.jsx(Gu,{children:a.jsx(YR,{})})}),a.jsx(Ar,{path:"/system-manager/logs",element:a.jsx(Gu,{children:a.jsx(QR,{})})}),a.jsx(Ar,{path:"*",element:a.jsx(Jr,{to:"/",replace:!0})})]}),a.jsx(n8,{position:"top-center",reverseOrder:!1,gutter:8,containerClassName:"",containerStyle:{},toastOptions:{className:"",duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#4ade80",secondary:"#fff"}},error:{duration:4e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})},cie=()=>a.jsx(G2,{children:a.jsx(pB,{children:a.jsx(lie,{})})});dD.createRoot(document.getElementById("root")).render(a.jsx(cie,{}));
