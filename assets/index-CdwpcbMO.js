var eD=Object.defineProperty;var tD=(t,e,r)=>e in t?eD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var NE=(t,e,r)=>tD(t,typeof e!="symbol"?e+"":e,r);function rD(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function bw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ay={exports:{}},Fh={},iy={exports:{}},qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE;function nD(){if(EE)return qt;EE=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function g(U){return U===null||typeof U!="object"?null:(U=p&&U[p]||U["@@iterator"],typeof U=="function"?U:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function _(U,M,X){this.props=U,this.context=M,this.refs=b,this.updater=X||y}_.prototype.isReactComponent={},_.prototype.setState=function(U,M){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,M,"setState")},_.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function P(){}P.prototype=_.prototype;function A(U,M,X){this.props=U,this.context=M,this.refs=b,this.updater=X||y}var k=A.prototype=new P;k.constructor=A,w(k,_.prototype),k.isPureReactComponent=!0;var F=Array.isArray,L=Object.prototype.hasOwnProperty,I={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function T(U,M,X){var K,Y={},xe=null,le=null;if(M!=null)for(K in M.ref!==void 0&&(le=M.ref),M.key!==void 0&&(xe=""+M.key),M)L.call(M,K)&&!N.hasOwnProperty(K)&&(Y[K]=M[K]);var fe=arguments.length-2;if(fe===1)Y.children=X;else if(1<fe){for(var ve=Array(fe),we=0;we<fe;we++)ve[we]=arguments[we+2];Y.children=ve}if(U&&U.defaultProps)for(K in fe=U.defaultProps,fe)Y[K]===void 0&&(Y[K]=fe[K]);return{$$typeof:t,type:U,key:xe,ref:le,props:Y,_owner:I.current}}function R(U,M){return{$$typeof:t,type:U.type,key:M,ref:U.ref,props:U.props,_owner:U._owner}}function B(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function z(U){var M={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(X){return M[X]})}var O=/\/+/g;function D(U,M){return typeof U=="object"&&U!==null&&U.key!=null?z(""+U.key):M.toString(36)}function ie(U,M,X,K,Y){var xe=typeof U;(xe==="undefined"||xe==="boolean")&&(U=null);var le=!1;if(U===null)le=!0;else switch(xe){case"string":case"number":le=!0;break;case"object":switch(U.$$typeof){case t:case e:le=!0}}if(le)return le=U,Y=Y(le),U=K===""?"."+D(le,0):K,F(Y)?(X="",U!=null&&(X=U.replace(O,"$&/")+"/"),ie(Y,M,X,"",function(we){return we})):Y!=null&&(B(Y)&&(Y=R(Y,X+(!Y.key||le&&le.key===Y.key?"":(""+Y.key).replace(O,"$&/")+"/")+U)),M.push(Y)),1;if(le=0,K=K===""?".":K+":",F(U))for(var fe=0;fe<U.length;fe++){xe=U[fe];var ve=K+D(xe,fe);le+=ie(xe,M,X,ve,Y)}else if(ve=g(U),typeof ve=="function")for(U=ve.call(U),fe=0;!(xe=U.next()).done;)xe=xe.value,ve=K+D(xe,fe++),le+=ie(xe,M,X,ve,Y);else if(xe==="object")throw M=String(U),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return le}function Z(U,M,X){if(U==null)return U;var K=[],Y=0;return ie(U,K,"","",function(xe){return M.call(X,xe,Y++)}),K}function ne(U){if(U._status===-1){var M=U._result;M=M(),M.then(function(X){(U._status===0||U._status===-1)&&(U._status=1,U._result=X)},function(X){(U._status===0||U._status===-1)&&(U._status=2,U._result=X)}),U._status===-1&&(U._status=0,U._result=M)}if(U._status===1)return U._result.default;throw U._result}var H={current:null},Q={transition:null},q={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:Q,ReactCurrentOwner:I};function ae(){throw Error("act(...) is not supported in production builds of React.")}return qt.Children={map:Z,forEach:function(U,M,X){Z(U,function(){M.apply(this,arguments)},X)},count:function(U){var M=0;return Z(U,function(){M++}),M},toArray:function(U){return Z(U,function(M){return M})||[]},only:function(U){if(!B(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},qt.Component=_,qt.Fragment=r,qt.Profiler=s,qt.PureComponent=A,qt.StrictMode=n,qt.Suspense=u,qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,qt.act=ae,qt.cloneElement=function(U,M,X){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var K=w({},U.props),Y=U.key,xe=U.ref,le=U._owner;if(M!=null){if(M.ref!==void 0&&(xe=M.ref,le=I.current),M.key!==void 0&&(Y=""+M.key),U.type&&U.type.defaultProps)var fe=U.type.defaultProps;for(ve in M)L.call(M,ve)&&!N.hasOwnProperty(ve)&&(K[ve]=M[ve]===void 0&&fe!==void 0?fe[ve]:M[ve])}var ve=arguments.length-2;if(ve===1)K.children=X;else if(1<ve){fe=Array(ve);for(var we=0;we<ve;we++)fe[we]=arguments[we+2];K.children=fe}return{$$typeof:t,type:U.type,key:Y,ref:xe,props:K,_owner:le}},qt.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:i,_context:U},U.Consumer=U},qt.createElement=T,qt.createFactory=function(U){var M=T.bind(null,U);return M.type=U,M},qt.createRef=function(){return{current:null}},qt.forwardRef=function(U){return{$$typeof:l,render:U}},qt.isValidElement=B,qt.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:ne}},qt.memo=function(U,M){return{$$typeof:h,type:U,compare:M===void 0?null:M}},qt.startTransition=function(U){var M=Q.transition;Q.transition={};try{U()}finally{Q.transition=M}},qt.unstable_act=ae,qt.useCallback=function(U,M){return H.current.useCallback(U,M)},qt.useContext=function(U){return H.current.useContext(U)},qt.useDebugValue=function(){},qt.useDeferredValue=function(U){return H.current.useDeferredValue(U)},qt.useEffect=function(U,M){return H.current.useEffect(U,M)},qt.useId=function(){return H.current.useId()},qt.useImperativeHandle=function(U,M,X){return H.current.useImperativeHandle(U,M,X)},qt.useInsertionEffect=function(U,M){return H.current.useInsertionEffect(U,M)},qt.useLayoutEffect=function(U,M){return H.current.useLayoutEffect(U,M)},qt.useMemo=function(U,M){return H.current.useMemo(U,M)},qt.useReducer=function(U,M,X){return H.current.useReducer(U,M,X)},qt.useRef=function(U){return H.current.useRef(U)},qt.useState=function(U){return H.current.useState(U)},qt.useSyncExternalStore=function(U,M,X){return H.current.useSyncExternalStore(U,M,X)},qt.useTransition=function(){return H.current.useTransition()},qt.version="18.3.1",qt}var SE;function _w(){return SE||(SE=1,iy.exports=nD()),iy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE;function sD(){if(kE)return Fh;kE=1;var t=_w(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,h){var f,p={},g=null,y=null;h!==void 0&&(g=""+h),u.key!==void 0&&(g=""+u.key),u.ref!==void 0&&(y=u.ref);for(f in u)n.call(u,f)&&!i.hasOwnProperty(f)&&(p[f]=u[f]);if(l&&l.defaultProps)for(f in u=l.defaultProps,u)p[f]===void 0&&(p[f]=u[f]);return{$$typeof:e,type:l,key:g,ref:y,props:p,_owner:s.current}}return Fh.Fragment=r,Fh.jsx=o,Fh.jsxs=o,Fh}var TE;function aD(){return TE||(TE=1,ay.exports=sD()),ay.exports}var a=aD(),Km={},oy={exports:{}},Us={},ly={exports:{}},cy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE;function iD(){return jE||(jE=1,function(t){function e(Q,q){var ae=Q.length;Q.push(q);e:for(;0<ae;){var U=ae-1>>>1,M=Q[U];if(0<s(M,q))Q[U]=q,Q[ae]=M,ae=U;else break e}}function r(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var q=Q[0],ae=Q.pop();if(ae!==q){Q[0]=ae;e:for(var U=0,M=Q.length,X=M>>>1;U<X;){var K=2*(U+1)-1,Y=Q[K],xe=K+1,le=Q[xe];if(0>s(Y,ae))xe<M&&0>s(le,Y)?(Q[U]=le,Q[xe]=ae,U=xe):(Q[U]=Y,Q[K]=ae,U=K);else if(xe<M&&0>s(le,ae))Q[U]=le,Q[xe]=ae,U=xe;else break e}}return q}function s(Q,q){var ae=Q.sortIndex-q.sortIndex;return ae!==0?ae:Q.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,p=null,g=3,y=!1,w=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(Q){for(var q=r(h);q!==null;){if(q.callback===null)n(h);else if(q.startTime<=Q)n(h),q.sortIndex=q.expirationTime,e(u,q);else break;q=r(h)}}function F(Q){if(b=!1,k(Q),!w)if(r(u)!==null)w=!0,ne(L);else{var q=r(h);q!==null&&H(F,q.startTime-Q)}}function L(Q,q){w=!1,b&&(b=!1,P(T),T=-1),y=!0;var ae=g;try{for(k(q),p=r(u);p!==null&&(!(p.expirationTime>q)||Q&&!z());){var U=p.callback;if(typeof U=="function"){p.callback=null,g=p.priorityLevel;var M=U(p.expirationTime<=q);q=t.unstable_now(),typeof M=="function"?p.callback=M:p===r(u)&&n(u),k(q)}else n(u);p=r(u)}if(p!==null)var X=!0;else{var K=r(h);K!==null&&H(F,K.startTime-q),X=!1}return X}finally{p=null,g=ae,y=!1}}var I=!1,N=null,T=-1,R=5,B=-1;function z(){return!(t.unstable_now()-B<R)}function O(){if(N!==null){var Q=t.unstable_now();B=Q;var q=!0;try{q=N(!0,Q)}finally{q?D():(I=!1,N=null)}}else I=!1}var D;if(typeof A=="function")D=function(){A(O)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Z=ie.port2;ie.port1.onmessage=O,D=function(){Z.postMessage(null)}}else D=function(){_(O,0)};function ne(Q){N=Q,I||(I=!0,D())}function H(Q,q){T=_(function(){Q(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,ne(L))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(Q){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var ae=g;g=q;try{return Q()}finally{g=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,q){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ae=g;g=Q;try{return q()}finally{g=ae}},t.unstable_scheduleCallback=function(Q,q,ae){var U=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?U+ae:U):ae=U,Q){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ae+M,Q={id:f++,callback:q,priorityLevel:Q,startTime:ae,expirationTime:M,sortIndex:-1},ae>U?(Q.sortIndex=ae,e(h,Q),r(u)===null&&Q===r(h)&&(b?(P(T),T=-1):b=!0,H(F,ae-U))):(Q.sortIndex=M,e(u,Q),w||y||(w=!0,ne(L))),Q},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(Q){var q=g;return function(){var ae=g;g=q;try{return Q.apply(this,arguments)}finally{g=ae}}}}(cy)),cy}var AE;function oD(){return AE||(AE=1,ly.exports=iD()),ly.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE;function lD(){if(CE)return Us;CE=1;var t=_w(),e=oD();function r(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,m=1;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(c,d){o(c,d),o(c+"Capture",d)}function o(c,d){for(s[c]=d,c=0;c<d.length;c++)n.add(d[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(c){return u.call(p,c)?!0:u.call(f,c)?!1:h.test(c)?p[c]=!0:(f[c]=!0,!1)}function y(c,d,m,v){if(m!==null&&m.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return v?!1:m!==null?!m.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function w(c,d,m,v){if(d===null||typeof d>"u"||y(c,d,m,v))return!0;if(v)return!1;if(m!==null)switch(m.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function b(c,d,m,v,E,C,W){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=v,this.attributeNamespace=E,this.mustUseProperty=m,this.propertyName=c,this.type=d,this.sanitizeURL=C,this.removeEmptyString=W}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){_[c]=new b(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var d=c[0];_[d]=new b(d,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){_[c]=new b(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){_[c]=new b(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){_[c]=new b(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){_[c]=new b(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){_[c]=new b(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){_[c]=new b(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){_[c]=new b(c,5,!1,c.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function A(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var d=c.replace(P,A);_[d]=new b(d,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var d=c.replace(P,A);_[d]=new b(d,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var d=c.replace(P,A);_[d]=new b(d,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){_[c]=new b(c,1,!1,c.toLowerCase(),null,!1,!1)}),_.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){_[c]=new b(c,1,!1,c.toLowerCase(),null,!0,!0)});function k(c,d,m,v){var E=_.hasOwnProperty(d)?_[d]:null;(E!==null?E.type!==0:v||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(w(d,m,E,v)&&(m=null),v||E===null?g(d)&&(m===null?c.removeAttribute(d):c.setAttribute(d,""+m)):E.mustUseProperty?c[E.propertyName]=m===null?E.type===3?!1:"":m:(d=E.attributeName,v=E.attributeNamespace,m===null?c.removeAttribute(d):(E=E.type,m=E===3||E===4&&m===!0?"":""+m,v?c.setAttributeNS(v,d,m):c.setAttribute(d,m))))}var F=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),I=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),z=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),Q=Symbol.iterator;function q(c){return c===null||typeof c!="object"?null:(c=Q&&c[Q]||c["@@iterator"],typeof c=="function"?c:null)}var ae=Object.assign,U;function M(c){if(U===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);U=d&&d[1]||""}return`
`+U+c}var X=!1;function K(c,d){if(!c||X)return"";X=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Ae){var v=Ae}Reflect.construct(c,[],d)}else{try{d.call()}catch(Ae){v=Ae}c.call(d.prototype)}else{try{throw Error()}catch(Ae){v=Ae}c()}}catch(Ae){if(Ae&&v&&typeof Ae.stack=="string"){for(var E=Ae.stack.split(`
`),C=v.stack.split(`
`),W=E.length-1,de=C.length-1;1<=W&&0<=de&&E[W]!==C[de];)de--;for(;1<=W&&0<=de;W--,de--)if(E[W]!==C[de]){if(W!==1||de!==1)do if(W--,de--,0>de||E[W]!==C[de]){var ge=`
`+E[W].replace(" at new "," at ");return c.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",c.displayName)),ge}while(1<=W&&0<=de);break}}}finally{X=!1,Error.prepareStackTrace=m}return(c=c?c.displayName||c.name:"")?M(c):""}function Y(c){switch(c.tag){case 5:return M(c.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return c=K(c.type,!1),c;case 11:return c=K(c.type.render,!1),c;case 1:return c=K(c.type,!0),c;default:return""}}function xe(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case N:return"Fragment";case I:return"Portal";case R:return"Profiler";case T:return"StrictMode";case D:return"Suspense";case ie:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case z:return(c.displayName||"Context")+".Consumer";case B:return(c._context.displayName||"Context")+".Provider";case O:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Z:return d=c.displayName||null,d!==null?d:xe(c.type)||"Memo";case ne:d=c._payload,c=c._init;try{return xe(c(d))}catch{}}return null}function le(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(d);case 8:return d===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function fe(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function ve(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function we(c){var d=ve(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),v=""+c[d];if(!c.hasOwnProperty(d)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,C=m.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return E.call(this)},set:function(W){v=""+W,C.call(this,W)}}),Object.defineProperty(c,d,{enumerable:m.enumerable}),{getValue:function(){return v},setValue:function(W){v=""+W},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function We(c){c._valueTracker||(c._valueTracker=we(c))}function re(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var m=d.getValue(),v="";return c&&(v=ve(c)?c.checked?"true":"false":c.value),c=v,c!==m?(d.setValue(c),!0):!1}function st(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Re(c,d){var m=d.checked;return ae({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??c._wrapperState.initialChecked})}function he(c,d){var m=d.defaultValue==null?"":d.defaultValue,v=d.checked!=null?d.checked:d.defaultChecked;m=fe(d.value!=null?d.value:m),c._wrapperState={initialChecked:v,initialValue:m,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function me(c,d){d=d.checked,d!=null&&k(c,"checked",d,!1)}function ee(c,d){me(c,d);var m=fe(d.value),v=d.type;if(m!=null)v==="number"?(m===0&&c.value===""||c.value!=m)&&(c.value=""+m):c.value!==""+m&&(c.value=""+m);else if(v==="submit"||v==="reset"){c.removeAttribute("value");return}d.hasOwnProperty("value")?Ce(c,d.type,m):d.hasOwnProperty("defaultValue")&&Ce(c,d.type,fe(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(c.defaultChecked=!!d.defaultChecked)}function pe(c,d,m){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var v=d.type;if(!(v!=="submit"&&v!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+c._wrapperState.initialValue,m||d===c.value||(c.value=d),c.defaultValue=d}m=c.name,m!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,m!==""&&(c.name=m)}function Ce(c,d,m){(d!=="number"||st(c.ownerDocument)!==c)&&(m==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+m&&(c.defaultValue=""+m))}var $e=Array.isArray;function ot(c,d,m,v){if(c=c.options,d){d={};for(var E=0;E<m.length;E++)d["$"+m[E]]=!0;for(m=0;m<c.length;m++)E=d.hasOwnProperty("$"+c[m].value),c[m].selected!==E&&(c[m].selected=E),E&&v&&(c[m].defaultSelected=!0)}else{for(m=""+fe(m),d=null,E=0;E<c.length;E++){if(c[E].value===m){c[E].selected=!0,v&&(c[E].defaultSelected=!0);return}d!==null||c[E].disabled||(d=c[E])}d!==null&&(d.selected=!0)}}function xt(c,d){if(d.dangerouslySetInnerHTML!=null)throw Error(r(91));return ae({},d,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Nt(c,d){var m=d.value;if(m==null){if(m=d.children,d=d.defaultValue,m!=null){if(d!=null)throw Error(r(92));if($e(m)){if(1<m.length)throw Error(r(93));m=m[0]}d=m}d==null&&(d=""),m=d}c._wrapperState={initialValue:fe(m)}}function Me(c,d){var m=fe(d.value),v=fe(d.defaultValue);m!=null&&(m=""+m,m!==c.value&&(c.value=m),d.defaultValue==null&&c.defaultValue!==m&&(c.defaultValue=m)),v!=null&&(c.defaultValue=""+v)}function be(c){var d=c.textContent;d===c._wrapperState.initialValue&&d!==""&&d!==null&&(c.value=d)}function Pe(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(c,d){return c==null||c==="http://www.w3.org/1999/xhtml"?Pe(d):c==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var ct,Bt=function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,m,v,E){MSApp.execUnsafeLocalFunction(function(){return c(d,m,v,E)})}:c}(function(c,d){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=d;else{for(ct=ct||document.createElement("div"),ct.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=ct.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;d.firstChild;)c.appendChild(d.firstChild)}});function it(c,d){if(d){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=d;return}}c.textContent=d}var kt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},er=["Webkit","ms","Moz","O"];Object.keys(kt).forEach(function(c){er.forEach(function(d){d=d+c.charAt(0).toUpperCase()+c.substring(1),kt[d]=kt[c]})});function lr(c,d,m){return d==null||typeof d=="boolean"||d===""?"":m||typeof d!="number"||d===0||kt.hasOwnProperty(c)&&kt[c]?(""+d).trim():d+"px"}function un(c,d){c=c.style;for(var m in d)if(d.hasOwnProperty(m)){var v=m.indexOf("--")===0,E=lr(m,d[m],v);m==="float"&&(m="cssFloat"),v?c.setProperty(m,E):c[m]=E}}var Is=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xs(c,d){if(d){if(Is[c]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(r(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(r(61))}if(d.style!=null&&typeof d.style!="object")throw Error(r(62))}}function Ps(c,d){if(c.indexOf("-")===-1)return typeof d.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vn=null;function Rs(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var pa=null,mt=null,Wt=null;function ur(c){if(c=wh(c)){if(typeof pa!="function")throw Error(r(280));var d=c.stateNode;d&&(d=cm(d),pa(c.stateNode,c.type,d))}}function Er(c){mt?Wt?Wt.push(c):Wt=[c]:mt=c}function Tn(){if(mt){var c=mt,d=Wt;if(Wt=mt=null,ur(c),d)for(c=0;c<d.length;c++)ur(d[c])}}function Bn(c,d){return c(d)}function ql(){}var Ma=!1;function Gl(c,d,m){if(Ma)return c(d,m);Ma=!0;try{return Bn(c,d,m)}finally{Ma=!1,(mt!==null||Wt!==null)&&(ql(),Tn())}}function Or(c,d){var m=c.stateNode;if(m===null)return null;var v=cm(m);if(v===null)return null;m=v[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(c=c.type,v=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!v;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(r(231,d,typeof m));return m}var Po=!1;if(l)try{var _s={};Object.defineProperty(_s,"passive",{get:function(){Po=!0}}),window.addEventListener("test",_s,_s),window.removeEventListener("test",_s,_s)}catch{Po=!1}function Mi(c,d,m,v,E,C,W,de,ge){var Ae=Array.prototype.slice.call(arguments,3);try{d.apply(m,Ae)}catch(qe){this.onError(qe)}}var Vi=!1,Ro=null,G=!1,oe=null,te={onError:function(c){Vi=!0,Ro=c}};function se(c,d,m,v,E,C,W,de,ge){Vi=!1,Ro=null,Mi.apply(te,arguments)}function ce(c,d,m,v,E,C,W,de,ge){if(se.apply(this,arguments),Vi){if(Vi){var Ae=Ro;Vi=!1,Ro=null}else throw Error(r(198));G||(G=!0,oe=Ae)}}function ue(c){var d=c,m=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(m=d.return),c=d.return;while(c)}return d.tag===3?m:null}function Ee(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function Fe(c){if(ue(c)!==c)throw Error(r(188))}function Se(c){var d=c.alternate;if(!d){if(d=ue(c),d===null)throw Error(r(188));return d!==c?null:c}for(var m=c,v=d;;){var E=m.return;if(E===null)break;var C=E.alternate;if(C===null){if(v=E.return,v!==null){m=v;continue}break}if(E.child===C.child){for(C=E.child;C;){if(C===m)return Fe(E),c;if(C===v)return Fe(E),d;C=C.sibling}throw Error(r(188))}if(m.return!==v.return)m=E,v=C;else{for(var W=!1,de=E.child;de;){if(de===m){W=!0,m=E,v=C;break}if(de===v){W=!0,v=E,m=C;break}de=de.sibling}if(!W){for(de=C.child;de;){if(de===m){W=!0,m=C,v=E;break}if(de===v){W=!0,v=C,m=E;break}de=de.sibling}if(!W)throw Error(r(189))}}if(m.alternate!==v)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?c:d}function Te(c){return c=Se(c),c!==null?je(c):null}function je(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=je(c);if(d!==null)return d;c=c.sibling}return null}var Ge=e.unstable_scheduleCallback,et=e.unstable_cancelCallback,dt=e.unstable_shouldYield,Qe=e.unstable_requestPaint,Xe=e.unstable_now,Pt=e.unstable_getCurrentPriorityLevel,cr=e.unstable_ImmediatePriority,ar=e.unstable_UserBlockingPriority,fr=e.unstable_NormalPriority,Va=e.unstable_LowPriority,ui=e.unstable_IdlePriority,Ys=null,tn=null;function Do(c){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Ys,c,void 0,(c.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:U0,sh=Math.log,B0=Math.LN2;function U0(c){return c>>>=0,c===0?32:31-(sh(c)/B0|0)|0}var cu=64,uu=4194304;function Fo(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Kl(c,d){var m=c.pendingLanes;if(m===0)return 0;var v=0,E=c.suspendedLanes,C=c.pingedLanes,W=m&268435455;if(W!==0){var de=W&~E;de!==0?v=Fo(de):(C&=W,C!==0&&(v=Fo(C)))}else W=m&~E,W!==0?v=Fo(W):C!==0&&(v=Fo(C));if(v===0)return 0;if(d!==0&&d!==v&&(d&E)===0&&(E=v&-v,C=d&-d,E>=C||E===16&&(C&4194240)!==0))return d;if((v&4)!==0&&(v|=m&16),d=c.entangledLanes,d!==0)for(c=c.entanglements,d&=v;0<d;)m=31-Sr(d),E=1<<m,v|=c[m],d&=~E;return v}function Fx(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bi(c,d){for(var m=c.suspendedLanes,v=c.pingedLanes,E=c.expirationTimes,C=c.pendingLanes;0<C;){var W=31-Sr(C),de=1<<W,ge=E[W];ge===-1?((de&m)===0||(de&v)!==0)&&(E[W]=Fx(de,d)):ge<=d&&(c.expiredLanes|=de),C&=~de}}function Qs(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Xl(){var c=cu;return cu<<=1,(cu&4194240)===0&&(cu=64),c}function Lo(c){for(var d=[],m=0;31>m;m++)d.push(c);return d}function Oo(c,d,m){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,d=31-Sr(d),c[d]=m}function wr(c,d){var m=c.pendingLanes&~d;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=d,c.mutableReadLanes&=d,c.entangledLanes&=d,d=c.entanglements;var v=c.eventTimes;for(c=c.expirationTimes;0<m;){var E=31-Sr(m),C=1<<E;d[E]=0,v[E]=-1,c[E]=-1,m&=~C}}function Mo(c,d){var m=c.entangledLanes|=d;for(c=c.entanglements;m;){var v=31-Sr(m),E=1<<v;E&d|c[v]&d&&(c[v]|=d),m&=~E}}var Yt=0;function Vo(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var z0,du,$0,H0,W0,ah=!1,di=[],Un=null,Ba=null,Ua=null,Bo=new Map,ga=new Map,hi=[],Lx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function q0(c,d){switch(c){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":Ua=null;break;case"pointerover":case"pointerout":Bo.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":ga.delete(d.pointerId)}}function Ds(c,d,m,v,E,C){return c===null||c.nativeEvent!==C?(c={blockedOn:d,domEventName:m,eventSystemFlags:v,nativeEvent:C,targetContainers:[E]},d!==null&&(d=wh(d),d!==null&&du(d)),c):(c.eventSystemFlags|=v,d=c.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),c)}function Ox(c,d,m,v,E){switch(d){case"focusin":return Un=Ds(Un,c,d,m,v,E),!0;case"dragenter":return Ba=Ds(Ba,c,d,m,v,E),!0;case"mouseover":return Ua=Ds(Ua,c,d,m,v,E),!0;case"pointerover":var C=E.pointerId;return Bo.set(C,Ds(Bo.get(C)||null,c,d,m,v,E)),!0;case"gotpointercapture":return C=E.pointerId,ga.set(C,Ds(ga.get(C)||null,c,d,m,v,E)),!0}return!1}function G0(c){var d=ec(c.target);if(d!==null){var m=ue(d);if(m!==null){if(d=m.tag,d===13){if(d=Ee(m),d!==null){c.blockedOn=d,W0(c.priority,function(){$0(m)});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Ui(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var m=hu(c.domEventName,c.eventSystemFlags,d[0],c.nativeEvent);if(m===null){m=c.nativeEvent;var v=new m.constructor(m.type,m);Vn=v,m.target.dispatchEvent(v),Vn=null}else return d=wh(m),d!==null&&du(d),c.blockedOn=m,!1;d.shift()}return!0}function Yl(c,d,m){Ui(c)&&m.delete(d)}function K0(){ah=!1,Un!==null&&Ui(Un)&&(Un=null),Ba!==null&&Ui(Ba)&&(Ba=null),Ua!==null&&Ui(Ua)&&(Ua=null),Bo.forEach(Yl),ga.forEach(Yl)}function za(c,d){c.blockedOn===d&&(c.blockedOn=null,ah||(ah=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,K0)))}function $a(c){function d(E){return za(E,c)}if(0<di.length){za(di[0],c);for(var m=1;m<di.length;m++){var v=di[m];v.blockedOn===c&&(v.blockedOn=null)}}for(Un!==null&&za(Un,c),Ba!==null&&za(Ba,c),Ua!==null&&za(Ua,c),Bo.forEach(d),ga.forEach(d),m=0;m<hi.length;m++)v=hi[m],v.blockedOn===c&&(v.blockedOn=null);for(;0<hi.length&&(m=hi[0],m.blockedOn===null);)G0(m),m.blockedOn===null&&hi.shift()}var zi=F.ReactCurrentBatchConfig,Uo=!0;function Fr(c,d,m,v){var E=Yt,C=zi.transition;zi.transition=null;try{Yt=1,ih(c,d,m,v)}finally{Yt=E,zi.transition=C}}function Mx(c,d,m,v){var E=Yt,C=zi.transition;zi.transition=null;try{Yt=4,ih(c,d,m,v)}finally{Yt=E,zi.transition=C}}function ih(c,d,m,v){if(Uo){var E=hu(c,d,m,v);if(E===null)Xx(c,d,v,Ql,m),q0(c,v);else if(Ox(E,c,d,m,v))v.stopPropagation();else if(q0(c,v),d&4&&-1<Lx.indexOf(c)){for(;E!==null;){var C=wh(E);if(C!==null&&z0(C),C=hu(c,d,m,v),C===null&&Xx(c,d,v,Ql,m),C===E)break;E=C}E!==null&&v.stopPropagation()}else Xx(c,d,v,null,m)}}var Ql=null;function hu(c,d,m,v){if(Ql=null,c=Rs(v),c=ec(c),c!==null)if(d=ue(c),d===null)c=null;else if(m=d.tag,m===13){if(c=Ee(d),c!==null)return c;c=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null);return Ql=c,null}function oh(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pt()){case cr:return 1;case ar:return 4;case fr:case Va:return 16;case ui:return 536870912;default:return 16}default:return 16}}var Js=null,fu=null,Fs=null;function lh(){if(Fs)return Fs;var c,d=fu,m=d.length,v,E="value"in Js?Js.value:Js.textContent,C=E.length;for(c=0;c<m&&d[c]===E[c];c++);var W=m-c;for(v=1;v<=W&&d[m-v]===E[C-v];v++);return Fs=E.slice(c,1<v?1-v:void 0)}function mu(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function fi(){return!0}function ch(){return!1}function zn(c){function d(m,v,E,C,W){this._reactName=m,this._targetInst=E,this.type=v,this.nativeEvent=C,this.target=W,this.currentTarget=null;for(var de in c)c.hasOwnProperty(de)&&(m=c[de],this[de]=m?m(C):C[de]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?fi:ch,this.isPropagationStopped=ch,this}return ae(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=fi)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=fi)},persist:function(){},isPersistent:fi}),d}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pu=zn(Ha),mi=ae({},Ha,{view:0,detail:0}),Vx=zn(mi),gu,$i,zo,Jl=ae({},mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pi,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==zo&&(zo&&c.type==="mousemove"?(gu=c.screenX-zo.screenX,$i=c.screenY-zo.screenY):$i=gu=0,zo=c),gu)},movementY:function(c){return"movementY"in c?c.movementY:$i}}),xu=zn(Jl),uh=ae({},Jl,{dataTransfer:0}),X0=zn(uh),vu=ae({},mi,{relatedTarget:0}),yu=zn(vu),Y0=ae({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),Hi=zn(Y0),Q0=ae({},Ha,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),J0=zn(Q0),Z0=ae({},Ha,{data:0}),dh=zn(Z0),wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ns={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},em={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tm(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=em[c])?!!d[c]:!1}function pi(){return tm}var x=ae({},mi,{key:function(c){if(c.key){var d=wu[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=mu(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Ns[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pi,charCode:function(c){return c.type==="keypress"?mu(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?mu(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),j=zn(x),V=ae({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),J=zn(V),_e=ae({},mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pi}),De=zn(_e),nt=ae({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),mr=zn(nt),yn=ae({},Jl,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Jt=zn(yn),jn=[9,13,27,32],dn=l&&"CompositionEvent"in window,xa=null;l&&"documentMode"in document&&(xa=document.documentMode);var Zs=l&&"TextEvent"in window&&!xa,Zl=l&&(!dn||xa&&8<xa&&11>=xa),bu=" ",x_=!1;function v_(c,d){switch(c){case"keyup":return jn.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y_(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var _u=!1;function QP(c,d){switch(c){case"compositionend":return y_(d);case"keypress":return d.which!==32?null:(x_=!0,bu);case"textInput":return c=d.data,c===bu&&x_?null:c;default:return null}}function JP(c,d){if(_u)return c==="compositionend"||!dn&&v_(c,d)?(c=lh(),Fs=fu=Js=null,_u=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Zl&&d.locale!=="ko"?null:d.data;default:return null}}var ZP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w_(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!ZP[c.type]:d==="textarea"}function b_(c,d,m,v){Er(v),d=im(d,"onChange"),0<d.length&&(m=new pu("onChange","change",null,m,v),c.push({event:m,listeners:d}))}var hh=null,fh=null;function eR(c){V_(c,0)}function rm(c){var d=Tu(c);if(re(d))return c}function tR(c,d){if(c==="change")return d}var __=!1;if(l){var Bx;if(l){var Ux="oninput"in document;if(!Ux){var N_=document.createElement("div");N_.setAttribute("oninput","return;"),Ux=typeof N_.oninput=="function"}Bx=Ux}else Bx=!1;__=Bx&&(!document.documentMode||9<document.documentMode)}function E_(){hh&&(hh.detachEvent("onpropertychange",S_),fh=hh=null)}function S_(c){if(c.propertyName==="value"&&rm(fh)){var d=[];b_(d,fh,c,Rs(c)),Gl(eR,d)}}function rR(c,d,m){c==="focusin"?(E_(),hh=d,fh=m,hh.attachEvent("onpropertychange",S_)):c==="focusout"&&E_()}function nR(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return rm(fh)}function sR(c,d){if(c==="click")return rm(d)}function aR(c,d){if(c==="input"||c==="change")return rm(d)}function iR(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var Wa=typeof Object.is=="function"?Object.is:iR;function mh(c,d){if(Wa(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var m=Object.keys(c),v=Object.keys(d);if(m.length!==v.length)return!1;for(v=0;v<m.length;v++){var E=m[v];if(!u.call(d,E)||!Wa(c[E],d[E]))return!1}return!0}function k_(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function T_(c,d){var m=k_(c);c=0;for(var v;m;){if(m.nodeType===3){if(v=c+m.textContent.length,c<=d&&v>=d)return{node:m,offset:d-c};c=v}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=k_(m)}}function j_(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?j_(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function A_(){for(var c=window,d=st();d instanceof c.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)c=d.contentWindow;else break;d=st(c.document)}return d}function zx(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}function oR(c){var d=A_(),m=c.focusedElem,v=c.selectionRange;if(d!==m&&m&&m.ownerDocument&&j_(m.ownerDocument.documentElement,m)){if(v!==null&&zx(m)){if(d=v.start,c=v.end,c===void 0&&(c=d),"selectionStart"in m)m.selectionStart=d,m.selectionEnd=Math.min(c,m.value.length);else if(c=(d=m.ownerDocument||document)&&d.defaultView||window,c.getSelection){c=c.getSelection();var E=m.textContent.length,C=Math.min(v.start,E);v=v.end===void 0?C:Math.min(v.end,E),!c.extend&&C>v&&(E=v,v=C,C=E),E=T_(m,C);var W=T_(m,v);E&&W&&(c.rangeCount!==1||c.anchorNode!==E.node||c.anchorOffset!==E.offset||c.focusNode!==W.node||c.focusOffset!==W.offset)&&(d=d.createRange(),d.setStart(E.node,E.offset),c.removeAllRanges(),C>v?(c.addRange(d),c.extend(W.node,W.offset)):(d.setEnd(W.node,W.offset),c.addRange(d)))}}for(d=[],c=m;c=c.parentNode;)c.nodeType===1&&d.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<d.length;m++)c=d[m],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var lR=l&&"documentMode"in document&&11>=document.documentMode,Nu=null,$x=null,ph=null,Hx=!1;function C_(c,d,m){var v=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Hx||Nu==null||Nu!==st(v)||(v=Nu,"selectionStart"in v&&zx(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),ph&&mh(ph,v)||(ph=v,v=im($x,"onSelect"),0<v.length&&(d=new pu("onSelect","select",null,d,m),c.push({event:d,listeners:v}),d.target=Nu)))}function nm(c,d){var m={};return m[c.toLowerCase()]=d.toLowerCase(),m["Webkit"+c]="webkit"+d,m["Moz"+c]="moz"+d,m}var Eu={animationend:nm("Animation","AnimationEnd"),animationiteration:nm("Animation","AnimationIteration"),animationstart:nm("Animation","AnimationStart"),transitionend:nm("Transition","TransitionEnd")},Wx={},I_={};l&&(I_=document.createElement("div").style,"AnimationEvent"in window||(delete Eu.animationend.animation,delete Eu.animationiteration.animation,delete Eu.animationstart.animation),"TransitionEvent"in window||delete Eu.transitionend.transition);function sm(c){if(Wx[c])return Wx[c];if(!Eu[c])return c;var d=Eu[c],m;for(m in d)if(d.hasOwnProperty(m)&&m in I_)return Wx[c]=d[m];return c}var P_=sm("animationend"),R_=sm("animationiteration"),D_=sm("animationstart"),F_=sm("transitionend"),L_=new Map,O_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $o(c,d){L_.set(c,d),i(d,[c])}for(var qx=0;qx<O_.length;qx++){var Gx=O_[qx],cR=Gx.toLowerCase(),uR=Gx[0].toUpperCase()+Gx.slice(1);$o(cR,"on"+uR)}$o(P_,"onAnimationEnd"),$o(R_,"onAnimationIteration"),$o(D_,"onAnimationStart"),$o("dblclick","onDoubleClick"),$o("focusin","onFocus"),$o("focusout","onBlur"),$o(F_,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dR=new Set("cancel close invalid load scroll toggle".split(" ").concat(gh));function M_(c,d,m){var v=c.type||"unknown-event";c.currentTarget=m,ce(v,d,void 0,c),c.currentTarget=null}function V_(c,d){d=(d&4)!==0;for(var m=0;m<c.length;m++){var v=c[m],E=v.event;v=v.listeners;e:{var C=void 0;if(d)for(var W=v.length-1;0<=W;W--){var de=v[W],ge=de.instance,Ae=de.currentTarget;if(de=de.listener,ge!==C&&E.isPropagationStopped())break e;M_(E,de,Ae),C=ge}else for(W=0;W<v.length;W++){if(de=v[W],ge=de.instance,Ae=de.currentTarget,de=de.listener,ge!==C&&E.isPropagationStopped())break e;M_(E,de,Ae),C=ge}}}if(G)throw c=oe,G=!1,oe=null,c}function kr(c,d){var m=d[tv];m===void 0&&(m=d[tv]=new Set);var v=c+"__bubble";m.has(v)||(B_(d,c,2,!1),m.add(v))}function Kx(c,d,m){var v=0;d&&(v|=4),B_(m,c,v,d)}var am="_reactListening"+Math.random().toString(36).slice(2);function xh(c){if(!c[am]){c[am]=!0,n.forEach(function(m){m!=="selectionchange"&&(dR.has(m)||Kx(m,!1,c),Kx(m,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[am]||(d[am]=!0,Kx("selectionchange",!1,d))}}function B_(c,d,m,v){switch(oh(d)){case 1:var E=Fr;break;case 4:E=Mx;break;default:E=ih}m=E.bind(null,d,m,c),E=void 0,!Po||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),v?E!==void 0?c.addEventListener(d,m,{capture:!0,passive:E}):c.addEventListener(d,m,!0):E!==void 0?c.addEventListener(d,m,{passive:E}):c.addEventListener(d,m,!1)}function Xx(c,d,m,v,E){var C=v;if((d&1)===0&&(d&2)===0&&v!==null)e:for(;;){if(v===null)return;var W=v.tag;if(W===3||W===4){var de=v.stateNode.containerInfo;if(de===E||de.nodeType===8&&de.parentNode===E)break;if(W===4)for(W=v.return;W!==null;){var ge=W.tag;if((ge===3||ge===4)&&(ge=W.stateNode.containerInfo,ge===E||ge.nodeType===8&&ge.parentNode===E))return;W=W.return}for(;de!==null;){if(W=ec(de),W===null)return;if(ge=W.tag,ge===5||ge===6){v=C=W;continue e}de=de.parentNode}}v=v.return}Gl(function(){var Ae=C,qe=Rs(m),Ye=[];e:{var He=L_.get(c);if(He!==void 0){var ht=pu,gt=c;switch(c){case"keypress":if(mu(m)===0)break e;case"keydown":case"keyup":ht=j;break;case"focusin":gt="focus",ht=yu;break;case"focusout":gt="blur",ht=yu;break;case"beforeblur":case"afterblur":ht=yu;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=xu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=X0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=De;break;case P_:case R_:case D_:ht=Hi;break;case F_:ht=mr;break;case"scroll":ht=Vx;break;case"wheel":ht=Jt;break;case"copy":case"cut":case"paste":ht=J0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=J}var vt=(d&4)!==0,rn=!vt&&c==="scroll",Ne=vt?He!==null?He+"Capture":null:He;vt=[];for(var ye=Ae,ke;ye!==null;){ke=ye;var Je=ke.stateNode;if(ke.tag===5&&Je!==null&&(ke=Je,Ne!==null&&(Je=Or(ye,Ne),Je!=null&&vt.push(vh(ye,Je,ke)))),rn)break;ye=ye.return}0<vt.length&&(He=new ht(He,gt,null,m,qe),Ye.push({event:He,listeners:vt}))}}if((d&7)===0){e:{if(He=c==="mouseover"||c==="pointerover",ht=c==="mouseout"||c==="pointerout",He&&m!==Vn&&(gt=m.relatedTarget||m.fromElement)&&(ec(gt)||gt[Wi]))break e;if((ht||He)&&(He=qe.window===qe?qe:(He=qe.ownerDocument)?He.defaultView||He.parentWindow:window,ht?(gt=m.relatedTarget||m.toElement,ht=Ae,gt=gt?ec(gt):null,gt!==null&&(rn=ue(gt),gt!==rn||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(ht=null,gt=Ae),ht!==gt)){if(vt=xu,Je="onMouseLeave",Ne="onMouseEnter",ye="mouse",(c==="pointerout"||c==="pointerover")&&(vt=J,Je="onPointerLeave",Ne="onPointerEnter",ye="pointer"),rn=ht==null?He:Tu(ht),ke=gt==null?He:Tu(gt),He=new vt(Je,ye+"leave",ht,m,qe),He.target=rn,He.relatedTarget=ke,Je=null,ec(qe)===Ae&&(vt=new vt(Ne,ye+"enter",gt,m,qe),vt.target=ke,vt.relatedTarget=rn,Je=vt),rn=Je,ht&&gt)t:{for(vt=ht,Ne=gt,ye=0,ke=vt;ke;ke=Su(ke))ye++;for(ke=0,Je=Ne;Je;Je=Su(Je))ke++;for(;0<ye-ke;)vt=Su(vt),ye--;for(;0<ke-ye;)Ne=Su(Ne),ke--;for(;ye--;){if(vt===Ne||Ne!==null&&vt===Ne.alternate)break t;vt=Su(vt),Ne=Su(Ne)}vt=null}else vt=null;ht!==null&&U_(Ye,He,ht,vt,!1),gt!==null&&rn!==null&&U_(Ye,rn,gt,vt,!0)}}e:{if(He=Ae?Tu(Ae):window,ht=He.nodeName&&He.nodeName.toLowerCase(),ht==="select"||ht==="input"&&He.type==="file")var yt=tR;else if(w_(He))if(__)yt=aR;else{yt=nR;var Et=rR}else(ht=He.nodeName)&&ht.toLowerCase()==="input"&&(He.type==="checkbox"||He.type==="radio")&&(yt=sR);if(yt&&(yt=yt(c,Ae))){b_(Ye,yt,m,qe);break e}Et&&Et(c,He,Ae),c==="focusout"&&(Et=He._wrapperState)&&Et.controlled&&He.type==="number"&&Ce(He,"number",He.value)}switch(Et=Ae?Tu(Ae):window,c){case"focusin":(w_(Et)||Et.contentEditable==="true")&&(Nu=Et,$x=Ae,ph=null);break;case"focusout":ph=$x=Nu=null;break;case"mousedown":Hx=!0;break;case"contextmenu":case"mouseup":case"dragend":Hx=!1,C_(Ye,m,qe);break;case"selectionchange":if(lR)break;case"keydown":case"keyup":C_(Ye,m,qe)}var St;if(dn)e:{switch(c){case"compositionstart":var Dt="onCompositionStart";break e;case"compositionend":Dt="onCompositionEnd";break e;case"compositionupdate":Dt="onCompositionUpdate";break e}Dt=void 0}else _u?v_(c,m)&&(Dt="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(Dt="onCompositionStart");Dt&&(Zl&&m.locale!=="ko"&&(_u||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&_u&&(St=lh()):(Js=qe,fu="value"in Js?Js.value:Js.textContent,_u=!0)),Et=im(Ae,Dt),0<Et.length&&(Dt=new dh(Dt,c,null,m,qe),Ye.push({event:Dt,listeners:Et}),St?Dt.data=St:(St=y_(m),St!==null&&(Dt.data=St)))),(St=Zs?QP(c,m):JP(c,m))&&(Ae=im(Ae,"onBeforeInput"),0<Ae.length&&(qe=new dh("onBeforeInput","beforeinput",null,m,qe),Ye.push({event:qe,listeners:Ae}),qe.data=St))}V_(Ye,d)})}function vh(c,d,m){return{instance:c,listener:d,currentTarget:m}}function im(c,d){for(var m=d+"Capture",v=[];c!==null;){var E=c,C=E.stateNode;E.tag===5&&C!==null&&(E=C,C=Or(c,m),C!=null&&v.unshift(vh(c,C,E)),C=Or(c,d),C!=null&&v.push(vh(c,C,E))),c=c.return}return v}function Su(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function U_(c,d,m,v,E){for(var C=d._reactName,W=[];m!==null&&m!==v;){var de=m,ge=de.alternate,Ae=de.stateNode;if(ge!==null&&ge===v)break;de.tag===5&&Ae!==null&&(de=Ae,E?(ge=Or(m,C),ge!=null&&W.unshift(vh(m,ge,de))):E||(ge=Or(m,C),ge!=null&&W.push(vh(m,ge,de)))),m=m.return}W.length!==0&&c.push({event:d,listeners:W})}var hR=/\r\n?/g,fR=/\u0000|\uFFFD/g;function z_(c){return(typeof c=="string"?c:""+c).replace(hR,`
`).replace(fR,"")}function om(c,d,m){if(d=z_(d),z_(c)!==d&&m)throw Error(r(425))}function lm(){}var Yx=null,Qx=null;function Jx(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Zx=typeof setTimeout=="function"?setTimeout:void 0,mR=typeof clearTimeout=="function"?clearTimeout:void 0,$_=typeof Promise=="function"?Promise:void 0,pR=typeof queueMicrotask=="function"?queueMicrotask:typeof $_<"u"?function(c){return $_.resolve(null).then(c).catch(gR)}:Zx;function gR(c){setTimeout(function(){throw c})}function ev(c,d){var m=d,v=0;do{var E=m.nextSibling;if(c.removeChild(m),E&&E.nodeType===8)if(m=E.data,m==="/$"){if(v===0){c.removeChild(E),$a(d);return}v--}else m!=="$"&&m!=="$?"&&m!=="$!"||v++;m=E}while(m);$a(d)}function Ho(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return c}function H_(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(d===0)return c;d--}else m==="/$"&&d++}c=c.previousSibling}return null}var ku=Math.random().toString(36).slice(2),gi="__reactFiber$"+ku,yh="__reactProps$"+ku,Wi="__reactContainer$"+ku,tv="__reactEvents$"+ku,xR="__reactListeners$"+ku,vR="__reactHandles$"+ku;function ec(c){var d=c[gi];if(d)return d;for(var m=c.parentNode;m;){if(d=m[Wi]||m[gi]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(c=H_(c);c!==null;){if(m=c[gi])return m;c=H_(c)}return d}c=m,m=c.parentNode}return null}function wh(c){return c=c[gi]||c[Wi],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Tu(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function cm(c){return c[yh]||null}var rv=[],ju=-1;function Wo(c){return{current:c}}function Tr(c){0>ju||(c.current=rv[ju],rv[ju]=null,ju--)}function _r(c,d){ju++,rv[ju]=c.current,c.current=d}var qo={},es=Wo(qo),Ls=Wo(!1),tc=qo;function Au(c,d){var m=c.type.contextTypes;if(!m)return qo;var v=c.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===d)return v.__reactInternalMemoizedMaskedChildContext;var E={},C;for(C in m)E[C]=d[C];return v&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=E),E}function Os(c){return c=c.childContextTypes,c!=null}function um(){Tr(Ls),Tr(es)}function W_(c,d,m){if(es.current!==qo)throw Error(r(168));_r(es,d),_r(Ls,m)}function q_(c,d,m){var v=c.stateNode;if(d=d.childContextTypes,typeof v.getChildContext!="function")return m;v=v.getChildContext();for(var E in v)if(!(E in d))throw Error(r(108,le(c)||"Unknown",E));return ae({},m,v)}function dm(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||qo,tc=es.current,_r(es,c),_r(Ls,Ls.current),!0}function G_(c,d,m){var v=c.stateNode;if(!v)throw Error(r(169));m?(c=q_(c,d,tc),v.__reactInternalMemoizedMergedChildContext=c,Tr(Ls),Tr(es),_r(es,c)):Tr(Ls),_r(Ls,m)}var qi=null,hm=!1,nv=!1;function K_(c){qi===null?qi=[c]:qi.push(c)}function yR(c){hm=!0,K_(c)}function Go(){if(!nv&&qi!==null){nv=!0;var c=0,d=Yt;try{var m=qi;for(Yt=1;c<m.length;c++){var v=m[c];do v=v(!0);while(v!==null)}qi=null,hm=!1}catch(E){throw qi!==null&&(qi=qi.slice(c+1)),Ge(cr,Go),E}finally{Yt=d,nv=!1}}return null}var Cu=[],Iu=0,fm=null,mm=0,va=[],ya=0,rc=null,Gi=1,Ki="";function nc(c,d){Cu[Iu++]=mm,Cu[Iu++]=fm,fm=c,mm=d}function X_(c,d,m){va[ya++]=Gi,va[ya++]=Ki,va[ya++]=rc,rc=c;var v=Gi;c=Ki;var E=32-Sr(v)-1;v&=~(1<<E),m+=1;var C=32-Sr(d)+E;if(30<C){var W=E-E%5;C=(v&(1<<W)-1).toString(32),v>>=W,E-=W,Gi=1<<32-Sr(d)+E|m<<E|v,Ki=C+c}else Gi=1<<C|m<<E|v,Ki=c}function sv(c){c.return!==null&&(nc(c,1),X_(c,1,0))}function av(c){for(;c===fm;)fm=Cu[--Iu],Cu[Iu]=null,mm=Cu[--Iu],Cu[Iu]=null;for(;c===rc;)rc=va[--ya],va[ya]=null,Ki=va[--ya],va[ya]=null,Gi=va[--ya],va[ya]=null}var ea=null,ta=null,Lr=!1,qa=null;function Y_(c,d){var m=Na(5,null,null,0);m.elementType="DELETED",m.stateNode=d,m.return=c,d=c.deletions,d===null?(c.deletions=[m],c.flags|=16):d.push(m)}function Q_(c,d){switch(c.tag){case 5:var m=c.type;return d=d.nodeType!==1||m.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(c.stateNode=d,ea=c,ta=Ho(d.firstChild),!0):!1;case 6:return d=c.pendingProps===""||d.nodeType!==3?null:d,d!==null?(c.stateNode=d,ea=c,ta=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(m=rc!==null?{id:Gi,overflow:Ki}:null,c.memoizedState={dehydrated:d,treeContext:m,retryLane:1073741824},m=Na(18,null,null,0),m.stateNode=d,m.return=c,c.child=m,ea=c,ta=null,!0):!1;default:return!1}}function iv(c){return(c.mode&1)!==0&&(c.flags&128)===0}function ov(c){if(Lr){var d=ta;if(d){var m=d;if(!Q_(c,d)){if(iv(c))throw Error(r(418));d=Ho(m.nextSibling);var v=ea;d&&Q_(c,d)?Y_(v,m):(c.flags=c.flags&-4097|2,Lr=!1,ea=c)}}else{if(iv(c))throw Error(r(418));c.flags=c.flags&-4097|2,Lr=!1,ea=c}}}function J_(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;ea=c}function pm(c){if(c!==ea)return!1;if(!Lr)return J_(c),Lr=!0,!1;var d;if((d=c.tag!==3)&&!(d=c.tag!==5)&&(d=c.type,d=d!=="head"&&d!=="body"&&!Jx(c.type,c.memoizedProps)),d&&(d=ta)){if(iv(c))throw Z_(),Error(r(418));for(;d;)Y_(c,d),d=Ho(d.nextSibling)}if(J_(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="/$"){if(d===0){ta=Ho(c.nextSibling);break e}d--}else m!=="$"&&m!=="$!"&&m!=="$?"||d++}c=c.nextSibling}ta=null}}else ta=ea?Ho(c.stateNode.nextSibling):null;return!0}function Z_(){for(var c=ta;c;)c=Ho(c.nextSibling)}function Pu(){ta=ea=null,Lr=!1}function lv(c){qa===null?qa=[c]:qa.push(c)}var wR=F.ReactCurrentBatchConfig;function bh(c,d,m){if(c=m.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(r(309));var v=m.stateNode}if(!v)throw Error(r(147,c));var E=v,C=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===C?d.ref:(d=function(W){var de=E.refs;W===null?delete de[C]:de[C]=W},d._stringRef=C,d)}if(typeof c!="string")throw Error(r(284));if(!m._owner)throw Error(r(290,c))}return c}function gm(c,d){throw c=Object.prototype.toString.call(d),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function eN(c){var d=c._init;return d(c._payload)}function tN(c){function d(Ne,ye){if(c){var ke=Ne.deletions;ke===null?(Ne.deletions=[ye],Ne.flags|=16):ke.push(ye)}}function m(Ne,ye){if(!c)return null;for(;ye!==null;)d(Ne,ye),ye=ye.sibling;return null}function v(Ne,ye){for(Ne=new Map;ye!==null;)ye.key!==null?Ne.set(ye.key,ye):Ne.set(ye.index,ye),ye=ye.sibling;return Ne}function E(Ne,ye){return Ne=tl(Ne,ye),Ne.index=0,Ne.sibling=null,Ne}function C(Ne,ye,ke){return Ne.index=ke,c?(ke=Ne.alternate,ke!==null?(ke=ke.index,ke<ye?(Ne.flags|=2,ye):ke):(Ne.flags|=2,ye)):(Ne.flags|=1048576,ye)}function W(Ne){return c&&Ne.alternate===null&&(Ne.flags|=2),Ne}function de(Ne,ye,ke,Je){return ye===null||ye.tag!==6?(ye=Zv(ke,Ne.mode,Je),ye.return=Ne,ye):(ye=E(ye,ke),ye.return=Ne,ye)}function ge(Ne,ye,ke,Je){var yt=ke.type;return yt===N?qe(Ne,ye,ke.props.children,Je,ke.key):ye!==null&&(ye.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===ne&&eN(yt)===ye.type)?(Je=E(ye,ke.props),Je.ref=bh(Ne,ye,ke),Je.return=Ne,Je):(Je=Bm(ke.type,ke.key,ke.props,null,Ne.mode,Je),Je.ref=bh(Ne,ye,ke),Je.return=Ne,Je)}function Ae(Ne,ye,ke,Je){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==ke.containerInfo||ye.stateNode.implementation!==ke.implementation?(ye=ey(ke,Ne.mode,Je),ye.return=Ne,ye):(ye=E(ye,ke.children||[]),ye.return=Ne,ye)}function qe(Ne,ye,ke,Je,yt){return ye===null||ye.tag!==7?(ye=dc(ke,Ne.mode,Je,yt),ye.return=Ne,ye):(ye=E(ye,ke),ye.return=Ne,ye)}function Ye(Ne,ye,ke){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return ye=Zv(""+ye,Ne.mode,ke),ye.return=Ne,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case L:return ke=Bm(ye.type,ye.key,ye.props,null,Ne.mode,ke),ke.ref=bh(Ne,null,ye),ke.return=Ne,ke;case I:return ye=ey(ye,Ne.mode,ke),ye.return=Ne,ye;case ne:var Je=ye._init;return Ye(Ne,Je(ye._payload),ke)}if($e(ye)||q(ye))return ye=dc(ye,Ne.mode,ke,null),ye.return=Ne,ye;gm(Ne,ye)}return null}function He(Ne,ye,ke,Je){var yt=ye!==null?ye.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number")return yt!==null?null:de(Ne,ye,""+ke,Je);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case L:return ke.key===yt?ge(Ne,ye,ke,Je):null;case I:return ke.key===yt?Ae(Ne,ye,ke,Je):null;case ne:return yt=ke._init,He(Ne,ye,yt(ke._payload),Je)}if($e(ke)||q(ke))return yt!==null?null:qe(Ne,ye,ke,Je,null);gm(Ne,ke)}return null}function ht(Ne,ye,ke,Je,yt){if(typeof Je=="string"&&Je!==""||typeof Je=="number")return Ne=Ne.get(ke)||null,de(ye,Ne,""+Je,yt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case L:return Ne=Ne.get(Je.key===null?ke:Je.key)||null,ge(ye,Ne,Je,yt);case I:return Ne=Ne.get(Je.key===null?ke:Je.key)||null,Ae(ye,Ne,Je,yt);case ne:var Et=Je._init;return ht(Ne,ye,ke,Et(Je._payload),yt)}if($e(Je)||q(Je))return Ne=Ne.get(ke)||null,qe(ye,Ne,Je,yt,null);gm(ye,Je)}return null}function gt(Ne,ye,ke,Je){for(var yt=null,Et=null,St=ye,Dt=ye=0,In=null;St!==null&&Dt<ke.length;Dt++){St.index>Dt?(In=St,St=null):In=St.sibling;var ir=He(Ne,St,ke[Dt],Je);if(ir===null){St===null&&(St=In);break}c&&St&&ir.alternate===null&&d(Ne,St),ye=C(ir,ye,Dt),Et===null?yt=ir:Et.sibling=ir,Et=ir,St=In}if(Dt===ke.length)return m(Ne,St),Lr&&nc(Ne,Dt),yt;if(St===null){for(;Dt<ke.length;Dt++)St=Ye(Ne,ke[Dt],Je),St!==null&&(ye=C(St,ye,Dt),Et===null?yt=St:Et.sibling=St,Et=St);return Lr&&nc(Ne,Dt),yt}for(St=v(Ne,St);Dt<ke.length;Dt++)In=ht(St,Ne,Dt,ke[Dt],Je),In!==null&&(c&&In.alternate!==null&&St.delete(In.key===null?Dt:In.key),ye=C(In,ye,Dt),Et===null?yt=In:Et.sibling=In,Et=In);return c&&St.forEach(function(rl){return d(Ne,rl)}),Lr&&nc(Ne,Dt),yt}function vt(Ne,ye,ke,Je){var yt=q(ke);if(typeof yt!="function")throw Error(r(150));if(ke=yt.call(ke),ke==null)throw Error(r(151));for(var Et=yt=null,St=ye,Dt=ye=0,In=null,ir=ke.next();St!==null&&!ir.done;Dt++,ir=ke.next()){St.index>Dt?(In=St,St=null):In=St.sibling;var rl=He(Ne,St,ir.value,Je);if(rl===null){St===null&&(St=In);break}c&&St&&rl.alternate===null&&d(Ne,St),ye=C(rl,ye,Dt),Et===null?yt=rl:Et.sibling=rl,Et=rl,St=In}if(ir.done)return m(Ne,St),Lr&&nc(Ne,Dt),yt;if(St===null){for(;!ir.done;Dt++,ir=ke.next())ir=Ye(Ne,ir.value,Je),ir!==null&&(ye=C(ir,ye,Dt),Et===null?yt=ir:Et.sibling=ir,Et=ir);return Lr&&nc(Ne,Dt),yt}for(St=v(Ne,St);!ir.done;Dt++,ir=ke.next())ir=ht(St,Ne,Dt,ir.value,Je),ir!==null&&(c&&ir.alternate!==null&&St.delete(ir.key===null?Dt:ir.key),ye=C(ir,ye,Dt),Et===null?yt=ir:Et.sibling=ir,Et=ir);return c&&St.forEach(function(ZR){return d(Ne,ZR)}),Lr&&nc(Ne,Dt),yt}function rn(Ne,ye,ke,Je){if(typeof ke=="object"&&ke!==null&&ke.type===N&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case L:e:{for(var yt=ke.key,Et=ye;Et!==null;){if(Et.key===yt){if(yt=ke.type,yt===N){if(Et.tag===7){m(Ne,Et.sibling),ye=E(Et,ke.props.children),ye.return=Ne,Ne=ye;break e}}else if(Et.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===ne&&eN(yt)===Et.type){m(Ne,Et.sibling),ye=E(Et,ke.props),ye.ref=bh(Ne,Et,ke),ye.return=Ne,Ne=ye;break e}m(Ne,Et);break}else d(Ne,Et);Et=Et.sibling}ke.type===N?(ye=dc(ke.props.children,Ne.mode,Je,ke.key),ye.return=Ne,Ne=ye):(Je=Bm(ke.type,ke.key,ke.props,null,Ne.mode,Je),Je.ref=bh(Ne,ye,ke),Je.return=Ne,Ne=Je)}return W(Ne);case I:e:{for(Et=ke.key;ye!==null;){if(ye.key===Et)if(ye.tag===4&&ye.stateNode.containerInfo===ke.containerInfo&&ye.stateNode.implementation===ke.implementation){m(Ne,ye.sibling),ye=E(ye,ke.children||[]),ye.return=Ne,Ne=ye;break e}else{m(Ne,ye);break}else d(Ne,ye);ye=ye.sibling}ye=ey(ke,Ne.mode,Je),ye.return=Ne,Ne=ye}return W(Ne);case ne:return Et=ke._init,rn(Ne,ye,Et(ke._payload),Je)}if($e(ke))return gt(Ne,ye,ke,Je);if(q(ke))return vt(Ne,ye,ke,Je);gm(Ne,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"?(ke=""+ke,ye!==null&&ye.tag===6?(m(Ne,ye.sibling),ye=E(ye,ke),ye.return=Ne,Ne=ye):(m(Ne,ye),ye=Zv(ke,Ne.mode,Je),ye.return=Ne,Ne=ye),W(Ne)):m(Ne,ye)}return rn}var Ru=tN(!0),rN=tN(!1),xm=Wo(null),vm=null,Du=null,cv=null;function uv(){cv=Du=vm=null}function dv(c){var d=xm.current;Tr(xm),c._currentValue=d}function hv(c,d,m){for(;c!==null;){var v=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,v!==null&&(v.childLanes|=d)):v!==null&&(v.childLanes&d)!==d&&(v.childLanes|=d),c===m)break;c=c.return}}function Fu(c,d){vm=c,cv=Du=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&d)!==0&&(Ms=!0),c.firstContext=null)}function wa(c){var d=c._currentValue;if(cv!==c)if(c={context:c,memoizedValue:d,next:null},Du===null){if(vm===null)throw Error(r(308));Du=c,vm.dependencies={lanes:0,firstContext:c}}else Du=Du.next=c;return d}var sc=null;function fv(c){sc===null?sc=[c]:sc.push(c)}function nN(c,d,m,v){var E=d.interleaved;return E===null?(m.next=m,fv(d)):(m.next=E.next,E.next=m),d.interleaved=m,Xi(c,v)}function Xi(c,d){c.lanes|=d;var m=c.alternate;for(m!==null&&(m.lanes|=d),m=c,c=c.return;c!==null;)c.childLanes|=d,m=c.alternate,m!==null&&(m.childLanes|=d),m=c,c=c.return;return m.tag===3?m.stateNode:null}var Ko=!1;function mv(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sN(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Yi(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function Xo(c,d,m){var v=c.updateQueue;if(v===null)return null;if(v=v.shared,(tr&2)!==0){var E=v.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),v.pending=d,Xi(c,m)}return E=v.interleaved,E===null?(d.next=d,fv(v)):(d.next=E.next,E.next=d),v.interleaved=d,Xi(c,m)}function ym(c,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194240)!==0)){var v=d.lanes;v&=c.pendingLanes,m|=v,d.lanes=m,Mo(c,m)}}function aN(c,d){var m=c.updateQueue,v=c.alternate;if(v!==null&&(v=v.updateQueue,m===v)){var E=null,C=null;if(m=m.firstBaseUpdate,m!==null){do{var W={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};C===null?E=C=W:C=C.next=W,m=m.next}while(m!==null);C===null?E=C=d:C=C.next=d}else E=C=d;m={baseState:v.baseState,firstBaseUpdate:E,lastBaseUpdate:C,shared:v.shared,effects:v.effects},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=d}function wm(c,d,m,v){var E=c.updateQueue;Ko=!1;var C=E.firstBaseUpdate,W=E.lastBaseUpdate,de=E.shared.pending;if(de!==null){E.shared.pending=null;var ge=de,Ae=ge.next;ge.next=null,W===null?C=Ae:W.next=Ae,W=ge;var qe=c.alternate;qe!==null&&(qe=qe.updateQueue,de=qe.lastBaseUpdate,de!==W&&(de===null?qe.firstBaseUpdate=Ae:de.next=Ae,qe.lastBaseUpdate=ge))}if(C!==null){var Ye=E.baseState;W=0,qe=Ae=ge=null,de=C;do{var He=de.lane,ht=de.eventTime;if((v&He)===He){qe!==null&&(qe=qe.next={eventTime:ht,lane:0,tag:de.tag,payload:de.payload,callback:de.callback,next:null});e:{var gt=c,vt=de;switch(He=d,ht=m,vt.tag){case 1:if(gt=vt.payload,typeof gt=="function"){Ye=gt.call(ht,Ye,He);break e}Ye=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=vt.payload,He=typeof gt=="function"?gt.call(ht,Ye,He):gt,He==null)break e;Ye=ae({},Ye,He);break e;case 2:Ko=!0}}de.callback!==null&&de.lane!==0&&(c.flags|=64,He=E.effects,He===null?E.effects=[de]:He.push(de))}else ht={eventTime:ht,lane:He,tag:de.tag,payload:de.payload,callback:de.callback,next:null},qe===null?(Ae=qe=ht,ge=Ye):qe=qe.next=ht,W|=He;if(de=de.next,de===null){if(de=E.shared.pending,de===null)break;He=de,de=He.next,He.next=null,E.lastBaseUpdate=He,E.shared.pending=null}}while(!0);if(qe===null&&(ge=Ye),E.baseState=ge,E.firstBaseUpdate=Ae,E.lastBaseUpdate=qe,d=E.shared.interleaved,d!==null){E=d;do W|=E.lane,E=E.next;while(E!==d)}else C===null&&(E.shared.lanes=0);oc|=W,c.lanes=W,c.memoizedState=Ye}}function iN(c,d,m){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var v=c[d],E=v.callback;if(E!==null){if(v.callback=null,v=m,typeof E!="function")throw Error(r(191,E));E.call(v)}}}var _h={},xi=Wo(_h),Nh=Wo(_h),Eh=Wo(_h);function ac(c){if(c===_h)throw Error(r(174));return c}function pv(c,d){switch(_r(Eh,d),_r(Nh,c),_r(xi,_h),c=d.nodeType,c){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:lt(null,"");break;default:c=c===8?d.parentNode:d,d=c.namespaceURI||null,c=c.tagName,d=lt(d,c)}Tr(xi),_r(xi,d)}function Lu(){Tr(xi),Tr(Nh),Tr(Eh)}function oN(c){ac(Eh.current);var d=ac(xi.current),m=lt(d,c.type);d!==m&&(_r(Nh,c),_r(xi,m))}function gv(c){Nh.current===c&&(Tr(xi),Tr(Nh))}var Mr=Wo(0);function bm(c){for(var d=c;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var xv=[];function vv(){for(var c=0;c<xv.length;c++)xv[c]._workInProgressVersionPrimary=null;xv.length=0}var _m=F.ReactCurrentDispatcher,yv=F.ReactCurrentBatchConfig,ic=0,Vr=null,wn=null,An=null,Nm=!1,Sh=!1,kh=0,bR=0;function ts(){throw Error(r(321))}function wv(c,d){if(d===null)return!1;for(var m=0;m<d.length&&m<c.length;m++)if(!Wa(c[m],d[m]))return!1;return!0}function bv(c,d,m,v,E,C){if(ic=C,Vr=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,_m.current=c===null||c.memoizedState===null?SR:kR,c=m(v,E),Sh){C=0;do{if(Sh=!1,kh=0,25<=C)throw Error(r(301));C+=1,An=wn=null,d.updateQueue=null,_m.current=TR,c=m(v,E)}while(Sh)}if(_m.current=km,d=wn!==null&&wn.next!==null,ic=0,An=wn=Vr=null,Nm=!1,d)throw Error(r(300));return c}function _v(){var c=kh!==0;return kh=0,c}function vi(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?Vr.memoizedState=An=c:An=An.next=c,An}function ba(){if(wn===null){var c=Vr.alternate;c=c!==null?c.memoizedState:null}else c=wn.next;var d=An===null?Vr.memoizedState:An.next;if(d!==null)An=d,wn=c;else{if(c===null)throw Error(r(310));wn=c,c={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},An===null?Vr.memoizedState=An=c:An=An.next=c}return An}function Th(c,d){return typeof d=="function"?d(c):d}function Nv(c){var d=ba(),m=d.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var v=wn,E=v.baseQueue,C=m.pending;if(C!==null){if(E!==null){var W=E.next;E.next=C.next,C.next=W}v.baseQueue=E=C,m.pending=null}if(E!==null){C=E.next,v=v.baseState;var de=W=null,ge=null,Ae=C;do{var qe=Ae.lane;if((ic&qe)===qe)ge!==null&&(ge=ge.next={lane:0,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),v=Ae.hasEagerState?Ae.eagerState:c(v,Ae.action);else{var Ye={lane:qe,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null};ge===null?(de=ge=Ye,W=v):ge=ge.next=Ye,Vr.lanes|=qe,oc|=qe}Ae=Ae.next}while(Ae!==null&&Ae!==C);ge===null?W=v:ge.next=de,Wa(v,d.memoizedState)||(Ms=!0),d.memoizedState=v,d.baseState=W,d.baseQueue=ge,m.lastRenderedState=v}if(c=m.interleaved,c!==null){E=c;do C=E.lane,Vr.lanes|=C,oc|=C,E=E.next;while(E!==c)}else E===null&&(m.lanes=0);return[d.memoizedState,m.dispatch]}function Ev(c){var d=ba(),m=d.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var v=m.dispatch,E=m.pending,C=d.memoizedState;if(E!==null){m.pending=null;var W=E=E.next;do C=c(C,W.action),W=W.next;while(W!==E);Wa(C,d.memoizedState)||(Ms=!0),d.memoizedState=C,d.baseQueue===null&&(d.baseState=C),m.lastRenderedState=C}return[C,v]}function lN(){}function cN(c,d){var m=Vr,v=ba(),E=d(),C=!Wa(v.memoizedState,E);if(C&&(v.memoizedState=E,Ms=!0),v=v.queue,Sv(hN.bind(null,m,v,c),[c]),v.getSnapshot!==d||C||An!==null&&An.memoizedState.tag&1){if(m.flags|=2048,jh(9,dN.bind(null,m,v,E,d),void 0,null),Cn===null)throw Error(r(349));(ic&30)!==0||uN(m,d,E)}return E}function uN(c,d,m){c.flags|=16384,c={getSnapshot:d,value:m},d=Vr.updateQueue,d===null?(d={lastEffect:null,stores:null},Vr.updateQueue=d,d.stores=[c]):(m=d.stores,m===null?d.stores=[c]:m.push(c))}function dN(c,d,m,v){d.value=m,d.getSnapshot=v,fN(d)&&mN(c)}function hN(c,d,m){return m(function(){fN(d)&&mN(c)})}function fN(c){var d=c.getSnapshot;c=c.value;try{var m=d();return!Wa(c,m)}catch{return!0}}function mN(c){var d=Xi(c,1);d!==null&&Ya(d,c,1,-1)}function pN(c){var d=vi();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Th,lastRenderedState:c},d.queue=c,c=c.dispatch=ER.bind(null,Vr,c),[d.memoizedState,c]}function jh(c,d,m,v){return c={tag:c,create:d,destroy:m,deps:v,next:null},d=Vr.updateQueue,d===null?(d={lastEffect:null,stores:null},Vr.updateQueue=d,d.lastEffect=c.next=c):(m=d.lastEffect,m===null?d.lastEffect=c.next=c:(v=m.next,m.next=c,c.next=v,d.lastEffect=c)),c}function gN(){return ba().memoizedState}function Em(c,d,m,v){var E=vi();Vr.flags|=c,E.memoizedState=jh(1|d,m,void 0,v===void 0?null:v)}function Sm(c,d,m,v){var E=ba();v=v===void 0?null:v;var C=void 0;if(wn!==null){var W=wn.memoizedState;if(C=W.destroy,v!==null&&wv(v,W.deps)){E.memoizedState=jh(d,m,C,v);return}}Vr.flags|=c,E.memoizedState=jh(1|d,m,C,v)}function xN(c,d){return Em(8390656,8,c,d)}function Sv(c,d){return Sm(2048,8,c,d)}function vN(c,d){return Sm(4,2,c,d)}function yN(c,d){return Sm(4,4,c,d)}function wN(c,d){if(typeof d=="function")return c=c(),d(c),function(){d(null)};if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function bN(c,d,m){return m=m!=null?m.concat([c]):null,Sm(4,4,wN.bind(null,d,c),m)}function kv(){}function _N(c,d){var m=ba();d=d===void 0?null:d;var v=m.memoizedState;return v!==null&&d!==null&&wv(d,v[1])?v[0]:(m.memoizedState=[c,d],c)}function NN(c,d){var m=ba();d=d===void 0?null:d;var v=m.memoizedState;return v!==null&&d!==null&&wv(d,v[1])?v[0]:(c=c(),m.memoizedState=[c,d],c)}function EN(c,d,m){return(ic&21)===0?(c.baseState&&(c.baseState=!1,Ms=!0),c.memoizedState=m):(Wa(m,d)||(m=Xl(),Vr.lanes|=m,oc|=m,c.baseState=!0),d)}function _R(c,d){var m=Yt;Yt=m!==0&&4>m?m:4,c(!0);var v=yv.transition;yv.transition={};try{c(!1),d()}finally{Yt=m,yv.transition=v}}function SN(){return ba().memoizedState}function NR(c,d,m){var v=Zo(c);if(m={lane:v,action:m,hasEagerState:!1,eagerState:null,next:null},kN(c))TN(d,m);else if(m=nN(c,d,m,v),m!==null){var E=Ss();Ya(m,c,v,E),jN(m,d,v)}}function ER(c,d,m){var v=Zo(c),E={lane:v,action:m,hasEagerState:!1,eagerState:null,next:null};if(kN(c))TN(d,E);else{var C=c.alternate;if(c.lanes===0&&(C===null||C.lanes===0)&&(C=d.lastRenderedReducer,C!==null))try{var W=d.lastRenderedState,de=C(W,m);if(E.hasEagerState=!0,E.eagerState=de,Wa(de,W)){var ge=d.interleaved;ge===null?(E.next=E,fv(d)):(E.next=ge.next,ge.next=E),d.interleaved=E;return}}catch{}finally{}m=nN(c,d,E,v),m!==null&&(E=Ss(),Ya(m,c,v,E),jN(m,d,v))}}function kN(c){var d=c.alternate;return c===Vr||d!==null&&d===Vr}function TN(c,d){Sh=Nm=!0;var m=c.pending;m===null?d.next=d:(d.next=m.next,m.next=d),c.pending=d}function jN(c,d,m){if((m&4194240)!==0){var v=d.lanes;v&=c.pendingLanes,m|=v,d.lanes=m,Mo(c,m)}}var km={readContext:wa,useCallback:ts,useContext:ts,useEffect:ts,useImperativeHandle:ts,useInsertionEffect:ts,useLayoutEffect:ts,useMemo:ts,useReducer:ts,useRef:ts,useState:ts,useDebugValue:ts,useDeferredValue:ts,useTransition:ts,useMutableSource:ts,useSyncExternalStore:ts,useId:ts,unstable_isNewReconciler:!1},SR={readContext:wa,useCallback:function(c,d){return vi().memoizedState=[c,d===void 0?null:d],c},useContext:wa,useEffect:xN,useImperativeHandle:function(c,d,m){return m=m!=null?m.concat([c]):null,Em(4194308,4,wN.bind(null,d,c),m)},useLayoutEffect:function(c,d){return Em(4194308,4,c,d)},useInsertionEffect:function(c,d){return Em(4,2,c,d)},useMemo:function(c,d){var m=vi();return d=d===void 0?null:d,c=c(),m.memoizedState=[c,d],c},useReducer:function(c,d,m){var v=vi();return d=m!==void 0?m(d):d,v.memoizedState=v.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},v.queue=c,c=c.dispatch=NR.bind(null,Vr,c),[v.memoizedState,c]},useRef:function(c){var d=vi();return c={current:c},d.memoizedState=c},useState:pN,useDebugValue:kv,useDeferredValue:function(c){return vi().memoizedState=c},useTransition:function(){var c=pN(!1),d=c[0];return c=_R.bind(null,c[1]),vi().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,m){var v=Vr,E=vi();if(Lr){if(m===void 0)throw Error(r(407));m=m()}else{if(m=d(),Cn===null)throw Error(r(349));(ic&30)!==0||uN(v,d,m)}E.memoizedState=m;var C={value:m,getSnapshot:d};return E.queue=C,xN(hN.bind(null,v,C,c),[c]),v.flags|=2048,jh(9,dN.bind(null,v,C,m,d),void 0,null),m},useId:function(){var c=vi(),d=Cn.identifierPrefix;if(Lr){var m=Ki,v=Gi;m=(v&~(1<<32-Sr(v)-1)).toString(32)+m,d=":"+d+"R"+m,m=kh++,0<m&&(d+="H"+m.toString(32)),d+=":"}else m=bR++,d=":"+d+"r"+m.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},kR={readContext:wa,useCallback:_N,useContext:wa,useEffect:Sv,useImperativeHandle:bN,useInsertionEffect:vN,useLayoutEffect:yN,useMemo:NN,useReducer:Nv,useRef:gN,useState:function(){return Nv(Th)},useDebugValue:kv,useDeferredValue:function(c){var d=ba();return EN(d,wn.memoizedState,c)},useTransition:function(){var c=Nv(Th)[0],d=ba().memoizedState;return[c,d]},useMutableSource:lN,useSyncExternalStore:cN,useId:SN,unstable_isNewReconciler:!1},TR={readContext:wa,useCallback:_N,useContext:wa,useEffect:Sv,useImperativeHandle:bN,useInsertionEffect:vN,useLayoutEffect:yN,useMemo:NN,useReducer:Ev,useRef:gN,useState:function(){return Ev(Th)},useDebugValue:kv,useDeferredValue:function(c){var d=ba();return wn===null?d.memoizedState=c:EN(d,wn.memoizedState,c)},useTransition:function(){var c=Ev(Th)[0],d=ba().memoizedState;return[c,d]},useMutableSource:lN,useSyncExternalStore:cN,useId:SN,unstable_isNewReconciler:!1};function Ga(c,d){if(c&&c.defaultProps){d=ae({},d),c=c.defaultProps;for(var m in c)d[m]===void 0&&(d[m]=c[m]);return d}return d}function Tv(c,d,m,v){d=c.memoizedState,m=m(v,d),m=m==null?d:ae({},d,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var Tm={isMounted:function(c){return(c=c._reactInternals)?ue(c)===c:!1},enqueueSetState:function(c,d,m){c=c._reactInternals;var v=Ss(),E=Zo(c),C=Yi(v,E);C.payload=d,m!=null&&(C.callback=m),d=Xo(c,C,E),d!==null&&(Ya(d,c,E,v),ym(d,c,E))},enqueueReplaceState:function(c,d,m){c=c._reactInternals;var v=Ss(),E=Zo(c),C=Yi(v,E);C.tag=1,C.payload=d,m!=null&&(C.callback=m),d=Xo(c,C,E),d!==null&&(Ya(d,c,E,v),ym(d,c,E))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var m=Ss(),v=Zo(c),E=Yi(m,v);E.tag=2,d!=null&&(E.callback=d),d=Xo(c,E,v),d!==null&&(Ya(d,c,v,m),ym(d,c,v))}};function AN(c,d,m,v,E,C,W){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(v,C,W):d.prototype&&d.prototype.isPureReactComponent?!mh(m,v)||!mh(E,C):!0}function CN(c,d,m){var v=!1,E=qo,C=d.contextType;return typeof C=="object"&&C!==null?C=wa(C):(E=Os(d)?tc:es.current,v=d.contextTypes,C=(v=v!=null)?Au(c,E):qo),d=new d(m,C),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Tm,c.stateNode=d,d._reactInternals=c,v&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=E,c.__reactInternalMemoizedMaskedChildContext=C),d}function IN(c,d,m,v){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,v),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,v),d.state!==c&&Tm.enqueueReplaceState(d,d.state,null)}function jv(c,d,m,v){var E=c.stateNode;E.props=m,E.state=c.memoizedState,E.refs={},mv(c);var C=d.contextType;typeof C=="object"&&C!==null?E.context=wa(C):(C=Os(d)?tc:es.current,E.context=Au(c,C)),E.state=c.memoizedState,C=d.getDerivedStateFromProps,typeof C=="function"&&(Tv(c,d,C,m),E.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(d=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),d!==E.state&&Tm.enqueueReplaceState(E,E.state,null),wm(c,m,E,v),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308)}function Ou(c,d){try{var m="",v=d;do m+=Y(v),v=v.return;while(v);var E=m}catch(C){E=`
Error generating stack: `+C.message+`
`+C.stack}return{value:c,source:d,stack:E,digest:null}}function Av(c,d,m){return{value:c,source:null,stack:m??null,digest:d??null}}function Cv(c,d){try{console.error(d.value)}catch(m){setTimeout(function(){throw m})}}var jR=typeof WeakMap=="function"?WeakMap:Map;function PN(c,d,m){m=Yi(-1,m),m.tag=3,m.payload={element:null};var v=d.value;return m.callback=function(){Dm||(Dm=!0,Wv=v),Cv(c,d)},m}function RN(c,d,m){m=Yi(-1,m),m.tag=3;var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var E=d.value;m.payload=function(){return v(E)},m.callback=function(){Cv(c,d)}}var C=c.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(m.callback=function(){Cv(c,d),typeof v!="function"&&(Qo===null?Qo=new Set([this]):Qo.add(this));var W=d.stack;this.componentDidCatch(d.value,{componentStack:W!==null?W:""})}),m}function DN(c,d,m){var v=c.pingCache;if(v===null){v=c.pingCache=new jR;var E=new Set;v.set(d,E)}else E=v.get(d),E===void 0&&(E=new Set,v.set(d,E));E.has(m)||(E.add(m),c=zR.bind(null,c,d,m),d.then(c,c))}function FN(c){do{var d;if((d=c.tag===13)&&(d=c.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return c;c=c.return}while(c!==null);return null}function LN(c,d,m,v,E){return(c.mode&1)===0?(c===d?c.flags|=65536:(c.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(d=Yi(-1,1),d.tag=2,Xo(m,d,1))),m.lanes|=1),c):(c.flags|=65536,c.lanes=E,c)}var AR=F.ReactCurrentOwner,Ms=!1;function Es(c,d,m,v){d.child=c===null?rN(d,null,m,v):Ru(d,c.child,m,v)}function ON(c,d,m,v,E){m=m.render;var C=d.ref;return Fu(d,E),v=bv(c,d,m,v,C,E),m=_v(),c!==null&&!Ms?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~E,Qi(c,d,E)):(Lr&&m&&sv(d),d.flags|=1,Es(c,d,v,E),d.child)}function MN(c,d,m,v,E){if(c===null){var C=m.type;return typeof C=="function"&&!Jv(C)&&C.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(d.tag=15,d.type=C,VN(c,d,C,v,E)):(c=Bm(m.type,null,v,d,d.mode,E),c.ref=d.ref,c.return=d,d.child=c)}if(C=c.child,(c.lanes&E)===0){var W=C.memoizedProps;if(m=m.compare,m=m!==null?m:mh,m(W,v)&&c.ref===d.ref)return Qi(c,d,E)}return d.flags|=1,c=tl(C,v),c.ref=d.ref,c.return=d,d.child=c}function VN(c,d,m,v,E){if(c!==null){var C=c.memoizedProps;if(mh(C,v)&&c.ref===d.ref)if(Ms=!1,d.pendingProps=v=C,(c.lanes&E)!==0)(c.flags&131072)!==0&&(Ms=!0);else return d.lanes=c.lanes,Qi(c,d,E)}return Iv(c,d,m,v,E)}function BN(c,d,m){var v=d.pendingProps,E=v.children,C=c!==null?c.memoizedState:null;if(v.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},_r(Vu,ra),ra|=m;else{if((m&1073741824)===0)return c=C!==null?C.baseLanes|m:m,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null,transitions:null},d.updateQueue=null,_r(Vu,ra),ra|=c,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=C!==null?C.baseLanes:m,_r(Vu,ra),ra|=v}else C!==null?(v=C.baseLanes|m,d.memoizedState=null):v=m,_r(Vu,ra),ra|=v;return Es(c,d,E,m),d.child}function UN(c,d){var m=d.ref;(c===null&&m!==null||c!==null&&c.ref!==m)&&(d.flags|=512,d.flags|=2097152)}function Iv(c,d,m,v,E){var C=Os(m)?tc:es.current;return C=Au(d,C),Fu(d,E),m=bv(c,d,m,v,C,E),v=_v(),c!==null&&!Ms?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~E,Qi(c,d,E)):(Lr&&v&&sv(d),d.flags|=1,Es(c,d,m,E),d.child)}function zN(c,d,m,v,E){if(Os(m)){var C=!0;dm(d)}else C=!1;if(Fu(d,E),d.stateNode===null)Am(c,d),CN(d,m,v),jv(d,m,v,E),v=!0;else if(c===null){var W=d.stateNode,de=d.memoizedProps;W.props=de;var ge=W.context,Ae=m.contextType;typeof Ae=="object"&&Ae!==null?Ae=wa(Ae):(Ae=Os(m)?tc:es.current,Ae=Au(d,Ae));var qe=m.getDerivedStateFromProps,Ye=typeof qe=="function"||typeof W.getSnapshotBeforeUpdate=="function";Ye||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(de!==v||ge!==Ae)&&IN(d,W,v,Ae),Ko=!1;var He=d.memoizedState;W.state=He,wm(d,v,W,E),ge=d.memoizedState,de!==v||He!==ge||Ls.current||Ko?(typeof qe=="function"&&(Tv(d,m,qe,v),ge=d.memoizedState),(de=Ko||AN(d,m,de,v,He,ge,Ae))?(Ye||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(d.flags|=4194308)):(typeof W.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=v,d.memoizedState=ge),W.props=v,W.state=ge,W.context=Ae,v=de):(typeof W.componentDidMount=="function"&&(d.flags|=4194308),v=!1)}else{W=d.stateNode,sN(c,d),de=d.memoizedProps,Ae=d.type===d.elementType?de:Ga(d.type,de),W.props=Ae,Ye=d.pendingProps,He=W.context,ge=m.contextType,typeof ge=="object"&&ge!==null?ge=wa(ge):(ge=Os(m)?tc:es.current,ge=Au(d,ge));var ht=m.getDerivedStateFromProps;(qe=typeof ht=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(de!==Ye||He!==ge)&&IN(d,W,v,ge),Ko=!1,He=d.memoizedState,W.state=He,wm(d,v,W,E);var gt=d.memoizedState;de!==Ye||He!==gt||Ls.current||Ko?(typeof ht=="function"&&(Tv(d,m,ht,v),gt=d.memoizedState),(Ae=Ko||AN(d,m,Ae,v,He,gt,ge)||!1)?(qe||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(v,gt,ge),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(v,gt,ge)),typeof W.componentDidUpdate=="function"&&(d.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof W.componentDidUpdate!="function"||de===c.memoizedProps&&He===c.memoizedState||(d.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||de===c.memoizedProps&&He===c.memoizedState||(d.flags|=1024),d.memoizedProps=v,d.memoizedState=gt),W.props=v,W.state=gt,W.context=ge,v=Ae):(typeof W.componentDidUpdate!="function"||de===c.memoizedProps&&He===c.memoizedState||(d.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||de===c.memoizedProps&&He===c.memoizedState||(d.flags|=1024),v=!1)}return Pv(c,d,m,v,C,E)}function Pv(c,d,m,v,E,C){UN(c,d);var W=(d.flags&128)!==0;if(!v&&!W)return E&&G_(d,m,!1),Qi(c,d,C);v=d.stateNode,AR.current=d;var de=W&&typeof m.getDerivedStateFromError!="function"?null:v.render();return d.flags|=1,c!==null&&W?(d.child=Ru(d,c.child,null,C),d.child=Ru(d,null,de,C)):Es(c,d,de,C),d.memoizedState=v.state,E&&G_(d,m,!0),d.child}function $N(c){var d=c.stateNode;d.pendingContext?W_(c,d.pendingContext,d.pendingContext!==d.context):d.context&&W_(c,d.context,!1),pv(c,d.containerInfo)}function HN(c,d,m,v,E){return Pu(),lv(E),d.flags|=256,Es(c,d,m,v),d.child}var Rv={dehydrated:null,treeContext:null,retryLane:0};function Dv(c){return{baseLanes:c,cachePool:null,transitions:null}}function WN(c,d,m){var v=d.pendingProps,E=Mr.current,C=!1,W=(d.flags&128)!==0,de;if((de=W)||(de=c!==null&&c.memoizedState===null?!1:(E&2)!==0),de?(C=!0,d.flags&=-129):(c===null||c.memoizedState!==null)&&(E|=1),_r(Mr,E&1),c===null)return ov(d),c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((d.mode&1)===0?d.lanes=1:c.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(W=v.children,c=v.fallback,C?(v=d.mode,C=d.child,W={mode:"hidden",children:W},(v&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=W):C=Um(W,v,0,null),c=dc(c,v,m,null),C.return=d,c.return=d,C.sibling=c,d.child=C,d.child.memoizedState=Dv(m),d.memoizedState=Rv,c):Fv(d,W));if(E=c.memoizedState,E!==null&&(de=E.dehydrated,de!==null))return CR(c,d,W,v,de,E,m);if(C){C=v.fallback,W=d.mode,E=c.child,de=E.sibling;var ge={mode:"hidden",children:v.children};return(W&1)===0&&d.child!==E?(v=d.child,v.childLanes=0,v.pendingProps=ge,d.deletions=null):(v=tl(E,ge),v.subtreeFlags=E.subtreeFlags&14680064),de!==null?C=tl(de,C):(C=dc(C,W,m,null),C.flags|=2),C.return=d,v.return=d,v.sibling=C,d.child=v,v=C,C=d.child,W=c.child.memoizedState,W=W===null?Dv(m):{baseLanes:W.baseLanes|m,cachePool:null,transitions:W.transitions},C.memoizedState=W,C.childLanes=c.childLanes&~m,d.memoizedState=Rv,v}return C=c.child,c=C.sibling,v=tl(C,{mode:"visible",children:v.children}),(d.mode&1)===0&&(v.lanes=m),v.return=d,v.sibling=null,c!==null&&(m=d.deletions,m===null?(d.deletions=[c],d.flags|=16):m.push(c)),d.child=v,d.memoizedState=null,v}function Fv(c,d){return d=Um({mode:"visible",children:d},c.mode,0,null),d.return=c,c.child=d}function jm(c,d,m,v){return v!==null&&lv(v),Ru(d,c.child,null,m),c=Fv(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function CR(c,d,m,v,E,C,W){if(m)return d.flags&256?(d.flags&=-257,v=Av(Error(r(422))),jm(c,d,W,v)):d.memoizedState!==null?(d.child=c.child,d.flags|=128,null):(C=v.fallback,E=d.mode,v=Um({mode:"visible",children:v.children},E,0,null),C=dc(C,E,W,null),C.flags|=2,v.return=d,C.return=d,v.sibling=C,d.child=v,(d.mode&1)!==0&&Ru(d,c.child,null,W),d.child.memoizedState=Dv(W),d.memoizedState=Rv,C);if((d.mode&1)===0)return jm(c,d,W,null);if(E.data==="$!"){if(v=E.nextSibling&&E.nextSibling.dataset,v)var de=v.dgst;return v=de,C=Error(r(419)),v=Av(C,v,void 0),jm(c,d,W,v)}if(de=(W&c.childLanes)!==0,Ms||de){if(v=Cn,v!==null){switch(W&-W){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(v.suspendedLanes|W))!==0?0:E,E!==0&&E!==C.retryLane&&(C.retryLane=E,Xi(c,E),Ya(v,c,E,-1))}return Qv(),v=Av(Error(r(421))),jm(c,d,W,v)}return E.data==="$?"?(d.flags|=128,d.child=c.child,d=$R.bind(null,c),E._reactRetry=d,null):(c=C.treeContext,ta=Ho(E.nextSibling),ea=d,Lr=!0,qa=null,c!==null&&(va[ya++]=Gi,va[ya++]=Ki,va[ya++]=rc,Gi=c.id,Ki=c.overflow,rc=d),d=Fv(d,v.children),d.flags|=4096,d)}function qN(c,d,m){c.lanes|=d;var v=c.alternate;v!==null&&(v.lanes|=d),hv(c.return,d,m)}function Lv(c,d,m,v,E){var C=c.memoizedState;C===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:v,tail:m,tailMode:E}:(C.isBackwards=d,C.rendering=null,C.renderingStartTime=0,C.last=v,C.tail=m,C.tailMode=E)}function GN(c,d,m){var v=d.pendingProps,E=v.revealOrder,C=v.tail;if(Es(c,d,v.children,m),v=Mr.current,(v&2)!==0)v=v&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&qN(c,m,d);else if(c.tag===19)qN(c,m,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}v&=1}if(_r(Mr,v),(d.mode&1)===0)d.memoizedState=null;else switch(E){case"forwards":for(m=d.child,E=null;m!==null;)c=m.alternate,c!==null&&bm(c)===null&&(E=m),m=m.sibling;m=E,m===null?(E=d.child,d.child=null):(E=m.sibling,m.sibling=null),Lv(d,!1,E,m,C);break;case"backwards":for(m=null,E=d.child,d.child=null;E!==null;){if(c=E.alternate,c!==null&&bm(c)===null){d.child=E;break}c=E.sibling,E.sibling=m,m=E,E=c}Lv(d,!0,m,null,C);break;case"together":Lv(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Am(c,d){(d.mode&1)===0&&c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2)}function Qi(c,d,m){if(c!==null&&(d.dependencies=c.dependencies),oc|=d.lanes,(m&d.childLanes)===0)return null;if(c!==null&&d.child!==c.child)throw Error(r(153));if(d.child!==null){for(c=d.child,m=tl(c,c.pendingProps),d.child=m,m.return=d;c.sibling!==null;)c=c.sibling,m=m.sibling=tl(c,c.pendingProps),m.return=d;m.sibling=null}return d.child}function IR(c,d,m){switch(d.tag){case 3:$N(d),Pu();break;case 5:oN(d);break;case 1:Os(d.type)&&dm(d);break;case 4:pv(d,d.stateNode.containerInfo);break;case 10:var v=d.type._context,E=d.memoizedProps.value;_r(xm,v._currentValue),v._currentValue=E;break;case 13:if(v=d.memoizedState,v!==null)return v.dehydrated!==null?(_r(Mr,Mr.current&1),d.flags|=128,null):(m&d.child.childLanes)!==0?WN(c,d,m):(_r(Mr,Mr.current&1),c=Qi(c,d,m),c!==null?c.sibling:null);_r(Mr,Mr.current&1);break;case 19:if(v=(m&d.childLanes)!==0,(c.flags&128)!==0){if(v)return GN(c,d,m);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),_r(Mr,Mr.current),v)break;return null;case 22:case 23:return d.lanes=0,BN(c,d,m)}return Qi(c,d,m)}var KN,Ov,XN,YN;KN=function(c,d){for(var m=d.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Ov=function(){},XN=function(c,d,m,v){var E=c.memoizedProps;if(E!==v){c=d.stateNode,ac(xi.current);var C=null;switch(m){case"input":E=Re(c,E),v=Re(c,v),C=[];break;case"select":E=ae({},E,{value:void 0}),v=ae({},v,{value:void 0}),C=[];break;case"textarea":E=xt(c,E),v=xt(c,v),C=[];break;default:typeof E.onClick!="function"&&typeof v.onClick=="function"&&(c.onclick=lm)}Xs(m,v);var W;m=null;for(Ae in E)if(!v.hasOwnProperty(Ae)&&E.hasOwnProperty(Ae)&&E[Ae]!=null)if(Ae==="style"){var de=E[Ae];for(W in de)de.hasOwnProperty(W)&&(m||(m={}),m[W]="")}else Ae!=="dangerouslySetInnerHTML"&&Ae!=="children"&&Ae!=="suppressContentEditableWarning"&&Ae!=="suppressHydrationWarning"&&Ae!=="autoFocus"&&(s.hasOwnProperty(Ae)?C||(C=[]):(C=C||[]).push(Ae,null));for(Ae in v){var ge=v[Ae];if(de=E!=null?E[Ae]:void 0,v.hasOwnProperty(Ae)&&ge!==de&&(ge!=null||de!=null))if(Ae==="style")if(de){for(W in de)!de.hasOwnProperty(W)||ge&&ge.hasOwnProperty(W)||(m||(m={}),m[W]="");for(W in ge)ge.hasOwnProperty(W)&&de[W]!==ge[W]&&(m||(m={}),m[W]=ge[W])}else m||(C||(C=[]),C.push(Ae,m)),m=ge;else Ae==="dangerouslySetInnerHTML"?(ge=ge?ge.__html:void 0,de=de?de.__html:void 0,ge!=null&&de!==ge&&(C=C||[]).push(Ae,ge)):Ae==="children"?typeof ge!="string"&&typeof ge!="number"||(C=C||[]).push(Ae,""+ge):Ae!=="suppressContentEditableWarning"&&Ae!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ae)?(ge!=null&&Ae==="onScroll"&&kr("scroll",c),C||de===ge||(C=[])):(C=C||[]).push(Ae,ge))}m&&(C=C||[]).push("style",m);var Ae=C;(d.updateQueue=Ae)&&(d.flags|=4)}},YN=function(c,d,m,v){m!==v&&(d.flags|=4)};function Ah(c,d){if(!Lr)switch(c.tailMode){case"hidden":d=c.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:v.sibling=null}}function rs(c){var d=c.alternate!==null&&c.alternate.child===c.child,m=0,v=0;if(d)for(var E=c.child;E!==null;)m|=E.lanes|E.childLanes,v|=E.subtreeFlags&14680064,v|=E.flags&14680064,E.return=c,E=E.sibling;else for(E=c.child;E!==null;)m|=E.lanes|E.childLanes,v|=E.subtreeFlags,v|=E.flags,E.return=c,E=E.sibling;return c.subtreeFlags|=v,c.childLanes=m,d}function PR(c,d,m){var v=d.pendingProps;switch(av(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rs(d),null;case 1:return Os(d.type)&&um(),rs(d),null;case 3:return v=d.stateNode,Lu(),Tr(Ls),Tr(es),vv(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(c===null||c.child===null)&&(pm(d)?d.flags|=4:c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,qa!==null&&(Kv(qa),qa=null))),Ov(c,d),rs(d),null;case 5:gv(d);var E=ac(Eh.current);if(m=d.type,c!==null&&d.stateNode!=null)XN(c,d,m,v,E),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!v){if(d.stateNode===null)throw Error(r(166));return rs(d),null}if(c=ac(xi.current),pm(d)){v=d.stateNode,m=d.type;var C=d.memoizedProps;switch(v[gi]=d,v[yh]=C,c=(d.mode&1)!==0,m){case"dialog":kr("cancel",v),kr("close",v);break;case"iframe":case"object":case"embed":kr("load",v);break;case"video":case"audio":for(E=0;E<gh.length;E++)kr(gh[E],v);break;case"source":kr("error",v);break;case"img":case"image":case"link":kr("error",v),kr("load",v);break;case"details":kr("toggle",v);break;case"input":he(v,C),kr("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!C.multiple},kr("invalid",v);break;case"textarea":Nt(v,C),kr("invalid",v)}Xs(m,C),E=null;for(var W in C)if(C.hasOwnProperty(W)){var de=C[W];W==="children"?typeof de=="string"?v.textContent!==de&&(C.suppressHydrationWarning!==!0&&om(v.textContent,de,c),E=["children",de]):typeof de=="number"&&v.textContent!==""+de&&(C.suppressHydrationWarning!==!0&&om(v.textContent,de,c),E=["children",""+de]):s.hasOwnProperty(W)&&de!=null&&W==="onScroll"&&kr("scroll",v)}switch(m){case"input":We(v),pe(v,C,!0);break;case"textarea":We(v),be(v);break;case"select":case"option":break;default:typeof C.onClick=="function"&&(v.onclick=lm)}v=E,d.updateQueue=v,v!==null&&(d.flags|=4)}else{W=E.nodeType===9?E:E.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Pe(m)),c==="http://www.w3.org/1999/xhtml"?m==="script"?(c=W.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof v.is=="string"?c=W.createElement(m,{is:v.is}):(c=W.createElement(m),m==="select"&&(W=c,v.multiple?W.multiple=!0:v.size&&(W.size=v.size))):c=W.createElementNS(c,m),c[gi]=d,c[yh]=v,KN(c,d,!1,!1),d.stateNode=c;e:{switch(W=Ps(m,v),m){case"dialog":kr("cancel",c),kr("close",c),E=v;break;case"iframe":case"object":case"embed":kr("load",c),E=v;break;case"video":case"audio":for(E=0;E<gh.length;E++)kr(gh[E],c);E=v;break;case"source":kr("error",c),E=v;break;case"img":case"image":case"link":kr("error",c),kr("load",c),E=v;break;case"details":kr("toggle",c),E=v;break;case"input":he(c,v),E=Re(c,v),kr("invalid",c);break;case"option":E=v;break;case"select":c._wrapperState={wasMultiple:!!v.multiple},E=ae({},v,{value:void 0}),kr("invalid",c);break;case"textarea":Nt(c,v),E=xt(c,v),kr("invalid",c);break;default:E=v}Xs(m,E),de=E;for(C in de)if(de.hasOwnProperty(C)){var ge=de[C];C==="style"?un(c,ge):C==="dangerouslySetInnerHTML"?(ge=ge?ge.__html:void 0,ge!=null&&Bt(c,ge)):C==="children"?typeof ge=="string"?(m!=="textarea"||ge!=="")&&it(c,ge):typeof ge=="number"&&it(c,""+ge):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(s.hasOwnProperty(C)?ge!=null&&C==="onScroll"&&kr("scroll",c):ge!=null&&k(c,C,ge,W))}switch(m){case"input":We(c),pe(c,v,!1);break;case"textarea":We(c),be(c);break;case"option":v.value!=null&&c.setAttribute("value",""+fe(v.value));break;case"select":c.multiple=!!v.multiple,C=v.value,C!=null?ot(c,!!v.multiple,C,!1):v.defaultValue!=null&&ot(c,!!v.multiple,v.defaultValue,!0);break;default:typeof E.onClick=="function"&&(c.onclick=lm)}switch(m){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return rs(d),null;case 6:if(c&&d.stateNode!=null)YN(c,d,c.memoizedProps,v);else{if(typeof v!="string"&&d.stateNode===null)throw Error(r(166));if(m=ac(Eh.current),ac(xi.current),pm(d)){if(v=d.stateNode,m=d.memoizedProps,v[gi]=d,(C=v.nodeValue!==m)&&(c=ea,c!==null))switch(c.tag){case 3:om(v.nodeValue,m,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&om(v.nodeValue,m,(c.mode&1)!==0)}C&&(d.flags|=4)}else v=(m.nodeType===9?m:m.ownerDocument).createTextNode(v),v[gi]=d,d.stateNode=v}return rs(d),null;case 13:if(Tr(Mr),v=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Lr&&ta!==null&&(d.mode&1)!==0&&(d.flags&128)===0)Z_(),Pu(),d.flags|=98560,C=!1;else if(C=pm(d),v!==null&&v.dehydrated!==null){if(c===null){if(!C)throw Error(r(318));if(C=d.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[gi]=d}else Pu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;rs(d),C=!1}else qa!==null&&(Kv(qa),qa=null),C=!0;if(!C)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=m,d):(v=v!==null,v!==(c!==null&&c.memoizedState!==null)&&v&&(d.child.flags|=8192,(d.mode&1)!==0&&(c===null||(Mr.current&1)!==0?bn===0&&(bn=3):Qv())),d.updateQueue!==null&&(d.flags|=4),rs(d),null);case 4:return Lu(),Ov(c,d),c===null&&xh(d.stateNode.containerInfo),rs(d),null;case 10:return dv(d.type._context),rs(d),null;case 17:return Os(d.type)&&um(),rs(d),null;case 19:if(Tr(Mr),C=d.memoizedState,C===null)return rs(d),null;if(v=(d.flags&128)!==0,W=C.rendering,W===null)if(v)Ah(C,!1);else{if(bn!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(W=bm(c),W!==null){for(d.flags|=128,Ah(C,!1),v=W.updateQueue,v!==null&&(d.updateQueue=v,d.flags|=4),d.subtreeFlags=0,v=m,m=d.child;m!==null;)C=m,c=v,C.flags&=14680066,W=C.alternate,W===null?(C.childLanes=0,C.lanes=c,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=W.childLanes,C.lanes=W.lanes,C.child=W.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=W.memoizedProps,C.memoizedState=W.memoizedState,C.updateQueue=W.updateQueue,C.type=W.type,c=W.dependencies,C.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),m=m.sibling;return _r(Mr,Mr.current&1|2),d.child}c=c.sibling}C.tail!==null&&Xe()>Bu&&(d.flags|=128,v=!0,Ah(C,!1),d.lanes=4194304)}else{if(!v)if(c=bm(W),c!==null){if(d.flags|=128,v=!0,m=c.updateQueue,m!==null&&(d.updateQueue=m,d.flags|=4),Ah(C,!0),C.tail===null&&C.tailMode==="hidden"&&!W.alternate&&!Lr)return rs(d),null}else 2*Xe()-C.renderingStartTime>Bu&&m!==1073741824&&(d.flags|=128,v=!0,Ah(C,!1),d.lanes=4194304);C.isBackwards?(W.sibling=d.child,d.child=W):(m=C.last,m!==null?m.sibling=W:d.child=W,C.last=W)}return C.tail!==null?(d=C.tail,C.rendering=d,C.tail=d.sibling,C.renderingStartTime=Xe(),d.sibling=null,m=Mr.current,_r(Mr,v?m&1|2:m&1),d):(rs(d),null);case 22:case 23:return Yv(),v=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==v&&(d.flags|=8192),v&&(d.mode&1)!==0?(ra&1073741824)!==0&&(rs(d),d.subtreeFlags&6&&(d.flags|=8192)):rs(d),null;case 24:return null;case 25:return null}throw Error(r(156,d.tag))}function RR(c,d){switch(av(d),d.tag){case 1:return Os(d.type)&&um(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return Lu(),Tr(Ls),Tr(es),vv(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 5:return gv(d),null;case 13:if(Tr(Mr),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Pu()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return Tr(Mr),null;case 4:return Lu(),null;case 10:return dv(d.type._context),null;case 22:case 23:return Yv(),null;case 24:return null;default:return null}}var Cm=!1,ns=!1,DR=typeof WeakSet=="function"?WeakSet:Set,pt=null;function Mu(c,d){var m=c.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(v){Gr(c,d,v)}else m.current=null}function Mv(c,d,m){try{m()}catch(v){Gr(c,d,v)}}var QN=!1;function FR(c,d){if(Yx=Uo,c=A_(),zx(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var v=m.getSelection&&m.getSelection();if(v&&v.rangeCount!==0){m=v.anchorNode;var E=v.anchorOffset,C=v.focusNode;v=v.focusOffset;try{m.nodeType,C.nodeType}catch{m=null;break e}var W=0,de=-1,ge=-1,Ae=0,qe=0,Ye=c,He=null;t:for(;;){for(var ht;Ye!==m||E!==0&&Ye.nodeType!==3||(de=W+E),Ye!==C||v!==0&&Ye.nodeType!==3||(ge=W+v),Ye.nodeType===3&&(W+=Ye.nodeValue.length),(ht=Ye.firstChild)!==null;)He=Ye,Ye=ht;for(;;){if(Ye===c)break t;if(He===m&&++Ae===E&&(de=W),He===C&&++qe===v&&(ge=W),(ht=Ye.nextSibling)!==null)break;Ye=He,He=Ye.parentNode}Ye=ht}m=de===-1||ge===-1?null:{start:de,end:ge}}else m=null}m=m||{start:0,end:0}}else m=null;for(Qx={focusedElem:c,selectionRange:m},Uo=!1,pt=d;pt!==null;)if(d=pt,c=d.child,(d.subtreeFlags&1028)!==0&&c!==null)c.return=d,pt=c;else for(;pt!==null;){d=pt;try{var gt=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var vt=gt.memoizedProps,rn=gt.memoizedState,Ne=d.stateNode,ye=Ne.getSnapshotBeforeUpdate(d.elementType===d.type?vt:Ga(d.type,vt),rn);Ne.__reactInternalSnapshotBeforeUpdate=ye}break;case 3:var ke=d.stateNode.containerInfo;ke.nodeType===1?ke.textContent="":ke.nodeType===9&&ke.documentElement&&ke.removeChild(ke.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Je){Gr(d,d.return,Je)}if(c=d.sibling,c!==null){c.return=d.return,pt=c;break}pt=d.return}return gt=QN,QN=!1,gt}function Ch(c,d,m){var v=d.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var E=v=v.next;do{if((E.tag&c)===c){var C=E.destroy;E.destroy=void 0,C!==void 0&&Mv(d,m,C)}E=E.next}while(E!==v)}}function Im(c,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&c)===c){var v=m.create;m.destroy=v()}m=m.next}while(m!==d)}}function Vv(c){var d=c.ref;if(d!==null){var m=c.stateNode;switch(c.tag){case 5:c=m;break;default:c=m}typeof d=="function"?d(c):d.current=c}}function JN(c){var d=c.alternate;d!==null&&(c.alternate=null,JN(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&(delete d[gi],delete d[yh],delete d[tv],delete d[xR],delete d[vR])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function ZN(c){return c.tag===5||c.tag===3||c.tag===4}function eE(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||ZN(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Bv(c,d,m){var v=c.tag;if(v===5||v===6)c=c.stateNode,d?m.nodeType===8?m.parentNode.insertBefore(c,d):m.insertBefore(c,d):(m.nodeType===8?(d=m.parentNode,d.insertBefore(c,m)):(d=m,d.appendChild(c)),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=lm));else if(v!==4&&(c=c.child,c!==null))for(Bv(c,d,m),c=c.sibling;c!==null;)Bv(c,d,m),c=c.sibling}function Uv(c,d,m){var v=c.tag;if(v===5||v===6)c=c.stateNode,d?m.insertBefore(c,d):m.appendChild(c);else if(v!==4&&(c=c.child,c!==null))for(Uv(c,d,m),c=c.sibling;c!==null;)Uv(c,d,m),c=c.sibling}var $n=null,Ka=!1;function Yo(c,d,m){for(m=m.child;m!==null;)tE(c,d,m),m=m.sibling}function tE(c,d,m){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Ys,m)}catch{}switch(m.tag){case 5:ns||Mu(m,d);case 6:var v=$n,E=Ka;$n=null,Yo(c,d,m),$n=v,Ka=E,$n!==null&&(Ka?(c=$n,m=m.stateNode,c.nodeType===8?c.parentNode.removeChild(m):c.removeChild(m)):$n.removeChild(m.stateNode));break;case 18:$n!==null&&(Ka?(c=$n,m=m.stateNode,c.nodeType===8?ev(c.parentNode,m):c.nodeType===1&&ev(c,m),$a(c)):ev($n,m.stateNode));break;case 4:v=$n,E=Ka,$n=m.stateNode.containerInfo,Ka=!0,Yo(c,d,m),$n=v,Ka=E;break;case 0:case 11:case 14:case 15:if(!ns&&(v=m.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){E=v=v.next;do{var C=E,W=C.destroy;C=C.tag,W!==void 0&&((C&2)!==0||(C&4)!==0)&&Mv(m,d,W),E=E.next}while(E!==v)}Yo(c,d,m);break;case 1:if(!ns&&(Mu(m,d),v=m.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=m.memoizedProps,v.state=m.memoizedState,v.componentWillUnmount()}catch(de){Gr(m,d,de)}Yo(c,d,m);break;case 21:Yo(c,d,m);break;case 22:m.mode&1?(ns=(v=ns)||m.memoizedState!==null,Yo(c,d,m),ns=v):Yo(c,d,m);break;default:Yo(c,d,m)}}function rE(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var m=c.stateNode;m===null&&(m=c.stateNode=new DR),d.forEach(function(v){var E=HR.bind(null,c,v);m.has(v)||(m.add(v),v.then(E,E))})}}function Xa(c,d){var m=d.deletions;if(m!==null)for(var v=0;v<m.length;v++){var E=m[v];try{var C=c,W=d,de=W;e:for(;de!==null;){switch(de.tag){case 5:$n=de.stateNode,Ka=!1;break e;case 3:$n=de.stateNode.containerInfo,Ka=!0;break e;case 4:$n=de.stateNode.containerInfo,Ka=!0;break e}de=de.return}if($n===null)throw Error(r(160));tE(C,W,E),$n=null,Ka=!1;var ge=E.alternate;ge!==null&&(ge.return=null),E.return=null}catch(Ae){Gr(E,d,Ae)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)nE(d,c),d=d.sibling}function nE(c,d){var m=c.alternate,v=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Xa(d,c),yi(c),v&4){try{Ch(3,c,c.return),Im(3,c)}catch(vt){Gr(c,c.return,vt)}try{Ch(5,c,c.return)}catch(vt){Gr(c,c.return,vt)}}break;case 1:Xa(d,c),yi(c),v&512&&m!==null&&Mu(m,m.return);break;case 5:if(Xa(d,c),yi(c),v&512&&m!==null&&Mu(m,m.return),c.flags&32){var E=c.stateNode;try{it(E,"")}catch(vt){Gr(c,c.return,vt)}}if(v&4&&(E=c.stateNode,E!=null)){var C=c.memoizedProps,W=m!==null?m.memoizedProps:C,de=c.type,ge=c.updateQueue;if(c.updateQueue=null,ge!==null)try{de==="input"&&C.type==="radio"&&C.name!=null&&me(E,C),Ps(de,W);var Ae=Ps(de,C);for(W=0;W<ge.length;W+=2){var qe=ge[W],Ye=ge[W+1];qe==="style"?un(E,Ye):qe==="dangerouslySetInnerHTML"?Bt(E,Ye):qe==="children"?it(E,Ye):k(E,qe,Ye,Ae)}switch(de){case"input":ee(E,C);break;case"textarea":Me(E,C);break;case"select":var He=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!C.multiple;var ht=C.value;ht!=null?ot(E,!!C.multiple,ht,!1):He!==!!C.multiple&&(C.defaultValue!=null?ot(E,!!C.multiple,C.defaultValue,!0):ot(E,!!C.multiple,C.multiple?[]:"",!1))}E[yh]=C}catch(vt){Gr(c,c.return,vt)}}break;case 6:if(Xa(d,c),yi(c),v&4){if(c.stateNode===null)throw Error(r(162));E=c.stateNode,C=c.memoizedProps;try{E.nodeValue=C}catch(vt){Gr(c,c.return,vt)}}break;case 3:if(Xa(d,c),yi(c),v&4&&m!==null&&m.memoizedState.isDehydrated)try{$a(d.containerInfo)}catch(vt){Gr(c,c.return,vt)}break;case 4:Xa(d,c),yi(c);break;case 13:Xa(d,c),yi(c),E=c.child,E.flags&8192&&(C=E.memoizedState!==null,E.stateNode.isHidden=C,!C||E.alternate!==null&&E.alternate.memoizedState!==null||(Hv=Xe())),v&4&&rE(c);break;case 22:if(qe=m!==null&&m.memoizedState!==null,c.mode&1?(ns=(Ae=ns)||qe,Xa(d,c),ns=Ae):Xa(d,c),yi(c),v&8192){if(Ae=c.memoizedState!==null,(c.stateNode.isHidden=Ae)&&!qe&&(c.mode&1)!==0)for(pt=c,qe=c.child;qe!==null;){for(Ye=pt=qe;pt!==null;){switch(He=pt,ht=He.child,He.tag){case 0:case 11:case 14:case 15:Ch(4,He,He.return);break;case 1:Mu(He,He.return);var gt=He.stateNode;if(typeof gt.componentWillUnmount=="function"){v=He,m=He.return;try{d=v,gt.props=d.memoizedProps,gt.state=d.memoizedState,gt.componentWillUnmount()}catch(vt){Gr(v,m,vt)}}break;case 5:Mu(He,He.return);break;case 22:if(He.memoizedState!==null){iE(Ye);continue}}ht!==null?(ht.return=He,pt=ht):iE(Ye)}qe=qe.sibling}e:for(qe=null,Ye=c;;){if(Ye.tag===5){if(qe===null){qe=Ye;try{E=Ye.stateNode,Ae?(C=E.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none"):(de=Ye.stateNode,ge=Ye.memoizedProps.style,W=ge!=null&&ge.hasOwnProperty("display")?ge.display:null,de.style.display=lr("display",W))}catch(vt){Gr(c,c.return,vt)}}}else if(Ye.tag===6){if(qe===null)try{Ye.stateNode.nodeValue=Ae?"":Ye.memoizedProps}catch(vt){Gr(c,c.return,vt)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===c)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===c)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===c)break e;qe===Ye&&(qe=null),Ye=Ye.return}qe===Ye&&(qe=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:Xa(d,c),yi(c),v&4&&rE(c);break;case 21:break;default:Xa(d,c),yi(c)}}function yi(c){var d=c.flags;if(d&2){try{e:{for(var m=c.return;m!==null;){if(ZN(m)){var v=m;break e}m=m.return}throw Error(r(160))}switch(v.tag){case 5:var E=v.stateNode;v.flags&32&&(it(E,""),v.flags&=-33);var C=eE(c);Uv(c,C,E);break;case 3:case 4:var W=v.stateNode.containerInfo,de=eE(c);Bv(c,de,W);break;default:throw Error(r(161))}}catch(ge){Gr(c,c.return,ge)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function LR(c,d,m){pt=c,sE(c)}function sE(c,d,m){for(var v=(c.mode&1)!==0;pt!==null;){var E=pt,C=E.child;if(E.tag===22&&v){var W=E.memoizedState!==null||Cm;if(!W){var de=E.alternate,ge=de!==null&&de.memoizedState!==null||ns;de=Cm;var Ae=ns;if(Cm=W,(ns=ge)&&!Ae)for(pt=E;pt!==null;)W=pt,ge=W.child,W.tag===22&&W.memoizedState!==null?oE(E):ge!==null?(ge.return=W,pt=ge):oE(E);for(;C!==null;)pt=C,sE(C),C=C.sibling;pt=E,Cm=de,ns=Ae}aE(c)}else(E.subtreeFlags&8772)!==0&&C!==null?(C.return=E,pt=C):aE(c)}}function aE(c){for(;pt!==null;){var d=pt;if((d.flags&8772)!==0){var m=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:ns||Im(5,d);break;case 1:var v=d.stateNode;if(d.flags&4&&!ns)if(m===null)v.componentDidMount();else{var E=d.elementType===d.type?m.memoizedProps:Ga(d.type,m.memoizedProps);v.componentDidUpdate(E,m.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var C=d.updateQueue;C!==null&&iN(d,C,v);break;case 3:var W=d.updateQueue;if(W!==null){if(m=null,d.child!==null)switch(d.child.tag){case 5:m=d.child.stateNode;break;case 1:m=d.child.stateNode}iN(d,W,m)}break;case 5:var de=d.stateNode;if(m===null&&d.flags&4){m=de;var ge=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":ge.autoFocus&&m.focus();break;case"img":ge.src&&(m.src=ge.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Ae=d.alternate;if(Ae!==null){var qe=Ae.memoizedState;if(qe!==null){var Ye=qe.dehydrated;Ye!==null&&$a(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}ns||d.flags&512&&Vv(d)}catch(He){Gr(d,d.return,He)}}if(d===c){pt=null;break}if(m=d.sibling,m!==null){m.return=d.return,pt=m;break}pt=d.return}}function iE(c){for(;pt!==null;){var d=pt;if(d===c){pt=null;break}var m=d.sibling;if(m!==null){m.return=d.return,pt=m;break}pt=d.return}}function oE(c){for(;pt!==null;){var d=pt;try{switch(d.tag){case 0:case 11:case 15:var m=d.return;try{Im(4,d)}catch(ge){Gr(d,m,ge)}break;case 1:var v=d.stateNode;if(typeof v.componentDidMount=="function"){var E=d.return;try{v.componentDidMount()}catch(ge){Gr(d,E,ge)}}var C=d.return;try{Vv(d)}catch(ge){Gr(d,C,ge)}break;case 5:var W=d.return;try{Vv(d)}catch(ge){Gr(d,W,ge)}}}catch(ge){Gr(d,d.return,ge)}if(d===c){pt=null;break}var de=d.sibling;if(de!==null){de.return=d.return,pt=de;break}pt=d.return}}var OR=Math.ceil,Pm=F.ReactCurrentDispatcher,zv=F.ReactCurrentOwner,_a=F.ReactCurrentBatchConfig,tr=0,Cn=null,hn=null,Hn=0,ra=0,Vu=Wo(0),bn=0,Ih=null,oc=0,Rm=0,$v=0,Ph=null,Vs=null,Hv=0,Bu=1/0,Ji=null,Dm=!1,Wv=null,Qo=null,Fm=!1,Jo=null,Lm=0,Rh=0,qv=null,Om=-1,Mm=0;function Ss(){return(tr&6)!==0?Xe():Om!==-1?Om:Om=Xe()}function Zo(c){return(c.mode&1)===0?1:(tr&2)!==0&&Hn!==0?Hn&-Hn:wR.transition!==null?(Mm===0&&(Mm=Xl()),Mm):(c=Yt,c!==0||(c=window.event,c=c===void 0?16:oh(c.type)),c)}function Ya(c,d,m,v){if(50<Rh)throw Rh=0,qv=null,Error(r(185));Oo(c,m,v),((tr&2)===0||c!==Cn)&&(c===Cn&&((tr&2)===0&&(Rm|=m),bn===4&&el(c,Hn)),Bs(c,v),m===1&&tr===0&&(d.mode&1)===0&&(Bu=Xe()+500,hm&&Go()))}function Bs(c,d){var m=c.callbackNode;Bi(c,d);var v=Kl(c,c===Cn?Hn:0);if(v===0)m!==null&&et(m),c.callbackNode=null,c.callbackPriority=0;else if(d=v&-v,c.callbackPriority!==d){if(m!=null&&et(m),d===1)c.tag===0?yR(cE.bind(null,c)):K_(cE.bind(null,c)),pR(function(){(tr&6)===0&&Go()}),m=null;else{switch(Vo(v)){case 1:m=cr;break;case 4:m=ar;break;case 16:m=fr;break;case 536870912:m=ui;break;default:m=fr}m=xE(m,lE.bind(null,c))}c.callbackPriority=d,c.callbackNode=m}}function lE(c,d){if(Om=-1,Mm=0,(tr&6)!==0)throw Error(r(327));var m=c.callbackNode;if(Uu()&&c.callbackNode!==m)return null;var v=Kl(c,c===Cn?Hn:0);if(v===0)return null;if((v&30)!==0||(v&c.expiredLanes)!==0||d)d=Vm(c,v);else{d=v;var E=tr;tr|=2;var C=dE();(Cn!==c||Hn!==d)&&(Ji=null,Bu=Xe()+500,cc(c,d));do try{BR();break}catch(de){uE(c,de)}while(!0);uv(),Pm.current=C,tr=E,hn!==null?d=0:(Cn=null,Hn=0,d=bn)}if(d!==0){if(d===2&&(E=Qs(c),E!==0&&(v=E,d=Gv(c,E))),d===1)throw m=Ih,cc(c,0),el(c,v),Bs(c,Xe()),m;if(d===6)el(c,v);else{if(E=c.current.alternate,(v&30)===0&&!MR(E)&&(d=Vm(c,v),d===2&&(C=Qs(c),C!==0&&(v=C,d=Gv(c,C))),d===1))throw m=Ih,cc(c,0),el(c,v),Bs(c,Xe()),m;switch(c.finishedWork=E,c.finishedLanes=v,d){case 0:case 1:throw Error(r(345));case 2:uc(c,Vs,Ji);break;case 3:if(el(c,v),(v&130023424)===v&&(d=Hv+500-Xe(),10<d)){if(Kl(c,0)!==0)break;if(E=c.suspendedLanes,(E&v)!==v){Ss(),c.pingedLanes|=c.suspendedLanes&E;break}c.timeoutHandle=Zx(uc.bind(null,c,Vs,Ji),d);break}uc(c,Vs,Ji);break;case 4:if(el(c,v),(v&4194240)===v)break;for(d=c.eventTimes,E=-1;0<v;){var W=31-Sr(v);C=1<<W,W=d[W],W>E&&(E=W),v&=~C}if(v=E,v=Xe()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*OR(v/1960))-v,10<v){c.timeoutHandle=Zx(uc.bind(null,c,Vs,Ji),v);break}uc(c,Vs,Ji);break;case 5:uc(c,Vs,Ji);break;default:throw Error(r(329))}}}return Bs(c,Xe()),c.callbackNode===m?lE.bind(null,c):null}function Gv(c,d){var m=Ph;return c.current.memoizedState.isDehydrated&&(cc(c,d).flags|=256),c=Vm(c,d),c!==2&&(d=Vs,Vs=m,d!==null&&Kv(d)),c}function Kv(c){Vs===null?Vs=c:Vs.push.apply(Vs,c)}function MR(c){for(var d=c;;){if(d.flags&16384){var m=d.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var v=0;v<m.length;v++){var E=m[v],C=E.getSnapshot;E=E.value;try{if(!Wa(C(),E))return!1}catch{return!1}}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function el(c,d){for(d&=~$v,d&=~Rm,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var m=31-Sr(d),v=1<<m;c[m]=-1,d&=~v}}function cE(c){if((tr&6)!==0)throw Error(r(327));Uu();var d=Kl(c,0);if((d&1)===0)return Bs(c,Xe()),null;var m=Vm(c,d);if(c.tag!==0&&m===2){var v=Qs(c);v!==0&&(d=v,m=Gv(c,v))}if(m===1)throw m=Ih,cc(c,0),el(c,d),Bs(c,Xe()),m;if(m===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,uc(c,Vs,Ji),Bs(c,Xe()),null}function Xv(c,d){var m=tr;tr|=1;try{return c(d)}finally{tr=m,tr===0&&(Bu=Xe()+500,hm&&Go())}}function lc(c){Jo!==null&&Jo.tag===0&&(tr&6)===0&&Uu();var d=tr;tr|=1;var m=_a.transition,v=Yt;try{if(_a.transition=null,Yt=1,c)return c()}finally{Yt=v,_a.transition=m,tr=d,(tr&6)===0&&Go()}}function Yv(){ra=Vu.current,Tr(Vu)}function cc(c,d){c.finishedWork=null,c.finishedLanes=0;var m=c.timeoutHandle;if(m!==-1&&(c.timeoutHandle=-1,mR(m)),hn!==null)for(m=hn.return;m!==null;){var v=m;switch(av(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&um();break;case 3:Lu(),Tr(Ls),Tr(es),vv();break;case 5:gv(v);break;case 4:Lu();break;case 13:Tr(Mr);break;case 19:Tr(Mr);break;case 10:dv(v.type._context);break;case 22:case 23:Yv()}m=m.return}if(Cn=c,hn=c=tl(c.current,null),Hn=ra=d,bn=0,Ih=null,$v=Rm=oc=0,Vs=Ph=null,sc!==null){for(d=0;d<sc.length;d++)if(m=sc[d],v=m.interleaved,v!==null){m.interleaved=null;var E=v.next,C=m.pending;if(C!==null){var W=C.next;C.next=E,v.next=W}m.pending=v}sc=null}return c}function uE(c,d){do{var m=hn;try{if(uv(),_m.current=km,Nm){for(var v=Vr.memoizedState;v!==null;){var E=v.queue;E!==null&&(E.pending=null),v=v.next}Nm=!1}if(ic=0,An=wn=Vr=null,Sh=!1,kh=0,zv.current=null,m===null||m.return===null){bn=1,Ih=d,hn=null;break}e:{var C=c,W=m.return,de=m,ge=d;if(d=Hn,de.flags|=32768,ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Ae=ge,qe=de,Ye=qe.tag;if((qe.mode&1)===0&&(Ye===0||Ye===11||Ye===15)){var He=qe.alternate;He?(qe.updateQueue=He.updateQueue,qe.memoizedState=He.memoizedState,qe.lanes=He.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var ht=FN(W);if(ht!==null){ht.flags&=-257,LN(ht,W,de,C,d),ht.mode&1&&DN(C,Ae,d),d=ht,ge=Ae;var gt=d.updateQueue;if(gt===null){var vt=new Set;vt.add(ge),d.updateQueue=vt}else gt.add(ge);break e}else{if((d&1)===0){DN(C,Ae,d),Qv();break e}ge=Error(r(426))}}else if(Lr&&de.mode&1){var rn=FN(W);if(rn!==null){(rn.flags&65536)===0&&(rn.flags|=256),LN(rn,W,de,C,d),lv(Ou(ge,de));break e}}C=ge=Ou(ge,de),bn!==4&&(bn=2),Ph===null?Ph=[C]:Ph.push(C),C=W;do{switch(C.tag){case 3:C.flags|=65536,d&=-d,C.lanes|=d;var Ne=PN(C,ge,d);aN(C,Ne);break e;case 1:de=ge;var ye=C.type,ke=C.stateNode;if((C.flags&128)===0&&(typeof ye.getDerivedStateFromError=="function"||ke!==null&&typeof ke.componentDidCatch=="function"&&(Qo===null||!Qo.has(ke)))){C.flags|=65536,d&=-d,C.lanes|=d;var Je=RN(C,de,d);aN(C,Je);break e}}C=C.return}while(C!==null)}fE(m)}catch(yt){d=yt,hn===m&&m!==null&&(hn=m=m.return);continue}break}while(!0)}function dE(){var c=Pm.current;return Pm.current=km,c===null?km:c}function Qv(){(bn===0||bn===3||bn===2)&&(bn=4),Cn===null||(oc&268435455)===0&&(Rm&268435455)===0||el(Cn,Hn)}function Vm(c,d){var m=tr;tr|=2;var v=dE();(Cn!==c||Hn!==d)&&(Ji=null,cc(c,d));do try{VR();break}catch(E){uE(c,E)}while(!0);if(uv(),tr=m,Pm.current=v,hn!==null)throw Error(r(261));return Cn=null,Hn=0,bn}function VR(){for(;hn!==null;)hE(hn)}function BR(){for(;hn!==null&&!dt();)hE(hn)}function hE(c){var d=gE(c.alternate,c,ra);c.memoizedProps=c.pendingProps,d===null?fE(c):hn=d,zv.current=null}function fE(c){var d=c;do{var m=d.alternate;if(c=d.return,(d.flags&32768)===0){if(m=PR(m,d,ra),m!==null){hn=m;return}}else{if(m=RR(m,d),m!==null){m.flags&=32767,hn=m;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{bn=6,hn=null;return}}if(d=d.sibling,d!==null){hn=d;return}hn=d=c}while(d!==null);bn===0&&(bn=5)}function uc(c,d,m){var v=Yt,E=_a.transition;try{_a.transition=null,Yt=1,UR(c,d,m,v)}finally{_a.transition=E,Yt=v}return null}function UR(c,d,m,v){do Uu();while(Jo!==null);if((tr&6)!==0)throw Error(r(327));m=c.finishedWork;var E=c.finishedLanes;if(m===null)return null;if(c.finishedWork=null,c.finishedLanes=0,m===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var C=m.lanes|m.childLanes;if(wr(c,C),c===Cn&&(hn=Cn=null,Hn=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||Fm||(Fm=!0,xE(fr,function(){return Uu(),null})),C=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||C){C=_a.transition,_a.transition=null;var W=Yt;Yt=1;var de=tr;tr|=4,zv.current=null,FR(c,m),nE(m,c),oR(Qx),Uo=!!Yx,Qx=Yx=null,c.current=m,LR(m),Qe(),tr=de,Yt=W,_a.transition=C}else c.current=m;if(Fm&&(Fm=!1,Jo=c,Lm=E),C=c.pendingLanes,C===0&&(Qo=null),Do(m.stateNode),Bs(c,Xe()),d!==null)for(v=c.onRecoverableError,m=0;m<d.length;m++)E=d[m],v(E.value,{componentStack:E.stack,digest:E.digest});if(Dm)throw Dm=!1,c=Wv,Wv=null,c;return(Lm&1)!==0&&c.tag!==0&&Uu(),C=c.pendingLanes,(C&1)!==0?c===qv?Rh++:(Rh=0,qv=c):Rh=0,Go(),null}function Uu(){if(Jo!==null){var c=Vo(Lm),d=_a.transition,m=Yt;try{if(_a.transition=null,Yt=16>c?16:c,Jo===null)var v=!1;else{if(c=Jo,Jo=null,Lm=0,(tr&6)!==0)throw Error(r(331));var E=tr;for(tr|=4,pt=c.current;pt!==null;){var C=pt,W=C.child;if((pt.flags&16)!==0){var de=C.deletions;if(de!==null){for(var ge=0;ge<de.length;ge++){var Ae=de[ge];for(pt=Ae;pt!==null;){var qe=pt;switch(qe.tag){case 0:case 11:case 15:Ch(8,qe,C)}var Ye=qe.child;if(Ye!==null)Ye.return=qe,pt=Ye;else for(;pt!==null;){qe=pt;var He=qe.sibling,ht=qe.return;if(JN(qe),qe===Ae){pt=null;break}if(He!==null){He.return=ht,pt=He;break}pt=ht}}}var gt=C.alternate;if(gt!==null){var vt=gt.child;if(vt!==null){gt.child=null;do{var rn=vt.sibling;vt.sibling=null,vt=rn}while(vt!==null)}}pt=C}}if((C.subtreeFlags&2064)!==0&&W!==null)W.return=C,pt=W;else e:for(;pt!==null;){if(C=pt,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:Ch(9,C,C.return)}var Ne=C.sibling;if(Ne!==null){Ne.return=C.return,pt=Ne;break e}pt=C.return}}var ye=c.current;for(pt=ye;pt!==null;){W=pt;var ke=W.child;if((W.subtreeFlags&2064)!==0&&ke!==null)ke.return=W,pt=ke;else e:for(W=ye;pt!==null;){if(de=pt,(de.flags&2048)!==0)try{switch(de.tag){case 0:case 11:case 15:Im(9,de)}}catch(yt){Gr(de,de.return,yt)}if(de===W){pt=null;break e}var Je=de.sibling;if(Je!==null){Je.return=de.return,pt=Je;break e}pt=de.return}}if(tr=E,Go(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Ys,c)}catch{}v=!0}return v}finally{Yt=m,_a.transition=d}}return!1}function mE(c,d,m){d=Ou(m,d),d=PN(c,d,1),c=Xo(c,d,1),d=Ss(),c!==null&&(Oo(c,1,d),Bs(c,d))}function Gr(c,d,m){if(c.tag===3)mE(c,c,m);else for(;d!==null;){if(d.tag===3){mE(d,c,m);break}else if(d.tag===1){var v=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Qo===null||!Qo.has(v))){c=Ou(m,c),c=RN(d,c,1),d=Xo(d,c,1),c=Ss(),d!==null&&(Oo(d,1,c),Bs(d,c));break}}d=d.return}}function zR(c,d,m){var v=c.pingCache;v!==null&&v.delete(d),d=Ss(),c.pingedLanes|=c.suspendedLanes&m,Cn===c&&(Hn&m)===m&&(bn===4||bn===3&&(Hn&130023424)===Hn&&500>Xe()-Hv?cc(c,0):$v|=m),Bs(c,d)}function pE(c,d){d===0&&((c.mode&1)===0?d=1:(d=uu,uu<<=1,(uu&130023424)===0&&(uu=4194304)));var m=Ss();c=Xi(c,d),c!==null&&(Oo(c,d,m),Bs(c,m))}function $R(c){var d=c.memoizedState,m=0;d!==null&&(m=d.retryLane),pE(c,m)}function HR(c,d){var m=0;switch(c.tag){case 13:var v=c.stateNode,E=c.memoizedState;E!==null&&(m=E.retryLane);break;case 19:v=c.stateNode;break;default:throw Error(r(314))}v!==null&&v.delete(d),pE(c,m)}var gE;gE=function(c,d,m){if(c!==null)if(c.memoizedProps!==d.pendingProps||Ls.current)Ms=!0;else{if((c.lanes&m)===0&&(d.flags&128)===0)return Ms=!1,IR(c,d,m);Ms=(c.flags&131072)!==0}else Ms=!1,Lr&&(d.flags&1048576)!==0&&X_(d,mm,d.index);switch(d.lanes=0,d.tag){case 2:var v=d.type;Am(c,d),c=d.pendingProps;var E=Au(d,es.current);Fu(d,m),E=bv(null,d,v,c,E,m);var C=_v();return d.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Os(v)?(C=!0,dm(d)):C=!1,d.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,mv(d),E.updater=Tm,d.stateNode=E,E._reactInternals=d,jv(d,v,c,m),d=Pv(null,d,v,!0,C,m)):(d.tag=0,Lr&&C&&sv(d),Es(null,d,E,m),d=d.child),d;case 16:v=d.elementType;e:{switch(Am(c,d),c=d.pendingProps,E=v._init,v=E(v._payload),d.type=v,E=d.tag=qR(v),c=Ga(v,c),E){case 0:d=Iv(null,d,v,c,m);break e;case 1:d=zN(null,d,v,c,m);break e;case 11:d=ON(null,d,v,c,m);break e;case 14:d=MN(null,d,v,Ga(v.type,c),m);break e}throw Error(r(306,v,""))}return d;case 0:return v=d.type,E=d.pendingProps,E=d.elementType===v?E:Ga(v,E),Iv(c,d,v,E,m);case 1:return v=d.type,E=d.pendingProps,E=d.elementType===v?E:Ga(v,E),zN(c,d,v,E,m);case 3:e:{if($N(d),c===null)throw Error(r(387));v=d.pendingProps,C=d.memoizedState,E=C.element,sN(c,d),wm(d,v,null,m);var W=d.memoizedState;if(v=W.element,C.isDehydrated)if(C={element:v,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},d.updateQueue.baseState=C,d.memoizedState=C,d.flags&256){E=Ou(Error(r(423)),d),d=HN(c,d,v,m,E);break e}else if(v!==E){E=Ou(Error(r(424)),d),d=HN(c,d,v,m,E);break e}else for(ta=Ho(d.stateNode.containerInfo.firstChild),ea=d,Lr=!0,qa=null,m=rN(d,null,v,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Pu(),v===E){d=Qi(c,d,m);break e}Es(c,d,v,m)}d=d.child}return d;case 5:return oN(d),c===null&&ov(d),v=d.type,E=d.pendingProps,C=c!==null?c.memoizedProps:null,W=E.children,Jx(v,E)?W=null:C!==null&&Jx(v,C)&&(d.flags|=32),UN(c,d),Es(c,d,W,m),d.child;case 6:return c===null&&ov(d),null;case 13:return WN(c,d,m);case 4:return pv(d,d.stateNode.containerInfo),v=d.pendingProps,c===null?d.child=Ru(d,null,v,m):Es(c,d,v,m),d.child;case 11:return v=d.type,E=d.pendingProps,E=d.elementType===v?E:Ga(v,E),ON(c,d,v,E,m);case 7:return Es(c,d,d.pendingProps,m),d.child;case 8:return Es(c,d,d.pendingProps.children,m),d.child;case 12:return Es(c,d,d.pendingProps.children,m),d.child;case 10:e:{if(v=d.type._context,E=d.pendingProps,C=d.memoizedProps,W=E.value,_r(xm,v._currentValue),v._currentValue=W,C!==null)if(Wa(C.value,W)){if(C.children===E.children&&!Ls.current){d=Qi(c,d,m);break e}}else for(C=d.child,C!==null&&(C.return=d);C!==null;){var de=C.dependencies;if(de!==null){W=C.child;for(var ge=de.firstContext;ge!==null;){if(ge.context===v){if(C.tag===1){ge=Yi(-1,m&-m),ge.tag=2;var Ae=C.updateQueue;if(Ae!==null){Ae=Ae.shared;var qe=Ae.pending;qe===null?ge.next=ge:(ge.next=qe.next,qe.next=ge),Ae.pending=ge}}C.lanes|=m,ge=C.alternate,ge!==null&&(ge.lanes|=m),hv(C.return,m,d),de.lanes|=m;break}ge=ge.next}}else if(C.tag===10)W=C.type===d.type?null:C.child;else if(C.tag===18){if(W=C.return,W===null)throw Error(r(341));W.lanes|=m,de=W.alternate,de!==null&&(de.lanes|=m),hv(W,m,d),W=C.sibling}else W=C.child;if(W!==null)W.return=C;else for(W=C;W!==null;){if(W===d){W=null;break}if(C=W.sibling,C!==null){C.return=W.return,W=C;break}W=W.return}C=W}Es(c,d,E.children,m),d=d.child}return d;case 9:return E=d.type,v=d.pendingProps.children,Fu(d,m),E=wa(E),v=v(E),d.flags|=1,Es(c,d,v,m),d.child;case 14:return v=d.type,E=Ga(v,d.pendingProps),E=Ga(v.type,E),MN(c,d,v,E,m);case 15:return VN(c,d,d.type,d.pendingProps,m);case 17:return v=d.type,E=d.pendingProps,E=d.elementType===v?E:Ga(v,E),Am(c,d),d.tag=1,Os(v)?(c=!0,dm(d)):c=!1,Fu(d,m),CN(d,v,E),jv(d,v,E,m),Pv(null,d,v,!0,c,m);case 19:return GN(c,d,m);case 22:return BN(c,d,m)}throw Error(r(156,d.tag))};function xE(c,d){return Ge(c,d)}function WR(c,d,m,v){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Na(c,d,m,v){return new WR(c,d,m,v)}function Jv(c){return c=c.prototype,!(!c||!c.isReactComponent)}function qR(c){if(typeof c=="function")return Jv(c)?1:0;if(c!=null){if(c=c.$$typeof,c===O)return 11;if(c===Z)return 14}return 2}function tl(c,d){var m=c.alternate;return m===null?(m=Na(c.tag,d,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=d,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&14680064,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,d=c.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m}function Bm(c,d,m,v,E,C){var W=2;if(v=c,typeof c=="function")Jv(c)&&(W=1);else if(typeof c=="string")W=5;else e:switch(c){case N:return dc(m.children,E,C,d);case T:W=8,E|=8;break;case R:return c=Na(12,m,d,E|2),c.elementType=R,c.lanes=C,c;case D:return c=Na(13,m,d,E),c.elementType=D,c.lanes=C,c;case ie:return c=Na(19,m,d,E),c.elementType=ie,c.lanes=C,c;case H:return Um(m,E,C,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case B:W=10;break e;case z:W=9;break e;case O:W=11;break e;case Z:W=14;break e;case ne:W=16,v=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return d=Na(W,m,d,E),d.elementType=c,d.type=v,d.lanes=C,d}function dc(c,d,m,v){return c=Na(7,c,v,d),c.lanes=m,c}function Um(c,d,m,v){return c=Na(22,c,v,d),c.elementType=H,c.lanes=m,c.stateNode={isHidden:!1},c}function Zv(c,d,m){return c=Na(6,c,null,d),c.lanes=m,c}function ey(c,d,m){return d=Na(4,c.children!==null?c.children:[],c.key,d),d.lanes=m,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function GR(c,d,m,v,E){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lo(0),this.expirationTimes=Lo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lo(0),this.identifierPrefix=v,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function ty(c,d,m,v,E,C,W,de,ge){return c=new GR(c,d,m,de,ge),d===1?(d=1,C===!0&&(d|=8)):d=0,C=Na(3,null,null,d),c.current=C,C.stateNode=c,C.memoizedState={element:v,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},mv(C),c}function KR(c,d,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:v==null?null:""+v,children:c,containerInfo:d,implementation:m}}function vE(c){if(!c)return qo;c=c._reactInternals;e:{if(ue(c)!==c||c.tag!==1)throw Error(r(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Os(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(r(171))}if(c.tag===1){var m=c.type;if(Os(m))return q_(c,m,d)}return d}function yE(c,d,m,v,E,C,W,de,ge){return c=ty(m,v,!0,c,E,C,W,de,ge),c.context=vE(null),m=c.current,v=Ss(),E=Zo(m),C=Yi(v,E),C.callback=d??null,Xo(m,C,E),c.current.lanes=E,Oo(c,E,v),Bs(c,v),c}function zm(c,d,m,v){var E=d.current,C=Ss(),W=Zo(E);return m=vE(m),d.context===null?d.context=m:d.pendingContext=m,d=Yi(C,W),d.payload={element:c},v=v===void 0?null:v,v!==null&&(d.callback=v),c=Xo(E,d,W),c!==null&&(Ya(c,E,W,C),ym(c,E,W)),W}function $m(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function wE(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<d?m:d}}function ry(c,d){wE(c,d),(c=c.alternate)&&wE(c,d)}function XR(){return null}var bE=typeof reportError=="function"?reportError:function(c){console.error(c)};function ny(c){this._internalRoot=c}Hm.prototype.render=ny.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(r(409));zm(c,d,null,null)},Hm.prototype.unmount=ny.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;lc(function(){zm(null,c,null,null)}),d[Wi]=null}};function Hm(c){this._internalRoot=c}Hm.prototype.unstable_scheduleHydration=function(c){if(c){var d=H0();c={blockedOn:null,target:c,priority:d};for(var m=0;m<hi.length&&d!==0&&d<hi[m].priority;m++);hi.splice(m,0,c),m===0&&G0(c)}};function sy(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function Wm(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function _E(){}function YR(c,d,m,v,E){if(E){if(typeof v=="function"){var C=v;v=function(){var Ae=$m(W);C.call(Ae)}}var W=yE(d,v,c,0,null,!1,!1,"",_E);return c._reactRootContainer=W,c[Wi]=W.current,xh(c.nodeType===8?c.parentNode:c),lc(),W}for(;E=c.lastChild;)c.removeChild(E);if(typeof v=="function"){var de=v;v=function(){var Ae=$m(ge);de.call(Ae)}}var ge=ty(c,0,!1,null,null,!1,!1,"",_E);return c._reactRootContainer=ge,c[Wi]=ge.current,xh(c.nodeType===8?c.parentNode:c),lc(function(){zm(d,ge,m,v)}),ge}function qm(c,d,m,v,E){var C=m._reactRootContainer;if(C){var W=C;if(typeof E=="function"){var de=E;E=function(){var ge=$m(W);de.call(ge)}}zm(d,W,c,E)}else W=YR(m,d,c,E,v);return $m(W)}z0=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var m=Fo(d.pendingLanes);m!==0&&(Mo(d,m|1),Bs(d,Xe()),(tr&6)===0&&(Bu=Xe()+500,Go()))}break;case 13:lc(function(){var v=Xi(c,1);if(v!==null){var E=Ss();Ya(v,c,1,E)}}),ry(c,1)}},du=function(c){if(c.tag===13){var d=Xi(c,134217728);if(d!==null){var m=Ss();Ya(d,c,134217728,m)}ry(c,134217728)}},$0=function(c){if(c.tag===13){var d=Zo(c),m=Xi(c,d);if(m!==null){var v=Ss();Ya(m,c,d,v)}ry(c,d)}},H0=function(){return Yt},W0=function(c,d){var m=Yt;try{return Yt=c,d()}finally{Yt=m}},pa=function(c,d,m){switch(d){case"input":if(ee(c,m),d=m.name,m.type==="radio"&&d!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<m.length;d++){var v=m[d];if(v!==c&&v.form===c.form){var E=cm(v);if(!E)throw Error(r(90));re(v),ee(v,E)}}}break;case"textarea":Me(c,m);break;case"select":d=m.value,d!=null&&ot(c,!!m.multiple,d,!1)}},Bn=Xv,ql=lc;var QR={usingClientEntryPoint:!1,Events:[wh,Tu,cm,Er,Tn,Xv]},Dh={findFiberByHostInstance:ec,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JR={bundleType:Dh.bundleType,version:Dh.version,rendererPackageName:Dh.rendererPackageName,rendererConfig:Dh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=Te(c),c===null?null:c.stateNode},findFiberByHostInstance:Dh.findFiberByHostInstance||XR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gm.isDisabled&&Gm.supportsFiber)try{Ys=Gm.inject(JR),tn=Gm}catch{}}return Us.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QR,Us.createPortal=function(c,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sy(d))throw Error(r(200));return KR(c,d,null,m)},Us.createRoot=function(c,d){if(!sy(c))throw Error(r(299));var m=!1,v="",E=bE;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onRecoverableError!==void 0&&(E=d.onRecoverableError)),d=ty(c,1,!1,null,null,m,!1,v,E),c[Wi]=d.current,xh(c.nodeType===8?c.parentNode:c),new ny(d)},Us.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=Te(d),c=c===null?null:c.stateNode,c},Us.flushSync=function(c){return lc(c)},Us.hydrate=function(c,d,m){if(!Wm(d))throw Error(r(200));return qm(null,c,d,!0,m)},Us.hydrateRoot=function(c,d,m){if(!sy(c))throw Error(r(405));var v=m!=null&&m.hydratedSources||null,E=!1,C="",W=bE;if(m!=null&&(m.unstable_strictMode===!0&&(E=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onRecoverableError!==void 0&&(W=m.onRecoverableError)),d=yE(d,null,c,1,m??null,E,!1,C,W),c[Wi]=d.current,xh(c),v)for(c=0;c<v.length;c++)m=v[c],E=m._getVersion,E=E(m._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[m,E]:d.mutableSourceEagerHydrationData.push(m,E);return new Hm(d)},Us.render=function(c,d,m){if(!Wm(d))throw Error(r(200));return qm(null,c,d,!1,m)},Us.unmountComponentAtNode=function(c){if(!Wm(c))throw Error(r(40));return c._reactRootContainer?(lc(function(){qm(null,null,c,!1,function(){c._reactRootContainer=null,c[Wi]=null})}),!0):!1},Us.unstable_batchedUpdates=Xv,Us.unstable_renderSubtreeIntoContainer=function(c,d,m,v){if(!Wm(m))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return qm(c,d,m,!1,v)},Us.version="18.3.1-next-f1338f8080-20240426",Us}var IE;function bj(){if(IE)return oy.exports;IE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),oy.exports=lD(),oy.exports}var PE;function cD(){if(PE)return Km;PE=1;var t=bj();return Km.createRoot=t.createRoot,Km.hydrateRoot=t.hydrateRoot,Km}var uD=cD(),S=_w();const Ac=bw(S),dD=rD({__proto__:null,default:Ac},[S]);bj();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wf(){return wf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wf.apply(this,arguments)}var fl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fl||(fl={}));const RE="popstate";function hD(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:o,hash:l}=n.location;return o1("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Dp(s)}return mD(e,r,null,t)}function on(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _j(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fD(){return Math.random().toString(36).substr(2,8)}function DE(t,e){return{usr:t.state,key:t.key,idx:e}}function o1(t,e,r,n){return r===void 0&&(r=null),wf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Od(e):e,{state:r,key:e&&e.key||n||fD()})}function Dp(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Od(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function mD(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=fl.Pop,u=null,h=f();h==null&&(h=0,o.replaceState(wf({},o.state,{idx:h}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=fl.Pop;let _=f(),P=_==null?null:_-h;h=_,u&&u({action:l,location:b.location,delta:P})}function g(_,P){l=fl.Push;let A=o1(b.location,_,P);h=f()+1;let k=DE(A,h),F=b.createHref(A);try{o.pushState(k,"",F)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(F)}i&&u&&u({action:l,location:b.location,delta:1})}function y(_,P){l=fl.Replace;let A=o1(b.location,_,P);h=f();let k=DE(A,h),F=b.createHref(A);o.replaceState(k,"",F),i&&u&&u({action:l,location:b.location,delta:0})}function w(_){let P=s.location.origin!=="null"?s.location.origin:s.location.href,A=typeof _=="string"?_:Dp(_);return A=A.replace(/ $/,"%20"),on(P,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,P)}let b={get action(){return l},get location(){return t(s,o)},listen(_){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(RE,p),u=_,()=>{s.removeEventListener(RE,p),u=null}},createHref(_){return e(s,_)},createURL:w,encodeLocation(_){let P=w(_);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:g,replace:y,go(_){return o.go(_)}};return b}var FE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(FE||(FE={}));function pD(t,e,r){return r===void 0&&(r="/"),gD(t,e,r)}function gD(t,e,r,n){let s=typeof e=="string"?Od(e):e,i=Nw(s.pathname||"/",r);if(i==null)return null;let o=Nj(t);xD(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let h=AD(i);l=kD(o[u],h)}return l}function Nj(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(on(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let h=xl([n,u.relativePath]),f=r.concat(u);i.children&&i.children.length>0&&(on(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Nj(i.children,e,f,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:ED(h,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of Ej(i.path))s(i,o,u)}),e}function Ej(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Ej(n.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function xD(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:SD(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const vD=/^:[\w-]+$/,yD=3,wD=2,bD=1,_D=10,ND=-2,LE=t=>t==="*";function ED(t,e){let r=t.split("/"),n=r.length;return r.some(LE)&&(n+=ND),e&&(n+=wD),r.filter(s=>!LE(s)).reduce((s,i)=>s+(vD.test(i)?yD:i===""?bD:_D),n)}function SD(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function kD(t,e,r){let{routesMeta:n}=t,s={},i="/",o=[];for(let l=0;l<n.length;++l){let u=n[l],h=l===n.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=TD({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),g=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:xl([i,p.pathname]),pathnameBase:RD(xl([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=xl([i,p.pathnameBase]))}return o}function TD(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=jD(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((h,f,p)=>{let{paramName:g,isOptional:y}=f;if(g==="*"){let b=l[p]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const w=l[p];return y&&!w?h[g]=void 0:h[g]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:t}}function jD(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),_j(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function AD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _j(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Nw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function CD(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Od(t):t;return{pathname:r?r.startsWith("/")?r:ID(r,e):e,search:DD(n),hash:FD(s)}}function ID(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function uy(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PD(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Ew(t,e){let r=PD(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Sw(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=Od(t):(s=wf({},t),on(!s.pathname||!s.pathname.includes("?"),uy("?","pathname","search",s)),on(!s.pathname||!s.pathname.includes("#"),uy("#","pathname","hash",s)),on(!s.search||!s.search.includes("#"),uy("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let p=e.length-1;if(!n&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}l=p>=0?e[p]:"/"}let u=CD(s,l),h=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}const xl=t=>t.join("/").replace(/\/\/+/g,"/"),RD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function LD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Sj=["post","put","patch","delete"];new Set(Sj);const OD=["get",...Sj];new Set(OD);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bf(){return bf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bf.apply(this,arguments)}const kw=S.createContext(null),MD=S.createContext(null),Ll=S.createContext(null),Ag=S.createContext(null),So=S.createContext({outlet:null,matches:[],isDataRoute:!1}),kj=S.createContext(null);function VD(t,e){let{relative:r}=e===void 0?{}:e;Md()||on(!1);let{basename:n,navigator:s}=S.useContext(Ll),{hash:i,pathname:o,search:l}=jj(t,{relative:r}),u=o;return n!=="/"&&(u=o==="/"?n:xl([n,o])),s.createHref({pathname:u,search:l,hash:i})}function Md(){return S.useContext(Ag)!=null}function Ol(){return Md()||on(!1),S.useContext(Ag).location}function Tj(t){S.useContext(Ll).static||S.useLayoutEffect(t)}function Zn(){let{isDataRoute:t}=S.useContext(So);return t?JD():BD()}function BD(){Md()||on(!1);let t=S.useContext(kw),{basename:e,future:r,navigator:n}=S.useContext(Ll),{matches:s}=S.useContext(So),{pathname:i}=Ol(),o=JSON.stringify(Ew(s,r.v7_relativeSplatPath)),l=S.useRef(!1);return Tj(()=>{l.current=!0}),S.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){n.go(h);return}let p=Sw(h,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:xl([e,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[e,n,o,i,t])}function Cg(){let{matches:t}=S.useContext(So),e=t[t.length-1];return e?e.params:{}}function jj(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=S.useContext(Ll),{matches:s}=S.useContext(So),{pathname:i}=Ol(),o=JSON.stringify(Ew(s,n.v7_relativeSplatPath));return S.useMemo(()=>Sw(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function UD(t,e){return zD(t,e)}function zD(t,e,r,n){Md()||on(!1);let{navigator:s}=S.useContext(Ll),{matches:i}=S.useContext(So),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=Ol(),f;if(e){var p;let _=typeof e=="string"?Od(e):e;u==="/"||(p=_.pathname)!=null&&p.startsWith(u)||on(!1),f=_}else f=h;let g=f.pathname||"/",y=g;if(u!=="/"){let _=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(_.length).join("/")}let w=pD(t,{pathname:y}),b=GD(w&&w.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:xl([u,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:xl([u,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,r,n);return e&&b?S.createElement(Ag.Provider,{value:{location:bf({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:fl.Pop}},b):b}function $D(){let t=QD(),e=LD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),r?S.createElement("pre",{style:s},r):null,null)}const HD=S.createElement($D,null);class WD extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?S.createElement(So.Provider,{value:this.props.routeContext},S.createElement(kj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qD(t){let{routeContext:e,match:r,children:n}=t,s=S.useContext(kw);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(So.Provider,{value:e},n)}function GD(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||on(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,h=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:g,errors:y}=r,w=p.route.loader&&g[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||w){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let y,w=!1,b=null,_=null;r&&(y=l&&p.route.id?l[p.route.id]:void 0,b=p.route.errorElement||HD,u&&(h<0&&g===0?(ZD("route-fallback"),w=!0,_=null):h===g&&(w=!0,_=p.route.hydrateFallbackElement||null)));let P=e.concat(o.slice(0,g+1)),A=()=>{let k;return y?k=b:w?k=_:p.route.Component?k=S.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=f,S.createElement(qD,{match:p,routeContext:{outlet:f,matches:P,isDataRoute:r!=null},children:k})};return r&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?S.createElement(WD,{location:r.location,revalidation:r.revalidation,component:b,error:y,children:A(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):A()},null)}var Aj=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Aj||{}),Cj=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Cj||{});function KD(t){let e=S.useContext(kw);return e||on(!1),e}function XD(t){let e=S.useContext(MD);return e||on(!1),e}function YD(t){let e=S.useContext(So);return e||on(!1),e}function Ij(t){let e=YD(),r=e.matches[e.matches.length-1];return r.route.id||on(!1),r.route.id}function QD(){var t;let e=S.useContext(kj),r=XD(),n=Ij();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function JD(){let{router:t}=KD(Aj.UseNavigateStable),e=Ij(Cj.UseNavigateStable),r=S.useRef(!1);return Tj(()=>{r.current=!0}),S.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,bf({fromRouteId:e},i)))},[t,e])}const OE={};function ZD(t,e,r){OE[t]||(OE[t]=!0)}function eF(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Xr(t){let{to:e,replace:r,state:n,relative:s}=t;Md()||on(!1);let{future:i,static:o}=S.useContext(Ll),{matches:l}=S.useContext(So),{pathname:u}=Ol(),h=Zn(),f=Sw(e,Ew(l,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return S.useEffect(()=>h(JSON.parse(p),{replace:r,state:n,relative:s}),[h,p,s,r,n]),null}function jr(t){on(!1)}function tF(t){let{basename:e="/",children:r=null,location:n,navigationType:s=fl.Pop,navigator:i,static:o=!1,future:l}=t;Md()&&on(!1);let u=e.replace(/^\/*/,"/"),h=S.useMemo(()=>({basename:u,navigator:i,static:o,future:bf({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof n=="string"&&(n=Od(n));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:w="default"}=n,b=S.useMemo(()=>{let _=Nw(f,u);return _==null?null:{location:{pathname:_,search:p,hash:g,state:y,key:w},navigationType:s}},[u,f,p,g,y,w,s]);return b==null?null:S.createElement(Ll.Provider,{value:h},S.createElement(Ag.Provider,{children:r,value:b}))}function rF(t){let{children:e,location:r}=t;return UD(l1(e),r)}new Promise(()=>{});function l1(t,e){e===void 0&&(e=[]);let r=[];return S.Children.forEach(t,(n,s)=>{if(!S.isValidElement(n))return;let i=[...e,s];if(n.type===S.Fragment){r.push.apply(r,l1(n.props.children,i));return}n.type!==jr&&on(!1),!n.props.index||!n.props.children||on(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=l1(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function c1(){return c1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},c1.apply(this,arguments)}function nF(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function sF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aF(t,e){return t.button===0&&(!e||e==="_self")&&!sF(t)}const iF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],oF="6";try{window.__reactRouterVersion=oF}catch{}const lF="startTransition",ME=dD[lF];function cF(t){let{basename:e,children:r,future:n,window:s}=t,i=S.useRef();i.current==null&&(i.current=hD({window:s,v5Compat:!0}));let o=i.current,[l,u]=S.useState({action:o.action,location:o.location}),{v7_startTransition:h}=n||{},f=S.useCallback(p=>{h&&ME?ME(()=>u(p)):u(p)},[u,h]);return S.useLayoutEffect(()=>o.listen(f),[o,f]),S.useEffect(()=>eF(n),[n]),S.createElement(tF,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const uF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ei=S.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:h,preventScrollReset:f,viewTransition:p}=e,g=nF(e,iF),{basename:y}=S.useContext(Ll),w,b=!1;if(typeof h=="string"&&dF.test(h)&&(w=h,uF))try{let k=new URL(window.location.href),F=h.startsWith("//")?new URL(k.protocol+h):new URL(h),L=Nw(F.pathname,y);F.origin===k.origin&&L!=null?h=L+F.search+F.hash:b=!0}catch{}let _=VD(h,{relative:s}),P=hF(h,{replace:o,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:p});function A(k){n&&n(k),k.defaultPrevented||P(k)}return S.createElement("a",c1({},g,{href:w||_,onClick:b||i?n:A,ref:r,target:u}))});var VE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(VE||(VE={}));var BE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(BE||(BE={}));function hF(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=Zn(),h=Ol(),f=jj(t,{relative:o});return S.useCallback(p=>{if(aF(p,r)){p.preventDefault();let g=n!==void 0?n:Dp(h)===Dp(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[h,u,f,n,s,r,t,i,o,l])}let fF={data:""},mF=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||fF,pF=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,gF=/\/\*[^]*?\*\/|  +/g,UE=/\n+/g,ll=(t,e)=>{let r="",n="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?ll(o,i):i+"{"+ll(o,i[1]=="k"?"":e)+"}":typeof o=="object"?n+=ll(o,e?e.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=ll.p?ll.p(i,o):i+":"+o+";")}return r+(e&&s?e+"{"+s+"}":s)+n},Zi={},Pj=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+Pj(t[r]);return e}return t},xF=(t,e,r,n,s)=>{let i=Pj(t),o=Zi[i]||(Zi[i]=(u=>{let h=0,f=11;for(;h<u.length;)f=101*f+u.charCodeAt(h++)>>>0;return"go"+f})(i));if(!Zi[o]){let u=i!==t?t:(h=>{let f,p,g=[{}];for(;f=pF.exec(h.replace(gF,""));)f[4]?g.shift():f[3]?(p=f[3].replace(UE," ").trim(),g.unshift(g[0][p]=g[0][p]||{})):g[0][f[1]]=f[2].replace(UE," ").trim();return g[0]})(t);Zi[o]=ll(s?{["@keyframes "+o]:u}:u,r?"":"."+o)}let l=r&&Zi.g?Zi.g:null;return r&&(Zi.g=Zi[o]),((u,h,f,p)=>{p?h.data=h.data.replace(p,u):h.data.indexOf(u)===-1&&(h.data=f?u+h.data:h.data+u)})(Zi[o],e,n,l),o},vF=(t,e,r)=>t.reduce((n,s,i)=>{let o=e[i];if(o&&o.call){let l=o(r),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":ll(l,""):l===!1?"":l}return n+s+(o??"")},"");function Ig(t){let e=this||{},r=t.call?t(e.p):t;return xF(r.unshift?r.raw?vF(r,[].slice.call(arguments,1),e.p):r.reduce((n,s)=>Object.assign(n,s&&s.call?s(e.p):s),{}):r,mF(e.target),e.g,e.o,e.k)}let Rj,u1,d1;Ig.bind({g:1});let mo=Ig.bind({k:1});function yF(t,e,r,n){ll.p=e,Rj=t,u1=r,d1=n}function Ml(t,e){let r=this||{};return function(){let n=arguments;function s(i,o){let l=Object.assign({},i),u=l.className||s.className;r.p=Object.assign({theme:u1&&u1()},l),r.o=/ *go\d+/.test(u),l.className=Ig.apply(r,n)+(u?" "+u:"");let h=t;return t[0]&&(h=l.as||t,delete l.as),d1&&h[0]&&d1(l),Rj(h,l)}return s}}var wF=t=>typeof t=="function",Fp=(t,e)=>wF(t)?t(e):t,bF=(()=>{let t=0;return()=>(++t).toString()})(),Dj=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),_F=20,Fj=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,_F)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:r}=e;return Fj(t,{type:t.toasts.find(i=>i.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=e;return{...t,toasts:t.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},wp=[],vc={toasts:[],pausedAt:void 0},qc=t=>{vc=Fj(vc,t),wp.forEach(e=>{e(vc)})},NF={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},EF=(t={})=>{let[e,r]=S.useState(vc),n=S.useRef(vc);S.useEffect(()=>(n.current!==vc&&r(vc),wp.push(r),()=>{let i=wp.indexOf(r);i>-1&&wp.splice(i,1)}),[]);let s=e.toasts.map(i=>{var o,l,u;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((o=t[i.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((l=t[i.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||NF[i.type],style:{...t.style,...(u=t[i.type])==null?void 0:u.style,...i.style}}});return{...e,toasts:s}},SF=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||bF()}),r0=t=>(e,r)=>{let n=SF(e,t,r);return qc({type:2,toast:n}),n.id},Ie=(t,e)=>r0("blank")(t,e);Ie.error=r0("error");Ie.success=r0("success");Ie.loading=r0("loading");Ie.custom=r0("custom");Ie.dismiss=t=>{qc({type:3,toastId:t})};Ie.remove=t=>qc({type:4,toastId:t});Ie.promise=(t,e,r)=>{let n=Ie.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?Fp(e.success,s):void 0;return i?Ie.success(i,{id:n,...r,...r==null?void 0:r.success}):Ie.dismiss(n),s}).catch(s=>{let i=e.error?Fp(e.error,s):void 0;i?Ie.error(i,{id:n,...r,...r==null?void 0:r.error}):Ie.dismiss(n)}),t};var kF=(t,e)=>{qc({type:1,toast:{id:t,height:e}})},TF=()=>{qc({type:5,time:Date.now()})},Qh=new Map,jF=1e3,AF=(t,e=jF)=>{if(Qh.has(t))return;let r=setTimeout(()=>{Qh.delete(t),qc({type:4,toastId:t})},e);Qh.set(t,r)},CF=t=>{let{toasts:e,pausedAt:r}=EF(t);S.useEffect(()=>{if(r)return;let i=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let u=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(u<0){l.visible&&Ie.dismiss(l.id);return}return setTimeout(()=>Ie.dismiss(l.id),u)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,r]);let n=S.useCallback(()=>{r&&qc({type:6,time:Date.now()})},[r]),s=S.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:u=8,defaultPosition:h}=o||{},f=e.filter(y=>(y.position||h)===(i.position||h)&&y.height),p=f.findIndex(y=>y.id===i.id),g=f.filter((y,w)=>w<p&&y.visible).length;return f.filter(y=>y.visible).slice(...l?[g+1]:[0,g]).reduce((y,w)=>y+(w.height||0)+u,0)},[e]);return S.useEffect(()=>{e.forEach(i=>{if(i.dismissed)AF(i.id,i.removeDelay);else{let o=Qh.get(i.id);o&&(clearTimeout(o),Qh.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:kF,startPause:TF,endPause:n,calculateOffset:s}}},IF=mo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,PF=mo`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,RF=mo`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,DF=Ml("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${IF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${PF} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${RF} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,FF=mo`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,LF=Ml("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${FF} 1s linear infinite;
`,OF=mo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,MF=mo`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,VF=Ml("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${OF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${MF} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,BF=Ml("div")`
  position: absolute;
`,UF=Ml("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,zF=mo`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$F=Ml("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${zF} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,HF=({toast:t})=>{let{icon:e,type:r,iconTheme:n}=t;return e!==void 0?typeof e=="string"?S.createElement($F,null,e):e:r==="blank"?null:S.createElement(UF,null,S.createElement(LF,{...n}),r!=="loading"&&S.createElement(BF,null,r==="error"?S.createElement(DF,{...n}):S.createElement(VF,{...n})))},WF=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,qF=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,GF="0%{opacity:0;} 100%{opacity:1;}",KF="0%{opacity:1;} 100%{opacity:0;}",XF=Ml("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,YF=Ml("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,QF=(t,e)=>{let r=t.includes("top")?1:-1,[n,s]=Dj()?[GF,KF]:[WF(r),qF(r)];return{animation:e?`${mo(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${mo(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},JF=S.memo(({toast:t,position:e,style:r,children:n})=>{let s=t.height?QF(t.position||e||"top-center",t.visible):{opacity:0},i=S.createElement(HF,{toast:t}),o=S.createElement(YF,{...t.ariaProps},Fp(t.message,t));return S.createElement(XF,{className:t.className,style:{...s,...r,...t.style}},typeof n=="function"?n({icon:i,message:o}):S.createElement(S.Fragment,null,i,o))});yF(S.createElement);var ZF=({id:t,className:e,style:r,onHeightUpdate:n,children:s})=>{let i=S.useCallback(o=>{if(o){let l=()=>{let u=o.getBoundingClientRect().height;n(t,u)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return S.createElement("div",{ref:i,className:e,style:r},s)},e8=(t,e)=>{let r=t.includes("top"),n=r?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Dj()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...n,...s}},t8=Ig`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Xm=16,r8=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:n,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:u}=CF(r);return S.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Xm,left:Xm,right:Xm,bottom:Xm,pointerEvents:"none",...i},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(h=>{let f=h.position||e,p=u.calculateOffset(h,{reverseOrder:t,gutter:n,defaultPosition:e}),g=e8(f,p);return S.createElement(ZF,{id:h.id,key:h.id,onHeightUpdate:u.updateHeight,className:h.visible?t8:"",style:g},h.type==="custom"?Fp(h.message,h):s?s(h):S.createElement(JF,{toast:h,position:f}))}))},sa=Ie;const n8=()=>{};var zE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},s8=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],o=t[r++],l=t[r++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Oj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,y=h&63;u||(y=64,o||(g=64)),n.push(r[f],r[p],r[g],r[y])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):s8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const h=s<t.length?r[t.charAt(s)]:64;++s;const p=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||p==null)throw new a8;const g=i<<2|l>>4;if(n.push(g),h!==64){const y=l<<4&240|h>>2;if(n.push(y),p!==64){const w=h<<6&192|p;n.push(w)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class a8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i8=function(t){const e=Lj(t);return Oj.encodeByteArray(e,!0)},Lp=function(t){return i8(t).replace(/\./g,"")},Mj=function(t){try{return Oj.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8=()=>o8().__FIREBASE_DEFAULTS__,c8=()=>{if(typeof process>"u"||typeof zE>"u")return;const t=zE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},u8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Mj(t[1]);return e&&JSON.parse(e)},Pg=()=>{try{return n8()||l8()||c8()||u8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Vj=t=>{var e,r;return(r=(e=Pg())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},d8=t=>{const e=Vj(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Bj=()=>{var t;return(t=Pg())===null||t===void 0?void 0:t.config},Uj=t=>{var e;return(e=Pg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(t){return t.endsWith(".cloudworkstations.dev")}async function zj(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f8(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Lp(JSON.stringify(r)),Lp(JSON.stringify(o)),""].join(".")}const Jh={};function m8(){const t={prod:[],emulator:[]};for(const e of Object.keys(Jh))Jh[e]?t.emulator.push(e):t.prod.push(e);return t}function p8(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let $E=!1;function $j(t,e){if(typeof window>"u"||typeof document>"u"||!Vd(window.location.host)||Jh[t]===e||Jh[t]||$E)return;Jh[t]=e;function r(g){return`__firebase__banner__${g}`}const n="__firebase__banner",i=m8().prod.length>0;function o(){const g=document.getElementById(n);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{$E=!0,o()},g}function f(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=p8(n),y=r("text"),w=document.getElementById(y)||document.createElement("span"),b=r("learnmore"),_=document.getElementById(b)||document.createElement("a"),P=r("preprendIcon"),A=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const k=g.element;l(k),f(_,b);const F=h();u(A,P),k.append(A,w,_,F),document.body.appendChild(k)}i?(w.innerText="Preview backend disconnected.",A.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(A.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xs())}function x8(){var t;const e=(t=Pg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function v8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function y8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function w8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b8(){const t=xs();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _8(){return!x8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N8(){try{return typeof indexedDB=="object"}catch{return!1}}function E8(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8="FirebaseError";class ko extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=S8,Object.setPrototypeOf(this,ko.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,n0.prototype.create)}}class n0{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?k8(i,n):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ko(s,l,n)}}function k8(t,e){return t.replace(T8,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const T8=/\{\$([^}]+)}/g;function j8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function po(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],o=e[s];if(HE(i)&&HE(o)){if(!po(i,o))return!1}else if(i!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function HE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Bh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Uh(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function A8(t,e){const r=new C8(t,e);return r.subscribe.bind(r)}class C8{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");I8(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=dy),s.error===void 0&&(s.error=dy),s.complete===void 0&&(s.complete=dy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function I8(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function dy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(t){return t&&t._delegate?t._delegate:t}class Cc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new h8;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(D8(e))try{this.getOrInitializeService({instanceIdentifier:fc})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=fc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fc){return this.instances.has(e)}getOptions(e=fc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&o.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:R8(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=fc){return this.component?this.component.multipleInstances?e:fc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function R8(t){return t===fc?void 0:t}function D8(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new P8(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Kt||(Kt={}));const L8={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},O8=Kt.INFO,M8={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},V8=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=M8[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tw{constructor(e){this.name=e,this._logLevel=O8,this._logHandler=V8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?L8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...e),this._logHandler(this,Kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...e),this._logHandler(this,Kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...e),this._logHandler(this,Kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...e),this._logHandler(this,Kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...e),this._logHandler(this,Kt.ERROR,...e)}}const B8=(t,e)=>e.some(r=>t instanceof r);let WE,qE;function U8(){return WE||(WE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function z8(){return qE||(qE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hj=new WeakMap,h1=new WeakMap,Wj=new WeakMap,hy=new WeakMap,jw=new WeakMap;function $8(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(vl(t.result)),s()},o=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&Hj.set(r,t)}).catch(()=>{}),jw.set(e,t),e}function H8(t){if(h1.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),s()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});h1.set(t,e)}let f1={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return h1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wj.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return vl(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function W8(t){f1=t(f1)}function q8(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(fy(this),e,...r);return Wj.set(n,e.sort?e.sort():[e]),vl(n)}:z8().includes(t)?function(...e){return t.apply(fy(this),e),vl(Hj.get(this))}:function(...e){return vl(t.apply(fy(this),e))}}function G8(t){return typeof t=="function"?q8(t):(t instanceof IDBTransaction&&H8(t),B8(t,U8())?new Proxy(t,f1):t)}function vl(t){if(t instanceof IDBRequest)return $8(t);if(hy.has(t))return hy.get(t);const e=G8(t);return e!==t&&(hy.set(t,e),jw.set(e,t)),e}const fy=t=>jw.get(t);function K8(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=vl(o);return n&&o.addEventListener("upgradeneeded",u=>{n(vl(o.result),u.oldVersion,u.newVersion,vl(o.transaction),u)}),r&&o.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const X8=["get","getKey","getAll","getAllKeys","count"],Y8=["put","add","delete","clear"],my=new Map;function GE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(my.get(e))return my.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=Y8.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||X8.includes(r)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return n&&(h=h.index(l.shift())),(await Promise.all([h[r](...l),s&&u.done]))[0]};return my.set(e,i),i}W8(t=>({...t,get:(e,r,n)=>GE(e,r)||t.get(e,r,n),has:(e,r)=>!!GE(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(J8(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function J8(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const m1="@firebase/app",KE="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new Tw("@firebase/app"),Z8="@firebase/app-compat",eL="@firebase/analytics-compat",tL="@firebase/analytics",rL="@firebase/app-check-compat",nL="@firebase/app-check",sL="@firebase/auth",aL="@firebase/auth-compat",iL="@firebase/database",oL="@firebase/data-connect",lL="@firebase/database-compat",cL="@firebase/functions",uL="@firebase/functions-compat",dL="@firebase/installations",hL="@firebase/installations-compat",fL="@firebase/messaging",mL="@firebase/messaging-compat",pL="@firebase/performance",gL="@firebase/performance-compat",xL="@firebase/remote-config",vL="@firebase/remote-config-compat",yL="@firebase/storage",wL="@firebase/storage-compat",bL="@firebase/firestore",_L="@firebase/ai",NL="@firebase/firestore-compat",EL="firebase",SL="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="[DEFAULT]",kL={[m1]:"fire-core",[Z8]:"fire-core-compat",[tL]:"fire-analytics",[eL]:"fire-analytics-compat",[nL]:"fire-app-check",[rL]:"fire-app-check-compat",[sL]:"fire-auth",[aL]:"fire-auth-compat",[iL]:"fire-rtdb",[oL]:"fire-data-connect",[lL]:"fire-rtdb-compat",[cL]:"fire-fn",[uL]:"fire-fn-compat",[dL]:"fire-iid",[hL]:"fire-iid-compat",[fL]:"fire-fcm",[mL]:"fire-fcm-compat",[pL]:"fire-perf",[gL]:"fire-perf-compat",[xL]:"fire-rc",[vL]:"fire-rc-compat",[yL]:"fire-gcs",[wL]:"fire-gcs-compat",[bL]:"fire-fst",[NL]:"fire-fst-compat",[_L]:"fire-vertex","fire-js":"fire-js",[EL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=new Map,TL=new Map,g1=new Map;function XE(t,e){try{t.container.addComponent(e)}catch(r){go.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function pd(t){const e=t.name;if(g1.has(e))return go.debug(`There were multiple attempts to register component ${e}.`),!1;g1.set(e,t);for(const r of Op.values())XE(r,t);for(const r of TL.values())XE(r,t);return!0}function Aw(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Pa(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yl=new n0("app","Firebase",jL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Cc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=SL;function qj(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:p1,automaticDataCollectionEnabled:!0},e),s=n.name;if(typeof s!="string"||!s)throw yl.create("bad-app-name",{appName:String(s)});if(r||(r=Bj()),!r)throw yl.create("no-options");const i=Op.get(s);if(i){if(po(r,i.options)&&po(n,i.config))return i;throw yl.create("duplicate-app",{appName:s})}const o=new F8(s);for(const u of g1.values())o.addComponent(u);const l=new AL(r,n,o);return Op.set(s,l),l}function Gj(t=p1){const e=Op.get(t);if(!e&&t===p1&&Bj())return qj();if(!e)throw yl.create("no-app",{appName:t});return e}function wl(t,e,r){var n;let s=(n=kL[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),go.warn(l.join(" "));return}pd(new Cc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="firebase-heartbeat-database",IL=1,_f="firebase-heartbeat-store";let py=null;function Kj(){return py||(py=K8(CL,IL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_f)}catch(r){console.warn(r)}}}}).catch(t=>{throw yl.create("idb-open",{originalErrorMessage:t.message})})),py}async function PL(t){try{const r=(await Kj()).transaction(_f),n=await r.objectStore(_f).get(Xj(t));return await r.done,n}catch(e){if(e instanceof ko)go.warn(e.message);else{const r=yl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});go.warn(r.message)}}}async function YE(t,e){try{const n=(await Kj()).transaction(_f,"readwrite");await n.objectStore(_f).put(e,Xj(t)),await n.done}catch(r){if(r instanceof ko)go.warn(r.message);else{const n=yl.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});go.warn(n.message)}}}function Xj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=1024,DL=30;class FL{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new OL(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=QE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>DL){const o=ML(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){go.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=QE(),{heartbeatsToSend:n,unsentEntries:s}=LL(this._heartbeatsCache.heartbeats),i=Lp(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return go.warn(r),""}}}function QE(){return new Date().toISOString().substring(0,10)}function LL(t,e=RL){const r=[];let n=t.slice();for(const s of t){const i=r.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),JE(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),JE(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class OL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N8()?E8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await PL(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return YE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return YE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function JE(t){return Lp(JSON.stringify({version:2,heartbeats:t})).length}function ML(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t){pd(new Cc("platform-logger",e=>new Q8(e),"PRIVATE")),pd(new Cc("heartbeat",e=>new FL(e),"PRIVATE")),wl(m1,KE,t),wl(m1,KE,"esm2017"),wl("fire-js","")}VL("");function Cw(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Gc(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{h(n.next(f))}catch(p){o(p)}}function u(f){try{h(n.throw(f))}catch(p){o(p)}}function h(f){f.done?i(f.value):s(f.value).then(l,u)}h((n=n.apply(t,e||[])).next())})}function Yj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BL=Yj,Qj=new n0("auth","Firebase",Yj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new Tw("@firebase/auth");function UL(t,...e){Mp.logLevel<=Kt.WARN&&Mp.warn(`Auth (${Bd}): ${t}`,...e)}function bp(t,...e){Mp.logLevel<=Kt.ERROR&&Mp.error(`Auth (${Bd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t,...e){throw Iw(t,...e)}function Ti(t,...e){return Iw(t,...e)}function Jj(t,e,r){const n=Object.assign(Object.assign({},BL()),{[e]:r});return new n0("auth","Firebase",n).create(e,{appName:t.name})}function ao(t){return Jj(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Iw(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return Qj.create(t,...e)}function Ct(t,e,...r){if(!t)throw Iw(e,...r)}function to(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bp(e),new Error(e)}function xo(t,e){t||to(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function zL(){return ZE()==="http:"||ZE()==="https:"}function ZE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zL()||y8()||"connection"in navigator)?navigator.onLine:!0}function HL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,r){this.shortDelay=e,this.longDelay=r,xo(r>e,"Short delay should be less than long delay!"),this.isMobile=g8()||w8()}get(){return $L()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t,e){xo(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;to("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;to("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;to("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GL=new a0(3e4,6e4);function Vl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Fi(t,e,r,n,s={}){return eA(t,s,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const l=s0(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},i);return v8()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Vd(t.emulatorConfig.host)&&(h.credentials="include"),Zj.fetch()(await tA(t,t.config.apiHost,r,l),h)})}async function eA(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},WL),e);try{const s=new XL(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ym(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ym(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ym(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ym(t,"user-disabled",o);const f=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Jj(t,f,h);ai(t,f)}}catch(s){if(s instanceof ko)throw s;ai(t,"network-request-failed",{message:String(s)})}}async function i0(t,e,r,n,s={}){const i=await Fi(t,e,r,n,s);return"mfaPendingCredential"in i&&ai(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function tA(t,e,r,n){const s=`${e}${r}?${n}`,i=t,o=i.config.emulator?Pw(t.config,s):`${t.config.apiScheme}://${s}`;return qL.includes(r)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function KL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ti(this.auth,"network-request-failed")),GL.get())})}}function Ym(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Ti(t,e,n);return s.customData._tokenResponse=r,s}function eS(t){return t!==void 0&&t.enterprise!==void 0}class YL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return KL(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function QL(t,e){return Fi(t,"GET","/v2/recaptchaConfig",Vl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JL(t,e){return Fi(t,"POST","/v1/accounts:delete",e)}async function Vp(t,e){return Fi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZL(t,e=!1){const r=Dr(t),n=await r.getIdToken(e),s=Rw(n);Ct(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Zh(gy(s.auth_time)),issuedAtTime:Zh(gy(s.iat)),expirationTime:Zh(gy(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function gy(t){return Number(t)*1e3}function Rw(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return bp("JWT malformed, contained fewer than 3 sections"),null;try{const s=Mj(r);return s?JSON.parse(s):(bp("Failed to decode base64 JWT payload"),null)}catch(s){return bp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function tS(t){const e=Rw(t);return Ct(e,"internal-error"),Ct(typeof e.exp<"u","internal-error"),Ct(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ic(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof ko&&eO(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function eO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zh(this.lastLoginAt),this.creationTime=Zh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bp(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Ic(t,Vp(r,{idToken:n}));Ct(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?rA(i.providerUserInfo):[],l=nO(t.providerData,o),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?h:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new v1(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function rO(t){const e=Dr(t);await Bp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nO(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function rA(t){return t.map(e=>{var{providerId:r}=e,n=Cw(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(t,e){const r=await eA(t,{},async()=>{const n=s0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await tA(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:n};return t.emulatorConfig&&Vd(t.emulatorConfig.host)&&(u.credentials="include"),Zj.fetch()(o,u)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function aO(t,e){return Fi(t,"POST","/v2/accounts:revokeToken",Vl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ct(e.idToken,"internal-error"),Ct(typeof e.idToken<"u","internal-error"),Ct(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ct(e.length!==0,"internal-error");const r=tS(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ct(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await sO(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,o=new ad;return n&&(Ct(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(Ct(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ct(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ad,this.toJSON())}_performRefresh(){return to("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(t,e){Ct(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ei{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=Cw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new v1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Ic(this,this.stsTokenManager.getToken(this.auth,e));return Ct(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return ZL(this,e)}reload(){return rO(this)}_assign(e){this!==e&&(Ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ei(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Bp(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pa(this.auth.app))return Promise.reject(ao(this.auth));const e=await this.getIdToken();return await Ic(this,JL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,o,l,u,h,f;const p=(n=r.displayName)!==null&&n!==void 0?n:void 0,g=(s=r.email)!==null&&s!==void 0?s:void 0,y=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=r.photoURL)!==null&&o!==void 0?o:void 0,b=(l=r.tenantId)!==null&&l!==void 0?l:void 0,_=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,P=(h=r.createdAt)!==null&&h!==void 0?h:void 0,A=(f=r.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:k,emailVerified:F,isAnonymous:L,providerData:I,stsTokenManager:N}=r;Ct(k&&N,e,"internal-error");const T=ad.fromJSON(this.name,N);Ct(typeof k=="string",e,"internal-error"),nl(p,e.name),nl(g,e.name),Ct(typeof F=="boolean",e,"internal-error"),Ct(typeof L=="boolean",e,"internal-error"),nl(y,e.name),nl(w,e.name),nl(b,e.name),nl(_,e.name),nl(P,e.name),nl(A,e.name);const R=new ei({uid:k,auth:e,email:g,emailVerified:F,displayName:p,isAnonymous:L,photoURL:w,phoneNumber:y,tenantId:b,stsTokenManager:T,createdAt:P,lastLoginAt:A});return I&&Array.isArray(I)&&(R.providerData=I.map(B=>Object.assign({},B))),_&&(R._redirectEventId=_),R}static async _fromIdTokenResponse(e,r,n=!1){const s=new ad;s.updateFromServerResponse(r);const i=new ei({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Bp(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Ct(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?rA(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ad;l.updateFromIdToken(n);const u=new ei({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new v1(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=new Map;function ro(t){xo(t instanceof Function,"Expected a class definition");let e=rS.get(t);return e?(xo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}nA.type="NONE";const nS=nA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t,e,r){return`firebase:${t}:${e}:${r}`}class id{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=_p(this.userKey,s.apiKey,i),this.fullPersistenceKey=_p("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Vp(this.auth,{idToken:e}).catch(()=>{});return r?ei._fromGetAccountInfoResponse(this.auth,r,e):null}return ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new id(ro(nS),e,n);const s=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||ro(nS);const o=_p(n,e.config.apiKey,e.name);let l=null;for(const h of r)try{const f=await h._get(o);if(f){let p;if(typeof f=="string"){const g=await Vp(e,{idToken:f}).catch(()=>{});if(!g)break;p=await ei._fromGetAccountInfoResponse(e,g,f)}else p=ei._fromJSON(e,f);h!==i&&(l=p),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new id(i,e,n):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(r.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new id(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cA(e))return"Blackberry";if(uA(e))return"Webos";if(aA(e))return"Safari";if((e.includes("chrome/")||iA(e))&&!e.includes("edge/"))return"Chrome";if(lA(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function sA(t=xs()){return/firefox\//i.test(t)}function aA(t=xs()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iA(t=xs()){return/crios\//i.test(t)}function oA(t=xs()){return/iemobile/i.test(t)}function lA(t=xs()){return/android/i.test(t)}function cA(t=xs()){return/blackberry/i.test(t)}function uA(t=xs()){return/webos/i.test(t)}function Dw(t=xs()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iO(t=xs()){var e;return Dw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oO(){return b8()&&document.documentMode===10}function dA(t=xs()){return Dw(t)||lA(t)||uA(t)||cA(t)||/windows phone/i.test(t)||oA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t,e=[]){let r;switch(t){case"Browser":r=sS(xs());break;case"Worker":r=`${sS(xs())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Bd}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cO(t,e={}){return Fi(t,"GET","/v2/passwordPolicy",Vl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=6;class dO{constructor(e){var r,n,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:uO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aS(this),this.idTokenSubscription=new aS(this),this.beforeStateQueue=new lO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ro(r)),this._initializationPromise=this.queue(async()=>{var n,s,i;if(!this._deleted&&(this.persistenceManager=await id.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Vp(this,{idToken:e}),n=await ei._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Pa(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Bp(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pa(this.app))return Promise.reject(ao(this));const r=e?Dr(e):null;return r&&Ct(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pa(this.app)?Promise.reject(ao(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pa(this.app)?Promise.reject(ao(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ro(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cO(this),r=new dO(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new n0("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await aO(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ro(e)||this._popupRedirectResolver;Ct(r,this,"argument-error"),this.redirectPersistenceManager=await id.create(this,[ro(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ct(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,s);return()=>{o=!0,u()}}else{const u=e.addObserver(r);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;if(Pa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&UL(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Kc(t){return Dr(t)}class aS{constructor(e){this.auth=e,this.observer=null,this.addObserver=A8(r=>this.observer=r)}get next(){return Ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fO(t){Rg=t}function fA(t){return Rg.loadJS(t)}function mO(){return Rg.recaptchaEnterpriseScript}function pO(){return Rg.gapiScript}function gO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class xO{constructor(){this.enterprise=new vO}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class vO{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const yO="recaptcha-enterprise",mA="NO_RECAPTCHA";class wO{constructor(e){this.type=yO,this.auth=Kc(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{QL(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new YL(u);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;eS(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(mA)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xO().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{n(this.auth).then(l=>{if(!r&&eS(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=mO();u.length!==0&&(u+=l),fA(u).then(()=>{s(l,i,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function iS(t,e,r,n=!1,s=!1){const i=new wO(t);let o;if(s)o=mA;else try{o=await i.verify(r)}catch{o=await i.verify(r,!0)}const l=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function y1(t,e,r,n,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await iS(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await iS(t,e,r,r==="getOobCode");return n(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(t,e){const r=Aw(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(po(i,e??{}))return s;ai(s,"already-initialized")}return r.initialize({options:e})}function _O(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(ro);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function NO(t,e,r){const n=Kc(t);Ct(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=pA(e),{host:o,port:l}=EO(e),u=l===null?"":`:${l}`,h={url:`${i}//${o}${u}/`},f=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Ct(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ct(po(h,n.config.emulator)&&po(f,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=f,n.settings.appVerificationDisabledForTesting=!0,Vd(o)?(zj(`${i}//${o}${u}`),$j("Auth",!0)):SO()}function pA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function EO(t){const e=pA(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:oS(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:oS(o)}}}function oS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function SO(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return to("not implemented")}_getIdTokenResponse(e){return to("not implemented")}_linkToIdToken(e,r){return to("not implemented")}_getReauthenticationResolver(e){return to("not implemented")}}async function kO(t,e){return Fi(t,"POST","/v1/accounts:update",e)}async function TO(t,e){return Fi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(t,e){return i0(t,"POST","/v1/accounts:signInWithPassword",Vl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(t,e){return i0(t,"POST","/v1/accounts:signInWithEmailLink",Vl(t,e))}async function CO(t,e){return i0(t,"POST","/v1/accounts:signInWithEmailLink",Vl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf extends Fw{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Nf(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Nf(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return y1(e,r,"signInWithPassword",jO);case"emailLink":return AO(e,{email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return y1(e,n,"signUpPassword",TO);case"emailLink":return CO(e,{idToken:r,email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function od(t,e){return i0(t,"POST","/v1/accounts:signInWithIdp",Vl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO="http://localhost";class Pc extends Fw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Pc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):ai("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=Cw(r,["providerId","signInMethod"]);if(!n||!s)return null;const o=new Pc(n,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return od(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,od(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,od(e,r)}buildRequest(){const e={requestUri:IO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=s0(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RO(t){const e=Bh(Uh(t)).link,r=e?Bh(Uh(e)).deep_link_id:null,n=Bh(Uh(t)).deep_link_id;return(n?Bh(Uh(n)).link:null)||n||r||e||t}class Lw{constructor(e){var r,n,s,i,o,l;const u=Bh(Uh(e)),h=(r=u.apiKey)!==null&&r!==void 0?r:null,f=(n=u.oobCode)!==null&&n!==void 0?n:null,p=PO((s=u.mode)!==null&&s!==void 0?s:null);Ct(h&&f&&p,"argument-error"),this.apiKey=h,this.operation=p,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=RO(e);try{return new Lw(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this.providerId=Xc.PROVIDER_ID}static credential(e,r){return Nf._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Lw.parseLink(r);return Ct(n,"argument-error"),Nf._fromEmailAndCode(e,n.code,n.tenantId)}}Xc.PROVIDER_ID="password";Xc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0 extends gA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends o0{constructor(){super("facebook.com")}static credential(e){return Pc._fromParams({providerId:cl.PROVIDER_ID,signInMethod:cl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cl.credentialFromTaggedObject(e)}static credentialFromError(e){return cl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cl.credential(e.oauthAccessToken)}catch{return null}}}cl.FACEBOOK_SIGN_IN_METHOD="facebook.com";cl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends o0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Pc._fromParams({providerId:ul.PROVIDER_ID,signInMethod:ul.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ul.credentialFromTaggedObject(e)}static credentialFromError(e){return ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return ul.credential(r,n)}catch{return null}}}ul.GOOGLE_SIGN_IN_METHOD="google.com";ul.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends o0{constructor(){super("github.com")}static credential(e){return Pc._fromParams({providerId:dl.PROVIDER_ID,signInMethod:dl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dl.credentialFromTaggedObject(e)}static credentialFromError(e){return dl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dl.credential(e.oauthAccessToken)}catch{return null}}}dl.GITHUB_SIGN_IN_METHOD="github.com";dl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends o0{constructor(){super("twitter.com")}static credential(e,r){return Pc._fromParams({providerId:hl.PROVIDER_ID,signInMethod:hl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return hl.credentialFromTaggedObject(e)}static credentialFromError(e){return hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return hl.credential(r,n)}catch{return null}}}hl.TWITTER_SIGN_IN_METHOD="twitter.com";hl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DO(t,e){return i0(t,"POST","/v1/accounts:signUp",Vl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await ei._fromIdTokenResponse(e,n,s),o=lS(n);return new Rc({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=lS(n);return new Rc({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function lS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up extends ko{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Up.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new Up(e,r,n,s)}}function xA(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Up._fromErrorAndOperation(t,i,e,n):i})}async function FO(t,e,r=!1){const n=await Ic(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Rc._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vA(t,e,r=!1){const{auth:n}=t;if(Pa(n.app))return Promise.reject(ao(n));const s="reauthenticate";try{const i=await Ic(t,xA(n,s,e,t),r);Ct(i.idToken,n,"internal-error");const o=Rw(i.idToken);Ct(o,n,"internal-error");const{sub:l}=o;return Ct(t.uid===l,n,"user-mismatch"),Rc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ai(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(t,e,r=!1){if(Pa(t.app))return Promise.reject(ao(t));const n="signIn",s=await xA(t,n,e),i=await Rc._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function LO(t,e){return yA(Kc(t),e)}async function OO(t,e){return vA(Dr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(t){const e=Kc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cS(t,e,r){if(Pa(t.app))return Promise.reject(ao(t));const n=Kc(t),o=await y1(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",DO).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&wA(t),u}),l=await Rc._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function MO(t,e,r){return Pa(t.app)?Promise.reject(ao(t)):LO(Dr(t),Xc.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&wA(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VO(t,e){return Fi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xy(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=Dr(t),i={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await Ic(n,VO(n.auth,i));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const l=n.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function BO(t,e){return UO(Dr(t),null,e)}async function UO(t,e,r){const{auth:n}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};r&&(i.password=r);const o=await Ic(t,kO(n,i));await t._updateTokensIfNecessary(o,!0)}function zO(t,e,r,n){return Dr(t).onIdTokenChanged(e,r,n)}function $O(t,e,r){return Dr(t).beforeAuthStateChanged(e,r)}function HO(t,e,r,n){return Dr(t).onAuthStateChanged(e,r,n)}function WO(t){return Dr(t).signOut()}const zp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(zp,"1"),this.storage.removeItem(zp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=1e3,GO=10;class _A extends bA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);oO()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,GO):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},qO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}_A.type="LOCAL";const KO=_A;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA extends bA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}NA.type="SESSION";const EA=NA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Dg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(o).map(async h=>h(r.origin,i)),u=await XO(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const h=Ow("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(){return window}function QO(t){ji().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(){return typeof ji().WorkerGlobalScope<"u"&&typeof ji().importScripts=="function"}async function JO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function eM(){return SA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="firebaseLocalStorageDb",tM=1,$p="firebaseLocalStorage",TA="fbase_key";class l0{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Fg(t,e){return t.transaction([$p],e?"readwrite":"readonly").objectStore($p)}function rM(){const t=indexedDB.deleteDatabase(kA);return new l0(t).toPromise()}function w1(){const t=indexedDB.open(kA,tM);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore($p,{keyPath:TA})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains($p)?e(n):(n.close(),await rM(),e(await w1()))})})}async function uS(t,e,r){const n=Fg(t,!0).put({[TA]:e,value:r});return new l0(n).toPromise()}async function nM(t,e){const r=Fg(t,!1).get(e),n=await new l0(r).toPromise();return n===void 0?null:n.value}function dS(t,e){const r=Fg(t,!0).delete(e);return new l0(r).toPromise()}const sM=800,aM=3;class jA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await w1(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>aM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return SA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dg._getInstance(eM()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await JO(),!this.activeServiceWorker)return;this.sender=new YO(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await w1();return await uS(e,zp,"1"),await dS(e,zp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>uS(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>nM(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>dS(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Fg(s,!1).getAll();return new l0(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jA.type="LOCAL";const iM=jA;new a0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(t,e){return e?ro(e):(Ct(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw extends Fw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return od(e,this._buildIdpRequest())}_linkToIdToken(e,r){return od(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return od(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function lM(t){return yA(t.auth,new Mw(t),t.bypassAuthState)}function cM(t){const{auth:e,user:r}=t;return Ct(r,e,"internal-error"),vA(r,new Mw(t),t.bypassAuthState)}async function uM(t){const{auth:e,user:r}=t;return Ct(r,e,"internal-error"),FO(r,new Mw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lM;case"linkViaPopup":case"linkViaRedirect":return uM;case"reauthViaPopup":case"reauthViaRedirect":return cM;default:ai(this.auth,"internal-error")}}resolve(e){xo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=new a0(2e3,1e4);class Qu extends AA{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Qu.currentPopupAction&&Qu.currentPopupAction.cancel(),Qu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ct(e,this.auth,"internal-error"),e}async onExecution(){xo(this.filter.length===1,"Popup operations only handle one event");const e=Ow();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dM.get())};e()}}Qu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="pendingRedirect",Np=new Map;class fM extends AA{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Np.get(this.auth._key());if(!e){try{const n=await mM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Np.set(this.auth._key(),e)}return this.bypassAuthState||Np.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mM(t,e){const r=xM(e),n=gM(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function pM(t,e){Np.set(t._key(),e)}function gM(t){return ro(t._redirectPersistence)}function xM(t){return _p(hM,t.config.apiKey,t.name)}async function vM(t,e,r=!1){if(Pa(t.app))return Promise.reject(ao(t));const n=Kc(t),s=oM(n,e),o=await new fM(n,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=10*60*1e3;class wM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bM(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!CA(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Ti(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yM&&this.cachedEventUids.clear(),this.cachedEventUids.has(hS(e))}saveEventToCache(e){this.cachedEventUids.add(hS(e)),this.lastProcessedEventTime=Date.now()}}function hS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(t,e={}){return Fi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EM=/^https?/;async function SM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _M(t);for(const r of e)try{if(kM(r))return}catch{}ai(t,"unauthorized-domain")}function kM(t){const e=x1(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!EM.test(r))return!1;if(NM.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=new a0(3e4,6e4);function fS(){const t=ji().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function jM(t){return new Promise((e,r)=>{var n,s,i;function o(){fS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fS(),r(Ti(t,"network-request-failed"))},timeout:TM.get()})}if(!((s=(n=ji().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ji().gapi)===null||i===void 0)&&i.load)o();else{const l=gO("iframefcb");return ji()[l]=()=>{gapi.load?o():r(Ti(t,"network-request-failed"))},fA(`${pO()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw Ep=null,e})}let Ep=null;function AM(t){return Ep=Ep||jM(t),Ep}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=new a0(5e3,15e3),IM="__/auth/iframe",PM="emulator/auth/iframe",RM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FM(t){const e=t.config;Ct(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Pw(e,PM):`https://${t.config.authDomain}/${IM}`,n={apiKey:e.apiKey,appName:t.name,v:Bd},s=DM.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${s0(n).slice(1)}`}async function LM(t){const e=await AM(t),r=ji().gapi;return Ct(r,t,"internal-error"),e.open({where:document.body,url:FM(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RM,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const o=Ti(t,"network-request-failed"),l=ji().setTimeout(()=>{i(o)},CM.get());function u(){ji().clearTimeout(l),s(n)}n.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MM=500,VM=600,BM="_blank",UM="http://localhost";class mS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zM(t,e,r,n=MM,s=VM){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const u=Object.assign(Object.assign({},OM),{width:n.toString(),height:s.toString(),top:i,left:o}),h=xs().toLowerCase();r&&(l=iA(h)?BM:r),sA(h)&&(e=e||UM,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(iO(h)&&l!=="_self")return $M(e||"",l),new mS(null);const p=window.open(e||"",l,f);Ct(p,t,"popup-blocked");try{p.focus()}catch{}return new mS(p)}function $M(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM="__/auth/handler",WM="emulator/auth/handler",qM=encodeURIComponent("fac");async function pS(t,e,r,n,s,i){Ct(t.config.authDomain,t,"auth-domain-config-required"),Ct(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Bd,eventId:s};if(e instanceof gA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",j8(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof o0){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),h=u?`#${qM}=${encodeURIComponent(u)}`:"";return`${GM(t)}?${s0(l).slice(1)}${h}`}function GM({config:t}){return t.emulator?Pw(t,WM):`https://${t.authDomain}/${HM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="webStorageSupport";class KM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EA,this._completeRedirectFn=vM,this._overrideRedirectResult=pM}async _openPopup(e,r,n,s){var i;xo((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await pS(e,r,n,x1(),s);return zM(e,o,Ow())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await pS(e,r,n,x1(),s);return QO(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(xo(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await LM(e),n=new wM(e);return r.register("authEvent",s=>(Ct(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(vy,{type:vy},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[vy];o!==void 0&&r(!!o),ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=SM(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return dA()||aA()||Dw()}}const XM=KM;var gS="@firebase/auth",xS="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JM(t){pd(new Cc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Ct(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hA(t)},h=new hO(n,s,i,u);return _O(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),pd(new Cc("auth-internal",e=>{const r=Kc(e.getProvider("auth").getImmediate());return(n=>new YM(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),wl(gS,xS,QM(t)),wl(gS,xS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=5*60,e9=Uj("authIdTokenMaxAge")||ZM;let vS=null;const t9=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>e9)return;const s=r==null?void 0:r.token;vS!==s&&(vS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function r9(t=Gj()){const e=Aw(t,"auth");if(e.isInitialized())return e.getImmediate();const r=bO(t,{popupRedirectResolver:XM,persistence:[iM,KO,EA]}),n=Uj("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=t9(i.toString());$O(r,o,()=>o(r.currentUser)),zO(r,l=>o(l))}}const s=Vj("auth");return s&&NO(r,`http://${s}`),r}function n9(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}fO({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=Ti("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",n9().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JM("Browser");var yS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bl,IA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,T){function R(){}R.prototype=T.prototype,N.D=T.prototype,N.prototype=new R,N.prototype.constructor=N,N.C=function(B,z,O){for(var D=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)D[ie-2]=arguments[ie];return T.prototype[z].apply(B,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,T,R){R||(R=0);var B=Array(16);if(typeof T=="string")for(var z=0;16>z;++z)B[z]=T.charCodeAt(R++)|T.charCodeAt(R++)<<8|T.charCodeAt(R++)<<16|T.charCodeAt(R++)<<24;else for(z=0;16>z;++z)B[z]=T[R++]|T[R++]<<8|T[R++]<<16|T[R++]<<24;T=N.g[0],R=N.g[1],z=N.g[2];var O=N.g[3],D=T+(O^R&(z^O))+B[0]+3614090360&4294967295;T=R+(D<<7&4294967295|D>>>25),D=O+(z^T&(R^z))+B[1]+3905402710&4294967295,O=T+(D<<12&4294967295|D>>>20),D=z+(R^O&(T^R))+B[2]+606105819&4294967295,z=O+(D<<17&4294967295|D>>>15),D=R+(T^z&(O^T))+B[3]+3250441966&4294967295,R=z+(D<<22&4294967295|D>>>10),D=T+(O^R&(z^O))+B[4]+4118548399&4294967295,T=R+(D<<7&4294967295|D>>>25),D=O+(z^T&(R^z))+B[5]+1200080426&4294967295,O=T+(D<<12&4294967295|D>>>20),D=z+(R^O&(T^R))+B[6]+2821735955&4294967295,z=O+(D<<17&4294967295|D>>>15),D=R+(T^z&(O^T))+B[7]+4249261313&4294967295,R=z+(D<<22&4294967295|D>>>10),D=T+(O^R&(z^O))+B[8]+1770035416&4294967295,T=R+(D<<7&4294967295|D>>>25),D=O+(z^T&(R^z))+B[9]+2336552879&4294967295,O=T+(D<<12&4294967295|D>>>20),D=z+(R^O&(T^R))+B[10]+4294925233&4294967295,z=O+(D<<17&4294967295|D>>>15),D=R+(T^z&(O^T))+B[11]+2304563134&4294967295,R=z+(D<<22&4294967295|D>>>10),D=T+(O^R&(z^O))+B[12]+1804603682&4294967295,T=R+(D<<7&4294967295|D>>>25),D=O+(z^T&(R^z))+B[13]+4254626195&4294967295,O=T+(D<<12&4294967295|D>>>20),D=z+(R^O&(T^R))+B[14]+2792965006&4294967295,z=O+(D<<17&4294967295|D>>>15),D=R+(T^z&(O^T))+B[15]+1236535329&4294967295,R=z+(D<<22&4294967295|D>>>10),D=T+(z^O&(R^z))+B[1]+4129170786&4294967295,T=R+(D<<5&4294967295|D>>>27),D=O+(R^z&(T^R))+B[6]+3225465664&4294967295,O=T+(D<<9&4294967295|D>>>23),D=z+(T^R&(O^T))+B[11]+643717713&4294967295,z=O+(D<<14&4294967295|D>>>18),D=R+(O^T&(z^O))+B[0]+3921069994&4294967295,R=z+(D<<20&4294967295|D>>>12),D=T+(z^O&(R^z))+B[5]+3593408605&4294967295,T=R+(D<<5&4294967295|D>>>27),D=O+(R^z&(T^R))+B[10]+38016083&4294967295,O=T+(D<<9&4294967295|D>>>23),D=z+(T^R&(O^T))+B[15]+3634488961&4294967295,z=O+(D<<14&4294967295|D>>>18),D=R+(O^T&(z^O))+B[4]+3889429448&4294967295,R=z+(D<<20&4294967295|D>>>12),D=T+(z^O&(R^z))+B[9]+568446438&4294967295,T=R+(D<<5&4294967295|D>>>27),D=O+(R^z&(T^R))+B[14]+3275163606&4294967295,O=T+(D<<9&4294967295|D>>>23),D=z+(T^R&(O^T))+B[3]+4107603335&4294967295,z=O+(D<<14&4294967295|D>>>18),D=R+(O^T&(z^O))+B[8]+1163531501&4294967295,R=z+(D<<20&4294967295|D>>>12),D=T+(z^O&(R^z))+B[13]+2850285829&4294967295,T=R+(D<<5&4294967295|D>>>27),D=O+(R^z&(T^R))+B[2]+4243563512&4294967295,O=T+(D<<9&4294967295|D>>>23),D=z+(T^R&(O^T))+B[7]+1735328473&4294967295,z=O+(D<<14&4294967295|D>>>18),D=R+(O^T&(z^O))+B[12]+2368359562&4294967295,R=z+(D<<20&4294967295|D>>>12),D=T+(R^z^O)+B[5]+4294588738&4294967295,T=R+(D<<4&4294967295|D>>>28),D=O+(T^R^z)+B[8]+2272392833&4294967295,O=T+(D<<11&4294967295|D>>>21),D=z+(O^T^R)+B[11]+1839030562&4294967295,z=O+(D<<16&4294967295|D>>>16),D=R+(z^O^T)+B[14]+4259657740&4294967295,R=z+(D<<23&4294967295|D>>>9),D=T+(R^z^O)+B[1]+2763975236&4294967295,T=R+(D<<4&4294967295|D>>>28),D=O+(T^R^z)+B[4]+1272893353&4294967295,O=T+(D<<11&4294967295|D>>>21),D=z+(O^T^R)+B[7]+4139469664&4294967295,z=O+(D<<16&4294967295|D>>>16),D=R+(z^O^T)+B[10]+3200236656&4294967295,R=z+(D<<23&4294967295|D>>>9),D=T+(R^z^O)+B[13]+681279174&4294967295,T=R+(D<<4&4294967295|D>>>28),D=O+(T^R^z)+B[0]+3936430074&4294967295,O=T+(D<<11&4294967295|D>>>21),D=z+(O^T^R)+B[3]+3572445317&4294967295,z=O+(D<<16&4294967295|D>>>16),D=R+(z^O^T)+B[6]+76029189&4294967295,R=z+(D<<23&4294967295|D>>>9),D=T+(R^z^O)+B[9]+3654602809&4294967295,T=R+(D<<4&4294967295|D>>>28),D=O+(T^R^z)+B[12]+3873151461&4294967295,O=T+(D<<11&4294967295|D>>>21),D=z+(O^T^R)+B[15]+530742520&4294967295,z=O+(D<<16&4294967295|D>>>16),D=R+(z^O^T)+B[2]+3299628645&4294967295,R=z+(D<<23&4294967295|D>>>9),D=T+(z^(R|~O))+B[0]+4096336452&4294967295,T=R+(D<<6&4294967295|D>>>26),D=O+(R^(T|~z))+B[7]+1126891415&4294967295,O=T+(D<<10&4294967295|D>>>22),D=z+(T^(O|~R))+B[14]+2878612391&4294967295,z=O+(D<<15&4294967295|D>>>17),D=R+(O^(z|~T))+B[5]+4237533241&4294967295,R=z+(D<<21&4294967295|D>>>11),D=T+(z^(R|~O))+B[12]+1700485571&4294967295,T=R+(D<<6&4294967295|D>>>26),D=O+(R^(T|~z))+B[3]+2399980690&4294967295,O=T+(D<<10&4294967295|D>>>22),D=z+(T^(O|~R))+B[10]+4293915773&4294967295,z=O+(D<<15&4294967295|D>>>17),D=R+(O^(z|~T))+B[1]+2240044497&4294967295,R=z+(D<<21&4294967295|D>>>11),D=T+(z^(R|~O))+B[8]+1873313359&4294967295,T=R+(D<<6&4294967295|D>>>26),D=O+(R^(T|~z))+B[15]+4264355552&4294967295,O=T+(D<<10&4294967295|D>>>22),D=z+(T^(O|~R))+B[6]+2734768916&4294967295,z=O+(D<<15&4294967295|D>>>17),D=R+(O^(z|~T))+B[13]+1309151649&4294967295,R=z+(D<<21&4294967295|D>>>11),D=T+(z^(R|~O))+B[4]+4149444226&4294967295,T=R+(D<<6&4294967295|D>>>26),D=O+(R^(T|~z))+B[11]+3174756917&4294967295,O=T+(D<<10&4294967295|D>>>22),D=z+(T^(O|~R))+B[2]+718787259&4294967295,z=O+(D<<15&4294967295|D>>>17),D=R+(O^(z|~T))+B[9]+3951481745&4294967295,N.g[0]=N.g[0]+T&4294967295,N.g[1]=N.g[1]+(z+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+z&4294967295,N.g[3]=N.g[3]+O&4294967295}n.prototype.u=function(N,T){T===void 0&&(T=N.length);for(var R=T-this.blockSize,B=this.B,z=this.h,O=0;O<T;){if(z==0)for(;O<=R;)s(this,N,O),O+=this.blockSize;if(typeof N=="string"){for(;O<T;)if(B[z++]=N.charCodeAt(O++),z==this.blockSize){s(this,B),z=0;break}}else for(;O<T;)if(B[z++]=N[O++],z==this.blockSize){s(this,B),z=0;break}}this.h=z,this.o+=T},n.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var T=1;T<N.length-8;++T)N[T]=0;var R=8*this.o;for(T=N.length-8;T<N.length;++T)N[T]=R&255,R/=256;for(this.u(N),N=Array(16),T=R=0;4>T;++T)for(var B=0;32>B;B+=8)N[R++]=this.g[T]>>>B&255;return N};function i(N,T){var R=l;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=T(N)}function o(N,T){this.h=T;for(var R=[],B=!0,z=N.length-1;0<=z;z--){var O=N[z]|0;B&&O==T||(R[z]=O,B=!1)}this.g=R}var l={};function u(N){return-128<=N&&128>N?i(N,function(T){return new o([T|0],0>T?-1:0)}):new o([N|0],0>N?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return p;if(0>N)return _(h(-N));for(var T=[],R=1,B=0;N>=R;B++)T[B]=N/R|0,R*=4294967296;return new o(T,0)}function f(N,T){if(N.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(N.charAt(0)=="-")return _(f(N.substring(1),T));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=h(Math.pow(T,8)),B=p,z=0;z<N.length;z+=8){var O=Math.min(8,N.length-z),D=parseInt(N.substring(z,z+O),T);8>O?(O=h(Math.pow(T,O)),B=B.j(O).add(h(D))):(B=B.j(R),B=B.add(h(D)))}return B}var p=u(0),g=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-_(this).m();for(var N=0,T=1,R=0;R<this.g.length;R++){var B=this.i(R);N+=(0<=B?B:4294967296+B)*T,T*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(w(this))return"0";if(b(this))return"-"+_(this).toString(N);for(var T=h(Math.pow(N,6)),R=this,B="";;){var z=F(R,T).g;R=P(R,z.j(T));var O=((0<R.g.length?R.g[0]:R.h)>>>0).toString(N);if(R=z,w(R))return O+B;for(;6>O.length;)O="0"+O;B=O+B}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function w(N){if(N.h!=0)return!1;for(var T=0;T<N.g.length;T++)if(N.g[T]!=0)return!1;return!0}function b(N){return N.h==-1}t.l=function(N){return N=P(this,N),b(N)?-1:w(N)?0:1};function _(N){for(var T=N.g.length,R=[],B=0;B<T;B++)R[B]=~N.g[B];return new o(R,~N.h).add(g)}t.abs=function(){return b(this)?_(this):this},t.add=function(N){for(var T=Math.max(this.g.length,N.g.length),R=[],B=0,z=0;z<=T;z++){var O=B+(this.i(z)&65535)+(N.i(z)&65535),D=(O>>>16)+(this.i(z)>>>16)+(N.i(z)>>>16);B=D>>>16,O&=65535,D&=65535,R[z]=D<<16|O}return new o(R,R[R.length-1]&-2147483648?-1:0)};function P(N,T){return N.add(_(T))}t.j=function(N){if(w(this)||w(N))return p;if(b(this))return b(N)?_(this).j(_(N)):_(_(this).j(N));if(b(N))return _(this.j(_(N)));if(0>this.l(y)&&0>N.l(y))return h(this.m()*N.m());for(var T=this.g.length+N.g.length,R=[],B=0;B<2*T;B++)R[B]=0;for(B=0;B<this.g.length;B++)for(var z=0;z<N.g.length;z++){var O=this.i(B)>>>16,D=this.i(B)&65535,ie=N.i(z)>>>16,Z=N.i(z)&65535;R[2*B+2*z]+=D*Z,A(R,2*B+2*z),R[2*B+2*z+1]+=O*Z,A(R,2*B+2*z+1),R[2*B+2*z+1]+=D*ie,A(R,2*B+2*z+1),R[2*B+2*z+2]+=O*ie,A(R,2*B+2*z+2)}for(B=0;B<T;B++)R[B]=R[2*B+1]<<16|R[2*B];for(B=T;B<2*T;B++)R[B]=0;return new o(R,0)};function A(N,T){for(;(N[T]&65535)!=N[T];)N[T+1]+=N[T]>>>16,N[T]&=65535,T++}function k(N,T){this.g=N,this.h=T}function F(N,T){if(w(T))throw Error("division by zero");if(w(N))return new k(p,p);if(b(N))return T=F(_(N),T),new k(_(T.g),_(T.h));if(b(T))return T=F(N,_(T)),new k(_(T.g),T.h);if(30<N.g.length){if(b(N)||b(T))throw Error("slowDivide_ only works with positive integers.");for(var R=g,B=T;0>=B.l(N);)R=L(R),B=L(B);var z=I(R,1),O=I(B,1);for(B=I(B,2),R=I(R,2);!w(B);){var D=O.add(B);0>=D.l(N)&&(z=z.add(R),O=D),B=I(B,1),R=I(R,1)}return T=P(N,z.j(T)),new k(z,T)}for(z=p;0<=N.l(T);){for(R=Math.max(1,Math.floor(N.m()/T.m())),B=Math.ceil(Math.log(R)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),O=h(R),D=O.j(T);b(D)||0<D.l(N);)R-=B,O=h(R),D=O.j(T);w(O)&&(O=g),z=z.add(O),N=P(N,D)}return new k(z,N)}t.A=function(N){return F(this,N).h},t.and=function(N){for(var T=Math.max(this.g.length,N.g.length),R=[],B=0;B<T;B++)R[B]=this.i(B)&N.i(B);return new o(R,this.h&N.h)},t.or=function(N){for(var T=Math.max(this.g.length,N.g.length),R=[],B=0;B<T;B++)R[B]=this.i(B)|N.i(B);return new o(R,this.h|N.h)},t.xor=function(N){for(var T=Math.max(this.g.length,N.g.length),R=[],B=0;B<T;B++)R[B]=this.i(B)^N.i(B);return new o(R,this.h^N.h)};function L(N){for(var T=N.g.length+1,R=[],B=0;B<T;B++)R[B]=N.i(B)<<1|N.i(B-1)>>>31;return new o(R,N.h)}function I(N,T){var R=T>>5;T%=32;for(var B=N.g.length-R,z=[],O=0;O<B;O++)z[O]=0<T?N.i(O+R)>>>T|N.i(O+R+1)<<32-T:N.i(O+R);return new o(z,N.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,IA=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,bl=o}).apply(typeof yS<"u"?yS:typeof self<"u"?self:typeof window<"u"?window:{});var Qm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PA,zh,RA,Sp,b1,DA,FA,LA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,j,V){return x==Array.prototype||x==Object.prototype||(x[j]=V.value),x};function r(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qm=="object"&&Qm];for(var j=0;j<x.length;++j){var V=x[j];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var n=r(this);function s(x,j){if(j)e:{var V=n;x=x.split(".");for(var J=0;J<x.length-1;J++){var _e=x[J];if(!(_e in V))break e;V=V[_e]}x=x[x.length-1],J=V[x],j=j(J),j!=J&&j!=null&&e(V,x,{configurable:!0,writable:!0,value:j})}}function i(x,j){x instanceof String&&(x+="");var V=0,J=!1,_e={next:function(){if(!J&&V<x.length){var De=V++;return{value:j(De,x[De]),done:!1}}return J=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}s("Array.prototype.values",function(x){return x||function(){return i(this,function(j,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(x){var j=typeof x;return j=j!="object"?j:x?Array.isArray(x)?"array":j:"null",j=="array"||j=="object"&&typeof x.length=="number"}function h(x){var j=typeof x;return j=="object"&&x!=null||j=="function"}function f(x,j,V){return x.call.apply(x.bind,arguments)}function p(x,j,V){if(!x)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,J),x.apply(j,_e)}}return function(){return x.apply(j,arguments)}}function g(x,j,V){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function y(x,j){var V=Array.prototype.slice.call(arguments,1);return function(){var J=V.slice();return J.push.apply(J,arguments),x.apply(this,J)}}function w(x,j){function V(){}V.prototype=j.prototype,x.aa=j.prototype,x.prototype=new V,x.prototype.constructor=x,x.Qb=function(J,_e,De){for(var nt=Array(arguments.length-2),mr=2;mr<arguments.length;mr++)nt[mr-2]=arguments[mr];return j.prototype[_e].apply(J,nt)}}function b(x){const j=x.length;if(0<j){const V=Array(j);for(let J=0;J<j;J++)V[J]=x[J];return V}return[]}function _(x,j){for(let V=1;V<arguments.length;V++){const J=arguments[V];if(u(J)){const _e=x.length||0,De=J.length||0;x.length=_e+De;for(let nt=0;nt<De;nt++)x[_e+nt]=J[nt]}else x.push(J)}}class P{constructor(j,V){this.i=j,this.j=V,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function A(x){return/^[\s\xa0]*$/.test(x)}function k(){var x=l.navigator;return x&&(x=x.userAgent)?x:""}function F(x){return F[" "](x),x}F[" "]=function(){};var L=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function I(x,j,V){for(const J in x)j.call(V,x[J],J,x)}function N(x,j){for(const V in x)j.call(void 0,x[V],V,x)}function T(x){const j={};for(const V in x)j[V]=x[V];return j}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(x,j){let V,J;for(let _e=1;_e<arguments.length;_e++){J=arguments[_e];for(V in J)x[V]=J[V];for(let De=0;De<R.length;De++)V=R[De],Object.prototype.hasOwnProperty.call(J,V)&&(x[V]=J[V])}}function z(x){var j=1;x=x.split(":");const V=[];for(;0<j&&x.length;)V.push(x.shift()),j--;return x.length&&V.push(x.join(":")),V}function O(x){l.setTimeout(()=>{throw x},0)}function D(){var x=q;let j=null;return x.g&&(j=x.g,x.g=x.g.next,x.g||(x.h=null),j.next=null),j}class ie{constructor(){this.h=this.g=null}add(j,V){const J=Z.get();J.set(j,V),this.h?this.h.next=J:this.g=J,this.h=J}}var Z=new P(()=>new ne,x=>x.reset());class ne{constructor(){this.next=this.g=this.h=null}set(j,V){this.h=j,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let H,Q=!1,q=new ie,ae=()=>{const x=l.Promise.resolve(void 0);H=()=>{x.then(U)}};var U=()=>{for(var x;x=D();){try{x.h.call(x.g)}catch(V){O(V)}var j=Z;j.j(x),100>j.h&&(j.h++,x.next=j.g,j.g=x)}Q=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(x,j){this.type=x,this.g=this.target=j,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var x=!1,j=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const V=()=>{};l.addEventListener("test",V,j),l.removeEventListener("test",V,j)}catch{}return x}();function Y(x,j){if(X.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var V=this.type=x.type,J=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=j,j=x.relatedTarget){if(L){e:{try{F(j.nodeName);var _e=!0;break e}catch{}_e=!1}_e||(j=null)}}else V=="mouseover"?j=x.fromElement:V=="mouseout"&&(j=x.toElement);this.relatedTarget=j,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:xe[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&Y.aa.h.call(this)}}w(Y,X);var xe={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),fe=0;function ve(x,j,V,J,_e){this.listener=x,this.proxy=null,this.src=j,this.type=V,this.capture=!!J,this.ha=_e,this.key=++fe,this.da=this.fa=!1}function we(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function We(x){this.src=x,this.g={},this.h=0}We.prototype.add=function(x,j,V,J,_e){var De=x.toString();x=this.g[De],x||(x=this.g[De]=[],this.h++);var nt=st(x,j,J,_e);return-1<nt?(j=x[nt],V||(j.fa=!1)):(j=new ve(j,this.src,De,!!J,_e),j.fa=V,x.push(j)),j};function re(x,j){var V=j.type;if(V in x.g){var J=x.g[V],_e=Array.prototype.indexOf.call(J,j,void 0),De;(De=0<=_e)&&Array.prototype.splice.call(J,_e,1),De&&(we(j),x.g[V].length==0&&(delete x.g[V],x.h--))}}function st(x,j,V,J){for(var _e=0;_e<x.length;++_e){var De=x[_e];if(!De.da&&De.listener==j&&De.capture==!!V&&De.ha==J)return _e}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),he={};function me(x,j,V,J,_e){if(Array.isArray(j)){for(var De=0;De<j.length;De++)me(x,j[De],V,J,_e);return null}return V=be(V),x&&x[le]?x.K(j,V,h(J)?!!J.capture:!1,_e):ee(x,j,V,!1,J,_e)}function ee(x,j,V,J,_e,De){if(!j)throw Error("Invalid event type");var nt=h(_e)?!!_e.capture:!!_e,mr=Nt(x);if(mr||(x[Re]=mr=new We(x)),V=mr.add(j,V,J,nt,De),V.proxy)return V;if(J=pe(),V.proxy=J,J.src=x,J.listener=V,x.addEventListener)K||(_e=nt),_e===void 0&&(_e=!1),x.addEventListener(j.toString(),J,_e);else if(x.attachEvent)x.attachEvent(ot(j.toString()),J);else if(x.addListener&&x.removeListener)x.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return V}function pe(){function x(V){return j.call(x.src,x.listener,V)}const j=xt;return x}function Ce(x,j,V,J,_e){if(Array.isArray(j))for(var De=0;De<j.length;De++)Ce(x,j[De],V,J,_e);else J=h(J)?!!J.capture:!!J,V=be(V),x&&x[le]?(x=x.i,j=String(j).toString(),j in x.g&&(De=x.g[j],V=st(De,V,J,_e),-1<V&&(we(De[V]),Array.prototype.splice.call(De,V,1),De.length==0&&(delete x.g[j],x.h--)))):x&&(x=Nt(x))&&(j=x.g[j.toString()],x=-1,j&&(x=st(j,V,J,_e)),(V=-1<x?j[x]:null)&&$e(V))}function $e(x){if(typeof x!="number"&&x&&!x.da){var j=x.src;if(j&&j[le])re(j.i,x);else{var V=x.type,J=x.proxy;j.removeEventListener?j.removeEventListener(V,J,x.capture):j.detachEvent?j.detachEvent(ot(V),J):j.addListener&&j.removeListener&&j.removeListener(J),(V=Nt(j))?(re(V,x),V.h==0&&(V.src=null,j[Re]=null)):we(x)}}}function ot(x){return x in he?he[x]:he[x]="on"+x}function xt(x,j){if(x.da)x=!0;else{j=new Y(j,this);var V=x.listener,J=x.ha||x.src;x.fa&&$e(x),x=V.call(J,j)}return x}function Nt(x){return x=x[Re],x instanceof We?x:null}var Me="__closure_events_fn_"+(1e9*Math.random()>>>0);function be(x){return typeof x=="function"?x:(x[Me]||(x[Me]=function(j){return x.handleEvent(j)}),x[Me])}function Pe(){M.call(this),this.i=new We(this),this.M=this,this.F=null}w(Pe,M),Pe.prototype[le]=!0,Pe.prototype.removeEventListener=function(x,j,V,J){Ce(this,x,j,V,J)};function lt(x,j){var V,J=x.F;if(J)for(V=[];J;J=J.F)V.push(J);if(x=x.M,J=j.type||j,typeof j=="string")j=new X(j,x);else if(j instanceof X)j.target=j.target||x;else{var _e=j;j=new X(J,x),B(j,_e)}if(_e=!0,V)for(var De=V.length-1;0<=De;De--){var nt=j.g=V[De];_e=ct(nt,J,!0,j)&&_e}if(nt=j.g=x,_e=ct(nt,J,!0,j)&&_e,_e=ct(nt,J,!1,j)&&_e,V)for(De=0;De<V.length;De++)nt=j.g=V[De],_e=ct(nt,J,!1,j)&&_e}Pe.prototype.N=function(){if(Pe.aa.N.call(this),this.i){var x=this.i,j;for(j in x.g){for(var V=x.g[j],J=0;J<V.length;J++)we(V[J]);delete x.g[j],x.h--}}this.F=null},Pe.prototype.K=function(x,j,V,J){return this.i.add(String(x),j,!1,V,J)},Pe.prototype.L=function(x,j,V,J){return this.i.add(String(x),j,!0,V,J)};function ct(x,j,V,J){if(j=x.i.g[String(j)],!j)return!0;j=j.concat();for(var _e=!0,De=0;De<j.length;++De){var nt=j[De];if(nt&&!nt.da&&nt.capture==V){var mr=nt.listener,yn=nt.ha||nt.src;nt.fa&&re(x.i,nt),_e=mr.call(yn,J)!==!1&&_e}}return _e&&!J.defaultPrevented}function Bt(x,j,V){if(typeof x=="function")V&&(x=g(x,V));else if(x&&typeof x.handleEvent=="function")x=g(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:l.setTimeout(x,j||0)}function it(x){x.g=Bt(()=>{x.g=null,x.i&&(x.i=!1,it(x))},x.l);const j=x.h;x.h=null,x.m.apply(null,j)}class kt extends M{constructor(j,V){super(),this.m=j,this.l=V,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:it(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(x){M.call(this),this.h=x,this.g={}}w(er,M);var lr=[];function un(x){I(x.g,function(j,V){this.g.hasOwnProperty(V)&&$e(j)},x),x.g={}}er.prototype.N=function(){er.aa.N.call(this),un(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Is=l.JSON.stringify,Xs=l.JSON.parse,Ps=class{stringify(x){return l.JSON.stringify(x,void 0)}parse(x){return l.JSON.parse(x,void 0)}};function Vn(){}Vn.prototype.h=null;function Rs(x){return x.h||(x.h=x.i())}function pa(){}var mt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wt(){X.call(this,"d")}w(Wt,X);function ur(){X.call(this,"c")}w(ur,X);var Er={},Tn=null;function Bn(){return Tn=Tn||new Pe}Er.La="serverreachability";function ql(x){X.call(this,Er.La,x)}w(ql,X);function Ma(x){const j=Bn();lt(j,new ql(j))}Er.STAT_EVENT="statevent";function Gl(x,j){X.call(this,Er.STAT_EVENT,x),this.stat=j}w(Gl,X);function Or(x){const j=Bn();lt(j,new Gl(j,x))}Er.Ma="timingevent";function Po(x,j){X.call(this,Er.Ma,x),this.size=j}w(Po,X);function _s(x,j){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){x()},j)}function Mi(){this.g=!0}Mi.prototype.xa=function(){this.g=!1};function Vi(x,j,V,J,_e,De){x.info(function(){if(x.g)if(De)for(var nt="",mr=De.split("&"),yn=0;yn<mr.length;yn++){var Jt=mr[yn].split("=");if(1<Jt.length){var jn=Jt[0];Jt=Jt[1];var dn=jn.split("_");nt=2<=dn.length&&dn[1]=="type"?nt+(jn+"="+Jt+"&"):nt+(jn+"=redacted&")}}else nt=null;else nt=De;return"XMLHTTP REQ ("+J+") [attempt "+_e+"]: "+j+`
`+V+`
`+nt})}function Ro(x,j,V,J,_e,De,nt){x.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+_e+"]: "+j+`
`+V+`
`+De+" "+nt})}function G(x,j,V,J){x.info(function(){return"XMLHTTP TEXT ("+j+"): "+te(x,V)+(J?" "+J:"")})}function oe(x,j){x.info(function(){return"TIMEOUT: "+j})}Mi.prototype.info=function(){};function te(x,j){if(!x.g)return j;if(!j)return null;try{var V=JSON.parse(j);if(V){for(x=0;x<V.length;x++)if(Array.isArray(V[x])){var J=V[x];if(!(2>J.length)){var _e=J[1];if(Array.isArray(_e)&&!(1>_e.length)){var De=_e[0];if(De!="noop"&&De!="stop"&&De!="close")for(var nt=1;nt<_e.length;nt++)_e[nt]=""}}}}return Is(V)}catch{return j}}var se={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ce={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ue;function Ee(){}w(Ee,Vn),Ee.prototype.g=function(){return new XMLHttpRequest},Ee.prototype.i=function(){return{}},ue=new Ee;function Fe(x,j,V,J){this.j=x,this.i=j,this.l=V,this.R=J||1,this.U=new er(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Se}function Se(){this.i=null,this.g="",this.h=!1}var Te={},je={};function Ge(x,j,V){x.L=1,x.v=Mo(Qs(j)),x.m=V,x.P=!0,et(x,null)}function et(x,j){x.F=Date.now(),Xe(x),x.A=Qs(x.v);var V=x.A,J=x.R;Array.isArray(J)||(J=[String(J)]),Bo(V.i,"t",J),x.C=0,V=x.j.J,x.h=new Se,x.g=Z0(x.j,V?j:null,!x.m),0<x.O&&(x.M=new kt(g(x.Y,x,x.g),x.O)),j=x.U,V=x.g,J=x.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(lr[0]=_e.toString()),_e=lr);for(var De=0;De<_e.length;De++){var nt=me(V,_e[De],J||j.handleEvent,!1,j.h||j);if(!nt)break;j.g[nt.key]=nt}j=x.H?T(x.H):{},x.m?(x.u||(x.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,j)):(x.u="GET",x.g.ea(x.A,x.u,null,j)),Ma(),Vi(x.i,x.u,x.A,x.l,x.R,x.m)}Fe.prototype.ca=function(x){x=x.target;const j=this.M;j&&Fs(x)==3?j.j():this.Y(x)},Fe.prototype.Y=function(x){try{if(x==this.g)e:{const dn=Fs(this.g);var j=this.g.Ba();const xa=this.g.Z();if(!(3>dn)&&(dn!=3||this.g&&(this.h.h||this.g.oa()||lh(this.g)))){this.J||dn!=4||j==7||(j==8||0>=xa?Ma(3):Ma(2)),cr(this);var V=this.g.Z();this.X=V;t:if(dt(this)){var J=lh(this.g);x="";var _e=J.length,De=Fs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fr(this),ar(this);var nt="";break t}this.h.i=new l.TextDecoder}for(j=0;j<_e;j++)this.h.h=!0,x+=this.h.i.decode(J[j],{stream:!(De&&j==_e-1)});J.length=0,this.h.g+=x,this.C=0,nt=this.h.g}else nt=this.g.oa();if(this.o=V==200,Ro(this.i,this.u,this.A,this.l,this.R,dn,V),this.o){if(this.T&&!this.K){t:{if(this.g){var mr,yn=this.g;if((mr=yn.g?yn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(mr)){var Jt=mr;break t}}Jt=null}if(V=Jt)G(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Va(this,V);else{this.o=!1,this.s=3,Or(12),fr(this),ar(this);break e}}if(this.P){V=!0;let Zs;for(;!this.J&&this.C<nt.length;)if(Zs=Qe(this,nt),Zs==je){dn==4&&(this.s=4,Or(14),V=!1),G(this.i,this.l,null,"[Incomplete Response]");break}else if(Zs==Te){this.s=4,Or(15),G(this.i,this.l,nt,"[Invalid Chunk]"),V=!1;break}else G(this.i,this.l,Zs,null),Va(this,Zs);if(dt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dn!=4||nt.length!=0||this.h.h||(this.s=1,Or(16),V=!1),this.o=this.o&&V,!V)G(this.i,this.l,nt,"[Invalid Chunked Response]"),fr(this),ar(this);else if(0<nt.length&&!this.W){this.W=!0;var jn=this.j;jn.g==this&&jn.ba&&!jn.M&&(jn.j.info("Great, no buffering proxy detected. Bytes received: "+nt.length),uh(jn),jn.M=!0,Or(11))}}else G(this.i,this.l,nt,null),Va(this,nt);dn==4&&fr(this),this.o&&!this.J&&(dn==4?yu(this.j,this):(this.o=!1,Xe(this)))}else mu(this.g),V==400&&0<nt.indexOf("Unknown SID")?(this.s=3,Or(12)):(this.s=0,Or(13)),fr(this),ar(this)}}}catch{}finally{}};function dt(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Qe(x,j){var V=x.C,J=j.indexOf(`
`,V);return J==-1?je:(V=Number(j.substring(V,J)),isNaN(V)?Te:(J+=1,J+V>j.length?je:(j=j.slice(J,J+V),x.C=J+V,j)))}Fe.prototype.cancel=function(){this.J=!0,fr(this)};function Xe(x){x.S=Date.now()+x.I,Pt(x,x.I)}function Pt(x,j){if(x.B!=null)throw Error("WatchDog timer not null");x.B=_s(g(x.ba,x),j)}function cr(x){x.B&&(l.clearTimeout(x.B),x.B=null)}Fe.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(oe(this.i,this.A),this.L!=2&&(Ma(),Or(17)),fr(this),this.s=2,ar(this)):Pt(this,this.S-x)};function ar(x){x.j.G==0||x.J||yu(x.j,x)}function fr(x){cr(x);var j=x.M;j&&typeof j.ma=="function"&&j.ma(),x.M=null,un(x.U),x.g&&(j=x.g,x.g=null,j.abort(),j.ma())}function Va(x,j){try{var V=x.j;if(V.G!=0&&(V.g==x||Sr(V.h,x))){if(!x.K&&Sr(V.h,x)&&V.G==3){try{var J=V.Da.g.parse(j)}catch{J=null}if(Array.isArray(J)&&J.length==3){var _e=J;if(_e[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<x.F)vu(V),Ha(V);else break e;xu(V),Or(18)}}else V.za=_e[1],0<V.za-V.T&&37500>_e[2]&&V.F&&V.v==0&&!V.C&&(V.C=_s(g(V.Za,V),6e3));if(1>=Do(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else Hi(V,11)}else if((x.K||V.g==x)&&vu(V),!A(j))for(_e=V.Da.g.parse(j),j=0;j<_e.length;j++){let Jt=_e[j];if(V.T=Jt[0],Jt=Jt[1],V.G==2)if(Jt[0]=="c"){V.K=Jt[1],V.ia=Jt[2];const jn=Jt[3];jn!=null&&(V.la=jn,V.j.info("VER="+V.la));const dn=Jt[4];dn!=null&&(V.Aa=dn,V.j.info("SVER="+V.Aa));const xa=Jt[5];xa!=null&&typeof xa=="number"&&0<xa&&(J=1.5*xa,V.L=J,V.j.info("backChannelRequestTimeoutMs_="+J)),J=V;const Zs=x.g;if(Zs){const Zl=Zs.g?Zs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zl){var De=J.h;De.g||Zl.indexOf("spdy")==-1&&Zl.indexOf("quic")==-1&&Zl.indexOf("h2")==-1||(De.j=De.l,De.g=new Set,De.h&&(sh(De,De.h),De.h=null))}if(J.D){const bu=Zs.g?Zs.g.getResponseHeader("X-HTTP-Session-Id"):null;bu&&(J.ya=bu,wr(J.I,J.D,bu))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-x.F,V.j.info("Handshake RTT: "+V.R+"ms")),J=V;var nt=x;if(J.qa=J0(J,J.J?J.ia:null,J.W),nt.K){B0(J.h,nt);var mr=nt,yn=J.L;yn&&(mr.I=yn),mr.B&&(cr(mr),Xe(mr)),J.g=nt}else Jl(J);0<V.i.length&&mi(V)}else Jt[0]!="stop"&&Jt[0]!="close"||Hi(V,7);else V.G==3&&(Jt[0]=="stop"||Jt[0]=="close"?Jt[0]=="stop"?Hi(V,7):zn(V):Jt[0]!="noop"&&V.l&&V.l.ta(Jt),V.v=0)}}Ma(4)}catch{}}var ui=class{constructor(x,j){this.g=x,this.map=j}};function Ys(x){this.l=x||10,l.PerformanceNavigationTiming?(x=l.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tn(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Do(x){return x.h?1:x.g?x.g.size:0}function Sr(x,j){return x.h?x.h==j:x.g?x.g.has(j):!1}function sh(x,j){x.g?x.g.add(j):x.h=j}function B0(x,j){x.h&&x.h==j?x.h=null:x.g&&x.g.has(j)&&x.g.delete(j)}Ys.prototype.cancel=function(){if(this.i=U0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function U0(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let j=x.i;for(const V of x.g.values())j=j.concat(V.D);return j}return b(x.i)}function cu(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(u(x)){for(var j=[],V=x.length,J=0;J<V;J++)j.push(x[J]);return j}j=[],V=0;for(J in x)j[V++]=x[J];return j}function uu(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(u(x)||typeof x=="string"){var j=[];x=x.length;for(var V=0;V<x;V++)j.push(V);return j}j=[],V=0;for(const J in x)j[V++]=J;return j}}}function Fo(x,j){if(x.forEach&&typeof x.forEach=="function")x.forEach(j,void 0);else if(u(x)||typeof x=="string")Array.prototype.forEach.call(x,j,void 0);else for(var V=uu(x),J=cu(x),_e=J.length,De=0;De<_e;De++)j.call(void 0,J[De],V&&V[De],x)}var Kl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fx(x,j){if(x){x=x.split("&");for(var V=0;V<x.length;V++){var J=x[V].indexOf("="),_e=null;if(0<=J){var De=x[V].substring(0,J);_e=x[V].substring(J+1)}else De=x[V];j(De,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function Bi(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof Bi){this.h=x.h,Xl(this,x.j),this.o=x.o,this.g=x.g,Lo(this,x.s),this.l=x.l;var j=x.i,V=new di;V.i=j.i,j.g&&(V.g=new Map(j.g),V.h=j.h),Oo(this,V),this.m=x.m}else x&&(j=String(x).match(Kl))?(this.h=!1,Xl(this,j[1]||"",!0),this.o=Yt(j[2]||""),this.g=Yt(j[3]||"",!0),Lo(this,j[4]),this.l=Yt(j[5]||"",!0),Oo(this,j[6]||"",!0),this.m=Yt(j[7]||"")):(this.h=!1,this.i=new di(null,this.h))}Bi.prototype.toString=function(){var x=[],j=this.j;j&&x.push(Vo(j,du,!0),":");var V=this.g;return(V||j=="file")&&(x.push("//"),(j=this.o)&&x.push(Vo(j,du,!0),"@"),x.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&x.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&x.push("/"),x.push(Vo(V,V.charAt(0)=="/"?H0:$0,!0))),(V=this.i.toString())&&x.push("?",V),(V=this.m)&&x.push("#",Vo(V,ah)),x.join("")};function Qs(x){return new Bi(x)}function Xl(x,j,V){x.j=V?Yt(j,!0):j,x.j&&(x.j=x.j.replace(/:$/,""))}function Lo(x,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);x.s=j}else x.s=null}function Oo(x,j,V){j instanceof di?(x.i=j,hi(x.i,x.h)):(V||(j=Vo(j,W0)),x.i=new di(j,x.h))}function wr(x,j,V){x.i.set(j,V)}function Mo(x){return wr(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function Yt(x,j){return x?j?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Vo(x,j,V){return typeof x=="string"?(x=encodeURI(x).replace(j,z0),V&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function z0(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var du=/[#\/\?@]/g,$0=/[#\?:]/g,H0=/[#\?]/g,W0=/[#\?@]/g,ah=/#/g;function di(x,j){this.h=this.g=null,this.i=x||null,this.j=!!j}function Un(x){x.g||(x.g=new Map,x.h=0,x.i&&Fx(x.i,function(j,V){x.add(decodeURIComponent(j.replace(/\+/g," ")),V)}))}t=di.prototype,t.add=function(x,j){Un(this),this.i=null,x=ga(this,x);var V=this.g.get(x);return V||this.g.set(x,V=[]),V.push(j),this.h+=1,this};function Ba(x,j){Un(x),j=ga(x,j),x.g.has(j)&&(x.i=null,x.h-=x.g.get(j).length,x.g.delete(j))}function Ua(x,j){return Un(x),j=ga(x,j),x.g.has(j)}t.forEach=function(x,j){Un(this),this.g.forEach(function(V,J){V.forEach(function(_e){x.call(j,_e,J,this)},this)},this)},t.na=function(){Un(this);const x=Array.from(this.g.values()),j=Array.from(this.g.keys()),V=[];for(let J=0;J<j.length;J++){const _e=x[J];for(let De=0;De<_e.length;De++)V.push(j[J])}return V},t.V=function(x){Un(this);let j=[];if(typeof x=="string")Ua(this,x)&&(j=j.concat(this.g.get(ga(this,x))));else{x=Array.from(this.g.values());for(let V=0;V<x.length;V++)j=j.concat(x[V])}return j},t.set=function(x,j){return Un(this),this.i=null,x=ga(this,x),Ua(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[j]),this.h+=1,this},t.get=function(x,j){return x?(x=this.V(x),0<x.length?String(x[0]):j):j};function Bo(x,j,V){Ba(x,j),0<V.length&&(x.i=null,x.g.set(ga(x,j),b(V)),x.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],j=Array.from(this.g.keys());for(var V=0;V<j.length;V++){var J=j[V];const De=encodeURIComponent(String(J)),nt=this.V(J);for(J=0;J<nt.length;J++){var _e=De;nt[J]!==""&&(_e+="="+encodeURIComponent(String(nt[J]))),x.push(_e)}}return this.i=x.join("&")};function ga(x,j){return j=String(j),x.j&&(j=j.toLowerCase()),j}function hi(x,j){j&&!x.j&&(Un(x),x.i=null,x.g.forEach(function(V,J){var _e=J.toLowerCase();J!=_e&&(Ba(this,J),Bo(this,_e,V))},x)),x.j=j}function Lx(x,j){const V=new Mi;if(l.Image){const J=new Image;J.onload=y(Ds,V,"TestLoadImage: loaded",!0,j,J),J.onerror=y(Ds,V,"TestLoadImage: error",!1,j,J),J.onabort=y(Ds,V,"TestLoadImage: abort",!1,j,J),J.ontimeout=y(Ds,V,"TestLoadImage: timeout",!1,j,J),l.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=x}else j(!1)}function q0(x,j){const V=new Mi,J=new AbortController,_e=setTimeout(()=>{J.abort(),Ds(V,"TestPingServer: timeout",!1,j)},1e4);fetch(x,{signal:J.signal}).then(De=>{clearTimeout(_e),De.ok?Ds(V,"TestPingServer: ok",!0,j):Ds(V,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(_e),Ds(V,"TestPingServer: error",!1,j)})}function Ds(x,j,V,J,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),J(V)}catch{}}function Ox(){this.g=new Ps}function G0(x,j,V){const J=V||"";try{Fo(x,function(_e,De){let nt=_e;h(_e)&&(nt=Is(_e)),j.push(J+De+"="+encodeURIComponent(nt))})}catch(_e){throw j.push(J+"type="+encodeURIComponent("_badmap")),_e}}function Ui(x){this.l=x.Ub||null,this.j=x.eb||!1}w(Ui,Vn),Ui.prototype.g=function(){return new Yl(this.l,this.j)},Ui.prototype.i=function(x){return function(){return x}}({});function Yl(x,j){Pe.call(this),this.D=x,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Yl,Pe),t=Yl.prototype,t.open=function(x,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=j,this.readyState=1,$a(this)},t.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(j.body=x),(this.D||l).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,za(this)),this.readyState=0},t.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,$a(this)),this.g&&(this.readyState=3,$a(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;K0(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function K0(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}t.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var j=x.value?x.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!x.done}))&&(this.response=this.responseText+=j)}x.done?za(this):$a(this),this.readyState==3&&K0(this)}},t.Ra=function(x){this.g&&(this.response=this.responseText=x,za(this))},t.Qa=function(x){this.g&&(this.response=x,za(this))},t.ga=function(){this.g&&za(this)};function za(x){x.readyState=4,x.l=null,x.j=null,x.v=null,$a(x)}t.setRequestHeader=function(x,j){this.u.append(x,j)},t.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],j=this.h.entries();for(var V=j.next();!V.done;)V=V.value,x.push(V[0]+": "+V[1]),V=j.next();return x.join(`\r
`)};function $a(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Yl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function zi(x){let j="";return I(x,function(V,J){j+=J,j+=":",j+=V,j+=`\r
`}),j}function Uo(x,j,V){e:{for(J in V){var J=!1;break e}J=!0}J||(V=zi(V),typeof x=="string"?V!=null&&encodeURIComponent(String(V)):wr(x,j,V))}function Fr(x){Pe.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Fr,Pe);var Mx=/^https?$/i,ih=["POST","PUT"];t=Fr.prototype,t.Ha=function(x){this.J=x},t.ea=function(x,j,V,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);j=j?j.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ue.g(),this.v=this.o?Rs(this.o):Rs(ue),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(j,String(x),!0),this.B=!1}catch(De){Ql(this,De);return}if(x=V||"",V=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var _e in J)V.set(_e,J[_e]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const De of J.keys())V.set(De,J.get(De));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(V.keys()).find(De=>De.toLowerCase()=="content-type"),_e=l.FormData&&x instanceof l.FormData,!(0<=Array.prototype.indexOf.call(ih,j,void 0))||J||_e||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[De,nt]of V)this.g.setRequestHeader(De,nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fu(this),this.u=!0,this.g.send(x),this.u=!1}catch(De){Ql(this,De)}};function Ql(x,j){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=j,x.m=5,hu(x),Js(x)}function hu(x){x.A||(x.A=!0,lt(x,"complete"),lt(x,"error"))}t.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,lt(this,"complete"),lt(this,"abort"),Js(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Js(this,!0)),Fr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?oh(this):this.bb())},t.bb=function(){oh(this)};function oh(x){if(x.h&&typeof o<"u"&&(!x.v[1]||Fs(x)!=4||x.Z()!=2)){if(x.u&&Fs(x)==4)Bt(x.Ea,0,x);else if(lt(x,"readystatechange"),Fs(x)==4){x.h=!1;try{const nt=x.Z();e:switch(nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var V;if(!(V=j)){var J;if(J=nt===0){var _e=String(x.D).match(Kl)[1]||null;!_e&&l.self&&l.self.location&&(_e=l.self.location.protocol.slice(0,-1)),J=!Mx.test(_e?_e.toLowerCase():"")}V=J}if(V)lt(x,"complete"),lt(x,"success");else{x.m=6;try{var De=2<Fs(x)?x.g.statusText:""}catch{De=""}x.l=De+" ["+x.Z()+"]",hu(x)}}finally{Js(x)}}}}function Js(x,j){if(x.g){fu(x);const V=x.g,J=x.v[0]?()=>{}:null;x.g=null,x.v=null,j||lt(x,"ready");try{V.onreadystatechange=J}catch{}}}function fu(x){x.I&&(l.clearTimeout(x.I),x.I=null)}t.isActive=function(){return!!this.g};function Fs(x){return x.g?x.g.readyState:0}t.Z=function(){try{return 2<Fs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(x){if(this.g){var j=this.g.responseText;return x&&j.indexOf(x)==0&&(j=j.substring(x.length)),Xs(j)}};function lh(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function mu(x){const j={};x=(x.g&&2<=Fs(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<x.length;J++){if(A(x[J]))continue;var V=z(x[J]);const _e=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const De=j[_e]||[];j[_e]=De,De.push(V)}N(j,function(J){return J.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fi(x,j,V){return V&&V.internalChannelParams&&V.internalChannelParams[x]||j}function ch(x){this.Aa=0,this.i=[],this.j=new Mi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fi("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fi("baseRetryDelayMs",5e3,x),this.cb=fi("retryDelaySeedMs",1e4,x),this.Wa=fi("forwardChannelMaxRetries",2,x),this.wa=fi("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new Ys(x&&x.concurrentRequestLimit),this.Da=new Ox,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ch.prototype,t.la=8,t.G=1,t.connect=function(x,j,V,J){Or(0),this.W=x,this.H=j||{},V&&J!==void 0&&(this.H.OSID=V,this.H.OAID=J),this.F=this.X,this.I=J0(this,null,this.W),mi(this)};function zn(x){if(pu(x),x.G==3){var j=x.U++,V=Qs(x.I);if(wr(V,"SID",x.K),wr(V,"RID",j),wr(V,"TYPE","terminate"),$i(x,V),j=new Fe(x,x.j,j),j.L=2,j.v=Mo(Qs(V)),V=!1,l.navigator&&l.navigator.sendBeacon)try{V=l.navigator.sendBeacon(j.v.toString(),"")}catch{}!V&&l.Image&&(new Image().src=j.v,V=!0),V||(j.g=Z0(j.j,null),j.g.ea(j.v)),j.F=Date.now(),Xe(j)}Q0(x)}function Ha(x){x.g&&(uh(x),x.g.cancel(),x.g=null)}function pu(x){Ha(x),x.u&&(l.clearTimeout(x.u),x.u=null),vu(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&l.clearTimeout(x.s),x.s=null)}function mi(x){if(!tn(x.h)&&!x.s){x.s=!0;var j=x.Ga;H||ae(),Q||(H(),Q=!0),q.add(j,x),x.B=0}}function Vx(x,j){return Do(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=j.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=_s(g(x.Ga,x,j),Y0(x,x.B)),x.B++,!0)}t.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const _e=new Fe(this,this.j,x);let De=this.o;if(this.S&&(De?(De=T(De),B(De,this.S)):De=this.S),this.m!==null||this.O||(_e.H=De,De=null),this.P)e:{for(var j=0,V=0;V<this.i.length;V++){t:{var J=this.i[V];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(j+=J,4096<j){j=V;break e}if(j===4096||V===this.i.length-1){j=V+1;break e}}j=1e3}else j=1e3;j=zo(this,_e,j),V=Qs(this.I),wr(V,"RID",x),wr(V,"CVER",22),this.D&&wr(V,"X-HTTP-Session-Id",this.D),$i(this,V),De&&(this.O?j="headers="+encodeURIComponent(String(zi(De)))+"&"+j:this.m&&Uo(V,this.m,De)),sh(this.h,_e),this.Ua&&wr(V,"TYPE","init"),this.P?(wr(V,"$req",j),wr(V,"SID","null"),_e.T=!0,Ge(_e,V,null)):Ge(_e,V,j),this.G=2}}else this.G==3&&(x?gu(this,x):this.i.length==0||tn(this.h)||gu(this))};function gu(x,j){var V;j?V=j.l:V=x.U++;const J=Qs(x.I);wr(J,"SID",x.K),wr(J,"RID",V),wr(J,"AID",x.T),$i(x,J),x.m&&x.o&&Uo(J,x.m,x.o),V=new Fe(x,x.j,V,x.B+1),x.m===null&&(V.H=x.o),j&&(x.i=j.D.concat(x.i)),j=zo(x,V,1e3),V.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),sh(x.h,V),Ge(V,J,j)}function $i(x,j){x.H&&I(x.H,function(V,J){wr(j,J,V)}),x.l&&Fo({},function(V,J){wr(j,J,V)})}function zo(x,j,V){V=Math.min(x.i.length,V);var J=x.l?g(x.l.Na,x.l,x):null;e:{var _e=x.i;let De=-1;for(;;){const nt=["count="+V];De==-1?0<V?(De=_e[0].g,nt.push("ofs="+De)):De=0:nt.push("ofs="+De);let mr=!0;for(let yn=0;yn<V;yn++){let Jt=_e[yn].g;const jn=_e[yn].map;if(Jt-=De,0>Jt)De=Math.max(0,_e[yn].g-100),mr=!1;else try{G0(jn,nt,"req"+Jt+"_")}catch{J&&J(jn)}}if(mr){J=nt.join("&");break e}}}return x=x.i.splice(0,V),j.D=x,J}function Jl(x){if(!x.g&&!x.u){x.Y=1;var j=x.Fa;H||ae(),Q||(H(),Q=!0),q.add(j,x),x.v=0}}function xu(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=_s(g(x.Fa,x),Y0(x,x.v)),x.v++,!0)}t.Fa=function(){if(this.u=null,X0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=_s(g(this.ab,this),x)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Or(10),Ha(this),X0(this))};function uh(x){x.A!=null&&(l.clearTimeout(x.A),x.A=null)}function X0(x){x.g=new Fe(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var j=Qs(x.qa);wr(j,"RID","rpc"),wr(j,"SID",x.K),wr(j,"AID",x.T),wr(j,"CI",x.F?"0":"1"),!x.F&&x.ja&&wr(j,"TO",x.ja),wr(j,"TYPE","xmlhttp"),$i(x,j),x.m&&x.o&&Uo(j,x.m,x.o),x.L&&(x.g.I=x.L);var V=x.g;x=x.ia,V.L=1,V.v=Mo(Qs(j)),V.m=null,V.P=!0,et(V,x)}t.Za=function(){this.C!=null&&(this.C=null,Ha(this),xu(this),Or(19))};function vu(x){x.C!=null&&(l.clearTimeout(x.C),x.C=null)}function yu(x,j){var V=null;if(x.g==j){vu(x),uh(x),x.g=null;var J=2}else if(Sr(x.h,j))V=j.D,B0(x.h,j),J=1;else return;if(x.G!=0){if(j.o)if(J==1){V=j.m?j.m.length:0,j=Date.now()-j.F;var _e=x.B;J=Bn(),lt(J,new Po(J,V)),mi(x)}else Jl(x);else if(_e=j.s,_e==3||_e==0&&0<j.X||!(J==1&&Vx(x,j)||J==2&&xu(x)))switch(V&&0<V.length&&(j=x.h,j.i=j.i.concat(V)),_e){case 1:Hi(x,5);break;case 4:Hi(x,10);break;case 3:Hi(x,6);break;default:Hi(x,2)}}}function Y0(x,j){let V=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(V*=2),V*j}function Hi(x,j){if(x.j.info("Error code "+j),j==2){var V=g(x.fb,x),J=x.Xa;const _e=!J;J=new Bi(J||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Xl(J,"https"),Mo(J),_e?Lx(J.toString(),V):q0(J.toString(),V)}else Or(2);x.G=0,x.l&&x.l.sa(j),Q0(x),pu(x)}t.fb=function(x){x?(this.j.info("Successfully pinged google.com"),Or(2)):(this.j.info("Failed to ping google.com"),Or(1))};function Q0(x){if(x.G=0,x.ka=[],x.l){const j=U0(x.h);(j.length!=0||x.i.length!=0)&&(_(x.ka,j),_(x.ka,x.i),x.h.i.length=0,b(x.i),x.i.length=0),x.l.ra()}}function J0(x,j,V){var J=V instanceof Bi?Qs(V):new Bi(V);if(J.g!="")j&&(J.g=j+"."+J.g),Lo(J,J.s);else{var _e=l.location;J=_e.protocol,j=j?j+"."+_e.hostname:_e.hostname,_e=+_e.port;var De=new Bi(null);J&&Xl(De,J),j&&(De.g=j),_e&&Lo(De,_e),V&&(De.l=V),J=De}return V=x.D,j=x.ya,V&&j&&wr(J,V,j),wr(J,"VER",x.la),$i(x,J),J}function Z0(x,j,V){if(j&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=x.Ca&&!x.pa?new Fr(new Ui({eb:V})):new Fr(x.pa),j.Ha(x.J),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function dh(){}t=dh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function wu(){}wu.prototype.g=function(x,j){return new Ns(x,j)};function Ns(x,j){Pe.call(this),this.g=new ch(j),this.l=x,this.h=j&&j.messageUrlParams||null,x=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(x?x["X-WebChannel-Content-Type"]=j.messageContentType:x={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(x?x["X-WebChannel-Client-Profile"]=j.va:x={"X-WebChannel-Client-Profile":j.va}),this.g.S=x,(x=j&&j.Sb)&&!A(x)&&(this.g.m=x),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!A(j)&&(this.g.D=j,x=this.h,x!==null&&j in x&&(x=this.h,j in x&&delete x[j])),this.j=new pi(this)}w(Ns,Pe),Ns.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ns.prototype.close=function(){zn(this.g)},Ns.prototype.o=function(x){var j=this.g;if(typeof x=="string"){var V={};V.__data__=x,x=V}else this.u&&(V={},V.__data__=Is(x),x=V);j.i.push(new ui(j.Ya++,x)),j.G==3&&mi(j)},Ns.prototype.N=function(){this.g.l=null,delete this.j,zn(this.g),delete this.g,Ns.aa.N.call(this)};function em(x){Wt.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var j=x.__sm__;if(j){e:{for(const V in j){x=V;break e}x=void 0}(this.i=x)&&(x=this.i,j=j!==null&&x in j?j[x]:void 0),this.data=j}else this.data=x}w(em,Wt);function tm(){ur.call(this),this.status=1}w(tm,ur);function pi(x){this.g=x}w(pi,dh),pi.prototype.ua=function(){lt(this.g,"a")},pi.prototype.ta=function(x){lt(this.g,new em(x))},pi.prototype.sa=function(x){lt(this.g,new tm)},pi.prototype.ra=function(){lt(this.g,"b")},wu.prototype.createWebChannel=wu.prototype.g,Ns.prototype.send=Ns.prototype.o,Ns.prototype.open=Ns.prototype.m,Ns.prototype.close=Ns.prototype.close,LA=function(){return new wu},FA=function(){return Bn()},DA=Er,b1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},se.NO_ERROR=0,se.TIMEOUT=8,se.HTTP_ERROR=6,Sp=se,ce.COMPLETE="complete",RA=ce,pa.EventType=mt,mt.OPEN="a",mt.CLOSE="b",mt.ERROR="c",mt.MESSAGE="d",Pe.prototype.listen=Pe.prototype.K,zh=pa,Fr.prototype.listenOnce=Fr.prototype.L,Fr.prototype.getLastError=Fr.prototype.Ka,Fr.prototype.getLastErrorCode=Fr.prototype.Ba,Fr.prototype.getStatus=Fr.prototype.Z,Fr.prototype.getResponseJson=Fr.prototype.Oa,Fr.prototype.getResponseText=Fr.prototype.oa,Fr.prototype.send=Fr.prototype.ea,Fr.prototype.setWithCredentials=Fr.prototype.Ha,PA=Fr}).apply(typeof Qm<"u"?Qm:typeof self<"u"?self:typeof window<"u"?window:{});const wS="@firebase/firestore",bS="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let os=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};os.UNAUTHENTICATED=new os(null),os.GOOGLE_CREDENTIALS=new os("google-credentials-uid"),os.FIRST_PARTY=new os("first-party-uid"),os.MOCK_USER=new os("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ud="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new Tw("@firebase/firestore");function qu(){return Dc.logLevel}function ft(t,...e){if(Dc.logLevel<=Kt.DEBUG){const r=e.map(Vw);Dc.debug(`Firestore (${Ud}): ${t}`,...r)}}function vo(t,...e){if(Dc.logLevel<=Kt.ERROR){const r=e.map(Vw);Dc.error(`Firestore (${Ud}): ${t}`,...r)}}function Fc(t,...e){if(Dc.logLevel<=Kt.WARN){const r=e.map(Vw);Dc.warn(`Firestore (${Ud}): ${t}`,...r)}}function Vw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,OA(t,n,r)}function OA(t,e,r){let n=`FIRESTORE (${Ud}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw vo(n),new Error(n)}function hr(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||OA(e,s,n)}function Mt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class at extends ko{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(os.UNAUTHENTICATED))}shutdown(){}}class s9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class a9{constructor(e){this.t=e,this.currentUser=os.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){hr(this.o===void 0,42304);let n=this.i;const s=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let i=new io;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new io,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new io)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(hr(typeof n.accessToken=="string",31837,{l:n}),new MA(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return hr(e===null||typeof e=="string",2055,{h:e}),new os(e)}}class i9{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=os.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class o9{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new i9(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(os.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _S{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class l9{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pa(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){hr(this.o===void 0,3512);const n=i=>{i.error!=null&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ft("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _S(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(hr(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new _S(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=c9(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%62))}return n}}function $t(t,e){return t<e?-1:t>e?1:0}function _1(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=t.codePointAt(r),s=e.codePointAt(r);if(n!==s){if(n<128&&s<128)return $t(n,s);{const i=BA(),o=u9(i.encode(NS(t,r)),i.encode(NS(e,r)));return o!==0?o:$t(n,s)}}r+=n>65535?2:1}return $t(t.length,e.length)}function NS(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function u9(t,e){for(let r=0;r<t.length&&r<e.length;++r)if(t[r]!==e[r])return $t(t[r],e[r]);return $t(t.length,e.length)}function gd(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=-62135596800,SS=1e6;class Jr{static now(){return Jr.fromMillis(Date.now())}static fromDate(e){return Jr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*SS);return new Jr(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new at(Oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new at(Oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<ES)throw new at(Oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new at(Oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/SS}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-ES;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new Jr(0,0))}static max(){return new Ot(new Jr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="__name__";class Si{constructor(e,r,n){r===void 0?r=0:r>e.length&&It(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&It(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Si.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Si?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=Si.compareSegments(e.get(s),r.get(s));if(i!==0)return i}return $t(e.length,r.length)}static compareSegments(e,r){const n=Si.isNumericId(e),s=Si.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?Si.extractNumericId(e).compare(Si.extractNumericId(r)):_1(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bl.fromString(e.substring(4,e.length-2))}}class Nr extends Si{construct(e,r,n){return new Nr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new at(Oe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new Nr(r)}static emptyPath(){return new Nr([])}}const d9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dn extends Si{construct(e,r,n){return new Dn(e,r,n)}static isValidIdentifier(e){return d9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kS}static keyField(){return new Dn([kS])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new at(Oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new at(Oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new at(Oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(n+=l,s++):(i(),s++)}if(i(),o)throw new at(Oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dn(r)}static emptyPath(){return new Dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.path=e}static fromPath(e){return new bt(Nr.fromString(e))}static fromName(e){return new bt(Nr.fromString(e).popFirst(5))}static empty(){return new bt(Nr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Nr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bt(new Nr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=-1;function h9(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Ot.fromTimestamp(n===1e9?new Jr(r+1,0):new Jr(r,n));return new Nl(s,bt.empty(),e)}function f9(t){return new Nl(t.readTime,t.key,Ef)}class Nl{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Nl(Ot.min(),bt.empty(),Ef)}static max(){return new Nl(Ot.max(),bt.empty(),Ef)}}function m9(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=bt.comparator(t.documentKey,e.documentKey),r!==0?r:$t(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zd(t){if(t.code!==Oe.FAILED_PRECONDITION||t.message!==p9)throw t;ft("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&It(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Be((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Be?r:Be.resolve(r)}catch(r){return Be.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Be.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Be.reject(r)}static resolve(e){return new Be((r,n)=>{r(e)})}static reject(e){return new Be((r,n)=>{n(e)})}static waitFor(e){return new Be((r,n)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&r()},u=>n(u))}),o=!0,i===s&&r()})}static or(e){let r=Be.resolve(!1);for(const n of e)r=r.next(s=>s?Be.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Be((n,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;r(e[h]).next(f=>{o[h]=f,++l,l===i&&n(o)},f=>s(f))}})}static doWhile(e,r){return new Be((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function x9(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function $d(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ue(n),this.ce=n=>r.writeSequenceNumber(n))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Lg.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=-1;function Og(t){return t==null}function Hp(t){return t===0&&1/t==-1/0}function v9(t){return typeof t=="number"&&Number.isInteger(t)&&!Hp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="";function y9(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=TS(e)),e=w9(t.get(r),e);return TS(e)}function w9(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case UA:r+="";break;default:r+=i}}return r}function TS(t){return t+UA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Bl(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function zA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,r){this.comparator=e,this.root=r||Gn.EMPTY}insert(e,r){return new qr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Gn.BLACK,null,null))}remove(e){return new qr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jm(this.root,e,this.comparator,!0)}}class Jm{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gn{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??Gn.RED,this.left=s??Gn.EMPTY,this.right=i??Gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new Gn(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Gn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw It(43730,{key:this.key,value:this.value});if(this.right.isRed())throw It(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw It(27949);return e+(this.isRed()?0:1)}}Gn.EMPTY=null,Gn.RED=!0,Gn.BLACK=!1;Gn.EMPTY=new class{constructor(){this.size=0}get key(){throw It(57766)}get value(){throw It(16141)}get color(){throw It(16727)}get left(){throw It(29726)}get right(){throw It(36894)}copy(e,r,n,s,i){return this}insert(e,r,n){return new Gn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.comparator=e,this.data=new qr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new AS(this.data.getIterator())}getIteratorFrom(e){return new AS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new En(this.comparator);return r.data=e,r}}class AS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.fields=e,e.sort(Dn.comparator)}static empty(){return new ca([])}unionWith(e){let r=new En(Dn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ca(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return gd(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new $A("Invalid base64 string: "+i):i}}(e);return new Mn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Mn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mn.EMPTY_BYTE_STRING=new Mn("");const b9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function El(t){if(hr(!!t,39018),typeof t=="string"){let e=0;const r=b9.exec(t);if(hr(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:an(t.seconds),nanos:an(t.nanos)}}function an(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sl(t){return typeof t=="string"?Mn.fromBase64String(t):Mn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="server_timestamp",WA="__type__",qA="__previous_value__",GA="__local_write_time__";function Mg(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[WA])===null||r===void 0?void 0:r.stringValue)===HA}function Vg(t){const e=t.mapValue.fields[qA];return Mg(e)?Vg(e):e}function Sf(t){const e=El(t.mapValue.fields[GA].timestampValue);return new Jr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(e,r,n,s,i,o,l,u,h,f){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=f}}const Wp="(default)";class xd{constructor(e,r){this.projectId=e,this.database=r||Wp}static empty(){return new xd("","")}get isDefaultDatabase(){return this.database===Wp}isEqual(e){return e instanceof xd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="__type__",N9="__max__",Zm={mapValue:{}},XA="__vector__",qp="value";function kl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mg(t)?4:S9(t)?9007199254740991:E9(t)?10:11:It(28295,{value:t})}function Ri(t,e){if(t===e)return!0;const r=kl(t);if(r!==kl(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Sf(t).isEqual(Sf(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=El(s.timestampValue),l=El(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Sl(s.bytesValue).isEqual(Sl(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return an(s.geoPointValue.latitude)===an(i.geoPointValue.latitude)&&an(s.geoPointValue.longitude)===an(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return an(s.integerValue)===an(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=an(s.doubleValue),l=an(i.doubleValue);return o===l?Hp(o)===Hp(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return gd(t.arrayValue.values||[],e.arrayValue.values||[],Ri);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(jS(o)!==jS(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Ri(o[u],l[u])))return!1;return!0}(t,e);default:return It(52216,{left:t})}}function kf(t,e){return(t.values||[]).find(r=>Ri(r,e))!==void 0}function vd(t,e){if(t===e)return 0;const r=kl(t),n=kl(e);if(r!==n)return $t(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return $t(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=an(i.integerValue||i.doubleValue),u=an(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return CS(t.timestampValue,e.timestampValue);case 4:return CS(Sf(t),Sf(e));case 5:return _1(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Sl(i),u=Sl(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=$t(l[h],u[h]);if(f!==0)return f}return $t(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=$t(an(i.latitude),an(o.latitude));return l!==0?l:$t(an(i.longitude),an(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return IS(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,h,f;const p=i.fields||{},g=o.fields||{},y=(l=p[qp])===null||l===void 0?void 0:l.arrayValue,w=(u=g[qp])===null||u===void 0?void 0:u.arrayValue,b=$t(((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0,((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:IS(y,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Zm.mapValue&&o===Zm.mapValue)return 0;if(i===Zm.mapValue)return 1;if(o===Zm.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=_1(u[p],f[p]);if(g!==0)return g;const y=vd(l[u[p]],h[f[p]]);if(y!==0)return y}return $t(u.length,f.length)}(t.mapValue,e.mapValue);default:throw It(23264,{Pe:r})}}function CS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $t(t,e);const r=El(t),n=El(e),s=$t(r.seconds,n.seconds);return s!==0?s:$t(r.nanos,n.nanos)}function IS(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=vd(r[s],n[s]);if(i)return i}return $t(r.length,n.length)}function yd(t){return N1(t)}function N1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=El(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Sl(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return bt.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=N1(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const o of n)i?i=!1:s+=",",s+=`${o}:${N1(r.fields[o])}`;return s+"}"}(t.mapValue):It(61005,{value:t})}function kp(t){switch(kl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vg(t);return e?16+kp(e):16;case 5:return 2*t.stringValue.length;case 6:return Sl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+kp(i),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return Bl(n.fields,(i,o)=>{s+=i.length+kp(o)}),s}(t.mapValue);default:throw It(13486,{value:t})}}function Gp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function E1(t){return!!t&&"integerValue"in t}function zw(t){return!!t&&"arrayValue"in t}function PS(t){return!!t&&"nullValue"in t}function RS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tp(t){return!!t&&"mapValue"in t}function E9(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[KA])===null||r===void 0?void 0:r.stringValue)===XA}function ef(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bl(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=ef(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=ef(t.arrayValue.values[r]);return e}return Object.assign({},t)}function S9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===N9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.value=e}static empty(){return new Hs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Tp(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=ef(r)}setAll(e){let r=Dn.emptyPath(),n={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,n,s),n={},s=[],r=l.popLast()}o?n[l.lastSegment()]=ef(o):s.push(l.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());Tp(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ri(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Tp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Bl(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Hs(ef(this.value))}}function YA(t){const e=[];return Bl(t.fields,(r,n)=>{const s=new Dn([r]);if(Tp(n)){const i=YA(n.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new ca(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,r,n,s,i,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new us(e,0,Ot.min(),Ot.min(),Ot.min(),Hs.empty(),0)}static newFoundDocument(e,r,n,s){return new us(e,1,r,Ot.min(),n,s,0)}static newNoDocument(e,r){return new us(e,2,r,Ot.min(),Ot.min(),Hs.empty(),0)}static newUnknownDocument(e,r){return new us(e,3,r,Ot.min(),Ot.min(),Hs.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof us&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new us(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,r){this.position=e,this.inclusive=r}}function DS(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?n=bt.comparator(bt.fromName(o.referenceValue),r.key):n=vd(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function FS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ri(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,r="asc"){this.field=e,this.dir=r}}function k9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{}class xn extends QA{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new j9(e,r,n):r==="array-contains"?new I9(e,n):r==="in"?new P9(e,n):r==="not-in"?new R9(e,n):r==="array-contains-any"?new D9(e,n):new xn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new A9(e,n):new C9(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(vd(r,this.value)):r!==null&&kl(this.value)===kl(r)&&this.matchesComparison(vd(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return It(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ii extends QA{constructor(e,r){super(),this.filters=e,this.op=r,this.Te=null}static create(e,r){return new ii(e,r)}matches(e){return JA(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function JA(t){return t.op==="and"}function ZA(t){return T9(t)&&JA(t)}function T9(t){for(const e of t.filters)if(e instanceof ii)return!1;return!0}function S1(t){if(t instanceof xn)return t.field.canonicalString()+t.op.toString()+yd(t.value);if(ZA(t))return t.filters.map(e=>S1(e)).join(",");{const e=t.filters.map(r=>S1(r)).join(",");return`${t.op}(${e})`}}function eC(t,e){return t instanceof xn?function(n,s){return s instanceof xn&&n.op===s.op&&n.field.isEqual(s.field)&&Ri(n.value,s.value)}(t,e):t instanceof ii?function(n,s){return s instanceof ii&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,o,l)=>i&&eC(o,s.filters[l]),!0):!1}(t,e):void It(19439)}function tC(t){return t instanceof xn?function(r){return`${r.field.canonicalString()} ${r.op} ${yd(r.value)}`}(t):t instanceof ii?function(r){return r.op.toString()+" {"+r.getFilters().map(tC).join(" ,")+"}"}(t):"Filter"}class j9 extends xn{constructor(e,r,n){super(e,r,n),this.key=bt.fromName(n.referenceValue)}matches(e){const r=bt.comparator(e.key,this.key);return this.matchesComparison(r)}}class A9 extends xn{constructor(e,r){super(e,"in",r),this.keys=rC("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class C9 extends xn{constructor(e,r){super(e,"not-in",r),this.keys=rC("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function rC(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>bt.fromName(n.referenceValue))}class I9 extends xn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return zw(r)&&kf(r.arrayValue,this.value)}}class P9 extends xn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&kf(this.value.arrayValue,r)}}class R9 extends xn{constructor(e,r){super(e,"not-in",r)}matches(e){if(kf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!kf(this.value.arrayValue,r)}}class D9 extends xn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!zw(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>kf(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e,r=null,n=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function LS(t,e=null,r=[],n=[],s=null,i=null,o=null){return new F9(t,e,r,n,s,i,o)}function $w(t){const e=Mt(t);if(e.Ie===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>S1(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Og(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>yd(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>yd(n)).join(",")),e.Ie=r}return e.Ie}function Hw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!k9(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!eC(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!FS(t.startAt,e.startAt)&&FS(t.endAt,e.endAt)}function k1(t){return bt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,r=null,n=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function L9(t,e,r,n,s,i,o,l){return new Yc(t,e,r,n,s,i,o,l)}function Bg(t){return new Yc(t)}function OS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ww(t){return t.collectionGroup!==null}function ld(t){const e=Mt(t);if(e.Ee===null){e.Ee=[];const r=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new En(Dn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new Tf(i,n))}),r.has(Dn.keyField().canonicalString())||e.Ee.push(new Tf(Dn.keyField(),n))}return e.Ee}function Ai(t){const e=Mt(t);return e.de||(e.de=O9(e,ld(t))),e.de}function O9(t,e){if(t.limitType==="F")return LS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Tf(s.field,i)});const r=t.endAt?new wd(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new wd(t.startAt.position,t.startAt.inclusive):null;return LS(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function T1(t,e){const r=t.filters.concat([e]);return new Yc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Kp(t,e,r){return new Yc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Ug(t,e){return Hw(Ai(t),Ai(e))&&t.limitType===e.limitType}function nC(t){return`${$w(Ai(t))}|lt:${t.limitType}`}function Gu(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>tC(s)).join(", ")}]`),Og(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>yd(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>yd(s)).join(",")),`Target(${n})`}(Ai(t))}; limitType=${t.limitType})`}function zg(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):bt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of ld(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(o,l,u){const h=DS(o,l,u);return o.inclusive?h<=0:h<0}(n.startAt,ld(n),s)||n.endAt&&!function(o,l,u){const h=DS(o,l,u);return o.inclusive?h>=0:h>0}(n.endAt,ld(n),s))}(t,e)}function M9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sC(t){return(e,r)=>{let n=!1;for(const s of ld(t)){const i=V9(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function V9(t,e,r){const n=t.field.isKeyField()?bt.comparator(e.key,r.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?vd(u,h):It(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return It(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Bl(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return zA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9=new qr(bt.comparator);function yo(){return B9}const aC=new qr(bt.comparator);function $h(...t){let e=aC;for(const r of t)e=e.insert(r.key,r);return e}function iC(t){let e=aC;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function yc(){return tf()}function oC(){return tf()}function tf(){return new Qc(t=>t.toString(),(t,e)=>t.isEqual(e))}const U9=new qr(bt.comparator),z9=new En(bt.comparator);function Xt(...t){let e=z9;for(const r of t)e=e.add(r);return e}const $9=new En($t);function H9(){return $9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hp(e)?"-0":e}}function lC(t){return{integerValue:""+t}}function W9(t,e){return v9(e)?lC(e):qw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(){this._=void 0}}function q9(t,e,r){return t instanceof jf?function(s,i){const o={fields:{[WA]:{stringValue:HA},[GA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Mg(i)&&(i=Vg(i)),i&&(o.fields[qA]=i),{mapValue:o}}(r,e):t instanceof bd?uC(t,e):t instanceof _d?dC(t,e):function(s,i){const o=cC(s,i),l=MS(o)+MS(s.Re);return E1(o)&&E1(s.Re)?lC(l):qw(s.serializer,l)}(t,e)}function G9(t,e,r){return t instanceof bd?uC(t,e):t instanceof _d?dC(t,e):r}function cC(t,e){return t instanceof Xp?function(n){return E1(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class jf extends $g{}class bd extends $g{constructor(e){super(),this.elements=e}}function uC(t,e){const r=hC(e);for(const n of t.elements)r.some(s=>Ri(s,n))||r.push(n);return{arrayValue:{values:r}}}class _d extends $g{constructor(e){super(),this.elements=e}}function dC(t,e){let r=hC(e);for(const n of t.elements)r=r.filter(s=>!Ri(s,n));return{arrayValue:{values:r}}}class Xp extends $g{constructor(e,r){super(),this.serializer=e,this.Re=r}}function MS(t){return an(t.integerValue||t.doubleValue)}function hC(t){return zw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,r){this.field=e,this.transform=r}}function K9(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof bd&&s instanceof bd||n instanceof _d&&s instanceof _d?gd(n.elements,s.elements,Ri):n instanceof Xp&&s instanceof Xp?Ri(n.Re,s.Re):n instanceof jf&&s instanceof jf}(t.transform,e.transform)}class X9{constructor(e,r){this.version=e,this.transformResults=r}}class js{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new js}static exists(e){return new js(void 0,e)}static updateTime(e){return new js(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hg{}function fC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wg(t.key,js.none()):new c0(t.key,t.data,js.none());{const r=t.data,n=Hs.empty();let s=new En(Dn.comparator);for(let i of e.fields)if(!s.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),s=s.add(i)}return new Ul(t.key,n,new ca(s.toArray()),js.none())}}function Y9(t,e,r){t instanceof c0?function(s,i,o){const l=s.value.clone(),u=BS(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Ul?function(s,i,o){if(!jp(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=BS(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(mC(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,r):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function rf(t,e,r,n){return t instanceof c0?function(i,o,l,u){if(!jp(i.precondition,o))return l;const h=i.value.clone(),f=US(i.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,r,n):t instanceof Ul?function(i,o,l,u){if(!jp(i.precondition,o))return l;const h=US(i.fieldTransforms,u,o),f=o.data;return f.setAll(mC(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,r,n):function(i,o,l){return jp(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function Q9(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=cC(n.transform,s||null);i!=null&&(r===null&&(r=Hs.empty()),r.set(n.field,i))}return r||null}function VS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&gd(n,s,(i,o)=>K9(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class c0 extends Hg{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ul extends Hg{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function mC(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function BS(t,e,r){const n=new Map;hr(t.length===r.length,32656,{Ve:r.length,me:t.length});for(let s=0;s<r.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);n.set(i.field,G9(o,l,r[s]))}return n}function US(t,e,r){const n=new Map;for(const s of t){const i=s.transform,o=r.data.field(s.field);n.set(s.field,q9(i,o,e))}return n}class Wg extends Hg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class J9 extends Hg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Y9(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=rf(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=rf(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=oC();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=r.has(s.key)?null:l;const u=fC(o,l);u!==null&&n.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Ot.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Xt())}isEqual(e){return this.batchId===e.batchId&&gd(this.mutations,e.mutations,(r,n)=>VS(r,n))&&gd(this.baseMutations,e.baseMutations,(r,n)=>VS(r,n))}}class Kw{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){hr(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let s=function(){return U9}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,n[o].version);return new Kw(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn,Zt;function r7(t){switch(t){case Oe.OK:return It(64938);case Oe.CANCELLED:case Oe.UNKNOWN:case Oe.DEADLINE_EXCEEDED:case Oe.RESOURCE_EXHAUSTED:case Oe.INTERNAL:case Oe.UNAVAILABLE:case Oe.UNAUTHENTICATED:return!1;case Oe.INVALID_ARGUMENT:case Oe.NOT_FOUND:case Oe.ALREADY_EXISTS:case Oe.PERMISSION_DENIED:case Oe.FAILED_PRECONDITION:case Oe.ABORTED:case Oe.OUT_OF_RANGE:case Oe.UNIMPLEMENTED:case Oe.DATA_LOSS:return!0;default:return It(15467,{code:t})}}function pC(t){if(t===void 0)return vo("GRPC error has no .code"),Oe.UNKNOWN;switch(t){case mn.OK:return Oe.OK;case mn.CANCELLED:return Oe.CANCELLED;case mn.UNKNOWN:return Oe.UNKNOWN;case mn.DEADLINE_EXCEEDED:return Oe.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return Oe.RESOURCE_EXHAUSTED;case mn.INTERNAL:return Oe.INTERNAL;case mn.UNAVAILABLE:return Oe.UNAVAILABLE;case mn.UNAUTHENTICATED:return Oe.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return Oe.INVALID_ARGUMENT;case mn.NOT_FOUND:return Oe.NOT_FOUND;case mn.ALREADY_EXISTS:return Oe.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return Oe.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return Oe.FAILED_PRECONDITION;case mn.ABORTED:return Oe.ABORTED;case mn.OUT_OF_RANGE:return Oe.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return Oe.UNIMPLEMENTED;case mn.DATA_LOSS:return Oe.DATA_LOSS;default:return It(39323,{code:t})}}(Zt=mn||(mn={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n7=new bl([4294967295,4294967295],0);function zS(t){const e=BA().encode(t),r=new IA;return r.update(e),new Uint8Array(r.digest())}function $S(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new bl([r,n],0),new bl([s,i],0)]}class Xw{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Hh(`Invalid padding: ${r}`);if(n<0)throw new Hh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Hh(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Hh(`Invalid padding when bitmap length is 0: ${r}`);this.pe=8*e.length-r,this.ye=bl.fromNumber(this.pe)}we(e,r,n){let s=e.add(r.multiply(bl.fromNumber(n)));return s.compare(n7)===1&&(s=new bl([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const r=zS(e),[n,s]=$S(r);for(let i=0;i<this.hashCount;i++){const o=this.we(n,s,i);if(!this.be(o))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Xw(i,s,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const r=zS(e),[n,s]=$S(r);for(let i=0;i<this.hashCount;i++){const o=this.we(n,s,i);this.Se(o)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Hh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,u0.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new qg(Ot.min(),s,new qr($t),yo(),Xt())}}class u0{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new u0(n,r,Xt(),Xt(),Xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,r,n,s){this.De=e,this.removedTargetIds=r,this.key=n,this.ve=s}}class gC{constructor(e,r){this.targetId=e,this.Ce=r}}class xC{constructor(e,r,n=Mn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class HS{constructor(){this.Fe=0,this.Me=WS(),this.xe=Mn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Xt(),r=Xt(),n=Xt();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:It(38017,{changeType:i})}}),new u0(this.xe,this.Oe,e,r,n)}Qe(){this.Ne=!1,this.Me=WS()}$e(e,r){this.Ne=!0,this.Me=this.Me.insert(e,r)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,hr(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class s7{constructor(e){this.ze=e,this.je=new Map,this.He=yo(),this.Je=ep(),this.Ye=ep(),this.Ze=new qr($t)}Xe(e){for(const r of e.De)e.ve&&e.ve.isFoundDocument()?this.et(r,e.ve):this.tt(r,e.key,e.ve);for(const r of e.removedTargetIds)this.tt(r,e.key,e.ve)}nt(e){this.forEachTarget(e,r=>{const n=this.rt(r);switch(e.state){case 0:this.it(r)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(r);break;case 3:this.it(r)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(r)&&(this.st(r),n.ke(e.resumeToken));break;default:It(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.je.forEach((n,s)=>{this.it(s)&&r(s)})}ot(e){const r=e.targetId,n=e.Ce.count,s=this._t(r);if(s){const i=s.target;if(k1(i))if(n===0){const o=new bt(i.path);this.tt(r,o,us.newNoDocument(o,Ot.min()))}else hr(n===1,20013,{expectedCount:n});else{const o=this.ut(r);if(o!==n){const l=this.ct(e),u=l?this.lt(l,e,o):1;if(u!==0){this.st(r);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(r,h)}}}}}ct(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let o,l;try{o=Sl(n).toUint8Array()}catch(u){if(u instanceof $A)return Fc("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Xw(o,s,i)}catch(u){return Fc(u instanceof Hh?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(e,r,n){return r.Ce.count===n-this.Tt(e,r.targetId)?0:2}Tt(e,r){const n=this.ze.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(r,i,null),s++)}),s}It(e){const r=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&k1(l.target)){const u=new bt(l.target.path);this.Et(u).has(o)||this.dt(o,u)||this.tt(o,u,us.newNoDocument(u,e))}i.Le&&(r.set(o,i.qe()),i.Qe())}});let n=Xt();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this._t(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new qg(e,r,this.Ze,this.He,n);return this.He=yo(),this.Je=ep(),this.Ye=ep(),this.Ze=new qr($t),s}et(e,r){if(!this.it(e))return;const n=this.dt(e,r.key)?2:0;this.rt(e).$e(r.key,n),this.He=this.He.insert(r.key,r),this.Je=this.Je.insert(r.key,this.Et(r.key).add(e)),this.Ye=this.Ye.insert(r.key,this.At(r.key).add(e))}tt(e,r,n){if(!this.it(e))return;const s=this.rt(e);this.dt(e,r)?s.$e(r,1):s.Ue(r),this.Ye=this.Ye.insert(r,this.At(r).delete(e)),this.Ye=this.Ye.insert(r,this.At(r).add(e)),n&&(this.He=this.He.insert(r,n))}removeTarget(e){this.je.delete(e)}ut(e){const r=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let r=this.je.get(e);return r||(r=new HS,this.je.set(e,r)),r}At(e){let r=this.Ye.get(e);return r||(r=new En($t),this.Ye=this.Ye.insert(e,r)),r}Et(e){let r=this.Je.get(e);return r||(r=new En($t),this.Je=this.Je.insert(e,r)),r}it(e){const r=this._t(e)!==null;return r||ft("WatchChangeAggregator","Detected inactive target",e),r}_t(e){const r=this.je.get(e);return r&&r.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new HS),this.ze.getRemoteKeysForTarget(e).forEach(r=>{this.tt(e,r,null)})}dt(e,r){return this.ze.getRemoteKeysForTarget(e).has(r)}}function ep(){return new qr(bt.comparator)}function WS(){return new qr(bt.comparator)}const a7={asc:"ASCENDING",desc:"DESCENDING"},i7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o7={and:"AND",or:"OR"};class l7{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function j1(t,e){return t.useProto3Json||Og(e)?e:{value:e}}function Yp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function c7(t,e){return Yp(t,e.toTimestamp())}function Ci(t){return hr(!!t,49232),Ot.fromTimestamp(function(r){const n=El(r);return new Jr(n.seconds,n.nanos)}(t))}function Yw(t,e){return A1(t,e).canonicalString()}function A1(t,e){const r=function(s){return new Nr(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function yC(t){const e=Nr.fromString(t);return hr(EC(e),10190,{key:e.toString()}),e}function C1(t,e){return Yw(t.databaseId,e.path)}function yy(t,e){const r=yC(e);if(r.get(1)!==t.databaseId.projectId)throw new at(Oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new at(Oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new bt(bC(r))}function wC(t,e){return Yw(t.databaseId,e)}function u7(t){const e=yC(t);return e.length===4?Nr.emptyPath():bC(e)}function I1(t){return new Nr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bC(t){return hr(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function qS(t,e,r){return{name:C1(t,e),fields:r.value.mapValue.fields}}function d7(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:It(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(hr(f===void 0||typeof f=="string",58123),Mn.fromBase64String(f||"")):(hr(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Mn.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?Oe.UNKNOWN:pC(h.code);return new at(f,h.message||"")}(o);r=new xC(n,s,i,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=yy(t,n.document.name),i=Ci(n.document.updateTime),o=n.document.createTime?Ci(n.document.createTime):Ot.min(),l=new Hs({mapValue:{fields:n.document.fields}}),u=us.newFoundDocument(s,i,o,l),h=n.targetIds||[],f=n.removedTargetIds||[];r=new Ap(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=yy(t,n.document),i=n.readTime?Ci(n.readTime):Ot.min(),o=us.newNoDocument(s,i),l=n.removedTargetIds||[];r=new Ap([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=yy(t,n.document),i=n.removedTargetIds||[];r=new Ap([],i,s,null)}else{if(!("filter"in e))return It(11601,{Vt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,o=new t7(s,i),l=n.targetId;r=new gC(l,o)}}return r}function h7(t,e){let r;if(e instanceof c0)r={update:qS(t,e.key,e.value)};else if(e instanceof Wg)r={delete:C1(t,e.key)};else if(e instanceof Ul)r={update:qS(t,e.key,e.data),updateMask:b7(e.fieldMask)};else{if(!(e instanceof J9))return It(16599,{ft:e.type});r={verify:C1(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,o){const l=o.transform;if(l instanceof jf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof bd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof _d)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Xp)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw It(20930,{transform:o.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:c7(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:It(27497)}(t,e.precondition)),r}function f7(t,e){return t&&t.length>0?(hr(e!==void 0,14353),t.map(r=>function(s,i){let o=s.updateTime?Ci(s.updateTime):Ci(i);return o.isEqual(Ot.min())&&(o=Ci(i)),new X9(o,s.transformResults||[])}(r,e))):[]}function m7(t,e){return{documents:[wC(t,e.path)]}}function p7(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=wC(t,s);const i=function(h){if(h.length!==0)return NC(ii.create(h,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(f=>function(g){return{field:Ku(g.field),direction:v7(g.dir)}}(f))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=j1(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:r,parent:s}}function g7(t){let e=u7(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){hr(n===1,65062);const f=r.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];r.where&&(i=function(p){const g=_C(p);return g instanceof ii&&ZA(g)?g.getFilters():[g]}(r.where));let o=[];r.orderBy&&(o=function(p){return p.map(g=>function(w){return new Tf(Xu(w.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(r.orderBy));let l=null;r.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Og(g)?null:g}(r.limit));let u=null;r.startAt&&(u=function(p){const g=!!p.before,y=p.values||[];return new wd(y,g)}(r.startAt));let h=null;return r.endAt&&(h=function(p){const g=!p.before,y=p.values||[];return new wd(y,g)}(r.endAt)),L9(e,s,o,i,l,"F",u,h)}function x7(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function _C(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Xu(r.unaryFilter.field);return xn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Xu(r.unaryFilter.field);return xn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xu(r.unaryFilter.field);return xn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Xu(r.unaryFilter.field);return xn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return It(61313);default:return It(60726)}}(t):t.fieldFilter!==void 0?function(r){return xn.create(Xu(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return It(58110);default:return It(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return ii.create(r.compositeFilter.filters.map(n=>_C(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return It(1026)}}(r.compositeFilter.op))}(t):It(30097,{filter:t})}function v7(t){return a7[t]}function y7(t){return i7[t]}function w7(t){return o7[t]}function Ku(t){return{fieldPath:t.canonicalString()}}function Xu(t){return Dn.fromServerFormat(t.fieldPath)}function NC(t){return t instanceof xn?function(r){if(r.op==="=="){if(RS(r.value))return{unaryFilter:{field:Ku(r.field),op:"IS_NAN"}};if(PS(r.value))return{unaryFilter:{field:Ku(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(RS(r.value))return{unaryFilter:{field:Ku(r.field),op:"IS_NOT_NAN"}};if(PS(r.value))return{unaryFilter:{field:Ku(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ku(r.field),op:y7(r.op),value:r.value}}}(t):t instanceof ii?function(r){const n=r.getFilters().map(s=>NC(s));return n.length===1?n[0]:{compositeFilter:{op:w7(r.op),filters:n}}}(t):It(54877,{filter:t})}function b7(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function EC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,r,n,s,i=Ot.min(),o=Ot.min(),l=Mn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ml(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ml(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ml(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ml(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(e){this.wt=e}}function N7(t){const e=g7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Kp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(){this.Cn=new S7}addToCollectionParentIndex(e,r){return this.Cn.add(r),Be.resolve()}getCollectionParents(e,r){return Be.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return Be.resolve()}deleteFieldIndex(e,r){return Be.resolve()}deleteAllFieldIndexes(e){return Be.resolve()}createTargetIndexes(e,r){return Be.resolve()}getDocumentsMatchingTarget(e,r){return Be.resolve(null)}getIndexType(e,r){return Be.resolve(0)}getFieldIndexes(e,r){return Be.resolve([])}getNextCollectionGroupToUpdate(e){return Be.resolve(null)}getMinOffset(e,r){return Be.resolve(Nl.min())}getMinOffsetFromCollectionGroup(e,r){return Be.resolve(Nl.min())}updateCollectionGroup(e,r,n){return Be.resolve()}updateIndexEntries(e,r){return Be.resolve()}}class S7{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new En(Nr.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new En(Nr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SC=41943040;class $s{static withCacheSize(e){return new $s(e,$s.DEFAULT_COLLECTION_PERCENTILE,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$s.DEFAULT_COLLECTION_PERCENTILE=10,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$s.DEFAULT=new $s(SC,$s.DEFAULT_COLLECTION_PERCENTILE,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$s.DISABLED=new $s(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Nd(0)}static lr(){return new Nd(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="LruGarbageCollector",k7=1048576;function XS([t,e],[r,n]){const s=$t(t,r);return s===0?$t(e,n):s}class T7{constructor(e){this.Er=e,this.buffer=new En(XS),this.dr=0}Ar(){return++this.dr}Rr(e){const r=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();XS(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class j7{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ft(KS,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){$d(r)?ft(KS,"Ignoring IndexedDB error during garbage collection: ",r):await zd(r)}await this.mr(3e5)})}}class A7{constructor(e,r){this.gr=e,this.params=r}calculateTargetCount(e,r){return this.gr.pr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Be.resolve(Lg.le);const n=new T7(r);return this.gr.forEachTarget(e,s=>n.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>n.Rr(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.gr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.gr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),Be.resolve(GS)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GS):this.wr(e,r))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,r){let n,s,i,o,l,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(n=p,l=Date.now(),this.removeTargets(e,n,r))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(p=>(h=Date.now(),qu()<=Kt.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),Be.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function C7(t,e){return new A7(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(){this.changes=new Qc(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,us.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Be.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&rf(n.mutation,s,ca.empty(),Jr.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Xt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Xt()){const s=yc();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let o=$h();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=yc();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Xt()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,s){let i=yo();const o=tf(),l=function(){return tf()}();return r.forEach((u,h)=>{const f=n.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof Ul)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),rf(f.mutation,h,f.mutation.getFieldMask(),Jr.now())):o.set(h.key,ca.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,f)=>o.set(h,f)),r.forEach((h,f)=>{var p;return l.set(h,new P7(f,(p=o.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,r){const n=tf();let s=new qr((o,l)=>o-l),i=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=r.get(u);if(h===null)return;let f=n.get(u)||ca.empty();f=l.applyToLocalView(h,f),n.set(u,f);const p=(s.get(l.batchId)||Xt()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,p=oC();f.forEach(g=>{if(!i.has(g)){const y=fC(r.get(g),n.get(g));y!==null&&p.set(g,y),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return Be.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(o){return bt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Ww(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Be.resolve(yc());let l=Ef,u=i;return o.next(h=>Be.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?Be.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,Xt())).next(f=>({batchId:l,changes:iC(f)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new bt(r)).next(n=>{let s=$h();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let o=$h();return this.indexManager.getCollectionParents(e,i).next(l=>Be.forEach(l,u=>{const h=function(p,g){return new Yc(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(r,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,s).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(o=>{i.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,us.newInvalidDocument(f)))});let l=$h();return o.forEach((u,h)=>{const f=i.get(u);f!==void 0&&rf(f.mutation,h,ca.empty(),Jr.now()),zg(r,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,r){return Be.resolve(this.kr.get(r))}saveBundleMetadata(e,r){return this.kr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Ci(s.createTime)}}(r)),Be.resolve()}getNamedQuery(e,r){return Be.resolve(this.qr.get(r))}saveNamedQuery(e,r){return this.qr.set(r.name,function(s){return{name:s.name,query:N7(s.bundledQuery),readTime:Ci(s.readTime)}}(r)),Be.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(){this.overlays=new qr(bt.comparator),this.Qr=new Map}getOverlay(e,r){return Be.resolve(this.overlays.get(r))}getOverlays(e,r){const n=yc();return Be.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.St(e,r,i)}),Be.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Qr.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(n)),Be.resolve()}getOverlaysForCollection(e,r,n){const s=yc(),i=r.length+1,o=new bt(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>n&&s.set(u.getKey(),u)}return Be.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new qr((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let f=i.get(h.largestBatchId);f===null&&(f=yc(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=yc(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=s)););return Be.resolve(l)}St(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(n.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new e7(r,n));let i=this.Qr.get(r);i===void 0&&(i=Xt(),this.Qr.set(r,i)),this.Qr.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(){this.sessionToken=Mn.EMPTY_BYTE_STRING}getSessionToken(e){return Be.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Be.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.$r=new En(Pn.Ur),this.Kr=new En(Pn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,r){const n=new Pn(e,r);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.zr(new Pn(e,r))}jr(e,r){e.forEach(n=>this.removeReference(n,r))}Hr(e){const r=new bt(new Nr([])),n=new Pn(r,e),s=new Pn(r,e+1),i=[];return this.Kr.forEachInRange([n,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const r=new bt(new Nr([])),n=new Pn(r,e),s=new Pn(r,e+1);let i=Xt();return this.Kr.forEachInRange([n,s],o=>{i=i.add(o.key)}),i}containsKey(e){const r=new Pn(e,0),n=this.$r.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Pn{constructor(e,r){this.key=e,this.Zr=r}static Ur(e,r){return bt.comparator(e.key,r.key)||$t(e.Zr,r.Zr)}static Wr(e,r){return $t(e.Zr,r.Zr)||bt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.nr=1,this.Xr=new En(Pn.Ur)}checkEmpty(e){return Be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Z9(i,r,n,s);this.mutationQueue.push(o);for(const l of s)this.Xr=this.Xr.add(new Pn(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Be.resolve(o)}lookupMutationBatch(e,r){return Be.resolve(this.ei(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.ti(n),i=s<0?0:s;return Be.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Be.resolve(this.mutationQueue.length===0?Uw:this.nr-1)}getAllMutationBatches(e){return Be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Pn(r,0),s=new Pn(r,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([n,s],o=>{const l=this.ei(o.Zr);i.push(l)}),Be.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new En($t);return r.forEach(s=>{const i=new Pn(s,0),o=new Pn(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],l=>{n=n.add(l.Zr)})}),Be.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;bt.isDocumentKey(i)||(i=i.child(""));const o=new Pn(new bt(i),0);let l=new En($t);return this.Xr.forEachWhile(u=>{const h=u.key.path;return!!n.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Zr)),!0)},o),Be.resolve(this.ni(l))}ni(e){const r=[];return e.forEach(n=>{const s=this.ei(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){hr(this.ri(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Xr;return Be.forEach(r.mutations,s=>{const i=new Pn(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=n})}sr(e){}containsKey(e,r){const n=new Pn(r,0),s=this.Xr.firstAfterOrEqual(n);return Be.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Be.resolve()}ri(e,r){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const r=this.ti(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e){this.ii=e,this.docs=function(){return new qr(bt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,o=this.ii(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Be.resolve(n?n.document.mutableCopy():us.newInvalidDocument(r))}getEntries(e,r){let n=yo();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():us.newInvalidDocument(s))}),Be.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=yo();const o=r.path,l=new bt(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||m9(f9(f),n)<=0||(s.has(f.key)||zg(r,f))&&(i=i.insert(f.key,f.mutableCopy()))}return Be.resolve(i)}getAllFromCollectionGroup(e,r,n,s){It(9500)}si(e,r){return Be.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new V7(this)}getSize(e){return Be.resolve(this.size)}}class V7 extends I7{constructor(e){super(),this.Br=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Br.addEntry(e,s)):this.Br.removeEntry(n)}),Be.waitFor(r)}getFromCache(e,r){return this.Br.getEntry(e,r)}getAllFromCache(e,r){return this.Br.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(e){this.persistence=e,this.oi=new Qc(r=>$w(r),Hw),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this._i=0,this.ai=new Qw,this.targetCount=0,this.ui=Nd.cr()}forEachTarget(e,r){return this.oi.forEach((n,s)=>r(s)),Be.resolve()}getLastRemoteSnapshotVersion(e){return Be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Be.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Be.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this._i&&(this._i=r),Be.resolve()}Tr(e){this.oi.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ui=new Nd(r),this.highestTargetId=r),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,r){return this.Tr(r),this.targetCount+=1,Be.resolve()}updateTargetData(e,r){return this.Tr(r),Be.resolve()}removeTargetData(e,r){return this.oi.delete(r.target),this.ai.Hr(r.targetId),this.targetCount-=1,Be.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.oi.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),Be.waitFor(i).next(()=>s)}getTargetCount(e){return Be.resolve(this.targetCount)}getTargetData(e,r){const n=this.oi.get(r)||null;return Be.resolve(n)}addMatchingKeys(e,r,n){return this.ai.Gr(r,n),Be.resolve()}removeMatchingKeys(e,r,n){this.ai.jr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),Be.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.ai.Hr(r),Be.resolve()}getMatchingKeysForTargetId(e,r){const n=this.ai.Yr(r);return Be.resolve(n)}containsKey(e,r){return Be.resolve(this.ai.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,r){this.ci={},this.overlays={},this.li=new Lg(0),this.hi=!1,this.hi=!0,this.Pi=new L7,this.referenceDelegate=e(this),this.Ti=new B7(this),this.indexManager=new E7,this.remoteDocumentCache=function(s){return new M7(s)}(n=>this.referenceDelegate.Ii(n)),this.serializer=new _7(r),this.Ei=new D7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new F7,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ci[e.toKey()];return n||(n=new O7(r,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,r,n){ft("MemoryPersistence","Starting transaction:",e);const s=new U7(this.li.next());return this.referenceDelegate.di(),n(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,r){return Be.or(Object.values(this.ci).map(n=>()=>n.containsKey(e,r)))}}class U7 extends g9{constructor(e){super(),this.currentSequenceNumber=e}}class Jw{constructor(e){this.persistence=e,this.Vi=new Qw,this.mi=null}static fi(e){return new Jw(e)}get gi(){if(this.mi)return this.mi;throw It(60996)}addReference(e,r,n){return this.Vi.addReference(n,r),this.gi.delete(n.toString()),Be.resolve()}removeReference(e,r,n){return this.Vi.removeReference(n,r),this.gi.add(n.toString()),Be.resolve()}markPotentiallyOrphaned(e,r){return this.gi.add(r.toString()),Be.resolve()}removeTarget(e,r){this.Vi.Hr(r.targetId).forEach(s=>this.gi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}di(){this.mi=new Set}Ai(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Be.forEach(this.gi,n=>{const s=bt.fromPath(n);return this.pi(e,s).next(i=>{i||r.removeEntry(s,Ot.min())})}).next(()=>(this.mi=null,r.apply(e)))}updateLimboDocument(e,r){return this.pi(e,r).next(n=>{n?this.gi.delete(r.toString()):this.gi.add(r.toString())})}Ii(e){return 0}pi(e,r){return Be.or([()=>Be.resolve(this.Vi.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ri(e,r)])}}class Qp{constructor(e,r){this.persistence=e,this.yi=new Qc(n=>y9(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=C7(this,r)}static fi(e,r){return new Qp(e,r)}di(){}Ai(e){return Be.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}pr(e){const r=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}br(e){let r=0;return this.yr(e,n=>{r++}).next(()=>r)}yr(e,r){return Be.forEach(this.yi,(n,s)=>this.Dr(e,n,s).next(i=>i?Be.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,o=>this.Dr(e,o,r).next(l=>{l||(n++,i.removeEntry(o,Ot.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.yi.set(r,e.currentSequenceNumber),Be.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.yi.set(n,e.currentSequenceNumber),Be.resolve()}removeReference(e,r,n){return this.yi.set(n,e.currentSequenceNumber),Be.resolve()}updateLimboDocument(e,r){return this.yi.set(r,e.currentSequenceNumber),Be.resolve()}Ii(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=kp(e.data.value)),r}Dr(e,r,n){return Be.or([()=>this.persistence.Ri(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.yi.get(r);return Be.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.ds=n,this.As=s}static Rs(e,r){let n=Xt(),s=Xt();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Zw(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return _8()?8:x9(xs())>0?6:4}()}initialize(e,r){this.ys=e,this.indexManager=r,this.Vs=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.ws(e,r).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,r,s,n).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new z7;return this.Ss(e,r,o).next(l=>{if(i.result=l,this.fs)return this.Ds(e,r,o,l.size)})}).next(()=>i.result)}Ds(e,r,n,s){return n.documentReadCount<this.gs?(qu()<=Kt.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",Gu(r),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Be.resolve()):(qu()<=Kt.DEBUG&&ft("QueryEngine","Query:",Gu(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.ps*s?(qu()<=Kt.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",Gu(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ai(r))):Be.resolve())}ws(e,r){if(OS(r))return Be.resolve(null);let n=Ai(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Kp(r,null,"F"),n=Ai(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const o=Xt(...i);return this.ys.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(u=>{const h=this.vs(r,l);return this.Cs(r,h,o,u.readTime)?this.ws(e,Kp(r,null,"F")):this.Fs(e,h,r,u)}))})))}bs(e,r,n,s){return OS(r)||s.isEqual(Ot.min())?Be.resolve(null):this.ys.getDocuments(e,n).next(i=>{const o=this.vs(r,i);return this.Cs(r,o,n,s)?Be.resolve(null):(qu()<=Kt.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gu(r)),this.Fs(e,o,r,h9(s,Ef)).next(l=>l))})}vs(e,r){let n=new En(sC(e));return r.forEach((s,i)=>{zg(e,i)&&(n=n.add(i))}),n}Cs(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,r,n){return qu()<=Kt.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",Gu(r)),this.ys.getDocumentsMatchingQuery(e,r,Nl.min(),n)}Fs(e,r,n,s){return this.ys.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="LocalStore",H7=3e8;class W7{constructor(e,r,n,s){this.persistence=e,this.Ms=r,this.serializer=s,this.xs=new qr($t),this.Os=new Qc(i=>$w(i),Hw),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R7(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.xs))}}function q7(t,e,r,n){return new W7(t,e,r,n)}async function TC(t,e){const r=Mt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.Ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const o=[],l=[];let u=Xt();for(const h of s){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return r.localDocuments.getDocuments(n,u).next(h=>({ks:h,removedBatchIds:o,addedBatchIds:l}))})})}function G7(t,e){const r=Mt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.Bs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const p=h.batch,g=p.keys();let y=Be.resolve();return g.forEach(w=>{y=y.next(()=>f.getEntry(u,w)).next(b=>{const _=h.docVersions.get(w);hr(_!==null,48541),b.version.compareTo(_)<0&&(p.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),f.addEntry(b)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=Xt();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function jC(t){const e=Mt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ti.getLastRemoteSnapshotVersion(r))}function K7(t,e){const r=Mt(t),n=e.snapshotVersion;let s=r.xs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=r.Bs.newChangeBuffer({trackRemovals:!0});s=r.xs;const l=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;l.push(r.Ti.removeMatchingKeys(i,f.removedDocuments,p).next(()=>r.Ti.addMatchingKeys(i,f.addedDocuments,p)));let y=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Mn.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,n)),s=s.insert(p,y),function(b,_,P){return b.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=H7?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,y,f)&&l.push(r.Ti.updateTargetData(i,y))});let u=yo(),h=Xt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(X7(i,o,e.documentUpdates).next(f=>{u=f.qs,h=f.Qs})),!n.isEqual(Ot.min())){const f=r.Ti.getLastRemoteSnapshotVersion(i).next(p=>r.Ti.setTargetsMetadata(i,i.currentSequenceNumber,n));l.push(f)}return Be.waitFor(l).next(()=>o.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(r.xs=s,i))}function X7(t,e,r){let n=Xt(),s=Xt();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let o=yo();return r.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Ot.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):ft(e2,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{qs:o,Qs:s}})}function Y7(t,e){const r=Mt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Uw),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Q7(t,e){const r=Mt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ti.getTargetData(n,e).next(i=>i?(s=i,Be.resolve(s)):r.Ti.allocateTargetId(n).next(o=>(s=new ml(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ti.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.xs.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.xs=r.xs.insert(n.targetId,n),r.Os.set(e,n.targetId)),n})}async function P1(t,e,r){const n=Mt(t),s=n.xs.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!$d(o))throw o;ft(e2,`Failed to update sequence numbers for target ${e}: ${o}`)}n.xs=n.xs.remove(e),n.Os.delete(s.target)}function YS(t,e,r){const n=Mt(t);let s=Ot.min(),i=Xt();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const p=Mt(u),g=p.Os.get(f);return g!==void 0?Be.resolve(p.xs.get(g)):p.Ti.getTargetData(h,f)}(n,o,Ai(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.Ti.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>n.Ms.getDocumentsMatchingQuery(o,e,r?s:Ot.min(),r?i:Xt())).next(l=>(J7(n,M9(e),l),{documents:l,$s:i})))}function J7(t,e,r){let n=t.Ns.get(e)||Ot.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.Ns.set(e,n)}class QS{constructor(){this.activeTargetIds=H9()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Z7{constructor(){this.xo=new QS,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,r,n){this.Oo[e]=r}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new QS,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="ConnectivityMonitor";class ZS{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ft(JS,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ft(JS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tp=null;function R1(){return tp===null?tp=function(){return 268435456+Math.round(2147483648*Math.random())}():tp++,"0x"+tp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="RestConnection",tV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rV{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=r+"://"+e.host,this.Wo=`projects/${n}/databases/${s}`,this.Go=this.databaseId.database===Wp?`project_id=${n}`:`project_id=${n}&database_id=${s}`}zo(e,r,n,s,i){const o=R1(),l=this.jo(e,r.toUriEncodedString());ft(wy,`Sending RPC '${e}' ${o}:`,l,n);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,s,i);const{host:h}=new URL(l),f=Vd(h);return this.Jo(e,l,u,n,f).then(p=>(ft(wy,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Fc(wy,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",n),p})}Yo(e,r,n,s,i,o){return this.zo(e,r,n,s,i)}Ho(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ud}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>e[i]=s),n&&n.headers.forEach((s,i)=>e[i]=s)}jo(e,r){const n=tV[e];return`${this.Ko}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="WebChannelConnection";class sV extends rV{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,s,i){const o=R1();return new Promise((l,u)=>{const h=new PA;h.setWithCredentials(!0),h.listenOnce(RA.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Sp.NO_ERROR:const p=h.getResponseJson();ft(ss,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Sp.TIMEOUT:ft(ss,`RPC '${e}' ${o} timed out`),u(new at(Oe.DEADLINE_EXCEEDED,"Request time out"));break;case Sp.HTTP_ERROR:const g=h.getStatus();if(ft(ss,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let y=h.getResponseJson();Array.isArray(y)&&(y=y[0]);const w=y==null?void 0:y.error;if(w&&w.status&&w.message){const b=function(P){const A=P.toLowerCase().replace(/_/g,"-");return Object.values(Oe).indexOf(A)>=0?A:Oe.UNKNOWN}(w.status);u(new at(b,w.message))}else u(new at(Oe.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new at(Oe.UNAVAILABLE,"Connection failed."));break;default:It(9055,{h_:e,streamId:o,P_:h.getLastErrorCode(),T_:h.getLastError()})}}finally{ft(ss,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);ft(ss,`RPC '${e}' ${o} sending request:`,s),h.send(r,"POST",f,n,15)})}I_(e,r,n){const s=R1(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=LA(),l=FA(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const f=i.join("");ft(ss,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=o.createWebChannel(f,u);this.E_(p);let g=!1,y=!1;const w=new nV({Zo:_=>{y?ft(ss,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(g||(ft(ss,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),ft(ss,`RPC '${e}' stream ${s} sending:`,_),p.send(_))},Xo:()=>p.close()}),b=(_,P,A)=>{_.listen(P,k=>{try{A(k)}catch(F){setTimeout(()=>{throw F},0)}})};return b(p,zh.EventType.OPEN,()=>{y||(ft(ss,`RPC '${e}' stream ${s} transport opened.`),w.__())}),b(p,zh.EventType.CLOSE,()=>{y||(y=!0,ft(ss,`RPC '${e}' stream ${s} transport closed`),w.u_(),this.d_(p))}),b(p,zh.EventType.ERROR,_=>{y||(y=!0,Fc(ss,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),w.u_(new at(Oe.UNAVAILABLE,"The operation could not be completed")))}),b(p,zh.EventType.MESSAGE,_=>{var P;if(!y){const A=_.data[0];hr(!!A,16349);const k=A,F=(k==null?void 0:k.error)||((P=k[0])===null||P===void 0?void 0:P.error);if(F){ft(ss,`RPC '${e}' stream ${s} received error:`,F);const L=F.status;let I=function(R){const B=mn[R];if(B!==void 0)return pC(B)}(L),N=F.message;I===void 0&&(I=Oe.INTERNAL,N="Unknown error status: "+L+" with message "+F.message),y=!0,w.u_(new at(I,N)),p.close()}else ft(ss,`RPC '${e}' stream ${s} received:`,A),w.c_(A)}}),b(l,DA.STAT_EVENT,_=>{_.stat===b1.PROXY?ft(ss,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===b1.NOPROXY&&ft(ss,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.a_()},0),w}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(r=>r===e)}}function by(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(t){return new l7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,r,n=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=r,this.A_=n,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const r=Math.floor(this.m_+this.w_()),n=Math.max(0,Date.now()-this.g_),s=Math.max(0,r-n);s>0&&ft("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="PersistentStream";class CC{constructor(e,r,n,s,i,o,l,u){this.xi=e,this.S_=n,this.D_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new AC(e,r)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,r){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():r&&r.code===Oe.RESOURCE_EXHAUSTED?(vo(r.toString()),vo("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):r&&r.code===Oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(r)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),r=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.v_===r&&this.z_(n,s)},n=>{e(()=>{const s=new at(Oe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.j_(s)})})}z_(e,r){const n=this.G_(this.v_);this.stream=this.H_(e,r),this.stream.e_(()=>{n(()=>this.listener.e_())}),this.stream.n_(()=>{n(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{n(()=>this.j_(s))}),this.stream.onMessage(s=>{n(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return ft(ek,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return r=>{this.xi.enqueueAndForget(()=>this.v_===e?r():(ft(ek,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aV extends CC{constructor(e,r,n,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}H_(e,r){return this.connection.I_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const r=d7(this.serializer,e),n=function(i){if(!("targetChange"in i))return Ot.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ot.min():o.readTime?Ci(o.readTime):Ot.min()}(e);return this.listener.Y_(r,n)}Z_(e){const r={};r.database=I1(this.serializer),r.addTarget=function(i,o){let l;const u=o.target;if(l=k1(u)?{documents:m7(i,u)}:{query:p7(i,u).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=vC(i,o.resumeToken);const h=j1(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Ot.min())>0){l.readTime=Yp(i,o.snapshotVersion.toTimestamp());const h=j1(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const n=x7(this.serializer,e);n&&(r.labels=n),this.Q_(r)}X_(e){const r={};r.database=I1(this.serializer),r.removeTarget=e,this.Q_(r)}}class iV extends CC{constructor(e,r,n,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,r){return this.connection.I_("Write",e,r)}J_(e){return hr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,hr(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){hr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const r=f7(e.writeResults,e.commitTime),n=Ci(e.commitTime);return this.listener.ra(n,r)}ia(){const e={};e.database=I1(this.serializer),this.Q_(e)}ta(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>h7(this.serializer,n))};this.Q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{}class lV extends oV{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new at(Oe.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,r,n,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,A1(r,n),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new at(Oe.UNKNOWN,i.toString())})}Yo(e,r,n,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Yo(e,A1(r,n),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new at(Oe.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class cV{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(vo(r),this.ua=!1):ft("OnlineStateTracker",r)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc="RemoteStore";class uV{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{n.enqueueAndForget(async()=>{Jc(this)&&(ft(Lc,"Restarting streams for network reachability change."),await async function(u){const h=Mt(u);h.da.add(4),await d0(h),h.Va.set("Unknown"),h.da.delete(4),await Kg(h)}(this))})}),this.Va=new cV(n,s)}}async function Kg(t){if(Jc(t))for(const e of t.Aa)await e(!0)}async function d0(t){for(const e of t.Aa)await e(!1)}function IC(t,e){const r=Mt(t);r.Ea.has(e.targetId)||(r.Ea.set(e.targetId,e),s2(r)?n2(r):Hd(r).N_()&&r2(r,e))}function t2(t,e){const r=Mt(t),n=Hd(r);r.Ea.delete(e),n.N_()&&PC(r,e),r.Ea.size===0&&(n.N_()?n.k_():Jc(r)&&r.Va.set("Unknown"))}function r2(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ot.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Hd(t).Z_(e)}function PC(t,e){t.ma.Ke(e),Hd(t).X_(e)}function n2(t){t.ma=new s7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Hd(t).start(),t.Va.ca()}function s2(t){return Jc(t)&&!Hd(t).O_()&&t.Ea.size>0}function Jc(t){return Mt(t).da.size===0}function RC(t){t.ma=void 0}async function dV(t){t.Va.set("Online")}async function hV(t){t.Ea.forEach((e,r)=>{r2(t,e)})}async function fV(t,e){RC(t),s2(t)?(t.Va.Pa(e),n2(t)):t.Va.set("Unknown")}async function mV(t,e,r){if(t.Va.set("Online"),e instanceof xC&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ea.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ea.delete(l),s.ma.removeTarget(l))}(t,e)}catch(n){ft(Lc,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Jp(t,n)}else if(e instanceof Ap?t.ma.Xe(e):e instanceof gC?t.ma.ot(e):t.ma.nt(e),!r.isEqual(Ot.min()))try{const n=await jC(t.localStore);r.compareTo(n)>=0&&await function(i,o){const l=i.ma.It(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ea.get(h);f&&i.Ea.set(h,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const f=i.Ea.get(u);if(!f)return;i.Ea.set(u,f.withResumeToken(Mn.EMPTY_BYTE_STRING,f.snapshotVersion)),PC(i,u);const p=new ml(f.target,u,h,f.sequenceNumber);r2(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){ft(Lc,"Failed to raise snapshot:",n),await Jp(t,n)}}async function Jp(t,e,r){if(!$d(e))throw e;t.da.add(1),await d0(t),t.Va.set("Offline"),r||(r=()=>jC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ft(Lc,"Retrying IndexedDB access"),await r(),t.da.delete(1),await Kg(t)})}function DC(t,e){return e().catch(r=>Jp(t,r,e))}async function Xg(t){const e=Mt(t),r=Tl(e);let n=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Uw;for(;pV(e);)try{const s=await Y7(e.localStore,n);if(s===null){e.Ia.length===0&&r.k_();break}n=s.batchId,gV(e,s)}catch(s){await Jp(e,s)}FC(e)&&LC(e)}function pV(t){return Jc(t)&&t.Ia.length<10}function gV(t,e){t.Ia.push(e);const r=Tl(t);r.N_()&&r.ea&&r.ta(e.mutations)}function FC(t){return Jc(t)&&!Tl(t).O_()&&t.Ia.length>0}function LC(t){Tl(t).start()}async function xV(t){Tl(t).ia()}async function vV(t){const e=Tl(t);for(const r of t.Ia)e.ta(r.mutations)}async function yV(t,e,r){const n=t.Ia.shift(),s=Kw.from(n,e,r);await DC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Xg(t)}async function wV(t,e){e&&Tl(t).ea&&await async function(n,s){if(function(o){return r7(o)&&o!==Oe.ABORTED}(s.code)){const i=n.Ia.shift();Tl(n).L_(),await DC(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Xg(n)}}(t,e),FC(t)&&LC(t)}async function tk(t,e){const r=Mt(t);r.asyncQueue.verifyOperationInProgress(),ft(Lc,"RemoteStore received new credentials");const n=Jc(r);r.da.add(3),await d0(r),n&&r.Va.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.da.delete(3),await Kg(r)}async function bV(t,e){const r=Mt(t);e?(r.da.delete(2),await Kg(r)):e||(r.da.add(2),await d0(r),r.Va.set("Unknown"))}function Hd(t){return t.fa||(t.fa=function(r,n,s){const i=Mt(r);return i.oa(),new aV(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:dV.bind(null,t),n_:hV.bind(null,t),i_:fV.bind(null,t),Y_:mV.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),s2(t)?n2(t):t.Va.set("Unknown")):(await t.fa.stop(),RC(t))})),t.fa}function Tl(t){return t.ga||(t.ga=function(r,n,s){const i=Mt(r);return i.oa(),new iV(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:xV.bind(null,t),i_:wV.bind(null,t),na:vV.bind(null,t),ra:yV.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Xg(t)):(await t.ga.stop(),t.Ia.length>0&&(ft(Lc,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const o=Date.now()+n,l=new a2(e,r,o,s,i);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new at(Oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function i2(t,e){if(vo("AsyncQueue",`${e}: ${t}`),$d(t))return new at(Oe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{static emptySet(e){return new cd(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||bt.comparator(r.key,n.key):(r,n)=>bt.comparator(r.key,n.key),this.keyedMap=$h(),this.sortedSet=new qr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof cd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new cd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this.pa=new qr(bt.comparator)}track(e){const r=e.doc.key,n=this.pa.get(r);n?e.type!==0&&n.type===3?this.pa=this.pa.insert(r,e):e.type===3&&n.type!==1?this.pa=this.pa.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.pa=this.pa.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.pa=this.pa.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.pa=this.pa.remove(r):e.type===1&&n.type===2?this.pa=this.pa.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.pa=this.pa.insert(r,{type:2,doc:e.doc}):It(63341,{Vt:e,ya:n}):this.pa=this.pa.insert(r,e)}wa(){const e=[];return this.pa.inorderTraversal((r,n)=>{e.push(n)}),e}}class Ed{constructor(e,r,n,s,i,o,l,u,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,s,i){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Ed(e,r,cd.emptySet(r),o,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ug(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class NV{constructor(){this.queries=nk(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const s=Mt(r),i=s.queries;s.queries=nk(),i.forEach((o,l)=>{for(const u of l.Sa)u.onError(n)})})(this,new at(Oe.ABORTED,"Firestore shutting down"))}}function nk(){return new Qc(t=>nC(t),Ug)}async function o2(t,e){const r=Mt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.Da()&&e.va()&&(n=2):(i=new _V,n=e.va()?0:1);try{switch(n){case 0:i.ba=await r.onListen(s,!0);break;case 1:i.ba=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=i2(o,`Initialization of query '${Gu(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,i),i.Sa.push(e),e.Fa(r.onlineState),i.ba&&e.Ma(i.ba)&&c2(r)}async function l2(t,e){const r=Mt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.va()?0:1:!i.Da()&&e.va()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function EV(t,e){const r=Mt(t);let n=!1;for(const s of e){const i=s.query,o=r.queries.get(i);if(o){for(const l of o.Sa)l.Ma(s)&&(n=!0);o.ba=s}}n&&c2(r)}function SV(t,e,r){const n=Mt(t),s=n.queries.get(e);if(s)for(const i of s.Sa)i.onError(r);n.queries.delete(e)}function c2(t){t.Ca.forEach(e=>{e.next()})}var D1,sk;(sk=D1||(D1={})).xa="default",sk.Cache="cache";class u2{constructor(e,r,n){this.query=e,this.Oa=r,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=n||{}}Ma(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Ed(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Na?this.La(e)&&(this.Oa.next(e),r=!0):this.ka(e,this.onlineState)&&(this.qa(e),r=!0),this.Ba=e,r}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let r=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),r=!0),r}ka(e,r){if(!e.fromCache||!this.va())return!0;const n=r!=="Offline";return(!this.options.Qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}La(e){if(e.docChanges.length>0)return!0;const r=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}qa(e){e=Ed.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==D1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.key=e}}class MC{constructor(e){this.key=e}}class kV{constructor(e,r){this.query=e,this.Ha=r,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xt(),this.mutatedKeys=Xt(),this.Za=sC(e),this.Xa=new cd(this.Za)}get eu(){return this.Ha}tu(e,r){const n=r?r.nu:new rk,s=r?r.Xa:this.Xa;let i=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),y=zg(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let _=!1;g&&y?g.data.isEqual(y.data)?w!==b&&(n.track({type:3,doc:y}),_=!0):this.ru(g,y)||(n.track({type:2,doc:y}),_=!0,(u&&this.Za(y,u)>0||h&&this.Za(y,h)<0)&&(l=!0)):!g&&y?(n.track({type:0,doc:y}),_=!0):g&&!y&&(n.track({type:1,doc:g}),_=!0,(u||h)&&(l=!0)),_&&(y?(o=o.add(y),i=b?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),n.track({type:1,doc:f})}return{Xa:o,nu:n,Cs:l,mutatedKeys:i}}ru(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((f,p)=>function(y,w){const b=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It(20277,{Vt:_})}};return b(y)-b(w)}(f.type,p.type)||this.Za(f.doc,p.doc)),this.iu(n),s=s!=null&&s;const l=r&&!s?this.su():[],u=this.Ya.size===0&&this.current&&!s?1:0,h=u!==this.Ja;return this.Ja=u,o.length!==0||h?{snapshot:new Ed(this.query,e.Xa,i,o,e.mutatedKeys,u===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new rk,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(r=>this.Ha=this.Ha.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ha=this.Ha.delete(r)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Xt(),this.Xa.forEach(n=>{this._u(n.key)&&(this.Ya=this.Ya.add(n.key))});const r=[];return e.forEach(n=>{this.Ya.has(n)||r.push(new MC(n))}),this.Ya.forEach(n=>{e.has(n)||r.push(new OC(n))}),r}au(e){this.Ha=e.$s,this.Ya=Xt();const r=this.tu(e.documents);return this.applyChanges(r,!0)}uu(){return Ed.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const d2="SyncEngine";class TV{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class jV{constructor(e){this.key=e,this.cu=!1}}class AV{constructor(e,r,n,s,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Qc(l=>nC(l),Ug),this.Pu=new Map,this.Tu=new Set,this.Iu=new qr(bt.comparator),this.Eu=new Map,this.du=new Qw,this.Au={},this.Ru=new Map,this.Vu=Nd.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function CV(t,e,r=!0){const n=HC(t);let s;const i=n.hu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await VC(n,e,r,!0),s}async function IV(t,e){const r=HC(t);await VC(r,e,!0,!1)}async function VC(t,e,r,n){const s=await Q7(t.localStore,Ai(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,r);let l;return n&&(l=await PV(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&IC(t.remoteStore,s),l}async function PV(t,e,r,n,s){t.fu=(p,g,y)=>async function(b,_,P,A){let k=_.view.tu(P);k.Cs&&(k=await YS(b.localStore,_.query,!1).then(({documents:N})=>_.view.tu(N,k)));const F=A&&A.targetChanges.get(_.targetId),L=A&&A.targetMismatches.get(_.targetId)!=null,I=_.view.applyChanges(k,b.isPrimaryClient,F,L);return ik(b,_.targetId,I.ou),I.snapshot}(t,p,g,y);const i=await YS(t.localStore,e,!0),o=new kV(e,i.$s),l=o.tu(i.documents),u=u0.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);ik(t,r,h.ou);const f=new TV(e,r,o);return t.hu.set(e,f),t.Pu.has(r)?t.Pu.get(r).push(e):t.Pu.set(r,[e]),h.snapshot}async function RV(t,e,r){const n=Mt(t),s=n.hu.get(e),i=n.Pu.get(s.targetId);if(i.length>1)return n.Pu.set(s.targetId,i.filter(o=>!Ug(o,e))),void n.hu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await P1(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&t2(n.remoteStore,s.targetId),F1(n,s.targetId)}).catch(zd)):(F1(n,s.targetId),await P1(n.localStore,s.targetId,!0))}async function DV(t,e){const r=Mt(t),n=r.hu.get(e),s=r.Pu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),t2(r.remoteStore,n.targetId))}async function FV(t,e,r){const n=zV(t);try{const s=await function(o,l){const u=Mt(o),h=Jr.now(),f=l.reduce((y,w)=>y.add(w.key),Xt());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=yo(),b=Xt();return u.Bs.getEntries(y,f).next(_=>{w=_,w.forEach((P,A)=>{A.isValidDocument()||(b=b.add(P))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,w)).next(_=>{p=_;const P=[];for(const A of l){const k=Q9(A,p.get(A.key).overlayedDocument);k!=null&&P.push(new Ul(A.key,k,YA(k.value.mapValue),js.exists(!0)))}return u.mutationQueue.addMutationBatch(y,h,P,l)}).next(_=>{g=_;const P=_.applyToLocalDocumentSet(p,b);return u.documentOverlayCache.saveOverlays(y,_.batchId,P)})}).then(()=>({batchId:g.batchId,changes:iC(p)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.Au[o.currentUser.toKey()];h||(h=new qr($t)),h=h.insert(l,u),o.Au[o.currentUser.toKey()]=h}(n,s.batchId,r),await h0(n,s.changes),await Xg(n.remoteStore)}catch(s){const i=i2(s,"Failed to persist write");r.reject(i)}}async function BC(t,e){const r=Mt(t);try{const n=await K7(r.localStore,e);e.targetChanges.forEach((s,i)=>{const o=r.Eu.get(i);o&&(hr(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.cu=!0:s.modifiedDocuments.size>0?hr(o.cu,14607):s.removedDocuments.size>0&&(hr(o.cu,42227),o.cu=!1))}),await h0(r,n,e)}catch(n){await zd(n)}}function ak(t,e,r){const n=Mt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.hu.forEach((i,o)=>{const l=o.view.Fa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Mt(o);u.onlineState=l;let h=!1;u.queries.forEach((f,p)=>{for(const g of p.Sa)g.Fa(l)&&(h=!0)}),h&&c2(u)}(n.eventManager,e),s.length&&n.lu.Y_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function LV(t,e,r){const n=Mt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Eu.get(e),i=s&&s.key;if(i){let o=new qr(bt.comparator);o=o.insert(i,us.newNoDocument(i,Ot.min()));const l=Xt().add(i),u=new qg(Ot.min(),new Map,new qr($t),o,l);await BC(n,u),n.Iu=n.Iu.remove(i),n.Eu.delete(e),h2(n)}else await P1(n.localStore,e,!1).then(()=>F1(n,e,r)).catch(zd)}async function OV(t,e){const r=Mt(t),n=e.batch.batchId;try{const s=await G7(r.localStore,e);zC(r,n,null),UC(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await h0(r,s)}catch(s){await zd(s)}}async function MV(t,e,r){const n=Mt(t);try{const s=await function(o,l){const u=Mt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(hr(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(n.localStore,e);zC(n,e,r),UC(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await h0(n,s)}catch(s){await zd(s)}}function UC(t,e){(t.Ru.get(e)||[]).forEach(r=>{r.resolve()}),t.Ru.delete(e)}function zC(t,e,r){const n=Mt(t);let s=n.Au[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Au[n.currentUser.toKey()]=s}}function F1(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Pu.get(e))t.hu.delete(n),r&&t.lu.gu(n,r);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(n=>{t.du.containsKey(n)||$C(t,n)})}function $C(t,e){t.Tu.delete(e.path.canonicalString());const r=t.Iu.get(e);r!==null&&(t2(t.remoteStore,r),t.Iu=t.Iu.remove(e),t.Eu.delete(r),h2(t))}function ik(t,e,r){for(const n of r)n instanceof OC?(t.du.addReference(n.key,e),VV(t,n)):n instanceof MC?(ft(d2,"Document no longer in limbo: "+n.key),t.du.removeReference(n.key,e),t.du.containsKey(n.key)||$C(t,n.key)):It(19791,{pu:n})}function VV(t,e){const r=e.key,n=r.path.canonicalString();t.Iu.get(r)||t.Tu.has(n)||(ft(d2,"New document in limbo: "+r),t.Tu.add(n),h2(t))}function h2(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const r=new bt(Nr.fromString(e)),n=t.Vu.next();t.Eu.set(n,new jV(r)),t.Iu=t.Iu.insert(r,n),IC(t.remoteStore,new ml(Ai(Bg(r.path)),n,"TargetPurposeLimboResolution",Lg.le))}}async function h0(t,e,r){const n=Mt(t),s=[],i=[],o=[];n.hu.isEmpty()||(n.hu.forEach((l,u)=>{o.push(n.fu(u,e,r).then(h=>{var f;if((h||r)&&n.isPrimaryClient){const p=h?!h.fromCache:(f=r==null?void 0:r.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;n.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){s.push(h);const p=Zw.Rs(u.targetId,h);i.push(p)}}))}),await Promise.all(o),n.lu.Y_(s),await async function(u,h){const f=Mt(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Be.forEach(h,g=>Be.forEach(g.ds,y=>f.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>Be.forEach(g.As,y=>f.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!$d(p))throw p;ft(e2,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const y=f.xs.get(g),w=y.snapshotVersion,b=y.withLastLimboFreeSnapshotVersion(w);f.xs=f.xs.insert(g,b)}}}(n.localStore,i))}async function BV(t,e){const r=Mt(t);if(!r.currentUser.isEqual(e)){ft(d2,"User change. New user:",e.toKey());const n=await TC(r.localStore,e);r.currentUser=e,function(i,o){i.Ru.forEach(l=>{l.forEach(u=>{u.reject(new at(Oe.CANCELLED,o))})}),i.Ru.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await h0(r,n.ks)}}function UV(t,e){const r=Mt(t),n=r.Eu.get(e);if(n&&n.cu)return Xt().add(n.key);{let s=Xt();const i=r.Pu.get(e);if(!i)return s;for(const o of i){const l=r.hu.get(o);s=s.unionWith(l.view.eu)}return s}}function HC(t){const e=Mt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LV.bind(null,e),e.lu.Y_=EV.bind(null,e.eventManager),e.lu.gu=SV.bind(null,e.eventManager),e}function zV(t){const e=Mt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MV.bind(null,e),e}class Zp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gg(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,r){return null}Cu(e,r){return null}Du(e){return q7(this.persistence,new $7,e.initialUser,this.serializer)}Su(e){return new kC(Jw.fi,this.serializer)}bu(e){return new Z7}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zp.provider={build:()=>new Zp};class $V extends Zp{constructor(e){super(),this.cacheSizeBytes=e}vu(e,r){hr(this.persistence.referenceDelegate instanceof Qp,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new j7(n,e.asyncQueue,r)}Su(e){const r=this.cacheSizeBytes!==void 0?$s.withCacheSize(this.cacheSizeBytes):$s.DEFAULT;return new kC(n=>Qp.fi(n,r),this.serializer)}}class L1{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>ak(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=BV.bind(null,this.syncEngine),await bV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NV}()}createDatastore(e){const r=Gg(e.databaseInfo.databaseId),n=function(i){return new sV(i)}(e.databaseInfo);return function(i,o,l,u){return new lV(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,o,l){return new uV(n,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>ak(this.syncEngine,r,0),function(){return ZS.C()?new ZS:new eV}())}createSyncEngine(e,r){return function(s,i,o,l,u,h,f){const p=new AV(s,i,o,l,u,h);return f&&(p.mu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Mt(s);ft(Lc,"RemoteStore shutting down."),i.da.add(5),await d0(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}L1.provider={build:()=>new L1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):vo("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl="FirestoreClient";class HV{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=os.UNAUTHENTICATED,this.clientId=Bw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async o=>{ft(jl,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(ft(jl,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new io;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=i2(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function _y(t,e){t.asyncQueue.verifyOperationInProgress(),ft(jl,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await TC(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ok(t,e){t.asyncQueue.verifyOperationInProgress();const r=await WV(t);ft(jl,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>tk(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>tk(e.remoteStore,s)),t._onlineComponents=e}async function WV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ft(jl,"Using user provided OfflineComponentProvider");try{await _y(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Oe.FAILED_PRECONDITION||s.code===Oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Fc("Error using user provided cache. Falling back to memory cache: "+r),await _y(t,new Zp)}}else ft(jl,"Using default OfflineComponentProvider"),await _y(t,new $V(void 0));return t._offlineComponents}async function WC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ft(jl,"Using user provided OnlineComponentProvider"),await ok(t,t._uninitializedComponentsProvider._online)):(ft(jl,"Using default OnlineComponentProvider"),await ok(t,new L1))),t._onlineComponents}function qV(t){return WC(t).then(e=>e.syncEngine)}async function eg(t){const e=await WC(t),r=e.eventManager;return r.onListen=CV.bind(null,e.syncEngine),r.onUnlisten=RV.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=IV.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=DV.bind(null,e.syncEngine),r}function GV(t,e,r={}){const n=new io;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const f=new f2({next:g=>{f.xu(),o.enqueueAndForget(()=>l2(i,p));const y=g.docs.has(l);!y&&g.fromCache?h.reject(new at(Oe.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?h.reject(new at(Oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new u2(Bg(l.path),f,{includeMetadataChanges:!0,Qa:!0});return o2(i,p)}(await eg(t),t.asyncQueue,e,r,n)),n.promise}function KV(t,e,r={}){const n=new io;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const f=new f2({next:g=>{f.xu(),o.enqueueAndForget(()=>l2(i,p)),g.fromCache&&u.source==="server"?h.reject(new at(Oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new u2(l,f,{includeMetadataChanges:!0,Qa:!0});return o2(i,p)}(await eg(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t,e,r){if(!r)throw new at(Oe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KC(t,e,r,n){if(e===!0&&n===!0)throw new at(Oe.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function ck(t){if(!bt.isDocumentKey(t))throw new at(Oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uk(t){if(bt.isDocumentKey(t))throw new at(Oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Yg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":It(12329,{type:typeof t})}function ps(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new at(Oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Yg(t);throw new at(Oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function XV(t,e){if(e<=0)throw new at(Oe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="firestore.googleapis.com",dk=!0;class hk{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new at(Oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XC,this.ssl=dk}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:dk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=SC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<k7)throw new at(Oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qC((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new at(Oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new at(Oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new at(Oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qg{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hk({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new at(Oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new at(Oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hk(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new VA;switch(n.type){case"firstParty":return new o9(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new at(Oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=lk.get(r);n&&(ft("ComponentProvider","Removing Datastore"),lk.delete(r),n.terminate())}(this),Promise.resolve()}}function YC(t,e,r,n={}){var s;t=ps(t,Qg);const i=Vd(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${r}`;i&&(zj(`https://${u}`),$j("Firestore",!0)),o.host!==XC&&o.host!==u&&Fc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:u,ssl:i,emulatorOptions:n});if(!po(h,l)&&(t._setSettings(h),n.mockUserToken)){let f,p;if(typeof n.mockUserToken=="string")f=n.mockUserToken,p=os.MOCK_USER;else{f=f8(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=n.mockUserToken.sub||n.mockUserToken.user_id;if(!g)throw new at(Oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new os(g)}t._authCredentials=new s9(new MA(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ci(this.firestore,e,this._query)}}class Yn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yn(this.firestore,e,this._key)}}class oo extends ci{constructor(e,r,n){super(e,r,Bg(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yn(this.firestore,null,new bt(e))}withConverter(e){return new oo(this.firestore,e,this._path)}}function Ft(t,e,...r){if(t=Dr(t),GC("collection","path",e),t instanceof Qg){const n=Nr.fromString(e,...r);return uk(n),new oo(t,null,n)}{if(!(t instanceof Yn||t instanceof oo))throw new at(Oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Nr.fromString(e,...r));return uk(n),new oo(t.firestore,null,n)}}function wt(t,e,...r){if(t=Dr(t),arguments.length===1&&(e=Bw.newId()),GC("doc","path",e),t instanceof Qg){const n=Nr.fromString(e,...r);return ck(n),new Yn(t,null,new bt(n))}{if(!(t instanceof Yn||t instanceof oo))throw new at(Oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Nr.fromString(e,...r));return ck(n),new Yn(t.firestore,t instanceof oo?t.converter:null,new bt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="AsyncQueue";class mk{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new AC(this,"async_queue_retry"),this.rc=()=>{const n=by();n&&ft(fk,"Visibility state changed to "+n.visibilityState),this.x_.b_()},this.sc=e;const r=by();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const r=by();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const r=new io;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!$d(e))throw e;ft(fk,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const r=this.sc.then(()=>(this.ec=!0,e().catch(n=>{throw this.Xu=n,this.ec=!1,vo("INTERNAL UNHANDLED ERROR: ",pk(n)),n}).then(n=>(this.ec=!1,n))));return this.sc=r,r}enqueueAfterDelay(e,r,n){this.oc(),this.nc.indexOf(e)>-1&&(r=0);const s=a2.createAndSchedule(this,e,r,n,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&It(47125,{cc:pk(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const r of this.Zu)if(r.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Zu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const r=this.Zu.indexOf(e);this.Zu.splice(r,1)}}function pk(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class oi extends Qg{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new mk,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mk(e),this._firestoreClient=void 0,await e}}}function QC(t,e){const r=typeof t=="object"?t:Gj(),n=typeof t=="string"?t:Wp,s=Aw(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=d8("firestore");i&&YC(s,...i)}return s}function Wd(t){if(t._terminated)throw new at(Oe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||YV(t),t._firestoreClient}function YV(t){var e,r,n;const s=t._freezeSettings(),i=function(l,u,h,f){return new _9(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,qC(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new HV(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oc(Mn.fromBase64String(e))}catch(r){throw new at(Oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Oc(Mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new at(Oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new at(Oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new at(Oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=/^__.*__$/;class JV{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Ul(e,this.data,this.fieldMask,r,this.fieldTransforms):new c0(e,this.data,r,this.fieldTransforms)}}class JC{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Ul(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function ZC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It(40011,{Ic:t})}}class ex{constructor(e,r,n,s,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new ex(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.dc({path:n,Rc:!1});return s.Vc(e),s}mc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.dc({path:n,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return tg(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(ZC(this.Ic)&&QV.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class ZV{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Gg(e)}bc(e,r,n,s=!1){return new ex({Ic:e,methodName:r,wc:n,path:Dn.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gd(t){const e=t._freezeSettings(),r=Gg(t._databaseId);return new ZV(t._databaseId,!!e.ignoreUndefinedProperties,r)}function m2(t,e,r,n,s,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,r,s);v2("Data must be an object, but it was:",o,n);const l=s3(n,o);let u,h;if(i.merge)u=new ca(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=O1(e,p,r);if(!o.contains(g))throw new at(Oe.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);i3(f,g)||f.push(g)}u=new ca(f),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new JV(new Hs(l),u,h)}class tx extends Zc{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tx}}function e3(t,e,r){return new ex({Ic:3,wc:e.settings.wc,methodName:t._methodName,Rc:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class p2 extends Zc{_toFieldTransform(e){return new Gw(e.path,new jf)}isEqual(e){return e instanceof p2}}class g2 extends Zc{constructor(e,r){super(e),this.Sc=r}_toFieldTransform(e){const r=e3(this,e,!0),n=this.Sc.map(i=>eu(i,r)),s=new bd(n);return new Gw(e.path,s)}isEqual(e){return e instanceof g2&&po(this.Sc,e.Sc)}}class x2 extends Zc{constructor(e,r){super(e),this.Sc=r}_toFieldTransform(e){const r=e3(this,e,!0),n=this.Sc.map(i=>eu(i,r)),s=new _d(n);return new Gw(e.path,s)}isEqual(e){return e instanceof x2&&po(this.Sc,e.Sc)}}function t3(t,e,r,n){const s=t.bc(1,e,r);v2("Data must be an object, but it was:",s,n);const i=[],o=Hs.empty();Bl(n,(u,h)=>{const f=y2(e,u,r);h=Dr(h);const p=s.mc(f);if(h instanceof tx)i.push(f);else{const g=eu(h,p);g!=null&&(i.push(f),o.set(f,g))}});const l=new ca(i);return new JC(o,l,s.fieldTransforms)}function r3(t,e,r,n,s,i){const o=t.bc(1,e,r),l=[O1(e,n,r)],u=[s];if(i.length%2!=0)throw new at(Oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(O1(e,i[g])),u.push(i[g+1]);const h=[],f=Hs.empty();for(let g=l.length-1;g>=0;--g)if(!i3(h,l[g])){const y=l[g];let w=u[g];w=Dr(w);const b=o.mc(y);if(w instanceof tx)h.push(y);else{const _=eu(w,b);_!=null&&(h.push(y),f.set(y,_))}}const p=new ca(h);return new JC(f,p,o.fieldTransforms)}function n3(t,e,r,n=!1){return eu(r,t.bc(n?4:3,e))}function eu(t,e){if(a3(t=Dr(t)))return v2("Unsupported field value:",e,t),s3(t,e);if(t instanceof Zc)return function(n,s){if(!ZC(s.Ic))throw s.gc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(n,s){const i=[];let o=0;for(const l of n){let u=eu(l,s.fc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=Dr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return W9(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Jr.fromDate(n);return{timestampValue:Yp(s.serializer,i)}}if(n instanceof Jr){const i=new Jr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Yp(s.serializer,i)}}if(n instanceof Jg)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Oc)return{bytesValue:vC(s.serializer,n._byteString)};if(n instanceof Yn){const i=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw s.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Yw(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Zg)return function(o,l){return{mapValue:{fields:{[KA]:{stringValue:XA},[qp]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.gc("VectorValues must only contain numeric values.");return qw(l.serializer,h)})}}}}}}(n,s);throw s.gc(`Unsupported field value: ${Yg(n)}`)}(t,e)}function s3(t,e){const r={};return zA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bl(t,(n,s)=>{const i=eu(s,e.Ac(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function a3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Jr||t instanceof Jg||t instanceof Oc||t instanceof Yn||t instanceof Zc||t instanceof Zg)}function v2(t,e,r){if(!a3(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=Yg(r);throw n==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+n)}}function O1(t,e,r){if((e=Dr(e))instanceof qd)return e._internalPath;if(typeof e=="string")return y2(t,e);throw tg("Field path arguments must be of type string or ",t,!1,void 0,r)}const eB=new RegExp("[~\\*/\\[\\]]");function y2(t,e,r){if(e.search(eB)>=0)throw tg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new qd(...e.split("."))._internalPath}catch{throw tg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function tg(t,e,r,n,s){const i=n&&!n.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${n}`),o&&(u+=` in document ${s}`),u+=")"),new at(Oe.INVALID_ARGUMENT,l+t+u)}function i3(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(rx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class tB extends w2{data(){return super.data()}}function rx(t,e){return typeof e=="string"?y2(t,e):e instanceof qd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new at(Oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class b2{}class f0 extends b2{}function nr(t,e,...r){let n=[];e instanceof b2&&n.push(e),n=n.concat(r),function(i){const o=i.filter(u=>u instanceof nx).length,l=i.filter(u=>u instanceof m0).length;if(o>1||o>0&&l>0)throw new at(Oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class m0 extends f0{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new m0(e,r,n)}_apply(e){const r=this._parse(e);return l3(e._query,r),new ci(e.firestore,e.converter,T1(e._query,r))}_parse(e){const r=Gd(e.firestore);return function(i,o,l,u,h,f,p){let g;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new at(Oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){vk(p,f);const w=[];for(const b of p)w.push(xk(u,i,b));g={arrayValue:{values:w}}}else g=xk(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||vk(p,f),g=n3(l,o,p,f==="in"||f==="not-in");return xn.create(h,f,g)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function yr(t,e,r){const n=e,s=rx("where",t);return m0._create(s,n,r)}class nx extends b2{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new nx(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:ii.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)l3(o,u),o=T1(o,u)}(e._query,r),new ci(e.firestore,e.converter,T1(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sx extends f0{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new sx(e,r)}_apply(e){const r=function(s,i,o){if(s.startAt!==null)throw new at(Oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new at(Oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tf(i,o)}(e._query,this._field,this._direction);return new ci(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Yc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function ua(t,e="asc"){const r=e,n=rx("orderBy",t);return sx._create(n,r)}class ax extends f0{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new ax(e,r,n)}_apply(e){return new ci(e.firestore,e.converter,Kp(e._query,this._limit,this._limitType))}}function no(t){return XV("limit",t),ax._create("limit",t,"F")}class ix extends f0{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new ix(e,r,n)}_apply(e){const r=rB(e,this.type,this._docOrFields,this._inclusive);return new ci(e.firestore,e.converter,function(s,i){return new Yc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,r))}}function M1(...t){return ix._create("startAfter",t,!1)}function rB(t,e,r,n){if(r[0]=Dr(r[0]),r[0]instanceof w2)return function(i,o,l,u,h){if(!u)throw new at(Oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const f=[];for(const p of ld(i))if(p.field.isKeyField())f.push(Gp(o,u.key));else{const g=u.data.field(p.field);if(Mg(g))throw new at(Oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const y=p.field.canonicalString();throw new at(Oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(g)}return new wd(f,h)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=Gd(t.firestore);return function(o,l,u,h,f,p){const g=o.explicitOrderBy;if(f.length>g.length)throw new at(Oe.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let w=0;w<f.length;w++){const b=f[w];if(g[w].field.isKeyField()){if(typeof b!="string")throw new at(Oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof b}`);if(!Ww(o)&&b.indexOf("/")!==-1)throw new at(Oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${b}' contains a slash.`);const _=o.path.child(Nr.fromString(b));if(!bt.isDocumentKey(_))throw new at(Oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const P=new bt(_);y.push(Gp(l,P))}else{const _=n3(u,h,b);y.push(_)}}return new wd(y,p)}(t._query,t.firestore._databaseId,s,e,r,n)}}function xk(t,e,r){if(typeof(r=Dr(r))=="string"){if(r==="")throw new at(Oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ww(e)&&r.indexOf("/")!==-1)throw new at(Oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Nr.fromString(r));if(!bt.isDocumentKey(n))throw new at(Oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Gp(t,new bt(n))}if(r instanceof Yn)return Gp(t,r._key);throw new at(Oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yg(r)}.`)}function vk(t,e){if(!Array.isArray(t)||t.length===0)throw new at(Oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function l3(t,e){const r=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new at(Oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new at(Oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class c3{convertValue(e,r="none"){switch(kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return an(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Sl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw It(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Bl(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r[qp].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(o=>an(o.doubleValue));return new Zg(i)}convertGeoPoint(e){return new Jg(an(e.latitude),an(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Vg(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Sf(e));default:return null}}convertTimestamp(e){const r=El(e);return new Jr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Nr.fromString(e);hr(EC(n),9688,{name:e});const s=new xd(n.get(1),n.get(3)),i=new bt(n.popFirst(5));return s.isEqual(r)||vo(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class N2 extends w2{constructor(e,r,n,s,i,o){super(e,r,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(rx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class nf extends N2{data(e={}){return super.data(e)}}class E2{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Ju(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new nf(this._firestore,this._userDataWriter,n.key,n,new Ju(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new at(Oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new nf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ju(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new nf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ju(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:nB(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function nB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t){t=ps(t,Yn);const e=ps(t.firestore,oi);return GV(Wd(e),t._key).then(r=>u3(e,t,r))}class S2 extends c3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,r)}}function zt(t){t=ps(t,ci);const e=ps(t.firestore,oi),r=Wd(e),n=new S2(e);return o3(t._query),KV(r,t._query).then(s=>new E2(e,n,t,s))}function _n(t,e,r){t=ps(t,Yn);const n=ps(t.firestore,oi),s=_2(t.converter,e,r);return Xd(n,[m2(Gd(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,js.none())])}function On(t,e,r,...n){t=ps(t,Yn);const s=ps(t.firestore,oi),i=Gd(s);let o;return o=typeof(e=Dr(e))=="string"||e instanceof qd?r3(i,"updateDoc",t._key,e,r,n):t3(i,"updateDoc",t._key,e),Xd(s,[o.toMutation(t._key,js.exists(!0))])}function ox(t){return Xd(ps(t.firestore,oi),[new Wg(t._key,js.none())])}function p0(t,e){const r=ps(t.firestore,oi),n=wt(t),s=_2(t.converter,e);return Xd(r,[m2(Gd(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,js.exists(!1))]).then(()=>n)}function Kd(t,...e){var r,n,s;t=Dr(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||gk(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(gk(e[o])){const p=e[o];e[o]=(r=p.next)===null||r===void 0?void 0:r.bind(p),e[o+1]=(n=p.error)===null||n===void 0?void 0:n.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let u,h,f;if(t instanceof Yn)h=ps(t.firestore,oi),f=Bg(t._key.path),u={next:p=>{e[o]&&e[o](u3(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=ps(t,ci);h=ps(p.firestore,oi),f=p._query;const g=new S2(h);u={next:y=>{e[o]&&e[o](new E2(h,g,p,y))},error:e[o+1],complete:e[o+2]},o3(t._query)}return function(g,y,w,b){const _=new f2(b),P=new u2(y,_,w);return g.asyncQueue.enqueueAndForget(async()=>o2(await eg(g),P)),()=>{_.xu(),g.asyncQueue.enqueueAndForget(async()=>l2(await eg(g),P))}}(Wd(h),f,l,u)}function Xd(t,e){return function(n,s){const i=new io;return n.asyncQueue.enqueueAndForget(async()=>FV(await qV(n),s,i)),i.promise}(Wd(t),e)}function u3(t,e,r){const n=r.docs.get(e._key),s=new S2(t);return new N2(t,s,e._key,n,new Ju(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Gd(e)}set(e,r,n){this._verifyNotCommitted();const s=Ny(e,this._firestore),i=_2(s.converter,r,n),o=m2(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(o.toMutation(s._key,js.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=Ny(e,this._firestore);let o;return o=typeof(r=Dr(r))=="string"||r instanceof qd?r3(this._dataReader,"WriteBatch.update",i._key,r,n,s):t3(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(o.toMutation(i._key,js.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Ny(e,this._firestore);return this._mutations=this._mutations.concat(new Wg(r._key,js.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new at(Oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ny(t,e){if((t=Dr(t)).firestore!==e)throw new at(Oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Lt(){return new p2("serverTimestamp")}function h3(...t){return new g2("arrayUnion",t)}function f3(...t){return new x2("arrayRemove",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t){return Wd(t=ps(t,oi)),new d3(t,e=>Xd(t,e))}(function(e,r=!0){(function(s){Ud=s})(Bd),pd(new Cc("firestore",(n,{instanceIdentifier:s,options:i})=>{const o=n.getProvider("app").getImmediate(),l=new oi(new a9(n.getProvider("auth-internal")),new l9(o,n.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new at(Oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xd(h.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:r},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),wl(wS,bS,e),wl(wS,bS,"esm2017")})();const Af=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:c3,Bytes:Oc,CollectionReference:oo,DocumentReference:Yn,DocumentSnapshot:N2,FieldPath:qd,FieldValue:Zc,Firestore:oi,FirestoreError:at,GeoPoint:Jg,Query:ci,QueryCompositeFilterConstraint:nx,QueryConstraint:f0,QueryDocumentSnapshot:nf,QueryFieldFilterConstraint:m0,QueryLimitConstraint:ax,QueryOrderByConstraint:sx,QuerySnapshot:E2,QueryStartAtConstraint:ix,SnapshotMetadata:Ju,Timestamp:Jr,VectorValue:Zg,WriteBatch:d3,_AutoId:Bw,_ByteString:Mn,_DatabaseId:xd,_DocumentKey:bt,_EmptyAuthCredentialsProvider:VA,_FieldPath:Dn,_cast:ps,_logWarn:Fc,_validateIsNotUsedTogether:KC,addDoc:p0,arrayRemove:f3,arrayUnion:h3,collection:Ft,connectFirestoreEmulator:YC,deleteDoc:ox,doc:wt,ensureFirestoreConfigured:Wd,executeWrite:Xd,getDoc:dr,getDocs:zt,getFirestore:QC,limit:no,onSnapshot:Kd,orderBy:ua,query:nr,serverTimestamp:Lt,setDoc:_n,startAfter:M1,updateDoc:On,where:yr,writeBatch:g0},Symbol.toStringTag,{value:"Module"})),sB="modulepreload",aB=function(t){return"/Israel-cyber-academy/"+t},yk={},fs=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let o=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=o(r.map(h=>{if(h=aB(h),h in yk)return;yk[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":sB,f||(g.as="script"),g.crossOrigin="",g.href=h,u&&g.setAttribute("nonce",u),document.head.appendChild(g),f)return new Promise((y,w)=>{g.addEventListener("load",y),g.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var iB="firebase",oB="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wl(iB,oB,"app");const lB=()=>({apiKey:"AIzaSyC35sH38k9co_R0zBsbDT0S6RE1Cp-ksHE",authDomain:"israel-cyber-academy.firebaseapp.com",projectId:"israel-cyber-academy",storageBucket:"israel-cyber-academy.appspot.com",messagingSenderId:"750693821908",appId:"1:750693821908:web:6518d1facad1d8095cfa41"}),V1=lB(),Cp=typeof import.meta<"u"&&!1,m3=!1;console.log(" Firebase Config Status:",{projectId:V1.projectId,authDomain:V1.authDomain,mode:"PRODUCTION",usingEnvVars:m3,secure:Cp});console.warn(" SECURITY WARNING: Using hardcoded Firebase config in production!"),console.warn(" For better security, set environment variables:"),console.warn("   VITE_FIREBASE_API_KEY, VITE_FIREBASE_AUTH_DOMAIN, etc."),console.warn(" Your app will continue working, but consider upgrading security.");let B1;try{B1=qj(V1),console.log(" Firebase app initialized successfully")}catch(t){throw console.error(" Firebase app initialization failed:",t),t}let Za,ze;try{Za=r9(B1),ze=QC(B1),console.log(" Firebase services initialized:",{auth:!!Za,firestore:!!ze,mode:Cp?"DEVELOPMENT":"PRODUCTION",secure:m3||Cp})}catch(t){throw console.error(" Firebase services initialization failed:",t),t}const Cf=Object.freeze(Object.defineProperty({__proto__:null,get auth(){return Za},get db(){return ze}},Symbol.toStringTag,{value:"Module"})),Kr={STUDENT:"student",TEACHER:"teacher",ADMIN:"admin"},wk={[Kr.STUDENT]:1,[Kr.TEACHER]:2,[Kr.ADMIN]:3},cB={student_lesson_access:{roles:[Kr.STUDENT,Kr.TEACHER,Kr.ADMIN],description:"Access to lesson content"},student_profile_update:{roles:[Kr.STUDENT,Kr.ADMIN],description:"Update student profile"},teacher_dashboard_access:{roles:[Kr.TEACHER,Kr.ADMIN],description:"Access to teacher dashboard"},teacher_notes_access:{roles:[Kr.TEACHER,Kr.ADMIN],description:"Access to teacher notes"},class_management:{roles:[Kr.TEACHER,Kr.ADMIN],description:"Create and manage classes"},student_assignment:{roles:[Kr.TEACHER,Kr.ADMIN],description:"Assign students to classes"},analytics_access:{roles:[Kr.TEACHER,Kr.ADMIN],description:"Access to student analytics"},user_management:{roles:[Kr.ADMIN],description:"Manage all users"},system_configuration:{roles:[Kr.ADMIN],description:"Configure system settings"},security_logs_access:{roles:[Kr.ADMIN],description:"Access to security logs"}},uB=(t,e)=>{if(!t||!t.role)return!1;const r=wk[t.role],n=wk[e];return r>=n},lx=t=>uB(t,Kr.TEACHER),k2=(t,e)=>{if(!t)return{success:!1,message:"User not authenticated",code:"AUTH_REQUIRED"};if(!t.role)return{success:!1,message:"User role not defined",code:"ROLE_MISSING"};if(!lx(t))return{success:!1,message:"Teacher access required",code:"INSUFFICIENT_PERMISSIONS"};const r=cB[e];return r&&!r.roles.includes(t.role)?{success:!1,message:`Operation '${e}' not allowed for role '${t.role}'`,code:"OPERATION_NOT_ALLOWED"}:{success:!0,message:"Access granted",code:"ACCESS_GRANTED"}},Wr=async(t,e={},r={})=>{try{const n={type:t,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,...e,...r};try{await p0(Ft(ze,"security_logs"),n)}catch(s){console.error("Failed to log security event to Firebase:",s)}window.gtag&&window.gtag("event","security_event",{event_category:"security",event_label:t,value:1})}catch(n){console.error("Error logging security event:",n)}},p3=async(t,e)=>{try{const r=Ft(ze,"classes"),n=wt(r),s={id:n.id,name:t.name,description:t.description,teacherId:e,studentIds:[],maxStudents:t.maxStudents||30,isActive:!0,createdAt:Lt(),updatedAt:Lt()};if(t.initialLesson){const l=new Date().toISOString();s.currentLesson=parseInt(t.initialLesson),s.lessonStartDate=l,s.unlockedLessons=[{lessonId:parseInt(t.initialLesson),unlockedAt:l,unlockedBy:e,unlockedByTeacher:"System (Class Creation)"}]}await _n(n,s);const i=wt(ze,"users",e),o=await dr(i);if(o.exists()){const u=[...o.data().teacherClasses||[],n.id];await On(i,{teacherClasses:u,updatedAt:Lt()})}return await wo(e,{type:"class_created",title:"  ",description:` "${t.name}"  `,metadata:{classId:n.id,className:t.name,maxStudents:t.maxStudents||30}}),s}catch(r){throw r}},tu=async t=>{try{const e=Ft(ze,"classes"),r=nr(e,yr("teacherId","==",t)),n=await zt(r),s=[];return n.forEach(i=>{var l,u;const o=i.data();s.push({id:i.id,...o,createdAt:(l=o.createdAt)==null?void 0:l.toDate(),updatedAt:(u=o.updatedAt)==null?void 0:u.toDate()})}),s.sort((i,o)=>{const l=i.createdAt||new Date(0);return(o.createdAt||new Date(0))-l}),s}catch(e){throw e}},g3=async(t,e,r)=>{try{const n=wt(ze,"classes",t),s=await dr(n);if(!s.exists())throw new Error("Class not found");const i=s.data();await On(n,{...e,updatedAt:Lt()});const o=[];return e.name&&e.name!==i.name&&o.push(` : "${i.name}"  "${e.name}"`),e.description&&e.description!==i.description&&o.push("  "),e.maxStudents&&e.maxStudents!==i.maxStudents&&o.push(`   : ${i.maxStudents}  ${e.maxStudents}`),o.length>0&&await wo(r,{type:"class_edited",title:" ",description:` "${e.name||i.name}" : ${o.join(", ")}`,metadata:{classId:t,className:e.name||i.name,changes:o,originalData:i,updatedData:e}}),!0}catch(n){throw n}},x3=async(t,e)=>{var r,n;try{const s=g0(ze),i=wt(ze,"classes",t),o=await dr(i);if(!o.exists())throw new Error("Class not found");const l=o.data();if(l.studentIds&&l.studentIds.length>0)for(const f of l.studentIds){const p=wt(ze,"users",f);s.update(p,{classId:null,teacherId:null,updatedAt:Lt()})}const u=wt(ze,"users",e),h=await dr(u);if(h.exists()){const p=(h.data().teacherClasses||[]).filter(g=>g!==t);s.update(u,{teacherClasses:p,updatedAt:Lt()})}return s.delete(i),await s.commit(),await wo(e,{type:"class_deleted",title:" ",description:` "${l.name}" . ${((r=l.studentIds)==null?void 0:r.length)||0}   .`,metadata:{classId:t,className:l.name,studentsRemoved:((n=l.studentIds)==null?void 0:n.length)||0}}),!0}catch(s){throw s}},T2=async t=>{try{const e=Ft(ze,"users"),r=nr(e,yr("classId","==",t)),n=await zt(r),s=[];return n.forEach(i=>{var l,u,h,f,p,g;const o=i.data();s.push({uid:i.id,displayName:o.displayName||o.email,email:o.email,role:o.role,classId:o.classId,progress:o.progress||0,completedLessons:o.completedLessons||[],totalTimeSpent:o.totalTimeSpent||0,lastActivityAt:((h=(u=(l=o.lastActivityAt)==null?void 0:l.toDate)==null?void 0:u.call(l))==null?void 0:h.toISOString())||null,createdAt:((g=(p=(f=o.createdAt)==null?void 0:f.toDate)==null?void 0:p.call(f))==null?void 0:g.toISOString())||new Date().toISOString()})}),s.sort((i,o)=>{const l=(i.displayName||"").toLowerCase(),u=(o.displayName||"").toLowerCase();return l.localeCompare(u)}),s}catch(e){throw e}},x0=async t=>{try{const e=nr(Ft(ze,"classStudents"),yr("teacherId","==",t),yr("isActive","==",!0)),r=await zt(e),n=[...new Set(r.docs.map(i=>i.data().studentId))],s=[];for(const i of n){const o=wt(ze,"users",i),l=await dr(o);l.exists()&&s.push({uid:l.id,...l.data()})}return s}catch(e){throw e}},v3=async t=>{try{return!0}catch(e){throw e}},y3=async t=>{try{const e=await T2(t),r={totalStudents:e.length,activeStudents:0,averageProgress:0,lessonCompletion:{},averageTimeSpent:0,topPerformers:[],strugglingStudents:[]};let n=0,s=0,i=0;if(e.forEach(o=>{const l=o.progress||{},u=o.completedLessons||[],h=o.totalTimeSpent||0,f=o.lastActivityDate;f&&(new Date-new Date(f.toDate()))/864e5<=7&&i++;const p=u.length/9*100;n+=p,s+=h,u.forEach(g=>{r.lessonCompletion[g]=(r.lessonCompletion[g]||0)+1})}),e.length>0){r.activeStudents=i,r.averageProgress=n/e.length,r.averageTimeSpent=s/e.length;const o=e.sort((l,u)=>{const h=(l.completedLessons||[]).length;return(u.completedLessons||[]).length-h});r.topPerformers=o.slice(0,3),r.strugglingStudents=o.slice(-3).reverse()}return r}catch(e){throw e}},w3=async t=>{try{const e=await tu(t),r=await x0(t),n={totalClasses:e.length,totalStudents:r.length,activeClasses:0,averageClassSize:0,overallStudentProgress:0,lessonEngagement:{},timeSpentDistribution:{low:0,medium:0,high:0}};let s=0,i=0;for(const o of e){const l=await y3(o.id);l.activeStudents>0&&i++,s+=l.averageProgress,Object.entries(l.lessonCompletion).forEach(([u,h])=>{n.lessonEngagement[u]=(n.lessonEngagement[u]||0)+h})}return r.forEach(o=>{const l=o.totalTimeSpent||0;l<=30?n.timeSpentDistribution.low++:l<=120?n.timeSpentDistribution.medium++:n.timeSpentDistribution.high++}),e.length>0&&(n.activeClasses=i,n.averageClassSize=r.length/e.length,n.overallStudentProgress=s/e.length),n}catch(e){throw e}},b3=async()=>{try{const t=Ft(ze,"users"),e=nr(t,yr("role","==","student")),r=await zt(e),n=[];return r.forEach(s=>{const i=s.data();n.push({id:s.id,...i,assignedToClass:!!i.classId,assignedToTeacher:!!i.teacherId})}),n.sort((s,i)=>{const o=s.displayName||s.email||"",l=i.displayName||i.email||"";return o.localeCompare(l)}),n}catch(t){throw t}},_3=async(t,e,r)=>{try{const n=g0(ze),s=wt(ze,"classes",t),i=await dr(s);if(!i.exists())throw new Error("Class not found");const o=i.data();n.update(s,{studentIds:e,updatedAt:Lt()});for(const h of e){const f=wt(ze,"users",h);n.update(f,{classId:t,teacherId:r,updatedAt:Lt()})}const l=o.studentIds||[],u=l.filter(h=>!e.includes(h));for(const h of u){const f=wt(ze,"users",h);n.update(f,{classId:null,teacherId:null,updatedAt:Lt()})}if(await n.commit(),e.length>l.length){const h=e.filter(f=>!l.includes(f));h.length>0&&await wo(r,{type:"student_added",title:"  ",description:`${h.length}    "${o.name}"`,metadata:{classId:t,className:o.name,studentsAdded:h.length,studentIds:h}})}return u.length>0&&await wo(r,{type:"student_removed",title:"  ",description:`${u.length}    "${o.name}"`,metadata:{classId:t,className:o.name,studentsRemoved:u.length,studentIds:u}}),!0}catch(n){throw n}},wo=async(t,e)=>{try{const r=Ft(ze,"teacherActivities"),n={teacherId:t,type:e.type,title:e.title,description:e.description,metadata:e.metadata||{},timestamp:Lt(),read:!1};await p0(r,n)}catch{}},j2=async(t,e=10)=>{try{const r=Ft(ze,"teacherActivities"),n=nr(r,yr("teacherId","==",t)),s=await zt(n),i=[];return s.forEach(o=>{var u;const l=o.data();i.push({id:o.id,...l,timestamp:((u=l.timestamp)==null?void 0:u.toDate())||new Date})}),i.sort((o,l)=>l.timestamp-o.timestamp),i.slice(0,e)}catch{return[]}},N3=async(t,e,r)=>{try{const n=String(e),s=Ft(ze,"teacherNotes"),i=nr(s,yr("teacherId","==",t),yr("lessonId","==",n),yr("slideId","==",r)),o=await zt(i);if(o.empty)return null;const l=o.docs[0];return{id:l.id,...l.data()}}catch(n){throw n}},E3=async(t,e,r,n)=>{try{const s=Ft(ze,"teacherNotes"),i=await N3(t,e,r);if(i){const o=wt(ze,"teacherNotes",i.id);return await On(o,{content:n.content,slideIndex:n.slideIndex,updatedAt:Lt()}),await wo(t,{type:"notes_updated",title:" ",description:`  ${e},  ${r} `,metadata:{lessonId:e,slideId:r,contentLength:n.content.length}}),{id:i.id,...n}}else{const o={teacherId:t,lessonId:e,slideId:r,slideIndex:n.slideIndex,content:n.content,createdAt:Lt(),updatedAt:Lt()},l=await p0(s,o);return await wo(t,{type:"notes_created",title:" ",description:`    ${e},  ${r}`,metadata:{lessonId:e,slideId:r,contentLength:n.content.length}}),{id:l.id,...o}}}catch(s){throw s}},cx=async(t,e)=>{try{const r=String(e),n=Ft(ze,"teacherNotes"),s=nr(n,yr("teacherId","==",t),yr("lessonId","==",r)),i=await zt(s),o=[];return i.forEach(l=>{const u=l.data();o.push({id:l.id,teacherId:u.teacherId,lessonId:u.lessonId,slideId:u.slideId,slideIndex:u.slideIndex||0,content:u.content,createdAt:u.createdAt,updatedAt:u.updatedAt})}),o}catch(r){throw r}},dB=async(t,e)=>{try{const r=Ft(ze,"teacherNotes"),n=nr(r,yr("lessonId","==",String(t))),s=await zt(n),i=[];if(s.forEach(o=>{const l=o.data();e.includes(l.slideId)||i.push({id:o.id,...l})}),i.length>0)for(const o of i)await ox(wt(ze,"teacherNotes",o.id));return i.length}catch(r){throw r}},hB=Object.freeze(Object.defineProperty({__proto__:null,assignStudentsToClass:_3,cleanupTeacherNotesForLesson:dB,createClass:p3,deleteClass:x3,getAllStudents:b3,getClassAnalytics:y3,getClassStudents:T2,getTeacherAnalytics:w3,getTeacherClasses:tu,getTeacherNotes:N3,getTeacherNotesForLesson:cx,getTeacherRecentActivities:j2,getTeacherStudents:x0,grantTeacherLessonAccess:v3,logTeacherActivity:wo,saveTeacherNotes:E3,updateClass:g3},Symbol.toStringTag,{value:"Module"})),S3=S.createContext(),bk="maxibunnyshow@gmail.com",La=()=>{const t=S.useContext(S3);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},fB=({children:t})=>{const[e,r]=S.useState(null),[n,s]=S.useState(null),[i,o]=S.useState(!0),l=D=>typeof D=="string"&&D.startsWith("lesson-")?D:typeof D=="number"||!isNaN(parseInt(D))?`lesson-${parseInt(D)}`:D,u=async(D,ie,Z,ne="student",H={})=>{try{D===bk&&(ne="system_manager");const Q=await cS(Za,D,ie);let q=Z;(!q||q===" ")&&(ne==="system_manager"?q=" ":q=(H.sex||"male")==="female"?" ":" "),await xy(Q.user,{displayName:q});const ae={uid:Q.user.uid,email:Q.user.email,displayName:q,role:ne,firstName:H.firstName||"",lastName:H.lastName||"",age:H.age?parseInt(H.age):null,sex:H.sex||"male",...ne==="system_manager"&&{systemManagerPermissions:["manage_users","manage_content","manage_system","view_logs","import_data","export_data"],systemManagerSettings:{defaultLanguage:"he",notificationPreferences:{emailNotifications:!0,systemAlerts:!0,userActivityReports:!0}}},...ne==="student"&&{progress:{1:{completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date}},completedLessons:[],currentLesson:1,totalTimeSpent:0,totalPagesEngaged:0,achievements:[],streak:0,classId:null,teacherId:null},...ne==="teacher"&&{teacherClasses:[],teacherPermissions:["manage_students","view_analytics","add_comments"],teacherSettings:{defaultClassId:null,notificationPreferences:{emailNotifications:!0,studentProgressAlerts:!0,classUpdates:!0}},progress:{},completedLessons:[],currentLesson:1,totalTimeSpent:0,totalPagesEngaged:0,achievements:[],streak:0},createdAt:new Date,lastLogin:new Date,lastActivityDate:new Date,updatedAt:new Date};if(await _n(wt(ze,"users",Q.user.uid),ae),ne==="teacher")try{await v3(Q.user.uid),console.log(" Teacher lesson access granted for new teacher")}catch(U){console.warn(" Failed to grant teacher lesson access:",U)}return Q}catch(Q){throw Q}},h=async(D,ie)=>{try{const Z=Ft(ze,"users"),ne=nr(Z,yr("email","==",D.toLowerCase())),H=await zt(ne);if(!H.empty){const q=H.docs[0],ae=q.data();if(ae.password&&ae.password===ie&&!ae.hasFirebaseAuth){console.log(" Creating Firebase Auth account for system-created user:",D);try{const U=await cS(Za,D,ie);return await xy(U.user,{displayName:ae.displayName}),await On(wt(ze,"users",q.id),{hasFirebaseAuth:!0,firebaseUid:U.user.uid,lastLogin:Lt(),updatedAt:Lt()}),console.log(" Firebase Auth account created for system-created user"),s({...ae,uid:U.user.uid,hasFirebaseAuth:!0,firebaseUid:U.user.uid}),U}catch(U){throw console.error(" Error creating Firebase Auth account:",U),new Error("   ")}}}const Q=await MO(Za,D,ie);if(D===bk){const q=wt(ze,"users",Q.user.uid),ae=await dr(q);ae.exists()&&ae.data().role!=="system_manager"&&await On(q,{role:"system_manager",systemManagerPermissions:["manage_users","manage_content","manage_system","view_logs","import_data","export_data"],systemManagerSettings:{defaultLanguage:"he",notificationPreferences:{emailNotifications:!0,systemAlerts:!0,userActivityReports:!0}},updatedAt:new Date})}if(Q.user){const q=wt(ze,"users",Q.user.uid),ae=await dr(q);if(ae.exists()){const U=ae.data();let M=!1,X={...U};(typeof U.progress!="object"||Array.isArray(U.progress)||U.progress===null)&&(X.progress={1:{completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date}},M=!0),Array.isArray(U.completedLessons)||(X.completedLessons=[],M=!0),M&&(await _n(q,X,{merge:!0}),console.log(" Fixed user profile structure in Firestore"));const K={...X,firstName:X.firstName||"",lastName:X.lastName||"",age:X.age||null,sex:X.sex||"male",displayName:X.displayName||(X.sex==="female"?" ":" ")};s(K)}}return Q}catch(Z){throw Z}},f=async(D,ie,Z=0,ne=!1,H=null,Q=null,q=null,ae=null)=>{var X;const U=ae||e;if(!U)return console.error(" No current user available for progress update"),console.error(" currentUser:",e),console.error(" userOverride:",ae),{success:!1,error:"No current user available"};if(!U.uid)return console.error(" User object has no UID"),console.error(" userToUse:",U),{success:!1,error:"User object has no UID"};let M="student";try{const K=wt(ze,"users",U.uid),Y=await dr(K);Y.exists()&&(M=Y.data().role||"student")}catch(K){console.error(" Error getting user role:",K)}if(M!=="student")return console.log(` Progress tracking blocked for ${M} role (UID: ${U.uid})`),{success:!0,data:{blocked:!0,reason:`Progress tracking not allowed for ${M} role`}};console.log(" updateUserProgress called with:",{lessonId:D,completed:ie,score:Z,temporary:ne,lastSlide:H,slideId:Q,allSlideIds:q,currentUser:e==null?void 0:e.uid,userOverride:ae==null?void 0:ae.uid,userToUse:U==null?void 0:U.uid,userRole:M});try{const K=wt(ze,"users",U.uid),Y=await dr(K);if(Y.exists()){const xe=Y.data(),le=xe.progress||{},fe=l(D);le[fe]||(le[fe]={completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date});const ve=ie?0:H!==null?H:le[fe].lastSlide;if(le[fe]={...le[fe],completed:ie,score:Z,completedAt:ie?new Date:le[fe].completedAt,temporary:!!(ne&&!ie),lastActivity:new Date,lastSlide:ve},Q&&le[fe].pagesEngaged&&(le[fe].pagesEngaged.includes(Q)||(le[fe].pagesEngaged=[...le[fe].pagesEngaged,Q])),ie&&q&&Array.isArray(q)){const pe=le[fe].pagesEngaged||[],Ce=[...new Set([...pe,...q])];le[fe].pagesEngaged=Ce,console.log(` All slides marked as engaged for lesson ${fe}: ${Ce.length} slides`)}let we=0,We=0;Object.values(le).forEach(pe=>{pe.pagesEngaged&&Array.isArray(pe.pagesEngaged)&&(We+=pe.pagesEngaged.length,we+=pe.pagesEngaged.length*3)});const re=xe.completedLessons||[],st=xe.currentLesson||1;let Re=re,he=st;ie&&(re.includes(fe)||(Re=[...re,fe],console.log(` Lesson ${fe} completed and added to completedLessons`)),console.log(` Lesson ${fe} completed - waiting for teacher to unlock next lesson`));const me=xe.achievements||[],ee=[...me];return ie&&(fe==="lesson1"||D===1)&&!me.includes("first_lesson")&&(ee.push("first_lesson"),console.log(" Achievement unlocked: First Lesson Completed!")),ie&&Re.length>=3&&!me.includes("three_lessons")&&(ee.push("three_lessons"),console.log(" Achievement unlocked: Three Lessons Completed!")),we>=60&&!me.includes("one_hour")&&(ee.push("one_hour"),console.log(" Achievement unlocked: One Hour of Learning!")),console.log(" USER SESSION DATA UPDATE:",{userId:U.uid,lessonId:fe,originalLessonId:D,action:ie?"LESSON_COMPLETED":"PROGRESS_UPDATED",timestamp:new Date().toISOString(),progress:{lessonId:fe,completed:ie,score:Z,lastSlide:ve,pagesEngaged:((X=le[fe].pagesEngaged)==null?void 0:X.length)||0,temporary:ne},statistics:{totalTimeSpent:we,totalPagesEngaged:We,completedLessons:Re.length,currentLesson:he,achievements:ee.length},achievements:{newlyUnlocked:ee.filter(pe=>!me.includes(pe)),total:ee.length}}),await _n(K,{progress:le,completedLessons:Re,currentLesson:he,lastActivityDate:new Date,totalTimeSpent:we,totalPagesEngaged:We,achievements:ee},{merge:!0}),s(pe=>({...pe,progress:le,completedLessons:Re,currentLesson:he,lastActivityDate:new Date,totalTimeSpent:we,totalPagesEngaged:We,achievements:ee})),console.log(" Progress update completed successfully"),console.log(" Final user state:",{userId:U.uid,lessonId:fe,completed:ie,score:Z,totalTimeSpent:we,totalPagesEngaged:We,completedLessons:Re.length,achievements:ee.length}),{success:!0,data:{progress:le,completedLessons:Re}}}else return console.error(" User document does not exist in Firestore"),{success:!1,error:"User document not found"}}catch(K){return console.error(" Error updating user progress:",K),{success:!1,error:K.message}}},p=async(D,ie)=>{if(e)try{const Z=wt(ze,"users",e.uid),ne=await dr(Z);if(ne.exists()){const H=ne.data(),Q=H.role||"student";if(Q!=="student"){console.log(` Slide engagement tracking blocked for ${Q} role (UID: ${e.uid})`);return}const q=H.progress||{},ae=l(D);if(q[ae]||(q[ae]={completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date}),q[ae].pagesEngaged||(q[ae].pagesEngaged=[]),q[ae].pagesEngaged.includes(ie))console.log(" DUPLICATE SLIDE ENGAGEMENT:",{userId:e.uid,lessonId:D,slideId:ie,timestamp:new Date().toISOString(),message:"Slide already engaged, skipping duplicate tracking"});else{q[ae].pagesEngaged=[...q[ae].pagesEngaged,ie],q[ae].lastActivity=new Date;let U=0,M=0;Object.values(q).forEach(X=>{X.pagesEngaged&&Array.isArray(X.pagesEngaged)&&(M+=X.pagesEngaged.length,U+=X.pagesEngaged.length*3)}),console.log(" SLIDE ENGAGEMENT TRACKED:",{userId:e.uid,lessonId:D,progressLessonId:ae,slideId:ie,timestamp:new Date().toISOString(),engagement:{lessonId:D,progressLessonId:ae,slideId:ie,totalSlidesInLesson:q[ae].pagesEngaged.length,isNewEngagement:!0},statistics:{totalTimeSpent:U,totalPagesEngaged:M,lessonProgress:Math.round(q[ae].pagesEngaged.length/10*100)}}),await _n(Z,{progress:q,totalTimeSpent:U,totalPagesEngaged:M,lastActivityDate:new Date},{merge:!0}),s(X=>({...X,progress:q,totalTimeSpent:U,totalPagesEngaged:M,lastActivityDate:new Date})),console.log(" ENGAGEMENT SUMMARY:",{lessonId:D,progressLessonId:ae,slideId:ie,totalPagesEngaged:M,totalTimeSpent:U,lessonProgress:`${q[ae].pagesEngaged.length} slides engaged`})}}}catch(Z){console.error(" Error tracking slide engagement:",Z)}},g=async()=>{if(e)try{const D=wt(ze,"users",e.uid),ie=await dr(D);if(ie.exists()){const Z=ie.data(),ne=Z.role||"student";if(ne!=="student"){console.log(` Temporary progress cleanup blocked for ${ne} role (UID: ${e.uid})`);return}const H=Z.progress||{};let Q=!1;Object.keys(H).forEach(q=>{H[q].temporary&&(delete H[q],Q=!0)}),Q&&(await _n(D,{progress:H},{merge:!0}),s(q=>({...q,progress:H})))}}catch(D){console.error("Error removing temporary progress:",D)}},y=async()=>{try{console.log(" Logging out user..."),await g(),await WO(Za),r(null),s(null),console.log(" User logged out successfully"),window.location.href="/Israel-cyber-academy/login"}catch(D){console.error(" Error during logout:",D),r(null),s(null),window.location.href="/Israel-cyber-academy/login"}},w=async D=>{if(e)try{await xy(e,{displayName:D});const ie=wt(ze,"users",e.uid);await _n(ie,{displayName:D,lastActivityDate:new Date},{merge:!0}),s(Z=>({...Z,displayName:D,lastActivityDate:new Date})),console.log(" Display name updated successfully:",D)}catch(ie){throw console.error(" Error updating display name:",ie),ie}},b=async(D,ie)=>{if(!e)throw new Error("No user is currently logged in");try{const Z=Xc.credential(e.email,D);await OO(e,Z),await BO(e,ie),console.log(" Password changed successfully")}catch(Z){throw console.error(" Error changing password:",Z),Z.code==="auth/wrong-password"?new Error("  "):Z.code==="auth/weak-password"?new Error("      ( 6 )"):Z.code==="auth/requires-recent-login"?new Error("    "):new Error("   ")}},_=D=>{var ne,H;const ie=l(D),Z=((H=(ne=n==null?void 0:n.progress)==null?void 0:ne[ie])==null?void 0:H.lastSlide)??0;return console.log(` GET LAST SLIDE: Lesson ${D} -> Slide ${Z+1} (using ID: ${ie})`),Z},P=async(D,ie)=>{if(e)try{const Z=wt(ze,"users",e.uid),ne=await dr(Z);if(ne.exists()){const H=ne.data(),Q=H.role||"student";if(Q!=="student"){console.log(` Slide position saving blocked for ${Q} role (UID: ${e.uid})`);return}const q=H.progress||{},ae=l(D);q[ae]||(q[ae]={completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date}),q[ae].lastSlide=ie,q[ae].lastActivity=new Date,console.log(" SLIDE POSITION SAVED:",{userId:e.uid,lessonId:ae,originalLessonId:D,slideIndex:ie+1,timestamp:new Date().toISOString(),action:"RESUME_POSITION_SAVED"}),await _n(Z,{progress:q,lastActivityDate:new Date},{merge:!0}),s(U=>({...U,progress:q,lastActivityDate:new Date}))}}catch(Z){console.error(" Error saving slide position:",Z)}};S.useEffect(()=>{console.log(" Setting up authentication listener...");const D=HO(Za,async Z=>{var ne,H;if(console.log(" Auth state changed:",Z?`User logged in: ${Z.email} (${Z.uid})`:"User logged out"),console.log(" Previous currentUser:",e==null?void 0:e.uid),r(Z),Z){console.log(" Fetching user profile for:",Z.email),console.log(" User UID:",Z.uid);try{const Q=wt(ze,"users",Z.uid);console.log(" Firestore document reference created");const q=await dr(Q);if(console.log(" Firestore document fetch completed"),q.exists()){const ae=q.data();let U=!1,M={...ae};if((typeof ae.progress!="object"||Array.isArray(ae.progress)||ae.progress===null)&&(M.progress={lesson1:{completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date},lesson2:{completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date}},U=!0),Array.isArray(ae.completedLessons)||(M.completedLessons=[],U=!0),U)try{await On(Q,M),console.log(" Fixed corrupted user profile structure")}catch(K){console.error(" Error fixing user profile:",K)}console.log(" User profile loaded:",M.displayName),console.log(" User data:",{role:M.role,currentLesson:M.currentLesson,completedLessons:((ne=M.completedLessons)==null?void 0:ne.length)||0,progress:Object.keys(M.progress||{}).length});const X={...M,firstName:M.firstName||"",lastName:M.lastName||"",age:M.age||null,sex:M.sex||"male",displayName:M.displayName||(M.sex==="female"?" ":" ")};s(X)}else{console.log(" User profile not found in Firestore - creating new profile");const ae={uid:Z.uid,email:Z.email,displayName:Z.displayName||" ",role:Z.email.includes("teacher")||(H=Z.displayName)!=null&&H.includes("")?"teacher":"student",firstName:"",lastName:"",age:null,sex:"male",progress:{1:{completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date}},completedLessons:[],currentLesson:1,createdAt:new Date,lastLogin:new Date,totalTimeSpent:0,totalPagesEngaged:0,achievements:[],streak:0,lastActivityDate:new Date};try{await _n(Q,ae),console.log(" New user profile created successfully"),s(ae)}catch(U){console.error(" Error creating user profile:",U),console.error(" Create error details:",{code:U.code,message:U.message}),s(null)}}}catch(Q){console.error(" Error fetching user profile:",Q),console.error(" Error details:",{code:Q.code,message:Q.message,stack:Q.stack}),Q.code==="permission-denied"?(console.error(" This is likely a Firestore security rules issue"),console.error(" Check your Firestore security rules in Firebase Console")):Q.code==="not-found"&&(console.error(" Firestore database might not exist"),console.error(" Create Firestore database in Firebase Console")),s(null)}}else console.log(" User signed out, clearing profile"),s(null);o(!1)});let ie=null;if(e){console.log(" Setting up real-time listener for user:",e.uid);const Z=wt(ze,"users",e.uid);ie=Kd(Z,ne=>{ne.exists()?(console.log(" Real-time profile update received for:",e.uid),s(ne.data())):console.log(" Real-time listener: User document not found")},ne=>{console.error(" Real-time listener error:",ne)})}return()=>{console.log(" Cleaning up authentication listeners"),D(),ie&&(console.log(" Cleaning up real-time profile listener"),ie())}},[]);const A=S.useCallback(u,[]),k=S.useCallback(h,[]),F=S.useCallback(y,[]),L=S.useCallback(f,[]),I=S.useCallback(p,[]),N=S.useCallback(P,[]),T=S.useCallback(_,[n]),R=S.useCallback(w,[]),B=S.useCallback(g,[]),z=S.useCallback(b,[]),O=S.useMemo(()=>({currentUser:e,userProfile:n,role:(n==null?void 0:n.role)||null,signup:A,login:k,logout:F,updateUserProgress:L,setLastLessonSlide:N,loading:i,removeTemporaryProgress:B,trackSlideEngagement:I,updateDisplayName:R,getLastLessonSlide:T,changePassword:z}),[e,n,i,A,k,F,L,N,B,I,R,T,z]);return a.jsx(S3.Provider,{value:O,children:!i&&t})};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),k3=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},u)=>S.createElement("svg",{ref:u,...pB,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:k3("lucide",s),...l},[...o.map(([h,f])=>S.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=(t,e)=>{const r=S.forwardRef(({className:n,...s},i)=>S.createElement(gB,{ref:i,iconNode:e,className:k3(`lucide-${mB(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=Ve("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=Ve("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=Ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=Ve("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=Ve("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=Ve("BellOff",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=Ve("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Ve("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=Ve("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=Ve("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=Ve("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=Ve("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=Ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=Ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=Ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=Ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=Ve("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Ve("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=Ve("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=Ve("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=Ve("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=Ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=Ve("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=Ve("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=Ve("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=Ve("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=Ve("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=Ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=Ve("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Ve("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=Ve("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=Ve("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=Ve("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=Ve("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=Ve("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=Ve("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=Ve("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=Ve("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=Ve("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=Ve("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=Ve("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=Ve("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=Ve("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=Ve("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=Ve("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=Ve("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=Ve("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=Ve("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=Ve("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=Ve("LockKeyholeOpen",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{width:"18",height:"12",x:"3",y:"10",rx:"2",key:"l0tzu3"}],["path",{d:"M7 10V7a5 5 0 0 1 9.33-2.5",key:"car5b7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=Ve("LockKeyhole",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=Ve("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=Ve("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=Ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=Ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=Ve("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=Ve("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=Ve("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=Ve("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=Ve("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=Ve("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=Ve("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=Ve("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=Ve("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=Ve("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=Ve("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=Ve("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=Ve("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=Ve("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=Ve("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=Ve("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=Ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=Ve("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=Ve("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=Ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=Ve("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=Ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=Ve("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=Ve("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=Ve("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=Ve("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=Ve("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=Ve("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=Ve("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=Ve("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=Ve("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=Ve("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=Ve("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=Ve("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=Ve("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=Ve("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=Ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=Ve("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=Ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=Ve("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=Ve("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=Ve("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=Ve("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=Ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=Ve("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=Ve("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=Ve("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=Ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=Ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=Ve("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=Ve("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=Ve("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=Ve("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=Ve("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=Ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=Ve("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Jn=({size:t="md",text:e="...",variant:r="primary",fullScreen:n=!1})=>{const s={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"},i={primary:"text-cyber-blue",secondary:"text-gray-600",white:"text-white",success:"text-green-600",warning:"text-yellow-600",error:"text-red-600"},o=a.jsxs("div",{className:"flex flex-col items-center justify-center",children:[a.jsx(P3,{className:`${s[t]} ${i[r]} animate-spin`}),e&&a.jsx("p",{className:`mt-2 text-sm ${r==="white"?"text-white":"text-gray-600"}`,children:e})]});return n?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-cyber-blue to-cyber-purple",children:o}):o};class $2 extends Ac.Component{constructor(r){super(r);NE(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,n){this.setState({error:r,errorInfo:n})}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-red-100 p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(vs,{className:"w-8 h-8 text-red-600"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" "}),a.jsx("p",{className:"text-gray-600 mb-6",children:"   .         ."}),a.jsxs("button",{onClick:this.handleReload,className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[a.jsx(Cs,{className:"w-4 h-4 mr-2"})," "]}),!1]})}):this.props.children}}const H2=S.createContext({});function W2(t){const e=S.useRef(null);return e.current===null&&(e.current=t()),e.current}const xx=S.createContext(null),q2=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class ZB extends S.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function eU({children:t,isPresent:e}){const r=S.useId(),n=S.useRef(null),s=S.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=S.useContext(q2);return S.useInsertionEffect(()=>{const{width:o,height:l,top:u,left:h}=s.current;if(e||!n.current||!o||!l)return;n.current.dataset.motionPopId=r;const f=document.createElement("style");return i&&(f.nonce=i),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),a.jsx(ZB,{isPresent:e,childRef:n,sizeRef:s,children:S.cloneElement(t,{ref:n})})}const tU=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o})=>{const l=W2(rU),u=S.useId(),h=S.useCallback(p=>{l.set(p,!0);for(const g of l.values())if(!g)return;n&&n()},[l,n]),f=S.useMemo(()=>({id:u,initial:e,isPresent:r,custom:s,onExitComplete:h,register:p=>(l.set(p,!1),()=>l.delete(p))}),i?[Math.random(),h]:[r,h]);return S.useMemo(()=>{l.forEach((p,g)=>l.set(g,!1))},[r]),S.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),o==="popLayout"&&(t=a.jsx(eU,{isPresent:r,children:t})),a.jsx(xx.Provider,{value:f,children:t})};function rU(){return new Map}function $3(t=!0){const e=S.useContext(xx);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=e,i=S.useId();S.useEffect(()=>{t&&s(i)},[t]);const o=S.useCallback(()=>t&&n&&n(i),[i,n,t]);return!r&&n?[!1,o]:[!0]}const rp=t=>t.key||"";function kk(t){const e=[];return S.Children.forEach(t,r=>{S.isValidElement(r)&&e.push(r)}),e}const G2=typeof window<"u",H3=G2?S.useLayoutEffect:S.useEffect,vn=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1})=>{const[l,u]=$3(o),h=S.useMemo(()=>kk(t),[t]),f=o&&!l?[]:h.map(rp),p=S.useRef(!0),g=S.useRef(h),y=W2(()=>new Map),[w,b]=S.useState(h),[_,P]=S.useState(h);H3(()=>{p.current=!1,g.current=h;for(let F=0;F<_.length;F++){const L=rp(_[F]);f.includes(L)?y.delete(L):y.get(L)!==!0&&y.set(L,!1)}},[_,f.length,f.join("-")]);const A=[];if(h!==w){let F=[...h];for(let L=0;L<_.length;L++){const I=_[L],N=rp(I);f.includes(N)||(F.splice(L,0,I),A.push(I))}i==="wait"&&A.length&&(F=A),P(kk(F)),b(h);return}const{forceRender:k}=S.useContext(H2);return a.jsx(a.Fragment,{children:_.map(F=>{const L=rp(F),I=o&&!l?!1:h===_||f.includes(L),N=()=>{if(y.has(L))y.set(L,!0);else return;let T=!0;y.forEach(R=>{R||(T=!1)}),T&&(k==null||k(),P(g.current),o&&(u==null||u()),n&&n())};return a.jsx(tU,{isPresent:I,initial:!p.current||r?void 0:!1,custom:I?void 0:e,presenceAffectsLayout:s,mode:i,onExitComplete:I?void 0:N,children:F},L)})})},ha=t=>t;let W3=ha;function K2(t){let e;return()=>(e===void 0&&(e=t()),e)}const jd=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},lo=t=>t*1e3,co=t=>t/1e3,nU={useManualTiming:!1};function sU(t){let e=new Set,r=new Set,n=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(h){i.has(h)&&(u.schedule(h),t()),h(o)}const u={schedule:(h,f=!1,p=!1)=>{const y=p&&n?e:r;return f&&i.add(h),y.has(h)||y.add(h),h},cancel:h=>{r.delete(h),i.delete(h)},process:h=>{if(o=h,n){s=!0;return}n=!0,[e,r]=[r,e],e.forEach(l),e.clear(),n=!1,s&&(s=!1,u.process(h))}};return u}const np=["read","resolveKeyframes","update","preRender","render","postRender"],aU=40;function q3(t,e){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=np.reduce((P,A)=>(P[A]=sU(i),P),{}),{read:l,resolveKeyframes:u,update:h,preRender:f,render:p,postRender:g}=o,y=()=>{const P=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(P-s.timestamp,aU),1),s.timestamp=P,s.isProcessing=!0,l.process(s),u.process(s),h.process(s),f.process(s),p.process(s),g.process(s),s.isProcessing=!1,r&&e&&(n=!1,t(y))},w=()=>{r=!0,n=!0,s.isProcessing||t(y)};return{schedule:np.reduce((P,A)=>{const k=o[A];return P[A]=(F,L=!1,I=!1)=>(r||w(),k.schedule(F,L,I)),P},{}),cancel:P=>{for(let A=0;A<np.length;A++)o[np[A]].cancel(P)},state:s,steps:o}}const{schedule:Ir,cancel:Cl,state:qn,steps:Ey}=q3(typeof requestAnimationFrame<"u"?requestAnimationFrame:ha,!0),G3=S.createContext({strict:!1}),Tk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ad={};for(const t in Tk)Ad[t]={isEnabled:e=>Tk[t].some(r=>!!e[r])};function iU(t){for(const e in t)Ad[e]={...Ad[e],...t[e]}}const oU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ag(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||oU.has(t)}let K3=t=>!ag(t);function lU(t){t&&(K3=e=>e.startsWith("on")?!ag(e):t(e))}try{lU(require("@emotion/is-prop-valid").default)}catch{}function cU(t,e,r){const n={};for(const s in t)s==="values"&&typeof t.values=="object"||(K3(s)||r===!0&&ag(s)||!e&&!ag(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}function uU(t){if(typeof Proxy>"u")return t;const e=new Map,r=(...n)=>t(...n);return new Proxy(r,{get:(n,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const vx=S.createContext({});function Ff(t){return typeof t=="string"||Array.isArray(t)}function yx(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const X2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Y2=["initial",...X2];function wx(t){return yx(t.animate)||Y2.some(e=>Ff(t[e]))}function X3(t){return!!(wx(t)||t.variants)}function dU(t,e){if(wx(t)){const{initial:r,animate:n}=t;return{initial:r===!1||Ff(r)?r:void 0,animate:Ff(n)?n:void 0}}return t.inherit!==!1?e:{}}function hU(t){const{initial:e,animate:r}=dU(t,S.useContext(vx));return S.useMemo(()=>({initial:e,animate:r}),[jk(e),jk(r)])}function jk(t){return Array.isArray(t)?t.join(" "):t}const fU=Symbol.for("motionComponentSymbol");function Zu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function mU(t,e,r){return S.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):Zu(r)&&(r.current=n))},[e])}const Q2=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),pU="framerAppearId",Y3="data-"+Q2(pU),{schedule:J2}=q3(queueMicrotask,!1),Q3=S.createContext({});function gU(t,e,r,n,s){var i,o;const{visualElement:l}=S.useContext(vx),u=S.useContext(G3),h=S.useContext(xx),f=S.useContext(q2).reducedMotion,p=S.useRef(null);n=n||u.renderer,!p.current&&n&&(p.current=n(t,{visualState:e,parent:l,props:r,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const g=p.current,y=S.useContext(Q3);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&xU(p.current,r,s,y);const w=S.useRef(!1);S.useInsertionEffect(()=>{g&&w.current&&g.update(r,h)});const b=r[Y3],_=S.useRef(!!b&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,b))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,b)));return H3(()=>{g&&(w.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),J2.render(g.render),_.current&&g.animationState&&g.animationState.animateChanges())}),S.useEffect(()=>{g&&(!_.current&&g.animationState&&g.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var P;(P=window.MotionHandoffMarkAsComplete)===null||P===void 0||P.call(window,b)}),_.current=!1))}),g}function xU(t,e,r,n){const{layoutId:s,layout:i,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:h}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:J3(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||l&&Zu(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,layoutScroll:u,layoutRoot:h})}function J3(t){if(t)return t.options.allowProjection!==!1?t.projection:J3(t.parent)}function vU({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:s}){var i,o;t&&iU(t);function l(h,f){let p;const g={...S.useContext(q2),...h,layoutId:yU(h)},{isStatic:y}=g,w=hU(h),b=n(h,y);if(!y&&G2){wU();const _=bU(g);p=_.MeasureLayout,w.visualElement=gU(s,b,g,e,_.ProjectionNode)}return a.jsxs(vx.Provider,{value:w,children:[p&&w.visualElement?a.jsx(p,{visualElement:w.visualElement,...g}):null,r(s,h,mU(b,w.visualElement,f),b,y,w.visualElement)]})}l.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const u=S.forwardRef(l);return u[fU]=s,u}function yU({layoutId:t}){const e=S.useContext(H2).id;return e&&t!==void 0?e+"-"+t:t}function wU(t,e){S.useContext(G3).strict}function bU(t){const{drag:e,layout:r}=Ad;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const _U=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Z2(t){return typeof t!="string"||t.includes("-")?!1:!!(_U.indexOf(t)>-1||/[A-Z]/u.test(t))}function Ak(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function eb(t,e,r,n){if(typeof e=="function"){const[s,i]=Ak(n);e=e(r!==void 0?r:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=Ak(n);e=e(r!==void 0?r:t.custom,s,i)}return e}const U1=t=>Array.isArray(t),NU=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),EU=t=>U1(t)?t[t.length-1]||0:t,ms=t=>!!(t&&t.getVelocity);function Ip(t){const e=ms(t)?t.get():t;return NU(e)?e.toValue():e}function SU({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:r},n,s,i){const o={latestValues:kU(n,s,i,t),renderState:e()};return r&&(o.onMount=l=>r({props:n,current:l,...o}),o.onUpdate=l=>r(l)),o}const Z3=t=>(e,r)=>{const n=S.useContext(vx),s=S.useContext(xx),i=()=>SU(t,e,n,s);return r?i():W2(i)};function kU(t,e,r,n){const s={},i=n(t,{});for(const g in i)s[g]=Ip(i[g]);let{initial:o,animate:l}=t;const u=wx(t),h=X3(t);e&&h&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let f=r?r.initial===!1:!1;f=f||o===!1;const p=f?l:o;if(p&&typeof p!="boolean"&&!yx(p)){const g=Array.isArray(p)?p:[p];for(let y=0;y<g.length;y++){const w=eb(t,g[y]);if(w){const{transitionEnd:b,transition:_,...P}=w;for(const A in P){let k=P[A];if(Array.isArray(k)){const F=f?k.length-1:0;k=k[F]}k!==null&&(s[A]=k)}for(const A in b)s[A]=b[A]}}}return s}const Jd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ru=new Set(Jd),eI=t=>e=>typeof e=="string"&&e.startsWith(t),tI=eI("--"),TU=eI("var(--"),tb=t=>TU(t)?jU.test(t.split("/*")[0].trim()):!1,jU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,rI=(t,e)=>e&&typeof t=="number"?e.transform(t):t,No=(t,e,r)=>r>e?e:r<t?t:r,Zd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Lf={...Zd,transform:t=>No(0,1,t)},sp={...Zd,default:1},y0=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),il=y0("deg"),Ii=y0("%"),Tt=y0("px"),AU=y0("vh"),CU=y0("vw"),Ck={...Ii,parse:t=>Ii.parse(t)/100,transform:t=>Ii.transform(t*100)},IU={borderWidth:Tt,borderTopWidth:Tt,borderRightWidth:Tt,borderBottomWidth:Tt,borderLeftWidth:Tt,borderRadius:Tt,radius:Tt,borderTopLeftRadius:Tt,borderTopRightRadius:Tt,borderBottomRightRadius:Tt,borderBottomLeftRadius:Tt,width:Tt,maxWidth:Tt,height:Tt,maxHeight:Tt,top:Tt,right:Tt,bottom:Tt,left:Tt,padding:Tt,paddingTop:Tt,paddingRight:Tt,paddingBottom:Tt,paddingLeft:Tt,margin:Tt,marginTop:Tt,marginRight:Tt,marginBottom:Tt,marginLeft:Tt,backgroundPositionX:Tt,backgroundPositionY:Tt},PU={rotate:il,rotateX:il,rotateY:il,rotateZ:il,scale:sp,scaleX:sp,scaleY:sp,scaleZ:sp,skew:il,skewX:il,skewY:il,distance:Tt,translateX:Tt,translateY:Tt,translateZ:Tt,x:Tt,y:Tt,z:Tt,perspective:Tt,transformPerspective:Tt,opacity:Lf,originX:Ck,originY:Ck,originZ:Tt},Ik={...Zd,transform:Math.round},rb={...IU,...PU,zIndex:Ik,size:Tt,fillOpacity:Lf,strokeOpacity:Lf,numOctaves:Ik},RU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},DU=Jd.length;function FU(t,e,r){let n="",s=!0;for(let i=0;i<DU;i++){const o=Jd[i],l=t[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||r){const h=rI(l,rb[o]);if(!u){s=!1;const f=RU[o]||o;n+=`${f}(${h}) `}r&&(e[o]=h)}}return n=n.trim(),r?n=r(e,s?"":n):s&&(n="none"),n}function nb(t,e,r){const{style:n,vars:s,transformOrigin:i}=t;let o=!1,l=!1;for(const u in e){const h=e[u];if(ru.has(u)){o=!0;continue}else if(tI(u)){s[u]=h;continue}else{const f=rI(h,rb[u]);u.startsWith("origin")?(l=!0,i[u]=f):n[u]=f}}if(e.transform||(o||r?n.transform=FU(e,t.transform,r):n.transform&&(n.transform="none")),l){const{originX:u="50%",originY:h="50%",originZ:f=0}=i;n.transformOrigin=`${u} ${h} ${f}`}}const LU={offset:"stroke-dashoffset",array:"stroke-dasharray"},OU={offset:"strokeDashoffset",array:"strokeDasharray"};function MU(t,e,r=1,n=0,s=!0){t.pathLength=1;const i=s?LU:OU;t[i.offset]=Tt.transform(-n);const o=Tt.transform(e),l=Tt.transform(r);t[i.array]=`${o} ${l}`}function Pk(t,e,r){return typeof t=="string"?t:Tt.transform(e+r*t)}function VU(t,e,r){const n=Pk(e,t.x,t.width),s=Pk(r,t.y,t.height);return`${n} ${s}`}function sb(t,{attrX:e,attrY:r,attrScale:n,originX:s,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:u=0,...h},f,p){if(nb(t,h,p),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:y,dimensions:w}=t;g.transform&&(w&&(y.transform=g.transform),delete g.transform),w&&(s!==void 0||i!==void 0||y.transform)&&(y.transformOrigin=VU(w,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(g.x=e),r!==void 0&&(g.y=r),n!==void 0&&(g.scale=n),o!==void 0&&MU(g,o,l,u,!1)}const ab=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),nI=()=>({...ab(),attrs:{}}),ib=t=>typeof t=="string"&&t.toLowerCase()==="svg";function sI(t,{style:e,vars:r},n,s){Object.assign(t.style,e,s&&s.getProjectionStyles(n));for(const i in r)t.style.setProperty(i,r[i])}const aI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function iI(t,e,r,n){sI(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(aI.has(s)?s:Q2(s),e.attrs[s])}const ig={};function BU(t){Object.assign(ig,t)}function oI(t,{layout:e,layoutId:r}){return ru.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!ig[t]||t==="opacity")}function ob(t,e,r){var n;const{style:s}=t,i={};for(const o in s)(ms(s[o])||e.style&&ms(e.style[o])||oI(o,t)||((n=r==null?void 0:r.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function lI(t,e,r){const n=ob(t,e,r);for(const s in t)if(ms(t[s])||ms(e[s])){const i=Jd.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=t[s]}return n}function UU(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Rk=["x","y","width","height","cx","cy","r"],zU={useVisualState:Z3({scrapeMotionValuesFromProps:lI,createRenderState:nI,onUpdate:({props:t,prevProps:e,current:r,renderState:n,latestValues:s})=>{if(!r)return;let i=!!t.drag;if(!i){for(const l in s)if(ru.has(l)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let l=0;l<Rk.length;l++){const u=Rk[l];t[u]!==e[u]&&(o=!0)}o&&Ir.read(()=>{UU(r,n),Ir.render(()=>{sb(n,s,ib(r.tagName),t.transformTemplate),iI(r,n)})})}})},$U={useVisualState:Z3({scrapeMotionValuesFromProps:ob,createRenderState:ab})};function cI(t,e,r){for(const n in e)!ms(e[n])&&!oI(n,r)&&(t[n]=e[n])}function HU({transformTemplate:t},e){return S.useMemo(()=>{const r=ab();return nb(r,e,t),Object.assign({},r.vars,r.style)},[e])}function WU(t,e){const r=t.style||{},n={};return cI(n,r,t),Object.assign(n,HU(t,e)),n}function qU(t,e){const r={},n=WU(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}function GU(t,e,r,n){const s=S.useMemo(()=>{const i=nI();return sb(i,e,ib(n),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};cI(i,t.style,t),s.style={...i,...s.style}}return s}function KU(t=!1){return(r,n,s,{latestValues:i},o)=>{const u=(Z2(r)?GU:qU)(n,i,o,r),h=cU(n,typeof r=="string",t),f=r!==S.Fragment?{...h,...u,ref:s}:{},{children:p}=n,g=S.useMemo(()=>ms(p)?p.get():p,[p]);return S.createElement(r,{...f,children:g})}}function XU(t,e){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...Z2(n)?zU:$U,preloadedFeatures:t,useRender:KU(s),createVisualElement:e,Component:n};return vU(o)}}function uI(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function bx(t,e,r){const n=t.getProps();return eb(n,e,r!==void 0?r:n.custom,t)}const YU=K2(()=>window.ScrollTimeline!==void 0);class QU{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,r){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=r}attachTimeline(e,r){const n=this.animations.map(s=>{if(YU()&&s.attachTimeline)return s.attachTimeline(e);if(typeof r=="function")return r(s)});return()=>{n.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let r=0;r<this.animations.length;r++)e=Math.max(e,this.animations[r].duration);return e}runAll(e){this.animations.forEach(r=>r[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class JU extends QU{then(e,r){return Promise.all(this.animations).then(e).catch(r)}}function lb(t,e){return t?t[e]||t.default||t:void 0}const z1=2e4;function dI(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<z1;)e+=r,n=t.next(e);return e>=z1?1/0:e}function cb(t){return typeof t=="function"}function Dk(t,e){t.timeline=e,t.onfinish=null}const ub=t=>Array.isArray(t)&&typeof t[0]=="number",ZU={linearEasing:void 0};function ez(t,e){const r=K2(t);return()=>{var n;return(n=ZU[e])!==null&&n!==void 0?n:r()}}const og=ez(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hI=(t,e,r=10)=>{let n="";const s=Math.max(Math.round(e/r),2);for(let i=0;i<s;i++)n+=t(jd(0,s-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function fI(t){return!!(typeof t=="function"&&og()||!t||typeof t=="string"&&(t in $1||og())||ub(t)||Array.isArray(t)&&t.every(fI))}const Wh=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,$1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wh([0,.65,.55,1]),circOut:Wh([.55,0,1,.45]),backIn:Wh([.31,.01,.66,-.59]),backOut:Wh([.33,1.53,.69,.99])};function mI(t,e){if(t)return typeof t=="function"&&og()?hI(t,e):ub(t)?Wh(t):Array.isArray(t)?t.map(r=>mI(r,e)||$1.easeOut):$1[t]}const Ja={x:!1,y:!1};function pI(){return Ja.x||Ja.y}function tz(t,e,r){var n;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const i=(n=void 0)!==null&&n!==void 0?n:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function gI(t,e){const r=tz(t),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[r,s,()=>n.abort()]}function Fk(t){return e=>{e.pointerType==="touch"||pI()||t(e)}}function rz(t,e,r={}){const[n,s,i]=gI(t,r),o=Fk(l=>{const{target:u}=l,h=e(l);if(typeof h!="function"||!u)return;const f=Fk(p=>{h(p),u.removeEventListener("pointerleave",f)});u.addEventListener("pointerleave",f,s)});return n.forEach(l=>{l.addEventListener("pointerenter",o,s)}),i}const xI=(t,e)=>e?t===e?!0:xI(t,e.parentElement):!1,db=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,nz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function sz(t){return nz.has(t.tagName)||t.tabIndex!==-1}const qh=new WeakSet;function Lk(t){return e=>{e.key==="Enter"&&t(e)}}function Sy(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const az=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=Lk(()=>{if(qh.has(r))return;Sy(r,"down");const s=Lk(()=>{Sy(r,"up")}),i=()=>Sy(r,"cancel");r.addEventListener("keyup",s,e),r.addEventListener("blur",i,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function Ok(t){return db(t)&&!pI()}function iz(t,e,r={}){const[n,s,i]=gI(t,r),o=l=>{const u=l.currentTarget;if(!Ok(l)||qh.has(u))return;qh.add(u);const h=e(l),f=(y,w)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),!(!Ok(y)||!qh.has(u))&&(qh.delete(u),typeof h=="function"&&h(y,{success:w}))},p=y=>{f(y,r.useGlobalTarget||xI(u,y.target))},g=y=>{f(y,!1)};window.addEventListener("pointerup",p,s),window.addEventListener("pointercancel",g,s)};return n.forEach(l=>{!sz(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),l.addEventListener("focus",h=>az(h,s),s)}),i}function oz(t){return t==="x"||t==="y"?Ja[t]?null:(Ja[t]=!0,()=>{Ja[t]=!1}):Ja.x||Ja.y?null:(Ja.x=Ja.y=!0,()=>{Ja.x=Ja.y=!1})}const vI=new Set(["width","height","top","left","right","bottom",...Jd]);let Pp;function lz(){Pp=void 0}const Pi={now:()=>(Pp===void 0&&Pi.set(qn.isProcessing||nU.useManualTiming?qn.timestamp:performance.now()),Pp),set:t=>{Pp=t,queueMicrotask(lz)}};function hb(t,e){t.indexOf(e)===-1&&t.push(e)}function fb(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class mb{constructor(){this.subscriptions=[]}add(e){return hb(this.subscriptions,e),()=>fb(this.subscriptions,e)}notify(e,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function yI(t,e){return e?t*(1e3/e):0}const Mk=30,cz=t=>!isNaN(parseFloat(t));class uz{constructor(e,r={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{const i=Pi.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=Pi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=cz(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new mb);const n=this.events[e].add(r);return e==="change"?()=>{n(),Ir.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Pi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Mk)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Mk);return yI(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Of(t,e){return new uz(t,e)}function dz(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Of(r))}function hz(t,e){const r=bx(t,e);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i){const l=EU(i[o]);dz(t,o,l)}}function fz(t){return!!(ms(t)&&t.add)}function H1(t,e){const r=t.getValue("willChange");if(fz(r))return r.add(e)}function wI(t){return t.props[Y3]}const bI=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,mz=1e-7,pz=12;function gz(t,e,r,n,s){let i,o,l=0;do o=e+(r-e)/2,i=bI(o,n,s)-t,i>0?r=o:e=o;while(Math.abs(i)>mz&&++l<pz);return o}function w0(t,e,r,n){if(t===e&&r===n)return ha;const s=i=>gz(i,0,1,t,r);return i=>i===0||i===1?i:bI(s(i),e,n)}const _I=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,NI=t=>e=>1-t(1-e),EI=w0(.33,1.53,.69,.99),pb=NI(EI),SI=_I(pb),kI=t=>(t*=2)<1?.5*pb(t):.5*(2-Math.pow(2,-10*(t-1))),gb=t=>1-Math.sin(Math.acos(t)),TI=NI(gb),jI=_I(gb),AI=t=>/^0[^.\s]+$/u.test(t);function xz(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||AI(t):!0}const af=t=>Math.round(t*1e5)/1e5,xb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function vz(t){return t==null}const yz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,vb=(t,e)=>r=>!!(typeof r=="string"&&yz.test(r)&&r.startsWith(t)||e&&!vz(r)&&Object.prototype.hasOwnProperty.call(r,e)),CI=(t,e,r)=>n=>{if(typeof n!="string")return n;const[s,i,o,l]=n.match(xb);return{[t]:parseFloat(s),[e]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},wz=t=>No(0,255,t),ky={...Zd,transform:t=>Math.round(wz(t))},wc={test:vb("rgb","red"),parse:CI("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+ky.transform(t)+", "+ky.transform(e)+", "+ky.transform(r)+", "+af(Lf.transform(n))+")"};function bz(t){let e="",r="",n="",s="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,r+=r,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const W1={test:vb("#"),parse:bz,transform:wc.transform},ed={test:vb("hsl","hue"),parse:CI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+Ii.transform(af(e))+", "+Ii.transform(af(r))+", "+af(Lf.transform(n))+")"},is={test:t=>wc.test(t)||W1.test(t)||ed.test(t),parse:t=>wc.test(t)?wc.parse(t):ed.test(t)?ed.parse(t):W1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?wc.transform(t):ed.transform(t)},_z=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Nz(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(xb))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(_z))===null||r===void 0?void 0:r.length)||0)>0}const II="number",PI="color",Ez="var",Sz="var(",Vk="${}",kz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Mf(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const l=e.replace(kz,u=>(is.test(u)?(n.color.push(i),s.push(PI),r.push(is.parse(u))):u.startsWith(Sz)?(n.var.push(i),s.push(Ez),r.push(u)):(n.number.push(i),s.push(II),r.push(parseFloat(u))),++i,Vk)).split(Vk);return{values:r,split:l,indexes:n,types:s}}function RI(t){return Mf(t).values}function DI(t){const{split:e,types:r}=Mf(t),n=e.length;return s=>{let i="";for(let o=0;o<n;o++)if(i+=e[o],s[o]!==void 0){const l=r[o];l===II?i+=af(s[o]):l===PI?i+=is.transform(s[o]):i+=s[o]}return i}}const Tz=t=>typeof t=="number"?0:t;function jz(t){const e=RI(t);return DI(t)(e.map(Tz))}const Il={test:Nz,parse:RI,createTransformer:DI,getAnimatableNone:jz},Az=new Set(["brightness","contrast","saturate","opacity"]);function Cz(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(xb)||[];if(!n)return t;const s=r.replace(n,"");let i=Az.has(e)?1:0;return n!==r&&(i*=100),e+"("+i+s+")"}const Iz=/\b([a-z-]*)\(.*?\)/gu,q1={...Il,getAnimatableNone:t=>{const e=t.match(Iz);return e?e.map(Cz).join(" "):t}},Pz={...rb,color:is,backgroundColor:is,outlineColor:is,fill:is,stroke:is,borderColor:is,borderTopColor:is,borderRightColor:is,borderBottomColor:is,borderLeftColor:is,filter:q1,WebkitFilter:q1},yb=t=>Pz[t];function FI(t,e){let r=yb(t);return r!==q1&&(r=Il),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const Rz=new Set(["auto","none","0"]);function Dz(t,e,r){let n=0,s;for(;n<t.length&&!s;){const i=t[n];typeof i=="string"&&!Rz.has(i)&&Mf(i).values.length&&(s=t[n]),n++}if(s&&r)for(const i of e)t[i]=FI(r,s)}const Bk=t=>t===Zd||t===Tt,Uk=(t,e)=>parseFloat(t.split(", ")[e]),zk=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/u);if(s)return Uk(s[1],e);{const i=n.match(/^matrix\((.+)\)$/u);return i?Uk(i[1],t):0}},Fz=new Set(["x","y","z"]),Lz=Jd.filter(t=>!Fz.has(t));function Oz(t){const e=[];return Lz.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const Cd={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:zk(4,13),y:zk(5,14)};Cd.translateX=Cd.x;Cd.translateY=Cd.y;const Ec=new Set;let G1=!1,K1=!1;function LI(){if(K1){const t=Array.from(Ec).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const s=Oz(n);s.length&&(r.set(n,s),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,o])=>{var l;(l=n.getValue(i))===null||l===void 0||l.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}K1=!1,G1=!1,Ec.forEach(t=>t.complete()),Ec.clear()}function OI(){Ec.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(K1=!0)})}function Mz(){OI(),LI()}class wb{constructor(e,r,n,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ec.add(this),G1||(G1=!0,Ir.read(OI),Ir.resolveKeyframes(LI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&r){const u=n.readValue(r,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ec.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ec.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const MI=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Vz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Bz(t){const e=Vz.exec(t);if(!e)return[,];const[,r,n,s]=e;return[`--${r??n}`,s]}function VI(t,e,r=1){const[n,s]=Bz(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return MI(o)?parseFloat(o):o}return tb(s)?VI(s,e,r+1):s}const BI=t=>e=>e.test(t),Uz={test:t=>t==="auto",parse:t=>t},UI=[Zd,Tt,Ii,il,CU,AU,Uz],$k=t=>UI.find(BI(t));class zI extends wb{constructor(e,r,n,s,i){super(e,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),tb(h))){const f=VI(h,r.current);f!==void 0&&(e[u]=f),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!vI.has(n)||e.length!==2)return;const[s,i]=e,o=$k(s),l=$k(i);if(o!==l)if(Bk(o)&&Bk(l))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let s=0;s<e.length;s++)xz(e[s])&&n.push(s);n.length&&Dz(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Cd[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){var e;const{element:r,name:n,unresolvedKeyframes:s}=this;if(!r||!r.current)return;const i=r.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,l=s[o];s[o]=Cd[n](r.measureViewportBox(),window.getComputedStyle(r.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,h])=>{r.getValue(u).set(h)}),this.resolveNoneKeyframes()}}const Hk=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Il.test(t)||t==="0")&&!t.startsWith("url("));function zz(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function $z(t,e,r,n){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=Hk(s,e),l=Hk(i,e);return!o||!l?!1:zz(t)||(r==="spring"||cb(r))&&n}const Hz=t=>t!==null;function _x(t,{repeat:e,repeatType:r="loop"},n){const s=t.filter(Hz),i=e&&r!=="loop"&&e%2===1?0:s.length-1;return!i||n===void 0?s[i]:n}const Wz=40;class $I{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Pi.now(),this.options={autoplay:e,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Wz?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Mz(),this._resolved}onKeyframesResolved(e,r){this.resolvedAt=Pi.now(),this.hasAttemptedResolve=!0;const{name:n,type:s,velocity:i,delay:o,onComplete:l,onUpdate:u,isGenerator:h}=this.options;if(!h&&!$z(e,n,s,i))if(o)this.options.duration=0;else{u&&u(_x(e,this.options,r)),l&&l(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,r);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:r,...f},this.onPostResolved())}onPostResolved(){}then(e,r){return this.currentFinishedPromise.then(e,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Ur=(t,e,r)=>t+(e-t)*r;function Ty(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function qz({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let s=0,i=0,o=0;if(!e)s=i=o=r;else{const l=r<.5?r*(1+e):r+e-r*e,u=2*r-l;s=Ty(u,l,t+1/3),i=Ty(u,l,t),o=Ty(u,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function lg(t,e){return r=>r>0?e:t}const jy=(t,e,r)=>{const n=t*t,s=r*(e*e-n)+n;return s<0?0:Math.sqrt(s)},Gz=[W1,wc,ed],Kz=t=>Gz.find(e=>e.test(t));function Wk(t){const e=Kz(t);if(!e)return!1;let r=e.parse(t);return e===ed&&(r=qz(r)),r}const qk=(t,e)=>{const r=Wk(t),n=Wk(e);if(!r||!n)return lg(t,e);const s={...r};return i=>(s.red=jy(r.red,n.red,i),s.green=jy(r.green,n.green,i),s.blue=jy(r.blue,n.blue,i),s.alpha=Ur(r.alpha,n.alpha,i),wc.transform(s))},Xz=(t,e)=>r=>e(t(r)),b0=(...t)=>t.reduce(Xz),X1=new Set(["none","hidden"]);function Yz(t,e){return X1.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function Qz(t,e){return r=>Ur(t,e,r)}function bb(t){return typeof t=="number"?Qz:typeof t=="string"?tb(t)?lg:is.test(t)?qk:e$:Array.isArray(t)?HI:typeof t=="object"?is.test(t)?qk:Jz:lg}function HI(t,e){const r=[...t],n=r.length,s=t.map((i,o)=>bb(i)(i,e[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}}function Jz(t,e){const r={...t,...e},n={};for(const s in r)t[s]!==void 0&&e[s]!==void 0&&(n[s]=bb(t[s])(t[s],e[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function Zz(t,e){var r;const n=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],l=t.indexes[o][s[o]],u=(r=t.values[l])!==null&&r!==void 0?r:0;n[i]=u,s[o]++}return n}const e$=(t,e)=>{const r=Il.createTransformer(e),n=Mf(t),s=Mf(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?X1.has(t)&&!s.values.length||X1.has(e)&&!n.values.length?Yz(t,e):b0(HI(Zz(n,s),s.values),r):lg(t,e)};function WI(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?Ur(t,e,r):bb(t)(t,e)}const t$=5;function qI(t,e,r){const n=Math.max(e-t$,0);return yI(r-t(n),e-n)}const Yr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ay=.001;function r$({duration:t=Yr.duration,bounce:e=Yr.bounce,velocity:r=Yr.velocity,mass:n=Yr.mass}){let s,i,o=1-e;o=No(Yr.minDamping,Yr.maxDamping,o),t=No(Yr.minDuration,Yr.maxDuration,co(t)),o<1?(s=h=>{const f=h*o,p=f*t,g=f-r,y=Y1(h,o),w=Math.exp(-p);return Ay-g/y*w},i=h=>{const p=h*o*t,g=p*r+r,y=Math.pow(o,2)*Math.pow(h,2)*t,w=Math.exp(-p),b=Y1(Math.pow(h,2),o);return(-s(h)+Ay>0?-1:1)*((g-y)*w)/b}):(s=h=>{const f=Math.exp(-h*t),p=(h-r)*t+1;return-Ay+f*p},i=h=>{const f=Math.exp(-h*t),p=(r-h)*(t*t);return f*p});const l=5/t,u=s$(s,i,l);if(t=lo(t),isNaN(u))return{stiffness:Yr.stiffness,damping:Yr.damping,duration:t};{const h=Math.pow(u,2)*n;return{stiffness:h,damping:o*2*Math.sqrt(n*h),duration:t}}}const n$=12;function s$(t,e,r){let n=r;for(let s=1;s<n$;s++)n=n-t(n)/e(n);return n}function Y1(t,e){return t*Math.sqrt(1-e*e)}const a$=["duration","bounce"],i$=["stiffness","damping","mass"];function Gk(t,e){return e.some(r=>t[r]!==void 0)}function o$(t){let e={velocity:Yr.velocity,stiffness:Yr.stiffness,damping:Yr.damping,mass:Yr.mass,isResolvedFromDuration:!1,...t};if(!Gk(t,i$)&&Gk(t,a$))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*No(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Yr.mass,stiffness:s,damping:i}}else{const r=r$(t);e={...e,...r,mass:Yr.mass},e.isResolvedFromDuration=!0}return e}function GI(t=Yr.visualDuration,e=Yr.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:u,damping:h,mass:f,duration:p,velocity:g,isResolvedFromDuration:y}=o$({...r,velocity:-co(r.velocity||0)}),w=g||0,b=h/(2*Math.sqrt(u*f)),_=o-i,P=co(Math.sqrt(u/f)),A=Math.abs(_)<5;n||(n=A?Yr.restSpeed.granular:Yr.restSpeed.default),s||(s=A?Yr.restDelta.granular:Yr.restDelta.default);let k;if(b<1){const L=Y1(P,b);k=I=>{const N=Math.exp(-b*P*I);return o-N*((w+b*P*_)/L*Math.sin(L*I)+_*Math.cos(L*I))}}else if(b===1)k=L=>o-Math.exp(-P*L)*(_+(w+P*_)*L);else{const L=P*Math.sqrt(b*b-1);k=I=>{const N=Math.exp(-b*P*I),T=Math.min(L*I,300);return o-N*((w+b*P*_)*Math.sinh(T)+L*_*Math.cosh(T))/L}}const F={calculatedDuration:y&&p||null,next:L=>{const I=k(L);if(y)l.done=L>=p;else{let N=0;b<1&&(N=L===0?lo(w):qI(k,L,I));const T=Math.abs(N)<=n,R=Math.abs(o-I)<=s;l.done=T&&R}return l.value=l.done?o:I,l},toString:()=>{const L=Math.min(dI(F),z1),I=hI(N=>F.next(L*N).value,L,30);return L+"ms "+I}};return F}function Kk({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:u,restDelta:h=.5,restSpeed:f}){const p=t[0],g={done:!1,value:p},y=T=>l!==void 0&&T<l||u!==void 0&&T>u,w=T=>l===void 0?u:u===void 0||Math.abs(l-T)<Math.abs(u-T)?l:u;let b=r*e;const _=p+b,P=o===void 0?_:o(_);P!==_&&(b=P-p);const A=T=>-b*Math.exp(-T/n),k=T=>P+A(T),F=T=>{const R=A(T),B=k(T);g.done=Math.abs(R)<=h,g.value=g.done?P:B};let L,I;const N=T=>{y(g.value)&&(L=T,I=GI({keyframes:[g.value,w(g.value)],velocity:qI(k,T,g.value),damping:s,stiffness:i,restDelta:h,restSpeed:f}))};return N(0),{calculatedDuration:null,next:T=>{let R=!1;return!I&&L===void 0&&(R=!0,F(T),N(T)),L!==void 0&&T>=L?I.next(T-L):(!R&&F(T),g)}}}const l$=w0(.42,0,1,1),c$=w0(0,0,.58,1),KI=w0(.42,0,.58,1),u$=t=>Array.isArray(t)&&typeof t[0]!="number",d$={linear:ha,easeIn:l$,easeInOut:KI,easeOut:c$,circIn:gb,circInOut:jI,circOut:TI,backIn:pb,backInOut:SI,backOut:EI,anticipate:kI},Xk=t=>{if(ub(t)){W3(t.length===4);const[e,r,n,s]=t;return w0(e,r,n,s)}else if(typeof t=="string")return d$[t];return t};function h$(t,e,r){const n=[],s=r||WI,i=t.length-1;for(let o=0;o<i;o++){let l=s(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||ha:e;l=b0(u,l)}n.push(l)}return n}function f$(t,e,{clamp:r=!0,ease:n,mixer:s}={}){const i=t.length;if(W3(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=h$(e,n,s),u=l.length,h=f=>{if(o&&f<t[0])return e[0];let p=0;if(u>1)for(;p<t.length-2&&!(f<t[p+1]);p++);const g=jd(t[p],t[p+1],f);return l[p](g)};return r?f=>h(No(t[0],t[i-1],f)):h}function m$(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const s=jd(0,e,n);t.push(Ur(r,1,s))}}function p$(t){const e=[0];return m$(e,t.length-1),e}function g$(t,e){return t.map(r=>r*e)}function x$(t,e){return t.map(()=>e||KI).splice(0,t.length-1)}function cg({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const s=u$(n)?n.map(Xk):Xk(n),i={done:!1,value:e[0]},o=g$(r&&r.length===e.length?r:p$(e),t),l=f$(o,e,{ease:Array.isArray(s)?s:x$(e,s)});return{calculatedDuration:t,next:u=>(i.value=l(u),i.done=u>=t,i)}}const v$=t=>{const e=({timestamp:r})=>t(r);return{start:()=>Ir.update(e,!0),stop:()=>Cl(e),now:()=>qn.isProcessing?qn.timestamp:Pi.now()}},y$={decay:Kk,inertia:Kk,tween:cg,keyframes:cg,spring:GI},w$=t=>t/100;class _b extends $I{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:r,motionValue:n,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||wb,l=(u,h)=>this.onKeyframesResolved(u,h);this.resolver=new o(i,l,r,n,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:r="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,l=cb(r)?r:y$[r]||cg;let u,h;l!==cg&&typeof e[0]!="number"&&(u=b0(w$,WI(e[0],e[1])),e=[0,100]);const f=l({...this.options,keyframes:e});i==="mirror"&&(h=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=dI(f));const{calculatedDuration:p}=f,g=p+s,y=g*(n+1)-s;return{generator:f,mirroredGenerator:h,mapPercentToKeyframes:u,calculatedDuration:p,resolvedDuration:g,totalDuration:y}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,r=!1){const{resolved:n}=this;if(!n){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:u,calculatedDuration:h,totalDuration:f,resolvedDuration:p}=n;if(this.startTime===null)return i.next(0);const{delay:g,repeat:y,repeatType:w,repeatDelay:b,onUpdate:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),r?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const P=this.currentTime-g*(this.speed>=0?1:-1),A=this.speed>=0?P<0:P>f;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let k=this.currentTime,F=i;if(y){const T=Math.min(this.currentTime,f)/p;let R=Math.floor(T),B=T%1;!B&&T>=1&&(B=1),B===1&&R--,R=Math.min(R,y+1),!!(R%2)&&(w==="reverse"?(B=1-B,b&&(B-=b/p)):w==="mirror"&&(F=o)),k=No(0,1,B)*p}const L=A?{done:!1,value:u[0]}:F.next(k);l&&(L.value=l(L.value));let{done:I}=L;!A&&h!==null&&(I=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return N&&s!==void 0&&(L.value=_x(u,this.options,s)),_&&_(L.value),N&&this.finish(),L}get duration(){const{resolved:e}=this;return e?co(e.calculatedDuration):0}get time(){return co(this.currentTime)}set time(e){e=lo(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=co(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=v$,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),r&&r();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const b$=new Set(["opacity","clipPath","filter","transform"]);function _$(t,e,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:l="easeInOut",times:u}={}){const h={[e]:r};u&&(h.offset=u);const f=mI(l,s);return Array.isArray(f)&&(h.easing=f),t.animate(h,{delay:n,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const N$=K2(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ug=10,E$=2e4;function S$(t){return cb(t.type)||t.type==="spring"||!fI(t.ease)}function k$(t,e){const r=new _b({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const s=[];let i=0;for(;!n.done&&i<E$;)n=r.sample(i),s.push(n.value),i+=ug;return{times:void 0,keyframes:s,duration:i-ug,ease:"linear"}}const XI={anticipate:kI,backInOut:SI,circInOut:jI};function T$(t){return t in XI}class Yk extends $I{constructor(e){super(e);const{name:r,motionValue:n,element:s,keyframes:i}=this.options;this.resolver=new zI(i,(o,l)=>this.onKeyframesResolved(o,l),r,n,s),this.resolver.scheduleResolve()}initPlayback(e,r){let{duration:n=300,times:s,ease:i,type:o,motionValue:l,name:u,startTime:h}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof i=="string"&&og()&&T$(i)&&(i=XI[i]),S$(this.options)){const{onComplete:p,onUpdate:g,motionValue:y,element:w,...b}=this.options,_=k$(e,b);e=_.keyframes,e.length===1&&(e[1]=e[0]),n=_.duration,s=_.times,i=_.ease,o="keyframes"}const f=_$(l.owner.current,u,e,{...this.options,duration:n,times:s,ease:i});return f.startTime=h??this.calcStartTime(),this.pendingTimeline?(Dk(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:p}=this.options;l.set(_x(e,this.options,r)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:n,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:r}=e;return co(r)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:r}=e;return co(r.currentTime||0)}set time(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=lo(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:r}=e;return r.playbackRate}set speed(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:r}=e;return r.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:r}=e;return r.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:r}=this;if(!r)return ha;const{animation:n}=r;Dk(n,e)}return ha}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:r,keyframes:n,duration:s,type:i,ease:o,times:l}=e;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:f,onComplete:p,element:g,...y}=this.options,w=new _b({...y,keyframes:n,duration:s,type:i,ease:o,times:l,isGenerator:!0}),b=lo(this.time);h.setWithVelocity(w.sample(b-ug).value,w.sample(b).value,ug)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:r,name:n,repeatDelay:s,repeatType:i,damping:o,type:l}=e;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=r.owner.getProps();return N$()&&n&&b$.has(n)&&!u&&!h&&!s&&i!=="mirror"&&o!==0&&l!=="inertia"}}const j$={type:"spring",stiffness:500,damping:25,restSpeed:10},A$=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),C$={type:"keyframes",duration:.8},I$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},P$=(t,{keyframes:e})=>e.length>2?C$:ru.has(t)?t.startsWith("scale")?A$(e[1]):j$:I$;function R$({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:u,elapsed:h,...f}){return!!Object.keys(f).length}const Nb=(t,e,r,n={},s,i)=>o=>{const l=lb(n,t)||{},u=l.delay||n.delay||0;let{elapsed:h=0}=n;h=h-lo(u);let f={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-h,onUpdate:g=>{e.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:s};R$(l)||(f={...f,...P$(t,f)}),f.duration&&(f.duration=lo(f.duration)),f.repeatDelay&&(f.repeatDelay=lo(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(p=!0)),p&&!i&&e.get()!==void 0){const g=_x(f.keyframes,l);if(g!==void 0)return Ir.update(()=>{f.onUpdate(g),f.onComplete()}),new JU([])}return!i&&Yk.supports(f)?new Yk(f):new _b(f)};function D$({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function YI(t,e,{delay:r=0,transitionOverride:n,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:l,...u}=e;n&&(o=n);const h=[],f=s&&t.animationState&&t.animationState.getState()[s];for(const p in u){const g=t.getValue(p,(i=t.latestValues[p])!==null&&i!==void 0?i:null),y=u[p];if(y===void 0||f&&D$(f,p))continue;const w={delay:r,...lb(o||{},p)};let b=!1;if(window.MotionHandoffAnimation){const P=wI(t);if(P){const A=window.MotionHandoffAnimation(P,p,Ir);A!==null&&(w.startTime=A,b=!0)}}H1(t,p),g.start(Nb(p,g,y,t.shouldReduceMotion&&vI.has(p)?{type:!1}:w,t,b));const _=g.animation;_&&h.push(_)}return l&&Promise.all(h).then(()=>{Ir.update(()=>{l&&hz(t,l)})}),h}function Q1(t,e,r={}){var n;const s=bx(t,e,r.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(i=r.transitionOverride);const o=s?()=>Promise.all(YI(t,s,r)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:g}=i;return F$(t,e,f+h,p,g,r)}:()=>Promise.resolve(),{when:u}=i;if(u){const[h,f]=u==="beforeChildren"?[o,l]:[l,o];return h().then(()=>f())}else return Promise.all([o(),l(r.delay)])}function F$(t,e,r=0,n=0,s=1,i){const o=[],l=(t.variantChildren.size-1)*n,u=s===1?(h=0)=>h*n:(h=0)=>l-h*n;return Array.from(t.variantChildren).sort(L$).forEach((h,f)=>{h.notify("AnimationStart",e),o.push(Q1(h,e,{...i,delay:r+u(f)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(o)}function L$(t,e){return t.sortNodePosition(e)}function O$(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(i=>Q1(t,i,r));n=Promise.all(s)}else if(typeof e=="string")n=Q1(t,e,r);else{const s=typeof e=="function"?bx(t,e,r.custom):e;n=Promise.all(YI(t,s,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}const M$=Y2.length;function QI(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?QI(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<M$;r++){const n=Y2[r],s=t.props[n];(Ff(s)||s===!1)&&(e[n]=s)}return e}const V$=[...X2].reverse(),B$=X2.length;function U$(t){return e=>Promise.all(e.map(({animation:r,options:n})=>O$(t,r,n)))}function z$(t){let e=U$(t),r=Qk(),n=!0;const s=u=>(h,f)=>{var p;const g=bx(t,f,u==="exit"?(p=t.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(g){const{transition:y,transitionEnd:w,...b}=g;h={...h,...b,...w}}return h};function i(u){e=u(t)}function o(u){const{props:h}=t,f=QI(t.parent)||{},p=[],g=new Set;let y={},w=1/0;for(let _=0;_<B$;_++){const P=V$[_],A=r[P],k=h[P]!==void 0?h[P]:f[P],F=Ff(k),L=P===u?A.isActive:null;L===!1&&(w=_);let I=k===f[P]&&k!==h[P]&&F;if(I&&n&&t.manuallyAnimateOnMount&&(I=!1),A.protectedKeys={...y},!A.isActive&&L===null||!k&&!A.prevProp||yx(k)||typeof k=="boolean")continue;const N=$$(A.prevProp,k);let T=N||P===u&&A.isActive&&!I&&F||_>w&&F,R=!1;const B=Array.isArray(k)?k:[k];let z=B.reduce(s(P),{});L===!1&&(z={});const{prevResolvedValues:O={}}=A,D={...O,...z},ie=H=>{T=!0,g.has(H)&&(R=!0,g.delete(H)),A.needsAnimating[H]=!0;const Q=t.getValue(H);Q&&(Q.liveStyle=!1)};for(const H in D){const Q=z[H],q=O[H];if(y.hasOwnProperty(H))continue;let ae=!1;U1(Q)&&U1(q)?ae=!uI(Q,q):ae=Q!==q,ae?Q!=null?ie(H):g.add(H):Q!==void 0&&g.has(H)?ie(H):A.protectedKeys[H]=!0}A.prevProp=k,A.prevResolvedValues=z,A.isActive&&(y={...y,...z}),n&&t.blockInitialAnimation&&(T=!1),T&&(!(I&&N)||R)&&p.push(...B.map(H=>({animation:H,options:{type:P}})))}if(g.size){const _={};g.forEach(P=>{const A=t.getBaseTarget(P),k=t.getValue(P);k&&(k.liveStyle=!0),_[P]=A??null}),p.push({animation:_})}let b=!!p.length;return n&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(b=!1),n=!1,b?e(p):Promise.resolve()}function l(u,h){var f;if(r[u].isActive===h)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(g=>{var y;return(y=g.animationState)===null||y===void 0?void 0:y.setActive(u,h)}),r[u].isActive=h;const p=o(u);for(const g in r)r[g].protectedKeys={};return p}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=Qk(),n=!0}}}function $$(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!uI(e,t):!1}function hc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Qk(){return{animate:hc(!0),whileInView:hc(),whileHover:hc(),whileTap:hc(),whileDrag:hc(),whileFocus:hc(),exit:hc()}}class zl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class H$ extends zl{constructor(e){super(e),e.animationState||(e.animationState=z$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();yx(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let W$=0;class q$ extends zl{constructor(){super(...arguments),this.id=W$++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);r&&!e&&s.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const G$={animation:{Feature:H$},exit:{Feature:q$}};function Vf(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function _0(t){return{point:{x:t.pageX,y:t.pageY}}}const K$=t=>e=>db(e)&&t(e,_0(e));function of(t,e,r,n){return Vf(t,e,K$(r),n)}const Jk=(t,e)=>Math.abs(t-e);function X$(t,e){const r=Jk(t.x,e.x),n=Jk(t.y,e.y);return Math.sqrt(r**2+n**2)}class JI{constructor(e,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Iy(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,y=X$(p.offset,{x:0,y:0})>=3;if(!g&&!y)return;const{point:w}=p,{timestamp:b}=qn;this.history.push({...w,timestamp:b});const{onStart:_,onMove:P}=this.handlers;g||(_&&_(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Cy(g,this.transformPagePoint),Ir.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:y,onSessionEnd:w,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Iy(p.type==="pointercancel"?this.lastMoveEventInfo:Cy(g,this.transformPagePoint),this.history);this.startEvent&&y&&y(p,_),w&&w(p,_)},!db(e))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const o=_0(e),l=Cy(o,this.transformPagePoint),{point:u}=l,{timestamp:h}=qn;this.history=[{...u,timestamp:h}];const{onSessionStart:f}=r;f&&f(e,Iy(l,this.history)),this.removeListeners=b0(of(this.contextWindow,"pointermove",this.handlePointerMove),of(this.contextWindow,"pointerup",this.handlePointerUp),of(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Cl(this.updatePoint)}}function Cy(t,e){return e?{point:e(t.point)}:t}function Zk(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Iy({point:t},e){return{point:t,delta:Zk(t,ZI(e)),offset:Zk(t,Y$(e)),velocity:Q$(e,.1)}}function Y$(t){return t[0]}function ZI(t){return t[t.length-1]}function Q$(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const s=ZI(t);for(;r>=0&&(n=t[r],!(s.timestamp-n.timestamp>lo(e)));)r--;if(!n)return{x:0,y:0};const i=co(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const e6=1e-4,J$=1-e6,Z$=1+e6,t6=.01,eH=0-t6,tH=0+t6;function fa(t){return t.max-t.min}function rH(t,e,r){return Math.abs(t-e)<=r}function eT(t,e,r,n=.5){t.origin=n,t.originPoint=Ur(e.min,e.max,t.origin),t.scale=fa(r)/fa(e),t.translate=Ur(r.min,r.max,t.origin)-t.originPoint,(t.scale>=J$&&t.scale<=Z$||isNaN(t.scale))&&(t.scale=1),(t.translate>=eH&&t.translate<=tH||isNaN(t.translate))&&(t.translate=0)}function lf(t,e,r,n){eT(t.x,e.x,r.x,n?n.originX:void 0),eT(t.y,e.y,r.y,n?n.originY:void 0)}function tT(t,e,r){t.min=r.min+e.min,t.max=t.min+fa(e)}function nH(t,e,r){tT(t.x,e.x,r.x),tT(t.y,e.y,r.y)}function rT(t,e,r){t.min=e.min-r.min,t.max=t.min+fa(e)}function cf(t,e,r){rT(t.x,e.x,r.x),rT(t.y,e.y,r.y)}function sH(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?Ur(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?Ur(r,t,n.max):Math.min(t,r)),t}function nT(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function aH(t,{top:e,left:r,bottom:n,right:s}){return{x:nT(t.x,r,s),y:nT(t.y,e,n)}}function sT(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function iH(t,e){return{x:sT(t.x,e.x),y:sT(t.y,e.y)}}function oH(t,e){let r=.5;const n=fa(t),s=fa(e);return s>n?r=jd(e.min,e.max-n,t.min):n>s&&(r=jd(t.min,t.max-s,e.min)),No(0,1,r)}function lH(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const J1=.35;function cH(t=J1){return t===!1?t=0:t===!0&&(t=J1),{x:aT(t,"left","right"),y:aT(t,"top","bottom")}}function aT(t,e,r){return{min:iT(t,e),max:iT(t,r)}}function iT(t,e){return typeof t=="number"?t:t[e]||0}const oT=()=>({translate:0,scale:1,origin:0,originPoint:0}),td=()=>({x:oT(),y:oT()}),lT=()=>({min:0,max:0}),sn=()=>({x:lT(),y:lT()});function Aa(t){return[t("x"),t("y")]}function r6({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function uH({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function dH(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Py(t){return t===void 0||t===1}function Z1({scale:t,scaleX:e,scaleY:r}){return!Py(t)||!Py(e)||!Py(r)}function mc(t){return Z1(t)||n6(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function n6(t){return cT(t.x)||cT(t.y)}function cT(t){return t&&t!=="0%"}function dg(t,e,r){const n=t-r,s=e*n;return r+s}function uT(t,e,r,n,s){return s!==void 0&&(t=dg(t,s,n)),dg(t,r,n)+e}function ew(t,e=0,r=1,n,s){t.min=uT(t.min,e,r,n,s),t.max=uT(t.max,e,r,n,s)}function s6(t,{x:e,y:r}){ew(t.x,e.translate,e.scale,e.originPoint),ew(t.y,r.translate,r.scale,r.originPoint)}const dT=.999999999999,hT=1.0000000000001;function hH(t,e,r,n=!1){const s=r.length;if(!s)return;e.x=e.y=1;let i,o;for(let l=0;l<s;l++){i=r[l],o=i.projectionDelta;const{visualElement:u}=i.options;u&&u.props.style&&u.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&nd(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,s6(t,o)),n&&mc(i.latestValues)&&nd(t,i.latestValues))}e.x<hT&&e.x>dT&&(e.x=1),e.y<hT&&e.y>dT&&(e.y=1)}function rd(t,e){t.min=t.min+e,t.max=t.max+e}function fT(t,e,r,n,s=.5){const i=Ur(t.min,t.max,s);ew(t,e,r,i,n)}function nd(t,e){fT(t.x,e.x,e.scaleX,e.scale,e.originX),fT(t.y,e.y,e.scaleY,e.scale,e.originY)}function a6(t,e){return r6(dH(t.getBoundingClientRect(),e))}function fH(t,e,r){const n=a6(t,r),{scroll:s}=e;return s&&(rd(n.x,s.offset.x),rd(n.y,s.offset.y)),n}const i6=({current:t})=>t?t.ownerDocument.defaultView:null,mH=new WeakMap;class pH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=sn(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(_0(f).point)},i=(f,p)=>{const{drag:g,dragPropagation:y,onDragStart:w}=this.getProps();if(g&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=oz(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Aa(_=>{let P=this.getAxisMotionValue(_).get()||0;if(Ii.test(P)){const{projection:A}=this.visualElement;if(A&&A.layout){const k=A.layout.layoutBox[_];k&&(P=fa(k)*(parseFloat(P)/100))}}this.originPoint[_]=P}),w&&Ir.postRender(()=>w(f,p)),H1(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(f,p)=>{const{dragPropagation:g,dragDirectionLock:y,onDirectionLock:w,onDrag:b}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:_}=p;if(y&&this.currentDirection===null){this.currentDirection=gH(_),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",p.point,_),this.updateAxis("y",p.point,_),this.visualElement.render(),b&&b(f,p)},l=(f,p)=>this.stop(f,p),u=()=>Aa(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new JI(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:i6(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Ir.postRender(()=>i(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:s}=this.getProps();if(!n||!ap(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=sH(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;r&&Zu(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=aH(s.layoutBox,r):this.constraints=!1,this.elastic=cH(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Aa(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=lH(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Zu(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=fH(n,s.root,this.visualElement.getTransformPagePoint());let o=iH(s.layout.layoutBox,i);if(r){const l=r(uH(o));this.hasMutatedConstraints=!!l,l&&(o=r6(l))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},h=Aa(f=>{if(!ap(f,r,this.currentDirection))return;let p=u&&u[f]||{};o&&(p={min:0,max:0});const g=s?200:1e6,y=s?40:1e7,w={type:"inertia",velocity:n?e[f]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...p};return this.startAxisValueAnimation(f,w)});return Promise.all(h).then(l)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return H1(this.visualElement,e),n.start(Nb(e,n,0,r,this.visualElement,!1))}stopAnimation(){Aa(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Aa(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Aa(r=>{const{drag:n}=this.getProps();if(!ap(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[r];i.set(e[r]-Ur(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Zu(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Aa(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();s[o]=oH({min:u,max:u},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Aa(o=>{if(!ap(o,e,null))return;const l=this.getAxisMotionValue(o),{min:u,max:h}=this.constraints[o];l.set(Ur(u,h,s[o]))})}addListeners(){if(!this.visualElement.current)return;mH.set(this.visualElement,this);const e=this.visualElement.current,r=of(e,"pointerdown",u=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(u)}),n=()=>{const{dragConstraints:u}=this.getProps();Zu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ir.read(n);const o=Vf(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(Aa(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=u[f].translate,p.set(p.get()+u[f].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=J1,dragMomentum:l=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function ap(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function gH(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class xH extends zl{constructor(e){super(e),this.removeGroupControls=ha,this.removeListeners=ha,this.controls=new pH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ha}unmount(){this.removeGroupControls(),this.removeListeners()}}const mT=t=>(e,r)=>{t&&Ir.postRender(()=>t(e,r))};class vH extends zl{constructor(){super(...arguments),this.removePointerDownListener=ha}onPointerDown(e){this.session=new JI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:i6(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:mT(e),onStart:mT(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&Ir.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=of(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Rp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Lh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Tt.test(t))t=parseFloat(t);else return t;const r=pT(t,e.target.x),n=pT(t,e.target.y);return`${r}% ${n}%`}},yH={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,s=Il.parse(t);if(s.length>5)return n;const i=Il.createTransformer(t),o=typeof s[0]!="number"?1:0,l=r.x.scale*e.x,u=r.y.scale*e.y;s[0+o]/=l,s[1+o]/=u;const h=Ur(l,u,.5);return typeof s[2+o]=="number"&&(s[2+o]/=h),typeof s[3+o]=="number"&&(s[3+o]/=h),i(s)}};class wH extends S.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=e;BU(bH),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Rp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Ir.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),J2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function o6(t){const[e,r]=$3(),n=S.useContext(H2);return a.jsx(wH,{...t,layoutGroup:n,switchLayoutGroup:S.useContext(Q3),isPresent:e,safeToRemove:r})}const bH={borderRadius:{...Lh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Lh,borderTopRightRadius:Lh,borderBottomLeftRadius:Lh,borderBottomRightRadius:Lh,boxShadow:yH};function _H(t,e,r){const n=ms(t)?t:Of(t);return n.start(Nb("",n,e,r)),n.animation}function NH(t){return t instanceof SVGElement&&t.tagName!=="svg"}const EH=(t,e)=>t.depth-e.depth;class SH{constructor(){this.children=[],this.isDirty=!1}add(e){hb(this.children,e),this.isDirty=!0}remove(e){fb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(EH),this.isDirty=!1,this.children.forEach(e)}}function kH(t,e){const r=Pi.now(),n=({timestamp:s})=>{const i=s-r;i>=e&&(Cl(n),t(i-e))};return Ir.read(n,!0),()=>Cl(n)}const l6=["TopLeft","TopRight","BottomLeft","BottomRight"],TH=l6.length,gT=t=>typeof t=="string"?parseFloat(t):t,xT=t=>typeof t=="number"||Tt.test(t);function jH(t,e,r,n,s,i){s?(t.opacity=Ur(0,r.opacity!==void 0?r.opacity:1,AH(n)),t.opacityExit=Ur(e.opacity!==void 0?e.opacity:1,0,CH(n))):i&&(t.opacity=Ur(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<TH;o++){const l=`border${l6[o]}Radius`;let u=vT(e,l),h=vT(r,l);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||xT(u)===xT(h)?(t[l]=Math.max(Ur(gT(u),gT(h),n),0),(Ii.test(h)||Ii.test(u))&&(t[l]+="%")):t[l]=h}(e.rotate||r.rotate)&&(t.rotate=Ur(e.rotate||0,r.rotate||0,n))}function vT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const AH=c6(0,.5,TI),CH=c6(.5,.95,ha);function c6(t,e,r){return n=>n<t?0:n>e?1:r(jd(t,e,n))}function yT(t,e){t.min=e.min,t.max=e.max}function Ea(t,e){yT(t.x,e.x),yT(t.y,e.y)}function wT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function bT(t,e,r,n,s){return t-=e,t=dg(t,1/r,n),s!==void 0&&(t=dg(t,1/s,n)),t}function IH(t,e=0,r=1,n=.5,s,i=t,o=t){if(Ii.test(e)&&(e=parseFloat(e),e=Ur(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Ur(i.min,i.max,n);t===i&&(l-=e),t.min=bT(t.min,e,r,l,s),t.max=bT(t.max,e,r,l,s)}function _T(t,e,[r,n,s],i,o){IH(t,e[r],e[n],e[s],e.scale,i,o)}const PH=["x","scaleX","originX"],RH=["y","scaleY","originY"];function NT(t,e,r,n){_T(t.x,e,PH,r?r.x:void 0,n?n.x:void 0),_T(t.y,e,RH,r?r.y:void 0,n?n.y:void 0)}function ET(t){return t.translate===0&&t.scale===1}function u6(t){return ET(t.x)&&ET(t.y)}function ST(t,e){return t.min===e.min&&t.max===e.max}function DH(t,e){return ST(t.x,e.x)&&ST(t.y,e.y)}function kT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function d6(t,e){return kT(t.x,e.x)&&kT(t.y,e.y)}function TT(t){return fa(t.x)/fa(t.y)}function jT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class FH{constructor(){this.members=[]}add(e){hb(this.members,e),e.scheduleRender()}remove(e){if(fb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(s=>e===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function LH(t,e,r){let n="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(r==null?void 0:r.z)||0;if((s||i||o)&&(n=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:h,rotate:f,rotateX:p,rotateY:g,skewX:y,skewY:w}=r;h&&(n=`perspective(${h}px) ${n}`),f&&(n+=`rotate(${f}deg) `),p&&(n+=`rotateX(${p}deg) `),g&&(n+=`rotateY(${g}deg) `),y&&(n+=`skewX(${y}deg) `),w&&(n+=`skewY(${w}deg) `)}const l=t.x.scale*e.x,u=t.y.scale*e.y;return(l!==1||u!==1)&&(n+=`scale(${l}, ${u})`),n||"none"}const pc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Gh=typeof window<"u"&&window.MotionDebug!==void 0,Ry=["","X","Y","Z"],OH={visibility:"hidden"},AT=1e3;let MH=0;function Dy(t,e,r,n){const{latestValues:s}=e;s[t]&&(r[t]=s[t],e.setStaticValue(t,0),n&&(n[t]=0))}function h6(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=wI(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",Ir,!(s||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&h6(n)}function f6({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},l=e==null?void 0:e()){this.id=MH++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Gh&&(pc.totalNodes=pc.resolvedTargetDeltas=pc.recalculatedProjection=0),this.nodes.forEach(UH),this.nodes.forEach(qH),this.nodes.forEach(GH),this.nodes.forEach(zH),Gh&&window.MotionDebug.record(pc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new SH)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new mb),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=NH(o),this.instance=o;const{layoutId:u,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(h||u)&&(this.isLayoutDirty=!0),t){let p;const g=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=kH(g,250),Rp.hasAnimatedSinceResize&&(Rp.hasAnimatedSinceResize=!1,this.nodes.forEach(IT))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeTargetChanged:y,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||f.getDefaultTransition()||JH,{onLayoutAnimationStart:_,onLayoutAnimationComplete:P}=f.getProps(),A=!this.targetLayout||!d6(this.targetLayout,w)||y,k=!g&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||g&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,k);const F={...lb(b,"layout"),onPlay:_,onComplete:P};(f.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else g||IT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Cl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(KH),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&h6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(CT);return}this.isUpdating||this.nodes.forEach(HH),this.isUpdating=!1,this.nodes.forEach(WH),this.nodes.forEach(VH),this.nodes.forEach(BH),this.clearAllSnapshots();const l=Pi.now();qn.delta=No(0,1e3/60,l-qn.timestamp),qn.timestamp=l,qn.isProcessing=!0,Ey.update.process(qn),Ey.preRender.process(qn),Ey.render.process(qn),qn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,J2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach($H),this.sharedNodes.forEach(XH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ir.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ir.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=sn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const u=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!u6(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;o&&(l||mc(this.latestValues)||f)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),ZH(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return sn();const u=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(eW))){const{scroll:f}=this.root;f&&(rd(u.x,f.offset.x),rd(u.y,f.offset.y))}return u}removeElementScroll(o){var l;const u=sn();if(Ea(u,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return u;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:p,options:g}=f;f!==this.root&&p&&g.layoutScroll&&(p.wasRoot&&Ea(u,o),rd(u.x,p.offset.x),rd(u.y,p.offset.y))}return u}applyTransform(o,l=!1){const u=sn();Ea(u,o);for(let h=0;h<this.path.length;h++){const f=this.path[h];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&nd(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),mc(f.latestValues)&&nd(u,f.latestValues)}return mc(this.latestValues)&&nd(u,this.latestValues),u}removeTransform(o){const l=sn();Ea(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!mc(h.latestValues))continue;Z1(h.latestValues)&&h.updateSnapshot();const f=sn(),p=h.measurePageBox();Ea(f,p),NT(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return mc(this.latestValues)&&NT(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(o||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=qn.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=sn(),this.relativeTargetOrigin=sn(),cf(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Ea(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=sn(),this.targetWithTransforms=sn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),nH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ea(this.target,this.layout.layoutBox),s6(this.target,this.targetDelta)):Ea(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=sn(),this.relativeTargetOrigin=sn(),cf(this.relativeTargetOrigin,this.target,y.target),Ea(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Gh&&pc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Z1(this.parent.latestValues)||n6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===qn.timestamp&&(h=!1),h)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;Ea(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;hH(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=sn());const{target:w}=l;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(wT(this.prevProjectionDelta.x,this.projectionDelta.x),wT(this.prevProjectionDelta.y,this.projectionDelta.y)),lf(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==y||!jT(this.projectionDelta.x,this.prevProjectionDelta.x)||!jT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),Gh&&pc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=td(),this.projectionDelta=td(),this.projectionDeltaWithTransform=td()}setAnimationOrigin(o,l=!1){const u=this.snapshot,h=u?u.latestValues:{},f={...this.latestValues},p=td();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=sn(),y=u?u.source:void 0,w=this.layout?this.layout.source:void 0,b=y!==w,_=this.getStack(),P=!_||_.members.length<=1,A=!!(b&&!P&&this.options.crossfade===!0&&!this.path.some(QH));this.animationProgress=0;let k;this.mixTargetDelta=F=>{const L=F/1e3;PT(p.x,o.x,L),PT(p.y,o.y,L),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cf(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),YH(this.relativeTarget,this.relativeTargetOrigin,g,L),k&&DH(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=sn()),Ea(k,this.relativeTarget)),b&&(this.animationValues=f,jH(f,h,this.latestValues,L,A,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Cl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ir.update(()=>{Rp.hasAnimatedSinceResize=!0,this.currentAnimation=_H(0,AT,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(AT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:h,latestValues:f}=o;if(!(!l||!u||!h)){if(this!==o&&this.layout&&h&&m6(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||sn();const p=fa(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const g=fa(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+g}Ea(l,u),nd(l,f),lf(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new FH),this.sharedNodes.get(o).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const h={};u.z&&Dy("z",o,h,this.animationValues);for(let f=0;f<Ry.length;f++)Dy(`rotate${Ry[f]}`,o,h,this.animationValues),Dy(`skew${Ry[f]}`,o,h,this.animationValues);o.render();for(const f in h)o.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);o.scheduleRender()}getProjectionStyles(o){var l,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return OH;const h={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Ip(o==null?void 0:o.pointerEvents)||"",h.transform=f?f(this.latestValues,""):"none",h;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Ip(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!mc(this.latestValues)&&(b.transform=f?f({},""):"none",this.hasProjected=!1),b}const g=p.animationValues||p.latestValues;this.applyTransformsToTarget(),h.transform=LH(this.projectionDeltaWithTransform,this.treeScale,g),f&&(h.transform=f(g,h.transform));const{x:y,y:w}=this.projectionDelta;h.transformOrigin=`${y.origin*100}% ${w.origin*100}% 0`,p.animationValues?h.opacity=p===this?(u=(l=g.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:h.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const b in ig){if(g[b]===void 0)continue;const{correct:_,applyTo:P}=ig[b],A=h.transform==="none"?g[b]:_(g[b],p);if(P){const k=P.length;for(let F=0;F<k;F++)h[P[F]]=A}else h[b]=A}return this.options.layoutId&&(h.pointerEvents=p===this?Ip(o==null?void 0:o.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(CT),this.root.sharedNodes.clear()}}}function VH(t){t.updateLayout()}function BH(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:i}=t.options,o=r.source!==t.layout.source;i==="size"?Aa(p=>{const g=o?r.measuredBox[p]:r.layoutBox[p],y=fa(g);g.min=n[p].min,g.max=g.min+y}):m6(i,r.layoutBox,n)&&Aa(p=>{const g=o?r.measuredBox[p]:r.layoutBox[p],y=fa(n[p]);g.max=g.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+y)});const l=td();lf(l,n,r.layoutBox);const u=td();o?lf(u,t.applyTransform(s,!0),r.measuredBox):lf(u,n,r.layoutBox);const h=!u6(l);let f=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:y}=p;if(g&&y){const w=sn();cf(w,r.layoutBox,g.layoutBox);const b=sn();cf(b,n,y.layoutBox),d6(w,b)||(f=!0),p.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=w,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:u,layoutDelta:l,hasLayoutChanged:h,hasRelativeTargetChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function UH(t){Gh&&pc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function zH(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function $H(t){t.clearSnapshot()}function CT(t){t.clearMeasurements()}function HH(t){t.isLayoutDirty=!1}function WH(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function IT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function qH(t){t.resolveTargetDelta()}function GH(t){t.calcProjection()}function KH(t){t.resetSkewAndRotation()}function XH(t){t.removeLeadSnapshot()}function PT(t,e,r){t.translate=Ur(e.translate,0,r),t.scale=Ur(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function RT(t,e,r,n){t.min=Ur(e.min,r.min,n),t.max=Ur(e.max,r.max,n)}function YH(t,e,r,n){RT(t.x,e.x,r.x,n),RT(t.y,e.y,r.y,n)}function QH(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const JH={duration:.45,ease:[.4,0,.1,1]},DT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),FT=DT("applewebkit/")&&!DT("chrome/")?Math.round:ha;function LT(t){t.min=FT(t.min),t.max=FT(t.max)}function ZH(t){LT(t.x),LT(t.y)}function m6(t,e,r){return t==="position"||t==="preserve-aspect"&&!rH(TT(e),TT(r),.2)}function eW(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const tW=f6({attachResizeListener:(t,e)=>Vf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Fy={current:void 0},p6=f6({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Fy.current){const t=new tW({});t.mount(window),t.setOptions({layoutScroll:!0}),Fy.current=t}return Fy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),rW={pan:{Feature:vH},drag:{Feature:xH,ProjectionNode:p6,MeasureLayout:o6}};function OT(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&Ir.postRender(()=>i(e,_0(e)))}class nW extends zl{mount(){const{current:e}=this.node;e&&(this.unmount=rz(e,r=>(OT(this.node,r,"Start"),n=>OT(this.node,n,"End"))))}unmount(){}}class sW extends zl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=b0(Vf(this.node.current,"focus",()=>this.onFocus()),Vf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function MT(t,e,r){const{props:n}=t;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&Ir.postRender(()=>i(e,_0(e)))}class aW extends zl{mount(){const{current:e}=this.node;e&&(this.unmount=iz(e,r=>(MT(this.node,r,"Start"),(n,{success:s})=>MT(this.node,n,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const tw=new WeakMap,Ly=new WeakMap,iW=t=>{const e=tw.get(t.target);e&&e(t)},oW=t=>{t.forEach(iW)};function lW({root:t,...e}){const r=t||document;Ly.has(r)||Ly.set(r,{});const n=Ly.get(r),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(oW,{root:t,...e})),n[s]}function cW(t,e,r){const n=lW(e);return tw.set(t,r),n.observe(t),()=>{tw.delete(t),n.unobserve(t)}}const uW={some:0,all:1};class dW extends zl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:uW[s]},l=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),g=h?f:p;g&&g(u)};return cW(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(hW(e,r))&&this.startObserver()}unmount(){}}function hW({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const fW={inView:{Feature:dW},tap:{Feature:aW},focus:{Feature:sW},hover:{Feature:nW}},mW={layout:{ProjectionNode:p6,MeasureLayout:o6}},rw={current:null},g6={current:!1};function pW(){if(g6.current=!0,!!G2)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>rw.current=t.matches;t.addListener(e),e()}else rw.current=!1}const gW=[...UI,is,Il],xW=t=>gW.find(BI(t)),VT=new WeakMap;function vW(t,e,r){for(const n in e){const s=e[n],i=r[n];if(ms(s))t.addValue(n,s);else if(ms(i))t.addValue(n,Of(s,{owner:t}));else if(i!==s)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(n);t.addValue(n,Of(o!==void 0?o:s,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const BT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yW{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Pi.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Ir.render(this.render,!1,!0))};const{latestValues:u,renderState:h,onUpdate:f}=o;this.onUpdate=f,this.latestValues=u,this.baseTarget={...u},this.initialValues=r.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=wx(r),this.isVariantNode=X3(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(r,{},this);for(const y in g){const w=g[y];u[y]!==void 0&&ms(w)&&w.set(u[y],!1)}}mount(e){this.current=e,VT.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),g6.current||pW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:rw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){VT.delete(this.current),this.projection&&this.projection.unmount(),Cl(this.notifyUpdate),Cl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=ru.has(e),s=r.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Ir.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ad){const r=Ad[e];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):sn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<BT.length;n++){const s=BT[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=vW(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Of(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){var n;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(MI(s)||AI(s))?s=parseFloat(s):!xW(s)&&Il.test(r)&&(s=FI(e,r)),this.setBaseTarget(e,ms(s)?s.get():s)),ms(s)?s.get():s}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const o=eb(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(s=o[e])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ms(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new mb),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class x6 extends yW{constructor(){super(...arguments),this.KeyframeResolver=zI}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ms(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function wW(t){return window.getComputedStyle(t)}class bW extends x6{constructor(){super(...arguments),this.type="html",this.renderInstance=sI}readValueFromInstance(e,r){if(ru.has(r)){const n=yb(r);return n&&n.default||0}else{const n=wW(e),s=(tI(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:r}){return a6(e,r)}build(e,r,n){nb(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return ob(e,r,n)}}class _W extends x6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=sn}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(ru.has(r)){const n=yb(r);return n&&n.default||0}return r=aI.has(r)?r:Q2(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return lI(e,r,n)}build(e,r,n){sb(e,r,this.isSVGTag,n.transformTemplate)}renderInstance(e,r,n,s){iI(e,r,n,s)}mount(e){this.isSVGTag=ib(e.tagName),super.mount(e)}}const NW=(t,e)=>Z2(t)?new _W(e):new bW(e,{allowProjection:t!==S.Fragment}),EW=XU({...G$,...fW,...rW,...mW},NW),Ke=uU(EW),ws=()=>{var e,r,n,s,i,o,l,u,h,f,p;const t=La();return{...t,isAuthenticated:!!t.currentUser,displayName:((e=t.userProfile)==null?void 0:e.displayName)||((r=t.currentUser)==null?void 0:r.displayName),email:((n=t.userProfile)==null?void 0:n.email)||((s=t.currentUser)==null?void 0:s.email),role:((i=t.userProfile)==null?void 0:i.role)||"student",progress:((o=t.userProfile)==null?void 0:o.progress)||{},completedLessons:((l=t.userProfile)==null?void 0:l.completedLessons)||[],currentLesson:((u=t.userProfile)==null?void 0:u.currentLesson)||1,totalTimeSpent:((h=t.userProfile)==null?void 0:h.totalTimeSpent)||0,totalPagesEngaged:((f=t.userProfile)==null?void 0:f.totalPagesEngaged)||0,achievements:((p=t.userProfile)==null?void 0:p.achievements)||[]}},Eb=()=>{const{currentUser:t,userProfile:e}=La();return t?{uid:(t==null?void 0:t.uid)||(e==null?void 0:e.uid)||null,displayName:(e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||"",email:(e==null?void 0:e.email)||(t==null?void 0:t.email)||"",role:(e==null?void 0:e.role)||"student",progress:(e==null?void 0:e.progress)||{},completedLessons:(e==null?void 0:e.completedLessons)||[],currentLesson:(e==null?void 0:e.currentLesson)||1,totalTimeSpent:(e==null?void 0:e.totalTimeSpent)||0,totalPagesEngaged:(e==null?void 0:e.totalPagesEngaged)||0,achievements:(e==null?void 0:e.achievements)||[]}:{displayName:null,email:null,role:null,progress:{},completedLessons:[],currentLesson:1,totalTimeSpent:0,totalPagesEngaged:0,achievements:[]}},hg="/Israel-cyber-academy/assets/cyber-logo-sfA0eDTq.png",sl={container:{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.4,staggerChildren:.05}}},item:{hidden:{opacity:0,y:15},visible:{opacity:1,y:0,transition:{duration:.3}}},logo:{hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1,transition:{duration:.5,ease:"easeOut"}}}},UT={row1:[{icon:Cr,number:"5,000+",label:" ",color:"from-emerald-500 to-teal-600"},{icon:j3,number:"50+",label:" ",color:"from-purple-500 to-indigo-600"},{icon:Pf,number:"100%",label:" ",color:"from-orange-500 to-red-600"},{icon:Vc,number:"24/7",label:" ",color:"from-cyan-500 to-blue-600"},{icon:Td,text:" ",color:"from-yellow-500 to-amber-600"},{icon:Qd,text:" ",color:"from-green-500 to-emerald-600"}],row2:[{icon:Rf,text:" ",color:"from-blue-500 to-indigo-600"},{icon:A2,text:"AI ",color:"from-pink-500 to-rose-600"},{icon:px,text:" 4.9/5",color:"from-yellow-400 to-orange-500"},{icon:gx,text:"95% ",color:"from-lime-500 to-green-600"},{icon:Al,text:" 24/7",color:"from-violet-500 to-purple-600"},{icon:D2,text:" ",color:"from-sky-500 to-blue-500"}]},SW={student:{icon:Df,title:"",description:"       .      !",buttonText:" "},teacher:{icon:U2,title:"",description:"    .  ,       .",buttonText:" "},system_manager:{icon:Qn,title:" ",description:"   ,  .    .",buttonText:" "}},kW=()=>{const t=S.useRef(null);return S.useEffect(()=>{const e=t.current;if(!e)return;const r=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight;const s="01".split(""),i=18,o=e.width/i,l=new Array(Math.floor(o)).fill(1),u=Math.min(o,35),h=(y,w)=>{const b=r.createLinearGradient(y,w,y,w+i);return b.addColorStop(0,"#00ff41"),b.addColorStop(.5,"#3B82F6"),b.addColorStop(1,"#1e40af"),b},p=setInterval(()=>{r.fillStyle="rgba(0, 0, 0, 0.08)",r.fillRect(0,0,e.width,e.height);for(let y=0;y<u;y++){const w=s[Math.floor(Math.random()*s.length)],b=y*i,_=l[y]*i;r.fillStyle=h(b,_),r.font=`bold ${i}px 'Courier New', monospace`,r.fillText(w,b,_),Math.random()>.95&&(r.shadowColor="#00ff41",r.shadowBlur=5,r.fillText(w,b,_),r.shadowBlur=0),l[y]*i>e.height&&Math.random()>.99&&(l[y]=0),l[y]++}},100),g=()=>{e.width=window.innerWidth,e.height=window.innerHeight};return window.addEventListener("resize",g),()=>{clearInterval(p),window.removeEventListener("resize",g)}},[]),a.jsx("canvas",{ref:t,className:"fixed inset-0 z-0 opacity-30",style:{pointerEvents:"none"}})},TW=()=>a.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none z-0",children:[a.jsx("div",{className:"absolute top-10 left-10 text-blue-300 opacity-10",children:a.jsx(hx,{size:24})}),a.jsx("div",{className:"absolute top-20 right-20 text-blue-400 opacity-10",children:a.jsx(D3,{size:28})}),a.jsx("div",{className:"absolute bottom-20 left-20 text-blue-300 opacity-10",children:a.jsx(Pf,{size:22})}),a.jsx("div",{className:"absolute bottom-10 right-10 text-blue-400 opacity-10",children:a.jsx(Vc,{size:26})}),a.jsx("div",{className:"absolute top-1/2 left-1/4 text-blue-300 opacity-10",children:a.jsx(C3,{size:24})}),a.jsx("div",{className:"absolute top-1/3 right-1/3 text-blue-400 opacity-10",children:a.jsx(D2,{size:30})})]}),jW=t=>t.includes("emerald")?"#10b981":t.includes("purple")?"#8b5cf6":t.includes("orange")?"#f97316":t.includes("cyan")?"#06b6d4":t.includes("yellow")?"#eab308":t.includes("green")?"#22c55e":t.includes("blue")?"#3b82f6":t.includes("pink")?"#ec4899":t.includes("lime")?"#84cc16":t.includes("violet")?"#8b5cf6":t.includes("sky")?"#0ea5e9":"#3b82f6",zT=S.memo(({item:t,index:e,variants:r})=>a.jsxs(Ke.div,{className:"relative overflow-hidden rounded-xl p-4 bg-slate-800/50 backdrop-blur-xl border-2 hover:bg-slate-800/70 transition-all duration-300",style:{borderColor:jW(t.color)},variants:r,children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 to-cyan-600 opacity-10"}),a.jsx("div",{className:"relative z-10 text-center",children:t.number?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${t.color} rounded-lg flex items-center justify-center mx-auto mb-3 shadow-lg`,children:a.jsx(t.icon,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:t.number}),a.jsx("div",{className:"text-xs text-gray-300",children:t.label})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${t.color} rounded-lg flex items-center justify-center mx-auto mb-3 shadow-lg`,children:a.jsx(t.icon,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-sm text-gray-300 font-medium",children:t.text})]})})]})),AW=({role:t,icon:e,title:r,description:n,buttonText:s,onClick:i,isSelected:o})=>{const u=(()=>{switch(t){case"student":return{gradient:"from-blue-500 to-cyan-600",hover:"hover:from-blue-400 hover:to-cyan-500",border:"border-blue-500/30",glow:"shadow-blue-500/25"};case"teacher":return{gradient:"from-green-500 to-emerald-600",hover:"hover:from-green-400 hover:to-emerald-500",border:"border-green-500/30",glow:"shadow-green-500/25"};case"system_manager":return{gradient:"from-purple-500 to-indigo-600",hover:"hover:from-purple-400 hover:to-indigo-500",border:"border-purple-500/30",glow:"shadow-purple-500/25"};default:return{gradient:"from-gray-500 to-gray-600",hover:"hover:from-gray-400 hover:to-gray-500",border:"border-gray-500/30",glow:"shadow-gray-500/25"}}})();return a.jsxs(Ke.div,{className:`relative overflow-hidden rounded-2xl p-8 cursor-pointer transition-all duration-300 border-2 ${o?"bg-slate-800/95 backdrop-blur-2xl shadow-xl":"bg-slate-800/50 backdrop-blur-xl hover:bg-slate-800/70"} ${u.border}`,whileHover:{scale:1.02},whileTap:{scale:.98},onClick:i,children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${u.gradient} opacity-5`}),a.jsxs("div",{className:"relative z-10 text-center",children:[a.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${u.gradient} rounded-xl flex items-center justify-center mx-auto mb-6 shadow-lg ${u.glow}`,children:a.jsx(e,{className:"w-8 h-8 text-white"})}),a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:r}),a.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-6",children:n}),a.jsx(Ke.button,{className:`w-full py-3 px-6 bg-gradient-to-r ${u.gradient} ${u.hover} text-white rounded-xl font-semibold text-sm transition-all duration-300 shadow-lg ${u.glow}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:s})]})]})},Oh=({label:t,type:e="text",name:r,value:n,onChange:s,error:i,placeholder:o,required:l=!1,min:u,max:h,options:f=null})=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:t}),f?a.jsx("select",{name:r,value:n,onChange:s,className:"w-full px-4 py-3 bg-slate-700/50 border-2 border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 text-sm backdrop-blur-sm",children:f.map(p=>a.jsx("option",{value:p.value,children:p.label},p.value))}):a.jsx("input",{type:e,name:r,value:n,onChange:s,min:u,max:h,required:l,className:`w-full px-4 py-3 bg-slate-700/50 border-2 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 transition-all duration-300 text-sm backdrop-blur-sm ${i?"border-red-500 focus:ring-red-500/20":"border-slate-600 focus:ring-blue-500/20 focus:border-blue-500"}`,placeholder:o}),i&&a.jsx("p",{className:"text-red-400 text-xs mt-2",children:i[0]})]}),CW=()=>{const{login:t,signup:e}=ws(),[r,n]=S.useState("student"),[s,i]=S.useState(!1),[o,l]=S.useState(!0),[u,h]=S.useState(!1),[f,p]=S.useState(!1),[g,y]=S.useState({}),[w,b]=S.useState({firstName:"",lastName:"",age:"",sex:"male",email:"",password:""}),_=k=>{const{name:F,value:L}=k.target;b(I=>({...I,[F]:L})),g[F]&&y(I=>({...I,[F]:null}))},P=async k=>{k.preventDefault(),console.log(" Login attempt started:",{email:w.email,isLogin:o,selectedRole:r}),p(!0),y({});try{if(!w.email||!w.password){y({email:w.email?null:["Email is required"],password:w.password?null:["Password is required"]}),p(!1);return}if(console.log(" Attempting authentication with:",{email:w.email,isLogin:o,selectedRole:r}),o){console.log(" Attempting login...");const F=await t(w.email,w.password);console.log(" Login successful:",F),sa.success(" !")}else{console.log(" Attempting signup...");const F=`${w.firstName} ${w.lastName}`,L=await e(w.email,w.password,F,r,w);console.log(" Signup successful:",L),sa.success(" !")}}catch(F){console.error(" Authentication error:",F),sa.error(F.message||" ")}finally{p(!1)}},A=k=>{n(k),i(!0)};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 relative overflow-hidden",children:[a.jsx(kW,{}),a.jsx(TW,{}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center opacity-25 pointer-events-none z-0",children:a.jsx("img",{src:hg,alt:"Background Logo",className:"w-[2800px] h-[2800px] object-contain drop-shadow-[0_0_80px_rgba(59,130,246,0.5)] animate-smooth-spin"})}),a.jsx("div",{className:"fixed inset-0 z-0 pointer-events-none",children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/30 via-blue-900/20 to-black/30 animate-gradient-move backdrop-blur-sm"})}),a.jsx(Ke.div,{className:"relative z-10 min-h-screen flex flex-col pt-8",variants:sl.container,initial:"hidden",animate:"visible",children:a.jsxs("section",{className:"flex-1 flex flex-col justify-center items-center px-6 py-16 mt-4",children:[a.jsx(Ke.div,{className:"text-center mb-6 z-10 relative -mt-[200px]",variants:sl.logo,children:a.jsx(Ke.div,{className:"pt-0 pb-1 flex items-center justify-center mx-auto relative",children:a.jsx(Ke.img,{src:hg,alt:"Logo",className:"w-[760px] h-[400px] object-contain animate-blink-glow",whileHover:{scale:1.05},transition:{duration:.3}})})}),a.jsx(Ke.div,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 mb-12 max-w-6xl mx-auto -mt-[100px]",variants:sl.item,children:UT.row1.map((k,F)=>a.jsx(zT,{item:k,index:F,variants:sl.item},F))}),a.jsx(Ke.div,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 mb-12 max-w-6xl mx-auto",variants:sl.item,children:UT.row2.map((k,F)=>a.jsx(zT,{item:k,index:F,variants:sl.item},F))}),a.jsx(Ke.div,{variants:sl.container,className:"grid grid-cols-1 lg:grid-cols-3 gap-6 w-full max-w-6xl mx-auto mb-16",children:Object.entries(SW).map(([k,F])=>a.jsx("div",{className:"flex justify-center",children:a.jsx(AW,{role:k,icon:F.icon,title:F.title,description:F.description,buttonText:F.buttonText,onClick:()=>A(k),isSelected:r===k})},k))}),r==="system_manager"&&a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:a.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 max-w-md mx-auto",children:a.jsxs("p",{className:"text-blue-300 text-sm",children:[a.jsx(Qn,{className:"w-4 h-4 inline mr-2"}),"   .    ."]})})}),a.jsx(vn,{children:s&&a.jsxs(Ke.div,{initial:{opacity:0,scale:.9,y:30},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:30},transition:{duration:.5,ease:"easeOut"},className:"bg-slate-800/95 backdrop-blur-2xl rounded-2xl p-8 shadow-xl border-2 border-blue-500/50 max-w-md w-full relative overflow-hidden",children:[a.jsx(Ke.div,{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-blue-600/5"}),a.jsxs("div",{className:"text-center mb-8 relative z-10",children:[a.jsx(Ke.button,{onClick:()=>i(!1),className:"text-gray-300 hover:text-white transition-colors mb-6 text-lg font-medium",whileHover:{scale:1.05},whileTap:{scale:.95},children:"   "}),a.jsx(Ke.h2,{className:"text-2xl font-bold text-white mb-4 text-center",initial:{opacity:0,y:-15},animate:{opacity:1,y:0},transition:{duration:.4},children:o?" !":" "})]}),a.jsxs("form",{onSubmit:P,className:"space-y-6 relative z-10",children:[!o&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Oh,{label:" ",name:"firstName",value:w.firstName,onChange:_,error:g.firstName,placeholder:" ",required:!0}),a.jsx(Oh,{label:" ",name:"lastName",value:w.lastName,onChange:_,error:g.lastName,placeholder:" ",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Oh,{label:"",type:"number",name:"age",value:w.age,onChange:_,error:g.age,placeholder:"",min:"1",max:"120",required:!0}),a.jsx(Oh,{label:"",name:"sex",value:w.sex,onChange:_,options:[{value:"male",label:""},{value:"female",label:""}]})]})]}),a.jsx(Oh,{label:"",type:"email",name:"email",value:w.email,onChange:_,error:g.email,placeholder:"   ",required:!0}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-200 mb-2",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:u?"text":"password",name:"password",value:w.password,onChange:_,className:`w-full px-4 py-3 pr-12 bg-slate-700/50 border-2 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 transition-all duration-300 text-sm backdrop-blur-sm ${g.password?"border-red-500 focus:ring-red-500/20":"border-slate-600 focus:ring-blue-500/20 focus:border-blue-500"}`,placeholder:"   ",required:!0}),a.jsx(Ke.button,{type:"button",onClick:()=>h(!u),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:u?a.jsx(I2,{className:"w-5 h-5"}):a.jsx(Da,{className:"w-5 h-5"})})]}),g.password&&a.jsx("p",{className:"text-red-400 text-xs mt-2",children:g.password[0]})]}),a.jsx(Ke.button,{type:"submit",disabled:f,className:"w-full py-4 px-8 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl font-semibold text-base hover:from-blue-500 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-blue-500/25",whileHover:{scale:1.02},whileTap:{scale:.98},children:f?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),o?"...":"..."]}):a.jsxs("div",{className:"flex items-center justify-center",children:[o?"":"",a.jsx(If,{className:"w-5 h-5 mr-2"})]})}),a.jsx("div",{className:"text-center",children:a.jsx("button",{type:"button",onClick:()=>l(!o),className:"text-gray-300 hover:text-white transition-colors text-sm font-medium",children:o?"  ?  ":"  ?  "})})]})]})}),a.jsx(Ke.footer,{className:"mt-16 mb-6 text-center",variants:sl.item,children:a.jsxs("div",{className:"bg-slate-800/40 backdrop-blur-xl rounded-xl p-5 border border-slate-700/50 max-w-2xl mx-auto",children:[a.jsx(Ke.div,{className:"text-gray-300 text-lg font-medium",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.6,duration:.4},children:"  "}),a.jsx(Ke.div,{className:"text-gray-400 text-sm mt-1",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.8,duration:.4},children:"Israel Cyber Campus - All Rights Reserved"})]})})]})})]})},Id=new Map,IW=5*60*1e3,PW=async t=>{try{const e=Ft(ze,"sessions"),r=await p0(e,{...t,status:"active",currentSlide:0,unlockedSlides:[0],startTime:Lt(),lastActivity:Lt(),connectedStudents:[],studentProgress:{},teacherNotes:{},isLocked:!1});return Wr("SESSION_CREATED",{sessionId:r.id,teacherId:t.teacherId,lessonId:t.lessonId}),r.id}catch(e){throw console.error("Error creating session:",e),new Error("Failed to create session")}},Sb=async t=>{try{const e=Id.get(t);if(e&&Date.now()-e.timestamp<IW)return console.log(" Using cached session data for:",t),e.data;const r=wt(ze,"sessions",t),n=await dr(r);if(!n.exists())throw new Error("Session not found");const s={id:n.id,...n.data()};return Id.set(t,{data:s,timestamp:Date.now()}),s}catch(e){throw console.error("Error getting session:",e),new Error("Failed to get session")}},uf=async(t,e)=>{try{const r=wt(ze,"sessions",t);await On(r,{currentSlide:e,lastActivity:Lt()});const n=Id.get(t);n&&(n.data.currentSlide=e,n.data.lastActivity=new Date)}catch(r){throw console.error("Error updating session slide:",r),new Error("Failed to update session slide")}},RW=async(t,e,r)=>{const n=wt(ze,"sessions",t);await On(n,{connectedStudents:h3({id:e,name:r}),lastActivity:Lt()});const s=await dr(n);if(s.exists()){const o=s.data().studentProgress||{};o[e]={...o[e]||{},joinedAt:Lt(),lastActivity:Lt(),currentSlide:0},await On(n,{studentProgress:o})}Wr("STUDENT_JOINED_SESSION",{sessionId:t,studentId:e,studentName:r,timestamp:new Date().toISOString()})},DW=async(t,e,r)=>{const n=wt(ze,"sessions",t);await On(n,{connectedStudents:f3({id:e,name:r}),lastActivity:Lt()}),Wr("STUDENT_LEFT_SESSION",{sessionId:t,studentId:e,timestamp:new Date().toISOString()})},Bf=async t=>{try{const e=wt(ze,"sessions",t);await On(e,{status:"ended",endTime:Lt(),lastActivity:Lt()}),Id.delete(t),Wr("SESSION_ENDED",{sessionId:t,timestamp:new Date().toISOString()})}catch(e){throw console.error("Error ending session:",e),new Error("Failed to end session")}},v6=async t=>{try{const e=Ft(ze,"sessions"),r=nr(e,yr("teacherId","==",t),yr("status","==","active")),n=await zt(r),s=[];return n.forEach(i=>{s.push({id:i.id,...i.data()})}),s.sort((i,o)=>{var h,f,p,g;const l=((f=(h=i.startTime)==null?void 0:h.toDate)==null?void 0:f.call(h))||i.startTime||new Date(0);return(((g=(p=o.startTime)==null?void 0:p.toDate)==null?void 0:g.call(p))||o.startTime||new Date(0))-l}),s}catch(e){throw console.error("Error getting teacher active sessions:",e),new Error("Failed to get active sessions")}},y6=async t=>{try{const e=Ft(ze,"sessions"),r=nr(e,yr("status","==","active"),yr("studentIds","array-contains",t)),n=await zt(r),s=[];return n.forEach(i=>{s.push({id:i.id,...i.data()})}),s.sort((i,o)=>{var h,f,p,g;const l=((f=(h=i.startTime)==null?void 0:h.toDate)==null?void 0:f.call(h))||i.startTime||new Date(0);return(((g=(p=o.startTime)==null?void 0:p.toDate)==null?void 0:g.call(p))||o.startTime||new Date(0))-l}),s}catch(e){throw console.error("Error getting student available sessions:",e),new Error("Failed to get available sessions")}},Nx=(t,e)=>{if(!t)return console.warn(" listenToSession called with null/undefined sessionId"),()=>{};const r=wt(ze,"sessions",t);return Kd(r,n=>{if(n.exists()){const s={id:n.id,...n.data()};Id.set(t,{data:s,timestamp:Date.now()});try{e(s)}catch(i){console.error("Error in session listener callback:",i)}}else Id.delete(t),e(null)},n=>{console.error("Error listening to session:",n)})},FW=async t=>{var e,r,n,s;try{const i=wt(ze,"sessions",t),o=await dr(i);if(!o.exists())return!1;const l=o.data(),u=((r=(e=l.lastActivity)==null?void 0:e.toDate)==null?void 0:r.call(e))||new Date(l.lastActivity),h=new Date,f=h.getTime()-u.getTime(),p=5*60*1e3,g=((s=(n=l.startTime)==null?void 0:n.toDate)==null?void 0:s.call(n))||new Date(l.startTime),y=h.getTime()-g.getTime(),w=4*60*60*1e3;return(f>p||y>w)&&l.status==="active"?(console.log(`Auto-ending stale session ${t}, inactive for ${f/1e3} seconds, duration: ${y/1e3/60} minutes`),await Bf(t),!0):!1}catch(i){return console.error("Error checking stale session:",i),!1}},LW=async t=>{try{const e=Ft(ze,"sessions"),r=nr(e,yr("teacherId","==",t),yr("status","==","active")),n=await zt(r);let s=0;for(const i of n.docs)await FW(i.id)&&s++;return console.log(`Cleaned up ${s} stale sessions for teacher ${t}`),s}catch(e){return console.error("Error cleaning up stale sessions:",e),0}},OW=(t,e)=>{const r=Ft(ze,"sessions"),n=nr(r,yr("status","==","active"),yr("studentIds","array-contains",t));return Kd(n,s=>{var l,u;let i=null;const o=[];if(s.forEach(h=>{o.push({id:h.id,...h.data()})}),o.length>0){o.sort((w,b)=>{var A,k,F,L;const _=((k=(A=w.startTime)==null?void 0:A.toDate)==null?void 0:k.call(A))||w.startTime||new Date(0);return(((L=(F=b.startTime)==null?void 0:F.toDate)==null?void 0:L.call(F))||b.startTime||new Date(0))-_});const h=o[0],f=((u=(l=h.lastActivity)==null?void 0:l.toDate)==null?void 0:u.call(l))||new Date(h.lastActivity),g=new Date().getTime()-f.getTime(),y=10*60*1e3;g<=y?i=h:console.log("Most recent session is stale, not showing notification")}e(i)},s=>{console.error("Error listening to current active session:",s)})},kb=({position:t="top-right"})=>{const e=Zn(),{currentUser:r,role:n}=ws(),[s,i]=S.useState([]),[o,l]=S.useState(!1),[u,h]=S.useState(!1);S.useEffect(()=>{if(!(r!=null&&r.uid))return;const y=async()=>{try{h(!0);let b=[];n==="teacher"?b=await v6(r.uid):n==="student"&&(b=await y6(r.uid)),i(b),l(b.length>0),h(!1)}catch(b){console.error("Error loading active sessions:",b),h(!1)}};y();const w=setInterval(y,3e4);return()=>clearInterval(w)},[r==null?void 0:r.uid,n]);const f=y=>{e(n==="teacher"?`/teacher/session/${y}`:`/student/session/${y}`)},p=()=>{switch(t){case"top-right":return"fixed top-4 right-4 z-50";case"top-left":return"fixed top-4 left-4 z-50";case"bottom-right":return"fixed bottom-4 right-4 z-50";case"bottom-left":return"fixed bottom-4 left-4 z-50";case"inline":return"relative";default:return"fixed top-4 right-4 z-50"}};if(!o||u)return null;const g=s.reduce((y,w)=>{var b;return y+(((b=w.connectedStudents)==null?void 0:b.length)||0)},0);return a.jsx("div",{className:p(),children:a.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 rounded-lg shadow-2xl border border-green-500/30 backdrop-blur-sm p-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),a.jsx(F3,{className:"w-4 h-4 text-white"})]}),a.jsx("div",{className:"text-white",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-sm font-semibold",children:[s.length," ",s.length>1?"":""," ",s.length>1?"":""]}),n==="teacher"&&a.jsxs("div",{className:"flex items-center space-x-1 text-green-200",children:[a.jsx(Cr,{className:"w-3 h-3"}),a.jsx("span",{className:"text-xs",children:g})]})]})}),a.jsxs("button",{onClick:()=>{var y;return f((y=s[0])==null?void 0:y.id)},className:"bg-white/20 hover:bg-white/30 rounded px-2 py-1 text-white text-xs font-medium transition-colors flex items-center space-x-1",children:[a.jsx(Sn,{className:"w-3 h-3"}),a.jsx("span",{children:""})]})]}),n==="teacher"&&s.length>1&&a.jsx("div",{className:"mt-2 pt-2 border-t border-green-500/30",children:a.jsxs("div",{className:"space-y-1",children:[s.slice(0,3).map(y=>{var w;return a.jsxs("button",{onClick:()=>f(y.id),className:"w-full text-left text-xs text-green-100 hover:text-white transition-colors flex items-center justify-between",children:[a.jsx("span",{className:"truncate",children:y.lessonName}),a.jsx("span",{className:"text-green-200",children:((w=y.connectedStudents)==null?void 0:w.length)||0})]},y.id)}),s.length>3&&a.jsxs("div",{className:"text-xs text-green-200 text-center",children:["+",s.length-3," "]})]})})]})})},MW=()=>{const{currentUser:t,userProfile:e}=ws(),r=(t==null?void 0:t.displayName)||(t==null?void 0:t.email)||"User",n=(t==null?void 0:t.role)||"student";return a.jsx("header",{className:"bg-black/80 backdrop-blur-xl border-b border-green-500/30 p-3",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:hg,alt:"Cyber Logo",className:"w-12 h-12 animate-pulse"}),a.jsx("div",{className:"absolute inset-0 bg-green-500/20 rounded-full animate-ping"})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-green-400 to-cyan-400 bg-clip-text text-transparent animate-pulse",children:"Israel Cyber Campus"}),a.jsx("p",{className:"text-green-400 text-xs font-mono",children:"Terminal v2.0.1"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[a.jsx(kb,{position:"inline"}),a.jsx(Ei,{to:n==="teacher"?"/teacher/dashboard":"/student/roadmap",children:a.jsxs("button",{className:"group relative bg-gradient-to-r from-green-600 to-cyan-600 hover:from-green-500 hover:to-cyan-500 text-white px-4 py-2 rounded-lg font-bold transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-green-500/25 border border-green-400/30 text-sm",children:[a.jsx("div",{className:"absolute inset-0 bg-green-500/20 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("span",{className:"relative flex items-center space-x-2 space-x-reverse",children:[a.jsx(V2,{className:"w-4 h-4"}),a.jsx("span",{children:""})]})]})}),(n==="student"||n==="teacher")&&a.jsx(Ei,{to:n==="teacher"?"/teacher/profile":"/student/profile",children:a.jsxs("button",{className:"group relative bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white px-4 py-2 rounded-lg font-bold transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-blue-500/25 border border-blue-400/30 text-sm",children:[a.jsx("div",{className:"absolute inset-0 bg-blue-500/20 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("span",{className:"relative flex items-center space-x-2 space-x-reverse",children:[a.jsx(Di,{className:"w-4 h-4"}),a.jsx("span",{children:""})]})]})}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-white font-semibold text-sm",children:r}),a.jsx("p",{className:"text-green-400 text-xs font-mono",children:n==="teacher"?"TEACHER":(e==null?void 0:e.displayName)||"STUDENT"})]})]})]})})};let bc=null,_c=null;const VW=5*60*1e3,N0=async(t=!1)=>{try{if(!t&&bc&&_c&&Date.now()-_c<VW)return bc;const e=Ft(ze,"lessons"),r=nr(e,ua("originalId","asc")),s=(await zt(r)).docs.map(i=>{var o,l,u,h;return{id:i.id,...i.data(),createdAt:((l=(o=i.data().createdAt)==null?void 0:o.toDate)==null?void 0:l.call(o))||new Date,updatedAt:((h=(u=i.data().updatedAt)==null?void 0:u.toDate)==null?void 0:h.call(u))||new Date}});return bc=s,_c=Date.now(),s}catch(e){console.warn("Database unavailable, falling back to local lessons:",e.message);try{const{lessons:r}=await fs(async()=>{const{lessons:s}=await import("./lessons-B8_uJwD3.js");return{lessons:s}},[]),n=r.map((s,i)=>{var o,l,u;return{id:`local-${s.id||i+1}`,originalId:s.id||i+1,title:s.title,description:s.description,difficulty:s.difficulty||"beginner",targetAge:s.targetAge||"all",estimatedDuration:s.estimatedDuration||30,slides:((o=s.content)==null?void 0:o.slides)||[],totalSlides:((u=(l=s.content)==null?void 0:l.slides)==null?void 0:u.length)||0,createdAt:new Date,updatedAt:new Date,isActive:!0,source:"local_fallback"}});return bc=n,_c=Date.now(),n}catch(r){throw console.error("Both database and local fallback failed:",r),new Error("Failed to load lessons. Please check your connection and try again.")}}},E0=async(t=!1)=>{try{const e=await N0(t);return await Promise.all(e.map(async n=>{try{const s=await Ex(n.id);return{...n,slides:s,totalSlides:s.length}}catch{return{...n,slides:[],totalSlides:0}}}))}catch{throw new Error("Failed to load lessons with slide counts from database. Please check your connection and try again.")}},BW=async t=>{var e,r,n,s;try{const i=wt(ze,"lessons",t),o=await dr(i);if(o.exists())return{id:o.id,...o.data(),createdAt:((r=(e=o.data().createdAt)==null?void 0:e.toDate)==null?void 0:r.call(e))||new Date,updatedAt:((s=(n=o.data().updatedAt)==null?void 0:n.toDate)==null?void 0:s.call(n))||new Date};throw new Error("Lesson not found")}catch(i){throw new Error(`Failed to get lesson: ${i.message}`)}},$T=async t=>{try{const e=wt(Ft(ze,"lessons")),r={...t,id:e.id,createdAt:Lt(),updatedAt:Lt(),createdBy:"system",updatedBy:"system",version:1,isActive:!0};return await _n(e,r),bc=null,_c=null,e.id}catch(e){throw new Error(`Failed to create lesson: ${e.message}`)}},UW=async(t,e)=>{try{const r=wt(ze,"lessons",t),n={...e,updatedAt:Lt(),updatedBy:"system"};return await On(r,n),bc=null,_c=null,t}catch(r){throw new Error(`Failed to update lesson: ${r.message}`)}},zW=async t=>{try{const e=await zt(Ft(ze,"lessons",t,"slides")),r=g0(ze);e.docs.forEach(s=>{r.delete(s.ref)});const n=wt(ze,"lessons",t);return r.delete(n),await r.commit(),bc=null,_c=null,!0}catch(e){throw new Error(`Failed to delete lesson: ${e.message}`)}},Ex=async t=>{try{const e=String(t);try{const r=nr(Ft(ze,"lessons",e,"slides"),ua("sortOrder","asc")),n=await zt(r),s=new Map;n.docs.forEach((o,l)=>{var g,y,w,b;const u=o.data(),h=o.id,f=u.originalId||h,p=((y=(g=u.updatedAt)==null?void 0:g.toDate)==null?void 0:y.call(g))||((b=(w=u.createdAt)==null?void 0:w.toDate)==null?void 0:b.call(w))||new Date(0);(!s.has(f)||p>s.get(f).timestamp)&&s.set(f,{docId:h,data:u,timestamp:p})});const i=Array.from(s.values()).map(({data:o,docId:l},u)=>{var p,g,y,w;const h=o.originalId||l;return{id:`${e}_${h}`,originalId:h,lessonId:e,...o,createdAt:((g=(p=o.createdAt)==null?void 0:p.toDate)==null?void 0:g.call(p))||new Date,updatedAt:((w=(y=o.updatedAt)==null?void 0:y.toDate)==null?void 0:w.call(y))||new Date}});if(i.sort((o,l)=>{const u=o.order||0,h=l.order||0;return u!==h?u-h:o.originalId.localeCompare(l.originalId)}),i.length>0)return i}catch{}try{const r=nr(Ft(ze,"lessons",e,"slides"),ua("order","asc")),n=await zt(r),s=new Map;n.docs.forEach(o=>{var p,g,y,w;const l=o.data(),u=o.id,h=l.originalId||u,f=`${e}_${h}`;s.set(f,{id:f,originalId:h,lessonId:e,...l,createdAt:((g=(p=l.createdAt)==null?void 0:p.toDate)==null?void 0:g.call(p))||new Date,updatedAt:((w=(y=l.updatedAt)==null?void 0:y.toDate)==null?void 0:w.call(y))||new Date})});const i=Array.from(s.values());if(i.sort((o,l)=>{const u=o.order||0,h=l.order||0;return u!==h?u-h:o.originalId.localeCompare(l.originalId)}),i.length>0)return i}catch{}try{const r=nr(Ft(ze,"lessons",e,"slides")),n=await zt(r),s=new Map;n.docs.forEach(o=>{var p,g,y,w;const l=o.data(),u=o.id,h=l.originalId||u,f=`${e}_${h}`;s.set(f,{id:f,originalId:h,lessonId:e,...l,createdAt:((g=(p=l.createdAt)==null?void 0:p.toDate)==null?void 0:g.call(p))||new Date,updatedAt:((w=(y=l.updatedAt)==null?void 0:y.toDate)==null?void 0:w.call(y))||new Date})});const i=Array.from(s.values());if(i.sort((o,l)=>{const u=o.order||0,h=l.order||0;if(u!==h)return u-h;const f=parseInt(o.originalId.replace(/\D/g,""))||0,p=parseInt(l.originalId.replace(/\D/g,""))||0;return f-p}),i.length>0)return i}catch{}try{const r=nr(Ft(ze,"lessons",e,"slides")),n=await zt(r),s=new Map;n.docs.forEach(o=>{var p,g,y,w;const l=o.data(),u=o.id,h=l.originalId||u,f=`${e}_${h}`;s.set(f,{id:f,originalId:h,lessonId:e,...l,createdAt:((g=(p=l.createdAt)==null?void 0:p.toDate)==null?void 0:g.call(p))||new Date,updatedAt:((w=(y=l.updatedAt)==null?void 0:y.toDate)==null?void 0:w.call(y))||new Date})});const i=Array.from(s.values());if(i.sort((o,l)=>{const u=o.order||0,h=l.order||0;if(u!==h)return u-h;const f=parseInt(o.originalId.replace(/\D/g,""))||0,p=parseInt(l.originalId.replace(/\D/g,""))||0;return f-p}),i.length>0)return i}catch{}try{console.warn("No database slides found, falling back to local slides for lesson:",t);const{lessons:r}=await fs(async()=>{const{lessons:i}=await import("./lessons-B8_uJwD3.js");return{lessons:i}},[]),n=parseInt(t),s=r.find(i=>i.id===n);if(s&&s.content&&s.content.slides)return s.content.slides.map((o,l)=>({id:`local-${n}-${o.id||l+1}`,originalId:o.id||l+1,lessonId:t,title:o.title||`Slide ${l+1}`,type:o.type||"presentation",content:o.content||o,order:o.order||l+1,createdAt:new Date,updatedAt:new Date,source:"local_fallback"}))}catch(r){console.warn("Local fallback also failed:",r.message)}return[]}catch(e){console.warn("Database error, trying local fallback for slides:",e.message);try{const{lessons:r}=await fs(async()=>{const{lessons:i}=await import("./lessons-B8_uJwD3.js");return{lessons:i}},[]),n=parseInt(t),s=r.find(i=>i.id===n);if(s&&s.content&&s.content.slides)return s.content.slides.map((o,l)=>({id:`local-${n}-${o.id||l+1}`,originalId:o.id||l+1,lessonId:t,title:o.title||`Slide ${l+1}`,type:o.type||"presentation",content:o.content||o,order:o.order||l+1,createdAt:new Date,updatedAt:new Date,source:"local_fallback"}))}catch(r){console.error("Both database and local fallback failed for slides:",r)}throw new Error(`Failed to load slides for lesson ${t}: ${e.message}`)}},HT=async(t,e=null)=>{try{const r=e||t.originalId||`slide-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,n={...t,lessonId:String((t==null?void 0:t.lessonId)||"")},s=wt(ze,"lessons",n.lessonId,"slides",r),i={...n,id:r,createdAt:Lt(),updatedAt:Lt(),lastEdited:Lt(),version:1};if(await _n(s,i),(await dr(s)).exists())return r;throw new Error("Slide was not created properly")}catch(r){throw r.code==="permission-denied"?new Error("Permission denied. Please check your Firebase security rules."):r.code==="unavailable"?new Error("Firebase is temporarily unavailable. Please try again."):new Error(`Failed to create slide: ${r.message}`)}},$W=async(t,e)=>{try{const r={...e,title:String((e==null?void 0:e.title)||""),type:String((e==null?void 0:e.type)||"presentation"),order:Number(e==null?void 0:e.order)||1,lessonId:String((e==null?void 0:e.lessonId)||""),content:(e==null?void 0:e.content)||{}},n=wt(ze,"lessons",r.lessonId,"slides",t);if((await dr(n)).exists()){const i={...r,updatedAt:Lt(),lastEdited:Lt(),version:(e.version||0)+1};if(await On(n,i),(await dr(n)).exists())return t;throw new Error("Slide was not saved properly")}else{const i={...r,id:t,createdAt:Lt(),updatedAt:Lt(),lastEdited:Lt(),version:1};if(await _n(n,i),(await dr(n)).exists())return t;throw new Error("Slide was not created properly")}}catch(r){throw r.code==="permission-denied"?new Error("Permission denied. Please check your Firebase security rules."):r.code==="unavailable"?new Error("Firebase is temporarily unavailable. Please try again."):new Error(`Failed to save slide: ${r.message}`)}},HW=async(t,e)=>{try{const r=wt(ze,"lessons",e,"slides",t),n=await dr(r);if(!n.exists())throw new Error("Slide not found");const s=n.data();await ox(r);try{const{cleanupTeacherNotesForLesson:i}=await fs(async()=>{const{cleanupTeacherNotesForLesson:h}=await Promise.resolve().then(()=>hB);return{cleanupTeacherNotesForLesson:h}},void 0),u=(await Ex(e)).map(h=>h.originalId).filter(h=>h!==t);await i(e,u)}catch{}return!0}catch(r){throw new Error(`Failed to delete slide: ${r.message}`)}},Sx=async t=>{var e,r,n,s,i,o,l;try{let u=await BW(t);if(!u){const h=Ft(ze,"lessons"),f=nr(h,yr("originalId","==",parseInt(t))),p=await zt(f);if(!p.empty){const g=p.docs[0];u={id:g.id,...g.data(),createdAt:((r=(e=g.data().createdAt)==null?void 0:e.toDate)==null?void 0:r.call(e))||new Date,updatedAt:((s=(n=g.data().updatedAt)==null?void 0:n.toDate)==null?void 0:s.call(n))||new Date}}}if(u){const h=await Ex(u.id);return{...u,slides:h}}else throw new Error(`No lesson found for ID: ${t}`)}catch(u){console.warn("Database unavailable, falling back to local lesson:",u.message);try{const{lessons:h}=await fs(async()=>{const{lessons:g}=await import("./lessons-B8_uJwD3.js");return{lessons:g}},[]),f=parseInt(t),p=h.find(g=>g.id===f);if(p)return{id:`local-${p.id}`,originalId:p.id,title:p.title,description:p.description,difficulty:p.difficulty||"beginner",targetAge:p.targetAge||"all",estimatedDuration:p.estimatedDuration||30,slides:((i=p.content)==null?void 0:i.slides)||[],totalSlides:((l=(o=p.content)==null?void 0:o.slides)==null?void 0:l.length)||0,createdAt:new Date,updatedAt:new Date,isActive:!0,source:"local_fallback"};throw new Error(`No lesson found for ID: ${t}`)}catch(h){throw console.error("Both database and local fallback failed:",h),new Error(`Failed to fetch lesson with slides: ${u.message}`)}}},Oy=async t=>{try{console.log(" getNextLesson called with:",t,"type:",typeof t);const e=await N0();console.log(" Available lessons:",e.map(s=>({id:s.id,originalId:s.originalId,title:s.title})));let r=-1;if(r=e.findIndex(s=>s.id===t),console.log(" Search by Firestore ID result:",r),r===-1&&(r=e.findIndex(s=>s.originalId===parseInt(t)),console.log(" Search by originalId (parsed) result:",r)),r===-1&&(r=e.findIndex(s=>s.originalId===t),console.log(" Search by originalId (string) result:",r)),r===-1&&(r=e.findIndex(s=>s.originalId===Number(t)),console.log(" Search by originalId (Number) result:",r)),r===-1){console.error(" Current lesson not found:",{currentLessonId:t,type:typeof t,parsedId:parseInt(t),numberId:Number(t),availableLessons:e.map(s=>({id:s.id,originalId:s.originalId,title:s.title}))});try{console.log(" Trying local fallback for getNextLesson...");const{lessons:s}=await fs(async()=>{const{lessons:l}=await import("./lessons-B8_uJwD3.js");return{lessons:l}},[]),i=parseInt(t),o=s.findIndex(l=>l.id===i);if(o!==-1){const l=s[o+1];if(l)return console.log(" Found next lesson in local data:",l.title),{id:`local-${l.id}`,originalId:l.id,title:l.title,description:l.description,source:"local_fallback"}}}catch(s){console.error(" Local fallback also failed:",s)}throw new Error("Current lesson not found")}const n=e[r+1];return console.log(" Next lesson found:",n?n.title:"No next lesson"),n||null}catch(e){throw console.error(" getNextLesson error:",e),new Error(`Failed to get next lesson: ${e.message}`)}};var My,WT;function WW(){if(WT)return My;WT=1;var t={linear:function(e,r,n,s){var i=n-r;return i*e/s+r},easeInQuad:function(e,r,n,s){var i=n-r;return i*(e/=s)*e+r},easeOutQuad:function(e,r,n,s){var i=n-r;return-i*(e/=s)*(e-2)+r},easeInOutQuad:function(e,r,n,s){var i=n-r;return(e/=s/2)<1?i/2*e*e+r:-i/2*(--e*(e-2)-1)+r},easeInCubic:function(e,r,n,s){var i=n-r;return i*(e/=s)*e*e+r},easeOutCubic:function(e,r,n,s){var i=n-r;return i*((e=e/s-1)*e*e+1)+r},easeInOutCubic:function(e,r,n,s){var i=n-r;return(e/=s/2)<1?i/2*e*e*e+r:i/2*((e-=2)*e*e+2)+r},easeInQuart:function(e,r,n,s){var i=n-r;return i*(e/=s)*e*e*e+r},easeOutQuart:function(e,r,n,s){var i=n-r;return-i*((e=e/s-1)*e*e*e-1)+r},easeInOutQuart:function(e,r,n,s){var i=n-r;return(e/=s/2)<1?i/2*e*e*e*e+r:-i/2*((e-=2)*e*e*e-2)+r},easeInQuint:function(e,r,n,s){var i=n-r;return i*(e/=s)*e*e*e*e+r},easeOutQuint:function(e,r,n,s){var i=n-r;return i*((e=e/s-1)*e*e*e*e+1)+r},easeInOutQuint:function(e,r,n,s){var i=n-r;return(e/=s/2)<1?i/2*e*e*e*e*e+r:i/2*((e-=2)*e*e*e*e+2)+r},easeInSine:function(e,r,n,s){var i=n-r;return-i*Math.cos(e/s*(Math.PI/2))+i+r},easeOutSine:function(e,r,n,s){var i=n-r;return i*Math.sin(e/s*(Math.PI/2))+r},easeInOutSine:function(e,r,n,s){var i=n-r;return-i/2*(Math.cos(Math.PI*e/s)-1)+r},easeInExpo:function(e,r,n,s){var i=n-r;return e==0?r:i*Math.pow(2,10*(e/s-1))+r},easeOutExpo:function(e,r,n,s){var i=n-r;return e==s?r+i:i*(-Math.pow(2,-10*e/s)+1)+r},easeInOutExpo:function(e,r,n,s){var i=n-r;return e===0?r:e===s?r+i:(e/=s/2)<1?i/2*Math.pow(2,10*(e-1))+r:i/2*(-Math.pow(2,-10*--e)+2)+r},easeInCirc:function(e,r,n,s){var i=n-r;return-i*(Math.sqrt(1-(e/=s)*e)-1)+r},easeOutCirc:function(e,r,n,s){var i=n-r;return i*Math.sqrt(1-(e=e/s-1)*e)+r},easeInOutCirc:function(e,r,n,s){var i=n-r;return(e/=s/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+r:i/2*(Math.sqrt(1-(e-=2)*e)+1)+r},easeInElastic:function(e,r,n,s){var i=n-r,o,l,u;return u=1.70158,l=0,o=i,e===0?r:(e/=s)===1?r+i:(l||(l=s*.3),o<Math.abs(i)?(o=i,u=l/4):u=l/(2*Math.PI)*Math.asin(i/o),-(o*Math.pow(2,10*(e-=1))*Math.sin((e*s-u)*(2*Math.PI)/l))+r)},easeOutElastic:function(e,r,n,s){var i=n-r,o,l,u;return u=1.70158,l=0,o=i,e===0?r:(e/=s)===1?r+i:(l||(l=s*.3),o<Math.abs(i)?(o=i,u=l/4):u=l/(2*Math.PI)*Math.asin(i/o),o*Math.pow(2,-10*e)*Math.sin((e*s-u)*(2*Math.PI)/l)+i+r)},easeInOutElastic:function(e,r,n,s){var i=n-r,o,l,u;return u=1.70158,l=0,o=i,e===0?r:(e/=s/2)===2?r+i:(l||(l=s*(.3*1.5)),o<Math.abs(i)?(o=i,u=l/4):u=l/(2*Math.PI)*Math.asin(i/o),e<1?-.5*(o*Math.pow(2,10*(e-=1))*Math.sin((e*s-u)*(2*Math.PI)/l))+r:o*Math.pow(2,-10*(e-=1))*Math.sin((e*s-u)*(2*Math.PI)/l)*.5+i+r)},easeInBack:function(e,r,n,s,i){var o=n-r;return i===void 0&&(i=1.70158),o*(e/=s)*e*((i+1)*e-i)+r},easeOutBack:function(e,r,n,s,i){var o=n-r;return i===void 0&&(i=1.70158),o*((e=e/s-1)*e*((i+1)*e+i)+1)+r},easeInOutBack:function(e,r,n,s,i){var o=n-r;return i===void 0&&(i=1.70158),(e/=s/2)<1?o/2*(e*e*(((i*=1.525)+1)*e-i))+r:o/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+r},easeInBounce:function(e,r,n,s){var i=n-r,o;return o=t.easeOutBounce(s-e,0,i,s),i-o+r},easeOutBounce:function(e,r,n,s){var i=n-r;return(e/=s)<1/2.75?i*(7.5625*e*e)+r:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+r:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+r:i*(7.5625*(e-=2.625/2.75)*e+.984375)+r},easeInOutBounce:function(e,r,n,s){var i=n-r,o;return e<s/2?(o=t.easeInBounce(e*2,0,i,s),o*.5+r):(o=t.easeOutBounce(e*2-s,0,i,s),o*.5+i*.5+r)}};return My=t,My}var qW=WW();function GW(t){return t*Math.PI/180}function na(t,e){return t+Math.random()*(e-t)}function KW(t,e){return Math.floor(t+Math.random()*(e-t+1))}var df;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(df||(df={}));var ol;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(ol||(ol={}));const XW=1e3/60;class YW{constructor(e,r,n,s){this.getOptions=r;const{colors:i,initialVelocityX:o,initialVelocityY:l}=this.getOptions();this.context=e,this.x=n,this.y=s,this.w=na(5,20),this.h=na(5,20),this.radius=na(5,10),this.vx=typeof o=="number"?na(-o,o):na(o.min,o.max),this.vy=typeof l=="number"?na(-l,0):na(l.min,l.max),this.shape=KW(0,2),this.angle=GW(na(0,360)),this.angularSpin=na(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=na(0,1),this.rotationDirection=na(0,1)?ol.Positive:ol.Negative}update(e){const{gravity:r,wind:n,friction:s,opacity:i,drawShape:o}=this.getOptions(),l=e/XW;this.x+=this.vx*l,this.y+=this.vy*l,this.vy+=r*l,this.vx+=n*l,this.vx*=s**l,this.vy*=s**l,this.rotateY>=1&&this.rotationDirection===ol.Positive?this.rotationDirection=ol.Negative:this.rotateY<=-1&&this.rotationDirection===ol.Negative&&(this.rotationDirection=ol.Positive);const u=.1*this.rotationDirection*l;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case df.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case df.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case df.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class QW{constructor(e,r){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=na(this.x,this.w+this.x),i=na(this.y,this.h+this.y);return new YW(this.context,this.getOptions,s,i)},this.animate=s=>{const{canvas:i,context:o,particlesGenerated:l,lastNumberOfPieces:u}=this,{run:h,recycle:f,numberOfPieces:p,debug:g,tweenFunction:y,tweenDuration:w}=this.getOptions();if(!h)return!1;const b=this.particles.length,_=f?b:l;if(_<p){u!==p&&(this.tweenProgress=0,this.tweenFrom=_,this.lastNumberOfPieces=p),this.tweenProgress=Math.min(w,Math.max(0,this.tweenProgress+s));const P=y(this.tweenProgress,this.tweenFrom,p,w),A=Math.round(P-_);for(let k=0;k<A;k++)this.particles.push(this.getParticle());this.particlesGenerated+=A}g&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${b}`,i.width-10,i.height-20));for(let P=this.particles.length-1;P>=0;P--){const A=this.particles[P];A.update(s),(A.y>i.height||A.y<-100||A.x>i.width+100||A.x<-100)&&(f&&_<=p?this.particles[P]=this.getParticle():this.removeParticleAt(P))}return b>0||_<p},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.getOptions=r}}const Tb={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:qW.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class JW{constructor(e,r){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...Tb,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:i,onConfettiComplete:o,frameRate:l},canvas:u,context:h}=this,f=Math.min(s-this.lastFrameTime,50);if(l&&f<1e3/l){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(l?f%l:0),i&&(h.fillStyle="white",h.clearRect(0,0,u.width,u.height)),this.generator.animate(f)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.generator=new QW(this.canvas,()=>this.options),this.options=r,this.update()}get options(){return this._options}set options(e){var s,i;const r=(s=this._options)==null?void 0:s.run,n=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&n===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&r===!1&&this.update()}}const ZW=Ac.createRef();class jb extends Ac.Component{constructor(e){super(e),this.canvas=Ac.createRef(),this.canvas=e.canvasRef||ZW}componentDidMount(){if(this.canvas.current){const e=Vy(this.props)[0];this.confetti=new JW(this.canvas.current,e)}}componentDidUpdate(){const e=Vy(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,r]=Vy(this.props),n={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...r.style};return a.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...r,style:n})}}jb.defaultProps={...Tb};jb.displayName="ReactConfetti";function Vy(t){const e={},r={},n={},s=[...Object.keys(Tb),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const o in t){const l=t[o];s.includes(o)?e[o]=l:i.includes(o)?i[o]=l:n[o]=l}return[e,n,r]}const nw=Ac.forwardRef((t,e)=>a.jsx(jb,{canvasRef:e,...t})),ut=({variant:t="primary",size:e="md",loading:r=!1,disabled:n=!1,className:s="",children:i,onClick:o,type:l="button",ariaLabel:u,...h})=>{const f="inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",p={primary:"bg-cyber-blue hover:bg-blue-700 text-white focus:ring-cyber-blue shadow-lg hover:shadow-xl transform hover:scale-105",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-600",outline:"border-2 border-cyber-blue text-cyber-blue hover:bg-cyber-blue hover:text-white focus:ring-cyber-blue",ghost:"text-cyber-blue hover:bg-cyber-blue/10 focus:ring-cyber-blue",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-600 shadow-lg hover:shadow-xl",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-600 shadow-lg hover:shadow-xl"},g={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg",xl:"px-8 py-4 text-xl"},y=`${f} ${p[t]} ${g[e]} ${s}`,w=b=>{!r&&!n&&o&&o(b)};return a.jsxs("button",{type:l,className:y,disabled:n||r,onClick:w,"aria-label":u,"aria-busy":r,...h,children:[r&&a.jsx(P3,{className:"w-4 h-4 mr-2 animate-spin"}),i]})},S0=()=>{var _;const t=Zn(),{currentUser:e}=ws(),[r,n]=S.useState(null),[s,i]=S.useState(!1),[o,l]=S.useState(0),[u,h]=S.useState(!0),[f,p]=S.useState(!1),g=S.useCallback(P=>{var R,B,z,O;if(!P||P.status!=="active")return!1;const A=((B=(R=P.lastActivity)==null?void 0:R.toDate)==null?void 0:B.call(R))||new Date(P.lastActivity),k=new Date,F=k.getTime()-A.getTime(),L=5*60*1e3;if(F>L)return console.log("Session is stale, last activity was",F/1e3,"seconds ago"),!1;const I=((O=(z=P.startTime)==null?void 0:z.toDate)==null?void 0:O.call(z))||new Date(P.startTime),N=k.getTime()-I.getTime(),T=4*60*60*1e3;return N>T?(console.log("Session has been running too long, auto-ending"),!1):!0},[]);S.useEffect(()=>{if(!(e!=null&&e.uid))return;let P=null,A=0;const k=3,F=()=>{try{console.log(" Setting up live session listener for student:",e.uid),P=OW(e.uid,L=>{if(L){console.log(" Received session update:",L.lessonName);const I=g(L);n(L),h(I),i(I),p(!1)}else console.log(" No active session found"),n(null),i(!1),h(!1),p(!1)}),A=0}catch(L){console.error(" Error setting up session listener:",L),A++,A<k?(console.log(` Retrying session listener (${A}/${k})...`),setTimeout(F,2e3*A)):(console.error(" Max retries reached for session listener"),p(!1))}};return p(!0),F(),()=>{P&&(console.log(" Cleaning up session listener"),P())}},[e==null?void 0:e.uid,g]),S.useEffect(()=>{if(!(r!=null&&r.startTime))return;const P=setInterval(()=>{var F,L;const A=((L=(F=r.startTime)==null?void 0:F.toDate)==null?void 0:L.call(F))||new Date(r.startTime),k=Math.floor((Date.now()-A.getTime())/1e3);l(k)},1e3);return()=>clearInterval(P)},[r==null?void 0:r.startTime]);const y=()=>{if(!r||!u){Ie.error("       "),i(!1);return}try{console.log(" Student joining session:",r.id),t(`/student/session/${r.id}`),Ie.success("  ...")}catch(P){console.error("Error joining session:",P),Ie.error("   ")}},w=()=>{i(!1)},b=P=>{const A=Math.floor(P/60),k=P%60;return`${A}:${k.toString().padStart(2,"0")}`};return f||!s||!r?null:a.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-md w-full",children:a.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 rounded-lg shadow-2xl border border-green-500/30 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-green-500/30",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),a.jsx(F3,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-white font-semibold text-sm",children:"  "})]}),a.jsx("button",{onClick:w,className:"text-white/80 hover:text-white transition-colors",children:a.jsx(zr,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:r.lessonName}),a.jsx("p",{className:"text-green-100 text-sm",children:r.className})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-green-100",children:[a.jsx(Al,{className:"w-4 h-4"}),a.jsx("span",{children:b(o)})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-green-100",children:[a.jsx(Cr,{className:"w-4 h-4"}),a.jsxs("span",{children:[((_=r.connectedStudents)==null?void 0:_.length)||0," "]})]})]}),a.jsxs("div",{className:"bg-green-500/20 rounded-lg p-3 border border-green-500/30",children:[a.jsxs("p",{className:"text-green-100 text-sm",children:["   ",r.currentSlide+1]}),a.jsx("p",{className:"text-green-200 text-xs mt-1",children:"      "})]}),a.jsxs(ut,{onClick:y,variant:"primary",size:"lg",className:"w-full bg-white text-green-600 hover:bg-green-50 transition-colors flex items-center justify-center space-x-2 font-semibold",children:[a.jsx(Sn,{className:"w-4 h-4"}),a.jsx("span",{children:"  "})]}),!u&&a.jsx("div",{className:"bg-yellow-500/20 rounded-lg p-3 border border-yellow-500/30",children:a.jsxs("div",{className:"flex items-center space-x-2 text-yellow-200",children:[a.jsx(To,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:"    "})]})})]})})]})})},eq=()=>{const[t,e]=S.useState([]);return S.useEffect(()=>{const r=()=>{const s="01",i=Math.floor(Math.random()*20)+10;let o="";for(let l=0;l<i;l++)o+=s[Math.floor(Math.random()*s.length)];return o},n=setInterval(()=>{e(s=>{const i=[...s,r()];return i.length>15?i.slice(1):i})},100);return()=>clearInterval(n)},[]),a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-green-500/5 to-transparent"}),t.map((r,n)=>a.jsx(Ke.div,{initial:{opacity:0,x:-100},animate:{opacity:.3,x:0},exit:{opacity:0,x:100},transition:{duration:2,ease:"linear"},className:"absolute text-green-400 font-mono text-xs whitespace-nowrap",style:{top:`${n/15*100}%`,left:`${Math.random()*100}%`,transform:`translateX(${Math.random()*200-100}px)`},children:r},n))]})},tq=t=>({1:Qn,2:EB,3:Sd,4:V2,5:D3,6:Pf,7:Rf,8:GB,9:Da,10:DB,11:hx,12:jo,13:A2,14:L3,15:C3,16:Td,17:Pf,18:D2})[t]||Qn,rq=()=>{const t=Zn(),{userProfile:e,currentUser:r}=ws(),{displayName:n,role:s}=Eb();Ol();const[i,o]=S.useState([]),[l,u]=S.useState(null),[h,f]=S.useState(null),[p,g]=S.useState(new Set),[y,w]=S.useState(new Set),[b,_]=S.useState(!1),[P,A]=S.useState(null),[k,F]=S.useState({width:window.innerWidth,height:window.innerHeight}),[L,I]=S.useState(null);S.useEffect(()=>{(async()=>{try{const H=await N0(),q=((H==null?void 0:H.filter(ae=>ae.id&&ae.id.startsWith("lesson")))||[]).sort((ae,U)=>{const M=ae.originalId||parseInt(ae.id.replace("lesson",""))||0,X=U.originalId||parseInt(U.id.replace("lesson",""))||0;return M-X});o(q),console.log(" Roadmap: Lessons data loaded and sorted:",{lessonsCount:(q==null?void 0:q.length)||0,lessons:(q==null?void 0:q.slice(0,3).map(ae=>{var U;return{originalId:ae.originalId,id:ae.id,title:ae.title,hasContent:!!ae.content,hasSlides:!!((U=ae.content)!=null&&U.slides)}}))||[],firstLesson:(q==null?void 0:q[0])||null,order:(q==null?void 0:q.map(ae=>ae.originalId||ae.id).join(", "))||"none"})}catch(H){console.error("Error loading lessons:",H),sa.error("  ")}})()},[]),S.useEffect(()=>{if(!r||s!=="student")return;const ne=async()=>{try{console.log(" Refreshing currentLesson from database...");const{doc:q,getDoc:ae}=await fs(async()=>{const{doc:K,getDoc:Y}=await Promise.resolve().then(()=>Af);return{doc:K,getDoc:Y}},void 0),{db:U}=await fs(async()=>{const{db:K}=await Promise.resolve().then(()=>Cf);return{db:K}},void 0),M=q(U,"users",r.uid),X=await ae(M);if(X.exists()){const K=X.data();if(console.log(" Fresh user data:",{currentLesson:K.currentLesson,displayName:K.displayName}),I(K),e&&K.currentLesson>e.currentLesson){const Y=K.currentLesson-e.currentLesson;sa.success(`  ${Y}  !`)}}else console.log(" User document not found")}catch(q){console.error("Error refreshing currentLesson:",q)}};ne();const H=setInterval(ne,1e4),Q=setTimeout(ne,1e3);return()=>{clearInterval(H),clearTimeout(Q)}},[r,s]),S.useEffect(()=>{},[e,L]),S.useEffect(()=>{if(e!=null&&e.progress){const ne=Object.entries(e.progress);if(ne.length>0){const H=ne.filter(([Q,q])=>q.lastActivity).sort((Q,q)=>new Date(q[1].lastActivity)-new Date(Q[1].lastActivity));if(H.length>0){const[Q,q]=H[0],ae=i.find(U=>U.id===parseInt(Q));ae&&!q.completed&&f({lesson:ae,progress:q})}}}},[e]);const N=S.useCallback(ne=>{const H=L||e;if(!H)return console.log(` No profile data available for lesson ${ne}`),"locked";const Q=i==null?void 0:i.find(Y=>Y.id===ne);if(!Q)return console.log(` Lesson not found for ID: ${ne}`),"locked";const q=Q.originalId||parseInt(ne),ae=H.completedLessons||[],U=H.currentLesson||0,M=Array.isArray(ae)?ae:[],X=[`lesson-${q}`,`lesson${q}`,q.toString(),ne];return M.some(Y=>X.includes(Y))||X.some(Y=>H.progress&&H.progress[Y]&&H.progress[Y].completed)?(console.log(` Lesson ${q} (${ne}) is completed`),"completed"):q<=U?(console.log(` Lesson ${q} (${ne}) is available (teacher unlocked up to lesson ${U})`),"available"):(console.log(` Lesson ${q} (${ne}) is locked (teacher only unlocked up to lesson ${U})`),"locked")},[e,L,i]),T=S.useCallback(()=>{const ne=L||e;if(!ne||!i||i.length===0)return console.log(" Cannot calculate progress percentage - missing data"),0;const H=Array.isArray(ne.completedLessons)?ne.completedLessons.length:0,Q=Math.round(H/i.length*100);return console.log(" getProgressPercentage:",Q+"%",`(${H}/${i.length})`),Q},[e,L,i]),R=S.useCallback(()=>{const ne=L||e;if(!ne)return console.log(" No user profile available for totalTimeSpent"),0;const H=Math.floor((ne.totalTimeSpent||0)/60);return console.log(" getTotalTimeSpent:",H,"from profile:",ne.totalTimeSpent),H},[e,L]),B=S.useCallback(()=>{const ne=L||e;if(!ne)return console.log(" No user profile available for totalPagesEngaged"),0;const H=ne.totalPagesEngaged||0;return console.log(" getTotalPagesEngaged:",H,"from profile:",ne.totalPagesEngaged),H},[e,L]);S.useCallback(()=>{const ne=L||e;return ne?ne.achievements||[]:[]},[e,L]);const z=S.useCallback(()=>{const ne=L||e;if(!ne)return console.log(" No user profile available for completedLessons"),0;const H=Array.isArray(ne.completedLessons)?ne.completedLessons.length:0;return console.log(" getCompletedLessonsCount:",H,"from profile:",ne.completedLessons),H},[e,L]),O=S.useCallback(ne=>{if(!ne||!ne.id){console.error(" Invalid lesson object:",ne);return}N(ne.id)!=="locked"&&t(`/student/lesson/${ne.id}`)},[t,N]),D=S.useCallback(()=>{h&&(N(h.lesson.id)!=="locked"?(t(`/student/lesson/${h.lesson.id}`),sa.success(` : ${h.lesson.title}`)):sa.error("      "))},[h,t,N]),ie=S.useCallback(ne=>{switch(ne){case"completed":return a.jsx(Qt,{className:"h-6 w-6 text-green-500"});case"available":return a.jsx(MB,{className:"h-6 w-6 text-blue-500"});case"locked":return a.jsx(Nk,{className:"h-6 w-6 text-gray-400"});default:return a.jsx(rg,{className:"h-6 w-6 text-gray-400"})}},[]),Z=S.useCallback(ne=>{const H=i==null?void 0:i.find(M=>M.id===ne);if(!H)return console.log(` Lesson not found for ID: ${ne}`),0;const Q=H.originalId||parseInt(ne),q=[`lesson-${Q}`,`lesson${Q}`,Q.toString(),ne],ae=q.find(M=>{var X;return(X=e==null?void 0:e.progress)==null?void 0:X[M]});if(!ae){const M=N(ne);return(M==="available"||M==="completed")&&console.log(` No progress found for lesson ${ne} (tried: ${q.join(", ")})`),0}const U=e.progress[ae].lastSlide||0;return console.log(` Last slide for lesson ${ne}: ${U} (found in: ${ae})`),U},[e,i]);return S.useEffect(()=>{const ne=()=>F({width:window.innerWidth,height:window.innerHeight});return window.addEventListener("resize",ne),()=>window.removeEventListener("resize",ne)},[]),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black relative overflow-hidden",children:[a.jsx(S0,{}),a.jsx(eq,{}),a.jsx("div",{className:"absolute inset-0 opacity-10",children:a.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`
            linear-gradient(rgba(0, 255, 0, 0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 255, 0, 0.1) 1px, transparent 1px)
          `,backgroundSize:"50px 50px"}})}),b&&a.jsx(nw,{width:k.width,height:k.height,recycle:!1,numberOfPieces:200,colors:["#00ff00","#00ffff","#ff00ff","#ffff00","#ff0000","#0000ff"]}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"max-w-[78%] mx-auto px-8 py-12",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx(Ke.h2,{className:"text-6xl font-bold mb-6 bg-gradient-to-r from-green-400 via-cyan-400 to-blue-400 bg-clip-text text-transparent drop-shadow-[0_0_20px_rgba(16,185,129,0.5)] animate-pulse",style:{textShadow:"0 0 30px rgba(16,185,129,0.8), 0 0 60px rgba(34,211,238,0.6), 0 0 90px rgba(59,130,246,0.4)",filter:"drop-shadow(0 0 20px rgba(16,185,129,0.3))"},initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:"easeOut"},children:"   "}),a.jsxs(Ke.p,{className:"text-2xl text-green-400 font-mono",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},children:[">","       "]}),h&&a.jsxs(Ke.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.3},className:"mb-12",children:[a.jsxs("button",{onClick:D,className:"group relative bg-gradient-to-r from-green-600 to-cyan-600 hover:from-green-500 hover:to-cyan-500 text-white px-12 py-6 rounded-xl font-bold text-xl shadow-2xl hover:shadow-green-500/25 transform hover:scale-105 transition-all duration-300 flex items-center justify-center mx-auto space-x-4 border border-green-400/30",children:[a.jsx("div",{className:"absolute inset-0 bg-green-500/20 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("span",{className:"relative flex items-center space-x-4 space-x-reverse",children:[a.jsx(V2,{className:"w-8 h-8 group-hover:animate-pulse"}),a.jsxs("span",{children:["  : ",h.lesson.title]}),a.jsx(If,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]})]}),a.jsxs("p",{className:"text-green-400 text-lg mt-3 font-mono",children:[">","   ",h.progress.lastSlide+1]})]}),a.jsxs(Ke.div,{className:"bg-black/60 backdrop-blur-xl rounded-3xl p-12 shadow-2xl border border-green-500/30 mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[a.jsx("h3",{className:"text-3xl font-bold text-white mb-8 text-center",children:" "}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8",children:[a.jsxs("div",{className:"group relative bg-gradient-to-br from-green-900/30 to-cyan-900/30 rounded-2xl border border-green-500/30 p-8 hover:border-green-400/50 transition-all duration-300",children:[a.jsx("div",{className:"absolute inset-0 bg-green-500/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative flex flex-col items-center text-center",children:[a.jsx(V3,{className:"h-14 w-14 text-yellow-500 mb-4 group-hover:scale-110 transition-transform"}),a.jsx("div",{className:"text-4xl font-bold text-white mb-3",children:z()}),a.jsx("div",{className:"text-base text-green-400 font-mono",children:" "})]})]}),a.jsxs("div",{className:"group relative bg-gradient-to-br from-purple-900/30 to-pink-900/30 rounded-2xl border border-purple-500/30 p-8 hover:border-purple-400/50 transition-all duration-300",children:[a.jsx("div",{className:"absolute inset-0 bg-purple-500/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative flex flex-col items-center text-center",children:[a.jsx(px,{className:"h-14 w-14 text-purple-400 mb-4 group-hover:scale-110 transition-transform"}),a.jsxs("div",{className:"text-4xl font-bold text-white mb-3",children:[T(),"%"]}),a.jsx("div",{className:"text-base text-purple-400 font-mono",children:""})]})]}),a.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-900/30 to-indigo-900/30 rounded-2xl border border-blue-500/30 p-8 hover:border-blue-400/50 transition-all duration-300",children:[a.jsx("div",{className:"absolute inset-0 bg-blue-500/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative flex flex-col items-center text-center",children:[a.jsx(Da,{className:"h-14 w-14 text-blue-400 mb-4 group-hover:scale-110 transition-transform"}),a.jsx("div",{className:"text-4xl font-bold text-white mb-3",children:B()}),a.jsx("div",{className:"text-base text-blue-400 font-mono",children:" "})]})]}),a.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-900/30 to-red-900/30 rounded-2xl border border-orange-500/30 p-8 hover:border-orange-400/50 transition-all duration-300",children:[a.jsx("div",{className:"absolute inset-0 bg-orange-500/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsxs("div",{className:"relative flex flex-col items-center text-center",children:[a.jsx(M3,{className:"h-14 w-14 text-orange-400 mb-4 group-hover:scale-110 transition-transform"}),a.jsx("div",{className:"text-4xl font-bold text-white mb-3",children:R()}),a.jsx("div",{className:"text-base text-orange-400 font-mono",children:" "})]})]})]}),a.jsx("div",{className:"w-full bg-gray-800/50 rounded-full h-6 mb-6 border border-gray-700",children:a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-cyan-500 h-6 rounded-full transition-all duration-500 shadow-lg shadow-green-500/25",style:{width:`${T()}%`}})}),a.jsxs("p",{className:"text-center text-green-400 text-base font-mono",children:[">","  : ",T(),"% (",z(),"  ",(i==null?void 0:i.length)||0," )"]})]})]}),a.jsx(Ke.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:i&&Array.isArray(i)&&i.length>0?i.map((ne,H)=>{if(!ne||!ne.id)return console.warn(" Invalid lesson data:",ne),null;const Q=N(ne.id),q=p.has(ne.id),ae=Z(ne.id),U=tq(ne.id);return a.jsxs(Ke.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1*H},className:`relative group cursor-pointer transform transition-all duration-500 hover:scale-105 ${q?"animate-pulse":""}`,onClick:()=>O(ne),children:[a.jsxs("div",{className:`relative bg-gradient-to-br from-gray-900/80 to-black/80 backdrop-blur-xl rounded-2xl p-8 border-2 transition-all duration-500 hover:shadow-2xl hover:shadow-green-500/25 ${Q==="completed"?"border-green-500 bg-green-900/20 hover:border-green-400":Q==="available"?"border-cyan-500 bg-cyan-900/20 hover:border-cyan-400":"border-gray-600 bg-gray-900/20 hover:border-gray-500"}`,children:[a.jsx("div",{className:`absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 ${Q==="completed"?"bg-green-500/10":Q==="available"?"bg-cyan-500/10":"bg-gray-500/10"}`}),a.jsxs("div",{className:"relative flex justify-between items-start mb-6",children:[a.jsx("div",{className:`p-4 rounded-xl ${Q==="completed"?"bg-green-500/20 text-green-400":Q==="available"?"bg-cyan-500/20 text-cyan-400":"bg-gray-500/20 text-gray-400"}`,children:a.jsx(U,{className:"h-8 w-8"})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[ie(Q),q&&a.jsx(O2,{className:"h-5 w-5 text-yellow-400 animate-pulse"})]})]}),a.jsxs("div",{className:"relative space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"bg-green-500/20 text-green-400 px-3 py-1 rounded-lg text-sm font-mono border border-green-500/30",children:[" ",ne.originalId||ne.id]}),a.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-green-300 transition-colors",children:ne.title||"  "})]}),a.jsx("p",{className:"text-gray-300 text-sm line-clamp-2",children:ne.description||"  "}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("span",{className:"text-green-400 font-mono",children:[" ",ne.timeRange||ne.duration||" "]}),a.jsxs("span",{className:"text-cyan-400 font-mono",children:[" ",ne.difficulty||" "]})]}),(Q==="available"||Q==="completed")&&a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-300 mb-2",children:[a.jsx("span",{className:"font-mono",children:""}),a.jsxs("span",{className:"font-mono",children:[ae+1," / ",ne.totalSlides||0]})]}),a.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 border border-gray-700",children:a.jsx("div",{className:`h-3 rounded-full transition-all duration-500 shadow-lg ${Q==="completed"?"bg-gradient-to-r from-green-500 to-green-400 shadow-green-500/25":"bg-gradient-to-r from-cyan-500 to-blue-500 shadow-cyan-500/25"}`,style:{width:`${Q==="completed"?100:(ae+1)/(ne.totalSlides||1)*100}%`}})})]}),a.jsx("div",{className:"mt-6",children:Q==="completed"?a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-400 bg-green-500/10 rounded-lg py-3 border border-green-500/30",children:[a.jsx(Qt,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium font-mono",children:""})]}):Q==="available"?a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-cyan-400 bg-cyan-500/10 rounded-lg py-3 border border-cyan-500/30 group-hover:bg-cyan-500/20 transition-colors",children:[a.jsx(Sn,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium font-mono",children:ae>0?"":""})]}):a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-400 bg-gray-500/10 rounded-lg py-3 border border-gray-500/30",children:[a.jsx(Nk,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium font-mono",children:""})]})})]})]}),q&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-400/20 to-orange-400/20 rounded-2xl border-2 border-yellow-400 animate-pulse"})]},ne.id)}):a.jsxs("div",{className:"col-span-full text-center py-12",children:[a.jsx("div",{className:"text-gray-400 text-xl mb-4 font-mono",children:"  "}),a.jsx("div",{className:"text-gray-500 text-sm font-mono",children:i?"   ":" ..."})]})})]}),a.jsxs("footer",{className:"bg-black/80 border-t border-green-500/30 py-8 mt-12 flex flex-col items-center",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:hg,alt:"Cyber Logo",className:"w-32 h-32 mb-4 opacity-80 hover:opacity-100 transition-opacity"}),a.jsx("div",{className:"absolute inset-0 bg-green-500/10 rounded-full animate-ping"})]}),a.jsx("p",{className:"text-green-400 text-sm font-mono",children:" 2024 Israel Cyber Campus.   ."}),a.jsx("p",{className:"text-gray-500 text-xs font-mono mt-2",children:"Terminal v2.0.1 | Matrix Protocol Active"})]})]})]})},Pd=({slide:t})=>{var r;const{content:e}=t;return a.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-start pt-20 px-4",children:[" ",a.jsxs("div",{className:"w-full max-w-7xl flex flex-col",children:[" ",a.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700/50 shadow-2xl flex flex-col justify-center relative overflow-auto",style:{background:e.background||"linear-gradient(135deg, #1e3a8a 0%, #7c3aed 100%)",minHeight:"600px",width:"100%",margin:"0 auto"},children:[a.jsx("div",{className:"absolute inset-0 bg-black/20"}),a.jsx("div",{className:"text-center relative z-10",children:(r=e.elements)==null?void 0:r.map((n,s)=>{var i,o,l,u,h;switch(n.type){case"title":return a.jsx("h1",{style:{...n.style,textShadow:"0 4px 8px rgba(0,0,0,0.3)",fontWeight:"700"},className:"mb-8 text-5xl md:text-6xl",children:n.text},`${n.type}-${s}-${(i=n.text)==null?void 0:i.substring(0,20)}`);case"subtitle":return a.jsx("h2",{style:{...n.style,textShadow:"0 2px 4px rgba(0,0,0,0.3)"},className:"mb-6 text-2xl md:text-3xl",children:n.text},`${n.type}-${s}-${(o=n.text)==null?void 0:o.substring(0,20)}`);case"list":return a.jsx("ul",{style:{...n.style,textShadow:"0 1px 2px rgba(0,0,0,0.3)"},className:"text-right space-y-3",children:(l=n.items)==null?void 0:l.map((f,p)=>a.jsx("li",{className:"mb-3 p-3 bg-white/10 backdrop-blur-sm rounded-lg border border-white/20 hover:bg-white/20 transition-all duration-300",children:f},`item-${p}-${f==null?void 0:f.substring(0,20)}`))},`${n.type}-${s}-list`);case"image":return a.jsx("div",{className:"my-8",children:a.jsx("img",{src:n.src,alt:n.alt||"",style:{...n.style,boxShadow:"0 20px 40px rgba(0,0,0,0.3)",borderRadius:"20px",maxWidth:"100%",height:"auto"},className:"mx-auto transform hover:scale-105 transition-transform duration-300",loading:"lazy",onError:f=>{console.warn(` Failed to load image: ${n.src}`),f.target.style.display="none";const p=document.createElement("div");p.className="text-center p-4 bg-gray-200 rounded-lg border-2 border-dashed border-gray-400",p.innerHTML=`
                            <div class="text-gray-600 text-lg mb-2"></div>
                            <div class="text-gray-500">  </div>
                            <div class="text-sm text-gray-400 mt-1">${n.alt||""}</div>
                          `,f.target.parentNode.appendChild(p)},onLoad:()=>{console.log(` Image loaded successfully: ${n.src}`)}})},`${n.type}-${s}-${(u=n.src)==null?void 0:u.substring(0,20)}`);case"animation":return a.jsx("div",{style:{...n.style,animation:"bounce 2s infinite"},className:"animate-bounce",children:n.element},`${n.type}-${s}-animation`);case"timeline":return a.jsx("div",{className:"my-10 px-2 md:px-8 py-6 bg-white/10 rounded-xl border-l-4 border-cyan-400",style:n.style,children:a.jsx("ul",{className:"timeline space-y-8",children:n.events.map((f,p)=>a.jsxs("li",{className:"flex items-start gap-4",children:[a.jsx("span",{className:"text-2xl",children:f.icon||""}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-bold text-lg",children:[f.year,"  ",f.title]}),a.jsx("div",{className:"text-md opacity-90",children:f.description})]})]},p))})},`timeline-${s}`);case"definition":return a.jsxs("div",{className:"my-8 mx-auto max-w-2xl text-center rounded-xl shadow-lg border-2 border-blue-300 bg-white/70",style:n.style,children:[a.jsx("span",{className:"text-2xl font-bold text-blue-800 block mb-2",children:":"}),a.jsx("span",{className:"block text-xl font-semibold",children:n.text})]},`definition-${s}`);case"comparison":return a.jsx("div",{className:"flex flex-col md:flex-row gap-6 justify-center items-stretch my-8",style:n.style,children:(h=n.items)==null?void 0:h.map((f,p)=>a.jsxs("div",{className:"flex-1 p-6 rounded-xl bg-white/80 shadow border-2 border-gray-300 flex flex-col items-center",children:[a.jsx("span",{className:"text-3xl mb-2",children:f.icon}),a.jsx("div",{className:"font-bold text-lg mb-1",children:f.title}),a.jsx("div",{className:"text-md opacity-80",children:f.description})]},p))},`comparison-${s}`);case"specs":return a.jsx("div",{className:"my-8 max-w-2xl mx-auto bg-white/10 rounded-xl shadow p-6 border border-white/20",style:n.style,children:a.jsx("ul",{className:"space-y-4",children:n.items.map((f,p)=>a.jsxs("li",{className:"flex items-center gap-4 py-2 border-b border-white/20 last:border-b-0",children:[a.jsx("span",{className:"text-2xl",children:f.icon}),a.jsxs("span",{className:"font-bold",children:[f.component,":"]}),a.jsx("span",{className:"ml-2",children:f.spec})]},p))})},`specs-${s}`);case"tip":return a.jsx("div",{className:"my-6 px-4 py-2 rounded-lg bg-blue-50 border-r-4 border-blue-400 text-blue-800 shadow",style:n.style,children:n.text},`tip-${s}`);default:return null}})})]})]})]})},k0=({slide:t,onAnswer:e})=>{var u;const{content:r}=t,[n,s]=S.useState(null),[i,o]=S.useState(!1),l=h=>{s(h),o(!0),e(t.id,{selectedOption:h,isCorrect:!0})};return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",children:a.jsxs("div",{className:"max-w-5xl w-full h-full flex flex-col",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx("h2",{className:"text-4xl font-bold text-white mb-4",style:{textShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:t.title})}),a.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700/50 shadow-2xl flex-1 flex flex-col justify-center",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx("p",{className:"text-2xl text-gray-200",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:r.question})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(u=r.options)==null?void 0:u.map((h,f)=>a.jsx("button",{onClick:()=>l(h.id),disabled:i,className:`p-5 rounded-2xl border-4 transition-all duration-300 transform hover:scale-105 text-lg md:text-xl lg:text-2xl font-bold tracking-wide select-none focus:outline-none focus:ring-4 focus:ring-blue-400/50 ${n===h.id?"bg-gradient-to-r from-blue-600 to-purple-600 border-blue-400 text-white shadow-2xl":"bg-white/10 backdrop-blur-sm border-white/20 text-white hover:bg-white/20"}`,tabIndex:0,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-2xl md:text-3xl",children:h.emoji}),a.jsx("span",{className:"text-lg md:text-xl lg:text-2xl font-semibold",children:h.text})]}),n===h.id&&a.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center",children:a.jsx(Qt,{className:"w-5 h-5 text-blue-600"})})]})},h.id||f))}),i&&a.jsx("div",{className:"mt-8 text-center",children:a.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-xl p-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-green-400 mb-2",children:"  !"}),a.jsx("p",{className:"text-gray-300",children:"   "})]})})]})]})})},T0=({slide:t,onAnswer:e,answers:r})=>{const{content:n}=t,[s,i]=S.useState(!1),[o,l]=S.useState(!1),[u,h]=S.useState(!1),[f,p]=S.useState(!0),g=k=>{if(!k)return null;const F=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,L=k.match(F);return L?`https://www.youtube.com/embed/${L[1]}?rel=0&modestbranding=1&showinfo=0&autoplay=0&enablejsapi=1&origin=${window.location.origin}&widget_referrer=${window.location.origin}&hl=he&cc_load_policy=1`:k},y=()=>{if(typeof window<"u"&&!window.YT){const k=document.createElement("script");k.src="https://www.youtube.com/iframe_api";const F=document.getElementsByTagName("script")[0];F.parentNode.insertBefore(k,F)}},w=g(n.videoUrl);S.useEffect(()=>{i(!1),l(!1),h(!1),p(!0)},[t.id]),S.useEffect(()=>{u&&w&&w.includes("youtube.com")&&y()},[u,w]);const b=()=>{p(!1),i(!0),h(!1),e(t.id,{started:!0,isCorrect:!0})},_=()=>{p(!1),h(!0),console.warn("Video failed to load:",n.videoUrl)},P=()=>{h(!1),p(!0),i(!1)},A=()=>{p(!1),h(!1)};return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",children:a.jsxs("div",{className:"max-w-5xl w-full h-full flex flex-col",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-4xl font-bold text-white mb-4",style:{textShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:t.title}),a.jsx("p",{className:"text-xl text-gray-200",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:n.description})]}),a.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700/50 shadow-2xl flex-1 flex flex-col justify-center",children:[a.jsxs("div",{className:"relative bg-gray-900 rounded-xl overflow-hidden shadow-2xl flex-1 flex flex-col justify-center",children:[a.jsx("div",{className:"aspect-video",children:!u&&w?a.jsx("iframe",{src:w,title:t.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,onLoad:A,onError:_,sandbox:"allow-same-origin allow-scripts allow-presentation allow-popups allow-popups-to-escape-sandbox",loading:"lazy"},`${t.id}-${s}`):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-800",children:a.jsxs("div",{className:"text-center",children:[a.jsx(To,{className:"w-16 h-16 mx-auto mb-4 text-red-400"}),a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"  "}),a.jsx("p",{className:"text-gray-400 mb-4",children:"     "}),a.jsxs("button",{onClick:P,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[a.jsx(Cs,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})]})})}),f&&!u&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),a.jsx("p",{className:"text-white",children:" ..."})]})}),!s&&!f&&!u&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 hover:bg-black/20 transition-all duration-300 cursor-pointer",onClick:b,children:a.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full p-4",children:a.jsx(Sn,{className:"w-12 h-12 text-white"})})})]}),o&&a.jsx("div",{className:"mt-8 text-center",children:a.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-xl p-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-green-400 mb-2",children:" !"}),a.jsx("p",{className:"text-gray-300",children:"   "})]})}),u&&a.jsxs("div",{className:"mt-4 text-center",children:[a.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"    -YouTube:"}),a.jsx("a",{href:n.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:a.jsx("span",{children:" -YouTube"})})]})]})]})})},w6=({item:t,isSelected:e,onSelect:r,showRemove:n=!1,onRemove:s})=>a.jsx("div",{onClick:()=>r(t),className:`p-5 mb-4 rounded-2xl border-4 bg-gray-700/90 shadow-2xl transition-all duration-200 cursor-pointer text-lg md:text-xl lg:text-2xl font-bold tracking-wide select-none focus:outline-none focus:ring-4 focus:ring-blue-400/50 ${e?"border-blue-400 bg-blue-800/80 shadow-2xl scale-110":"border-gray-600 hover:border-purple-400 hover:bg-purple-800/60 hover:scale-105"}`,tabIndex:0,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[t.image&&a.jsx("img",{src:t.image,alt:t.text,className:"w-8 h-8 rounded-lg object-cover"}),a.jsx("span",{className:"font-semibold text-white text-lg md:text-xl lg:text-2xl",children:t.text})]}),e&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qt,{className:"h-5 w-5 text-blue-400"}),n&&a.jsx("button",{onClick:i=>{i.stopPropagation(),s(t.id)},className:"p-1 rounded-full bg-red-500 hover:bg-red-600 transition-colors",children:a.jsx(li,{className:"h-4 w-4 text-white"})})]})]})}),nq=({id:t,category:e,items:r,onRemove:n,onItemClick:s,selectedItem:i})=>a.jsxs("div",{className:`min-h-[60px] p-4 rounded-2xl border-4 transition-all duration-300 cursor-pointer text-lg md:text-xl font-bold ${i?"border-blue-400 bg-blue-900/60 shadow-2xl scale-105":"border-gray-600 bg-gray-800/80"}`,style:{borderColor:i?"#60a5fa":e.color,backgroundColor:i?"rgba(30, 58, 138, 0.6)":"rgba(31, 41, 55, 0.8)"},onClick:()=>i&&s(t),tabIndex:0,children:[a.jsxs("div",{className:"mb-1",children:[a.jsx("h5",{className:"font-bold text-lg md:text-xl text-white mb-1",style:{color:e.color},children:e.name}),a.jsx("p",{className:"text-base text-gray-300",children:e.description})]}),a.jsx("div",{className:"space-y-1",children:r.map(o=>a.jsx(w6,{item:o,isSelected:!1,onSelect:()=>{},onRemove:n,showRemove:!0},o.id))}),r.length===0&&a.jsxs("div",{className:"text-center py-2 text-gray-400 border-2 border-dashed border-gray-600 rounded-lg",children:[a.jsx("div",{className:"text-xl mb-1",children:""}),a.jsx("p",{className:"text-xs font-medium",children:"     "}),a.jsx("p",{className:"text-xs text-gray-500",children:"Click item then category"})]})]}),sq=({items:t,onItemSelect:e,selectedItem:r})=>a.jsxs("div",{className:"min-h-[120px] p-4 rounded-2xl border-4 border-dashed border-gray-500 bg-gray-800/60 backdrop-blur-sm",children:[a.jsx("div",{className:"space-y-1",children:t.map(n=>a.jsx(w6,{item:n,isSelected:(r==null?void 0:r.id)===n.id,onSelect:e,onRemove:()=>{},showRemove:!1},n.id))}),t.length===0&&a.jsxs("div",{className:"text-center py-3 text-gray-400",children:[a.jsx("div",{className:"text-2xl mb-1",children:""}),a.jsx("p",{className:"text-sm font-medium",children:"  "}),a.jsx("p",{className:"text-xs text-gray-500",children:"All items placed"})]})]}),aq=({exercise:t,onComplete:e})=>{const[r,n]=S.useState([]),[s,i]=S.useState({}),[o,l]=S.useState(!1),[u,h]=S.useState(!1),[f,p]=S.useState(!1),[g,y]=S.useState(null),w=(t==null?void 0:t.categories)||[],b=(t==null?void 0:t.items)||[];S.useEffect(()=>{n(b.map(I=>({...I,id:`item-${I.id}`,isPlaced:!1})));const L={};w.forEach(I=>{L[I.id]={...I,items:[]}}),i(L)},[b,w]);const _=L=>{y(L)},P=L=>{g&&(n(I=>I.filter(N=>N.id!==g.id)),i(I=>({...I,[L]:{...I[L],items:[...I[L].items,{...g,isPlaced:!0}]}})),y(null))},A=L=>{if(o)return;let I=null,N=null;Object.entries(s).forEach(([T,R])=>{const B=R.items.findIndex(z=>z.id===L);B!==-1&&(I=R.items[B],N=T)}),!(!I||!N)&&(i(T=>({...T,[N]:{...T[N],items:T[N].items.filter(R=>R.id!==L)}})),n(T=>[...T,{...I,isPlaced:!1}]))},k=()=>{let L=!0,I=0;Object.values(s).forEach(N=>{I+=N.items.length,N.items.forEach(T=>{T.correctCategory!==N.id&&(L=!1)})}),I!==b.length&&(L=!1),h(L),l(!0),p(!0),setTimeout(()=>{p(!1),e(L)},3e3)},F=()=>{n(b.map(I=>({...I,id:`item-${I.id}`,isPlaced:!1})));const L={};w.forEach(I=>{L[I.id]={...I,items:[]}}),i(L),l(!1),h(!1),p(!1),y(null)};return a.jsxs("div",{className:"space-y-4 max-w-7xl mx-auto h-full flex flex-col",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 flex-1",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-xl font-bold text-blue-300 text-center mb-3",children:" "}),a.jsx(sq,{items:r,onItemSelect:_,selectedItem:g})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-xl font-bold text-green-300 text-center mb-3",children:""}),w.map(L=>{var I;return a.jsx(nq,{id:L.id,category:L,items:((I=s[L.id])==null?void 0:I.items)||[],onRemove:A,onItemClick:P,selectedItem:g},L.id)})]})]}),a.jsxs("div",{className:"flex justify-center space-x-4 space-x-reverse pt-4",children:[a.jsxs("button",{onClick:F,className:"px-6 py-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-lg border border-gray-600 hover:border-gray-500 transition-all duration-200 flex items-center gap-2",children:[a.jsx(O3,{className:"h-5 w-5"})," "]}),a.jsxs("button",{onClick:k,disabled:Object.values(s).reduce((L,I)=>L+I.items.length,0)!==b.length,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg border border-blue-500 hover:border-blue-400 transition-all duration-200 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Qt,{className:"h-5 w-5"})," "]})]}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-base text-gray-300",children:[" : ",Object.values(s).reduce((L,I)=>L+I.items.length,0)," / ",b.length]})}),f&&a.jsxs("div",{className:`text-center p-4 rounded-xl border-2 ${u?"bg-green-900/30 text-green-200 border-green-500":"bg-red-900/30 text-red-200 border-red-500"}`,children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[u?a.jsx(Qt,{className:"h-6 w-6"}):a.jsx(li,{className:"h-6 w-6"}),a.jsx("span",{className:"text-xl font-bold",children:u?"!   !":" !"})]}),a.jsx("p",{className:"text-base",children:u?" !       !":"   .  !"})]})]})},iq=({exercise:t,onComplete:e})=>{const r=(t==null?void 0:t.pairs)||[],[n,s]=S.useState(null),[i,o]=S.useState(null),[l,u]=S.useState({}),[h,f]=S.useState(!1),[p,g]=S.useState(!1),[y,w]=S.useState(!1),[b,_]=S.useState(0),P=ie=>ie,A=ie=>{h||l[ie]!==void 0||(s(ie),o(null))},k=ie=>{h||Object.values(l).includes(ie)||o(ie)},F=()=>{if(n===null||i===null)return;const ie={...l,[n]:i};u(ie),s(null),o(null),P(n)===i&&_(b+1)},L=()=>{const Z=Object.keys(l).filter(ne=>P(parseInt(ne))===l[ne]).length===r.length;g(Z),f(!0),w(!0),setTimeout(()=>{w(!1),e(Z)},3e3)},I=()=>{u({}),s(null),o(null),f(!1),g(!1),w(!1),_(0)},N=ie=>Object.values(l).includes(ie),T=ie=>{const Z=l[ie];return Z!==void 0&&P(ie)===Z},R=ie=>ie.tool||ie.left||ie.command||"",B=ie=>ie.description||ie.right||"",z=ie=>ie.icon||"",O=()=>r.length>0?r[0].tool?" ":(r[0].command,""):"",D=()=>(r.length>0&&r[0].description,"");return a.jsxs("div",{className:"space-y-4 max-w-6xl mx-auto h-full flex flex-col",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 flex-1",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-xl font-bold text-purple-300 text-center mb-3",children:O()}),a.jsx("div",{className:"space-y-2",children:r.map((ie,Z)=>a.jsx(Ke.div,{className:`p-5 rounded-2xl border-4 cursor-pointer transition-all duration-200 text-lg md:text-xl lg:text-2xl font-bold tracking-wide select-none focus:outline-none focus:ring-4 focus:ring-blue-400/50 ${n===Z?"border-blue-400 bg-blue-800/60 shadow-2xl scale-105":l[Z]!==void 0?T(Z)?"border-green-400 bg-green-800/40":"border-red-400 bg-red-800/40":"border-gray-600 bg-gray-700/80 hover:border-purple-400 hover:bg-purple-800/40 hover:scale-105"}`,onClick:()=>A(Z),whileHover:l[Z]===void 0?{scale:1.02}:{},whileTap:l[Z]===void 0?{scale:.98}:{},tabIndex:0,children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-2xl md:text-3xl",children:z(ie)}),a.jsx("span",{className:"font-semibold text-white text-lg md:text-xl lg:text-2xl",children:R(ie)}),l[Z]!==void 0&&a.jsx(Ke.div,{initial:{scale:0},animate:{scale:1},className:"ml-auto",children:T(Z)?a.jsx(Qt,{className:"h-6 w-6 text-green-400"}):a.jsx(li,{className:"h-6 w-6 text-red-400"})})]})},`left-${Z}`))})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-xl font-bold text-green-300 text-center mb-3",children:D()}),a.jsx("div",{className:"space-y-2",children:r.map((ie,Z)=>a.jsx(Ke.div,{className:`p-5 rounded-2xl border-4 cursor-pointer transition-all duration-200 text-lg md:text-xl lg:text-2xl font-bold tracking-wide select-none focus:outline-none focus:ring-4 focus:ring-green-400/50 ${i===Z?"border-blue-400 bg-blue-800/60 shadow-2xl scale-105":N(Z)?"border-gray-500 bg-gray-600/60 opacity-60":"border-gray-600 bg-gray-700/80 hover:border-green-400 hover:bg-green-800/40 hover:scale-105"}`,onClick:()=>k(Z),whileHover:N(Z)?{}:{scale:1.02},whileTap:N(Z)?{}:{scale:.98},tabIndex:0,children:a.jsx("div",{className:"flex items-center gap-4",children:a.jsx("span",{className:"font-semibold text-white text-lg md:text-xl lg:text-2xl",children:B(ie)})})},`right-${Z}`))})]})]}),n!==null&&i!==null&&a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:a.jsxs(Ke.button,{onClick:F,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg border border-blue-500 hover:border-blue-400 transition-all duration-200 flex items-center gap-2 mx-auto",whileHover:{scale:1.05},whileTap:{scale:.95},children:[a.jsx(If,{className:"h-5 w-5"})," "]})}),a.jsxs("div",{className:"flex justify-center space-x-4 space-x-reverse pt-4",children:[a.jsxs(Ke.button,{onClick:I,className:"px-6 py-3 bg-gray-700/50 hover:bg-gray-600/50 text-white rounded-lg border border-gray-600 hover:border-gray-500 transition-all duration-200 flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[a.jsx(O3,{className:"h-5 w-5"})," "]}),a.jsxs(Ke.button,{onClick:L,disabled:Object.keys(l).length!==r.length,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg border border-blue-500 hover:border-blue-400 transition-all duration-200 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:Object.keys(l).length===r.length?{scale:1.05}:{},whileTap:Object.keys(l).length===r.length?{scale:.95}:{},children:[a.jsx(Qt,{className:"h-5 w-5"})," "]})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:"text-base text-gray-300",children:[": ",Object.keys(l).length," / ",r.length]}),b>0&&a.jsxs("p",{className:"text-base text-green-400 font-semibold",children:[": ",b," / ",Object.keys(l).length]})]}),y&&a.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`text-center p-6 rounded-xl border-2 ${p?"bg-green-900/30 text-green-200 border-green-500":"bg-red-900/30 text-red-200 border-red-500"}`,children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[p?a.jsx(Qt,{className:"h-8 w-8"}):a.jsx(li,{className:"h-8 w-8"}),a.jsx("span",{className:"text-2xl font-bold",children:p?"!   !":" !"})]}),a.jsx("p",{className:"text-lg",children:p?" !        !":"   .  !"})]})]})},qT=({exercise:t,onComplete:e})=>{var O;const r=(t==null?void 0:t.questions)&&t.questions.length>1,[n,s]=S.useState(0),[i,o]=S.useState({}),[l,u]=S.useState(!1),[h,f]=S.useState(0),[p,g]=S.useState(null),[y,w]=S.useState(!1),[b,_]=S.useState(!1),[P,A]=S.useState(!1),[k,F]=S.useState(!1),L=r?t.questions[n]:t,I=r?t.questions.length:1,N=D=>{if(r){if(l)return;o(ie=>({...ie,[n]:D}))}else{if(y)return;g(D)}},T=()=>{if(r){let D=0;t.questions.forEach((ie,Z)=>{i[Z]===ie.correctAnswer&&D++}),f(D),u(!0),setTimeout(()=>{e(D===I)},3e3)}else{if(!p)return;const D=p===t.correctAnswer;A(D),w(!0),F(!0),setTimeout(()=>{F(!1),e(D)},3e3)}},R=()=>{n<I-1&&s(n+1)},B=()=>{n>0&&s(n-1)},z=D=>r?l?D===L.correctAnswer?"border-green-400 bg-green-800/30":D===i[n]&&D!==L.correctAnswer?"border-red-400 bg-red-800/30":"border-gray-600 bg-gray-600/50 opacity-60":i[n]===D?"border-blue-400 bg-blue-800/50":"border-gray-600 bg-gray-700/50 hover:border-blue-400 hover:bg-blue-800/30":y?D===t.correctAnswer?"border-green-400 bg-green-800/30":D===p&&D!==t.correctAnswer?"border-red-400 bg-red-800/30":"border-gray-600 bg-gray-600/50 opacity-60":p===D?"border-blue-400 bg-blue-800/50":"border-gray-600 bg-gray-700/50 hover:border-blue-400 hover:bg-blue-800/30";return r&&l?a.jsx("div",{className:"space-y-6 max-w-4xl mx-auto",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-3xl font-bold text-white mb-4",children:" !"}),a.jsxs("div",{className:"bg-green-900/30 border-2 border-green-500 rounded-xl p-8",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[a.jsx(Qt,{className:"h-12 w-12 text-green-400"}),a.jsxs("span",{className:"text-3xl font-bold text-green-200",children:[": ",h," / ",I]})]}),a.jsx("p",{className:"text-xl text-green-200",children:h===I?"!   !":` ! ${h}    ${I}`})]})]})}):a.jsxs("div",{className:"space-y-4 max-w-4xl mx-auto h-full flex flex-col",children:[r&&!l&&a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("button",{onClick:B,disabled:n===0,className:"flex items-center gap-2 px-4 py-2 bg-gray-700/50 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Mc,{className:"h-5 w-5"}),""]}),a.jsxs("span",{className:"text-gray-300",children:[n+1," / ",I]}),a.jsxs("button",{onClick:R,disabled:n===I-1,className:"flex items-center gap-2 px-4 py-2 bg-gray-700/50 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:["",a.jsx(dx,{className:"h-5 w-5"})]})]}),a.jsxs("div",{className:"text-center mb-6",children:[(L==null?void 0:L.image)&&a.jsx("div",{className:"mb-4",children:a.jsx("img",{src:L.image,alt:"Question",className:"mx-auto max-w-full h-auto rounded-lg shadow-lg",style:{maxHeight:"300px"}})}),(L==null?void 0:L.text)&&a.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-6 border border-gray-700/50",children:[a.jsx("h3",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-white mb-3 leading-relaxed",children:L.text}),(L==null?void 0:L.options)&&L.options.length===4&&a.jsx("div",{className:"bg-blue-600/20 border border-blue-500/30 rounded-lg p-3 mb-3",children:a.jsx("p",{className:"text-blue-200 font-semibold text-base md:text-lg",children:"    4 "})}),(L==null?void 0:L.subtext)&&a.jsx("p",{className:"text-gray-300 text-base md:text-lg",children:L.subtext})]})]}),a.jsx("div",{className:"space-y-2 flex-1",children:(O=L==null?void 0:L.options)==null?void 0:O.map((D,ie)=>{const Z=typeof D=="string"?D:D.text,ne=D.id||ie;return a.jsxs(Ke.div,{className:`p-5 rounded-2xl border-4 cursor-pointer transition-all duration-200 text-lg md:text-xl lg:text-2xl font-bold tracking-wide select-none focus:outline-none focus:ring-4 focus:ring-blue-400/50 ${z(ne)}`,onClick:()=>N(ne),whileHover:!y&&!l?{scale:1.05}:{},whileTap:!y&&!l?{scale:.97}:{},tabIndex:0,children:[a.jsx("div",{className:`w-10 h-10 rounded-full border-4 flex items-center justify-center font-bold text-xl md:text-2xl lg:text-3xl ${(r?i[n]:p)===ne?"border-blue-400 bg-blue-400 text-white":"border-gray-500 bg-gray-600 text-gray-300"}`,children:String.fromCharCode(65+ie)}),a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[typeof D=="object"&&D.icon&&a.jsx("span",{className:"text-2xl md:text-3xl",children:D.icon}),a.jsx("span",{className:"font-semibold text-white text-lg md:text-xl lg:text-2xl",children:Z})]}),(r&&l||!r&&y)&&ne===L.correctAnswer&&a.jsx(Ke.div,{initial:{scale:0},animate:{scale:1},children:a.jsx(Qt,{className:"h-5 w-5 text-green-400"})}),(r&&l||!r&&y)&&ne===(r?i[n]:p)&&ne!==L.correctAnswer&&a.jsx(Ke.div,{initial:{scale:0},animate:{scale:1},children:a.jsx(li,{className:"h-5 w-5 text-red-400"})})]},ne)})}),(L==null?void 0:L.hint)&&a.jsxs("div",{className:"text-center",children:[a.jsxs("button",{onClick:()=>_(!b),className:"flex items-center gap-2 mx-auto text-purple-300 hover:text-purple-200 transition-colors",children:[a.jsx(LB,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium text-sm",children:""})]}),b&&a.jsx(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-2 p-3 bg-yellow-900/30 border-2 border-yellow-500 rounded-lg",children:a.jsx("p",{className:"text-yellow-200 font-medium text-sm",children:L.hint})})]}),a.jsx("div",{className:"text-center",children:r?a.jsxs(Ke.button,{onClick:T,disabled:Object.keys(i).length!==I,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg border border-blue-500 hover:border-blue-400 transition-all duration-200 flex items-center gap-2 mx-auto disabled:opacity-50 disabled:cursor-not-allowed",whileHover:Object.keys(i).length===I?{scale:1.05}:{},whileTap:Object.keys(i).length===I?{scale:.95}:{},children:[a.jsx(If,{className:"h-5 w-5"})," "]}):a.jsxs(Ke.button,{onClick:T,disabled:!p||y,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg border border-blue-500 hover:border-blue-400 transition-all duration-200 flex items-center gap-2 mx-auto disabled:opacity-50 disabled:cursor-not-allowed",whileHover:p&&!y?{scale:1.05}:{},whileTap:p&&!y?{scale:.95}:{},children:[a.jsx(If,{className:"h-5 w-5"})," "]})}),!r&&k&&a.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`text-center p-4 rounded-xl border-2 ${P?"bg-green-900/30 text-green-200 border-green-500":"bg-red-900/30 text-red-200 border-red-500"}`,children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[P?a.jsx(Qt,{className:"h-6 w-6"}):a.jsx(li,{className:"h-6 w-6"}),a.jsx("span",{className:"text-xl font-bold",children:P?"!  !":" !"})]}),(L==null?void 0:L.explanation)&&a.jsx("p",{className:"text-base",children:L.explanation})]})]})},oq=({exercise:t,onComplete:e})=>{const[r,n]=S.useState(t.budget||100),[s,i]=S.useState([]),[o,l]=S.useState(null),[u,h]=S.useState(!1),[f,p]=S.useState({message:"",isPositive:!0}),g=(w,b,_)=>{if(r<_){p({message:"      !",isPositive:!1}),h(!0),setTimeout(()=>h(!1),3e3);return}n(A=>A-_),i(A=>[...A,{taskId:w,action:b,points:_}]),p({message:`  !  ${_} `,isPositive:!0}),h(!0),setTimeout(()=>h(!1),3e3);const P=t.tasks.reduce((A,k)=>A+k.options.length,0);s.length+1>=P&&setTimeout(()=>{e(!0)},2e3)},y=w=>{switch(w){case"desktop":return a.jsx(Sd,{className:"h-6 w-6"});case"files":return a.jsx(jB,{className:"h-6 w-6"});case"settings":return a.jsx(_o,{className:"h-6 w-6"});case"performance":return a.jsx(Qn,{className:"h-6 w-6"});default:return a.jsx(TB,{className:"h-6 w-6"})}};return a.jsxs("div",{className:"w-full max-w-6xl mx-auto h-full flex flex-col",children:[a.jsx("div",{className:"bg-gray-700/50 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{children:a.jsx("p",{className:"text-gray-300 text-sm",children:"    "})}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-xl font-bold text-green-400",children:r}),a.jsx("div",{className:"text-xs text-gray-400",children:" "})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 flex-1",children:t.tasks.map(w=>a.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[y(w.id),a.jsxs("div",{children:[a.jsx("h4",{className:"text-base font-semibold text-white",children:w.name}),a.jsx("p",{className:"text-xs text-gray-400",children:w.description})]})]}),a.jsx("div",{className:"space-y-2",children:w.options.map((b,_)=>a.jsxs("button",{onClick:()=>g(w.id,b.action,b.points),disabled:r<b.points,className:"w-full flex justify-between items-center p-2 rounded-lg bg-gray-700/30 hover:bg-gray-600/40 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 border border-gray-600/30 hover:border-gray-500/50",children:[a.jsx("span",{className:"text-white text-sm",children:b.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-xs text-gray-400",children:[b.points," "]}),s.some(P=>P.taskId===w.id&&P.action===b.action)&&a.jsx(Qt,{className:"h-4 w-4 text-green-400"})]})]},_))})]},w.id))}),u&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${f.isPositive?"bg-green-600/90":"bg-red-600/90"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[f.isPositive?a.jsx(Qt,{className:"h-5 w-5 text-white"}):a.jsx(li,{className:"h-5 w-5 text-white"}),a.jsx("span",{className:"text-white font-medium",children:f.message})]})}),a.jsxs("div",{className:"mt-4 bg-gray-700/30 rounded-lg p-3",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-white font-medium text-sm",children:""}),a.jsxs("span",{className:"text-gray-400 text-sm",children:[s.length," / ",t.tasks.reduce((w,b)=>w+b.options.length,0)]})]}),a.jsx("div",{className:"w-full bg-gray-600/50 rounded-full h-2",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${s.length/t.tasks.reduce((w,b)=>w+b.options.length,0)*100}%`}})})]})]})},lq=({commands:t=[],instructions:e="Try Linux commands in this safe simulator",onComplete:r})=>{const[n,s]=S.useState(""),[i,o]=S.useState([]),[l,u]=S.useState([]),[h,f]=S.useState(0),[p,g]=S.useState(!1),y=S.useRef(null),w=Array.isArray(t)?t:[];S.useEffect(()=>{y.current&&y.current.focus()},[]);const b=A=>{if(A.preventDefault(),!n.trim())return;const k=[...i,n];o(k);const F=w.find(L=>L.command.toLowerCase()===n.toLowerCase());F?(u([...l,{command:n,output:F.output,description:F.description,success:!0}]),f(h+1),g(!1)):(u([...l,{command:n,output:"Command not found. Try another command.",success:!1}]),g(!0)),s("")},_=A=>{A.key==="Enter"&&b(A)},P=w.filter(A=>!i.includes(A.command)).slice(0,3);return a.jsxs("div",{className:"linux-simulator bg-black text-green-400 p-4 rounded-lg font-mono h-full flex flex-col",children:[a.jsx("div",{className:"mb-3",children:a.jsxs("div",{className:"text-sm text-gray-400",children:["  : ",P.map(A=>a.jsx("span",{className:"bg-gray-800 px-2 py-1 rounded mx-1",children:A.command},A.command))]})}),a.jsxs("div",{className:"terminal-output bg-gray-900 p-3 rounded mb-3 h-48 overflow-y-auto flex-1",children:[a.jsxs("div",{className:"mb-2 text-gray-500",children:["student@linux:~$ ",a.jsx("span",{className:"text-green-400",children:"welcome to Linux simulator!"})]}),l.map((A,k)=>a.jsxs("div",{className:"mb-2",children:[a.jsxs("div",{className:"text-gray-500",children:["student@linux:~$ ",a.jsx("span",{className:"text-white",children:A.command})]}),a.jsx("div",{className:`ml-4 ${A.success?"text-green-400":"text-red-400"}`,children:A.output}),A.description&&a.jsxs("div",{className:"ml-4 text-blue-400 text-xs italic",children:[" ",A.description]})]},k)),p&&a.jsx("div",{className:"text-yellow-400 text-xs",children:"    : ls, pwd, whoami, date"})]}),a.jsxs("form",{onSubmit:b,className:"flex items-center mb-3",children:[a.jsx("span",{className:"text-gray-500 mr-2",children:"student@linux:~$"}),a.jsx("input",{ref:y,type:"text",value:n,onChange:A=>s(A.target.value),onKeyDown:_,className:"flex-1 bg-transparent text-green-400 outline-none border-none",placeholder:" ..."})]}),a.jsxs("div",{className:"text-xs text-gray-400 mb-3",children:[": ",h," / ",w.length," ",a.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mt-1",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${w.length>0?h/w.length*100:0}%`}})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-bold text-white mb-2",children:" :"}),a.jsx("div",{className:"grid grid-cols-2 gap-1 text-xs",children:w.map((A,k)=>a.jsxs("div",{className:`p-1 rounded ${i.includes(A.command)?"bg-green-900 text-green-300":"bg-gray-800 text-gray-400"}`,children:[a.jsx("div",{className:"font-bold",children:A.command}),a.jsx("div",{className:"text-xs opacity-75",children:A.description})]},k))})]})]})},cq=({exercise:t,onComplete:e})=>{const[r,n]=S.useState(null),[s,i]=S.useState([]),[o,l]=S.useState(!1),[u,h]=S.useState(0),[f,p]=S.useState(!1),{components:g,connections:y}=t,w=k=>{switch(k){case"computer":return a.jsx(Sd,{className:"h-8 w-8"});case"server":return a.jsx(L3,{className:"h-8 w-8"});case"router":return a.jsx(JB,{className:"h-8 w-8"});default:return a.jsx(Rf,{className:"h-8 w-8"})}},b=k=>{switch(k){case"computer":return"bg-blue-500";case"server":return"bg-green-500";case"router":return"bg-purple-500";default:return"bg-gray-500"}},_=k=>{if(r===null)n(k);else if(r.name!==k.name){const F={from:r.name,to:k.name,protocol:"HTTP"};i([...s,F]),n(null)}else n(null)},P=()=>{l(!0),h(0);const k=setInterval(()=>{h(F=>F>=s.length?(clearInterval(k),l(!1),p(!0),setTimeout(()=>e(!0),2e3),F):F+1)},1e3)},A=()=>{i([]),n(null),l(!1),h(0),p(!1)};return a.jsxs("div",{className:"space-y-4 max-w-6xl mx-auto h-full flex flex-col",children:[a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-xl border-2 border-gray-600 flex-1 relative",children:[a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:g.map((k,F)=>a.jsx(Ke.div,{className:`p-3 rounded-xl border-2 cursor-pointer transition-all duration-200 ${(r==null?void 0:r.name)===k.name?"border-yellow-400 bg-yellow-500/20":"border-gray-600 bg-gray-700/50 hover:border-blue-400 hover:bg-blue-800/30"}`,onClick:()=>_(k),whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`${b(k.type)} rounded-lg p-2 mb-2 mx-auto w-fit`,children:w(k.type)}),a.jsx("h4",{className:"font-bold text-white text-base mb-1",children:k.name}),a.jsx("p",{className:"text-gray-300 text-xs",children:k.ip})]})},k.name))}),a.jsx("div",{className:"space-y-2",children:s.map((k,F)=>a.jsxs(Ke.div,{className:`flex items-center justify-between p-3 rounded-lg border-2 ${o&&F<u?"border-green-400 bg-green-800/30":"border-gray-600 bg-gray-700/50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"text-blue-400 font-bold text-sm",children:k.from}),a.jsx(bo,{className:"h-4 w-4 text-blue-400"}),a.jsx("div",{className:"text-green-400 font-bold text-sm",children:k.to})]}),a.jsx("div",{className:"text-purple-400 font-mono text-sm",children:k.protocol}),o&&F<u&&a.jsx(Qt,{className:"h-5 w-5 text-green-400"})]},`${k.from}-${k.to}`))}),r&&a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-4 p-3 bg-blue-900/30 border-2 border-blue-500 rounded-lg",children:a.jsxs("p",{className:"text-blue-200 text-center text-sm",children:["       ",r.name]})})]}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsxs(Ke.button,{onClick:P,disabled:s.length===0||o,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg border border-green-500 hover:border-green-400 transition-all duration-200 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:s.length>0&&!o?{scale:1.05}:{},whileTap:s.length>0&&!o?{scale:.95}:{},children:[a.jsx(bo,{className:"h-4 w-4"})," "]}),a.jsxs(Ke.button,{onClick:A,disabled:o,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg border border-red-500 hover:border-red-400 transition-all duration-200 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:o?{}:{scale:1.05},whileTap:o?{}:{scale:.95},children:[a.jsx(Rf,{className:"h-4 w-4"}),""]})]}),o&&a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-yellow-200 text-base",children:[" ...  ",u+1,"  ",s.length]})}),f&&a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-green-900/30 border-2 border-green-500 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[a.jsx(Qt,{className:"h-6 w-6 text-green-400"}),a.jsx("span",{className:"text-xl font-bold text-green-200",children:"  !"})]}),a.jsx("p",{className:"text-green-200",children:"   "})]})})]})},uq=({content:t,onComplete:e})=>{const[r,n]=S.useState(null),[s,i]=S.useState(0),[o,l]=S.useState(!1),[u,h]=S.useState(t.duration||300);S.useEffect(()=>{if(u>0&&!o){const w=setTimeout(()=>h(u-1),1e3);return()=>clearTimeout(w)}else u===0&&e&&e()},[u,o,e]);const f=w=>{n(w),i(0),l(!0)},p=()=>{s<r.steps.length-1?i(s+1):l(!1)},g=()=>{n(null),i(0),l(!1)},y=w=>{const b=Math.floor(w/60),_=w%60;return`${b}:${_.toString().padStart(2,"0")}`};return a.jsxs("div",{className:"protocol-simulator bg-white rounded-lg shadow-lg p-4 max-w-4xl mx-auto h-full flex flex-col",children:[a.jsx("div",{className:"text-center mb-4",children:a.jsxs("div",{className:"text-sm text-gray-500",children:[" : ",y(u)]})}),r?a.jsxs("div",{className:"simulation-area flex-1",children:[a.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-blue-600 text-white p-4 rounded-lg mb-4",children:[a.jsx("h4",{className:"text-lg font-bold mb-2",children:r.name}),a.jsx("p",{className:"text-xs opacity-90 mb-3",children:r.description}),a.jsxs("div",{className:"steps-container",children:[a.jsx("h5",{className:"text-base font-semibold mb-2",children:" :"}),a.jsx("div",{className:"space-y-1",children:r.steps.map((w,b)=>a.jsx("div",{className:`p-2 rounded-lg transition-all duration-500 ${b<=s?"bg-white text-green-600 font-semibold":"bg-white bg-opacity-20 text-white"}`,children:w},b))})]}),a.jsxs("div",{className:"mt-4 flex justify-center space-x-3",children:[o&&s<r.steps.length-1&&a.jsx("button",{onClick:p,className:"bg-white text-green-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors text-sm",children:" "}),a.jsx("button",{onClick:g,className:"bg-white text-gray-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors text-sm",children:" "})]})]}),!o&&s===r.steps.length-1&&a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-3 py-2 rounded-lg",children:[a.jsx("p",{className:"font-semibold text-sm",children:"  ! "}),a.jsxs("p",{className:"text-xs mt-1",children:["  ",r.name," "]})]})})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4 flex-1",children:t.protocols.map(w=>a.jsxs("button",{onClick:()=>f(w),className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white p-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 transform hover:scale-105",children:[a.jsx("h4",{className:"text-base font-semibold mb-2",children:w.name}),a.jsx("p",{className:"text-xs opacity-90",children:w.description})]},w.id))}),a.jsx("div",{className:"text-center mt-4",children:a.jsx("button",{onClick:()=>e&&e(),className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors text-sm",children:" "})})]})},dq=({content:t,onComplete:e})=>{const[r,n]=S.useState(t.initialHtml||"<h1> !</h1>"),[s,i]=S.useState(t.initialCss||"h1 { color: blue; }"),[o,l]=S.useState(t.initialJs||'console.log("Hello World!");'),[u,h]=S.useState(""),[f,p]=S.useState("html"),[g,y]=S.useState(t.duration||600),[w,b]=S.useState(!1),_=S.useRef(null);S.useEffect(()=>{if(g>0){const I=setTimeout(()=>y(g-1),1e3);return()=>clearTimeout(I)}else e&&e()},[g,e]),S.useEffect(()=>{w&&P()},[r,s,o,w]);const P=()=>{try{const I=_.current;if(I&&I.contentDocument){const N=I.contentDocument;N.open(),N.write(`
          <!DOCTYPE html>
          <html dir="rtl" lang="he">
          <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <style>${s}</style>
          </head>
          <body>
            ${r}
            <script>${o}<\/script>
          </body>
          </html>
        `),N.close()}}catch(I){console.log("Iframe not ready yet:",I.message)}},A=()=>{b(!0)},k=I=>{const N=Math.floor(I/60),T=I%60;return`${N}:${T.toString().padStart(2,"0")}`},F=()=>{P()},L=()=>{n(t.initialHtml||"<h1> !</h1>"),i(t.initialCss||"h1 { color: blue; }"),l(t.initialJs||'console.log("Hello World!");')};return a.jsxs("div",{className:"code-editor bg-gray-900 rounded-xl shadow-2xl p-4 max-w-6xl mx-auto border border-gray-700 h-full flex flex-col",children:[a.jsx("div",{className:"text-center mb-4",children:a.jsxs("div",{className:"text-sm text-gray-400 bg-gray-800 px-3 py-1 rounded-lg inline-block",children:[" : ",k(g)]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 flex-1",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex space-x-2 bg-gray-800 p-2 rounded-lg",children:["html","css","js"].map(I=>a.jsx("button",{onClick:()=>p(I),className:`px-4 py-2 rounded-lg font-semibold transition-all duration-200 text-sm ${f===I?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"}`,children:I.toUpperCase()},I))}),a.jsxs("div",{className:"space-y-4",children:[f==="html"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"HTML"}),a.jsx("textarea",{value:r,onChange:I=>n(I.target.value),className:"w-full h-48 p-3 border border-gray-600 rounded-lg font-mono text-sm bg-gray-800 text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"    -HTML ..."})]}),f==="css"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"CSS"}),a.jsx("textarea",{value:s,onChange:I=>i(I.target.value),className:"w-full h-48 p-3 border border-gray-600 rounded-lg font-mono text-sm bg-gray-800 text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"    -CSS ..."})]}),f==="js"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"JavaScript"}),a.jsx("textarea",{value:o,onChange:I=>l(I.target.value),className:"w-full h-48 p-3 border border-gray-600 rounded-lg font-mono text-sm bg-gray-800 text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"    -JavaScript ..."})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:F,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all duration-200 font-semibold shadow-lg text-sm",children:" "}),a.jsx("button",{onClick:L,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all duration-200 font-semibold shadow-lg text-sm",children:""})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:""}),a.jsx("div",{className:"border border-gray-600 rounded-lg h-64 bg-gray-800 overflow-hidden",children:a.jsx("iframe",{ref:_,onLoad:A,className:"w-full h-full rounded-lg bg-white",title:"Code Output",sandbox:"allow-scripts allow-same-origin",srcDoc:"<!DOCTYPE html><html><head><meta charset='UTF-8'></head><body style='margin:0;padding:20px;font-family:Arial,sans-serif;'><h1>...</h1></body></html>"})})]})]}),a.jsxs("div",{className:"mt-4 p-3 bg-gray-800 border border-gray-700 rounded-xl",children:[a.jsx("h4",{className:"font-semibold text-blue-400 mb-2 text-sm",children:":"}),a.jsxs("ul",{className:"text-xs text-gray-300 space-y-1",children:[a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"   HTML, CSS -JavaScript"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),'   " "    ']}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"      "]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"          "]})]})]}),a.jsx("div",{className:"text-center mt-4",children:a.jsx("button",{onClick:()=>e&&e(),className:"bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-all duration-200 font-semibold shadow-lg text-sm",children:" "})})]})},hq=({content:t,onComplete:e})=>{const[r,n]=S.useState([]),[s,i]=S.useState(null),[o,l]=S.useState(t.duration||900);S.useEffect(()=>{if(o>0){const w=setTimeout(()=>l(o-1),1e3);return()=>clearTimeout(w)}else e&&e()},[o,e]);const u=[{id:"header",name:" ",icon:"",html:"<h1> </h1>",css:"h1 { color: #333; text-align: center; font-size: 2.5rem; margin: 20px 0; }"},{id:"paragraph",name:"",icon:"",html:"<p>  .      .</p>",css:"p { color: #666; font-size: 1.1rem; line-height: 1.6; margin: 15px 0; }"},{id:"image",name:"",icon:"",html:'<img src="https://via.placeholder.com/300x200" alt=" " />',css:"img { max-width: 100%; height: auto; border-radius: 8px; margin: 15px 0; }"},{id:"button",name:"",icon:"",html:`<button onclick="alert('!')"> </button>`,css:"button { background-color: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 1rem; } button:hover { background-color: #0056b3; }"},{id:"list",name:"",icon:"",html:"<ul><li> </li><li> </li><li> </li></ul>",css:"ul { margin: 15px 0; } li { color: #555; font-size: 1rem; margin: 5px 0; }"},{id:"divider",name:" ",icon:"",html:"<hr />",css:"hr { border: none; height: 2px; background-color: #ddd; margin: 20px 0; }"}],h=w=>{const b=Math.floor(w/60),_=w%60;return`${b}:${_.toString().padStart(2,"0")}`},f=w=>{const b={...w,id:`${w.id}-${Date.now()}`,order:r.length};n([...r,b])},p=w=>{n(r.filter(b=>b.id!==w))},g=()=>`
<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> </title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 20px; 
            background-color: #f5f5f5; 
        }
        .container { 
            background-color: white; 
            padding: 30px; 
            border-radius: 10px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
        }
        ${r.map(b=>b.css).join(`
`)}
    </style>
</head>
<body>
    <div class="container">
        ${r.map(b=>b.html).join(`
`)}
    </div>
</body>
</html>`,y=()=>{try{const w=g(),b=new Blob([w],{type:"text/html"}),_=URL.createObjectURL(b),P=document.createElement("a");P.href=_,P.download="my-website.html",P.click(),URL.revokeObjectURL(_)}catch(w){console.error("Error downloading website:",w),alert("  .  .")}};return a.jsxs("div",{className:"website-builder bg-gray-900 rounded-xl shadow-2xl p-8 max-w-7xl mx-auto border border-gray-700",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h3",{className:"text-3xl font-bold text-white mb-3",children:" "}),a.jsx("p",{className:"text-gray-300 mb-4 text-lg",children:t.instructions}),a.jsxs("div",{className:"text-sm text-gray-400 bg-gray-800 px-4 py-2 rounded-lg inline-block",children:[" : ",h(o)]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-1",children:[a.jsx("h4",{className:"text-xl font-semibold text-white mb-6",children:" "}),a.jsx("div",{className:"space-y-3",children:u.map(w=>a.jsx("div",{className:"p-4 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-800 transition-all duration-200 bg-gray-800/50",onClick:()=>f(w),children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-2xl",children:w.icon}),a.jsx("span",{className:"font-medium text-gray-200",children:w.name})]})},w.id))})]}),a.jsxs("div",{className:"lg:col-span-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h4",{className:"text-xl font-semibold text-white",children:"   "}),a.jsx("div",{className:"flex space-x-3",children:a.jsxs("button",{onClick:y,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all duration-200 font-semibold shadow-lg flex items-center space-x-2",children:[a.jsx("span",{children:""}),a.jsx("span",{children:" "})]})})]}),a.jsx("div",{className:"border border-gray-600 rounded-lg p-6 bg-gray-800/50 min-h-96",children:r.length===0?a.jsxs("div",{className:"text-center text-gray-400 py-20",children:[a.jsx("div",{className:"text-6xl mb-6",children:""}),a.jsx("p",{className:"text-lg",children:"        "}),a.jsx("p",{className:"text-sm mt-2 text-gray-500",children:"       "})]}):a.jsx("div",{className:"space-y-3",children:r.map((w,b)=>a.jsxs("div",{className:"p-4 bg-gray-700 border border-gray-600 rounded-lg flex items-center justify-between hover:bg-gray-600 transition-all duration-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-2xl",children:w.icon}),a.jsx("span",{className:"font-medium text-gray-200",children:w.name})]}),a.jsx("div",{className:"flex space-x-2",children:a.jsx("button",{onClick:()=>p(w.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700 transition-all duration-200",children:""})})]},w.id))})})]})]}),a.jsxs("div",{className:"mt-8 p-6 bg-gray-800 border border-gray-700 rounded-xl",children:[a.jsx("h4",{className:"font-semibold text-blue-400 mb-3 text-lg",children:":"}),a.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"       "]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),'   ""   ']}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),'   " "     ']}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"         "]})]})]}),a.jsx("div",{className:"text-center mt-8",children:a.jsx("button",{onClick:()=>e&&e(),className:"bg-gray-700 text-white px-8 py-3 rounded-lg hover:bg-gray-600 transition-all duration-200 font-semibold shadow-lg",children:" "})})]})},rt=({variant:t="default",padding:e="md",hoverable:r=!1,clickable:n=!1,className:s="",children:i,onClick:o,role:l="article",...u})=>{const h="rounded-xl transition-all duration-200",f={default:"bg-gray-900 border border-gray-700 text-white",elevated:"bg-gray-800 shadow-lg border border-gray-600 text-white",outlined:"bg-transparent border-2 border-gray-600 text-white",gradient:"bg-gradient-to-br from-cyber-blue to-cyber-purple text-white border-0",dark:"bg-gray-800 border border-gray-700 text-white",light:"bg-white border border-gray-200 text-gray-900"},p={sm:"p-3",md:"p-6",lg:"p-8",xl:"p-10"},g=n?"cursor-pointer":"",y=r?"hover:shadow-xl hover:scale-105":"",w=`${h} ${f[t]} ${p[e]} ${g} ${y} ${s}`,b=_=>{n&&o&&o(_)};return a.jsx("div",{className:w,onClick:b,role:l,tabIndex:n?0:void 0,onKeyDown:n?_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),b(_))}:void 0,...u,children:i})},fq=({content:t,onComplete:e})=>{const[r,n]=S.useState({}),[s,i]=S.useState(""),[o,l]=S.useState(null),[u,h]=S.useState(""),[f,p]=S.useState(0),[g,y]=S.useState([]),[w,b]=S.useState(t.duration||600),[_,P]=S.useState(!1);S.useEffect(()=>{const I={};t.tables.forEach(N=>{I[N.name]={columns:N.columns,data:[...N.sampleData]}}),n(I)},[t.tables]),S.useEffect(()=>{if(w>0){const I=setTimeout(()=>b(w-1),1e3);return()=>clearTimeout(I)}else e&&e({completed:g.length,total:t.exercises.length})},[w,e,g.length,t.exercises.length]);const A=()=>{h(""),l(null);const I=s.trim().toLowerCase();try{if(I.startsWith("select")){const N=I.match(/from\s+(\w+)/);N&&r[N[1]]?l(r[N[1]].data):h("  ")}else if(I.startsWith("create table")){const N=I.match(/create\s+table\s+(\w+)\s*\(([^)]+)\)/i);if(N){const T=N[1],R=N[2].split(",").map(B=>B.trim().split(" ")[0]);n(B=>({...B,[T]:{columns:R,data:[]}})),l({message:` ${T}  `})}else h("   ")}else if(I.startsWith("insert into")){const N=I.match(/insert\s+into\s+(\w+)\s*\(([^)]+)\)\s*values\s*\(([^)]+)\)/i);if(N){const T=N[1],R=N[2].split(",").map(z=>z.trim()),B=N[3].split(",").map(z=>z.trim().replace(/['"]/g,""));if(r[T]){const z={};R.forEach((O,D)=>{z[O]=B[D]}),n(O=>({...O,[T]:{...O[T],data:[...O[T].data,z]}})),l({message:"  "})}else h("  ")}else h("   ")}else h("     ")}catch{h("  ")}},k=()=>{const I=t.exercises[f];if(!I)return;const N=s.toLowerCase();let T=!1;switch(I.id){case 1:T=N.includes("create table")&&N.includes("enrollments");break;case 2:T=N.includes("insert into")&&N.includes("enrollments");break;case 3:T=N.includes("join")||N.includes("select")&&N.includes("from");break;default:T=!0}T&&!g.includes(I.id)&&y(R=>[...R,I.id])};S.useEffect(()=>{k()},[s,f]);const F=I=>{const N=Math.floor(I/60),T=I%60;return`${N}:${T.toString().padStart(2,"0")}`},L=()=>{const I=t.exercises[f];if(!I)return"";switch(I.id){case 1:return"CREATE TABLE enrollments (student_id INT, course_id INT, semester VARCHAR(20))";case 2:return"INSERT INTO enrollments (student_id, course_id, semester) VALUES (1, 1, '2024A')";case 3:return"SELECT students.name, courses.title FROM students JOIN enrollments ON students.id = enrollments.student_id JOIN courses ON courses.id = enrollments.course_id";default:return""}};return a.jsxs("div",{className:"database-simulator p-6 max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"  "}),a.jsx("p",{className:"text-gray-300 mb-4",children:t.instructions}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"text-sm text-gray-400",children:[" ",f+1,"  ",t.exercises.length]}),a.jsxs("div",{className:"text-sm font-mono bg-gray-100 px-3 py-1 rounded text-gray-800",children:[" : ",F(w)]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs(rt,{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-white",children:" "}),t.exercises[f]&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2 text-white",children:t.exercises[f].title}),a.jsx("p",{className:"text-gray-300 mb-2",children:t.exercises[f].description}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ut,{onClick:()=>P(!_),variant:"outline",size:"sm",className:"text-blue-400 border-blue-400 hover:bg-blue-400 hover:text-white",children:_?" ":" "}),_&&a.jsxs("p",{className:"text-sm text-blue-400",children:[": ",t.exercises[f].hint]})]}),a.jsx(ut,{onClick:()=>i(L()),variant:"outline",size:"sm",className:"mt-2 text-green-400 border-green-400 hover:bg-green-400 hover:text-white",children:" "})]})]}),a.jsxs(rt,{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-white",children:" SQL"}),a.jsx("textarea",{value:s,onChange:I=>i(I.target.value),placeholder:"    ...",className:"w-full h-32 p-3 border border-gray-300 rounded-lg font-mono text-sm bg-gray-800 text-white"}),a.jsx(ut,{onClick:A,className:"mt-3 bg-blue-600 hover:bg-blue-700",children:" "})]}),u&&a.jsxs(rt,{className:"bg-red-900/50 border-red-500/50",children:[a.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-2",children:""}),a.jsx("p",{className:"text-red-300",children:u})]}),o&&a.jsxs(rt,{className:"bg-green-900/50 border-green-500/50",children:[a.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:""}),o.message?a.jsx("p",{className:"text-green-300",children:o.message}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsx("tr",{className:"border-b border-green-500/30",children:o.length>0&&Object.keys(o[0]).map(I=>a.jsx("th",{className:"text-left p-2 text-green-400",children:I},I))})}),a.jsx("tbody",{children:o.map((I,N)=>a.jsx("tr",{className:"border-b border-green-500/30",children:Object.values(I).map((T,R)=>a.jsx("td",{className:"p-2 text-green-300",children:T},R))},N))})]})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs(rt,{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-white",children:" "}),a.jsx("div",{className:"space-y-4",children:Object.entries(r).map(([I,N])=>a.jsxs("div",{className:"border border-gray-600 rounded-lg p-3",children:[a.jsx("h4",{className:"font-medium mb-2 text-white",children:I}),a.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:[": ",N.columns.join(", ")]}),a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"min-w-full text-xs",children:[a.jsx("thead",{children:a.jsx("tr",{className:"border-b border-gray-600",children:N.columns.map(T=>a.jsx("th",{className:"text-left p-1 text-gray-300",children:T},T))})}),a.jsx("tbody",{children:N.data.slice(0,3).map((T,R)=>a.jsx("tr",{className:"border-b border-gray-600",children:N.columns.map(B=>a.jsx("td",{className:"p-1 text-gray-400",children:T[B]},B))},R))})]}),N.data.length>3&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["+",N.data.length-3,"  "]})]})]},I))})]}),a.jsxs(rt,{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-white",children:""}),a.jsxs("div",{className:"flex gap-2 mb-3",children:[a.jsx(ut,{onClick:()=>p(Math.max(0,f-1)),disabled:f===0,variant:"outline",size:"sm",className:"text-blue-400 border-blue-400 hover:bg-blue-400 hover:text-white",children:""}),a.jsx(ut,{onClick:()=>p(Math.min(t.exercises.length-1,f+1)),disabled:f===t.exercises.length-1,variant:"outline",size:"sm",className:"text-blue-400 border-blue-400 hover:bg-blue-400 hover:text-white",children:""})]}),a.jsx("div",{className:"space-y-2",children:t.exercises.map((I,N)=>a.jsxs("button",{onClick:()=>p(N),className:`w-full text-left p-2 rounded text-sm ${f===N?"bg-blue-600 text-white":g.includes(I.id)?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[g.includes(I.id)?" ":" ",I.title]},I.id))})]})]})]}),g.length===t.exercises.length&&a.jsxs(rt,{className:"mt-6 bg-green-900/50 border-green-500/50",children:[a.jsx("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:"  !"}),a.jsx("p",{className:"text-green-300",children:"    !"})]})]})},mq=({content:t,onComplete:e})=>{var D,ie;const[r,n]=S.useState(""),[s,i]=S.useState([{id:1,title:" ",url:"",active:!0}]),[o,l]=S.useState([]),[u,h]=S.useState([]),[f,p]=S.useState(1),[g,y]=S.useState([]),[w,b]=S.useState(0),[_,P]=S.useState(t.duration||600),[A,k]=S.useState(!0);S.useEffect(()=>{if(_>0){const Z=setTimeout(()=>P(_-1),1e3);return()=>clearTimeout(Z)}else e&&e(!0)},[_,e]);const F=Z=>{const ne=Math.floor(Z/60),H=Z%60;return`${ne}:${H.toString().padStart(2,"0")}`},L=Z=>{n(Z.target.value)},I=Z=>{if(Z.preventDefault(),r.trim()){const ne=[...u,{url:r,timestamp:new Date().toLocaleTimeString()}];h(ne);const H=s.map(q=>q.id===f?{...q,url:r,title:r.split("/").pop()||r}:q);i(H);const Q=t.tasks.find(q=>q.url===r);Q&&!g.includes(Q.id)&&(y([...g,Q.id]),b(w+Q.points)),n("")}},N=()=>{const Z={id:Math.max(...s.map(ne=>ne.id))+1,title:" ",url:"",active:!1};i([...s,Z]),p(Z.id)},T=Z=>{if(s.length>1){const ne=s.filter(H=>H.id!==Z);i(ne),f===Z&&p(ne[0].id)}},R=()=>{const Z=s.find(ne=>ne.id===f);if(Z&&Z.url){const ne={id:Date.now(),title:Z.title,url:Z.url};l([...o,ne]);const H=t.tasks.find(Q=>Q.action==="add_bookmark");H&&!g.includes(H.id)&&(y([...g,H.id]),b(w+H.points))}},B=()=>{h([]);const Z=t.tasks.find(ne=>ne.action==="clear_history");Z&&!g.includes(Z.id)&&(y([...g,Z.id]),b(w+Z.points))},z=()=>{const Z=t.tasks.find(ne=>ne.action==="privacy_settings");Z&&!g.includes(Z.id)&&(y([...g,Z.id]),b(w+Z.points))},O=()=>s.find(Z=>Z.id===f);return a.jsxs("div",{className:"browser-simulator bg-gray-900 rounded-xl shadow-2xl p-6 max-w-6xl mx-auto border border-gray-700",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-3xl font-bold text-white mb-3",children:" "}),a.jsx("p",{className:"text-gray-300 mb-4 text-lg",children:t.instructions}),a.jsxs("div",{className:"flex justify-center items-center space-x-4 text-sm",children:[a.jsxs("div",{className:"text-gray-400 bg-gray-800 px-4 py-2 rounded-lg",children:[" : ",F(_)]}),a.jsxs("div",{className:"text-green-400 bg-gray-800 px-4 py-2 rounded-lg",children:[": ",w]}),a.jsxs("div",{className:"text-blue-400 bg-gray-800 px-4 py-2 rounded-lg",children:[": ",g.length,"/",t.tasks.length]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gray-100 p-3 border-b",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>p(s[0].id),className:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:" "}),a.jsx("button",{onClick:()=>p(s[0].id),className:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:" "}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:" "}),a.jsx("button",{onClick:N,className:"px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600",children:"  "}),a.jsx("button",{onClick:R,className:"px-3 py-1 bg-yellow-500 text-white rounded text-sm hover:bg-yellow-600",children:" "}),a.jsx("button",{onClick:z,className:"px-3 py-1 bg-purple-500 text-white rounded text-sm hover:bg-purple-600",children:" "})]})}),a.jsx("div",{className:"bg-gray-200 p-2 border-b",children:a.jsx("div",{className:"flex space-x-1",children:s.map(Z=>a.jsxs("div",{className:`flex items-center px-3 py-1 rounded-t cursor-pointer ${Z.id===f?"bg-white":"bg-gray-300 hover:bg-gray-400"}`,onClick:()=>p(Z.id),children:[a.jsx("span",{className:"text-sm truncate max-w-32",children:Z.title}),s.length>1&&a.jsx("button",{onClick:ne=>{ne.stopPropagation(),T(Z.id)},className:"ml-2 text-gray-500 hover:text-red-500",children:""})]},Z.id))})}),a.jsx("div",{className:"p-3 border-b",children:a.jsxs("form",{onSubmit:I,className:"flex",children:[a.jsx("input",{type:"text",value:r,onChange:L,placeholder:"  ...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-l focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-r hover:bg-blue-600",children:""})]})}),a.jsx("div",{className:"p-6 min-h-64",children:a.jsx("div",{className:"text-center text-gray-600",children:(D=O())!=null&&D.url?a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold mb-2",children:[" : ",(ie=O())==null?void 0:ie.url]}),a.jsx("p",{children:"   ..."})]}):a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:"   !"}),a.jsx("p",{children:"     "})]})})})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:" :"}),a.jsx("div",{className:"space-y-2",children:t.tasks.map(Z=>a.jsxs("div",{className:`p-2 rounded text-sm ${g.includes(Z.id)?"bg-green-600/20 text-green-400 border border-green-500/30":"bg-gray-700/50 text-gray-300 border border-gray-600/30"}`,children:[a.jsx("div",{className:"font-semibold",children:Z.description}),a.jsxs("div",{className:"text-xs opacity-75",children:[": ",Z.points]})]},Z.id))})]}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:" :"}),o.length>0?a.jsx("div",{className:"space-y-1",children:o.map(Z=>a.jsx("div",{className:"text-sm text-gray-300 p-1 hover:bg-gray-700 rounded cursor-pointer",children:Z.title},Z.id))}):a.jsx("p",{className:"text-gray-500 text-sm",children:" "})]}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h4",{className:"text-lg font-semibold text-white",children:" :"}),a.jsx("button",{onClick:B,className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:""})]}),u.length>0?a.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:u.slice(-5).map((Z,ne)=>a.jsxs("div",{className:"text-sm text-gray-300 p-1 hover:bg-gray-700 rounded cursor-pointer",children:[a.jsx("div",{children:Z.url}),a.jsx("div",{className:"text-xs text-gray-500",children:Z.timestamp})]},ne))}):a.jsx("p",{className:"text-gray-500 text-sm",children:" "})]})]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-gray-800 border border-gray-700 rounded-xl",children:[a.jsx("h4",{className:"font-semibold text-blue-400 mb-3 text-lg",children:":"}),a.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"     "]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"     "]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"    "]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"   "]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx("span",{className:"text-blue-400 mr-2",children:""}),"   "]})]})]}),a.jsx("div",{className:"text-center mt-6",children:a.jsx("button",{onClick:()=>e&&e(!0),className:"bg-gray-700 text-white px-8 py-3 rounded-lg hover:bg-gray-600 transition-all duration-200 font-semibold shadow-lg",children:" "})})]})};function pq({length:t,includeUppercase:e,includeLowercase:r,includeNumbers:n,includeSymbols:s}){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="abcdefghijklmnopqrstuvwxyz",l="0123456789",u="!@#$%^&*()_+-=[]{}|;:,.<>?";let h="";e&&(h+=i),r&&(h+=o),n&&(h+=l),s&&(h+=u),h||(h=o);let f="";for(let p=0;p<t;p++)f+=h.charAt(Math.floor(Math.random()*h.length));return f}const gq=({options:t,tips:e=[],examples:r=[],onComplete:n})=>{const[s,i]=S.useState(""),[o,l]=S.useState(!1),[u,h]=S.useState(!1),f=()=>{const g=pq(t);i(g),l(!1),h(!0),n&&n(!0)},p=()=>{navigator.clipboard.writeText(s),l(!0)};return a.jsxs("div",{className:"flex flex-col items-center gap-6",children:[a.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg text-xl shadow-lg transition",onClick:f,children:"  "}),s&&a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("div",{className:"bg-gray-900 text-green-400 font-mono text-2xl px-6 py-3 rounded-lg shadow border border-green-500 select-all",children:s}),a.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg mt-2",onClick:p,children:o?"!":" "})]}),r&&r.length>0&&a.jsxs("div",{className:"mt-4 text-right w-full max-w-lg",children:[a.jsx("div",{className:"font-bold text-white mb-2",children:"  :"}),a.jsx("ul",{className:"list-disc list-inside text-gray-200",children:r.map((g,y)=>a.jsx("li",{children:g},y))})]}),e&&e.length>0&&a.jsxs("div",{className:"mt-4 text-right w-full max-w-lg",children:[a.jsx("div",{className:"font-bold text-white mb-2",children:"  :"}),a.jsx("ul",{className:"list-disc list-inside text-gray-200",children:e.map((g,y)=>a.jsx("li",{children:g},y))})]}),u&&a.jsx("div",{className:"mt-6 text-green-400 font-bold text-lg",children:" !    "})]})},xq=({content:t,onComplete:e})=>{const[r,n]=S.useState({}),[s,i]=S.useState(!1),o=Object.values(r).reduce((g,y)=>g+((y==null?void 0:y.price)||0),0),l=o>t.budget,u=Object.keys(r).length===t.components.length,h=(g,y)=>{s||n(w=>({...w,[g]:y}))},f=()=>{i(!0),e&&e({selected:r,budgetUsed:o,isCorrect:!l})},p=()=>{n({}),i(!1)};return a.jsxs("div",{className:"w-full max-w-3xl mx-auto space-y-10",children:[a.jsxs("div",{className:`rounded-xl p-6 mb-4 shadow-lg flex flex-col items-center ${l?"bg-red-100 border-red-500 border":"bg-blue-100 border-blue-400 border"}`,children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-800 mb-2",children:[": ",t.budget.toLocaleString(),' "']}),a.jsx("div",{className:`text-xl font-bold ${l?"text-red-600":"text-green-700"}`,children:l?a.jsxs(a.Fragment,{children:[" ! ",a.jsx(vs,{className:"inline ml-2 text-red-500"})]}):a.jsxs(a.Fragment,{children:[" : ",o.toLocaleString(),' "']})}),a.jsx("div",{className:"text-md text-gray-600 mt-1",children:"        !"})]}),a.jsx("div",{className:"space-y-8",children:t.components.map(g=>a.jsxs("div",{className:"bg-white/70 rounded-xl shadow p-6 border border-gray-200",children:[a.jsx("div",{className:"font-bold text-blue-700 mb-3 text-lg",children:g.name}),a.jsx("div",{className:"flex gap-4 flex-wrap",children:g.options.map(y=>{var b;const w=((b=r[g.id])==null?void 0:b.name)===y.name;return a.jsxs("button",{onClick:()=>h(g.id,y),disabled:s,className:`p-4 rounded-lg border-2 min-w-[140px] transition-all duration-150 shadow 
                      ${w?"bg-gradient-to-r from-blue-500 to-emerald-500 text-white border-blue-700 scale-105":"bg-gray-100 text-gray-800 border-gray-400 hover:bg-blue-50"}
                      ${s?"opacity-60 cursor-not-allowed":"hover:scale-105"}`,children:[a.jsx("div",{className:"font-bold text-lg",children:y.name}),a.jsxs("div",{className:"text-md",children:["",y.price," | : ",y.performance]}),a.jsx("div",{className:"text-xs text-gray-600 mt-2",children:y.description})]},y.name)})})]},g.id))}),a.jsxs("div",{className:"flex flex-col items-center mt-8 space-y-3",children:[!s&&a.jsx("button",{onClick:f,disabled:!u||l,className:`px-10 py-4 rounded-lg text-xl font-bold transition-all duration-300 shadow-md 
              ${!u||l?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-700 hover:to-emerald-700"}`,children:" "}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-center mt-4",children:l?a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-xl font-bold flex items-center justify-center",children:[a.jsx(vs,{className:"w-6 h-6 mr-2 text-red-500"})," !   ."]}):a.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-6 py-4 rounded-xl font-bold flex items-center justify-center",children:[a.jsx(Qt,{className:"w-6 h-6 mr-2 text-green-600"})," !    ",o.toLocaleString(),' "!']})}),a.jsxs("button",{onClick:p,className:"mt-6 flex items-center px-6 py-2 bg-blue-100 border border-blue-300 text-blue-700 rounded-lg font-bold hover:bg-blue-200 transition",children:[a.jsx(Cs,{className:"w-5 h-5 ml-2"}),"  "]})]})]}),(s||u)&&a.jsxs("div",{className:"bg-white/90 rounded-xl shadow-md border border-gray-200 p-6 mt-10",children:[a.jsx("div",{className:"font-bold text-blue-800 mb-4 text-lg",children:"  :"}),a.jsx("ul",{className:"list-disc text-gray-700 text-md space-y-2 pr-4",children:t.components.map(g=>{var y;return a.jsxs("li",{children:[a.jsxs("span",{className:"font-bold",children:[g.name,":"]}),"",((y=r[g.id])==null?void 0:y.name)||a.jsx("span",{className:"text-gray-400",children:" "}),r[g.id]&&a.jsxs(a.Fragment,{children:["  ",r[g.id].price," | ",r[g.id].description]})]},g.id)})})]})]})},vq=({content:t,onComplete:e})=>{const[r,n]=S.useState(null),[s,i]=S.useState(!1),o=l=>{n(l),i(!0),e&&e(!0)};return a.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[a.jsx("div",{className:"mb-6 text-lg font-bold text-blue-700 text-center",children:t.instructions}),a.jsx("div",{className:"grid grid-cols-1 gap-6",children:t.scenarios.map((l,u)=>a.jsxs("button",{disabled:s,onClick:()=>o(u),className:`
              flex flex-col items-center justify-center p-6 rounded-xl shadow-lg border-2
              ${r===u?"bg-gradient-to-r from-green-400 to-teal-500 text-white border-green-600 scale-105":"bg-white/80 text-gray-700 border-blue-200 hover:bg-blue-50"}
              transition-all duration-150
            `,children:[a.jsx("div",{className:"text-4xl mb-2",children:l.icon}),a.jsx("div",{className:"font-bold text-lg mb-1",children:l.name}),a.jsx("div",{className:"text-md",children:l.description})]},u))}),r!==null&&a.jsxs("div",{className:"mt-8 p-6 bg-green-50 border-l-4 border-green-400 rounded-xl text-green-700 text-center",children:[a.jsxs("div",{className:"flex items-center justify-center mb-2",children:[a.jsx(Qt,{className:"w-7 h-7 mr-2 text-green-600"}),a.jsx("span",{className:"text-lg font-bold",children:":"})]}),a.jsx("div",{className:"text-lg",children:t.scenarios[r].result})]}),s&&a.jsxs("div",{className:"mt-6 flex items-center justify-center",children:[a.jsx(_B,{className:"w-8 h-8 text-blue-400 mr-2"}),a.jsx("span",{className:"font-bold text-blue-700",children:" ! /      ."})]})]})},j0=({slide:t,onAnswer:e=()=>{},answers:r})=>{const n=(t==null?void 0:t.content)||{},[s,i]=S.useState(!1),o=l=>{i(!0),e(t.id,{completed:!0,isCorrect:l})};return!n||!n.type?a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",children:a.jsx("div",{className:"max-w-5xl w-full flex flex-col",children:a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-4xl font-bold text-white mb-4",style:{textShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:(t==null?void 0:t.title)||"Loading..."}),a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500 mx-auto"})]})})}):a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",children:a.jsxs("div",{className:"max-w-5xl w-full flex flex-col",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-4xl font-bold text-white mb-4",style:{textShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:(t==null?void 0:t.title)||"Interactive Exercise"}),a.jsx("p",{className:"text-xl text-gray-200",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:n.instructions||"    "})]}),a.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700/50 shadow-2xl flex-1 flex flex-col justify-center",children:[n.type==="drag-drop"&&a.jsx(aq,{exercise:n,onComplete:o}),n.type==="matching"&&a.jsx(iq,{exercise:n,onComplete:o}),n.type==="multiple-choice"&&a.jsx(qT,{exercise:n,onComplete:o}),n.type==="quiz"&&a.jsx(qT,{exercise:n,onComplete:o}),n.type==="windows-simulator"&&a.jsx(oq,{exercise:n,onComplete:o}),n.type==="linux-simulator"&&a.jsx(lq,{commands:n.commands||[],instructions:n.instructions||"Try Linux commands in this safe simulator",onComplete:o}),n.type==="network-simulator"&&a.jsx(cq,{exercise:n,onComplete:o}),n.type==="protocol-simulator"&&a.jsx(uq,{content:n,onComplete:o}),n.type==="code-editor"&&a.jsx(dq,{content:n,onComplete:o}),n.type==="website-builder"&&a.jsx(hq,{content:n,onComplete:o}),n.type==="database-simulator"&&a.jsx(fq,{content:n,onComplete:o}),n.type==="browser-simulator"&&a.jsx(mq,{content:n,onComplete:o}),n.type==="password-generator"&&a.jsx(gq,{options:n.options,tips:n.tips,examples:n.examples,onComplete:o}),n.type==="computer-build"&&a.jsx(xq,{content:n,onComplete:o}),n.type==="lab-simulation"&&a.jsx(vq,{content:n,onComplete:o})]}),s&&a.jsx("div",{className:"mt-8 text-center",children:a.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-xl p-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-green-400 mb-2",children:" !"}),a.jsx("p",{className:"text-gray-300",children:" !    "})]})})]})})},A0=({slide:t})=>{const{content:e}=t,[r,n]=S.useState(!1),s=()=>{n(!0)};return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",children:a.jsxs("div",{className:"max-w-5xl w-full flex flex-col",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx("h2",{className:"text-4xl font-bold text-white mb-4",style:{textShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:t.title})}),a.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700/50 shadow-2xl flex-1 flex flex-col justify-center text-center",children:[a.jsx("div",{className:"mb-8",children:a.jsx("div",{className:"w-24 h-24 mx-auto bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center shadow-2xl",children:a.jsx(NB,{className:"w-12 h-12 text-white"})})}),a.jsx("p",{className:"text-2xl text-gray-200 mb-8",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:e.message}),e.timer&&a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[a.jsx("p",{className:"text-xl text-white mb-2",children:" "}),a.jsx("div",{className:"text-4xl font-bold text-orange-400",children:e.timer})]})}),e.activities&&a.jsxs("div",{className:"mb-8",children:[a.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:" :"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.activities.map((i,o)=>a.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20 hover:bg-white/20 transition-all duration-300",children:a.jsx("span",{className:"text-lg text-white",children:i})},`activity-${o}-${i.substring(0,20)}`))})]}),a.jsx("button",{onClick:s,disabled:r,className:`px-8 py-4 rounded-xl text-xl font-bold transition-all duration-300 transform hover:scale-105 ${r?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-green-600 to-blue-600 text-white hover:from-green-700 hover:to-blue-700 shadow-2xl"}`,children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(Sn,{className:"w-6 h-6 mr-2"})," "]})}),r&&a.jsx("div",{className:"mt-6",children:a.jsx("div",{className:"bg-green-600/20 border border-green-500/30 rounded-xl p-4",children:a.jsx("p",{className:"text-green-400 font-medium",children:" !"})})})]})]})})},C0=({slide:t,onAnswer:e,answers:r})=>{const{content:n}=t,[s,i]=S.useState(""),[o,l]=S.useState(!1),u=()=>{s.trim()&&(l(!0),e(t.id,{reflection:s.trim(),isCorrect:!0}))};return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",children:a.jsxs("div",{className:"max-w-5xl w-full h-full flex flex-col",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-2xl mb-6",children:a.jsx(A2,{className:"w-10 h-10 text-white"})}),a.jsx("h2",{className:"text-4xl font-bold text-white mb-4",style:{textShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:t.title}),a.jsx("p",{className:"text-xl text-gray-200",style:{textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:n.prompt})]}),a.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700/50 shadow-2xl flex-1 flex flex-col justify-center",children:[o?a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-green-600/20 border border-green-500/30 rounded-xl p-8",children:[a.jsx("h3",{className:"text-2xl font-bold text-green-400 mb-4",children:"  !"}),a.jsx("p",{className:"text-gray-300 mb-6",children:"   "}),a.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:a.jsxs("p",{className:"text-white italic",children:['"',s,'"']})})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:a.jsx("textarea",{value:s,onChange:h=>i(h.target.value),placeholder:"    ...",className:"w-full h-32 bg-transparent border-none outline-none text-white placeholder-gray-400 resize-none",style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"}})}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:u,disabled:!s.trim(),className:`px-8 py-4 rounded-xl text-xl font-bold transition-all duration-300 transform hover:scale-105 ${s.trim()?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700 shadow-2xl":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(qB,{className:"w-6 h-6 mr-2"})," "]})})})]}),n.additionalQuestions&&a.jsxs("div",{className:"mt-8",children:[a.jsx("h3",{className:"text-2xl font-bold text-white mb-4 text-center",children:"  :"}),a.jsx("div",{className:"space-y-3",children:n.additionalQuestions.map((h,f)=>a.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:a.jsx("p",{className:"text-gray-200",children:h})},`question-${f}-${h.substring(0,20)}`))})]})]})]})})},I0=({slide:t,onAnswer:e,answers:r})=>{var y;const{content:n}=t,[s,i]=S.useState({}),[o,l]=S.useState(!1),[u,h]=S.useState(0),f=(w,b)=>{o||i(_=>({..._,[w]:b}))},p=()=>{if(Object.keys(s).length===n.questions.length){let w=0;n.questions.forEach((_,P)=>{const A=_.id||`question-${P}`,k=_.correctAnswer||_.correct;s[A]===k&&w++});const b=Math.round(w/n.questions.length*100);h(b),l(!0),e(t.id,{answers:s,score:b,isCorrect:b>=70})}},g=Object.keys(s).length===n.questions.length;return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8 bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:a.jsxs("div",{className:"max-w-5xl w-full h-full flex flex-col",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4 drop-shadow-[0_4px_8px_rgba(0,0,0,0.8)]",style:{textShadow:"0 4px 8px rgba(0,0,0,0.8), 0 0 20px rgba(59,130,246,0.5)"},children:t.title}),n.description&&a.jsx("p",{className:"text-xl md:text-2xl text-blue-200 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]",style:{textShadow:"0 2px 4px rgba(0,0,0,0.8)"},children:n.description})]}),a.jsxs("div",{className:"bg-black/60 backdrop-blur-xl rounded-2xl p-8 border border-blue-500/30 shadow-2xl flex-1 flex flex-col",children:[a.jsx("div",{className:"space-y-8 flex-1 overflow-y-auto",children:(y=n.questions)==null?void 0:y.map((w,b)=>{var _;return a.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20",children:[a.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-white mb-4 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]",children:[" ",b+1,": ",w.question]}),a.jsx("div",{className:"space-y-3",children:(_=w.options)==null?void 0:_.map((P,A)=>{const k=typeof P=="string"?P:P.text,F=typeof P=="string"?A:P.id,L=w.id||`question-${b}`,I=w.correctAnswer||w.correct;return a.jsx("button",{onClick:()=>f(L,F),disabled:o,className:`w-full p-5 rounded-2xl border-4 transition-all duration-300 text-right text-lg md:text-xl lg:text-2xl font-bold tracking-wide select-none focus:outline-none focus:ring-4 focus:ring-blue-400/50 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)] ${s[L]===F?o&&F===I?"bg-gradient-to-r from-green-600 to-emerald-600 border-green-400 text-white shadow-lg shadow-green-500/25":o&&F!==I?"bg-gradient-to-r from-red-600 to-pink-600 border-red-400 text-white shadow-lg shadow-red-500/25":"bg-gradient-to-r from-blue-600 to-purple-600 border-blue-400 text-white shadow-lg shadow-blue-500/25":o&&F===I?"bg-gradient-to-r from-green-600 to-emerald-600 border-green-400 text-white shadow-lg shadow-green-500/25":"bg-gray-700/80 border-gray-600 text-gray-300 hover:bg-gray-600/80 hover:text-white"}`,tabIndex:0,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-lg md:text-xl lg:text-2xl drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]",children:k}),s[L]===F&&a.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg",children:o&&F===I?a.jsx(Qt,{className:"w-5 h-5 text-green-600"}):o&&F!==I?a.jsx(li,{className:"w-5 h-5 text-red-600"}):a.jsx(Qt,{className:"w-5 h-5 text-blue-600"})}),o&&F===I&&s[L]!==F&&a.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg",children:a.jsx(Qt,{className:"w-5 h-5 text-green-600"})})]})},`${L}-${F}`)})})]},`question-${b}`)})}),!o&&a.jsx("div",{className:"text-center mt-8",children:a.jsx("button",{onClick:p,disabled:!g,className:`px-8 py-4 rounded-xl text-xl font-bold transition-all duration-300 transform hover:scale-105 drop-shadow-[0_4px_8px_rgba(0,0,0,0.8)] ${g?"bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 shadow-2xl shadow-green-500/25":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:" "})}),o&&a.jsx("div",{className:"mt-8 text-center",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-8 border border-white/20",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full flex items-center justify-center shadow-2xl mb-6",children:a.jsx(V3,{className:"w-10 h-10 text-white"})}),a.jsx("h3",{className:"text-3xl font-bold text-white mb-2 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]",children:" :"}),a.jsxs("div",{className:"text-5xl font-bold text-yellow-400 mb-4 drop-shadow-[0_4px_8px_rgba(0,0,0,0.8)]",children:[u,"%"]}),a.jsx("p",{className:"text-xl text-gray-200 drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]",children:u>=90?"!":u>=80?" !":u>=70?"!":" !"})]})})]})]})})};class yq{constructor(){this.sessionStart=Date.now(),this.events=[],this.userId=null,this.lessonId=null}init(e,r=null){this.userId=e,this.lessonId=r,this.sessionStart=Date.now(),this.events=[]}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}logEvent(e,r={}){const n={type:e,timestamp:new Date().toISOString(),sessionTime:Date.now()-this.sessionStart,userId:this.userId,lessonId:this.lessonId,data:r};this.events.push(n);const i={slide_navigation:"",slide_engagement:"",exercise_completion:"",lesson_completion:"",error:"",progress_save:"",user_action:""}[e]||"";console.log(`${i} [Session] ${e}:`,n)}logSlideNavigation(e,r,n){this.logEvent("slide_navigation",{fromSlide:e+1,toSlide:r+1,direction:n,timeSpent:Date.now()-this.sessionStart})}logSlideEngagement(e,r,n){this.logEvent("slide_engagement",{slideId:e,slideType:r,timeSpent:n,engagementLevel:this.calculateEngagementLevel(n)})}calculateEngagementLevel(e){return e<30?"low":e<120?"medium":"high"}logExerciseCompletion(e,r,n){this.logEvent("exercise_completion",{exerciseId:e,isCorrect:r,score:n,timestamp:new Date().toISOString()})}logLessonCompletion(e,r,n){this.logEvent("lesson_completion",{lessonId:e,totalScore:r,timeSpent:n,completionRate:this.calculateCompletionRate(),achievements:this.getUnlockedAchievements()})}calculateCompletionRate(){const e=this.events.filter(n=>n.type==="exercise_completion"&&n.data.isCorrect),r=this.events.filter(n=>n.type==="exercise_completion");return r.length>0?Math.round(e.length/r.length*100):0}getUnlockedAchievements(){return[]}generateSessionSummary(){const e=Date.now()-this.sessionStart,r=this.events.filter(o=>o.type==="slide_navigation"),n=this.events.filter(o=>o.type==="slide_engagement"),s=this.events.filter(o=>o.type==="exercise_completion");return{sessionId:this.generateSessionId(),userId:this.userId,lessonId:this.lessonId,duration:e,totalEvents:this.events.length,slideNavigations:r.length,slideEngagements:n.length,exercisesCompleted:s.length,completionRate:this.calculateCompletionRate(),averageEngagementLevel:this.calculateAverageEngagementLevel(),events:this.events}}calculateAverageEngagementLevel(){const e=this.events.filter(s=>s.type==="slide_engagement");if(e.length===0)return"unknown";const n=e.reduce((s,i)=>s+(i.data.timeSpent||0),0)/e.length;return this.calculateEngagementLevel(n)}exportSessionData(){return{session:this.generateSessionSummary(),analytics:{userBehavior:this.analyzeUserBehavior(),performance:this.analyzePerformance(),recommendations:this.generateRecommendations()}}}analyzeUserBehavior(){const e=this.events.filter(n=>n.type==="slide_navigation"),r=this.events.filter(n=>n.type==="slide_engagement");return{navigationPattern:this.analyzeNavigationPattern(e),engagementPattern:this.analyzeEngagementPattern(r),learningStyle:this.determineLearningStyle()}}analyzeNavigationPattern(e){const r=e.filter(s=>s.data.direction==="forward").length,n=e.filter(s=>s.data.direction==="backward").length;return{forwardMoves:r,backwardMoves:n,pattern:r>n?"progressive":"reviewing",efficiency:this.calculateNavigationEfficiency(e)}}calculateNavigationEfficiency(e){if(e.length===0)return 100;const r=e.filter(s=>s.data.direction==="forward").length,n=e.length;return Math.round(r/n*100)}analyzeEngagementPattern(e){const r=e.map(o=>o.data.engagementLevel),n=r.filter(o=>o==="high").length,s=r.filter(o=>o==="medium").length,i=r.filter(o=>o==="low").length;return{highEngagement:n,mediumEngagement:s,lowEngagement:i,averageEngagement:this.calculateAverageEngagementLevel(),consistency:this.calculateEngagementConsistency(r)}}calculateEngagementConsistency(e){if(e.length===0)return"unknown";const r=new Set(e);return r.size===1?"very_consistent":r.size===2?"consistent":"inconsistent"}determineLearningStyle(){const e=this.events.filter(i=>i.type==="slide_navigation"),r=this.events.filter(i=>i.type==="slide_engagement"),n=r.length>0?r.reduce((i,o)=>i+(o.data.timeSpent||0),0)/r.length:0,s=e.filter(i=>i.data.direction==="backward").length;return n>180&&s>2?"thorough_reviewer":n<60?"quick_learner":s>5?"repetitive_learner":"balanced_learner"}analyzePerformance(){const e=this.events.filter(s=>s.type==="exercise_completion"),r=e.filter(s=>s.data.isCorrect).length,n=e.length;return{accuracy:n>0?Math.round(r/n*100):0,speed:this.calculateAverageResponseTime(),consistency:this.calculatePerformanceConsistency(),improvement:this.calculateImprovementTrend()}}calculateAverageResponseTime(){return this.events.filter(r=>r.type==="exercise_completion").length===0?0:30}calculatePerformanceConsistency(){const e=this.events.filter(s=>s.type==="exercise_completion");if(e.length<3)return"insufficient_data";const r=e.map(s=>s.data.score||0),n=this.calculateVariance(r);return n<10?"very_consistent":n<25?"consistent":"inconsistent"}calculateVariance(e){const r=e.reduce((s,i)=>s+i,0)/e.length;return e.map(s=>Math.pow(s-r,2)).reduce((s,i)=>s+i,0)/e.length}calculateImprovementTrend(){const e=this.events.filter(l=>l.type==="exercise_completion");if(e.length<3)return"insufficient_data";const r=e.map(l=>l.data.score||0),n=r.slice(0,Math.floor(r.length/2)),s=r.slice(Math.floor(r.length/2)),i=n.reduce((l,u)=>l+u,0)/n.length,o=s.reduce((l,u)=>l+u,0)/s.length;return o>i+10?"improving":o<i-10?"declining":"stable"}generateRecommendations(){const e=[],r=this.analyzeUserBehavior(),n=this.analyzePerformance();return r.navigationPattern.efficiency<70&&e.push("Consider reducing backward navigation to improve learning efficiency"),r.engagementPattern.lowEngagement>r.engagementPattern.highEngagement&&e.push("Try spending more time on each slide to improve understanding"),n.accuracy<80&&e.push("Review previous lessons to strengthen foundational knowledge"),r.learningStyle==="quick_learner"&&n.accuracy<90&&e.push("Slow down and review content more thoroughly"),e}}const qs=new yq,wq=(t,e)=>{qs.init(t,e)},GT=(t,e,r)=>{!qs.userId||!qs.lessonId||qs.logSlideNavigation(t,e,r)},bq=(t,e,r)=>{!qs.userId||!qs.lessonId||qs.logSlideEngagement(t,e,r)},_q=(t,e,r)=>{!qs.userId||!qs.lessonId||qs.logExerciseCompletion(t,e,r)},Nq=(t,e,r)=>{!qs.userId||!qs.lessonId||qs.logLessonCompletion(t,e,r)},Eq=()=>qs.exportSessionData(),b6=t=>{if(!t)return" ";const e=t instanceof Date?t:new Date(t),n=Math.floor((new Date-e)/(1e3*60));return n<1?"":n<60?` ${n} `:n<1440?` ${Math.floor(n/60)} `:` ${Math.floor(n/1440)} `},Sq=()=>{const{currentUser:t,userProfile:e,updateUserProgress:r,trackSlideEngagement:n,setLastLessonSlide:s,getLastLessonSlide:i}=La(),o=Zn();Ol();const{lessonId:l}=Cg(),[u,h]=S.useState(null),[f,p]=S.useState(0),[g,y]=S.useState(30),[w,b]=S.useState({}),[_,P]=S.useState({}),[A,k]=S.useState(!1),[F,L]=S.useState(0),[I,N]=S.useState(new Set),[T,R]=S.useState(0),[B,z]=S.useState(Date.now()),[O,D]=S.useState(Date.now()),[ie,Z]=S.useState(0),[ne,H]=S.useState({width:window.innerWidth,height:window.innerHeight});S.useRef(null),S.useRef(null);const Q=S.useRef(null),q=S.useRef(!1),ae=S.useRef(0),U=S.useRef(!1),[M,X]=S.useState(!0),[K,Y]=S.useState(null);S.useEffect(()=>{},[f,l,e,u,i,t]),S.useEffect(()=>{t&&l&&!q.current&&(wq(t.uid,l),console.log(" Session initialized with:",{userId:t.uid,lessonId:l}))},[t,l]),S.useEffect(()=>{if(!e)return;(async()=>{try{const{doc:me,getDoc:ee}=await fs(async()=>{const{doc:ot,getDoc:xt}=await Promise.resolve().then(()=>Af);return{doc:ot,getDoc:xt}},void 0),{db:pe}=await fs(async()=>{const{db:ot}=await Promise.resolve().then(()=>Cf);return{db:ot}},void 0),Ce=me(pe,"users",t.uid),$e=await ee(Ce);if($e.exists()){const xt=$e.data().currentLesson||0;if(parseInt(l)>xt){Y("      "),sa.error("      "),o("/student/dashboard");return}}}catch(me){console.error("Error checking teacher access:",me);const ee=e.currentLesson||0;if(parseInt(l)>ee){Y("      "),sa.error("      "),o("/student/dashboard");return}}})()},[e,l,o,t]),S.useEffect(()=>{let he=!0;async function me(){X(!0),Y(null);try{let ee=await Sx(l);if(ee&&ee.slides&&ee.slides.length>0){he&&h(ee);const pe=ee.originalId||parseInt(l),Ce=`lesson-${pe}`;let $e=!1;if(e&&e.progress&&Ce&&e.progress[Ce]&&e.progress[Ce].completed&&(U.current=!0,$e=!0,console.log(" Lesson already completed, showing completion state")),e&&pe&&!isNaN(pe)){let ot=i(pe);($e||ot<0||ot>=ee.slides.length)&&(ot=0,s(pe,0),console.log(" Resetting saved slide position to 0")),p(ot),console.log(` Loaded saved slide position: ${ot}`)}q.current=!0}else throw new Error("No slides found in Firebase")}catch(ee){console.error("Error loading lesson:",ee),he&&Y("  ")}finally{he&&X(!1)}}return l&&me(),()=>{he=!1}},[l,e,i]),S.useEffect(()=>{var me;if(!u||!e||!q.current)return;const he=u.slides?u.slides[f]:null;if(he&&he.id){const ee=u.originalId||parseInt(l);ee&&!isNaN(ee)&&n(ee,he.id);const pe=Math.floor((Date.now()-B)/1e3);bq(he.id,he.type,pe),N(Ce=>new Set([...Ce,he.id])),f!==ae.current&&!U.current&&(s(ee,f),ae.current=f),z(Date.now()),Z(0),y(((me=he.content)==null?void 0:me.duration)||30)}},[f,u,e,n,s,l]),S.useEffect(()=>{if(!e)return;L(e.totalTimeSpent||0);const he=new Set;e.progress&&Object.values(e.progress).forEach(me=>{me.pagesEngaged&&Array.isArray(me.pagesEngaged)&&me.pagesEngaged.forEach(ee=>he.add(ee))}),I.forEach(me=>he.add(me)),N(he),R(Math.floor((e.totalTimeSpent||0)/60))},[e]),S.useEffect(()=>{if(u)return Q.current=setInterval(()=>{var ee,pe;const he=Date.now(),me=Math.floor((he-B)/1e3);if(Z(me),u.slides&&((pe=(ee=u.slides[f])==null?void 0:ee.content)!=null&&pe.duration)){const Ce=u.slides[f].content.duration,$e=Math.max(0,Ce-me);y($e)}},1e3),()=>{Q.current&&clearInterval(Q.current)}},[B,f,u]),S.useEffect(()=>{const he=()=>{H({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",he),()=>window.removeEventListener("resize",he)},[]);const xe=S.useCallback(()=>{if(!u)return;GT(f,f+1,"forward");const he=Math.floor((Date.now()-B)/1e3);L(me=>me+he),f<(u.slides?u.slides.length-1:0)&&p(f+1)},[u,f,B]),le=S.useCallback(()=>{if(!u||f<=0)return;GT(f,f-1,"backward");const he=Math.floor((Date.now()-B)/1e3);L(me=>me+he),p(Math.max(0,f-1))},[u,f,B]),fe=S.useCallback((he,me)=>{b(pe=>({...pe,[he]:me})),_q(he,me.isCorrect||!1,me.score||0);const ee=Math.floor((Date.now()-B)/1e3);L(pe=>pe+ee)},[B]),ve=S.useCallback(async()=>{var xt,Nt,Me,be,Pe,lt,ct,Bt;if(console.log(" Auth state check:",{currentUser:t==null?void 0:t.uid,userProfile:!!e,lesson:!!u}),!u||!e){console.log(" Missing lesson or userProfile, cannot complete lesson");return}if(!t){console.log(" No current user, cannot complete lesson"),sa.error("  ");return}console.log(" Double-checking auth state before lesson completion...");const he={currentUser:t==null?void 0:t.uid,userProfile:e==null?void 0:e.uid,lessonId:u==null?void 0:u.id,lessonOriginalId:u==null?void 0:u.originalId};if(console.log(" Auth check details:",he),!he.currentUser||!he.userProfile){console.log(" Authentication check failed, aborting lesson completion");return}const me=u.originalId||parseInt(l);if(!me||isNaN(me)){console.error(" Invalid lesson ID:",l,"lesson.originalId:",u.originalId);return}const ee=`lesson-${me}`;if((Nt=(xt=e==null?void 0:e.progress)==null?void 0:xt[ee])!=null&&Nt.completed){console.log(" Lesson already completed, showing completion state without re-saving"),sa.success("  ! "),setTimeout(async()=>{try{const it=await Oy(me),kt=it?`/student/roadmap?unlocked=${it.originalId}`:"/student/roadmap";o(kt,{replace:!0})}catch(it){console.error(" Error navigating after completion:",it),o("/student/roadmap",{replace:!0})}},2e3);return}console.log(" Starting lesson completion for lesson:",me),console.log(" Lesson object details:",{lessonId:l,lessonOriginalId:u.originalId,lessonNumber:me,lessonTitle:u.title,lessonType:typeof me});const pe=Math.floor((Date.now()-B)/1e3),Ce=F+pe,$e=u.slides?u.slides.map(it=>it.id):[];$e.forEach(it=>{n(me,it)}),Nq(me,Ce,Ce);const ot=Eq();console.log(" FINAL SESSION DATA:",ot),console.log(" LESSON COMPLETION SUMMARY:",{lessonId:me,lessonTitle:u.title,totalSlides:u.slides?u.slides.length:0,slidesEngaged:$e.length,timeSpent:Ce,timeFormatted:We(Ce),progressPercentage:100,sessionEvents:((Me=ot.session)==null?void 0:Me.totalEvents)||0,completionRate:((be=ot.session)==null?void 0:be.completionRate)||0,averageEngagement:((Pe=ot.session)==null?void 0:Pe.averageEngagementLevel)||"unknown",userBehavior:(lt=ot.analytics)==null?void 0:lt.userBehavior,performance:(ct=ot.analytics)==null?void 0:ct.performance,recommendations:(Bt=ot.analytics)==null?void 0:Bt.recommendations});try{console.log(" Saving lesson progress..."),console.log(" Debug: Calling updateUserProgress with:",{lessonNumber:me,completed:!0,score:Ce,temporary:!1,lastSlide:f,slideId:null,allSlideIds:$e});const it=await r(me,!0,Ce,!1,0,null,$e,t);console.log(" Progress saved successfully"),console.log(" Debug: updateUserProgress result:",it);const kt=await Oy(u.id);console.log(" Next lesson found:",kt),k(!0),sa.success(" !   ! "),setTimeout(()=>{try{console.log(" Starting navigation to roadmap...");const er=kt?`/student/roadmap?unlocked=${kt.originalId}`:"/student/roadmap";console.log(" Navigating to:",er),o(er,{replace:!0}),console.log(" Navigation completed")}catch(er){console.error(" Error navigating after completion:",er),o("/student/roadmap",{replace:!0})}},3500)}catch(it){console.error(" Error completing lesson:",it),sa.error("  "),setTimeout(async()=>{const kt=await Oy(me),er=kt?`/student/roadmap?unlocked=${kt.originalId}`:"/student/roadmap";o(er,{replace:!0})},1e3)}},[u,e,B,F,f,n,r,o,l]),we=he=>{const me=Math.floor(he/60),ee=he%60;return`${me}:${ee.toString().padStart(2,"0")}`},We=he=>{const me=Math.floor(he/3600),ee=Math.floor(he%3600/60);return me>0?`${me}  ${ee} `:`${ee} `},re=he=>{switch(he.type){case"presentation":return a.jsx(Pd,{slide:he});case"poll":return a.jsx(k0,{slide:he,onAnswer:fe,answers:w});case"video":return a.jsx(T0,{slide:he,onAnswer:fe,answers:w});case"interactive":return a.jsx(j0,{slide:he,onAnswer:fe,answers:w});case"break":return a.jsx(A0,{slide:he});case"reflection":return a.jsx(C0,{slide:he,onAnswer:fe,answers:w});case"quiz":return a.jsx(I0,{slide:he,onAnswer:fe,answers:w});default:return a.jsxs("div",{className:"text-white",children:["   : ",he.type]})}};if(S.useEffect(()=>{if(!t)return;const he=async()=>{const{doc:ee,onSnapshot:pe}=await fs(async()=>{const{doc:xt,onSnapshot:Nt}=await Promise.resolve().then(()=>Af);return{doc:xt,onSnapshot:Nt}},void 0),{db:Ce}=await fs(async()=>{const{db:xt}=await Promise.resolve().then(()=>Cf);return{db:xt}},void 0),$e=ee(Ce,"users",t.uid);return pe($e,xt=>{var Nt;if(xt.exists()){const Me=xt.data();console.log(" Real-time user profile update received:",{totalTimeSpent:Me.totalTimeSpent,totalPagesEngaged:Me.totalPagesEngaged,completedLessons:((Nt=Me.completedLessons)==null?void 0:Nt.length)||0})}},xt=>{console.error(" Error listening to user profile updates:",xt)})};let me;return he().then(ee=>{me=ee}),()=>{me&&me()}},[t]),M)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center",children:a.jsx("div",{className:"text-white text-2xl",children:" ..."})});if(K)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center",children:a.jsx("div",{className:"text-white text-2xl",children:K})});const st=u.slides?u.slides[f]:null,Re=u.slides?(f+1)/u.slides.length*100:0;return st?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:[a.jsx(S0,{}),A&&a.jsx(nw,{width:ne.width,height:ne.height,recycle:!1,numberOfPieces:200,colors:["#00ff00","#00ffff","#ff00ff","#ffff00","#ff0000"]}),A&&a.jsxs(a.Fragment,{children:[a.jsx(nw,{width:ne.width,height:ne.height,recycle:!1,numberOfPieces:300,colors:["#4ade80","#fbbf24","#3b82f6","#8b5cf6","#ec4899","#ef4444"]}),a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:a.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-emerald-600 rounded-3xl p-8 text-center text-white shadow-2xl border-4 border-green-400 animate-pulse",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h2",{className:"text-3xl font-bold mb-2",children:" !"}),a.jsx("p",{className:"text-xl mb-4",children:"  !"}),a.jsxs("div",{className:"text-lg opacity-90",children:[a.jsxs("p",{children:[" : ",We(F)]}),a.jsxs("p",{children:[" : ",I.size]}),a.jsxs("p",{children:[": ",Math.round(Re),"%"]})]})]})})]}),a.jsxs("div",{className:"flex h-screen",children:[a.jsx("div",{className:"flex-1 overflow-y-auto",children:a.jsx("div",{className:"p-7",children:re(st)})}),a.jsx("div",{className:"w-92 bg-gray-800/50 backdrop-blur-sm border-l border-gray-700/50 p-7",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(M3,{className:"h-5 w-5 text-blue-400"}),a.jsx("span",{className:"text-white font-semibold",children:" "})]}),a.jsx("p",{className:"text-2xl font-bold text-blue-400",children:We(F)})]}),a.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Da,{className:"h-5 w-5 text-green-400"}),a.jsx("span",{className:"text-white font-semibold",children:" "})]}),a.jsx("p",{className:"text-2xl font-bold text-green-400",children:I.size})]}),a.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Qd,{className:"h-5 w-5 text-yellow-400"}),a.jsx("span",{className:"text-white font-semibold",children:""})]}),a.jsxs("p",{className:"text-2xl font-bold text-yellow-400",children:[Math.round(Re),"%"]})]}),a.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(v0,{className:"h-5 w-5 text-cyan-400"}),a.jsx("span",{className:"text-white font-semibold",children:" "})]}),a.jsx("p",{className:"text-2xl font-bold text-cyan-400",children:we(ie)})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-900/40 to-purple-900/40 rounded-xl p-7 border border-blue-500/30",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-7",children:[a.jsx($B,{className:"h-8 w-8 text-blue-400"}),a.jsx("span",{className:"text-white font-bold text-2xl",children:" "})]}),a.jsx("div",{className:"text-center mb-7",children:a.jsx("div",{className:"bg-gray-800/50 rounded-lg p-5 border border-gray-600/50",children:a.jsxs("div",{className:"text-3xl font-bold text-white",children:[" ",f+1,"  ",u.slides?u.slides.length:0]})})}),a.jsxs("div",{className:"flex items-center justify-between space-x-5 space-x-reverse",children:[a.jsx("button",{onClick:le,disabled:f===0,className:"group relative p-5 rounded-xl bg-gradient-to-r from-gray-700/80 to-gray-600/80 hover:from-gray-600/90 hover:to-gray-500/90 disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-300 hover:scale-105 hover:shadow-lg border border-gray-500/30 hover:border-gray-400/50",title:" ",children:a.jsx(Mc,{className:"h-7 w-7 text-white group-hover:text-blue-300 transition-all duration-300"})}),f===(u.slides?u.slides.length-1:0)?a.jsx("button",{onClick:ve,className:"group relative px-7 py-5 rounded-xl bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 transition-all duration-300 hover:scale-105 hover:shadow-2xl text-white font-bold border-2 border-green-400/50 hover:border-green-300/70",title:" ",children:a.jsx("span",{className:"group-hover:scale-105 transition-transform duration-300 text-xl",children:" "})}):a.jsx("button",{onClick:xe,className:"group relative p-5 rounded-xl bg-gradient-to-r from-blue-600/80 to-purple-600/80 hover:from-blue-500/90 hover:to-purple-500/90 transition-all duration-300 hover:scale-105 hover:shadow-lg border border-blue-500/30 hover:border-blue-400/50",title:" ",children:a.jsx(dx,{className:"h-7 w-7 text-white group-hover:text-purple-300 transition-all duration-300"})})]})]})]})})]})]}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center",children:a.jsx("div",{className:"text-white text-2xl",children:"      .    ."})})},kq=["","","","","","","","","","","","","","","","",""],KT=()=>{var fe;const{userProfile:t,logout:e,currentUser:r,updateDisplayName:n,changePassword:s}=La(),[i,o]=S.useState("overview"),[l,u]=S.useState((t==null?void 0:t.emoji)||""),[h,f]=S.useState(!1),[p,g]=S.useState((t==null?void 0:t.displayName)||""),[y,w]=S.useState(!1),[b,_]=S.useState(!1),[P,A]=S.useState({firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",age:(t==null?void 0:t.age)||"",sex:(t==null?void 0:t.sex)||"male"}),[k,F]=S.useState(!1),[L,I]=S.useState(null),[N,T]=S.useState(!1),[R,B]=S.useState(!1),[z,O]=S.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[D,ie]=S.useState(!1),[Z,ne]=S.useState([]),[H,Q]=S.useState((t==null?void 0:t.currentLesson)||1);Zn();const q=()=>({firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",age:(t==null?void 0:t.age)||"",sex:(t==null?void 0:t.sex)||"male"});S.useEffect(()=>{t&&(A(q()),g(t.displayName||""),u(t.emoji||""))},[t]),S.useEffect(()=>{(async()=>{try{const we=await N0();ne(we)}catch(we){console.error("Error loading lessons:",we),Ie.error("  ")}})()},[]),S.useEffect(()=>{if(!r)return;const ve=async()=>{try{const{doc:We,getDoc:re}=await fs(async()=>{const{doc:me,getDoc:ee}=await Promise.resolve().then(()=>Af);return{doc:me,getDoc:ee}},void 0),{db:st}=await fs(async()=>{const{db:me}=await Promise.resolve().then(()=>Cf);return{db:me}},void 0),Re=We(st,"users",r.uid),he=await re(Re);if(he.exists()){const me=he.data();Q(me.currentLesson||1)}}catch(We){console.error("Error refreshing currentLesson:",We)}};ve();const we=setInterval(ve,1e4);return()=>clearInterval(we)},[r]),S.useEffect(()=>{(async()=>{if((t==null?void 0:t.role)==="student"&&(t!=null&&t.teacherId)){T(!0);try{const we=await dr(wt(ze,"users",t.teacherId));we.exists()&&I(we.data())}catch(we){console.error("Error fetching teacher info:",we)}finally{T(!1)}}})()},[t]);const ae=async()=>{if(!r||!p.trim()){Ie.error("     ");return}if(p.trim()===(t==null?void 0:t.displayName)){f(!1);return}w(!0);try{await n(p.trim()),Ie.success("   "),f(!1)}catch(ve){console.error("Error updating display name:",ve),Ie.error("    ")}finally{w(!1)}},U=()=>{g((t==null?void 0:t.displayName)||""),f(!1)},M=()=>t!=null&&t.displayName&&t.displayName!==" "?t.displayName:((t==null?void 0:t.sex)||"male")==="female"?" ":" ",X=()=>{B(!0)},K=async()=>{const{currentPassword:ve,newPassword:we,confirmPassword:We}=z;if(!ve||!we||!We){Ie.error("   ");return}if(we.length<6){Ie.error("     6 ");return}if(we!==We){Ie.error("    ");return}if(we===ve){Ie.error("      ");return}ie(!0);try{await s(ve,we),Ie.success("  "),B(!1),O({currentPassword:"",newPassword:"",confirmPassword:""})}catch(re){console.error("Password change error:",re),Ie.error(re.message||"   ")}finally{ie(!1)}},Y=()=>{B(!1),O({currentPassword:"",newPassword:"",confirmPassword:""})},xe=async()=>{try{await e(),Ie.success(" ")}catch(ve){console.error("Logout error:",ve),Ie.error("  ")}},le=()=>{if(!t)return 0;const ve=t.completedLessons||[];return Math.round(ve.length/Z.length*100)};return t?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900/20 to-purple-900/20 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-blue-500/10 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse delay-1000"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-cyan-500/5 rounded-full blur-3xl animate-pulse delay-500"})]}),a.jsx(S0,{}),a.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto p-6",children:[a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-gray-800/80 via-gray-700/80 to-gray-800/80 backdrop-blur-xl rounded-3xl shadow-2xl p-8 mb-8 border border-gray-600/50",children:a.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-8",children:[a.jsxs("div",{className:"relative",children:[a.jsxs(Ke.div,{className:"relative",whileHover:{scale:1.05},transition:{duration:.3},children:[a.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-blue-500 via-purple-500 to-cyan-500 p-1 shadow-2xl",children:a.jsx("div",{className:"w-full h-full rounded-full bg-gray-800 flex items-center justify-center text-6xl border-4 border-gray-700",children:l})}),a.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center border-4 border-gray-800",children:a.jsx(Qn,{className:"w-4 h-4 text-white"})})]}),a.jsx("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:kq.map(ve=>a.jsx(Ke.button,{className:`text-2xl p-2 rounded-full border-2 transition-all duration-300 ${l===ve?"border-blue-400 bg-blue-500/20 shadow-lg shadow-blue-500/25":"border-gray-600 hover:border-gray-500 hover:bg-gray-700/50"}`,onClick:()=>u(ve),whileHover:{scale:1.1},whileTap:{scale:.95},children:ve},ve))})]}),a.jsxs("div",{className:"flex-1 text-center lg:text-right",children:[a.jsx("div",{className:"mb-6",children:h?a.jsxs("div",{className:"flex items-center justify-center lg:justify-end gap-3 mb-2",children:[a.jsx("input",{type:"text",value:p,onChange:ve=>g(ve.target.value),className:"text-3xl font-bold bg-gray-700/50 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-blue-400 focus:outline-none",placeholder:"  "}),a.jsx(Ke.button,{onClick:ae,disabled:y,className:"bg-green-600 hover:bg-green-500 text-white p-2 rounded-lg transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(Yd,{className:"w-5 h-5"})}),a.jsx(Ke.button,{onClick:U,className:"bg-gray-600 hover:bg-gray-500 text-white p-2 rounded-lg transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(zr,{className:"w-5 h-5"})})]}):a.jsxs("div",{className:"flex items-center justify-center lg:justify-end gap-3 mb-2",children:[a.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent",children:M()}),a.jsx(Ke.button,{onClick:()=>f(!0),className:"bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 p-2 rounded-lg transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(M2,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-center lg:justify-end gap-3 text-gray-300",children:[a.jsx(ng,{className:"h-5 w-5 text-blue-400"}),a.jsx("span",{className:"text-lg",children:t==null?void 0:t.email})]}),a.jsxs("div",{className:"flex items-center justify-center lg:justify-end gap-3 text-gray-300",children:[a.jsx(Df,{className:"h-5 w-5 text-purple-400"}),a.jsx("span",{className:"text-lg font-semibold",children:(t==null?void 0:t.role)==="teacher"?"":(t==null?void 0:t.role)==="student"?"":""})]})]}),(t==null?void 0:t.role)==="student"&&a.jsxs(Ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-900/30 to-purple-900/30 rounded-xl p-4 border border-blue-500/30 mb-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-blue-300 mb-3 flex items-center justify-center lg:justify-end gap-2",children:[a.jsx(Cr,{className:"h-5 w-5"})," "]}),N?a.jsxs("div",{className:"flex items-center justify-center lg:justify-end gap-2 text-gray-400",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-400"}),"  ..."]}):L?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-center lg:justify-end gap-2 text-white",children:[a.jsx(Di,{className:"h-4 w-4 text-blue-400"}),a.jsx("span",{className:"font-semibold",children:L.displayName||L.email})]}),a.jsxs("div",{className:"flex items-center justify-center lg:justify-end gap-2 text-gray-300 text-sm",children:[a.jsx(ng,{className:"h-4 w-4 text-blue-400"}),a.jsx("span",{children:L.email})]})]}):a.jsx("div",{className:"text-gray-400 text-center lg:text-right",children:"   "})]}),a.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-end gap-3",children:[a.jsxs(Ke.button,{onClick:X,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[a.jsx(RB,{className:"w-4 h-4"})," "]}),a.jsxs(Ke.button,{onClick:xe,className:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[a.jsx(zr,{className:"w-4 h-4"}),""]})]}),R&&a.jsxs(Ke.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 bg-gray-700/50 rounded-xl p-4 border border-gray-600/50",children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-4 text-center",children:" "}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"password",value:z.currentPassword,onChange:ve=>O(we=>({...we,currentPassword:ve.target.value})),className:"w-full px-4 py-3 bg-gray-600/50 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none",placeholder:" ",required:!0}),a.jsx("input",{type:"password",value:z.newPassword,onChange:ve=>O(we=>({...we,newPassword:ve.target.value})),className:"w-full px-4 py-3 bg-gray-600/50 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none",placeholder:"  ( 6 )",required:!0}),a.jsx("input",{type:"password",value:z.confirmPassword,onChange:ve=>O(we=>({...we,confirmPassword:ve.target.value})),className:"w-full px-4 py-3 bg-gray-600/50 border border-gray-500 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none",placeholder:"  ",required:!0}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ke.button,{type:"button",onClick:K,disabled:D,className:"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 disabled:from-gray-600 disabled:to-gray-600 text-white py-3 rounded-lg font-semibold transition-all duration-300",whileHover:{scale:1.02},whileTap:{scale:.98},children:D?"...":" "}),a.jsx(Ke.button,{type:"button",onClick:Y,disabled:D,className:"px-6 bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-500 hover:to-gray-600 disabled:from-gray-600 disabled:to-gray-600 text-white py-3 rounded-lg font-semibold transition-all duration-300",whileHover:{scale:1.02},whileTap:{scale:.98},children:""})]})]})]})]})]})}),a.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-gray-800/80 via-gray-700/80 to-gray-800/80 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-gray-600/50",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-green-400 to-cyan-400 bg-clip-text text-transparent mb-2",children:" "}),a.jsx("p",{className:"text-gray-300",children:"  !"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-full bg-gray-700/50 rounded-full h-8 mb-4 border border-gray-600/50 overflow-hidden",children:a.jsxs(Ke.div,{className:"h-full bg-gradient-to-r from-green-500 via-cyan-500 to-blue-500 rounded-full flex items-center justify-end pr-4 text-white font-bold text-lg shadow-lg",initial:{width:0},animate:{width:`${le()}%`},transition:{duration:1.5,ease:"easeOut"},children:[le(),"%"]})}),a.jsxs("div",{className:"flex justify-between text-sm text-gray-400",children:[a.jsx("span",{children:""}),a.jsxs("span",{className:"font-semibold text-white",children:[((fe=t==null?void 0:t.completedLessons)==null?void 0:fe.length)||0,"  ",Z.length,"  "]}),a.jsx("span",{children:""})]})]})]})]})]}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-cyber-blue to-cyber-purple",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),a.jsx("p",{children:" ..."})]})})},Tq=()=>{const t=Zn(),{currentUser:e,userProfile:r}=ws(),[n,s]=S.useState(!0),[i,o]=S.useState([]),[l,u]=S.useState([]),[h,f]=S.useState([]),[p,g]=S.useState({totalLessons:0,completedLessons:0,activeSessions:0,totalTimeSpent:0});S.useEffect(()=>{y()},[e,r]);const y=async()=>{try{s(!0);const[A,k]=await Promise.all([y6(e.uid),E0()]),F=k.slice().sort((I,N)=>{const T=I.order??I.originalId??0,R=N.order??N.originalId??0;return T!==R?T-R:(I.title||"").localeCompare(N.title||"")});o(A),u(F);const L=[];r!=null&&r.progress&&Object.entries(r.progress).forEach(([I,N])=>{if(N.completed&&N.completedAt){const T=F.find(R=>R.id===parseInt(I));T&&L.push({id:parseInt(I),title:T.title,completedAt:N.completedAt,score:N.score||0})}}),f(L),g({totalLessons:F.length,completedLessons:L.length,activeSessions:A.length,totalTimeSpent:(r==null?void 0:r.totalTimeSpent)||0}),s(!1)}catch(A){console.error("Error loading data:",A),Ie.error("   "),s(!1)}},w=A=>{t(`/student/session/${A}`)},b=async A=>{try{const{doc:k,getDoc:F}=await fs(async()=>{const{doc:T,getDoc:R}=await Promise.resolve().then(()=>Af);return{doc:T,getDoc:R}},void 0),{db:L}=await fs(async()=>{const{db:T}=await Promise.resolve().then(()=>Cf);return{db:T}},void 0),I=k(L,"users",e.uid),N=await F(I);if(N.exists()){const R=N.data().currentLesson||0;A<=R?t(`/student/lesson/${A}`):Ie.error("      ")}else r!=null&&r.currentLesson&&A<=r.currentLesson?t(`/student/lesson/${A}`):Ie.error("      ")}catch(k){console.error("Error checking lesson access:",k),r!=null&&r.currentLesson&&A<=r.currentLesson?t(`/student/lesson/${A}`):Ie.error("      ")}},_=A=>{if(!A)return"0 ";const k=Date.now()-A.toDate().getTime();return`${Math.floor(k/(1e3*60))} `},P=A=>new Date(A).toLocaleDateString("he-IL",{year:"numeric",month:"short",day:"numeric"});return n?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx(Jn,{size:"lg"})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-400",children:p.totalLessons}),a.jsx("div",{className:"text-sm text-gray-300",children:'" '})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-400",children:p.completedLessons}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-400",children:p.activeSessions}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-orange-400",children:Math.floor(p.totalTimeSpent/60)}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})})]}),a.jsx(rt,{variant:"dark",className:"mb-8",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Ws,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4",children:r!=null&&r.currentLesson?a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-white font-medium",children:[" ",r.currentLesson]}),a.jsxs("p",{className:"text-sm text-gray-400",children:["     ",r.lessonStartDate?` -${new Date(r.lessonStartDate).toLocaleDateString("he-IL")}`:"  "]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-sm text-green-400",children:""})]})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx(To,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{className:"text-gray-400",children:"    "})]})})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Sn,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:i.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Sn,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-400",children:"   "})]}):i.map(A=>{var k;return a.jsx("div",{className:"p-4 rounded-lg border border-gray-600 bg-gray-700/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium",children:A.lessonName}),a.jsxs("p",{className:"text-sm text-gray-400",children:[A.className,"  ",((k=A.connectedStudents)==null?void 0:k.length)||0,"  "]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["  ",_(A.startTime)]})]}),a.jsxs(ut,{onClick:()=>w(A.id),variant:"primary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Sn,{className:"w-4 h-4"}),a.jsx("span",{children:""})]})]})},A.id)})})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Qt,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:h.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Qt,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-400",children:"   "})]}):h.map(A=>{var k;return a.jsx("div",{className:"p-4 rounded-lg border border-gray-600 bg-gray-700/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium",children:A.title}),a.jsxs("p",{className:"text-sm text-gray-400",children:[" -",P(A.completedAt)]}),a.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[a.jsx("div",{className:"w-16 bg-gray-600 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${A.score}%`}})}),a.jsxs("span",{className:"text-sm text-green-400",children:[A.score,"%"]})]}),a.jsxs("span",{className:"text-xs text-gray-400",children:[A.totalSlides||((k=A.slides)==null?void 0:k.length)||0," "]})]}),a.jsx(ut,{onClick:()=>b(A.id),variant:"secondary",size:"sm",children:" "})]})},A.id)})})]})})]}),a.jsx(rt,{variant:"dark",className:"mt-8",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-lg font-bold text-white mb-4",children:" "}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("button",{onClick:()=>t("/student/roadmap"),className:"flex items-center space-x-3 p-4 bg-blue-600 hover:bg-blue-500 rounded-lg transition-colors",children:[a.jsx(Ws,{className:"w-6 h-6 text-white"}),a.jsx("span",{className:"text-white",children:" "})]}),a.jsxs("button",{onClick:()=>t("/student/profile"),className:"flex items-center space-x-3 p-4 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[a.jsx(Cr,{className:"w-6 h-6 text-blue-400"}),a.jsx("span",{className:"text-white",children:" "})]}),a.jsxs("button",{onClick:()=>t("/student/roadmap"),className:"flex items-center space-x-3 p-4 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[a.jsx(Qd,{className:"w-6 h-6 text-green-400"}),a.jsx("span",{className:"text-white",children:" "})]})]})]})})]})})},jq=()=>{Ol(),Zn();const{logout:t,currentUser:e}=ws(),{displayName:r,role:n}=Eb(),[s,i]=S.useState(!1),[o,l]=S.useState(!1),[u,h]=S.useState(null),[f,p]=S.useState(0),[g,y]=S.useState(!1),w=S.useRef(null);S.useEffect(()=>{const A=k=>{w.current&&!w.current.contains(k.target)&&l(!1)};return o&&document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[o]),S.useEffect(()=>{if(!(e!=null&&e.uid))return;let A=null;return(async()=>{try{await LW(e.uid);const F=await v6(e.uid);if(F.length>0){const L=F[0];h(L),A=Nx(L.id,I=>{I&&I.status==="active"?h(I):(h(null),p(0))})}else h(null),p(0)}catch(F){console.error("Error loading active sessions:",F),h(null)}})(),()=>{A&&A()}},[e==null?void 0:e.uid]),S.useEffect(()=>{if(!(u!=null&&u.startTime)){p(0);return}const A=setInterval(()=>{var L,I;const k=((I=(L=u.startTime)==null?void 0:L.toDate)==null?void 0:I.call(L))||new Date(u.startTime),F=Math.floor((Date.now()-k.getTime())/1e3);p(F)},1e3);return()=>clearInterval(A)},[u==null?void 0:u.startTime]);const b=async()=>{try{u?(await Bf(u.id),Ie.success("   ")):Ie.success(" "),await t(),Wr("TEACHER_LOGOUT",{role:n,uid:r})}catch(A){console.error("Logout error:",A),Ie.error("  ")}},_=async()=>{if(!(!u||g))try{y(!0),await Bf(u.id),h(null),p(0),Ie.success("  "),Wr("SESSION_ENDED_BY_TEACHER",{sessionId:u.id,teacherId:e.uid,lessonId:u.lessonId,duration:f})}catch(A){console.error("Error ending session:",A),Ie.error("   ")}finally{y(!1)}},P=A=>{const k=Math.floor(A/60),F=Math.floor(k/60),L=k%60;return F>0?`${F} ${L}`:`${k} `};return a.jsx("nav",{className:"bg-gray-900/95 backdrop-blur-xl border-b border-gray-700 shadow-lg sticky top-0 z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs(Ei,{to:"/teacher/dashboard",className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(Qn,{className:"w-5 h-5 text-gray-100"})}),a.jsx("span",{className:"text-xl font-bold text-gray-200",children:"Israel Cyber Campus"}),a.jsx("span",{className:"text-sm text-blue-400 bg-blue-500/10 px-2 py-1 rounded-full",children:" "})]})}),a.jsx("div",{className:"hidden lg:flex items-center space-x-6",children:a.jsx(kb,{position:"inline"})}),u&&a.jsxs("div",{className:"hidden md:flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2 bg-green-500/10 border border-green-500/20 rounded-lg px-3 py-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-green-400 text-sm font-medium",children:""}),a.jsx("span",{className:"text-gray-300 text-sm",children:u.lessonName||` ${u.lessonId}`}),a.jsx("span",{className:"text-gray-400 text-xs",children:P(f)})]}),a.jsxs(Ei,{to:`/teacher/session/${u.id}`,className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded-lg text-gray-100 text-sm font-medium transition-colors",children:[a.jsx(Sn,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]}),a.jsxs("button",{onClick:_,disabled:g,className:"flex items-center space-x-2 bg-red-600 hover:bg-red-700 disabled:bg-red-800 px-3 py-2 rounded-lg text-gray-100 text-sm font-medium transition-colors",children:[a.jsx(zr,{className:"w-4 h-4"}),a.jsx("span",{children:g?"...":" "})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",ref:w,children:[a.jsxs("button",{onClick:()=>l(!o),className:"flex items-center space-x-3 bg-gray-800/50 hover:bg-gray-700/50 px-4 py-2 rounded-lg text-gray-200 transition-all duration-200",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx(Qn,{className:"w-4 h-4 text-gray-100"})}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"text-sm font-medium block",children:r}),a.jsx("span",{className:"text-xs text-gray-400",children:""})]})]}),o&&a.jsxs(Ke.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-56 bg-gray-800 rounded-lg shadow-xl border border-gray-600 py-2 z-50",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-gray-600",children:[a.jsx("p",{className:"text-sm text-gray-200",children:r}),a.jsx("p",{className:"text-xs text-gray-400",children:""})]}),a.jsxs("div",{className:"py-1",children:[a.jsxs(Ei,{to:"/teacher/profile",className:"flex items-center px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",onClick:()=>l(!1),children:[a.jsx(Di,{className:"w-4 h-4 mr-3"}),""]}),a.jsxs(Ei,{to:"/teacher/settings",className:"flex items-center px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors",onClick:()=>l(!1),children:[a.jsx(_o,{className:"w-4 h-4 mr-3"}),""]})]}),a.jsx("div",{className:"border-t border-gray-600 pt-1",children:a.jsxs("button",{onClick:b,className:"flex items-center w-full px-4 py-2 text-sm text-red-400 hover:bg-gray-700 hover:text-red-300 transition-colors",children:[a.jsx(R3,{className:"w-4 h-4 mr-3"}),""]})})]})]}),a.jsx("button",{onClick:()=>i(!s),className:"lg:hidden p-2 rounded-lg text-gray-400 hover:text-white hover:bg-gray-700 transition-colors",children:s?a.jsx(zr,{className:"w-6 h-6"}):a.jsx(BB,{className:"w-6 h-6"})})]})]}),s&&a.jsxs(Ke.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"lg:hidden border-t border-gray-700 py-4",children:[u&&a.jsxs("div",{className:"mb-4 p-3 bg-green-500/10 border border-green-500/20 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-green-400 text-sm font-medium",children:" "})]}),a.jsx("span",{className:"text-gray-300 text-sm",children:P(f)})]}),a.jsx("p",{className:"text-gray-300 text-sm mt-1",children:u.lessonName||` ${u.lessonId}`}),a.jsxs("div",{className:"flex space-x-2 mt-2",children:[a.jsx(Ei,{to:`/teacher/session/${u.id}`,className:"flex-1 bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded text-center text-gray-100 text-sm font-medium transition-colors",onClick:()=>i(!1),children:" "}),a.jsx("button",{onClick:_,disabled:g,className:"flex-1 bg-red-600 hover:bg-red-700 disabled:bg-red-800 px-3 py-2 rounded text-center text-gray-100 text-sm font-medium transition-colors",children:g?"...":""})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Ei,{to:"/teacher/dashboard",className:"flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg transition-colors",onClick:()=>i(!1),children:[a.jsx(IB,{className:"w-5 h-5 mr-3"}),""]}),a.jsxs(Ei,{to:"/teacher/profile",className:"flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg transition-colors",onClick:()=>i(!1),children:[a.jsx(Di,{className:"w-5 h-5 mr-3"}),""]}),a.jsxs(Ei,{to:"/teacher/settings",className:"flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-lg transition-colors",onClick:()=>i(!1),children:[a.jsx(_o,{className:"w-5 h-5 mr-3"}),""]})]})]})]})})},_6=()=>{const{currentUser:t}=ws(),[e,r]=S.useState([]),[n,s]=S.useState([]),[i,o]=S.useState([]),[l,u]=S.useState(!0),[h,f]=S.useState(""),[p,g]=S.useState("all"),[y,w]=S.useState([]),[b,_]=S.useState(null),[P,A]=S.useState(!1),[k,F]=S.useState(null),[L,I]=S.useState({name:"",description:"",maxStudents:30,initialLesson:""});S.useEffect(()=>{N()},[]);const N=async()=>{try{u(!0),console.log(" Loading data for teacher:",t.uid),console.log(" Fetching students...");const H=await b3();console.log(" Students fetched:",H.length,"students"),console.log(" Students data:",H),console.log(" Fetching classes...");const Q=await tu(t.uid);console.log(" Classes fetched:",Q.length,"classes"),console.log(" Classes data:",Q),console.log(" Fetching lessons...");const ae=(await E0()).slice().sort((U,M)=>{const X=U.order??U.originalId??0,K=M.order??M.originalId??0;return X!==K?X-K:(U.title||"").localeCompare(M.title||"")});console.log(" Lessons fetched:",ae.length,"lessons"),console.log(" Lessons data:",ae),r(H),s(Q),o(ae),console.log(" All data loaded successfully")}catch(H){console.error(" Error loading data:",H),console.error("Error details:",{message:H.message,code:H.code,stack:H.stack}),Ie.error("  ")}finally{u(!1)}},T=e.filter(H=>{var ae,U;const Q=((ae=H.displayName)==null?void 0:ae.toLowerCase().includes(h.toLowerCase()))||((U=H.email)==null?void 0:U.toLowerCase().includes(h.toLowerCase())),q=p==="all"||p==="assigned"&&H.assignedToClass||p==="unassigned"&&!H.assignedToClass;return Q&&q}),R=async H=>{if(H.preventDefault(),!L.name.trim()){Ie.error("    ");return}try{const Q=await p3(L,t.uid);s(q=>[Q,...q]),I({name:"",description:"",maxStudents:30,initialLesson:""}),A(!1),Ie.success("  ")}catch(Q){console.error("Error creating class:",Q),Ie.error("  ")}},B=async H=>{if(H.preventDefault(),!k.name.trim()){Ie.error("    ");return}try{await g3(k.id,{name:k.name,description:k.description,maxStudents:k.maxStudents},t.uid),s(Q=>Q.map(q=>q.id===k.id?{...q,...k}:q)),F(null),Ie.success("  ")}catch(Q){console.error("Error updating class:",Q),Ie.error("  ")}},z=async H=>{if(confirm("      ?"))try{await x3(H,t.uid),s(Q=>Q.filter(q=>q.id!==H)),Ie.success("  ")}catch(Q){console.error("Error deleting class:",Q),Ie.error("  ")}},O=async(H,Q)=>{try{await _3(H,Q,t.uid),r(q=>q.map(ae=>({...ae,classId:Q.includes(ae.id)?H:ae.classId,teacherId:Q.includes(ae.id)?t.uid:ae.teacherId,assignedToClass:Q.includes(ae.id),assignedToTeacher:Q.includes(ae.id)}))),s(q=>q.map(ae=>ae.id===H?{...ae,studentIds:Q}:ae)),Ie.success("  ")}catch(q){console.error("Error assigning students:",q),Ie.error("  ")}},D=(H,Q)=>{_(Q),H.dataTransfer.effectAllowed="move"},ie=H=>{H.preventDefault(),H.dataTransfer.dropEffect="move"},Z=(H,Q)=>{if(H.preventDefault(),!b)return;const ae=[...Q.studentIds||[],b.id];O(Q.id,ae),_(null)},ne=async(H,Q)=>{var U;const ae=(((U=n.find(M=>M.id===H))==null?void 0:U.studentIds)||[]).filter(M=>M!==Q);await O(H,ae)};return l?a.jsx(Jn,{}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"  "}),a.jsx("p",{className:"text-gray-400",children:"    "})]}),a.jsxs("button",{onClick:()=>A(!0),className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[a.jsx(ud,{className:"w-5 h-5"}),a.jsx("span",{children:"  "})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-white",children:" "}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx(jo,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:" ...",value:h,onChange:H=>f(H.target.value),className:"bg-gray-700 text-white pl-10 pr-4 py-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("select",{value:p,onChange:H=>g(H.target.value),className:"bg-gray-700 text-white px-3 py-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:" "}),a.jsx("option",{value:"assigned",children:""}),a.jsx("option",{value:"unassigned",children:" "})]})]})]}),a.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:a.jsx(vn,{children:T.map(H=>a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},draggable:!0,onDragStart:Q=>D(Q,H),className:`p-3 rounded-lg cursor-move transition-colors ${H.assignedToClass?"bg-green-900/50 border border-green-500/50":"bg-gray-700 hover:bg-gray-600"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${H.assignedToClass?"bg-green-400":"bg-gray-400"}`}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:H.displayName}),a.jsx("p",{className:"text-gray-400 text-sm",children:H.email})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[H.assignedToClass&&a.jsx("span",{className:"text-green-400 text-xs bg-green-900/50 px-2 py-1 rounded",children:""}),a.jsx(U2,{className:"w-4 h-4 text-gray-400"})]})]})},H.id))})})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-white",children:""}),a.jsxs("span",{className:"text-gray-400 text-sm",children:[n.length," "]})]}),a.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:a.jsx(vn,{children:n.map(H=>{var Q,q;return a.jsxs(Ke.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},onDragOver:ie,onDrop:ae=>Z(ae,H),className:`p-4 rounded-lg border-2 border-dashed transition-colors ${b?"border-blue-500 bg-blue-900/20":"border-gray-600"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-semibold",children:H.name}),a.jsx("p",{className:"text-gray-400 text-sm",children:H.description})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>F(H),className:"p-1 hover:bg-gray-700 rounded",children:a.jsx(M2,{className:"w-4 h-4 text-gray-400"})}),a.jsx("button",{onClick:()=>z(H.id),className:"p-1 hover:bg-red-600 rounded",children:a.jsx(da,{className:"w-4 h-4 text-red-400"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-3",children:[a.jsxs("span",{children:[((Q=H.studentIds)==null?void 0:Q.length)||0," / ",H.maxStudents," "]}),a.jsx("span",{children:H.isActive?"":" "})]}),a.jsx("div",{className:"space-y-1",children:(q=H.studentIds)==null?void 0:q.map(ae=>{const U=e.find(M=>M.id===ae);return U?a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700 rounded",children:[a.jsx("span",{className:"text-white text-sm",children:U.displayName}),a.jsx("button",{onClick:()=>ne(H.id,ae),className:"p-1 hover:bg-red-600 rounded",children:a.jsx(zr,{className:"w-3 h-3 text-red-400"})})]},ae):null})}),(!H.studentIds||H.studentIds.length===0)&&a.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"      "})]},H.id)})})})]})]}),a.jsx(vn,{children:P&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"  "}),a.jsxs("form",{onSubmit:R,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsx("input",{type:"text",value:L.name,onChange:H=>I(Q=>({...Q,name:H.target.value})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:":  '"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:""}),a.jsx("textarea",{value:L.description,onChange:H=>I(Q=>({...Q,description:H.target.value})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"   "})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"   "}),a.jsx("input",{type:"number",value:L.maxStudents,onChange:H=>I(Q=>({...Q,maxStudents:parseInt(H.target.value)})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"  ()"}),a.jsxs("select",{value:L.initialLesson,onChange:H=>I(Q=>({...Q,initialLesson:H.target.value})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"   ()"}),i.map(H=>{var q;const Q=H.originalId||H.order;return a.jsxs("option",{value:Q,children:[" ",Q," - ",H.title," (",H.totalSlides||((q=H.slides)==null?void 0:q.length)||0," )"]},H.id)})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition-colors",children:" "}),a.jsx("button",{type:"button",onClick:()=>A(!1),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-2 rounded-lg transition-colors",children:""})]})]})]})})}),a.jsx(vn,{children:k&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:" "}),a.jsxs("form",{onSubmit:B,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsx("input",{type:"text",value:k.name,onChange:H=>F(Q=>({...Q,name:H.target.value})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:""}),a.jsx("textarea",{value:k.description,onChange:H=>F(Q=>({...Q,description:H.target.value})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"   "}),a.jsx("input",{type:"number",value:k.maxStudents,onChange:H=>F(Q=>({...Q,maxStudents:parseInt(H.target.value)})),className:"w-full bg-gray-700 text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"50"})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition-colors",children:" "}),a.jsx("button",{type:"button",onClick:()=>F(null),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-2 rounded-lg transition-colors",children:""})]})]})]})})})]})},N6=()=>{var he,me;const{currentUser:t}=ws(),[e,r]=S.useState(null),[n,s]=S.useState([]),[i,o]=S.useState(0),[l,u]=S.useState({}),[h,f]=S.useState(""),[p,g]=S.useState(!1),[y,w]=S.useState(!1),[b,_]=S.useState(!0),[P,A]=S.useState(!1),[k,F]=S.useState(!0),[L,I]=S.useState(""),[N,T]=S.useState("all"),[R,B]=S.useState({}),[z,O]=S.useState({}),[D,ie]=S.useState(!1),[Z,ne]=S.useState(5e3),[H,Q]=S.useState(null),[q,ae]=S.useState(null),[U,M]=S.useState(!1),X=async()=>{var ee;try{g(!0),ae(null),console.log(" Loading lessons with slide counts from database...");const pe=await E0();console.log(` Loaded ${pe.length} lessons with slide counts from database`),s(pe),pe.length===0?(ae("No lessons found. Please check your database connection."),Ie.error("No lessons found. Please check your database connection.")):e||(r(pe[0]),console.log(` Auto-selected lesson: ${pe[0].title} with ${((ee=pe[0].slides)==null?void 0:ee.length)||0} slides`))}catch(pe){console.error(" Error loading lessons:",pe),ae(`Failed to load lessons: ${pe.message}`),Ie.error(`Failed to load lessons: ${pe.message}`)}finally{g(!1)}},K=async ee=>{var pe;console.log(" Lesson changed to:",ee);try{const Ce=n.find($e=>$e.id===ee);Ce?(console.log(" Found lesson data:",Ce.title),console.log(` Lesson has ${((pe=Ce.slides)==null?void 0:pe.length)||0} slides loaded`),r(Ce),o(0),t!=null&&t.uid&&await Y(Ce.id)):(console.error(" Lesson not found in loaded lessons"),Ie.error("Lesson not found"))}catch(Ce){console.error(" Error loading lesson:",Ce),Ie.error("Failed to load lesson")}},Y=async ee=>{try{if(!(t!=null&&t.uid))return;const pe=await cx(t.uid,ee),Ce={};pe.forEach($e=>{Ce[$e.slideId]=$e.content}),u(Ce),console.log(` Loaded ${pe.length} teacher notes for lesson ${ee}`)}catch(pe){console.error(" Error loading teacher notes:",pe)}},xe=async()=>{var ee;try{if(!(t!=null&&t.uid)||!(e!=null&&e.id)||!h.trim())return;w(!0);const pe=(ee=e.slides)==null?void 0:ee[i];if(!pe){Ie.error("No slide data available");return}const Ce=pe.id;await E3(t.uid,e.id,Ce,{content:h.trim(),slideIndex:i}),u($e=>({...$e,[Ce]:h.trim()})),f(""),Ie.success("Note saved successfully")}catch(pe){console.error(" Error saving note:",pe),Ie.error("Failed to save note")}finally{w(!1)}};S.useEffect(()=>{X()},[]),S.useEffect(()=>{t!=null&&t.uid&&(e!=null&&e.id)&&Y(e.id)},[t==null?void 0:t.uid,e==null?void 0:e.id]),S.useEffect(()=>{if(D&&(e!=null&&e.slides)){const ee=setInterval(()=>{o(pe=>pe<e.slides.length-1?pe+1:(ie(!1),pe))},Z);return Q(ee),()=>clearInterval(ee)}},[D,Z,e==null?void 0:e.slides]);const le=ee=>{e!=null&&e.slides&&ee>=0&&ee<e.slides.length&&(o(ee),we(ee))},fe=()=>{e!=null&&e.slides&&i<e.slides.length-1&&le(i+1)},ve=()=>{i>0&&le(i-1)},we=ee=>{var $e;if(!(e!=null&&e.slides)||ee>=e.slides.length){f("");return}const pe=($e=e.slides[ee])==null?void 0:$e.id,Ce=l[pe]||"";f(Ce)};S.useEffect(()=>{we(i)},[i,e,l]);const We=ee=>{if(!ee)return null;try{switch(ee.type){case"presentation":return a.jsx(Pd,{slide:ee});case"poll":return a.jsx(k0,{slide:ee,onSubmit:pe=>re(ee.id,pe)});case"video":return a.jsx(T0,{slide:ee});case"interactive":return a.jsx(j0,{slide:ee,onComplete:pe=>re(ee.id,pe)});case"break":return a.jsx(A0,{slide:ee});case"reflection":return a.jsx(C0,{slide:ee,onSubmit:pe=>re(ee.id,pe)});case"quiz":return a.jsx(I0,{slide:ee,onSubmit:pe=>re(ee.id,pe)});default:return a.jsx("div",{className:"text-center py-8",children:a.jsxs("p",{className:"text-gray-400",children:["Unsupported slide type: ",ee.type]})})}}catch(pe){return console.error("Error rendering slide:",pe),a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-red-400",children:"Error rendering slide"})})}},re=(ee,pe)=>{B(Ce=>({...Ce,[ee]:pe})),O(Ce=>({...Ce,[ee]:!0}))},st=ee=>{switch(ee){case"presentation":return a.jsx(_l,{className:"w-4 h-4"});case"poll":return a.jsx(mx,{className:"w-4 h-4"});case"video":return a.jsx(Sn,{className:"w-4 h-4"});case"interactive":return a.jsx(_o,{className:"w-4 h-4"});case"break":return a.jsx(kd,{className:"w-4 h-4"});case"reflection":return a.jsx(Ws,{className:"w-4 h-4"});case"quiz":return a.jsx(Qt,{className:"w-4 h-4"});default:return a.jsx(_l,{className:"w-4 h-4"})}},Re=n.filter(ee=>{var pe,Ce;return((pe=ee.title)==null?void 0:pe.toLowerCase().includes(L.toLowerCase()))||((Ce=ee.description)==null?void 0:Ce.toLowerCase().includes(L.toLowerCase()))}).sort((ee,pe)=>{const Ce=ee.order??ee.originalId??0,$e=pe.order??pe.originalId??0;return Ce!==$e?Ce-$e:(ee.title||"").localeCompare(pe.title||"")});return p?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(Jn,{})}):q?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(To,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsx("p",{className:"text-red-400",children:q}),a.jsx("button",{onClick:X,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]}):a.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Ws,{className:"w-8 h-8 text-blue-400"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Slide Preview Manager"}),a.jsx("p",{className:"text-gray-400",children:"Preview and manage lesson slides"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:()=>_(!b),className:`px-4 py-2 rounded-lg flex items-center space-x-2 ${b?"bg-blue-600":"bg-gray-700"}`,children:[a.jsx(Da,{className:"w-4 h-4"}),a.jsx("span",{children:"Preview"})]}),a.jsx("button",{onClick:()=>A(!P),className:"px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600",children:P?a.jsx(R2,{className:"w-4 h-4"}):a.jsx(P2,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsx(rt,{className:"h-full",children:a.jsxs("div",{className:"p-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Lessons"}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search lessons...",value:L,onChange:ee=>I(ee.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-blue-500"})]})}),a.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Re.map(ee=>{var pe;return a.jsx("button",{onClick:()=>K(ee.id),className:`w-full text-left p-3 rounded-lg transition-colors ${(e==null?void 0:e.id)===ee.id?"bg-blue-600 text-white":"bg-gray-800 hover:bg-gray-700"}`,children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ws,{className:"w-4 h-4"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:ee.title}),a.jsxs("p",{className:"text-sm opacity-75",children:[ee.totalSlides||((pe=ee.slides)==null?void 0:pe.length)||0," slides"]})]})]})},ee.id)})})]})})}),a.jsx("div",{className:"lg:col-span-3",children:e?a.jsxs("div",{className:"space-y-6",children:[a.jsx(rt,{children:a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:e.title}),a.jsx("p",{className:"text-gray-400",children:e.description})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm text-gray-400",children:["Slide ",i+1," of ",e.totalSlides||((he=e.slides)==null?void 0:he.length)||0]}),a.jsxs("p",{className:"text-sm text-gray-400",children:[e.totalSlides||((me=e.slides)==null?void 0:me.length)||0," total slides"]})]})]})})}),e.slides&&e.slides.length>0&&a.jsx(rt,{children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Slide Navigation"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>ie(!D),className:`px-3 py-1 rounded ${D?"bg-red-600":"bg-green-600"}`,children:D?a.jsx(kd,{className:"w-4 h-4"}):a.jsx(Sn,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>F(!k),className:"px-3 py-1 bg-gray-700 rounded hover:bg-gray-600",children:a.jsx(I3,{className:"w-4 h-4"})})]})]}),k&&a.jsx("div",{className:"grid grid-cols-6 gap-2 mb-4",children:e.slides.map((ee,pe)=>a.jsx("button",{onClick:()=>le(pe),className:`p-2 rounded text-xs ${pe===i?"bg-blue-600 text-white":"bg-gray-800 hover:bg-gray-700"}`,children:a.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[st(ee.type),a.jsx("span",{children:pe+1})]})},`slide-${ee.id}-order-${ee.order||pe}`))}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:ve,disabled:i===0,className:"px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(Mc,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>le(0),disabled:i===0,className:"px-3 py-1 bg-gray-700 rounded hover:bg-gray-600 disabled:opacity-50",children:a.jsx(F2,{className:"w-4 h-4"})}),a.jsxs("span",{className:"text-sm",children:[i+1," / ",e.slides.length]}),a.jsx("button",{onClick:()=>le(e.slides.length-1),disabled:i===e.slides.length-1,className:"px-3 py-1 bg-gray-700 rounded hover:bg-gray-600 disabled:opacity-50",children:a.jsx(L2,{className:"w-4 h-4"})})]}),a.jsx("button",{onClick:fe,disabled:i===e.slides.length-1,className:"px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(dx,{className:"w-4 h-4"})})]})]})}),e.slides&&e.slides[i]&&a.jsx(rt,{children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:e.slides[i].title}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[st(e.slides[i].type),a.jsx("span",{children:e.slides[i].type})]})]}),a.jsx("div",{className:"border border-gray-700 rounded-lg p-4 bg-gray-800",children:We(e.slides[i])})]})}),a.jsx(rt,{children:a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Teacher Notes"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("textarea",{value:h,onChange:ee=>f(ee.target.value),placeholder:"Add your notes for this slide...",className:"w-full h-32 p-3 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-blue-500 resize-none"}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>f(""),className:"px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Clear"}),a.jsxs("button",{onClick:xe,disabled:y||!h.trim(),className:"px-4 py-2 bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[y?a.jsx(Jn,{}):a.jsx(Yd,{className:"w-4 h-4"}),a.jsx("span",{children:"Save Note"})]})]})]})]})})]}):a.jsx(rt,{children:a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(Ws,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Lesson Selected"}),a.jsx("p",{className:"text-gray-400",children:"Select a lesson from the sidebar to preview its slides"})]})})})]})]})})},E6=()=>{Zn();const{currentUser:t}=ws(),[e,r]=S.useState(!0),[n,s]=S.useState([]),[i,o]=S.useState([]),[l,u]=S.useState({}),[h,f]=S.useState({}),[p,g]=S.useState([]),[y,w]=S.useState({}),[b,_]=S.useState(null),[P,A]=S.useState(""),[k,F]=S.useState("all"),[L,I]=S.useState(!0),[N,T]=S.useState(!0),[R,B]=S.useState(null),[z,O]=S.useState(new Set);S.useEffect(()=>{if(!t){Wr("UNAUTHORIZED_ACCESS_ATTEMPT",{role:"none"},{component:"ClassroomInterface"});return}const le=k2({role:"teacher"},"view_classrooms");if(!le.success){Wr("INSUFFICIENT_PERMISSIONS",{role:"teacher",uid:t.uid},{component:"ClassroomInterface",reason:le.message}),Ie.error("    ");return}D(),ie()},[t]);const D=async()=>{try{r(!0),B(null);const[le,fe]=await Promise.all([tu(t.uid),E0()]),ve=fe.slice().sort((st,Re)=>{const he=st.order??st.originalId??0,me=Re.order??Re.originalId??0;return he!==me?he-me:(st.title||"").localeCompare(Re.title||"")});s(le),o(ve);const we={};for(const st of le)try{const he=(await T2(st.id)).map(me=>({uid:me.uid||"unknown",displayName:me.displayName||me.email||"  ",email:me.email||"",role:me.role||"student",classId:me.classId||st.id,progress:typeof me.progress=="number"?me.progress:0,completedLessons:Array.isArray(me.completedLessons)?me.completedLessons:[],totalTimeSpent:typeof me.totalTimeSpent=="number"?me.totalTimeSpent:0,lastActivityAt:me.lastActivityAt||null,createdAt:me.createdAt||new Date().toISOString()}));we[st.id]=he}catch(Re){console.error(`Error loading students for class ${st.id}:`,Re),we[st.id]=[]}u(we);const We=await w3(t.uid);f(We);const re=await j2(t.uid,20);g(re),r(!1)}catch(le){console.error("Error loading classroom data:",le),B(le.message),r(!1)}},ie=()=>{const le=Z();return()=>{le&&le()}},Z=()=>{w({})},ne=le=>{const fe=new Set(z);fe.has(le)?fe.delete(le):fe.add(le),O(fe)},H=(le,fe)=>{const ve=y[fe];if(!ve)return"offline";const we=ve.connectedStudents.includes(le.uid),We=le.lastActivityAt,re=We&&Date.now()-new Date(We).getTime()<3e5;return we&&re?"online":we&&!re?"idle":"offline"},Q=le=>{switch(le){case"online":return a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"});case"idle":return a.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"});case"offline":return a.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"});default:return a.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"})}},q=le=>{switch(le){case"online":return"";case"idle":return" ";case"offline":return"";default:return" "}},ae=le=>{switch(le){case"online":return"text-green-400";case"idle":return"text-yellow-400";case"offline":return"text-gray-400";default:return"text-gray-400"}},U=n.filter(le=>{if(P&&!le.name.toLowerCase().includes(P.toLowerCase()))return!1;if(k!=="all"){const fe=y[le.id];if(k==="active"&&!fe||k==="inactive"&&fe)return!1}return!0}),M=le=>{const fe=l[le.id]||[];if(fe.length===0)return 0;const ve=fe.reduce((we,We)=>{let re=0;if(typeof We.progress=="number")re=We.progress;else if(We.progress&&typeof We.progress=="object"){const st=Object.values(We.progress).filter(Re=>typeof Re=="number");re=st.length>0?st.reduce((Re,he)=>Re+he,0)/st.length:0}return we+re},0);return Math.round(ve/fe.length)},X=le=>{const fe=l[le.id]||[],ve=y[le.id],we=fe.filter(st=>H(st,le.id)==="online").length,We=fe.filter(st=>H(st,le.id)==="idle").length,re=fe.filter(st=>H(st,le.id)==="offline").length;return{total:fe.length,online:we,idle:We,offline:re,progress:M(le),hasActiveSession:!!ve}},K=async()=>{Ie.loading(" ..."),await D(),Ie.dismiss(),Ie.success("  ")},Y=async(le,fe)=>{try{await wo(t.uid,{type:`student_${fe}`,title:`  - ${fe}`,description:` ${fe}    ${le}`,metadata:{studentId:le,action:fe}}),Ie.success(` ${fe}  `)}catch(ve){console.error("Error performing student action:",ve),Ie.error("   ")}},xe=async(le,fe)=>{try{if(!fe){Ie.error("  ");return}const ve=new Date().toISOString(),we=n.find(me=>me.id===le),We=(we==null?void 0:we.unlockedLessons)||[],re={lessonId:fe,unlockedAt:ve,unlockedBy:t.uid,unlockedByTeacher:t.displayName||t.email},st=wt(ze,"classes",le);await On(st,{currentLesson:fe,lessonStartDate:ve,lastUpdated:ve,unlockedLessons:[...We,re]});const he=(l[le]||[]).map(async me=>{const ee=wt(ze,"users",me.uid);await On(ee,{currentLesson:fe,lastUpdated:ve})});await Promise.all(he),Ie.success(` ${fe}    -        ${fe}`),await D()}catch(ve){console.error("Error assigning lesson:",ve),Ie.error("   ")}};return lx({role:"teacher"})?e?a.jsx("div",{className:"bg-black min-h-screen flex items-center justify-center",children:a.jsx(Jn,{})}):R?a.jsxs("div",{className:"text-center py-8 bg-black min-h-screen flex flex-col items-center justify-center",children:[a.jsx(To,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsx("p",{className:"text-red-400 mb-4",children:"   "}),a.jsx(ut,{onClick:D,children:" "})]}):a.jsxs("div",{className:"space-y-6 p-6 bg-black min-h-screen",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:" "}),a.jsx("p",{className:"text-white",children:"    "})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(ut,{onClick:()=>T(!N),variant:N?"primary":"secondary",size:"sm",children:[N?a.jsx(A3,{className:"w-4 h-4"}):a.jsx(vB,{className:"w-4 h-4"}),N?" ":" "]}),a.jsxs(ut,{onClick:K,variant:"secondary",size:"sm",children:[a.jsx(Cs,{className:"w-4 h-4"}),""]})]})]}),a.jsx(rt,{children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white"}),a.jsx("input",{type:"text",placeholder:" ...",value:P,onChange:le=>A(le.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),a.jsxs("select",{value:k,onChange:le=>F(le.target.value),className:"px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",className:"bg-gray-800 text-white",children:" "}),a.jsx("option",{value:"active",className:"bg-gray-800 text-white",children:" "}),a.jsx("option",{value:"inactive",className:"bg-gray-800 text-white",children:"  "})]}),a.jsxs(ut,{onClick:()=>I(!L),variant:L?"primary":"secondary",size:"sm",children:[L?a.jsx(Da,{className:"w-4 h-4"}):a.jsx(I2,{className:"w-4 h-4"}),L?" ":" "]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(rt,{className:"bg-gradient-to-br from-blue-500 to-blue-600",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Cr,{className:"w-8 h-8 text-white"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-blue-100 text-sm",children:'" '}),a.jsx("p",{className:"text-white text-2xl font-bold",children:n.length})]})]})}),a.jsx(rt,{className:"bg-gradient-to-br from-green-500 to-green-600",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(bo,{className:"w-8 h-8 text-white"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-green-100 text-sm",children:" "}),a.jsx("p",{className:"text-white text-2xl font-bold",children:Object.keys(y).length})]})]})}),a.jsx(rt,{className:"bg-gradient-to-br from-purple-500 to-purple-600",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Qd,{className:"w-8 h-8 text-white"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-purple-100 text-sm",children:" "}),a.jsxs("p",{className:"text-white text-2xl font-bold",children:[n.length>0?Math.round(n.reduce((le,fe)=>le+M(fe),0)/n.length):0,"%"]})]})]})}),a.jsx(rt,{className:"bg-gradient-to-br from-orange-500 to-orange-600",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(j3,{className:"w-8 h-8 text-white"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-orange-100 text-sm",children:" "}),a.jsx("p",{className:"text-white text-2xl font-bold",children:Object.values(l).flat().filter(le=>Object.keys(y).some(fe=>H(le,fe)==="online")).length})]})]})})]}),a.jsx("div",{className:"space-y-4",children:U.map(le=>{var We,re,st;const fe=X(le),ve=z.has(le.id),we=y[le.id];return a.jsx(rt,{className:"hover:bg-gray-800 transition-colors",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[we?a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}):a.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),a.jsx("h3",{className:"text-xl font-semibold text-white",children:le.name||"  "})]}),we&&a.jsxs("div",{className:"flex items-center space-x-2 text-green-400 text-sm",children:[a.jsx(Al,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-white font-semibold",children:[fe.total," "]}),a.jsxs("p",{className:"text-white text-sm",children:[" ",fe.progress,"%"]})]}),a.jsx(ut,{onClick:()=>ne(le.id),variant:"ghost",size:"sm",children:ve?a.jsx(bB,{className:"w-5 h-5"}):a.jsx(wB,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),a.jsxs("span",{className:"text-green-400 text-sm",children:[fe.online," "]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),a.jsxs("span",{className:"text-yellow-400 text-sm",children:[fe.idle,"  "]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),a.jsxs("span",{className:"text-white text-sm",children:[fe.offline," "]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(gx,{className:"w-4 h-4 text-blue-400"}),a.jsxs("span",{className:"text-blue-400 text-sm",children:[fe.progress,"% "]})]})]}),a.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center space-x-2",children:[a.jsx(Ws,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("span",{className:"text-sm text-gray-300",children:[" : ",le.currentLesson||" "]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",style:{position:"relative",zIndex:1},children:[a.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm text-gray-300",children:" "}),a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})]}),a.jsx("p",{className:"text-white font-medium",children:le.currentLesson?` ${le.currentLesson}`:" "}),a.jsx("p",{className:"text-xs text-gray-400",children:le.lessonStartDate?` -${new Date(le.lessonStartDate).toLocaleDateString("he-IL")}`:" "}),le.unlockedLessons&&le.unlockedLessons.length>0&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-600",children:[a.jsxs("p",{className:"text-xs text-green-400",children:[le.unlockedLessons.length,"  "]}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:le.unlockedLessons.sort((Re,he)=>Re.lessonId-he.lessonId).map(Re=>a.jsx("span",{className:"inline-block px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded border border-green-500/30",children:Re.lessonId},Re.lessonId))})]})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3 relative overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm text-gray-300",children:" "}),a.jsx(_o,{className:"w-4 h-4 text-gray-400"})]}),a.jsx("div",{className:"flex items-center space-x-2 lesson-assignment-select",children:a.jsxs("select",{className:"flex-1 bg-gray-600 text-white text-sm rounded px-2 py-1 border border-gray-500 max-w-full",value:le.currentLesson||"",onChange:Re=>xe(le.id,parseInt(Re.target.value)),style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",position:"relative",zIndex:10},children:[a.jsx("option",{value:"",children:" "}),i.map(Re=>{var pe;const he=Re.originalId||Re.order,me=(pe=le.unlockedLessons)==null?void 0:pe.some(Ce=>Ce.lessonId===he),ee=he===le.currentLesson;return a.jsxs("option",{value:he,className:me?"text-green-400":"text-white",style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[me?" ":"","   ",he," - ",Re.title,me&&!ee?" ( )":"",ee?" ()":""]},Re.id)})]})}),a.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"         "})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm text-gray-300",children:" "}),a.jsx(v0,{className:"w-4 h-4 text-gray-400"})]}),a.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mb-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${fe.progress}%`}})}),a.jsxs("p",{className:"text-xs text-gray-400",children:[fe.progress,"%   ",((We=le.completedLessons)==null?void 0:We.length)||0," "]}),le.unlockedLessons&&le.unlockedLessons.length>0&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-600",children:[a.jsxs("p",{className:"text-xs text-blue-400",children:[" : ",le.unlockedLessons.length,"/",i.length]}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:i.map(Re=>{var ee,pe;const he=Re.originalId||Re.order,me=(ee=le.unlockedLessons)==null?void 0:ee.some(Ce=>Ce.lessonId===he);return a.jsx("span",{className:`inline-block w-6 h-6 text-xs rounded flex items-center justify-center border ${me?"bg-green-500/20 text-green-400 border-green-500/30":"bg-gray-600/50 text-gray-400 border-gray-500/30"}`,title:`${Re.title} (${Re.totalSlides||((pe=Re.slides)==null?void 0:pe.length)||0} )`,children:he},Re.id)})})]})]})]}),a.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h5",{className:"text-md font-semibold text-white flex items-center space-x-2",children:[a.jsx(rg,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]}),a.jsxs("span",{className:"text-sm text-gray-300",children:[((re=le.unlockedLessons)==null?void 0:re.length)||0,"  "]})]}),le.unlockedLessons&&le.unlockedLessons.length>0?a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:le.unlockedLessons.sort((Re,he)=>new Date(he.unlockedAt)-new Date(Re.unlockedAt)).map((Re,he)=>{var me;return a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-600/50 rounded-lg border border-gray-500/30",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-blue-400 font-bold text-sm",children:Re.lessonId})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-white font-medium",children:[" ",Re.lessonId," - ",((me=i.find(ee=>(ee.originalId||ee.order)===Re.lessonId))==null?void 0:me.title)||"  "]}),a.jsxs("p",{className:"text-xs text-gray-400",children:["   ",Re.unlockedByTeacher]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-300",children:new Date(Re.unlockedAt).toLocaleDateString("he-IL")}),a.jsx("p",{className:"text-xs text-gray-500",children:new Date(Re.unlockedAt).toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"})})]})]},`${Re.lessonId}-${Re.unlockedAt}`)})}):a.jsxs("div",{className:"text-center py-6",children:[a.jsx(rg,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),a.jsx("p",{className:"text-gray-400",children:"   "}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"     "})]})]})]}),ve&&a.jsxs("div",{className:"mt-6 border-t border-gray-700 pt-4",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(l[le.id]||[]).map(Re=>{const he=H(Re,le.id);return!L&&he==="offline"?null:a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[Q(he),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:Re.displayName||Re.email||"  "}),a.jsx("p",{className:`text-xs ${ae(he)}`,children:q(he)})]})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-white text-sm",children:(()=>{if(typeof Re.progress=="number")return`${Re.progress}%`;if(Re.progress&&typeof Re.progress=="object"){const me=Object.values(Re.progress).filter(pe=>typeof pe=="number"),ee=me.length>0?me.reduce((pe,Ce)=>pe+Ce,0)/me.length:0;return`${Math.round(ee)}%`}return"0%"})()}),a.jsx("p",{className:"text-white text-xs",children:Re.lastActivityAt?new Date(Re.lastActivityAt).toLocaleTimeString("he-IL"):" "})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(ut,{onClick:()=>Y(Re.uid,"message"),variant:"ghost",size:"sm",title:" ",children:a.jsx(mx,{className:"w-4 h-4"})}),a.jsx(ut,{onClick:()=>Y(Re.uid,"monitor"),variant:"ghost",size:"sm",title:" ",children:a.jsx(Da,{className:"w-4 h-4"})})]})]})]},Re.uid)})}),!L&&(l[le.id]||[]).filter(Re=>H(Re,le.id)==="offline").length>0&&a.jsx("div",{className:"mt-4 text-center",children:a.jsxs("p",{className:"text-white text-sm",children:[(st=l[le.id])==null?void 0:st.filter(Re=>H(Re,le.id)==="offline").length,"   "]})})]})]})},le.id)})}),a.jsx(rt,{children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:" "}),a.jsx("div",{className:"space-y-3",children:p.slice(0,10).map((le,fe)=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800 rounded-lg",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-white text-sm",children:le.title||""}),a.jsx("p",{className:"text-white text-xs",children:le.description||" "})]}),a.jsx("span",{className:"text-white text-xs",children:le.timestamp?b6(le.timestamp):" "})]},fe))})]})})]}):(Wr("STUDENT_ACCESS_ATTEMPT",{role:"student",uid:t==null?void 0:t.uid},{component:"ClassroomInterface"}),a.jsx("div",{className:"text-center py-8 bg-black min-h-screen flex items-center justify-center",children:a.jsx("p",{className:"text-red-400",children:"     "})}))},S6=()=>{const{currentUser:t}=ws(),[e,r]=S.useState(!0),[n,s]=S.useState(null),[i,o]=S.useState(null),[l,u]=S.useState(null),[h,f]=S.useState(null),[p,g]=S.useState(null),[y,w]=S.useState([]),[b,_]=S.useState([]);S.useEffect(()=>{t&&P()},[t]);const P=async()=>{try{r(!0),s(null),console.log("Loading real analytics data for teacher:",t.uid);const[I,N]=await Promise.all([tu(t.uid),x0(t.uid)]),T={totalClasses:I.length,totalStudents:N.length,totalActiveStudents:N.filter(B=>B.lastActivity>Date.now()-7*24*60*60*1e3).length,averageProgress:Math.round(N.reduce((B,z)=>{var O,D;return B+(((D=(O=z.progress)==null?void 0:O.completedLessons)==null?void 0:D.length)||0)},0)/Math.max(N.length,1)*10),averageTimeSpent:Math.round(N.reduce((B,z)=>B+(z.totalTimeSpent||0),0)/Math.max(N.length,1)/60)},R={totalSessions:0,averageAttendance:0};console.log("Loaded data:",{classes:I.length,students:N.length,hasAnalytics:!!T,hasAttendance:!!R}),w(I),_(N),o(T),g(R),I.length>0&&!l&&(u(I[0].id),await A(I[0].id))}catch(I){console.error("Error loading real analytics:",I),s(I.message)}finally{r(!1)}},A=async I=>{try{console.log("Loading analytics for class:",I);const N=b.filter(R=>R.classId===I),T={totalStudents:N.length,averageProgress:Math.round(N.reduce((R,B)=>{var z,O;return R+(((O=(z=B.progress)==null?void 0:z.completedLessons)==null?void 0:O.length)||0)},0)/Math.max(N.length,1)*10),averageTimeSpent:Math.round(N.reduce((R,B)=>R+(B.totalTimeSpent||0),0)/Math.max(N.length,1)/60),completedLessons:N.reduce((R,B)=>{var O;return(((O=B.progress)==null?void 0:O.completedLessons)||[]).forEach(D=>{R[D]=(R[D]||0)+1}),R},{})};f(T),console.log("Class analytics loaded:",T)}catch(N){console.error("Error loading class analytics:",N),s(N.message)}},k=async I=>{try{u(I),await A(I)}catch(N){console.error("Error changing class:",N),s(N.message)}},F=I=>{if(!I)return" ";try{const N=I.toDate?I.toDate():new Date(I);return isNaN(N.getTime())?" ":N.toLocaleDateString("he-IL",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return" "}},L=I=>{if(!I||I===0||typeof I!="number")return"0 ";const N=Math.floor(I/60),T=I%60;return N>0?`${N}  ${T} `:`${T} `};return e?a.jsx("div",{className:"min-h-screen bg-black text-white p-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-400",children:"    ..."})]})})}):n?a.jsx("div",{className:"min-h-screen bg-black text-white p-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsxs("p",{className:"text-red-400 text-lg",children:["  : ",n]}),a.jsx("button",{onClick:P,className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:" "})]})})}):a.jsx("div",{className:"min-h-screen bg-black text-white p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"  "}),a.jsx("p",{className:"text-gray-400",children:"        "})]}),i&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx(rt,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:""}),a.jsx("p",{className:"text-3xl font-bold text-blue-400",children:i.totalClasses||y.length}),a.jsx("p",{className:"text-sm text-gray-400",children:" "})]})}),a.jsx(rt,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:""}),a.jsx("p",{className:"text-3xl font-bold text-green-400",children:i.totalStudents||b.length}),a.jsxs("p",{className:"text-sm text-gray-400",children:[i.totalActiveStudents||0," "]})]})}),a.jsx(rt,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:" "}),a.jsxs("p",{className:"text-3xl font-bold text-yellow-400",children:[i.averageProgress||0,"%"]})]})}),a.jsx(rt,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:" "}),a.jsx("p",{className:"text-3xl font-bold text-purple-400",children:L(i.averageTimeSpent||0)})]})})]}),y.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"   "}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(I=>{var N;return a.jsxs("button",{onClick:()=>k(I.id),className:`p-4 rounded-lg border-2 transition-all ${l===I.id?"border-blue-500 bg-blue-900/20":"border-gray-700 bg-gray-900 hover:border-gray-600"}`,children:[a.jsx("h3",{className:"font-semibold text-white",children:I.name}),a.jsxs("p",{className:"text-sm text-gray-400",children:[((N=I.studentIds)==null?void 0:N.length)||0," "]})]},I.id)})})]}),h&&a.jsxs("div",{className:"mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:[" : ",h.className]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-4",children:[a.jsx(rt,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:""}),a.jsx("p",{className:"text-3xl font-bold text-green-400",children:typeof h.totalStudents=="number"?h.totalStudents:0}),a.jsxs("p",{className:"text-sm text-gray-400",children:[typeof h.activeStudents=="number"?h.activeStudents:0," "]})]})}),a.jsx(rt,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:" "}),a.jsxs("p",{className:"text-3xl font-bold text-yellow-400",children:[typeof h.averageProgress=="number"?h.averageProgress:0,"%"]})]})}),a.jsx(rt,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:" "}),a.jsx("p",{className:"text-3xl font-bold text-blue-400",children:typeof h.averageCompletedLessons=="number"?h.averageCompletedLessons:0})]})}),a.jsx(rt,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:" "}),a.jsx("p",{className:"text-3xl font-bold text-purple-400",children:L(h.averageTimeSpent||0)})]})})]}),h.students&&h.students.length>0&&a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:" "}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm text-gray-300",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-1 text-right",children:""}),a.jsx("th",{className:"px-2 py-1 text-right",children:""}),a.jsx("th",{className:"px-2 py-1 text-right",children:" "}),a.jsx("th",{className:"px-2 py-1 text-right",children:""}),a.jsx("th",{className:"px-2 py-1 text-right",children:" "})]})}),a.jsx("tbody",{children:h.students.map(I=>a.jsxs("tr",{className:"border-b border-gray-700",children:[a.jsx("td",{className:"px-2 py-1",children:I.displayName||"  "}),a.jsxs("td",{className:"px-2 py-1",children:[typeof I.progress=="number"?I.progress:0,"%"]}),a.jsx("td",{className:"px-2 py-1",children:Array.isArray(I.completedLessons)?I.completedLessons.length:0}),a.jsx("td",{className:"px-2 py-1",children:L(I.totalTimeSpent||0)}),a.jsx("td",{className:"px-2 py-1",children:F(I.lastActivityAt)})]},I.uid))})]})})]})]}),p&&a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"  "}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-4",children:[a.jsx(rt,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:" "}),a.jsx("p",{className:"text-3xl font-bold text-blue-400",children:typeof p.totalSessions=="number"?p.totalSessions:0})]})}),a.jsx(rt,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:" "}),a.jsx("p",{className:"text-3xl font-bold text-green-400",children:typeof p.averageAttendance=="number"?p.averageAttendance:0})]})}),a.jsx(rt,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:'" '}),a.jsx("p",{className:"text-3xl font-bold text-purple-400",children:typeof p.totalAttendance=="number"?p.totalAttendance:0})]})}),a.jsx(rt,{className:"bg-gray-900 border-gray-700",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:" "}),a.jsx("p",{className:"text-3xl font-bold text-orange-400",children:Object.keys(p.studentAttendance||{}).length})]})})]}),p.detailedSessions&&p.detailedSessions.length>0&&a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"     "}),a.jsx("div",{className:"space-y-6",children:p.detailedSessions.slice(0,5).map(I=>a.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"text-lg font-semibold text-white",children:I.lessonName||` ${I.lessonId||" "}`}),a.jsx("p",{className:"text-gray-400 text-sm",children:I.className}),a.jsx("p",{className:"text-gray-400 text-sm",children:F(I.date)})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400",children:I.attendance}),a.jsx("div",{className:"text-sm text-gray-400",children:""}),a.jsx("div",{className:"text-sm text-gray-400",children:L(I.duration)})]})]}),I.students&&I.students.length>0&&a.jsxs("div",{className:"mt-4",children:[a.jsx("h6",{className:"text-md font-semibold text-gray-300 mb-2",children:" :"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:I.students.map(N=>a.jsxs("div",{className:"flex items-center justify-between bg-gray-600 rounded p-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),a.jsx("span",{className:"text-sm text-white",children:N.name})]}),a.jsxs("div",{className:"text-xs text-gray-400 text-left",children:[a.jsxs("div",{children:[": ",F(N.joinedAt)]}),a.jsxs("div",{children:[" : ",F(N.lastActivity)]}),a.jsxs("div",{children:[": ",N.currentSlide]})]})]},N.id))})]})]},I.sessionId))})]}),p.studentAttendance&&Object.keys(p.studentAttendance).length>0&&a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"  "}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm text-gray-300",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-1 text-right",children:" "}),a.jsx("th",{className:"px-2 py-1 text-right",children:" "}),a.jsx("th",{className:"px-2 py-1 text-right",children:" "}),a.jsx("th",{className:"px-2 py-1 text-right",children:"  "}),a.jsx("th",{className:"px-2 py-1 text-right",children:" "})]})}),a.jsx("tbody",{children:Object.entries(p.studentAttendance).sort(([,I],[,N])=>N.sessionsAttended-I.sessionsAttended).slice(0,10).map(([I,N])=>a.jsxs("tr",{className:"border-b border-gray-700",children:[a.jsx("td",{className:"px-2 py-1",children:N.name}),a.jsx("td",{className:"px-2 py-1",children:N.sessionsAttended}),a.jsxs("td",{className:"px-2 py-1",children:[N.attendancePercentage,"%"]}),a.jsx("td",{className:"px-2 py-1",children:L(N.averageTimePerSession||0)}),a.jsx("td",{className:"px-2 py-1",children:F(N.lastAttendance)})]},I))})]})})]})]}),y.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-gray-400 text-lg",children:"   "}),a.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"     "})]})]})})},Aq=()=>{var I;const t=Zn(),{currentUser:e,loading:r,role:n}=ws(),[s,i]=S.useState("overview"),[o,l]=S.useState(!0),[u,h]=S.useState({totalStudents:0,activeClasses:0,completedLessons:0,averageProgress:0}),[f,p]=S.useState([]),[g,y]=S.useState([]),[w,b]=S.useState([]),[_,P]=S.useState(null),A=[{id:"overview",label:" ",icon:bo,description:"    ",color:"blue"},{id:"classroom",label:" ",icon:Sd,description:"    ",color:"green"},{id:"realAnalytics",label:"  ",icon:gx,description:"      ",color:"cyan"},{id:"studentPool",label:" ",icon:Cr,description:"   ",color:"indigo"},{id:"slidePreview",label:" ",icon:_l,description:"      ",color:"yellow"}];S.useEffect(()=>{r||(async()=>{try{if(console.log(" Checking teacher access...",{currentUser:!!e,authLoading:r,role:n}),r){console.log(" Auth still loading...");return}if(!e){console.log(" No user found, redirecting to login"),Ie.error("     "),t("/login");return}if(n!=="teacher"){console.log(" User is not a teacher, role:",n),Ie.error("     "),t("/login");return}console.log(" Teacher access granted!"),await Wr("teacher_dashboard_access",{userId:e.uid,role:n,timestamp:new Date().toISOString()}),l(!0);const[T,R,B]=await Promise.all([tu(e.uid),x0(e.uid),j2(e.uid,5)]);p(T),y(R),b(B);const z=R.length,O=T.filter(Z=>Z.isActive).length,D=T.length,ie=R.filter(Z=>!Z.classId).length;h({totalStudents:z,activeClasses:O,completedLessons:D,averageProgress:ie}),l(!1)}catch(T){console.error(" Access check or stats load error:",T),Ie.error("      "),t("/login")}})()},[e,n,r,t]);const k=N=>{i(N),Wr("teacher_tab_change",{userId:e==null?void 0:e.uid,fromTab:s,toTab:N,timestamp:new Date().toISOString()})},F=()=>{switch(s){case"overview":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-400",children:u.totalStudents}),a.jsx("div",{className:"text-sm text-gray-300",children:'" '})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-400",children:u.activeClasses}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-400",children:u.completedLessons}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-3xl font-bold text-orange-400",children:[u.averageProgress,"%"]}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:" "}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("button",{onClick:()=>t("/teacher/session/create"),className:"flex items-center space-x-3 p-4 bg-blue-600 hover:bg-blue-500 rounded-lg transition-colors",children:[a.jsx(Sn,{className:"w-6 h-6 text-white"}),a.jsx("span",{className:"text-white",children:"  "})]}),a.jsxs("button",{onClick:()=>k("classroom"),className:"flex items-center space-x-3 p-4 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[a.jsx(Sd,{className:"w-6 h-6 text-green-400"}),a.jsx("span",{className:"text-white",children:" "})]}),a.jsxs("button",{onClick:()=>k("slidePreview"),className:"flex items-center space-x-3 p-4 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[a.jsx(_l,{className:"w-6 h-6 text-purple-400"}),a.jsx("span",{className:"text-white",children:" "})]}),a.jsxs("button",{onClick:()=>k("realAnalytics"),className:"flex items-center space-x-3 p-4 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:[a.jsx(v0,{className:"w-6 h-6 text-yellow-400"}),a.jsx("span",{className:"text-white",children:" "})]})]})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:" "}),w.length===0?a.jsx("div",{className:"text-center text-gray-400 py-8",children:a.jsx("p",{children:"  "})}):a.jsx("div",{className:"space-y-3",children:w.map(N=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-700 rounded-lg",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${N.type==="class_created"?"bg-green-400":N.type==="class_deleted"?"bg-red-400":N.type==="student_added"?"bg-blue-400":N.type==="student_removed"?"bg-orange-400":N.type==="class_edited"?"bg-yellow-400":N.type==="notes_created"?"bg-purple-400":N.type==="notes_updated"?"bg-indigo-400":N.type==="notes_deleted"?"bg-pink-400":"bg-gray-400"}`}),a.jsx("span",{className:"text-gray-300 flex-1 text-right",children:N.description}),a.jsx("span",{className:"text-gray-500 text-sm",children:N.timestamp?b6(N.timestamp):" "})]},N.id))})]})]});case"classroom":return a.jsx(E6,{});case"realAnalytics":return a.jsx(S6,{});case"studentPool":return a.jsx(_6,{});case"slidePreview":return a.jsx(N6,{});default:return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(bo,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:" "}),a.jsx("p",{className:"text-gray-400",children:"   "})]})}},L=N=>{const T={blue:"border-blue-500 bg-blue-500/10 text-blue-400",green:"border-green-500 bg-green-500/10 text-green-400",yellow:"border-yellow-500 bg-yellow-500/10 text-yellow-400",purple:"border-purple-500 bg-purple-500/10 text-purple-400",indigo:"border-indigo-500 bg-indigo-500/10 text-indigo-400",pink:"border-pink-500 bg-pink-500/10 text-pink-400",orange:"border-orange-500 bg-orange-500/10 text-orange-400",cyan:"border-cyan-500 bg-cyan-500/10 text-cyan-400",red:"border-red-500 bg-red-500/10 text-red-400"};return T[N]||T.blue};return o||r?a.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:a.jsx(Jn,{size:"lg"})}):_?a.jsx("div",{className:"text-center text-red-600 p-4 bg-black min-h-screen flex items-center justify-center",children:a.jsx("p",{children:_})}):a.jsx($2,{children:a.jsx("div",{className:"min-h-screen bg-black text-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"flex flex-wrap gap-2 bg-gray-800 p-2 rounded-lg",children:A.map(N=>{const T=N.icon,R=s===N.id;return a.jsxs("button",{onClick:()=>k(N.id),className:`flex items-center space-x-2 px-4 py-3 rounded-md transition-all duration-200 ${R?`${L(N.color)} border-2`:"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:[a.jsx(T,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:N.label})]},N.id)})}),a.jsx("div",{className:"mt-4 text-center",children:a.jsx("p",{className:"text-gray-400",children:(I=A.find(N=>N.id===s))==null?void 0:I.description})})]}),a.jsx(vn,{mode:"wait",children:a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"bg-gray-800 rounded-lg p-6",children:F()},s)})]})})})},Cq=()=>{var ae,U,M,X;const{sessionId:t}=Cg(),e=Zn(),{currentUser:r}=ws(),[n,s]=S.useState(null),[i,o]=S.useState(null),[l,u]=S.useState(0),[h,f]=S.useState(!1),[p,g]=S.useState(!1),[y,w]=S.useState(!1),[b,_]=S.useState(!0),[P,A]=S.useState(!1),[k,F]=S.useState(!1),[L,I]=S.useState({}),[N,T]=S.useState(null);if(S.useEffect(()=>{if(!r){Wr("UNAUTHORIZED_ACCESS_ATTEMPT",{role:"none"},{component:"SessionHosting"});return}const K=k2({role:"teacher"},"host_sessions");if(!K.success){Wr("INSUFFICIENT_PERMISSIONS",{role:"teacher",uid:r.uid},{component:"SessionHosting",reason:K.message}),Ie.error("    "),e("/teacher/dashboard");return}R()},[r,t,e]),S.useEffect(()=>{if(n){const K=Nx(t,Y=>{Y?(s(Y),u(Y.currentSlide||0)):(Ie.error(" "),e("/teacher/dashboard"))});return()=>K()}},[t,e]),!lx({role:"teacher"}))return Wr("STUDENT_ACCESS_ATTEMPT",{role:"student",uid:r==null?void 0:r.uid},{component:"SessionHosting"}),a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-red-400",children:"    "})});const R=async()=>{try{_(!0),T(null),console.log(" Loading session data for session ID:",t);const K=await Sb(t);console.log(" Session data loaded:",K);let Y=null;try{if(Y=await Sx(K.lessonId),Y&&Y.slides&&Y.slides.length>0)Y={...Y,content:{slides:Y.slides}};else throw new Error("No slides found in Firebase")}catch(fe){console.error("Failed to load lesson from database:",fe),Ie.error("    "),e("/teacher/dashboard");return}if(!Y)throw new Error(`Lesson ${K.lessonId} not found`);console.log(" Lesson data loaded:",Y);const xe=await cx(r.uid,K.lessonId),le={};xe.forEach(fe=>{le[fe.slideIndex]=fe.content}),s(K),o(Y),I(le),u(K.currentSlide||0),_(!1),console.log(" Session data loaded successfully")}catch(K){console.error(" Error loading session:",K),T(K.message),_(!1)}},B=()=>{f(!h),Ie.success(h?" ":" ")},z=async()=>{if(l<i.slides.length-1){const K=l+1;try{await uf(t,K),u(K),Ie.success(`  ${K+1}`)}catch(Y){console.error("Error updating slide:",Y),Ie.error("   ")}}},O=async()=>{if(l>0){const K=l-1;try{await uf(t,K),u(K),Ie.success(`  ${K+1}`)}catch(Y){console.error("Error updating slide:",Y),Ie.error("   ")}}},D=()=>{g(!p),p?document.exitFullscreen():document.documentElement.requestFullscreen()},ie=()=>{w(!y),Ie.success(y?" ":" ")},Z=()=>{F(!k)},ne=async()=>{if(window.confirm("      ?"))try{await Bf(t),Ie.success(" "),e("/teacher/dashboard")}catch(K){console.error("Error ending session:",K),Ie.error("   ")}},H=K=>{switch(K.type){case"presentation":return a.jsx(Pd,{slide:K});case"poll":return a.jsx(k0,{slide:K});case"video":return a.jsx(T0,{slide:K});case"interactive":return a.jsx(j0,{slide:K,onAnswer:()=>{}});case"break":return a.jsx(A0,{slide:K});case"reflection":return a.jsx(C0,{slide:K});case"quiz":return a.jsx(I0,{slide:K});default:return a.jsxs("div",{className:"text-white",children:["   : ",K.type]})}};if(N)return a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md mx-auto p-8",children:[a.jsx("div",{className:"text-6xl mb-6",children:""}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"  "}),a.jsx("p",{className:"text-gray-400 mb-6",children:N.includes("Session not found")?"    .    .":N}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs(ut,{onClick:()=>e("/teacher/session/create"),variant:"primary",size:"lg",className:"w-full",children:[a.jsx(Sn,{className:"w-5 h-5 mr-2"}),"  "]}),a.jsx(ut,{onClick:()=>e("/teacher/dashboard"),variant:"secondary",size:"lg",className:"w-full",children:"  "})]})]})});if(b)return a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx(Jn,{size:"lg"})});if(!n||!i)return a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md mx-auto p-8",children:[a.jsx("div",{className:"text-6xl mb-6",children:""}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:" ..."}),a.jsx("p",{className:"text-gray-400 mb-6",children:"     "}),a.jsx(Jn,{size:"lg"})]})});const Q=(ae=i==null?void 0:i.slides)==null?void 0:ae[l],q=Q?L[Q.id]:null;return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:[a.jsx("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4",children:a.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between space-y-4 lg:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(ut,{onClick:()=>e("/teacher/dashboard"),variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Mc,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-white",children:n.lessonName}),a.jsxs("p",{className:"text-gray-300 text-sm",children:[n.className,"  ",((U=n.connectedStudents)==null?void 0:U.length)||0,"/",((M=n.studentIds)==null?void 0:M.length)||0,"  "]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs(ut,{onClick:()=>A(!P),variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Cr,{className:"w-4 h-4"}),a.jsxs("span",{children:[" (",((X=n.connectedStudents)==null?void 0:X.length)||0,")"]})]}),a.jsxs(ut,{onClick:()=>e("/teacher/dashboard"),variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Sd,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsx(ut,{onClick:ne,variant:"danger",size:"sm",children:" "})]})]})}),a.jsxs("div",{className:"flex flex-col lg:flex-row min-h-screen",children:[a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"flex-1 bg-gray-900 p-8 relative overflow-auto",children:[i&&i.slides&&i.slides[l]?a.jsx("div",{className:"w-full max-w-4xl mx-auto",children:H(i.slides[l])}):a.jsx("div",{className:"text-center text-gray-400",children:a.jsx("p",{children:"  "})}),a.jsx("button",{onClick:D,className:"absolute top-4 right-4 p-2 bg-gray-800/50 hover:bg-gray-700/50 rounded-lg text-gray-300 hover:text-white transition-colors",children:p?a.jsx(R2,{className:"w-5 h-5"}):a.jsx(P2,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"bg-gray-800/50 border-t border-gray-700 p-4",children:a.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between space-y-4 lg:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(ut,{onClick:O,disabled:l===0,variant:"secondary",size:"sm",children:a.jsx(F2,{className:"w-4 h-4"})}),a.jsxs(ut,{onClick:B,variant:"primary",size:"lg",className:"flex items-center space-x-2",children:[h?a.jsx(kd,{className:"w-5 h-5"}):a.jsx(Sn,{className:"w-5 h-5"}),a.jsx("span",{children:h?"":""})]}),a.jsx(ut,{onClick:z,disabled:l===i.slides.length-1,variant:"secondary",size:"sm",children:a.jsx(L2,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(ut,{onClick:ie,variant:"secondary",size:"sm",children:y?a.jsx(z3,{className:"w-4 h-4"}):a.jsx(U3,{className:"w-4 h-4"})}),a.jsxs(ut,{onClick:Z,variant:k?"primary":"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Ws,{className:"w-4 h-4"}),a.jsx("span",{children:""})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("span",{className:"text-sm text-gray-300",children:[l+1," / ",i.slides.length]}),a.jsx("div",{className:"w-24 lg:w-32 bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(l+1)/i.slides.length*100}%`}})})]})]})})]}),a.jsx("div",{className:`w-full lg:w-80 bg-gray-800/50 border-t lg:border-l border-gray-700 transition-all duration-300 ${P?"block":"hidden"}`,children:a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:" "}),a.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:n.connectedStudents&&n.connectedStudents.length>0?n.connectedStudents.map(K=>a.jsx("div",{className:"p-3 rounded-lg border border-gray-600 bg-gray-700/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:K.name}),a.jsxs("p",{className:"text-sm text-gray-400",children:[" ",K.currentSlide+1]})]}),a.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]})},K.id)):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Cr,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-400",children:"  "})]})})]})})]}),k&&q&&a.jsxs("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 max-w-md bg-yellow-900/90 backdrop-blur-sm rounded-lg p-4 border border-yellow-700 z-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ws,{className:"w-4 h-4 text-yellow-400"}),a.jsx("span",{className:"text-yellow-400 font-medium text-sm",children:" "})]}),a.jsx("button",{onClick:Z,className:"text-yellow-400 hover:text-yellow-200 transition-colors",children:""})]}),a.jsx("p",{className:"text-yellow-200 text-sm",children:q})]})]})},Iq=()=>{const t=Zn(),{currentUser:e}=ws(),[r,n]=S.useState(!0),[s,i]=S.useState(!1),[o,l]=S.useState([]),[u,h]=S.useState([]),[f,p]=S.useState([]),[g,y]=S.useState(null),[w,b]=S.useState(null),[_,P]=S.useState("");S.useEffect(()=>{A()},[e]);const A=async()=>{try{n(!0);const[T,R,B]=await Promise.all([tu(e.uid),x0(e.uid),E0()]),z=B.slice().sort((O,D)=>{const ie=O.order??O.originalId??0,Z=D.order??D.originalId??0;return ie!==Z?ie-Z:(O.title||"").localeCompare(D.title||"")});l(T),h(R),p(z),n(!1)}catch(T){console.error("Error loading data:",T),Ie.error("   "),n(!1)}},k=async()=>{var T;if(!g||!w){Ie.error("   ");return}try{i(!0);const R={teacherId:e.uid,teacherName:e.displayName||e.email,classId:g.id,className:g.name,lessonId:w.id,lessonName:w.title,studentIds:g.studentIds||[],totalSlides:w.totalSlides||((T=w.slides)==null?void 0:T.length)||0},B=await PW(R);Ie.success("  !"),t(`/teacher/session/${B}`)}catch(R){console.error("Error starting session:",R),Ie.error("   "),i(!1)}},F=o.filter(T=>T.name.toLowerCase().includes(_.toLowerCase())),L=T=>T.studentIds?T.studentIds.length:0,I=T=>!T||!T.slides?0:T.slides.reduce((R,B)=>R+(B.duration||3),0),N=T=>{var R;return T&&(T.totalSlides||((R=T.slides)==null?void 0:R.length))||0};return r?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx(Jn,{size:"lg"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:[a.jsx("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(ut,{onClick:()=>t("/teacher/dashboard"),variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Mc,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-white",children:"  "}),a.jsx("p",{className:"text-gray-300 text-sm",children:"    "})]})]})})}),a.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsx(rt,{variant:"dark",className:"border-gray-700",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Cr,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(jo,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:" ...",value:_,onChange:T=>P(T.target.value),className:"w-full pr-10 pl-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"})]})}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:F.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Cr,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-400",children:"  "})]}):F.map(T=>a.jsx("div",{onClick:()=>y(T),className:`p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ${(g==null?void 0:g.id)===T.id?"border-blue-500 bg-blue-500/10":"border-gray-600 bg-gray-700 hover:border-gray-500"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium",children:T.name}),a.jsxs("p",{className:"text-sm text-gray-400",children:[L(T)," "]})]}),(g==null?void 0:g.id)===T.id&&a.jsx(Qt,{className:"w-5 h-5 text-blue-400"})]})},T.id))})]})}),a.jsx(rt,{variant:"dark",className:"border-gray-700",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Ws,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:f.map(T=>a.jsx("div",{onClick:()=>b(T),className:`p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ${(w==null?void 0:w.id)===T.id?"border-green-500 bg-green-500/10":"border-gray-600 bg-gray-700 hover:border-gray-500"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium",children:T.title}),a.jsxs("p",{className:"text-sm text-gray-400",children:[N(T),"   ",I(T)," "]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:T.description})]}),(w==null?void 0:w.id)===T.id&&a.jsx(Qt,{className:"w-5 h-5 text-green-400"})]})},T.id))})]})})]}),(g||w)&&a.jsx(rt,{variant:"dark",className:"border-gray-700 mt-8",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-lg font-bold text-white mb-4",children:" "}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-400 mb-2",children:g.name}),a.jsxs("div",{className:"text-sm text-gray-400",children:[L(g)," "]})]}),w&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400 mb-2",children:w.title}),a.jsxs("div",{className:"text-sm text-gray-400",children:[N(w)," "]})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-400 mb-2",children:[w?I(w):0," "]}),a.jsx("div",{className:"text-sm text-gray-400",children:" "})]})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs(ut,{onClick:k,disabled:!g||!w||s,variant:"primary",size:"lg",className:"flex items-center space-x-2 mx-auto",children:[s?a.jsx(Jn,{size:"sm"}):a.jsx(Sn,{className:"w-5 h-5"}),a.jsx("span",{children:s?" ...":" "})]})})]})})]})]})},Pq=()=>{var Rs,pa;const{sessionId:t}=Cg(),e=Zn(),{currentUser:r}=ws(),{role:n}=Eb(),[s,i]=S.useState(null),[o,l]=S.useState(null),[u,h]=S.useState(0),[f,p]=S.useState(!1),[g,y]=S.useState(!1),[w,b]=S.useState(!1),[_,P]=S.useState(!0),[A,k]=S.useState([]),[F,L]=S.useState(!1),[I,N]=S.useState(!0),[T,R]=S.useState(!1),[B,z]=S.useState(!0),[O,D]=S.useState(!1),[ie,Z]=S.useState([]),[ne,H]=S.useState([]),[Q,q]=S.useState({}),[ae,U]=S.useState(0),[M,X]=S.useState(null),[K,Y]=S.useState({}),[xe,le]=S.useState([]),[fe,ve]=S.useState(!0),[we,We]=S.useState(!1),[re,st]=S.useState([]),[Re,he]=S.useState(!0),[me,ee]=S.useState("live"),[pe,Ce]=S.useState([]),[$e,ot]=S.useState({totalStudents:0,activeStudents:0,averageEngagement:0,questionsAnswered:0}),xt=()=>{i(null),l(null),k([]),Ce([]),ot({totalStudents:0,activeStudents:0,averageEngagement:0,questionsAnswered:0})};if(S.useEffect(()=>{if(!r){Wr("UNAUTHORIZED_ACCESS_ATTEMPT",{role:"none"},{component:"LessonController"});return}const mt=k2({role:n},"control_lessons");if(!mt.success){Wr("INSUFFICIENT_PERMISSIONS",{role:n,uid:r.uid},{component:"LessonController",reason:mt.message}),Ie.error("    "),e("/teacher/dashboard");return}Nt()},[r,n,t,e]),S.useEffect(()=>{if(!t||!r)return;console.log(" Setting up real-time session listener for:",t);const mt=Nx(t,Wt=>{Wt?i(ur=>{var Er,Tn,Bn;return!ur||((Er=ur.connectedStudents)==null?void 0:Er.length)!==((Tn=Wt.connectedStudents)==null?void 0:Tn.length)||ur.currentSlide!==Wt.currentSlide||ur.status!==Wt.status?(console.log(" Session updated:",{connectedStudents:((Bn=Wt.connectedStudents)==null?void 0:Bn.length)||0,currentSlide:Wt.currentSlide,status:Wt.status}),Wt):ur}):(console.log(" Session not found or ended"),Ie.error("    "),e("/teacher/dashboard"))});return()=>{console.log(" Cleaning up session listener for:",t),mt(),xt()}},[t,r]),!lx({role:n}))return Wr("STUDENT_ACCESS_ATTEMPT",{role:n,uid:r==null?void 0:r.uid},{component:"LessonController"}),a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-red-400",children:"    "})});const Nt=async()=>{try{const mt=await Sb(t);i(mt),h(mt.currentSlide||0);let Wt=null;try{if(Wt=await Sx(mt.lessonId),Wt&&Wt.slides&&Wt.slides.length>0)Wt={...Wt,content:{slides:Wt.slides}};else throw new Error("No slides found in database")}catch(ur){console.error("Failed to load lesson from database:",ur),Ie.error("    "),e("/teacher/dashboard");return}if(l(Wt),r!=null&&r.uid){const ur=await cx(r.uid,mt.lessonId.toString()),Er={};ur.forEach(Tn=>{Er[Tn.slideId]=Tn.content}),q(Er)}P(!1)}catch(mt){console.error("Error loading session:",mt),P(!1)}};S.useEffect(()=>{var Er,Tn;if(!(s!=null&&s.startTime)){U(0);return}const mt=((Tn=(Er=s.startTime)==null?void 0:Er.toDate)==null?void 0:Tn.call(Er))||new Date(s.startTime),Wt=Math.floor((Date.now()-mt.getTime())/1e3);U(Wt);const ur=setInterval(()=>{const Bn=Math.floor((Date.now()-mt.getTime())/1e3);U(Bn)},1e3);return()=>clearInterval(ur)},[s==null?void 0:s.startTime]);const Me=()=>{p(!f),Ie.success(f?" ":" ")},be=async()=>{if(o&&u<o.slides.length-1){const mt=u+1;h(mt),await uf(t,mt)}},Pe=async()=>{if(u>0){const mt=u-1;h(mt),await uf(t,mt)}},lt=()=>{y(!g),g?document.exitFullscreen():document.documentElement.requestFullscreen()},ct=()=>{b(!w),Ie.success(w?" ":" ")},Bt=()=>{z(!B),Ie.success(B?"   ":"   ")},it=()=>{D(!O),Ie.success(O?"   ":"   ")},kt=async()=>{try{await Bf(t),e("/teacher/dashboard")}catch(mt){console.error("Error ending session:",mt)}},er=mt=>{const Wt=A.find(ur=>ur.id===mt);Ie.success(` ${Wt.name}`)},lr=mt=>{var Bn;if(!mt)return"00:00";const Wt=((Bn=mt==null?void 0:mt.toDate)==null?void 0:Bn.call(mt))||new Date(mt),ur=Math.floor((Date.now()-Wt.getTime())/1e3),Er=Math.floor(ur/60),Tn=ur%60;return`${Er.toString().padStart(2,"0")}:${Tn.toString().padStart(2,"0")}`},un=()=>{he(!Re),Ie.success(Re?"   ":"  ")},Is=async()=>{try{await uf(t,u),Ie.success("    ")}catch(mt){console.error("Error forcing slide sync:",mt),Ie.error("  ")}},Xs=()=>{const mt=me==="live"?"individual":"live";ee(mt),Ie.success(mt==="live"?"   ":"   ")};if(_)return a.jsx(Jn,{});if(!s||!o)return a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Session Not Found"}),a.jsx("p",{className:"text-gray-400",children:"The requested session could not be loaded."})]})});const Ps=(Rs=o==null?void 0:o.slides)==null?void 0:Rs[u],Vn=Ps?Q[Ps.id]:null;return a.jsxs("div",{className:"min-h-screen bg-gray-900",children:[a.jsx("div",{className:"bg-gray-800 border-b border-gray-700 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-green-400 font-medium",children:"LIVE"})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-white",children:s.lessonName}),a.jsxs("p",{className:"text-gray-300 text-sm",children:[s.className,"  ",s.activeStudents||0,"  "]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${me==="live"?"bg-blue-600/20 text-blue-300 border border-blue-500/30":"bg-green-600/20 text-green-300 border border-green-500/30"}`,children:me==="live"?" ":" "})}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${Re?"bg-red-600/20 text-red-300 border border-red-500/30":"bg-green-600/20 text-green-300 border border-green-500/30"}`,children:Re?" ":" "})}),a.jsxs("div",{className:"flex items-center space-x-2 text-gray-300",children:[a.jsx(Al,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:lr(s.startTime)})]}),a.jsx(ut,{onClick:kt,variant:"danger",size:"sm",children:" "})]})]})}),a.jsx("div",{className:"bg-gray-700/50 border-b border-gray-600 p-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(ut,{onClick:Xs,variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:me==="live"?" ":" "}),a.jsxs(ut,{onClick:un,variant:Re?"danger":"success",size:"sm",className:"flex items-center space-x-2",children:[Re?a.jsx(Vc,{className:"w-4 h-4"}):a.jsx(rg,{className:"w-4 h-4"}),a.jsx("span",{children:Re?" ":" "})]}),a.jsxs(ut,{onClick:Is,variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Cr,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-300",children:[a.jsxs("span",{children:[" : ",pe.length]}),a.jsxs("span",{children:[" : ",$e.averageEngagement,"%"]}),a.jsxs("span",{children:[" : ",$e.questionsAnswered]})]})]})}),a.jsxs("div",{className:"flex h-screen",children:[a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"flex-1 bg-gray-900 p-8 flex items-center justify-center relative",children:[a.jsx("div",{className:"w-full max-w-4xl",children:o&&o.slides&&o.slides[u]?a.jsxs("div",{className:"bg-white rounded-lg shadow-2xl p-8 min-h-96",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:o.slides[u].title||` ${u+1}`}),a.jsxs("p",{className:"text-gray-600 text-sm",children:[o.title,"   ",u+1,"  ",o.slides.length]})]}),a.jsxs("div",{className:"prose prose-lg max-w-none",children:[o.slides[u].content&&a.jsx("div",{className:"text-gray-700",dangerouslySetInnerHTML:{__html:typeof o.slides[u].content=="string"?o.slides[u].content:JSON.stringify(o.slides[u].content)}}),o.slides[u].type==="video"&&o.slides[u].videoUrl&&a.jsx("div",{className:"mt-4",children:a.jsx("video",{className:"w-full rounded-lg",controls:!0,src:o.slides[u].videoUrl,children:"Your browser does not support the video tag."})}),o.slides[u].type==="quiz"&&a.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[a.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:":"}),a.jsx("p",{className:"text-blue-700",children:o.slides[u].question})]})]})]}):a.jsx("div",{className:"text-center text-gray-400",children:a.jsx("p",{children:"  "})})}),a.jsx("button",{onClick:lt,className:"absolute top-4 right-4 p-2 bg-gray-800/50 hover:bg-gray-700/50 rounded-lg text-gray-300 hover:text-white transition-colors",children:g?a.jsx(R2,{className:"w-5 h-5"}):a.jsx(P2,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"bg-gray-800/50 border-t border-gray-700 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(ut,{onClick:Pe,disabled:u===0,variant:"secondary",size:"sm",children:a.jsx(F2,{className:"w-4 h-4"})}),a.jsxs(ut,{onClick:Me,variant:"primary",size:"lg",className:"flex items-center space-x-2",children:[f?a.jsx(kd,{className:"w-5 h-5"}):a.jsx(Sn,{className:"w-5 h-5"}),a.jsx("span",{children:f?"":""})]}),a.jsx(ut,{onClick:be,disabled:u===o.slides.length-1,variant:"secondary",size:"sm",children:a.jsx(L2,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(ut,{onClick:ct,variant:"secondary",size:"sm",children:w?a.jsx(z3,{className:"w-4 h-4"}):a.jsx(U3,{className:"w-4 h-4"})}),a.jsx(ut,{onClick:Bt,variant:B?"secondary":"danger",size:"sm",children:B?a.jsx(zB,{className:"w-4 h-4"}):a.jsx(UB,{className:"w-4 h-4"})}),a.jsx(ut,{onClick:it,variant:O?"secondary":"danger",size:"sm",children:O?a.jsx(z2,{className:"w-4 h-4"}):a.jsx(QB,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("span",{className:"text-sm text-gray-300",children:[u+1," / ",o.slides.length]}),a.jsx("div",{className:"w-32 bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(u+1)/o.slides.length*100}%`}})})]})]})})]}),a.jsxs("div",{className:"w-96 bg-gray-800/50 border-l border-gray-700 overflow-y-auto",children:[ie.length>0&&a.jsxs("div",{className:"p-4 border-b border-gray-700",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center space-x-2",children:[a.jsx(AB,{className:"w-5 h-5 text-yellow-400"}),a.jsxs("span",{children:["  (",ie.length,")"]})]}),a.jsx("div",{className:"space-y-3",children:ie.map(mt=>a.jsx(rt,{className:"p-3 bg-yellow-500/10 border-yellow-500/20",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:mt.name}),a.jsx("p",{className:"text-yellow-300 text-sm",children:mt.question}),a.jsxs("p",{className:"text-gray-400 text-xs",children:[Math.floor((Date.now()-mt.time.getTime())/1e3/60)," "]})]}),a.jsx(ut,{onClick:()=>er(mt.id),variant:"secondary",size:"sm",children:""})]})},mt.id))})]}),ne.length>0&&a.jsxs("div",{className:"p-4 border-b border-gray-700",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center space-x-2",children:[a.jsx(vs,{className:"w-5 h-5 text-blue-400"}),a.jsxs("span",{children:["  (",ne.length,")"]})]}),a.jsx("div",{className:"space-y-3",children:ne.map(mt=>a.jsxs(rt,{className:"p-3 bg-blue-500/10 border-blue-500/20",children:[a.jsx("p",{className:"text-white font-medium mb-2",children:mt.question}),a.jsx("div",{className:"space-y-2",children:mt.answers.map((Wt,ur)=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700/50 rounded",children:[a.jsx("span",{className:"text-gray-300 text-sm",children:Wt}),a.jsxs("span",{className:"text-blue-400 text-xs",children:[Math.round(mt.responses/s.activeStudents*100),"%"]})]},ur))}),a.jsxs("p",{className:"text-gray-400 text-xs mt-2",children:[mt.responses,"   ",s.activeStudents," "]})]},mt.id))})]}),a.jsxs("div",{className:"p-4",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center space-x-2",children:[a.jsx(Cr,{className:"w-5 h-5"}),a.jsxs("span",{children:[" (",((pa=s.connectedStudents)==null?void 0:pa.length)||0,")"]})]}),a.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:s.connectedStudents&&s.connectedStudents.length>0?s.connectedStudents.map(mt=>a.jsx("div",{className:"p-3 rounded-lg border bg-green-500/10 border-green-500/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:mt.name}),a.jsx("p",{className:"text-sm text-gray-400",children:" "})]})}),a.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})]})},mt.id)):a.jsx("div",{className:"p-4 text-center",children:a.jsx("p",{className:"text-gray-400",children:"  "})})})]})]})]}),Vn&&a.jsxs("div",{className:"fixed bottom-4 right-4 max-w-md bg-yellow-900/90 backdrop-blur-sm rounded-lg p-4 border border-yellow-700",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Ws,{className:"w-4 h-4 text-yellow-400"}),a.jsx("span",{className:"text-yellow-400 font-medium text-sm",children:"Teacher Notes"})]}),a.jsx("p",{className:"text-yellow-200 text-sm",children:Vn})]})]})},Rq=()=>{var We,re,st,Re,he,me;const{sessionId:t}=Cg(),e=Zn(),{currentUser:r,trackSlideEngagement:n}=ws(),[s,i]=S.useState(null),[o,l]=S.useState(null),[u,h]=S.useState(0),[f,p]=S.useState(!0),[g,y]=S.useState(!1),[w,b]=S.useState(!1),[_,P]=S.useState({}),[A,k]=S.useState(new Set),[F,L]=S.useState([]),[I,N]=S.useState(""),[T,R]=S.useState(!1),[B,z]=S.useState(""),[O,D]=S.useState({slidesViewed:0,interactions:0,timeSpent:0}),[ie,Z]=S.useState(!1),[ne,H]=S.useState("individual"),[Q,q]=S.useState(!1);S.useEffect(()=>{t&&r&&ae()},[t,r]),S.useEffect(()=>{if(s){let ee=null,pe=0;const Ce=3,$e=()=>{try{console.log(" Setting up session listener for student session:",t),ee=Nx(t,ot=>{var xt;if(ot){console.log(" Session updated:",ot.lessonName),i(ot);const Nt=ot.currentSlide||0,Me=ot.status==="active"&&ot.teacherId;if(Z(Me),H(Me?"live":"individual"),q(Me),Me&&h(Nt),o&&((xt=o.slides)!=null&&xt[Nt])){const be=o.slides[Nt];be.id&&!A.has(be.id)&&(n(o.originalId,be.id),k(Pe=>new Set([...Pe,be.id])),console.log(" Live Session Slide Engagement:",{sessionId:t,lessonId:o.originalId,slideId:be.id,slideTitle:be.title,totalSlidesEngaged:A.size+1}))}Me||h(Nt),pe=0}else console.log(" Session ended or not found"),Ie.error(" "),e("/student/dashboard")})}catch(ot){console.error(" Error setting up session listener:",ot),pe++,pe<Ce?(console.log(` Retrying session listener (${pe}/${Ce})...`),setTimeout($e,2e3*pe)):(console.error(" Max retries reached for session listener"),Ie.error("   "))}};return $e(),()=>{ee&&(console.log(" Cleaning up session listener"),ee())}}},[t,e,o,n,A]);const ae=async()=>{try{p(!0);const ee=await Sb(t);i(ee);const pe=await Sx(ee.lessonId);pe.slides&&pe.slides.sort((Ce,$e)=>{const ot=Ce.order??Ce.sortOrder??0,xt=$e.order??$e.sortOrder??0;return ot-xt}),l(pe),h(ee.currentSlide||0),p(!1)}catch(ee){console.error("Error loading session:",ee),Ie.error("   "),e("/student/dashboard")}},U=async()=>{if(!s||!r){console.warn("[handleJoinSession] Missing session or currentUser",{session:s,currentUser:r});return}console.log("[handleJoinSession] Called",{sessionId:t,studentId:r.uid,studentName:r.displayName||r.email,session:s,currentUser:r});try{y(!0);const ee=await RW(t,r.uid,r.displayName||r.email);console.log("[handleJoinSession] joinSession success",{result:ee}),b(!0),Ie.success("  !")}catch(ee){console.error("[handleJoinSession] Error joining session:",ee),Ie.error("   "),y(!1)}},M=async()=>{if(!(!s||!r))try{await DW(t,r.uid),b(!1),Ie.success("  "),e("/student/dashboard")}catch(ee){console.error("Error leaving session:",ee),Ie.error("   ")}},X=(ee,pe)=>{P(Ce=>({...Ce,[ee]:pe})),o&&ee&&!A.has(ee)&&(n(o.originalId,ee),k(Ce=>new Set([...Ce,ee])),console.log(" Live Session Answer Submitted:",{sessionId:t,lessonId:o.originalId,slideId:ee,answer:pe,totalSlidesEngaged:A.size+1}))},K=()=>s?s.status==="ended"?"ended":s.isLocked?"locked":"active":"loading",Y=ee=>{if(!ee)return"0 ";const pe=Date.now()-ee.toDate().getTime();return`${Math.floor(pe/(1e3*60))} `},xe=ee=>{switch(o&&ee.id&&!A.has(ee.id)&&(n(o.originalId,ee.id),k(pe=>new Set([...pe,ee.id]))),ee.type){case"presentation":return a.jsx(Pd,{slide:ee});case"poll":return a.jsx(k0,{slide:ee,onAnswer:X,answers:_});case"quiz":return a.jsx(I0,{slide:ee,onAnswer:X,answers:_});case"video":return a.jsx(T0,{slide:ee,onAnswer:X,answers:_});case"interactive":return a.jsx(j0,{slide:ee,onAnswer:X,answers:_});case"break":return a.jsx(A0,{slide:ee});case"reflection":return a.jsx(C0,{slide:ee,onAnswer:X,answers:_});default:return a.jsx(Pd,{slide:ee})}};S.useCallback((ee,pe={})=>{D(Ce=>({...Ce,interactions:Ce.interactions+1}));try{const Ce=wt(ze,"sessions",t);On(Ce,{studentEngagement:{[r.uid]:{[ee]:{timestamp:Lt(),data:pe}}}})}catch(Ce){console.error("Error tracking engagement:",Ce)}},[t,r.uid]);const le=()=>{if(Q){Ie.error("     ");return}if(o&&u<o.slides.length-1){const ee=u+1;h(ee),ie&&updateSessionSlide(t,ee)}},fe=()=>{if(Q){Ie.error("     ");return}if(u>0){const ee=u-1;h(ee),ie&&updateSessionSlide(t,ee)}};if(f)return a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx(Jn,{size:"lg"})});if(!s||!o)return a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(To,{className:"w-16 h-16 mx-auto mb-4 text-red-400"}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"  "}),a.jsx("p",{className:"text-gray-400 mb-4",children:"        "}),a.jsx(ut,{onClick:()=>e("/student/dashboard"),variant:"primary",children:" "})]})});const ve=K(),we=(We=o.slides)==null?void 0:We[u];return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:[a.jsx(S0,{}),a.jsx("div",{className:"bg-gray-800/50 border-b border-gray-700 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(ut,{onClick:M,variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Mc,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-white",children:s.lessonName}),a.jsxs("p",{className:"text-gray-300 text-sm",children:[s.className,"  ",((re=s.connectedStudents)==null?void 0:re.length)||0,"  "]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-gray-300",children:[a.jsx(Al,{className:"w-4 h-4"}),a.jsx("span",{children:Y(s.startTime)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[ve==="active"&&a.jsxs("div",{className:"flex items-center space-x-1 text-green-400",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-sm",children:""})]}),ve==="paused"&&a.jsxs("div",{className:"flex items-center space-x-1 text-yellow-400",children:[a.jsx(kd,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:""})]}),ve==="ended"&&a.jsxs("div",{className:"flex items-center space-x-1 text-red-400",children:[a.jsx(Qt,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:""})]})]})]})]})}),ie&&a.jsx("div",{className:"bg-blue-600/20 border-b border-blue-500/30 p-3",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-300",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),a.jsx("span",{className:"font-medium",children:"  -   "}),Q&&a.jsx("span",{className:"text-xs bg-blue-500/30 px-2 py-1 rounded",children:" "})]})}),ne==="individual"&&a.jsx("div",{className:"bg-green-600/20 border-b border-green-500/30 p-3",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-300",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),a.jsx("span",{className:"font-medium",children:"  -   "})]})}),ve==="locked"&&a.jsx("div",{className:"bg-yellow-600/20 border-b border-yellow-500/30 p-3",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-yellow-300",children:[a.jsx(Vc,{className:"w-4 h-4"}),a.jsx("span",{children:"  -   "})]})}),ve==="ended"&&a.jsx("div",{className:"bg-red-600/20 border-b border-red-500/30 p-3",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-red-300",children:[a.jsx(Qt,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})}),a.jsx("div",{className:"flex-1 relative",children:w?a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"bg-gray-800/50 border-b border-gray-700 p-2",children:a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-300",children:[a.jsxs("span",{children:[" ",u+1,"  ",((st=o.slides)==null?void 0:st.length)||0]}),a.jsxs("span",{children:[" : ",A.size]})]})}),a.jsx("div",{className:"p-6",children:we?a.jsx("div",{className:"max-w-4xl mx-auto",children:xe(we)}):a.jsx("div",{className:"text-center text-gray-400",children:a.jsx("p",{children:"  "})})}),a.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-gray-800/90 backdrop-blur-sm rounded-full p-2 border border-gray-600/50",children:a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsx("button",{onClick:fe,disabled:u===0||Q,className:`p-3 rounded-full transition-all duration-200 ${u===0||Q?"bg-gray-600/50 text-gray-400 cursor-not-allowed":"bg-blue-600/80 hover:bg-blue-500 text-white hover:scale-110"}`,title:Q?"  ":" ",children:a.jsx(Mc,{className:"w-5 h-5"})}),a.jsx("div",{className:"px-4 py-2 bg-gray-700/50 rounded-full",children:a.jsxs("span",{className:"text-white text-sm font-medium",children:[u+1," / ",((Re=o.slides)==null?void 0:Re.length)||0]})}),a.jsx("button",{onClick:le,disabled:u===(((he=o.slides)==null?void 0:he.length)||0)-1||Q,className:`p-3 rounded-full transition-all duration-200 ${u===(((me=o.slides)==null?void 0:me.length)||0)-1||Q?"bg-gray-600/50 text-gray-400 cursor-not-allowed":"bg-blue-600/80 hover:bg-blue-500 text-white hover:scale-110"}`,title:Q?"  ":" ",children:a.jsx(dx,{className:"w-5 h-5"})})]})}),Q&&a.jsx("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-yellow-600/90 backdrop-blur-sm rounded-lg p-3 border border-yellow-500/50",children:a.jsxs("div",{className:"flex items-center space-x-2 text-yellow-200 text-sm",children:[a.jsx(Vc,{className:"w-4 h-4"}),a.jsx("span",{children:"   -  "})]})})]}):a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(rt,{className:"max-w-md w-full",children:a.jsxs("div",{className:"text-center p-6",children:[a.jsx(Cr,{className:"w-16 h-16 mx-auto mb-4 text-blue-400"}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:" "}),a.jsx("p",{className:"text-gray-400 mb-6",children:"        "}),a.jsx(ut,{onClick:U,disabled:g,variant:"primary",className:"w-full",children:g?"...":" "})]})})})})]})};let By=null,Uy=null;const Dq=30*1e3,k6=async(t=!1)=>{try{if(!t&&By&&Uy&&Date.now()-Uy<Dq)return By;const[e,r,n,s]=await Promise.all([zt(Ft(ze,"users")),zt(Ft(ze,"lessons")),zt(Ft(ze,"sessions")),zt(nr(Ft(ze,"security_logs"),ua("timestamp","desc"),no(100)))]);let i=0,o=0,l=0,u=0,h=0,f=0;const p=new Date(Date.now()-7*24*60*60*1e3);e.forEach(N=>{var R,B,z,O;const T=N.data();switch(i++,T.role){case"student":o++;break;case"teacher":l++;break;case"system_manager":u++;break;default:o++;break}((B=(R=T.lastLogin)==null?void 0:R.toDate)==null?void 0:B.call(R))>new Date(Date.now()-24*60*60*1e3)&&h++,((O=(z=T.createdAt)==null?void 0:z.toDate)==null?void 0:O.call(z))>p&&f++});const g=r.size;let y=0;const w=[];console.log(` Processing ${g} lessons for analytics...`);for(const N of r.docs){const T=N.data(),B=(await zt(Ft(ze,"lessons",N.id,"slides"))).docs;y+=B.length,console.log(` Lesson ${N.id}: ${B.length} slides`),w.push({id:N.id,title:T.title,slideCount:B.length,difficulty:T.difficulty,targetAge:T.targetAge})}console.log(` Total slides found: ${y}`);const b=n.size;let _=0,P=0;n.forEach(N=>{const T=N.data();T.status==="active"?_++:T.status==="completed"&&P++});const A=s.docs.slice(0,10).map(N=>{var R,B;const T=N.data();return{id:N.id,type:T.type||T.eventType||"security",message:T.description||T.message||T.action||"Security event",timestamp:((B=(R=T.timestamp)==null?void 0:R.toDate)==null?void 0:B.call(R))||new Date,userId:T.userId||T.userEmail||T.user||"System",action:T.action||T.eventType||"security_event"}}),k=new Date(Date.now()-24*60*60*1e3),F=e.docs.filter(N=>{var B,z,O,D;const T=N.data(),R=((z=(B=T.lastActivityAt)==null?void 0:B.toDate)==null?void 0:z.call(B))||((D=(O=T.lastLogin)==null?void 0:O.toDate)==null?void 0:D.call(O));return R&&R>k});console.log(` Found ${F.length} active users today`);const L=await Fq(),I={users:{total:i,students:o,teachers:l,systemManagers:u,active:h,newThisWeek:f,growthRate:i>0?(f/i*100).toFixed(1):0},content:{totalLessons:g,totalSlides:y,lessonStats:w,averageSlidesPerLesson:g>0?(y/g).toFixed(1):0},sessions:{total:b,active:_,completed:P,completionRate:b>0?(P/b*100).toFixed(1):0},activities:{recent:A,totalToday:A.filter(N=>N.timestamp>new Date(Date.now()-24*60*60*1e3)).length+F.length},system:L,lastUpdated:new Date};return By=I,Uy=Date.now(),I}catch{throw new Error("Failed to load system statistics")}},Fq=async()=>{try{const t=await Promise.allSettled([dr(wt(ze,"system","health")),zt(nr(Ft(ze,"users"),no(1))),Promise.resolve(!0),_n(wt(ze,"system","health-check"),{timestamp:Lt()})]),e={database:t[0].status==="fulfilled"?"online":"offline",auth:t[1].status==="fulfilled"?"online":"offline",storage:t[2].status==="fulfilled"?"online":"offline",realtime:t[3].status==="fulfilled"?"online":"offline"},r=Object.values(e).every(n=>n==="online");return{status:e,overall:r?"healthy":"degraded",lastChecked:new Date}}catch{return{status:{database:"unknown",auth:"unknown",storage:"unknown",realtime:"unknown"},overall:"unknown",lastChecked:new Date}}},Lq=async()=>{try{const t=Ft(ze,"securityEvents"),e=nr(t,ua("timestamp","desc"),no(50)),r=await zt(e),n=Ft(ze,"userActivities"),s=nr(n,ua("timestamp","desc"),no(50)),i=await zt(s),o=Ft(ze,"sessions"),l=nr(o,yr("status","==","active")),u=await zt(l);return{security:{events:r.docs.map(f=>{var p,g;return{id:f.id,...f.data(),timestamp:((g=(p=f.data().timestamp)==null?void 0:p.toDate)==null?void 0:g.call(p))||new Date}}),criticalCount:r.docs.filter(f=>f.data().severity==="critical").length,warningCount:r.docs.filter(f=>f.data().severity==="warning").length},activities:{recent:i.docs.map(f=>{var p,g;return{id:f.id,...f.data(),timestamp:((g=(p=f.data().timestamp)==null?void 0:p.toDate)==null?void 0:g.call(p))||new Date}}),totalToday:i.docs.filter(f=>{var p,g;return((g=(p=f.data().timestamp)==null?void 0:p.toDate)==null?void 0:g.call(p))>new Date(Date.now()-24*60*60*1e3)}).length},sessions:{active:u.docs.map(f=>{var p,g;return{id:f.id,...f.data(),timestamp:((g=(p=f.data().timestamp)==null?void 0:p.toDate)==null?void 0:g.call(p))||new Date}}),count:u.size},lastUpdated:new Date}}catch{throw new Error("Failed to load system monitoring data")}},Oq=t=>{try{return Kd(Ft(ze,"securityEvents"),r=>{const n=r.docs.map(s=>{var i,o;return{id:s.id,...s.data(),timestamp:((o=(i=s.data().timestamp)==null?void 0:i.toDate)==null?void 0:o.call(i))||new Date}});t({type:"security_events",data:n,timestamp:new Date})},r=>{})}catch{return()=>{}}},Mq=async(t="7d")=>{try{const e=new Date;let r;switch(t){case"24h":r=new Date(e.getTime()-24*60*60*1e3);break;case"7d":r=new Date(e.getTime()-7*24*60*60*1e3);break;case"30d":r=new Date(e.getTime()-30*24*60*60*1e3);break;default:r=new Date(e.getTime()-7*24*60*60*1e3)}const n=Ft(ze,"users"),s=nr(n,yr("createdAt",">=",Jr.fromDate(r)),ua("createdAt","desc")),i=await zt(s),o=Ft(ze,"userActivities"),l=nr(o,yr("timestamp",">=",Jr.fromDate(r)),ua("timestamp","desc")),u=await zt(l),h={timeRange:t,users:{new:i.size,byRole:{students:0,teachers:0,systemManagers:0}},activities:{total:u.size,byType:{}},trends:{daily:[],weekly:[]}};return i.forEach(f=>{switch(f.data().role){case"student":h.users.byRole.students++;break;case"teacher":h.users.byRole.teachers++;break;case"system_manager":h.users.byRole.systemManagers++;break}}),u.forEach(f=>{const p=f.data(),g=p.type||p.action||"unknown";h.activities.byType[g]=(h.activities.byType[g]||0)+1}),h}catch{throw new Error("Failed to load user analytics")}},Vq=async(t="all")=>{try{const e={};if(t==="all"||t==="users"){const r=await zt(Ft(ze,"users"));e.users=r.docs.map(n=>{var s,i,o,l,u,h;return{id:n.id,...n.data(),createdAt:((i=(s=n.data().createdAt)==null?void 0:s.toDate)==null?void 0:i.call(s))||null,lastLogin:((l=(o=n.data().lastLogin)==null?void 0:o.toDate)==null?void 0:l.call(o))||null,updatedAt:((h=(u=n.data().updatedAt)==null?void 0:u.toDate)==null?void 0:h.call(u))||null}})}if(t==="all"||t==="lessons"){const r=await zt(Ft(ze,"lessons"));e.lessons=r.docs.map(n=>{var s,i,o,l;return{id:n.id,...n.data(),createdAt:((i=(s=n.data().createdAt)==null?void 0:s.toDate)==null?void 0:i.call(s))||null,updatedAt:((l=(o=n.data().updatedAt)==null?void 0:o.toDate)==null?void 0:l.call(o))||null}})}if(t==="all"||t==="sessions"){const r=await zt(Ft(ze,"sessions"));e.sessions=r.docs.map(n=>{var s,i,o,l;return{id:n.id,...n.data(),createdAt:((i=(s=n.data().createdAt)==null?void 0:s.toDate)==null?void 0:i.call(s))||null,updatedAt:((l=(o=n.data().updatedAt)==null?void 0:o.toDate)==null?void 0:l.call(o))||null}})}if(t==="all"||t==="logs"){const r=await zt(Ft(ze,"securityEvents"));e.logs=r.docs.map(n=>{var s,i;return{id:n.id,...n.data(),timestamp:((i=(s=n.data().timestamp)==null?void 0:s.toDate)==null?void 0:i.call(s))||null}})}return e.exportInfo={timestamp:new Date,dataType:t,totalRecords:Object.values(e).reduce((r,n)=>r+(Array.isArray(n)?n.length:0),0)},e}catch{throw new Error("Failed to export system data")}},Bq=({isOpen:t,onClose:e,onSuccess:r})=>{const[n,s]=S.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",grade:"",school:"",phone:""}),[i,o]=S.useState(!1),[l,u]=S.useState({}),h=y=>{const{name:w,value:b}=y.target;s(_=>({..._,[w]:b})),l[w]&&u(_=>({..._,[w]:""}))},f=()=>{const y={};return n.firstName.trim()||(y.firstName="    "),n.lastName.trim()||(y.lastName="    "),n.email.trim()?/\S+@\S+\.\S+/.test(n.email)||(y.email="  "):y.email="   ",n.password?n.password.length<6&&(y.password="    6 "):y.password="   ",n.password!==n.confirmPassword&&(y.confirmPassword="  "),n.grade.trim()||(y.grade="   "),u(y),Object.keys(y).length===0},p=async y=>{if(y.preventDefault(),!!f()){o(!0);try{const w=`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,b={uid:w,email:n.email.toLowerCase(),displayName:`${n.firstName} ${n.lastName}`,role:"student",firstName:n.firstName,lastName:n.lastName,grade:n.grade,school:n.school||"",phone:n.phone||"",classId:null,teacherId:null,progress:{1:{completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date}},completedLessons:[],currentLesson:1,totalTimeSpent:0,totalPagesEngaged:0,achievements:[],streak:0,password:n.password,hasFirebaseAuth:!1,isActive:!0,createdAt:Lt(),lastLogin:null,lastActivityDate:Lt(),updatedAt:Lt()};await _n(wt(ze,"users",w),b),Wr("STUDENT_CREATED",{studentId:w,studentEmail:n.email,createdBy:"system_manager",timestamp:new Date().toISOString()}),Ie.success("  !    ."),s({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",grade:"",school:"",phone:""}),r&&r(w),e()}catch(w){console.error("Error creating student:",w);let b="   ";w.code==="permission-denied"?b="   ":w.message&&w.message.includes("already exists")&&(b="    "),Ie.error(b)}finally{o(!1)}}},g=()=>{i||(s({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",grade:"",school:"",phone:""}),u({}),e())};return a.jsx(vn,{children:t&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:g}),a.jsxs(Ke.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:a.jsx(sg,{className:"w-6 h-6 text-blue-400"})}),a.jsx("h2",{className:"text-xl font-bold text-white",children:"  "})]}),a.jsx("button",{onClick:g,disabled:i,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",children:a.jsx(zr,{className:"w-5 h-5 text-gray-400"})})]}),a.jsx("div",{className:"mb-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:a.jsxs("p",{className:"text-blue-300 text-sm",children:[a.jsx(sg,{className:"w-4 h-4 inline mr-2"}),"       .     ."]})}),a.jsxs("form",{onSubmit:p,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"  *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Di,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",name:"firstName",value:n.firstName,onChange:h,className:`w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg border focus:outline-none focus:ring-2 ${l.firstName?"border-red-500 focus:ring-red-500":"border-gray-600 focus:ring-blue-500"}`,placeholder:" ",disabled:i})]}),l.firstName&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.firstName})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"  *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Di,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",name:"lastName",value:n.lastName,onChange:h,className:`w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg border focus:outline-none focus:ring-2 ${l.lastName?"border-red-500 focus:ring-red-500":"border-gray-600 focus:ring-blue-500"}`,placeholder:" ",disabled:i})]}),l.lastName&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.lastName})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:" *"}),a.jsxs("div",{className:"relative",children:[a.jsx(ng,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"email",name:"email",value:n.email,onChange:h,className:`w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg border focus:outline-none focus:ring-2 ${l.email?"border-red-500 focus:ring-red-500":"border-gray-600 focus:ring-blue-500"}`,placeholder:"student@example.com",disabled:i})]}),l.email&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.email})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:" *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Vc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"password",name:"password",value:n.password,onChange:h,className:`w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg border focus:outline-none focus:ring-2 ${l.password?"border-red-500 focus:ring-red-500":"border-gray-600 focus:ring-blue-500"}`,placeholder:" 6 ",disabled:i})]}),l.password&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.password})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"  *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Vc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"password",name:"confirmPassword",value:n.confirmPassword,onChange:h,className:`w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg border focus:outline-none focus:ring-2 ${l.confirmPassword?"border-red-500 focus:ring-red-500":"border-gray-600 focus:ring-blue-500"}`,placeholder:" ",disabled:i})]}),l.confirmPassword&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.confirmPassword})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:" *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Df,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsxs("select",{name:"grade",value:n.grade,onChange:h,className:`w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg border focus:outline-none focus:ring-2 ${l.grade?"border-red-500 focus:ring-red-500":"border-gray-600 focus:ring-blue-500"}`,disabled:i,children:[a.jsx("option",{value:"",children:" "}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""}),a.jsx("option",{value:"",children:""})]})]}),l.grade&&a.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.grade})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:" "}),a.jsx("input",{type:"text",name:"school",value:n.school,onChange:h,className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"  ",disabled:i})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:""}),a.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:h,className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"050-1234567",disabled:i})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(ut,{type:"button",onClick:g,variant:"secondary",className:"flex-1",disabled:i,children:""}),a.jsx(ut,{type:"submit",className:"flex-1",disabled:i,children:i?"...":" "})]})]})]})]})})},Uq=({onClose:t,onSuccess:e})=>{const[r,n]=S.useState(""),[s,i]=S.useState([]),[o,l]=S.useState(""),[u,h]=S.useState(!1),[f,p]=S.useState([]),[g,y]=S.useState([]),[w,b]=S.useState(!0);S.useEffect(()=>{_()},[]);const _=async()=>{try{b(!0);const F=Ft(ze,"users"),L=nr(F,yr("role","==","teacher")),I=await zt(L),N=[];I.forEach(z=>{const O=z.data();N.push({id:z.id,name:O.displayName||O.email,email:O.email})}),p(N);const T=nr(F,yr("role","==","student")),R=await zt(T),B=[];R.forEach(z=>{const O=z.data();B.push({id:z.id,name:O.displayName||O.email,email:O.email,assigned:!!O.teacherId})}),y(B)}catch(F){console.error("Error loading teachers and students:",F),Ie.error("   ")}finally{b(!1)}},P=g.filter(F=>F.name.toLowerCase().includes(o.toLowerCase())||F.email.toLowerCase().includes(o.toLowerCase())),A=F=>{i(L=>L.includes(F)?L.filter(I=>I!==F):[...L,F])},k=async F=>{var L;if(F.preventDefault(),!r){Ie.error("  ");return}if(s.length===0){Ie.error("  ");return}h(!0);try{const I=g0(ze),N=r;for(const T of s){const B=wt(ze,"users",T);I.update(B,{teacherId:N,updatedAt:Lt()})}await I.commit(),Wr("STUDENTS_ASSIGNED_TO_TEACHER",{teacherId:N,studentIds:s,assignedBy:(L=Za.currentUser)==null?void 0:L.uid,timestamp:new Date().toISOString()}),Ie.success(`${s.length}   `),e()}catch(I){console.error("Error assigning students:",I),Ie.error("   ")}finally{h(!1)}};return a.jsx(vn,{children:a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:a.jsx(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center space-x-2",children:[a.jsx(Cr,{className:"w-5 h-5"}),a.jsx("span",{children:"  "})]}),a.jsx(ut,{onClick:t,variant:"secondary",size:"sm",className:"flex items-center space-x-1",children:a.jsx(zr,{className:"w-4 h-4"})})]}),a.jsxs("form",{onSubmit:k,className:"space-y-6",children:[w?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-300",children:" ..."})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsxs("select",{value:r,onChange:F=>n(F.target.value),required:!0,className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"",children:" ..."}),f.map(F=>a.jsxs("option",{value:F.id,children:[F.name," (",F.email,")"]},F.id))]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("label",{className:"block text-gray-300 text-sm",children:" "}),a.jsxs("div",{className:"text-sm text-gray-400",children:[" ",s.length," "]})]}),a.jsxs("div",{className:"relative mb-4",children:[a.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:" ...",value:o,onChange:F=>l(F.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"})]}),a.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-600 rounded",children:P.map(F=>a.jsxs("div",{className:`flex items-center justify-between p-3 border-b border-gray-600 hover:bg-gray-700 cursor-pointer ${s.includes(F.id)?"bg-blue-600/20":""}`,onClick:()=>A(F.id),children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:s.includes(F.id),onChange:()=>A(F.id),className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white font-medium",children:F.name}),a.jsx("div",{className:"text-gray-400 text-sm",children:F.email})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[F.assigned&&a.jsx("span",{className:"text-green-400 text-xs",children:""}),a.jsx(U2,{className:"w-4 h-4 text-gray-400"})]})]},F.id))})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(ut,{type:"submit",disabled:u||w||!r||s.length===0,variant:"primary",className:"flex-1 flex items-center justify-center space-x-2",children:u?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Cr,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})}),a.jsx(ut,{onClick:t,variant:"secondary",className:"flex-1",children:""})]})]})]})})})})},zq=({user:t,onClose:e,onSuccess:r})=>{const[n,s]=S.useState(!1),[i,o]=S.useState(""),l=async()=>{var u;if(i!==""){Ie.error('  "" ');return}s(!0);try{const h=t.documentId||t.uid,f=wt(ze,"users",h);await ox(f),Wr("USER_DELETED",{userId:h,userEmail:t.email,deletedBy:(u=Za.currentUser)==null?void 0:u.uid,timestamp:new Date().toISOString()}),Ie.success("  "),r()}catch(h){console.error("Error deleting user:",h),Ie.error("   ")}finally{s(!1)}};return t?a.jsx(vn,{children:a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:a.jsx(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg w-full max-w-md",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-red-400 flex items-center space-x-2",children:[a.jsx(da,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx(ut,{onClick:e,variant:"secondary",size:"sm",className:"flex items-center space-x-1",children:a.jsx(zr,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(vs,{className:"w-5 h-5 text-red-400"}),a.jsx("span",{className:"text-red-400 font-semibold",children:"!"})]}),a.jsx("p",{className:"text-red-300 text-sm",children:"     .     ."})]}),a.jsx("div",{className:"bg-gray-700/50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-600 rounded-full flex items-center justify-center",children:a.jsx(Di,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white font-medium",children:t.displayName}),a.jsx("div",{className:"text-gray-400 text-sm",children:t.email}),a.jsx("div",{className:"text-gray-400 text-sm capitalize",children:t.role})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:' "" '}),a.jsx("input",{type:"text",value:i,onChange:u=>o(u.target.value),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-red-500 focus:outline-none",placeholder:""})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(ut,{onClick:l,disabled:n||i!=="",variant:"danger",className:"flex-1 flex items-center justify-center space-x-2",children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(da,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})}),a.jsx(ut,{onClick:e,variant:"secondary",className:"flex-1",children:""})]})]})]})})})}):null},$q=({user:t,onClose:e,onSuccess:r})=>{const[n,s]=S.useState({displayName:"",firstName:"",lastName:"",age:"",sex:"male",role:"student"}),[i,o]=S.useState(!1);S.useEffect(()=>{t&&s({displayName:t.displayName||"",firstName:t.firstName||"",lastName:t.lastName||"",age:t.age||"",sex:t.sex||"male",role:t.role||"student"})},[t]);const l=async h=>{var f;h.preventDefault(),o(!0);try{const p={displayName:n.displayName,firstName:n.firstName,lastName:n.lastName,role:n.role,updatedAt:Lt()};n.role==="student"&&(p.age=n.age?parseInt(n.age):null,p.sex=n.sex);const g=t.documentId||t.uid,y=wt(ze,"users",g);await On(y,p),Wr("USER_UPDATED",{userId:g,userEmail:t.email,updatedBy:(f=Za.currentUser)==null?void 0:f.uid,updatedFields:Object.keys(p),timestamp:new Date().toISOString()}),Ie.success("  "),r()}catch(p){console.error("Error updating user:",p),Ie.error("   ")}finally{o(!1)}},u=h=>{s({...n,[h.target.name]:h.target.value})};return t?a.jsx(vn,{children:a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:a.jsx(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg w-full max-w-md",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center space-x-2",children:[a.jsx(Di,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx(ut,{onClick:e,variant:"secondary",size:"sm",className:"flex items-center space-x-1",children:a.jsx(zr,{className:"w-4 h-4"})})]}),a.jsxs("form",{onSubmit:l,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(ng,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"email",value:t.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 bg-gray-700/50 text-gray-400 rounded border border-gray-600 cursor-not-allowed"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsxs("div",{className:"relative",children:[a.jsx(Di,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",name:"displayName",value:n.displayName,onChange:u,className:"w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",placeholder:" "})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsx("input",{type:"text",name:"firstName",value:n.firstName,onChange:u,className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",placeholder:" "})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsx("input",{type:"text",name:"lastName",value:n.lastName,onChange:u,className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",placeholder:" "})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(yB,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"number",name:"age",value:n.age,onChange:u,min:"1",max:"120",className:"w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",placeholder:""})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:""}),a.jsxs("select",{name:"sex",value:n.sex,onChange:u,className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"male",children:""}),a.jsx("option",{value:"female",children:""})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(CB,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsxs("select",{name:"role",value:n.role,onChange:u,className:"w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"student",children:""}),a.jsx("option",{value:"teacher",children:""}),a.jsx("option",{value:"system_manager",children:" "})]})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(ut,{type:"submit",disabled:i,variant:"primary",className:"flex-1 flex items-center justify-center space-x-2",children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Yd,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})}),a.jsx(ut,{onClick:e,variant:"secondary",className:"flex-1",children:""})]})]})]})})})}):null},T6=()=>{const{currentUser:t}=La(),[e,r]=S.useState([]),[n,s]=S.useState([]),[i,o]=S.useState(!0),[l,u]=S.useState(""),[h,f]=S.useState("all"),[p,g]=S.useState([]),[y,w]=S.useState(!1),[b,_]=S.useState(!1),[P,A]=S.useState(!1),[k,F]=S.useState(!1),[L,I]=S.useState(null);S.useEffect(()=>{N()},[]),S.useEffect(()=>{let H=e;h!=="all"&&(H=H.filter(Q=>Q.role===h)),l&&(H=H.filter(Q=>{var q,ae,U,M;return((q=Q.displayName)==null?void 0:q.toLowerCase().includes(l.toLowerCase()))||((ae=Q.email)==null?void 0:ae.toLowerCase().includes(l.toLowerCase()))||((U=Q.firstName)==null?void 0:U.toLowerCase().includes(l.toLowerCase()))||((M=Q.lastName)==null?void 0:M.toLowerCase().includes(l.toLowerCase()))})),s(H)},[e,l,h]);const N=async()=>{try{o(!0);const H=Ft(ze,"users"),Q=await zt(H),q=[];Q.forEach(ae=>{var X,K,Y,xe,le,fe;const U=ae.data(),M=ae.id;q.push({uid:M,documentId:M,...U,createdAt:((K=(X=U.createdAt)==null?void 0:X.toDate)==null?void 0:K.call(X))||U.createdAt||new Date,lastLogin:((xe=(Y=U.lastLogin)==null?void 0:Y.toDate)==null?void 0:xe.call(Y))||U.lastLogin||new Date,updatedAt:((fe=(le=U.updatedAt)==null?void 0:le.toDate)==null?void 0:fe.call(le))||U.updatedAt||new Date})}),q.sort((ae,U)=>{const M=ae.displayName||ae.email||"",X=U.displayName||U.email||"";return M.localeCompare(X)}),r(q),o(!1)}catch(H){console.error("Error loading users:",H),Ie.error("   "),o(!1)}},T=H=>{g(Q=>Q.includes(H)?Q.filter(q=>q!==H):[...Q,H])},R=()=>{p.length===n.length?g([]):g(n.map(H=>H.uid))},B=H=>{I(H),A(!0)},z=H=>{I(H),F(!0)},O=()=>{if(p.length===0){Ie.error("   ");return}A(!0)},D=()=>{const H=e.length,Q=e.filter(U=>U.role==="student").length,q=e.filter(U=>U.role==="teacher").length,ae=e.filter(U=>U.role==="student"&&!U.teacherId).length;return{totalUsers:H,students:Q,teachers:q,unassignedStudents:ae}},ie=H=>new Date(H).toLocaleDateString("he-IL",{year:"numeric",month:"short",day:"numeric"}),Z=H=>{const Q={student:{label:"",icon:Df,color:"text-green-400"},teacher:{label:"",icon:Qn,color:"text-blue-400"},system_manager:{label:" ",icon:Qn,color:"text-purple-400"}};return Q[H]||Q.student};if(i)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(Jn,{size:"lg"})});const ne=D();return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:" "}),a.jsx("p",{className:"text-gray-300",children:" ,  "})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(ut,{onClick:N,variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Cs,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsxs(ut,{onClick:()=>w(!0),variant:"primary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(sg,{className:"w-4 h-4"}),a.jsx("span",{children:"  "})]}),a.jsxs(ut,{onClick:()=>_(!0),variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Cr,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Cr,{className:"w-8 h-8 mx-auto mb-2 text-blue-400"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:ne.totalUsers}),a.jsx("div",{className:"text-sm text-gray-300",children:'" '})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Df,{className:"w-8 h-8 mx-auto mb-2 text-green-400"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:ne.students}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Qn,{className:"w-8 h-8 mx-auto mb-2 text-purple-400"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:ne.teachers}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx(YB,{className:"w-8 h-8 mx-auto mb-2 text-orange-400"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:ne.unassignedStudents}),a.jsx("div",{className:"text-sm text-gray-300",children:"  "})]})})]}),a.jsx(rt,{variant:"dark",children:a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"  , ...",value:l,onChange:H=>u(H.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none"})]})}),a.jsx("div",{className:"md:w-48",children:a.jsxs("select",{value:h,onChange:H=>f(H.target.value),className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"all",children:" "}),a.jsx("option",{value:"student",children:""}),a.jsx("option",{value:"teacher",children:""}),a.jsx("option",{value:"system_manager",children:" "})]})}),p.length>0&&a.jsx("div",{className:"flex space-x-2",children:a.jsxs(ut,{onClick:O,variant:"danger",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(da,{className:"w-4 h-4"}),a.jsxs("span",{children:["  (",p.length,")"]})]})})]})})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-700",children:[a.jsx("th",{className:"text-right p-4",children:a.jsx("input",{type:"checkbox",checked:p.length===n.length&&n.length>0,onChange:R,className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-500"})}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:""}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:""}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:""}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:" "}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:" "}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:""})]})}),a.jsx("tbody",{children:n.map(H=>{var ae,U,M;const Q=Z(H.role),q=p.includes(H.uid);return a.jsxs(Ke.tr,{initial:{opacity:0},animate:{opacity:1},className:"border-b border-gray-700 hover:bg-gray-700/50 transition-colors",children:[a.jsx("td",{className:"p-4",children:a.jsx("input",{type:"checkbox",checked:q,onChange:()=>T(H.uid),className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-500"})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium",children:((ae=H.displayName)==null?void 0:ae.charAt(0))||((U=H.email)==null?void 0:U.charAt(0))})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white font-medium",children:H.displayName}),a.jsx("div",{className:"text-gray-400 text-sm",children:H.email})]})]})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:`flex items-center space-x-2 ${Q.color}`,children:[a.jsx(Q.icon,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:Q.label})]})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"text-sm text-gray-300",children:[H.role==="student"&&a.jsxs("div",{children:[a.jsxs("div",{children:[": ",H.age||" "]}),a.jsxs("div",{children:[": ",H.sex==="male"?"":""]}),H.teacherId&&a.jsx("div",{className:"text-green-400",children:" "})]}),H.role==="teacher"&&a.jsx("div",{children:a.jsxs("div",{children:[": ",((M=H.teacherClasses)==null?void 0:M.length)||0]})})]})}),a.jsx("td",{className:"p-4 text-sm text-gray-300",children:ie(H.createdAt)}),a.jsx("td",{className:"p-4 text-sm text-gray-300",children:ie(H.lastLogin)}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(ut,{onClick:()=>z(H),variant:"secondary",size:"sm",className:"flex items-center space-x-1",children:[a.jsx(M2,{className:"w-3 h-3"}),a.jsx("span",{children:""})]}),a.jsxs(ut,{onClick:()=>B(H),variant:"danger",size:"sm",className:"flex items-center space-x-1",children:[a.jsx(da,{className:"w-3 h-3"}),a.jsx("span",{children:""})]})]})})]},H.uid)})})]}),n.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Cr,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-400",children:"  "})]})]})}),a.jsxs(vn,{children:[b&&a.jsx(Uq,{onClose:()=>_(!1),onSuccess:()=>{_(!1),N(),Ie.success("  ")}}),P&&a.jsx(zq,{user:L,onClose:()=>A(!1),onSuccess:()=>{A(!1),I(null),g([]),N(),Ie.success("  ")}}),k&&a.jsx($q,{user:L,onClose:()=>F(!1),onSuccess:()=>{F(!1),I(null),N(),Ie.success("  ")}}),a.jsx(Bq,{isOpen:y,onClose:()=>w(!1),onSuccess:()=>{w(!1),N()}})]})]})},Hq=({slide:t,onSave:e,onCancel:r})=>{var Re;const[n,s]=S.useState(t||{}),[i,o]=S.useState(null),[l,u]=S.useState(!1),[h,f]=S.useState(!0),[p,g]=S.useState(!1),[y,w]=S.useState("gradient"),[b,_]=S.useState(null),[P,A]=S.useState(!1),[k,F]=S.useState("content"),[L,I]=S.useState(!1),[N,T]=S.useState(null),[R,B]=S.useState(null);S.useRef(null),S.useEffect(()=>{if(t)try{s({...t,content:t.content||{elements:[]}}),T(null)}catch(he){console.error("Error initializing slide:",he),T("Failed to load slide data. Please try again.")}},[t]);const z=he=>{const me=O(he);s({...n,type:he,content:me})},O=he=>{switch(he){case"presentation":return{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",elements:[{type:"title",text:" ",style:{fontSize:"3rem",color:"white",textAlign:"center",marginBottom:"2rem"}}]};case"poll":return{question:"  ",options:[{id:1,text:" 1",emoji:""},{id:2,text:" 2",emoji:""},{id:3,text:" 3",emoji:""},{id:4,text:" 4",emoji:""}],allowMultiple:!1,showResults:!0,duration:120};case"quiz":return{questions:[{id:1,question:"  ",options:[{id:"a",text:" "},{id:"b",text:" "},{id:"c",text:" "},{id:"d",text:" "}],correctAnswer:"a",explanation:"  "}],passingScore:70,showResults:!0,duration:300};case"video":return{description:" ",videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ",autoplay:!1,showControls:!0,duration:180};case"interactive":return{type:"drag-drop",instructions:" ",categories:[{id:"cat1",name:" 1",color:"#4CAF50"},{id:"cat2",name:" 2",color:"#2196F3"}],items:[{id:1,text:" 1",correctCategory:"cat1"},{id:2,text:" 2",correctCategory:"cat2"}]};case"break":return{duration:300,message:" !",activities:["  "," ","  "]};case"reflection":return{question:"  ?",placeholder:"    ...",minWords:10,maxWords:200,duration:180};default:return{}}},D=(he,me)=>{try{if(T(null),he==="type")s(ee=>({...ee,type:me,content:{...ee.content,type:me==="interactive"?"drag-drop":void 0}}));else if(he.startsWith("content.")){const ee=he.replace("content.","");s(pe=>({...pe,content:{...pe.content,[ee]:me}}))}else s(ee=>({...ee,[he]:me}))}catch(ee){console.error(" Error updating content:",ee),T(`Failed to update content: ${ee.message}`)}},ie=(he,me)=>{const ee=[...n.content.elements];ee[he]={...ee[he],...me},s({...n,content:{...n.content,elements:ee}})},Z=he=>{const me={type:he,text:he==="title"?" ":" ",style:{fontSize:he==="title"?"3rem":"1.5rem",color:"white",textAlign:"center",direction:"rtl",fontFamily:"Arial, sans-serif",fontWeight:he==="title"?"bold":"normal"}};s({...n,content:{...n.content,elements:[...n.content.elements||[],me]}})},ne=he=>{const me=(n.content.elements||[]).filter((ee,pe)=>pe!==he);s({...n,content:{...n.content,elements:me}}),o(null)},H=(he,me,ee)=>{const pe=[...n.content.options];pe[he]={...pe[he],[me]:ee},D("options",pe)},Q=()=>{const he={id:Date.now(),text:" ",emoji:""},me=[...n.content.options||[],he];D("options",me)},q=he=>{const me=(n.content.options||[]).filter((ee,pe)=>pe!==he);D("options",me)},ae=(he,me,ee)=>{const pe=[...n.content.questions];pe[he]={...pe[he],[me]:ee},D("questions",pe)},U=()=>{const he={id:Date.now(),question:" ",options:[{id:"a",text:" "},{id:"b",text:" "},{id:"c",text:" "},{id:"d",text:" "}],correctAnswer:"a",explanation:"  "},me=[...n.content.questions||[],he];D("questions",me)},M=he=>{const me=(n.content.questions||[]).filter((ee,pe)=>pe!==he);D("questions",me)},X=he=>{s({...n,content:{...n.content,background:he}})},K=async()=>{var he;try{if(A(!0),T(null),B(null),!n.title||n.title.trim()==="")throw new Error("Slide title is required");if(!n.type)throw new Error("Slide type is required");if(n.type==="interactive"&&((he=n.content)!=null&&he.type)&&!["windows-simulator","linux-simulator","network-simulator","protocol-simulator","code-editor","website-builder","database-simulator","browser-simulator","drag-drop","matching","multiple-choice"].includes(n.content.type))throw new Error(`Invalid interactive type: ${n.content.type}`);console.log(" Saving slide with data:",n),await e(n),B("Slide saved successfully!"),setTimeout(()=>B(null),3e3)}catch(me){console.error(" Error saving slide:",me),T(`Failed to save slide: ${me.message}`)}finally{A(!1)}},Y=()=>{const he={...n};switch(n.type){case"presentation":return a.jsx(Pd,{slide:he});case"poll":return a.jsx(k0,{slide:he,onAnswer:()=>{},answers:{}});case"quiz":return a.jsx(I0,{slide:he,onAnswer:()=>{},answers:{}});case"video":return a.jsx(T0,{slide:he,onAnswer:()=>{},answers:{}});case"interactive":return a.jsx(j0,{slide:he,onAnswer:()=>{},answers:{}});case"break":return a.jsx(A0,{slide:he});case"reflection":return a.jsx(C0,{slide:he,onAnswer:()=>{},answers:{}});default:return a.jsx("div",{className:"text-white p-8",children:"   "})}},xe=()=>{var he,me,ee;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Background"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Type"}),a.jsxs("select",{value:y,onChange:pe=>w(pe.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[a.jsx("option",{value:"gradient",children:"Gradient"}),a.jsx("option",{value:"solid",children:"Solid Color"}),a.jsx("option",{value:"image",children:"Image"})]})]}),y==="gradient"&&a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("button",{onClick:()=>X("linear-gradient(135deg, #667eea 0%, #764ba2 100%)"),className:"h-12 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 hover:scale-105 transition-transform"}),a.jsx("button",{onClick:()=>X("linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"),className:"h-12 rounded-lg bg-gradient-to-br from-pink-400 to-red-500 hover:scale-105 transition-transform"}),a.jsx("button",{onClick:()=>X("linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"),className:"h-12 rounded-lg bg-gradient-to-br from-blue-400 to-cyan-400 hover:scale-105 transition-transform"}),a.jsx("button",{onClick:()=>X("linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"),className:"h-12 rounded-lg bg-gradient-to-br from-green-400 to-teal-400 hover:scale-105 transition-transform"})]}),y==="solid"&&a.jsx("input",{type:"color",value:((he=n.content)==null?void 0:he.background)||"#667eea",onChange:pe=>X(pe.target.value),className:"w-full h-12 rounded-lg border border-gray-600"})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Elements"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>Z("title"),className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:a.jsx(ud,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Z("text"),className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:a.jsx(B3,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"space-y-4",children:(ee=(me=n.content)==null?void 0:me.elements)==null?void 0:ee.map((pe,Ce)=>{var $e,ot,xt;return a.jsxs("div",{className:`p-3 rounded-lg border-2 transition-all ${i===Ce?"border-blue-500 bg-blue-900 bg-opacity-20":"border-gray-600 hover:border-gray-500"}`,onClick:()=>o(Ce),children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-xs text-gray-400 uppercase",children:pe.type==="title"?"":""}),a.jsx("button",{onClick:Nt=>{Nt.stopPropagation(),ne(Ce)},className:"p-1 text-red-400 hover:text-red-300",children:a.jsx(da,{className:"w-3 h-3"})})]}),a.jsx("input",{type:"text",value:pe.text,onChange:Nt=>ie(Ce,{text:Nt.target.value}),className:"w-full bg-transparent text-white border-none outline-none",style:{fontSize:(($e=pe.style)==null?void 0:$e.fontSize)||"1.5rem"}}),i===Ce&&a.jsx("div",{className:"mt-3 p-3 bg-gray-700 rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:" "}),a.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:parseFloat(((ot=pe.style)==null?void 0:ot.fontSize)||"1.5rem"),onChange:Nt=>ie(Ce,{style:{...pe.style,fontSize:`${Nt.target.value}rem`}}),className:"w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:""}),a.jsx("input",{type:"color",value:((xt=pe.style)==null?void 0:xt.color)||"#ffffff",onChange:Nt=>ie(Ce,{style:{...pe.style,color:Nt.target.value}}),className:"w-full h-8 rounded border border-gray-600"})]})]})})]},`element-${Ce}-${pe.type}-${pe.id||Ce}`)})})]})]})},le=()=>{var he,me,ee,pe,Ce;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Question"}),a.jsx("input",{type:"text",value:((he=n.content)==null?void 0:he.question)||"",onChange:$e=>D("question",$e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"Enter your poll question..."})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Options"}),a.jsx("button",{onClick:Q,className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:a.jsx(ud,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"space-y-3",children:(ee=(me=n.content)==null?void 0:me.options)==null?void 0:ee.map(($e,ot)=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-700 rounded-lg",children:[a.jsx("input",{type:"text",value:$e.emoji,onChange:xt=>H(ot,"emoji",xt.target.value),className:"w-16 bg-gray-600 border border-gray-500 rounded px-2 py-1 text-center",placeholder:""}),a.jsx("input",{type:"text",value:$e.text,onChange:xt=>H(ot,"text",xt.target.value),className:"flex-1 bg-gray-600 border border-gray-500 rounded px-3 py-1 text-white",placeholder:"Option text..."}),a.jsx("button",{onClick:()=>q(ot),className:"p-1 text-red-400 hover:text-red-300",children:a.jsx(da,{className:"w-4 h-4"})})]},`option-${ot}-${$e.id||$e.text||ot}`))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (seconds)"}),a.jsx("input",{type:"number",value:((pe=n.content)==null?void 0:pe.duration)||120,onChange:$e=>D("duration",parseInt($e.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Allow Multiple"}),a.jsx("input",{type:"checkbox",checked:((Ce=n.content)==null?void 0:Ce.allowMultiple)||!1,onChange:$e=>D("allowMultiple",$e.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded"})]})]})]})},fe=()=>{var he,me,ee,pe;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Questions"}),a.jsx("button",{onClick:U,className:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:a.jsx(ud,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"space-y-4",children:(me=(he=n.content)==null?void 0:he.questions)==null?void 0:me.map((Ce,$e)=>{var ot;return a.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-300",children:["Question ",$e+1]}),a.jsx("button",{onClick:()=>M($e),className:"p-1 text-red-400 hover:text-red-300",children:a.jsx(da,{className:"w-4 h-4"})})]}),a.jsx("input",{type:"text",value:Ce.question,onChange:xt=>ae($e,"question",xt.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white mb-3",placeholder:"Enter question..."}),a.jsx("div",{className:"space-y-2",children:(ot=Ce.options)==null?void 0:ot.map((xt,Nt)=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"radio",name:`correct-${$e}`,checked:Ce.correctAnswer===xt.id,onChange:()=>ae($e,"correctAnswer",xt.id),className:"w-4 h-4 text-blue-600 bg-gray-600 border-gray-500"}),a.jsx("input",{type:"text",value:xt.text,onChange:Me=>{const be=[...Ce.options];be[Nt]={...be[Nt],text:Me.target.value},ae($e,"options",be)},className:"flex-1 bg-gray-600 border border-gray-500 rounded px-3 py-1 text-white",placeholder:`Option ${xt.id}`})]},`option-${$e}-${Nt}-${xt.id||xt.text||Nt}`))}),a.jsx("input",{type:"text",value:Ce.explanation,onChange:xt=>ae($e,"explanation",xt.target.value),className:"w-full bg-gray-600 border border-gray-500 rounded px-3 py-2 text-white mt-3",placeholder:"Explanation for correct answer..."})]},`question-${$e}-${Ce.id||Ce.question||$e}`)})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Passing Score (%)"}),a.jsx("input",{type:"number",value:((ee=n.content)==null?void 0:ee.passingScore)||70,onChange:Ce=>D("passingScore",parseInt(Ce.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (seconds)"}),a.jsx("input",{type:"number",value:((pe=n.content)==null?void 0:pe.duration)||300,onChange:Ce=>D("duration",parseInt(Ce.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]})]})]})},ve=()=>{var he,me,ee,pe;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Video URL"}),a.jsx("input",{type:"text",value:((he=n.content)==null?void 0:he.videoUrl)||"",onChange:Ce=>D("videoUrl",Ce.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"https://www.youtube.com/embed/..."}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Use YouTube embed URLs (e.g., https://www.youtube.com/embed/VIDEO_ID)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),a.jsx("textarea",{value:((me=n.content)==null?void 0:me.description)||"",onChange:Ce=>D("description",Ce.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white h-20 resize-none",placeholder:"Describe the video content..."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (seconds)"}),a.jsx("input",{type:"number",value:((ee=n.content)==null?void 0:ee.duration)||180,onChange:Ce=>D("duration",parseInt(Ce.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Autoplay"}),a.jsx("input",{type:"checkbox",checked:((pe=n.content)==null?void 0:pe.autoplay)||!1,onChange:Ce=>D("autoplay",Ce.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded"})]})]})]})},we=()=>{var he,me,ee,pe,Ce,$e;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Exercise Type"}),a.jsxs("select",{value:((he=n.content)==null?void 0:he.type)||"drag-drop",onChange:ot=>D("type",ot.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[a.jsx("option",{value:"drag-drop",children:"Click-Based Exercise"}),a.jsx("option",{value:"matching",children:"Matching"}),a.jsx("option",{value:"multiple-choice",children:"Multiple Choice"}),a.jsx("option",{value:"windows-simulator",children:"Windows Simulator"}),a.jsx("option",{value:"linux-simulator",children:"Linux Simulator"}),a.jsx("option",{value:"network-simulator",children:"Network Simulator"}),a.jsx("option",{value:"protocol-simulator",children:"Protocol Simulator"}),a.jsx("option",{value:"code-editor",children:"Code Editor"}),a.jsx("option",{value:"website-builder",children:"Website Builder"}),a.jsx("option",{value:"database-simulator",children:"Database Simulator"}),a.jsx("option",{value:"browser-simulator",children:"Browser Simulator"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Instructions"}),a.jsx("textarea",{value:((me=n.content)==null?void 0:me.instructions)||"",onChange:ot=>D("instructions",ot.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white h-20 resize-none",placeholder:"Enter exercise instructions..."})]}),(((ee=n.content)==null?void 0:ee.type)==="drag-drop"||((pe=n.content)==null?void 0:pe.type)==="matching")&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Categories"}),a.jsx("div",{className:"space-y-3",children:($e=(Ce=n.content)==null?void 0:Ce.categories)==null?void 0:$e.map((ot,xt)=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-700 rounded-lg",children:[a.jsx("input",{type:"text",value:ot.name,onChange:Nt=>{const Me=[...n.content.categories];Me[xt]={...Me[xt],name:Nt.target.value},D("categories",Me)},className:"flex-1 bg-gray-600 border border-gray-500 rounded px-3 py-1 text-white",placeholder:"Category name..."}),a.jsx("input",{type:"color",value:ot.color,onChange:Nt=>{const Me=[...n.content.categories];Me[xt]={...Me[xt],color:Nt.target.value},D("categories",Me)},className:"w-12 h-8 rounded border border-gray-600"})]},xt))})]})]})},We=()=>{var he,me,ee,pe;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Break Message"}),a.jsx("input",{type:"text",value:((he=n.content)==null?void 0:he.message)||"",onChange:Ce=>D("message",Ce.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"Time for a break!"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (seconds)"}),a.jsx("input",{type:"number",value:((me=n.content)==null?void 0:me.duration)||300,onChange:Ce=>D("duration",parseInt(Ce.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Suggested Activities"}),a.jsx("textarea",{value:((pe=(ee=n.content)==null?void 0:ee.activities)==null?void 0:pe.join(`
`))||"",onChange:Ce=>D("activities",Ce.target.value.split(`
`).filter($e=>$e.trim())),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white h-20 resize-none",placeholder:"Enter suggested activities (one per line)..."})]})]})},re=()=>{var he,me,ee,pe,Ce;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reflection Question"}),a.jsx("input",{type:"text",value:((he=n.content)==null?void 0:he.question)||"",onChange:$e=>D("question",$e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"What did you learn today?"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Placeholder Text"}),a.jsx("input",{type:"text",value:((me=n.content)==null?void 0:me.placeholder)||"",onChange:$e=>D("placeholder",$e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"Write your thoughts here..."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min Words"}),a.jsx("input",{type:"number",value:((ee=n.content)==null?void 0:ee.minWords)||10,onChange:$e=>D("minWords",parseInt($e.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Words"}),a.jsx("input",{type:"number",value:((pe=n.content)==null?void 0:pe.maxWords)||200,onChange:$e=>D("maxWords",parseInt($e.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (seconds)"}),a.jsx("input",{type:"number",value:((Ce=n.content)==null?void 0:Ce.duration)||180,onChange:$e=>D("duration",parseInt($e.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]})]})},st=({children:he})=>{const[me,ee]=S.useState(null);if(me)return a.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-6 text-center",children:[a.jsx(vs,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-red-200 mb-2",children:"Preview Error"}),a.jsx("p",{className:"text-red-300 mb-4",children:"Failed to render slide preview due to an error."}),a.jsxs("button",{onClick:()=>ee(null),className:"flex items-center space-x-2 bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 transition-colors mx-auto",children:[a.jsx(Cs,{className:"w-4 h-4"}),a.jsx("span",{children:"Retry Preview"})]})]});try{return a.jsx("div",{onError:pe=>{console.error("Preview error:",pe),ee(pe)},children:he})}catch(pe){return console.error("Preview rendering error:",pe),ee(pe),null}};return a.jsxs("div",{className:"min-h-screen bg-gray-900 flex",children:[a.jsxs("div",{className:"w-96 bg-gray-800 border-r border-gray-700 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:t!=null&&t.id?"Edit Slide":"Create Slide"}),a.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-white transition-colors",children:a.jsx(zr,{className:"w-5 h-5"})})]}),a.jsxs(vn,{children:[N&&a.jsxs(Ke.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 bg-red-900/50 border border-red-500 text-red-200 px-3 py-2 rounded-lg flex items-center space-x-2",children:[a.jsx(To,{className:"w-4 h-4"}),a.jsx("span",{className:"flex-1 text-sm",children:N}),a.jsx("button",{onClick:()=>T(null),className:"text-red-300 hover:text-red-100",children:a.jsx(zr,{className:"w-3 h-3"})})]}),R&&a.jsxs(Ke.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 bg-green-900/50 border border-green-500 text-green-200 px-3 py-2 rounded-lg flex items-center space-x-2",children:[a.jsx(ux,{className:"w-4 h-4"}),a.jsx("span",{className:"flex-1 text-sm",children:R}),a.jsx("button",{onClick:()=>B(null),className:"text-green-300 hover:text-green-100",children:a.jsx(zr,{className:"w-3 h-3"})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),a.jsx("input",{type:"text",value:n.title||"",onChange:he=>D("title",he.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"Enter slide title..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Type"}),a.jsxs("select",{value:n.type||"presentation",onChange:he=>z(he.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[a.jsx("option",{value:"presentation",children:"Presentation"}),a.jsx("option",{value:"poll",children:"Poll"}),a.jsx("option",{value:"quiz",children:"Quiz"}),a.jsx("option",{value:"video",children:"Video"}),a.jsx("option",{value:"interactive",children:"Interactive"}),a.jsx("option",{value:"break",children:"Break"}),a.jsx("option",{value:"reflection",children:"Reflection"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Order"}),a.jsx("input",{type:"number",value:n.order||1,onChange:he=>D("order",parseInt(he.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",min:"1"})]})]})]}),a.jsx("div",{className:"flex border-b border-gray-700",children:["content","style","json"].map(he=>a.jsx("button",{onClick:()=>F(he),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${k===he?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,children:he.charAt(0).toUpperCase()+he.slice(1)},he))}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[k==="content"&&a.jsxs("div",{className:"space-y-6",children:[n.type==="presentation"&&xe(),n.type==="poll"&&le(),n.type==="quiz"&&fe(),n.type==="video"&&ve(),n.type==="interactive"&&we(),n.type==="break"&&We(),n.type==="reflection"&&re()]}),k==="style"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Background"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)","linear-gradient(135deg, #fa709a 0%, #fee140 100%)","linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)"].map(he=>{var me;return a.jsx("button",{onClick:()=>X(he),className:`w-full h-12 rounded-lg border-2 transition-all ${((me=n.content)==null?void 0:me.background)===he?"border-blue-400 scale-105":"border-gray-600 hover:border-gray-500"}`,style:{background:he}},he)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Background"}),a.jsx("input",{type:"text",value:((Re=n.content)==null?void 0:Re.background)||"",onChange:he=>X(he.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",placeholder:"Enter CSS background value..."})]})]}),k==="json"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"JSON Editor"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>{try{const he=JSON.stringify(n,null,2);navigator.clipboard.writeText(he),B("JSON copied to clipboard!"),setTimeout(()=>B(null),2e3)}catch(he){T("Failed to copy JSON: "+he.message)}},className:"p-2 text-gray-400 hover:text-white transition-colors",title:"Copy JSON",children:a.jsx(C2,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{try{const he=JSON.stringify(n,null,2),me=new Blob([he],{type:"application/json"}),ee=URL.createObjectURL(me),pe=document.createElement("a");pe.href=ee,pe.download=`slide-${n.title||"untitled"}.json`,pe.click(),URL.revokeObjectURL(ee),B("JSON downloaded!"),setTimeout(()=>B(null),2e3)}catch(he){T("Failed to download JSON: "+he.message)}},className:"p-2 text-gray-400 hover:text-white transition-colors",title:"Download JSON",children:a.jsx(fx,{className:"w-4 h-4"})})]})]}),a.jsx("textarea",{value:JSON.stringify(n,null,2),onChange:he=>{try{const me=JSON.parse(he.target.value);s(me),T(null)}catch(me){T("Invalid JSON: "+me.message)}},className:"w-full h-64 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white font-mono text-sm resize-none",placeholder:"Enter valid JSON..."}),N&&a.jsxs("div",{className:"text-red-400 text-sm",children:[a.jsx(vs,{className:"w-4 h-4 inline mr-1"}),N]})]})]}),a.jsx("div",{className:"p-6 border-t border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>I(!L),className:"flex items-center space-x-2 text-gray-400 hover:text-white transition-colors",children:[a.jsx(Da,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm",children:[L?"Hide":"Show"," Preview"]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),a.jsx("button",{onClick:K,disabled:P,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:P?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Saving..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Yd,{className:"w-4 h-4"}),a.jsx("span",{children:"Save"})]})})]})]})})]}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx("div",{className:"bg-gray-800 border-b border-gray-700 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Slide Preview"}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("button",{onClick:()=>I(!L),className:"flex items-center space-x-2 bg-gray-700 text-white px-3 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:[a.jsx(Da,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm",children:[L?"Hide":"Show"," Preview"]})]})})]})}),a.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:a.jsx("div",{className:"w-full max-w-4xl h-full",children:a.jsx(st,{children:Y()})})})]})]})},Wq=[{id:"cyber-shield",url:"https://img.icons8.com/color/96/cyber-security.png",name:"Cyber Shield"},{id:"hacker",url:"https://img.icons8.com/color/96/hacker.png",name:"Hacker"},{id:"computer",url:"https://img.icons8.com/color/96/computer.png",name:"Computer"},{id:"network",url:"https://img.icons8.com/color/96/network.png",name:"Network"},{id:"database",url:"https://img.icons8.com/color/96/database.png",name:"Database"},{id:"code",url:"https://img.icons8.com/color/96/code.png",name:"Code"},{id:"browser",url:"https://img.icons8.com/color/96/browser.png",name:"Browser"},{id:"server",url:"https://img.icons8.com/color/96/server.png",name:"Server"},{id:"book",url:"https://img.icons8.com/color/96/book.png",name:"Book"},{id:"graduation-cap",url:"https://img.icons8.com/color/96/graduation-cap.png",name:"Graduation"},{id:"lightbulb",url:"https://img.icons8.com/color/96/lightbulb.png",name:"Idea"},{id:"target",url:"https://img.icons8.com/color/96/target.png",name:"Target"},{id:"trophy",url:"https://img.icons8.com/color/96/trophy.png",name:"Trophy"},{id:"star",url:"https://img.icons8.com/color/96/star.png",name:"Star"},{id:"arrow-right",url:"https://img.icons8.com/color/96/arrow-right.png",name:"Arrow"},{id:"check-circle",url:"https://img.icons8.com/color/96/check-circle.png",name:"Check"},{id:"warning",url:"https://img.icons8.com/color/96/warning.png",name:"Warning"},{id:"info",url:"https://img.icons8.com/color/96/info.png",name:"Info"},{id:"question",url:"https://img.icons8.com/color/96/question.png",name:"Question"},{id:"settings",url:"https://img.icons8.com/color/96/settings.png",name:"Settings"},{id:"gear",url:"https://img.icons8.com/color/96/gear.png",name:"Gear"},{id:"lock",url:"https://img.icons8.com/color/96/lock.png",name:"Lock"},{id:"key",url:"https://img.icons8.com/color/96/key.png",name:"Key"}],qq={codeEditor:{name:"Code Editor",template:{type:"interactive",component:"CodeEditor",content:{language:"javascript",code:'console.log("Hello, World!");',theme:"vs-dark",readOnly:!1}}},dragDrop:{name:"Click-Based Exercise",template:{type:"interactive",component:"DragDropExercise",content:{items:[{id:"1",text:"Item 1",correctCategory:"A"},{id:"2",text:"Item 2",correctCategory:"B"}],categories:[{id:"A",name:"Category A",color:"#4CAF50",description:"First category"},{id:"B",name:"Category B",color:"#2196F3",description:"Second category"}]}}},quiz:{name:"Interactive Quiz",template:{type:"interactive",component:"MultipleChoiceExercise",content:{question:"What is cybersecurity?",options:[{id:"a",text:"Protecting computers",correct:!0},{id:"b",text:"Breaking into systems",correct:!1},{id:"c",text:"Playing games",correct:!1}]}}},simulator:{name:"Simulator",template:{type:"interactive",component:"BrowserSimulator",content:{url:"https://example.com",allowNavigation:!0,showConsole:!0}}}},Gq=({slide:t,onSave:e,onCancel:r})=>{var H,Q,q,ae;const[n,s]=S.useState(t||{}),[i,o]=S.useState("visual"),[l,u]=S.useState(!1),[h,f]=S.useState(!1),[p,g]=S.useState(null),[y,w]=S.useState(null),[b,_]=S.useState([]),[P,A]=S.useState(-1),k=S.useRef(null);S.useEffect(()=>{n.id||s({id:`slide-${Date.now()}`,title:" ",type:"presentation",content:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",elements:[{id:"title-1",type:"title",text:" ",style:{fontSize:"3rem",color:"white",textAlign:"center",direction:"rtl",fontFamily:"Arial, sans-serif",position:"absolute",top:"20%",left:"50%",transform:"translateX(-50%)"}}]}}),F(n)},[]);const F=U=>{const M=b.slice(0,P+1);M.push(JSON.parse(JSON.stringify(U))),_(M),A(M.length-1)},L=()=>{P>0&&(A(P-1),s(JSON.parse(JSON.stringify(b[P-1]))))},I=()=>{P<b.length-1&&(A(P+1),s(JSON.parse(JSON.stringify(b[P+1]))))},N=U=>{s(U),F(U),w(null)},T=U=>{try{const M=JSON.parse(U);N(M),w(null)}catch(M){w(M.message)}},R=U=>{const M={id:`image-${Date.now()}`,type:"image",src:U.url,alt:U.name,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"200px",height:"200px",cursor:"move",userSelect:"none"}},X={...n,content:{...n.content,elements:[...n.content.elements,M]}};N(X),u(!1)},B=U=>{g(U)},z=(U,M)=>{const X=n.content.elements.map(Y=>Y.id===U?{...Y,style:{...Y.style,top:`${M.y}px`,left:`${M.x}px`}}:Y),K={...n,content:{...n.content,elements:X}};N(K)},O=(U,M)=>{const X=n.content.elements.map(Y=>Y.id===U?{...Y,style:{...Y.style,width:`${M.width}px`,height:`${M.height}px`}}:Y),K={...n,content:{...n.content,elements:X}};N(K)},D=U=>{var X;const M=(((X=n.content)==null?void 0:X.elements)||[]).filter(K=>K.id!==U);s({...n,content:{...n.content,elements:M}}),g(null)},ie=()=>{const U={id:`text-${Date.now()}`,type:"text",text:" ",style:{position:"absolute",top:"30%",left:"50%",transform:"translateX(-50%)",fontSize:"1.5rem",color:"white",textAlign:"center",direction:"rtl",fontFamily:"Arial, sans-serif",cursor:"move",userSelect:"none"}},M={...n,content:{...n.content,elements:[...n.content.elements,U]}};N(M)},Z=U=>{const M={...n,type:U.template.type,content:U.template.content};N(M),f(!1)},ne=()=>{if(y){alert("Please fix JSON errors before saving");return}e(n)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-gray-900 rounded-lg shadow-2xl w-full max-w-7xl h-full max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"bg-gray-800 px-6 py-4 rounded-t-lg flex items-center justify-between border-b border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"  "}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>o("visual"),className:`px-3 py-1 rounded ${i==="visual"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"}`,children:a.jsx(HB,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>o("json"),className:`px-3 py-1 rounded ${i==="json"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"}`,children:a.jsx(Pf,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:L,disabled:P<=0,className:"p-2 rounded bg-gray-700 text-gray-300 hover:bg-gray-600 disabled:opacity-50",children:a.jsx(XB,{className:"w-4 h-4"})}),a.jsx("button",{onClick:I,disabled:P>=b.length-1,className:"p-2 rounded bg-gray-700 text-gray-300 hover:bg-gray-600 disabled:opacity-50",children:a.jsx(WB,{className:"w-4 h-4"})}),a.jsxs("button",{onClick:ne,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center space-x-2",children:[a.jsx(Yd,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsx("button",{onClick:r,className:"p-2 rounded bg-gray-700 text-gray-300 hover:bg-gray-600",children:a.jsx(zr,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[a.jsxs("div",{className:"w-80 bg-gray-800 border-r border-gray-700 flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" "}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:""}),a.jsx("input",{type:"text",value:n.title||"",onChange:U=>N({...n,title:U.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:""}),a.jsxs("select",{value:n.type||"presentation",onChange:U=>N({...n,type:U.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",children:[a.jsx("option",{value:"presentation",children:""}),a.jsx("option",{value:"poll",children:""}),a.jsx("option",{value:"quiz",children:""}),a.jsx("option",{value:"video",children:""}),a.jsx("option",{value:"interactive",children:""}),a.jsx("option",{value:"break",children:""}),a.jsx("option",{value:"reflection",children:""}),a.jsx("option",{value:"summary",children:""})]})]}),n.type==="video"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"URL "}),a.jsx("input",{type:"url",value:((H=n.content)==null?void 0:H.videoUrl)||"",onChange:U=>N({...n,content:{...n.content,videoUrl:U.target.value}}),placeholder:"https://www.youtube.com/watch?v=...",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]})]})]}),a.jsxs("div",{className:"p-4 border-b border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:""}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>u(!0),className:"w-full px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center space-x-2",children:[a.jsx(PB,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]}),a.jsxs("button",{onClick:ie,className:"w-full px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center space-x-2",children:[a.jsx(B3,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]}),n.type==="interactive"&&a.jsxs("button",{onClick:()=>f(!0),className:"w-full px-3 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 flex items-center space-x-2",children:[a.jsx(Td,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})]})]}),p&&a.jsx("div",{className:"p-4 flex-1",children:a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" "})})]}),a.jsx("div",{className:"flex-1 flex flex-col",children:i==="visual"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-1 bg-gray-900 p-4",children:a.jsx("div",{ref:k,className:"w-full h-full bg-white rounded-lg shadow-lg relative overflow-hidden",style:{background:((Q=n.content)==null?void 0:Q.background)||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:(ae=(q=n.content)==null?void 0:q.elements)==null?void 0:ae.map(U=>a.jsx(Kq,{element:U,isSelected:p===U.id,onClick:()=>B(U.id),onDrag:z,onResize:O,onDelete:D},U.id))})}),a.jsxs("div",{className:"h-32 bg-gray-800 border-t border-gray-700 p-4",children:[a.jsx("h4",{className:"text-white font-semibold mb-2",children:" "}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-sm",children:""}),a.jsx("button",{className:"px-3 py-1 bg-gray-600 text-white rounded text-sm",children:""})]})]})]}):a.jsx("div",{className:"flex-1 p-4",children:a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:" JSON"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:()=>navigator.clipboard.writeText(JSON.stringify(n,null,2)),className:"px-3 py-1 bg-gray-700 text-white rounded text-sm flex items-center space-x-1",children:[a.jsx(C2,{className:"w-3 h-3"}),a.jsx("span",{children:""})]}),a.jsxs("button",{onClick:()=>{navigator.clipboard.readText().then(U=>{try{const M=JSON.parse(U);N(M)}catch{w("Invalid JSON format")}})},className:"px-3 py-1 bg-gray-700 text-white rounded text-sm flex items-center space-x-1",children:[a.jsx(B2,{className:"w-3 h-3"}),a.jsx("span",{children:""})]})]})]}),y&&a.jsxs("div",{className:"mb-4 p-3 bg-red-900 border border-red-700 rounded text-red-200 flex items-center space-x-2",children:[a.jsx(To,{className:"w-4 h-4"}),a.jsxs("span",{children:[" JSON: ",y]})]}),a.jsx("textarea",{value:JSON.stringify(n,null,2),onChange:U=>T(U.target.value),className:"flex-1 p-4 bg-gray-800 border border-gray-600 rounded text-green-400 font-mono text-sm resize-none",placeholder:"Enter JSON here..."})]})})})]}),a.jsx(vn,{children:l&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:a.jsxs(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg p-6 max-w-4xl max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:" "}),a.jsx("button",{onClick:()=>u(!1),className:"p-2 rounded bg-gray-700 text-gray-300 hover:bg-gray-600",children:a.jsx(zr,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"grid grid-cols-4 gap-4",children:Wq.map(U=>a.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-600 transition-colors",onClick:()=>R(U),children:[a.jsx("img",{src:U.url,alt:U.name,className:"w-full h-24 object-contain mb-2"}),a.jsx("p",{className:"text-white text-sm text-center",children:U.name})]},U.id))})]})})}),a.jsx(vn,{children:h&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:a.jsxs(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg p-6 max-w-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:"  "}),a.jsx("button",{onClick:()=>f(!1),className:"p-2 rounded bg-gray-700 text-gray-300 hover:bg-gray-600",children:a.jsx(zr,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(qq).map(([U,M])=>a.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-600 transition-colors",onClick:()=>Z(M),children:[a.jsx("h4",{className:"text-white font-semibold mb-2",children:M.name}),a.jsx("p",{className:"text-gray-300 text-sm",children:"  "})]},U))})]})})})]})})},Kq=({element:t,isSelected:e,onClick:r,onDrag:n,onResize:s,onDelete:i})=>{const[o,l]=S.useState(!1),[u,h]=S.useState({x:0,y:0}),f=w=>{if(w.target.closest(".resize-handle"))return;l(!0);const b=w.currentTarget.getBoundingClientRect();h({x:w.clientX-b.left,y:w.clientY-b.top}),r()},p=w=>{if(!o)return;const b=w.clientX-u.x,_=w.clientY-u.y;n(t.id,{x:b,y:_})},g=()=>{l(!1)};S.useEffect(()=>{if(o)return document.addEventListener("mousemove",p),document.addEventListener("mouseup",g),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",g)}},[o,u]);const y=()=>{switch(t.type){case"title":case"text":return a.jsx("div",{style:t.style,className:`cursor-move ${e?"ring-2 ring-blue-500":""}`,onMouseDown:f,children:t.text});case"image":return a.jsx("div",{style:t.style,className:`cursor-move ${e?"ring-2 ring-blue-500":""}`,onMouseDown:f,children:a.jsx("img",{src:t.src,alt:t.alt,className:"w-full h-full object-contain",draggable:!1})});default:return null}};return a.jsxs("div",{className:"relative",children:[y(),e&&a.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[a.jsx("button",{onClick:()=>i(t.id),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center pointer-events-auto hover:bg-red-600",children:a.jsx(da,{className:"w-3 h-3"})}),a.jsx("div",{className:"resize-handle absolute -bottom-1 -right-1 w-3 h-3 bg-blue-500 rounded-full cursor-se-resize pointer-events-auto"}),a.jsx("div",{className:"resize-handle absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full cursor-ne-resize pointer-events-auto"}),a.jsx("div",{className:"resize-handle absolute -bottom-1 -left-1 w-3 h-3 bg-blue-500 rounded-full cursor-sw-resize pointer-events-auto"}),a.jsx("div",{className:"resize-handle absolute -top-1 -left-1 w-3 h-3 bg-blue-500 rounded-full cursor-nw-resize pointer-events-auto"})]})]})},Xq={cybersecurity:{name:"Cybersecurity Fundamentals",description:"Complete lesson on cybersecurity basics",difficulty:"beginner",duration:90,slides:[{type:"presentation",title:"  ",content:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",elements:[{type:"title",text:"  ",style:{fontSize:"3rem",color:"white",textAlign:"center",direction:"rtl",fontFamily:"Arial, sans-serif"}}]}},{type:"poll",title:"  ",content:{question:"     ?",options:["","","",""]}},{type:"video",title:"  ",content:{videoUrl:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",description:"   "}},{type:"interactive",title:" ",content:{component:"BrowserSimulator",url:"https://example.com",allowNavigation:!0,showConsole:!0}},{type:"quiz",title:" ",content:{question:"      ?",options:[{id:"a",text:"  ",correct:!1},{id:"b",text:" ",correct:!1},{id:"c",text:"  ",correct:!0},{id:"d",text:"  ",correct:!1}]}},{type:"break",title:"",content:{duration:300,message:"  "}},{type:"reflection",title:"",content:{question:"  ?",prompt:"   "}},{type:"summary",title:"",content:{points:["  "," "," "]}}]},computerBasics:{name:"Computer Basics",description:"Introduction to computer hardware and software",difficulty:"beginner",duration:60,slides:[{type:"presentation",title:" ",content:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",elements:[{type:"title",text:" ",style:{fontSize:"3rem",color:"white",textAlign:"center",direction:"rtl",fontFamily:"Arial, sans-serif"}}]}},{type:"interactive",title:" ",content:{component:"ComputerSimulator",showComponents:!0,allowInteraction:!0}},{type:"quiz",title:" ",content:{question:"     ?",options:[{id:"a",text:"RAM",correct:!1},{id:"b",text:"CPU",correct:!0},{id:"c",text:"GPU",correct:!1},{id:"d",text:"HDD",correct:!1}]}}]},networking:{name:"Networking Fundamentals",description:"Learn about computer networks and protocols",difficulty:"intermediate",duration:75,slides:[{type:"presentation",title:" ",content:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",elements:[{type:"title",text:"  ",style:{fontSize:"3rem",color:"white",textAlign:"center",direction:"rtl",fontFamily:"Arial, sans-serif"}}]}},{type:"interactive",title:" ",content:{component:"NetworkSimulator",showTopology:!0,allowConfiguration:!0}}]}},Yq=[{id:"presentation",name:"",icon:FB,color:"blue"},{id:"poll",name:"",icon:mx,color:"green"},{id:"quiz",name:"",icon:Qd,color:"purple"},{id:"video",name:"",icon:z2,color:"red"},{id:"interactive",name:"",icon:Td,color:"yellow"},{id:"break",name:"",icon:kd,color:"gray"},{id:"reflection",name:"",icon:px,color:"pink"},{id:"summary",name:"",icon:ux,color:"teal"}],Qq=({onGenerate:t,onCancel:e})=>{const[r,n]=S.useState(null),[s,i]=S.useState({title:"",description:"",difficulty:"beginner",duration:60}),[o,l]=S.useState([]),[u,h]=S.useState([]),[f,p]=S.useState(!1),[g,y]=S.useState(0),w=F=>{n(F),h(F.slides.map((L,I)=>({...L,order:I+1,id:`slide-${Date.now()}-${I}`})))},b=()=>{const F=[];o.forEach((L,I)=>{const N={id:`slide-${Date.now()}-${I}`,order:I+1,title:`${L.name} ${I+1}`,type:L.id};switch(L.id){case"presentation":F.push({...N,content:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",elements:[{type:"title",text:N.title,style:{fontSize:"3rem",color:"white",textAlign:"center",direction:"rtl",fontFamily:"Arial, sans-serif"}}]}});break;case"poll":F.push({...N,content:{question:" ",options:[" 1"," 2"," 3"," 4"]}});break;case"quiz":F.push({...N,content:{question:" ",options:[{id:"a",text:" ",correct:!1},{id:"b",text:" ",correct:!0},{id:"c",text:" ",correct:!1},{id:"d",text:" ",correct:!1}]}});break;case"video":F.push({...N,content:{videoUrl:"",description:" "}});break;case"interactive":F.push({...N,content:{component:"CodeEditor",language:"javascript",code:'console.log("Hello, World!");',theme:"vs-dark",readOnly:!1}});break;case"break":F.push({...N,content:{duration:300,message:"  "}});break;case"reflection":F.push({...N,content:{question:" ?",prompt:"   "}});break;case"summary":F.push({...N,content:{points:[" 1"," 2"," 3"]}});break;default:F.push(N)}}),h(F)},_=F=>{l(L=>L.find(I=>I.id===F.id)?L.filter(I=>I.id!==F.id):[...L,F])},P=(F,L)=>{const I=[...u],[N]=I.splice(F,1);I.splice(L,0,N),I.forEach((T,R)=>{T.order=R+1}),h(I)},A=F=>{const L=u.filter((I,N)=>N!==F);L.forEach((I,N)=>{I.order=N+1}),h(L)},k=()=>{const F={...s,slides:u,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};t(F)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-gray-900 rounded-lg shadow-2xl w-full max-w-6xl h-full max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"bg-gray-800 px-6 py-4 rounded-t-lg flex items-center justify-between border-b border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(O2,{className:"w-6 h-6 text-purple-400"}),a.jsx("h2",{className:"text-xl font-bold text-white",children:"Lesson Generator"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>p(!f),className:`px-3 py-1 rounded ${f?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"}`,children:a.jsx(Da,{className:"w-4 h-4"})}),a.jsx("button",{onClick:e,className:"p-2 rounded bg-gray-700 text-gray-300 hover:bg-gray-600",children:a.jsx(zr,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[a.jsxs("div",{className:"w-80 bg-gray-800 border-r border-gray-700 flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" "}),a.jsx("div",{className:"space-y-2",children:Object.entries(Xq).map(([F,L])=>a.jsxs("button",{onClick:()=>w(L),className:`w-full p-3 rounded-lg text-left transition-colors ${(r==null?void 0:r.name)===L.name?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[a.jsx("h4",{className:"font-semibold",children:L.name}),a.jsx("p",{className:"text-sm opacity-75",children:L.description}),a.jsxs("div",{className:"flex items-center space-x-2 mt-2 text-xs",children:[a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(Al,{className:"w-3 h-3"}),a.jsxs("span",{children:[L.duration," min"]})]}),a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(Cr,{className:"w-3 h-3"}),a.jsx("span",{children:L.difficulty})]})]})]},F))})]}),a.jsxs("div",{className:"p-4 border-b border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"  "}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",placeholder:" ",value:s.title,onChange:F=>i({...s,title:F.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"}),a.jsx("textarea",{placeholder:" ",value:s.description,onChange:F=>i({...s,description:F.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white resize-none",rows:"3"}),a.jsxs("select",{value:s.difficulty,onChange:F=>i({...s,difficulty:F.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",children:[a.jsx("option",{value:"beginner",children:""}),a.jsx("option",{value:"intermediate",children:""}),a.jsx("option",{value:"advanced",children:""})]}),a.jsx("input",{type:"number",placeholder:" ()",value:s.duration,onChange:F=>i({...s,duration:parseInt(F.target.value)||60}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]})]}),a.jsxs("div",{className:"p-4 flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" "}),a.jsx("div",{className:"space-y-2",children:Yq.map(F=>{const L=F.icon,I=o.find(N=>N.id===F.id);return a.jsxs("button",{onClick:()=>_(F),className:`w-full p-3 rounded-lg text-left transition-colors flex items-center space-x-3 ${I?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[a.jsx(L,{className:"w-5 h-5"}),a.jsx("span",{children:F.name}),I&&a.jsx(ux,{className:"w-4 h-4 ml-auto"})]},F.id)})}),a.jsx("button",{onClick:b,disabled:o.length===0,className:"w-full mt-4 px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]}),a.jsx("div",{className:"flex-1 flex flex-col",children:f?a.jsx("div",{className:"flex-1 bg-gray-900 p-4",children:a.jsx("div",{className:"h-full bg-white rounded-lg shadow-lg relative overflow-hidden",children:u[g]&&a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4",children:u[g].title}),a.jsxs("p",{className:"text-gray-600",children:[": ",u[g].type]})]})}),a.jsxs("div",{className:"p-4 bg-gray-100 flex items-center justify-between",children:[a.jsx("button",{onClick:()=>y(Math.max(0,g-1)),disabled:g===0,className:"px-3 py-1 bg-blue-600 text-white rounded disabled:opacity-50",children:""}),a.jsxs("span",{className:"text-sm text-gray-600",children:[g+1," / ",u.length]}),a.jsx("button",{onClick:()=>y(Math.min(u.length-1,g+1)),disabled:g===u.length-1,className:"px-3 py-1 bg-blue-600 text-white rounded disabled:opacity-50",children:""})]})]})})}):a.jsx("div",{className:"flex-1 p-4",children:a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-white",children:["  (",u.length,")"]}),a.jsx("button",{onClick:k,disabled:u.length===0,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:" "})]}),a.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:u.map((F,L)=>a.jsx(Ke.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("span",{className:"text-sm text-gray-400",children:["#",F.order]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-semibold",children:F.title}),a.jsx("p",{className:"text-gray-400 text-sm",children:F.type})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>P(L,Math.max(0,L-1)),disabled:L===0,className:"p-1 text-gray-400 hover:text-white disabled:opacity-50",children:""}),a.jsx("button",{onClick:()=>P(L,Math.min(u.length-1,L+1)),disabled:L===u.length-1,className:"p-1 text-gray-400 hover:text-white disabled:opacity-50",children:""}),a.jsx("button",{onClick:()=>A(L),className:"p-1 text-red-400 hover:text-red-300",children:a.jsx(da,{className:"w-4 h-4"})})]})]})},F.id))})]})})})]})]})})},XT=({children:t,slideTitle:e,onError:r})=>{const[n,s]=S.useState(!1),[i,o]=S.useState(null);return n?a.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-6 text-center",children:[a.jsx(vs,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsxs("h3",{className:"text-lg font-semibold text-red-200 mb-2",children:["Preview Error - ",e]}),a.jsx("p",{className:"text-red-300 mb-4",children:"This slide contains content that cannot be previewed safely."}),i&&a.jsxs("details",{className:"text-left bg-red-900/30 rounded p-3 mb-4",children:[a.jsx("summary",{className:"cursor-pointer text-red-200 font-medium",children:"Technical Details"}),a.jsx("pre",{className:"text-xs text-red-300 mt-2 whitespace-pre-wrap",children:i})]}),a.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[a.jsxs("button",{onClick:()=>{s(!1),o(null)},className:"flex items-center space-x-2 bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[a.jsx(Cs,{className:"w-4 h-4"}),a.jsx("span",{children:"Retry Preview"})]}),a.jsxs("button",{onClick:()=>r&&r(i),className:"flex items-center space-x-2 bg-gray-600 text-white px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(sf,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit Slide"})]})]})]}):a.jsx("div",{onError:l=>{console.error("Slide preview error:",l),s(!0),o(l.message||"Unknown error occurred")},children:t})},Jq=({slide:t,onEdit:e})=>{var i,o;const[r,n]=S.useState(null),s=l=>{console.error("Slide preview failed:",l),n(l)};if(r)return a.jsx(XT,{slideTitle:t.title||"Unknown Slide",onError:s,children:a.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-6 text-center",children:[a.jsx(vs,{className:"w-12 h-12 text-yellow-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-yellow-200 mb-2",children:"Preview Unavailable"}),a.jsx("p",{className:"text-yellow-300 mb-4",children:"This slide type cannot be previewed in the content manager."}),a.jsxs("button",{onClick:()=>e(t),className:"flex items-center space-x-2 bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors mx-auto",children:[a.jsx(sf,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit Slide"})]})]})});try{return t.type==="interactive"&&((i=t.content)!=null&&i.type)&&["windows-simulator","linux-simulator","network-simulator","protocol-simulator","code-editor","website-builder","database-simulator","browser-simulator"].includes(t.content.type)?a.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-6 text-center",children:[a.jsx(Sn,{className:"w-12 h-12 text-blue-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-blue-200 mb-2",children:"Interactive Exercise"}),a.jsxs("p",{className:"text-blue-300 mb-2",children:["Type: ",t.content.type.replace("-"," ").toUpperCase()]}),t.content.instructions&&a.jsx("p",{className:"text-blue-300 text-sm mb-4",children:t.content.instructions}),a.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[a.jsxs("button",{onClick:()=>e(t),className:"flex items-center space-x-2 bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(sf,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit Exercise"})]}),a.jsx("div",{className:"text-blue-300 text-sm",children:" Preview not available for simulators"})]})]}):a.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:t.title}),a.jsx("span",{className:"text-sm text-gray-400 bg-gray-700 px-2 py-1 rounded",children:t.type})]}),(o=t.content)!=null&&o.elements&&t.content.elements.length>0?a.jsxs("div",{className:"space-y-3",children:[t.content.elements.slice(0,3).map((l,u)=>a.jsxs("div",{className:"text-gray-300 text-sm",children:[l.type==="title"&&a.jsx("strong",{children:l.text}),l.type==="subtitle"&&a.jsx("em",{children:l.text}),l.type==="text"&&a.jsx("span",{children:l.text}),l.type==="image"&&a.jsxs("span",{children:[" Image: ",l.alt||"No alt text"]}),l.type==="video"&&a.jsxs("span",{children:[" Video: ",l.src||"No source"]}),l.type==="timer"&&a.jsxs("span",{children:[" Timer: ",l.duration,"s"]})]},u)),t.content.elements.length>3&&a.jsxs("div",{className:"text-gray-500 text-sm",children:["+",t.content.elements.length-3," more elements"]})]}):a.jsx("p",{className:"text-gray-400 italic",children:"No content to preview"}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:a.jsx("button",{onClick:()=>e(t),className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Edit Slide"})})]})}catch(l){return console.error("Error rendering slide preview:",l),a.jsx(XT,{slideTitle:t.title||"Unknown Slide",onError:s,children:a.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-6 text-center",children:[a.jsx(vs,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-red-200 mb-2",children:"Preview Error"}),a.jsx("p",{className:"text-red-300 mb-4",children:"Failed to render slide preview due to an error."}),a.jsxs("button",{onClick:()=>e(t),className:"flex items-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors mx-auto",children:[a.jsx(sf,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit Slide"})]})]})})}},Zq=()=>{const[t,e]=S.useState([]),[r,n]=S.useState(null),[s,i]=S.useState([]),[o,l]=S.useState(null),[u,h]=S.useState(null),[f,p]=S.useState(null),[g,y]=S.useState(!1),[w,b]=S.useState(!1),[_,P]=S.useState(!0),[A,k]=S.useState(null),[F,L]=S.useState(""),[I,N]=S.useState("grid"),[T,R]=S.useState(!1),[B,z]=S.useState(null),[O,D]=S.useState(null),[ie,Z]=S.useState(null),[ne,H]=S.useState(null),[Q,q]=S.useState(!1),[ae,U]=S.useState(!1),[M,X]=S.useState(0);S.useEffect(()=>{K()},[]);const K=async()=>{try{P(!0),k(null),console.log(" Loading lessons from database...");const Pe=(await N0()).sort((lt,ct)=>{const Bt=lt.originalId||lt.order||0,it=ct.originalId||ct.order||0;return Bt-it});console.log(` Loaded ${Pe.length} lessons (sorted by order)`),e(Pe),Pe.length===0&&k("No lessons found. Please check your database connection or run the sync script.")}catch(be){console.error(" Error loading lessons:",be),k(`Failed to load lessons: ${be.message}. Please check your database connection.`),M<3&&(be.message.includes("network")||be.message.includes("permission"))&&setTimeout(()=>{X(Pe=>Pe+1),K()},2e3)}finally{P(!1)}},Y=async be=>{try{k(null),console.log(` Loading slides for lesson ${be}...`);const Pe=await Ex(be);console.log(" Raw slides data from database:",Pe);const lt=Pe.map((ct,Bt)=>{const it=`${be}_slide_${ct.order||Bt+1}`,kt=ct.order||Bt+1;return console.log(` Slide ${Bt+1}:`,{originalId:ct.originalId,uniqueKey:it,displayId:kt,title:ct.title,contentKeys:ct.content?Object.keys(ct.content):"no content"}),{...ct,uniqueKey:it,displayId:kt}});console.log(` Loaded ${lt.length} slides for lesson ${be}:`,lt.map(ct=>({uniqueKey:ct.uniqueKey,displayId:ct.displayId,title:ct.title}))),i(lt),lt.length===0&&console.log(" No slides found for this lesson")}catch(Pe){console.error(" Error loading slides:",Pe),console.error(" Error details:",{message:Pe.message,stack:Pe.stack,lessonId:be}),k(`Failed to load slides: ${Pe.message}`),i([])}},xe=async be=>{try{(r==null?void 0:r.id)===be.id?(n(null),i([]),h(null),l(null)):(i([]),h(null),l(null),n(be),await Y(be.id))}catch(Pe){console.error(" Error handling lesson click:",Pe),k(`Failed to load lesson: ${Pe.message}`)}},le=be=>{try{h(be),R(!1),z(null)}catch(Pe){console.error(" Error handling slide click:",Pe),k(`Failed to preview slide: ${Pe.message}`)}},fe=be=>{try{l(be),h(null)}catch(Pe){console.error(" Error handling edit slide:",Pe),k(`Failed to edit slide: ${Pe.message}`)}},ve=async be=>{try{if(k(null),H(null),!r)throw new Error("No lesson selected");console.log(" Saving slide..."),console.log(" Slide data to save:",be),console.log(" Selected lesson:",r),console.log(" Editing slide:",o);const Pe=be.originalId||(o==null?void 0:o.originalId)||(o==null?void 0:o.id);if(!Pe)throw new Error("No slideId (originalId) found for saving!");const lt={...be,lessonId:r.id,uniqueKey:o.uniqueKey||`${r.id}_slide_${be.order||s.length+1}`,displayId:be.order||s.length+1};if(console.log(" Final slide data to save:",lt),o.id||o.originalId)console.log(" Updating existing slide with ID:",Pe),await $W(Pe,lt),H("Slide updated successfully!"),console.log(" Slide updated");else{const Bt=`slide${s.length+1}`;lt.originalId=Bt,console.log(" Creating new slide with ID:",Bt),await HT({...lt,originalId:Bt},Bt),H("Slide created successfully!"),console.log(" Slide created")}console.log(" Reloading slides after save..."),await Y(r.id),l(null),setTimeout(()=>H(null),3e3)}catch(Pe){console.error(" Error saving slide:",Pe),console.error(" Error details:",{message:Pe.message,stack:Pe.stack,slideData:be,selectedLesson:r}),k(`Failed to save slide: ${Pe.message}`)}},we=async be=>{try{k(null),console.log(` Deleting slide ${be}...`),await HW(be,r.id),await Y(r.id),h(null),H("Slide deleted successfully!"),console.log(" Slide deleted"),setTimeout(()=>H(null),3e3)}catch(Pe){console.error(" Error deleting slide:",Pe),k(`Failed to delete slide: ${Pe.message}`)}},We=()=>{if(!r){k("Please select a lesson first");return}let be=0;s.forEach(Bt=>{const it=String(Bt.originalId||Bt.id).match(/^slide(\d+)$/);if(it){const kt=parseInt(it[1],10);kt>be&&(be=kt)}});const Pe=be+1,lt=`slide${Pe}`,ct={lessonId:r.id,originalId:lt,title:" ",type:"presentation",order:Pe,uniqueKey:`${r.id}_slide_${Pe}`,displayId:Pe,content:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",elements:[{type:"text",content:" ",style:{fontSize:"2rem",fontWeight:"bold",color:"#ffffff",textAlign:"center",position:"absolute",top:"20%",left:"50%",transform:"translateX(-50%)"}}]}};l(ct)},re=be=>{if(!r){k("Please select a lesson first");return}const Pe={...be,id:null,title:`${be.title} ()`,order:s.length+1,uniqueKey:`${r.id}_slide_${s.length+1}`,displayId:s.length+1};l(Pe)},st=()=>{try{p({title:"",description:"",icon:"",duration:"60 ",difficulty:"",targetAge:"10-13",breakDuration:10}),y(!0)}catch(be){console.error(" Error creating new lesson:",be),k(`Failed to create new lesson: ${be.message}`)}},Re=be=>{try{p(be),y(!0)}catch(Pe){console.error(" Error editing lesson:",Pe),k(`Failed to edit lesson: ${Pe.message}`)}},he=async be=>{try{k(null),H(null),console.log(" Saving lesson..."),f.id?(await UW(f.id,be),H("Lesson updated successfully!"),console.log(" Lesson updated")):(await $T(be),H("Lesson created successfully!"),console.log(" Lesson created")),await K(),y(!1),p(null),setTimeout(()=>H(null),3e3)}catch(Pe){console.error(" Error saving lesson:",Pe),k(`Failed to save lesson: ${Pe.message}`)}},me=async be=>{try{k(null),console.log(` Deleting lesson ${be}...`),await zW(be),await K(),Z(null),H("Lesson deleted successfully!"),console.log(" Lesson deleted"),setTimeout(()=>H(null),3e3)}catch(Pe){console.error(" Error deleting lesson:",Pe),k(`Failed to delete lesson: ${Pe.message}`)}},ee=async be=>{try{k(null),H(null),console.log(" Generating lesson...");const Pe=await $T({title:be.title,description:be.description,difficulty:be.difficulty,duration:be.duration});for(const lt of be.slides)await HT({...lt,lessonId:Pe.id});await K(),U(!1),H("Lesson generated successfully!"),console.log(" Lesson generated"),setTimeout(()=>H(null),3e3)}catch(Pe){console.error(" Error generating lesson:",Pe),k(`Failed to generate lesson: ${Pe.message}`)}},pe=(be,Pe)=>{try{D(Pe)}catch(lt){console.error(" Error starting drag:",lt)}},Ce=be=>{try{be.preventDefault()}catch(Pe){console.error(" Error during drag over:",Pe)}},$e=async(be,Pe)=>{try{if(be.preventDefault(),!O||O.id===Pe.id)return;console.log(" Reordering slides..."),H("Slide reordering will be implemented soon!"),setTimeout(()=>H(null),3e3),D(null)}catch(lt){console.error(" Error dropping slide:",lt),k(`Failed to reorder slides: ${lt.message}`)}},ot=()=>{X(0),k(null),K()},xt=be=>{switch(be){case"presentation":return a.jsx(_l,{className:"w-4 h-4"});case"poll":return a.jsx(mx,{className:"w-4 h-4"});case"quiz":return a.jsx(Qd,{className:"w-4 h-4"});case"video":return a.jsx(z2,{className:"w-4 h-4"});case"interactive":return a.jsx(Td,{className:"w-4 h-4"});case"break":return a.jsx(Al,{className:"w-4 h-4"});case"reflection":return a.jsx(Ws,{className:"w-4 h-4"});default:return a.jsx(_l,{className:"w-4 h-4"})}},Nt=be=>{switch(be){case"presentation":return"bg-blue-500";case"poll":return"bg-green-500";case"quiz":return"bg-yellow-500";case"video":return"bg-red-500";case"interactive":return"bg-purple-500";case"break":return"bg-gray-500";case"reflection":return"bg-indigo-500";default:return"bg-blue-500"}},Me=t.filter(be=>{var Pe,lt;return((Pe=be.title)==null?void 0:Pe.toLowerCase().includes(F.toLowerCase()))||((lt=be.description)==null?void 0:lt.toLowerCase().includes(F.toLowerCase()))});return _?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-300",children:"Loading content..."})]})}):o?a.jsxs("div",{className:"min-h-screen bg-gray-900",children:[a.jsx("div",{className:"bg-gray-800 shadow-lg border-b border-gray-700",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{onClick:()=>l(null),className:"flex items-center space-x-2 text-gray-300 hover:text-white transition-colors",children:[a.jsx(T3,{className:"w-5 h-5 rotate-90"}),a.jsx("span",{children:"Back to Content"})]}),a.jsx("span",{className:"text-gray-600",children:"|"}),a.jsx("h1",{className:"text-xl font-semibold text-white",children:o.id?"Edit Slide":"Create New Slide"})]})})})}),a.jsx("div",{children:Q?a.jsx(Gq,{slide:o,onSave:ve,onCancel:()=>l(null)}):a.jsx(Hq,{slide:o,onSave:ve,onCancel:()=>l(null)})})]}):a.jsx("div",{className:"min-h-screen bg-gray-900",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Content Manager"}),a.jsx("p",{className:"text-gray-400",children:"Manage your lessons and slides with advanced editing tools"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:st,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(ud,{className:"w-4 h-4"}),a.jsx("span",{children:"New Lesson"})]}),a.jsxs("button",{onClick:()=>U(!0),className:"flex items-center space-x-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:[a.jsx(O2,{className:"w-4 h-4"}),a.jsx("span",{children:"Generate Lesson"})]}),a.jsxs("button",{onClick:()=>q(!Q),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${Q?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,title:Q?"Switch to Basic Editor":"Switch to Advanced Editor",children:[a.jsx(Td,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:Q?"Advanced":"Basic"})]}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-white transition-colors",children:a.jsx(_o,{className:"w-6 h-6"})})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search lessons...",value:F,onChange:be=>L(be.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-white placeholder-gray-400"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>N("grid"),className:`p-2 rounded-lg transition-colors ${I==="grid"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:a.jsx(I3,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>N("list"),className:`p-2 rounded-lg transition-colors ${I==="list"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:a.jsx(OB,{className:"w-5 h-5"})})]})]})]}),a.jsxs(vn,{children:[A&&a.jsxs(Ke.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded-lg flex items-center space-x-2",children:[a.jsx(To,{className:"w-5 h-5"}),a.jsx("span",{className:"flex-1",children:A}),a.jsxs("div",{className:"flex items-center space-x-2",children:[M>0&&a.jsxs("button",{onClick:ot,className:"flex items-center space-x-1 bg-red-600 text-white px-2 py-1 rounded text-sm hover:bg-red-700 transition-colors",children:[a.jsx(Cs,{className:"w-3 h-3"}),a.jsx("span",{children:"Retry"})]}),a.jsx("button",{onClick:()=>k(null),className:"text-red-300 hover:text-red-100",children:a.jsx(zr,{className:"w-4 h-4"})})]})]}),ne&&a.jsxs(Ke.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 bg-green-900/50 border border-green-500 text-green-200 px-4 py-3 rounded-lg flex items-center space-x-2",children:[a.jsx(ux,{className:"w-5 h-5"}),a.jsx("span",{className:"flex-1",children:ne}),a.jsx("button",{onClick:()=>H(null),className:"text-green-300 hover:text-green-100",children:a.jsx(zr,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:Me.map(be=>a.jsxs(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-gray-800 rounded-lg p-6 cursor-pointer transition-all duration-200 hover:bg-gray-700 hover:shadow-lg ${(r==null?void 0:r.id)===be.id?"ring-2 ring-blue-500 bg-gray-700":""}`,onClick:()=>xe(be),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"text-2xl",children:be.icon||""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:be.title}),a.jsx("p",{className:"text-sm text-gray-400",children:be.difficulty})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:Pe=>{Pe.stopPropagation(),Re(be)},className:"p-2 text-gray-400 hover:text-white transition-colors",title:"Edit Lesson",children:a.jsx(Sk,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Pe=>{Pe.stopPropagation(),Z(be)},className:"p-2 text-gray-400 hover:text-red-400 transition-colors",title:"Delete Lesson",children:a.jsx(da,{className:"w-4 h-4"})})]})]}),a.jsx("p",{className:"text-gray-300 text-sm mb-4 line-clamp-2",children:be.description}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(Al,{className:"w-3 h-3"}),a.jsx("span",{children:be.duration})]}),a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(Cr,{className:"w-3 h-3"}),a.jsx("span",{children:be.targetAge})]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(px,{className:"w-3 h-3"}),a.jsxs("span",{children:[be.breakDuration||0,"m break"]})]})]}),(r==null?void 0:r.id)===be.id&&a.jsxs(Ke.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 pt-4 border-t border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-300",children:["Slides (",s.length,")"]}),a.jsxs("button",{onClick:Pe=>{Pe.stopPropagation(),We()},className:"flex items-center space-x-1 bg-blue-600 text-white px-2 py-1 rounded text-sm hover:bg-blue-700 transition-colors",children:[a.jsx(ud,{className:"w-3 h-3"}),a.jsx("span",{children:"Add Slide"})]})]}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:s.length===0?a.jsxs("div",{className:"text-center py-4 text-gray-500",children:[a.jsx(_l,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No slides yet"})]}):s.map((Pe,lt)=>a.jsxs(Ke.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:lt*.1},className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-colors ${(u==null?void 0:u.uniqueKey)===Pe.uniqueKey?"bg-blue-600/20 border border-blue-500/30":"bg-gray-700/50 hover:bg-gray-700"}`,onClick:ct=>{ct.stopPropagation(),le(Pe)},draggable:!0,onDragStart:ct=>pe(ct,Pe),onDragOver:Ce,onDrop:ct=>$e(ct,Pe),children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${Nt(Pe.type)}`}),a.jsxs("div",{className:"flex items-center space-x-2 min-w-0",children:[xt(Pe.type),a.jsxs("span",{className:"text-sm text-gray-300 truncate",children:[Pe.displayId,". ",Pe.title]})]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:ct=>{ct.stopPropagation(),fe(Pe)},className:"p-1 text-gray-400 hover:text-white transition-colors",title:"Edit Slide",children:a.jsx(Sk,{className:"w-3 h-3"})}),a.jsx("button",{onClick:ct=>{ct.stopPropagation(),re(Pe)},className:"p-1 text-gray-400 hover:text-blue-400 transition-colors",title:"Duplicate Slide",children:a.jsx(C2,{className:"w-3 h-3"})}),a.jsx("button",{onClick:ct=>{ct.stopPropagation(),we(Pe.id)},className:"p-1 text-gray-400 hover:text-red-400 transition-colors",title:"Delete Slide",children:a.jsx(da,{className:"w-3 h-3"})})]})]},Pe.uniqueKey))})]})]},`lesson-${be.id}`))}),a.jsx(vn,{children:u&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",onClick:()=>h(null),children:a.jsxs(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:be=>be.stopPropagation(),children:[a.jsxs("div",{className:"bg-gray-700 px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[xt(u.type),a.jsx("h2",{className:"text-lg font-semibold text-white",children:u.title}),a.jsx("span",{className:"text-sm text-gray-400 bg-gray-600 px-2 py-1 rounded",children:u.type})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:()=>fe(u),className:"flex items-center space-x-2 bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(sf,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit"})]}),a.jsx("button",{onClick:()=>h(null),className:"p-2 text-gray-400 hover:text-white transition-colors",children:a.jsx(zr,{className:"w-5 h-5"})})]})]}),a.jsx("div",{className:"p-6",children:a.jsx(Jq,{slide:u,onEdit:fe})})]})})}),a.jsx(vn,{children:ae&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",onClick:()=>U(!1),children:a.jsx(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:be=>be.stopPropagation(),children:a.jsx(Qq,{onGenerate:ee,onCancel:()=>U(!1)})})})}),a.jsx(vn,{children:ie&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",onClick:()=>Z(null),children:a.jsx(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg shadow-2xl max-w-md w-full p-6",onClick:be=>be.stopPropagation(),children:a.jsxs("div",{className:"text-center",children:[a.jsx(vs,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsxs("h3",{className:"text-lg font-semibold text-white mb-2",children:["Delete ",ie.title,"?"]}),a.jsx("p",{className:"text-gray-300 mb-6",children:"This action cannot be undone. All slides in this lesson will also be deleted."}),a.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[a.jsxs("button",{onClick:()=>Z(null),className:"flex items-center space-x-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(zr,{className:"w-4 h-4"}),a.jsx("span",{children:"Cancel"})]}),a.jsxs("button",{onClick:()=>{me(ie.id),Z(null)},className:"flex items-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[a.jsx(da,{className:"w-4 h-4"}),a.jsx("span",{children:"Delete"})]})]})]})})})}),a.jsx(vn,{children:g&&a.jsx(Ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",onClick:()=>y(!1),children:a.jsx(Ke.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg shadow-2xl max-w-2xl w-full p-6",onClick:be=>be.stopPropagation(),children:a.jsx(eG,{lesson:f,onSave:he,onCancel:()=>y(!1)})})})})]})})},eG=({lesson:t,onSave:e,onCancel:r})=>{const[n,s]=S.useState(t||{}),i=(l,u)=>{s(h=>({...h,[l]:u}))},o=()=>{e(n)};return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:t!=null&&t.id?"Edit Lesson":"Create New Lesson"}),a.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-white transition-colors",children:a.jsx(zr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),a.jsx("input",{type:"text",value:n.title||"",onChange:l=>i("title",l.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter lesson title..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),a.jsx("textarea",{value:n.description||"",onChange:l=>i("description",l.target.value),rows:3,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter lesson description..."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Order"}),a.jsx("input",{type:"number",value:n.order||1,onChange:l=>i("order",parseInt(l.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (minutes)"}),a.jsx("input",{type:"number",value:n.duration||60,onChange:l=>i("duration",parseInt(l.target.value)),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Difficulty"}),a.jsxs("select",{value:n.difficulty||"beginner",onChange:l=>i("difficulty",l.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"beginner",children:"Beginner"}),a.jsx("option",{value:"intermediate",children:"Intermediate"}),a.jsx("option",{value:"advanced",children:"Advanced"})]})]})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-8",children:[a.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),a.jsx("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t!=null&&t.id?"Update Lesson":"Create Lesson"})]})]})};var zy={exports:{}},$y,YT;function tG(){if(YT)return $y;YT=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return $y=t,$y}var Hy,QT;function rG(){if(QT)return Hy;QT=1;var t=tG();function e(){}function r(){}return r.resetWarningCache=e,Hy=function(){function n(o,l,u,h,f,p){if(p!==t){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},Hy}var JT;function nG(){return JT||(JT=1,zy.exports=rG()()),zy.exports}var sG=nG();const br=bw(sG),aG=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Rd(t,e,r){const n=iG(t),{webkitRelativePath:s}=t,i=typeof e=="string"?e:typeof s=="string"&&s.length>0?s:`./${t.name}`;return typeof n.path!="string"&&ZT(n,"path",i),ZT(n,"relativePath",i),n}function iG(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const n=e.split(".").pop().toLowerCase(),s=aG.get(n);s&&Object.defineProperty(t,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return t}function ZT(t,e,r){Object.defineProperty(t,e,{value:r,writable:!1,configurable:!1,enumerable:!0})}const oG=[".DS_Store","Thumbs.db"];function lG(t){return Gc(this,void 0,void 0,function*(){return fg(t)&&cG(t.dataTransfer)?fG(t.dataTransfer,t.type):uG(t)?dG(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?hG(t):[]})}function cG(t){return fg(t)}function uG(t){return fg(t)&&fg(t.target)}function fg(t){return typeof t=="object"&&t!==null}function dG(t){return sw(t.target.files).map(e=>Rd(e))}function hG(t){return Gc(this,void 0,void 0,function*(){return(yield Promise.all(t.map(r=>r.getFile()))).map(r=>Rd(r))})}function fG(t,e){return Gc(this,void 0,void 0,function*(){if(t.items){const r=sw(t.items).filter(s=>s.kind==="file");if(e!=="drop")return r;const n=yield Promise.all(r.map(mG));return e4(j6(n))}return e4(sw(t.files).map(r=>Rd(r)))})}function e4(t){return t.filter(e=>oG.indexOf(e.name)===-1)}function sw(t){if(t===null)return[];const e=[];for(let r=0;r<t.length;r++){const n=t[r];e.push(n)}return e}function mG(t){if(typeof t.webkitGetAsEntry!="function")return t4(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?A6(e):t4(t,e)}function j6(t){return t.reduce((e,r)=>[...e,...Array.isArray(r)?j6(r):[r]],[])}function t4(t,e){return Gc(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const i=yield t.getAsFileSystemHandle();if(i===null)throw new Error(`${t} is not a File`);if(i!==void 0){const o=yield i.getFile();return o.handle=i,Rd(o)}}const n=t.getAsFile();if(!n)throw new Error(`${t} is not a File`);return Rd(n,(r=e==null?void 0:e.fullPath)!==null&&r!==void 0?r:void 0)})}function pG(t){return Gc(this,void 0,void 0,function*(){return t.isDirectory?A6(t):gG(t)})}function A6(t){const e=t.createReader();return new Promise((r,n)=>{const s=[];function i(){e.readEntries(o=>Gc(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(pG));s.push(l),i()}else try{const l=yield Promise.all(s);r(l)}catch(l){n(l)}}),o=>{n(o)})}i()})}function gG(t){return Gc(this,void 0,void 0,function*(){return new Promise((e,r)=>{t.file(n=>{const s=Rd(n,t.fullPath);e(s)},n=>{r(n)})})})}var ip={},r4;function xG(){return r4||(r4=1,ip.__esModule=!0,ip.default=function(t,e){if(t&&e){var r=Array.isArray(e)?e:e.split(",");if(r.length===0)return!0;var n=t.name||"",s=(t.type||"").toLowerCase(),i=s.replace(/\/.*$/,"");return r.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?n.toLowerCase().endsWith(l):l.endsWith("/*")?i===l.replace(/\/.*$/,""):s===l})}return!0}),ip}var vG=xG();const Wy=bw(vG);function n4(t){return bG(t)||wG(t)||I6(t)||yG()}function yG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function bG(t){if(Array.isArray(t))return aw(t)}function s4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function a4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?s4(Object(r),!0).forEach(function(n){C6(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function C6(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Uf(t,e){return EG(t)||NG(t,e)||I6(t,e)||_G()}function _G(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I6(t,e){if(t){if(typeof t=="string")return aw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aw(t,e)}}function aw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function NG(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],s=!0,i=!1,o,l;try{for(r=r.call(t);!(s=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));s=!0);}catch(u){i=!0,l=u}finally{try{!s&&r.return!=null&&r.return()}finally{if(i)throw l}}return n}}function EG(t){if(Array.isArray(t))return t}var SG=typeof Wy=="function"?Wy:Wy.default,kG="file-invalid-type",TG="file-too-large",jG="file-too-small",AG="too-many-files",CG=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=e.split(","),n=r.length>1?"one of ".concat(r.join(", ")):r[0];return{code:kG,message:"File type must be ".concat(n)}},i4=function(e){return{code:TG,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},o4=function(e){return{code:jG,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},IG={code:AG,message:"Too many files"};function P6(t,e){var r=t.type==="application/x-moz-file"||SG(t,e);return[r,r?null:CG(e)]}function R6(t,e,r){if(gc(t.size))if(gc(e)&&gc(r)){if(t.size>r)return[!1,i4(r)];if(t.size<e)return[!1,o4(e)]}else{if(gc(e)&&t.size<e)return[!1,o4(e)];if(gc(r)&&t.size>r)return[!1,i4(r)]}return[!0,null]}function gc(t){return t!=null}function PG(t){var e=t.files,r=t.accept,n=t.minSize,s=t.maxSize,i=t.multiple,o=t.maxFiles,l=t.validator;return!i&&e.length>1||i&&o>=1&&e.length>o?!1:e.every(function(u){var h=P6(u,r),f=Uf(h,1),p=f[0],g=R6(u,n,s),y=Uf(g,1),w=y[0],b=l?l(u):null;return p&&w&&!b})}function mg(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function op(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function l4(t){t.preventDefault()}function RG(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function DG(t){return t.indexOf("Edge/")!==-1}function FG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return RG(t)||DG(t)}function wi(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return e.some(function(l){return!mg(n)&&l&&l.apply(void 0,[n].concat(i)),mg(n)})}}function LG(){return"showOpenFilePicker"in window}function OG(t){if(gc(t)){var e=Object.entries(t).filter(function(r){var n=Uf(r,2),s=n[0],i=n[1],o=!0;return D6(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(i)||!i.every(F6))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(r,n){var s=Uf(n,2),i=s[0],o=s[1];return a4(a4({},r),{},C6({},i,o))},{});return[{description:"Files",accept:e}]}return t}function MG(t){if(gc(t))return Object.entries(t).reduce(function(e,r){var n=Uf(r,2),s=n[0],i=n[1];return[].concat(n4(e),[s],n4(i))},[]).filter(function(e){return D6(e)||F6(e)}).join(",")}function VG(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function BG(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function D6(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function F6(t){return/^.*\.[\w]+$/.test(t)}var UG=["children"],zG=["open"],$G=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],HG=["refKey","onChange","onClick"];function WG(t){return KG(t)||GG(t)||L6(t)||qG()}function qG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function KG(t){if(Array.isArray(t))return iw(t)}function qy(t,e){return QG(t)||YG(t,e)||L6(t,e)||XG()}function XG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L6(t,e){if(t){if(typeof t=="string")return iw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iw(t,e)}}function iw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function YG(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],s=!0,i=!1,o,l;try{for(r=r.call(t);!(s=(o=r.next()).done)&&(n.push(o.value),!(e&&n.length===e));s=!0);}catch(u){i=!0,l=u}finally{try{!s&&r.return!=null&&r.return()}finally{if(i)throw l}}return n}}function QG(t){if(Array.isArray(t))return t}function c4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Br(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?c4(Object(r),!0).forEach(function(n){ow(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ow(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pg(t,e){if(t==null)return{};var r=JG(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function JG(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}var Ab=S.forwardRef(function(t,e){var r=t.children,n=pg(t,UG),s=M6(n),i=s.open,o=pg(s,zG);return S.useImperativeHandle(e,function(){return{open:i}},[i]),Ac.createElement(S.Fragment,null,r(Br(Br({},o),{},{open:i})))});Ab.displayName="Dropzone";var O6={disabled:!1,getFilesFromEvent:lG,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Ab.defaultProps=O6;Ab.propTypes={children:br.func,accept:br.objectOf(br.arrayOf(br.string)),multiple:br.bool,preventDropOnDocument:br.bool,noClick:br.bool,noKeyboard:br.bool,noDrag:br.bool,noDragEventsBubbling:br.bool,minSize:br.number,maxSize:br.number,maxFiles:br.number,disabled:br.bool,getFilesFromEvent:br.func,onFileDialogCancel:br.func,onFileDialogOpen:br.func,useFsAccessApi:br.bool,autoFocus:br.bool,onDragEnter:br.func,onDragLeave:br.func,onDragOver:br.func,onDrop:br.func,onDropAccepted:br.func,onDropRejected:br.func,onError:br.func,validator:br.func};var lw={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function M6(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Br(Br({},O6),t),r=e.accept,n=e.disabled,s=e.getFilesFromEvent,i=e.maxSize,o=e.minSize,l=e.multiple,u=e.maxFiles,h=e.onDragEnter,f=e.onDragLeave,p=e.onDragOver,g=e.onDrop,y=e.onDropAccepted,w=e.onDropRejected,b=e.onFileDialogCancel,_=e.onFileDialogOpen,P=e.useFsAccessApi,A=e.autoFocus,k=e.preventDropOnDocument,F=e.noClick,L=e.noKeyboard,I=e.noDrag,N=e.noDragEventsBubbling,T=e.onError,R=e.validator,B=S.useMemo(function(){return MG(r)},[r]),z=S.useMemo(function(){return OG(r)},[r]),O=S.useMemo(function(){return typeof _=="function"?_:u4},[_]),D=S.useMemo(function(){return typeof b=="function"?b:u4},[b]),ie=S.useRef(null),Z=S.useRef(null),ne=S.useReducer(ZG,lw),H=qy(ne,2),Q=H[0],q=H[1],ae=Q.isFocused,U=Q.isFileDialogActive,M=S.useRef(typeof window<"u"&&window.isSecureContext&&P&&LG()),X=function(){!M.current&&U&&setTimeout(function(){if(Z.current){var be=Z.current.files;be.length||(q({type:"closeDialog"}),D())}},300)};S.useEffect(function(){return window.addEventListener("focus",X,!1),function(){window.removeEventListener("focus",X,!1)}},[Z,U,D,M]);var K=S.useRef([]),Y=function(be){ie.current&&ie.current.contains(be.target)||(be.preventDefault(),K.current=[])};S.useEffect(function(){return k&&(document.addEventListener("dragover",l4,!1),document.addEventListener("drop",Y,!1)),function(){k&&(document.removeEventListener("dragover",l4),document.removeEventListener("drop",Y))}},[ie,k]),S.useEffect(function(){return!n&&A&&ie.current&&ie.current.focus(),function(){}},[ie,A,n]);var xe=S.useCallback(function(Me){T?T(Me):console.error(Me)},[T]),le=S.useCallback(function(Me){Me.preventDefault(),Me.persist(),$e(Me),K.current=[].concat(WG(K.current),[Me.target]),op(Me)&&Promise.resolve(s(Me)).then(function(be){if(!(mg(Me)&&!N)){var Pe=be.length,lt=Pe>0&&PG({files:be,accept:B,minSize:o,maxSize:i,multiple:l,maxFiles:u,validator:R}),ct=Pe>0&&!lt;q({isDragAccept:lt,isDragReject:ct,isDragActive:!0,type:"setDraggedFiles"}),h&&h(Me)}}).catch(function(be){return xe(be)})},[s,h,xe,N,B,o,i,l,u,R]),fe=S.useCallback(function(Me){Me.preventDefault(),Me.persist(),$e(Me);var be=op(Me);if(be&&Me.dataTransfer)try{Me.dataTransfer.dropEffect="copy"}catch{}return be&&p&&p(Me),!1},[p,N]),ve=S.useCallback(function(Me){Me.preventDefault(),Me.persist(),$e(Me);var be=K.current.filter(function(lt){return ie.current&&ie.current.contains(lt)}),Pe=be.indexOf(Me.target);Pe!==-1&&be.splice(Pe,1),K.current=be,!(be.length>0)&&(q({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),op(Me)&&f&&f(Me))},[ie,f,N]),we=S.useCallback(function(Me,be){var Pe=[],lt=[];Me.forEach(function(ct){var Bt=P6(ct,B),it=qy(Bt,2),kt=it[0],er=it[1],lr=R6(ct,o,i),un=qy(lr,2),Is=un[0],Xs=un[1],Ps=R?R(ct):null;if(kt&&Is&&!Ps)Pe.push(ct);else{var Vn=[er,Xs];Ps&&(Vn=Vn.concat(Ps)),lt.push({file:ct,errors:Vn.filter(function(Rs){return Rs})})}}),(!l&&Pe.length>1||l&&u>=1&&Pe.length>u)&&(Pe.forEach(function(ct){lt.push({file:ct,errors:[IG]})}),Pe.splice(0)),q({acceptedFiles:Pe,fileRejections:lt,isDragReject:lt.length>0,type:"setFiles"}),g&&g(Pe,lt,be),lt.length>0&&w&&w(lt,be),Pe.length>0&&y&&y(Pe,be)},[q,l,B,o,i,u,g,y,w,R]),We=S.useCallback(function(Me){Me.preventDefault(),Me.persist(),$e(Me),K.current=[],op(Me)&&Promise.resolve(s(Me)).then(function(be){mg(Me)&&!N||we(be,Me)}).catch(function(be){return xe(be)}),q({type:"reset"})},[s,we,xe,N]),re=S.useCallback(function(){if(M.current){q({type:"openDialog"}),O();var Me={multiple:l,types:z};window.showOpenFilePicker(Me).then(function(be){return s(be)}).then(function(be){we(be,null),q({type:"closeDialog"})}).catch(function(be){VG(be)?(D(be),q({type:"closeDialog"})):BG(be)?(M.current=!1,Z.current?(Z.current.value=null,Z.current.click()):xe(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):xe(be)});return}Z.current&&(q({type:"openDialog"}),O(),Z.current.value=null,Z.current.click())},[q,O,D,P,we,xe,z,l]),st=S.useCallback(function(Me){!ie.current||!ie.current.isEqualNode(Me.target)||(Me.key===" "||Me.key==="Enter"||Me.keyCode===32||Me.keyCode===13)&&(Me.preventDefault(),re())},[ie,re]),Re=S.useCallback(function(){q({type:"focus"})},[]),he=S.useCallback(function(){q({type:"blur"})},[]),me=S.useCallback(function(){F||(FG()?setTimeout(re,0):re())},[F,re]),ee=function(be){return n?null:be},pe=function(be){return L?null:ee(be)},Ce=function(be){return I?null:ee(be)},$e=function(be){N&&be.stopPropagation()},ot=S.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},be=Me.refKey,Pe=be===void 0?"ref":be,lt=Me.role,ct=Me.onKeyDown,Bt=Me.onFocus,it=Me.onBlur,kt=Me.onClick,er=Me.onDragEnter,lr=Me.onDragOver,un=Me.onDragLeave,Is=Me.onDrop,Xs=pg(Me,$G);return Br(Br(ow({onKeyDown:pe(wi(ct,st)),onFocus:pe(wi(Bt,Re)),onBlur:pe(wi(it,he)),onClick:ee(wi(kt,me)),onDragEnter:Ce(wi(er,le)),onDragOver:Ce(wi(lr,fe)),onDragLeave:Ce(wi(un,ve)),onDrop:Ce(wi(Is,We)),role:typeof lt=="string"&&lt!==""?lt:"presentation"},Pe,ie),!n&&!L?{tabIndex:0}:{}),Xs)}},[ie,st,Re,he,me,le,fe,ve,We,L,I,n]),xt=S.useCallback(function(Me){Me.stopPropagation()},[]),Nt=S.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},be=Me.refKey,Pe=be===void 0?"ref":be,lt=Me.onChange,ct=Me.onClick,Bt=pg(Me,HG),it=ow({accept:B,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:ee(wi(lt,We)),onClick:ee(wi(ct,xt)),tabIndex:-1},Pe,Z);return Br(Br({},it),Bt)}},[Z,r,l,We,n]);return Br(Br({},Q),{},{isFocused:ae&&!n,getRootProps:ot,getInputProps:Nt,rootRef:ie,inputRef:Z,open:ee(re)})}function ZG(t,e){switch(e.type){case"focus":return Br(Br({},t),{},{isFocused:!0});case"blur":return Br(Br({},t),{},{isFocused:!1});case"openDialog":return Br(Br({},lw),{},{isFileDialogActive:!0});case"closeDialog":return Br(Br({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return Br(Br({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Br(Br({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return Br({},lw);default:return t}}function u4(){}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var gg={};gg.version="0.18.5";var V6=1252,eK=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Cb={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Ib=function(t){eK.indexOf(t)!=-1&&(V6=Cb[0]=t)};function tK(){Ib(1252)}var ti=function(t){Ib(t)};function Pb(){ti(1200),tK()}function d4(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function rK(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function B6(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var Kh=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?rK(t.slice(2)):e==254&&r==255?B6(t.slice(2)):e==65279?t.slice(1):t},lp=function(e){return String.fromCharCode(e)},h4=function(e){return String.fromCharCode(e)},zf,pl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function $f(t){for(var e="",r=0,n=0,s=0,i=0,o=0,l=0,u=0,h=0;h<t.length;)r=t.charCodeAt(h++),i=r>>2,n=t.charCodeAt(h++),o=(r&3)<<4|n>>4,s=t.charCodeAt(h++),l=(n&15)<<2|s>>6,u=s&63,isNaN(n)?l=u=64:isNaN(s)&&(u=64),e+=pl.charAt(i)+pl.charAt(o)+pl.charAt(l)+pl.charAt(u);return e}function ma(t){var e="",r=0,n=0,s=0,i=0,o=0,l=0,u=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var h=0;h<t.length;)i=pl.indexOf(t.charAt(h++)),o=pl.indexOf(t.charAt(h++)),r=i<<2|o>>4,e+=String.fromCharCode(r),l=pl.indexOf(t.charAt(h++)),n=(o&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),u=pl.indexOf(t.charAt(h++)),s=(l&3)<<6|u,u!==64&&(e+=String.fromCharCode(s));return e}var Ht=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Ao=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Pl(t){return Ht?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function f4(t){return Ht?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var oa=function(e){return Ht?Ao(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function kx(t){if(typeof ArrayBuffer>"u")return oa(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function $l(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function nK(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function Rb(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return Rb(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Fn=Ht?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Ao(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function sK(t){for(var e=[],r=0,n=t.length+250,s=Pl(t.length+255),i=0;i<t.length;++i){var o=t.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=t.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>n&&(e.push(s.slice(0,r)),r=0,s=Pl(65535),n=65530)}return e.push(s.slice(0,r)),Fn(e)}var As=/\u0000/g,Xh=/[\u0001-\u0006]/g;function dd(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function ri(t,e){var r=""+t;return r.length>=e?r:Qr("0",e-r.length)+r}function Db(t,e){var r=""+t;return r.length>=e?r:Qr(" ",e-r.length)+r}function xg(t,e){var r=""+t;return r.length>=e?r:r+Qr(" ",e-r.length)}function aK(t,e){var r=""+Math.round(t);return r.length>=e?r:Qr("0",e-r.length)+r}function iK(t,e){var r=""+t;return r.length>=e?r:Qr("0",e-r.length)+r}var m4=Math.pow(2,32);function zu(t,e){if(t>m4||t<-m4)return aK(t,e);var r=Math.round(t);return iK(r,e)}function vg(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var p4=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Gy=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function oK(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var jt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},g4={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},lK={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function yg(t,e,r){for(var n=t<0?-1:1,s=t*n,i=0,o=1,l=0,u=1,h=0,f=0,p=Math.floor(s);h<e&&(p=Math.floor(s),l=p*o+i,f=p*h+u,!(s-p<5e-8));)s=1/(s-p),i=o,o=l,u=h,h=f;if(f>e&&(h>e?(f=u,l=i):(f=h,l=o)),!r)return[0,n*l,f];var g=Math.floor(n*l/f);return[g,n*l-g*f,f]}function Nc(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),i=0,o=[],l={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var u=new Date(1900,0,1);u.setDate(u.getDate()+n-1),o=[u.getFullYear(),u.getMonth()+1,u.getDate()],i=u.getDay(),n<60&&(i=(i+6)%7),r&&(i=mK(u,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var U6=new Date(1899,11,31,0,0,0),cK=U6.getTime(),uK=new Date(1900,2,1,0,0,0);function z6(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=uK&&(r+=24*60*60*1e3),(r-(cK+(t.getTimezoneOffset()-U6.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Fb(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function dK(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function hK(t){var e=t<0?12:11,r=Fb(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function fK(t){var e=Fb(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function Hf(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=hK(t):e===10?r=t.toFixed(10).substr(0,12):r=fK(t),Fb(dK(r.toUpperCase()))}function Bc(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Hf(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Fa(14,z6(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function mK(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function pK(t,e,r,n){var s="",i=0,o=0,l=r.y,u,h=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:u=l%100,h=2;break;default:u=l%1e4,h=4;break}break;case 109:switch(e.length){case 1:case 2:u=r.m,h=e.length;break;case 3:return Gy[r.m-1][1];case 5:return Gy[r.m-1][0];default:return Gy[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:u=r.d,h=e.length;break;case 3:return p4[r.q][0];default:return p4[r.q][1]}break;case 104:switch(e.length){case 1:case 2:u=1+(r.H+11)%12,h=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:u=r.H,h=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:u=r.M,h=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?ri(r.S,e.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),e==="s"?i===0?"0":""+i/o:(s=ri(i,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":u=r.D*24+r.H;break;case"[m]":case"[mm]":u=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":u=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}h=e.length===3?1:2;break;case 101:u=l,h=1;break}var f=h>0?ri(u,h):"";return f}function gl(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var $6=/%/g;function gK(t,e,r){var n=e.replace($6,""),s=e.length-n.length;return uo(t,n,r*Math.pow(10,2*s))+Qr("%",s)}function xK(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return uo(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function H6(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+H6(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,u,h,f){return u+h+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var W6=/# (\?+)( ?)\/( ?)(\d+)/;function vK(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),i=Math.floor(s/n),o=s-i*n,l=n;return r+(i===0?"":""+i)+" "+(o===0?Qr(" ",t[1].length+1+t[4].length):Db(o,t[1].length)+t[2]+"/"+t[3]+ri(l,t[4].length))}function yK(t,e,r){return r+(e===0?"":""+e)+Qr(" ",t[1].length+2+t[4].length)}var q6=/^#*0*\.([0#]+)/,G6=/\).*[0#]/,K6=/\(###\) ###\\?-####/;function ks(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function x4(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function v4(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function wK(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function bK(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function ka(t,e,r){if(t.charCodeAt(0)===40&&!e.match(G6)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ka("n",n,r):"("+ka("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return xK(t,e,r);if(e.indexOf("%")!==-1)return gK(t,e,r);if(e.indexOf("E")!==-1)return H6(e,r);if(e.charCodeAt(0)===36)return"$"+ka(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,o,l,u=Math.abs(r),h=r<0?"-":"";if(e.match(/^00+$/))return h+zu(u,e.length);if(e.match(/^[#?]+$/))return s=zu(r,0),s==="0"&&(s=""),s.length>e.length?s:ks(e.substr(0,e.length-s.length))+s;if(i=e.match(W6))return vK(i,u,h);if(e.match(/^#+0+$/))return h+zu(u,e.length-e.indexOf("0"));if(i=e.match(q6))return s=x4(r,i[1].length).replace(/^([^\.]+)$/,"$1."+ks(i[1])).replace(/\.$/,"."+ks(i[1])).replace(/\.(\d*)$/,function(w,b){return"."+b+Qr("0",ks(i[1]).length-b.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return h+x4(u,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return h+gl(zu(u,0));if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ka(t,e,-r):gl(""+(Math.floor(r)+wK(r,i[1].length)))+"."+ri(v4(r,i[1].length),i[1].length);if(i=e.match(/^#,#*,#0/))return ka(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=dd(ka(t,e.replace(/[\\-]/g,""),r)),o=0,dd(dd(e.replace(/\\/g,"")).replace(/[0#]/g,function(w){return o<s.length?s.charAt(o++):w==="0"?"0":""}));if(e.match(K6))return s=ka(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=yg(u,Math.pow(10,o)-1,!1),s=""+h,f=uo("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=xg(l[2],o),f.length<i[4].length&&(f=ks(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=yg(u,Math.pow(10,o)-1,!0),h+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Db(l[1],o)+i[2]+"/"+i[3]+xg(l[2],o):Qr(" ",2*o+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=zu(r,0),e.length<=s.length?s:ks(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var p=e.indexOf(".")-o,g=e.length-s.length-p;return ks(e.substr(0,p)+s+e.substr(e.length-g))}if(i=e.match(/^00,000\.([#0]*0)$/))return o=v4(r,i[1].length),r<0?"-"+ka(t,e,-r):gl(bK(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?ri(0,3-w.length):"")+w})+"."+ri(o,i[1].length);switch(e){case"###,##0.00":return ka(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var y=gl(zu(u,0));return y!=="0"?h+y:"";case"###,###.00":return ka(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ka(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function _K(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return uo(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function NK(t,e,r){var n=e.replace($6,""),s=e.length-n.length;return uo(t,n,r*Math.pow(10,2*s))+Qr("%",s)}function X6(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+X6(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,u,h,f){return u+h+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function _i(t,e,r){if(t.charCodeAt(0)===40&&!e.match(G6)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?_i("n",n,r):"("+_i("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return _K(t,e,r);if(e.indexOf("%")!==-1)return NK(t,e,r);if(e.indexOf("E")!==-1)return X6(e,r);if(e.charCodeAt(0)===36)return"$"+_i(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,o,l,u=Math.abs(r),h=r<0?"-":"";if(e.match(/^00+$/))return h+ri(u,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:ks(e.substr(0,e.length-s.length))+s;if(i=e.match(W6))return yK(i,u,h);if(e.match(/^#+0+$/))return h+ri(u,e.length-e.indexOf("0"));if(i=e.match(q6))return s=(""+r).replace(/^([^\.]+)$/,"$1."+ks(i[1])).replace(/\.$/,"."+ks(i[1])),s=s.replace(/\.(\d*)$/,function(w,b){return"."+b+Qr("0",ks(i[1]).length-b.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return h+(""+u).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return h+gl(""+u);if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+_i(t,e,-r):gl(""+r)+"."+Qr("0",i[1].length);if(i=e.match(/^#,#*,#0/))return _i(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=dd(_i(t,e.replace(/[\\-]/g,""),r)),o=0,dd(dd(e.replace(/\\/g,"")).replace(/[0#]/g,function(w){return o<s.length?s.charAt(o++):w==="0"?"0":""}));if(e.match(K6))return s=_i(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=yg(u,Math.pow(10,o)-1,!1),s=""+h,f=uo("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=xg(l[2],o),f.length<i[4].length&&(f=ks(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=yg(u,Math.pow(10,o)-1,!0),h+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Db(l[1],o)+i[2]+"/"+i[3]+xg(l[2],o):Qr(" ",2*o+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:ks(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var p=e.indexOf(".")-o,g=e.length-s.length-p;return ks(e.substr(0,p)+s+e.substr(e.length-g))}if(i=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+_i(t,e,-r):gl(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?ri(0,3-w.length):"")+w})+"."+ri(0,i[1].length);switch(e){case"###,###":case"##,###":case"#,###":var y=gl(""+u);return y!=="0"?h+y:"";default:if(e.match(/\.[0#?]*$/))return _i(t,e.slice(0,e.lastIndexOf(".")),r)+ks(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function uo(t,e,r){return(r|0)===r?_i(t,e,r):ka(t,e,r)}function EK(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var Y6=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function eh(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":vg(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(Y6))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function SK(t,e,r,n){for(var s=[],i="",o=0,l="",u="t",h,f,p,g="H";o<t.length;)switch(l=t.charAt(o)){case"G":if(!vg(t,o))throw new Error("unrecognized character "+l+" in "+t);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(p=t.charCodeAt(++o))!==34&&o<t.length;)i+=String.fromCharCode(p);s[s.length]={t:"t",v:i},++o;break;case"\\":var y=t.charAt(++o),w=y==="("||y===")"?y:"t";s[s.length]={t:w,v:y},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(h==null&&(h=Nc(e,r,t.charAt(o+1)==="2"),h==null))return"";s[s.length]={t:"X",v:t.substr(o,2)},u=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||h==null&&(h=Nc(e,r),h==null))return"";for(i=l;++o<t.length&&t.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&u.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=g),s[s.length]={t:l,v:i},u=l;break;case"A":case"a":case"":var b={t:l,v:l};if(h==null&&(h=Nc(e,r)),t.substr(o,3).toUpperCase()==="A/P"?(h!=null&&(b.v=h.H>=12?"P":"A"),b.t="T",g="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(h!=null&&(b.v=h.H>=12?"PM":"AM"),b.t="T",o+=5,g="h"):t.substr(o,5).toUpperCase()==="/"?(h!=null&&(b.v=h.H>=12?"":""),b.t="T",o+=5,g="h"):(b.t="t",++o),h==null&&b.t==="T")return"";s[s.length]=b,u=l;break;case"[":for(i=l;t.charAt(o++)!=="]"&&o<t.length;)i+=t.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(Y6)){if(h==null&&(h=Nc(e,r),h==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},u=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",eh(t)||(s[s.length]={t:"t",v:i}));break;case".":if(h!=null){for(i=l;++o<t.length&&(l=t.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;t.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},u=l;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)i+=t.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);s[s.length]={t:"t",v:l},++o;break}var _=0,P=0,A;for(o=s.length-1,u="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=g,u="h",_<1&&(_=1);break;case"s":(A=s[o].v.match(/\.0+$/))&&(P=Math.max(P,A[0].length-1)),_<3&&(_=3);case"d":case"y":case"M":case"e":u=s[o].t;break;case"m":u==="s"&&(s[o].t="M",_<2&&(_=2));break;case"X":break;case"Z":_<1&&s[o].v.match(/[Hh]/)&&(_=1),_<2&&s[o].v.match(/[Mm]/)&&(_=2),_<3&&s[o].v.match(/[Ss]/)&&(_=3)}switch(_){case 0:break;case 1:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M),h.M>=60&&(h.M=0,++h.H);break;case 2:h.u>=.5&&(h.u=0,++h.S),h.S>=60&&(h.S=0,++h.M);break}var k="",F;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=pK(s[o].t.charCodeAt(0),s[o].v,h,P),s[o].t="t";break;case"n":case"?":for(F=o+1;s[F]!=null&&((l=s[F].t)==="?"||l==="D"||(l===" "||l==="t")&&s[F+1]!=null&&(s[F+1].t==="?"||s[F+1].t==="t"&&s[F+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[F].v==="/"||s[F].v===" "&&s[F+1]!=null&&s[F+1].t=="?"));)s[o].v+=s[F].v,s[F]={v:"",t:";"},++F;k+=s[o].v,o=F-1;break;case"G":s[o].t="t",s[o].v=Bc(e,r);break}var L="",I,N;if(k.length>0){k.charCodeAt(0)==40?(I=e<0&&k.charCodeAt(0)===45?-e:e,N=uo("n",k,I)):(I=e<0&&n>1?-e:e,N=uo("n",k,I),I<0&&s[0]&&s[0].t=="t"&&(N=N.substr(1),s[0].v="-"+s[0].v)),F=N.length-1;var T=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){T=o;break}var R=s.length;if(T===s.length&&N.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(F>=s[o].v.length-1?(F-=s[o].v.length,s[o].v=N.substr(F+1,s[o].v.length)):F<0?s[o].v="":(s[o].v=N.substr(0,F+1),F=-1),s[o].t="t",R=o);F>=0&&R<s.length&&(s[R].v=N.substr(0,F+1)+s[R].v)}else if(T!==s.length&&N.indexOf("E")===-1){for(F=N.indexOf(".")-1,o=T;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(f=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")-1:s[o].v.length-1,L=s[o].v.substr(f+1);f>=0;--f)F>=0&&(s[o].v.charAt(f)==="0"||s[o].v.charAt(f)==="#")&&(L=N.charAt(F--)+L);s[o].v=L,s[o].t="t",R=o}for(F>=0&&R<s.length&&(s[R].v=N.substr(0,F+1)+s[R].v),F=N.indexOf(".")+1,o=T;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==T)){for(f=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")+1:0,L=s[o].v.substr(0,f);f<s[o].v.length;++f)F<N.length&&(L+=N.charAt(F++));s[o].v=L,s[o].t="t",R=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(I=n>1&&e<0&&o>0&&s[o-1].v==="-"?-e:e,s[o].v=uo(s[o].t,s[o].v,I),s[o].t="t");var B="";for(o=0;o!==s.length;++o)s[o]!=null&&(B+=s[o].v);return B}var y4=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function w4(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function kK(t,e){var r=EK(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(y4),l=r[1].match(y4);return w4(e,o)?[n,r[0]]:w4(e,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,i]}function Fa(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:jt)[t],n==null&&(n=r.table&&r.table[g4[t]]||jt[g4[t]]),n==null&&(n=lK[t]||"General");break}if(vg(n,0))return Bc(e,r);e instanceof Date&&(e=z6(e,r.date1904));var s=kK(n,e);if(vg(s[1]))return Bc(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return SK(s[1],e,r,s[0])}function ho(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(jt[r]==null){e<0&&(e=r);continue}if(jt[r]==t){e=r;break}}e<0&&(e=391)}return jt[e]=t,e}function Tx(t){for(var e=0;e!=392;++e)t[e]!==void 0&&ho(t[e],e)}function th(){jt=oK()}var TK={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Q6=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function jK(t){var e=typeof t=="number"?jt[t]:t;return e=e.replace(Q6,"(\\d+)"),new RegExp("^"+e+"$")}function AK(t,e,r){var n=-1,s=-1,i=-1,o=-1,l=-1,u=-1;(e.match(Q6)||[]).forEach(function(p,g){var y=parseInt(r[g+1],10);switch(p.toLowerCase().charAt(0)){case"y":n=y;break;case"d":i=y;break;case"h":o=y;break;case"s":u=y;break;case"m":o>=0?l=y:s=y;break}}),u>=0&&l==-1&&s>=0&&(l=s,s=-1);var h=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);h.length==7&&(h="0"+h),h.length==8&&(h="20"+h);var f=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2);return o==-1&&l==-1&&u==-1?h:n==-1&&s==-1&&i==-1?f:h+"T"+f}var CK=function(){var t={};t.version="1.2.0";function e(){for(var N=0,T=new Array(256),R=0;R!=256;++R)N=R,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,T[R]=N;return typeof Int32Array<"u"?new Int32Array(T):T}var r=e();function n(N){var T=0,R=0,B=0,z=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)z[B]=N[B];for(B=0;B!=256;++B)for(R=N[B],T=256+B;T<4096;T+=256)R=z[T]=R>>>8^N[R&255];var O=[];for(B=1;B!=16;++B)O[B-1]=typeof Int32Array<"u"?z.subarray(B*256,B*256+256):z.slice(B*256,B*256+256);return O}var s=n(r),i=s[0],o=s[1],l=s[2],u=s[3],h=s[4],f=s[5],p=s[6],g=s[7],y=s[8],w=s[9],b=s[10],_=s[11],P=s[12],A=s[13],k=s[14];function F(N,T){for(var R=T^-1,B=0,z=N.length;B<z;)R=R>>>8^r[(R^N.charCodeAt(B++))&255];return~R}function L(N,T){for(var R=T^-1,B=N.length-15,z=0;z<B;)R=k[N[z++]^R&255]^A[N[z++]^R>>8&255]^P[N[z++]^R>>16&255]^_[N[z++]^R>>>24]^b[N[z++]]^w[N[z++]]^y[N[z++]]^g[N[z++]]^p[N[z++]]^f[N[z++]]^h[N[z++]]^u[N[z++]]^l[N[z++]]^o[N[z++]]^i[N[z++]]^r[N[z++]];for(B+=15;z<B;)R=R>>>8^r[(R^N[z++])&255];return~R}function I(N,T){for(var R=T^-1,B=0,z=N.length,O=0,D=0;B<z;)O=N.charCodeAt(B++),O<128?R=R>>>8^r[(R^O)&255]:O<2048?(R=R>>>8^r[(R^(192|O>>6&31))&255],R=R>>>8^r[(R^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,D=N.charCodeAt(B++)&1023,R=R>>>8^r[(R^(240|O>>8&7))&255],R=R>>>8^r[(R^(128|O>>2&63))&255],R=R>>>8^r[(R^(128|D>>6&15|(O&3)<<4))&255],R=R>>>8^r[(R^(128|D&63))&255]):(R=R>>>8^r[(R^(224|O>>12&15))&255],R=R>>>8^r[(R^(128|O>>6&63))&255],R=R>>>8^r[(R^(128|O&63))&255]);return~R}return t.table=r,t.bstr=F,t.buf=L,t.str=I,t}(),_t=function(){var e={};e.version="1.2.1";function r(G,oe){for(var te=G.split("/"),se=oe.split("/"),ce=0,ue=0,Ee=Math.min(te.length,se.length);ce<Ee;++ce){if(ue=te[ce].length-se[ce].length)return ue;if(te[ce]!=se[ce])return te[ce]<se[ce]?-1:1}return te.length-se.length}function n(G){if(G.charAt(G.length-1)=="/")return G.slice(0,-1).indexOf("/")===-1?G:n(G.slice(0,-1));var oe=G.lastIndexOf("/");return oe===-1?G:G.slice(0,oe+1)}function s(G){if(G.charAt(G.length-1)=="/")return s(G.slice(0,-1));var oe=G.lastIndexOf("/");return oe===-1?G:G.slice(oe+1)}function i(G,oe){typeof oe=="string"&&(oe=new Date(oe));var te=oe.getHours();te=te<<6|oe.getMinutes(),te=te<<5|oe.getSeconds()>>>1,G.write_shift(2,te);var se=oe.getFullYear()-1980;se=se<<4|oe.getMonth()+1,se=se<<5|oe.getDate(),G.write_shift(2,se)}function o(G){var oe=G.read_shift(2)&65535,te=G.read_shift(2)&65535,se=new Date,ce=te&31;te>>>=5;var ue=te&15;te>>>=4,se.setMilliseconds(0),se.setFullYear(te+1980),se.setMonth(ue-1),se.setDate(ce);var Ee=oe&31;oe>>>=5;var Fe=oe&63;return oe>>>=6,se.setHours(oe),se.setMinutes(Fe),se.setSeconds(Ee<<1),se}function l(G){Kn(G,0);for(var oe={},te=0;G.l<=G.length-4;){var se=G.read_shift(2),ce=G.read_shift(2),ue=G.l+ce,Ee={};switch(se){case 21589:te=G.read_shift(1),te&1&&(Ee.mtime=G.read_shift(4)),ce>5&&(te&2&&(Ee.atime=G.read_shift(4)),te&4&&(Ee.ctime=G.read_shift(4))),Ee.mtime&&(Ee.mt=new Date(Ee.mtime*1e3));break}G.l=ue,oe[se]=Ee}return oe}var u;function h(){return u||(u={})}function f(G,oe){if(G[0]==80&&G[1]==75)return pa(G,oe);if((G[0]|32)==109&&(G[1]|32)==105)return Gl(G,oe);if(G.length<512)throw new Error("CFB file size "+G.length+" < 512");var te=3,se=512,ce=0,ue=0,Ee=0,Fe=0,Se=0,Te=[],je=G.slice(0,512);Kn(je,0);var Ge=p(je);switch(te=Ge[0],te){case 3:se=512;break;case 4:se=4096;break;case 0:if(Ge[1]==0)return pa(G,oe);default:throw new Error("Major Version: Expected 3 or 4 saw "+te)}se!==512&&(je=G.slice(0,se),Kn(je,28));var et=G.slice(0,se);g(je,te);var dt=je.read_shift(4,"i");if(te===3&&dt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+dt);je.l+=4,Ee=je.read_shift(4,"i"),je.l+=4,je.chk("00100000","Mini Stream Cutoff Size: "),Fe=je.read_shift(4,"i"),ce=je.read_shift(4,"i"),Se=je.read_shift(4,"i"),ue=je.read_shift(4,"i");for(var Qe=-1,Xe=0;Xe<109&&(Qe=je.read_shift(4,"i"),!(Qe<0));++Xe)Te[Xe]=Qe;var Pt=y(G,se);_(Se,ue,Pt,se,Te);var cr=A(Pt,Ee,Te,se);cr[Ee].name="!Directory",ce>0&&Fe!==D&&(cr[Fe].name="!MiniFAT"),cr[Te[0]].name="!FAT",cr.fat_addrs=Te,cr.ssz=se;var ar={},fr=[],Va=[],ui=[];k(Ee,cr,Pt,fr,ce,ar,Va,Fe),w(Va,ui,fr),fr.shift();var Ys={FileIndex:Va,FullPaths:ui};return oe&&oe.raw&&(Ys.raw={header:et,sectors:Pt}),Ys}function p(G){if(G[G.l]==80&&G[G.l+1]==75)return[0,0];G.chk(ie,"Header Signature: "),G.l+=16;var oe=G.read_shift(2,"u");return[G.read_shift(2,"u"),oe]}function g(G,oe){var te=9;switch(G.l+=2,te=G.read_shift(2)){case 9:if(oe!=3)throw new Error("Sector Shift: Expected 9 saw "+te);break;case 12:if(oe!=4)throw new Error("Sector Shift: Expected 12 saw "+te);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+te)}G.chk("0600","Mini Sector Shift: "),G.chk("000000000000","Reserved: ")}function y(G,oe){for(var te=Math.ceil(G.length/oe)-1,se=[],ce=1;ce<te;++ce)se[ce-1]=G.slice(ce*oe,(ce+1)*oe);return se[te-1]=G.slice(te*oe),se}function w(G,oe,te){for(var se=0,ce=0,ue=0,Ee=0,Fe=0,Se=te.length,Te=[],je=[];se<Se;++se)Te[se]=je[se]=se,oe[se]=te[se];for(;Fe<je.length;++Fe)se=je[Fe],ce=G[se].L,ue=G[se].R,Ee=G[se].C,Te[se]===se&&(ce!==-1&&Te[ce]!==ce&&(Te[se]=Te[ce]),ue!==-1&&Te[ue]!==ue&&(Te[se]=Te[ue])),Ee!==-1&&(Te[Ee]=se),ce!==-1&&se!=Te[se]&&(Te[ce]=Te[se],je.lastIndexOf(ce)<Fe&&je.push(ce)),ue!==-1&&se!=Te[se]&&(Te[ue]=Te[se],je.lastIndexOf(ue)<Fe&&je.push(ue));for(se=1;se<Se;++se)Te[se]===se&&(ue!==-1&&Te[ue]!==ue?Te[se]=Te[ue]:ce!==-1&&Te[ce]!==ce&&(Te[se]=Te[ce]));for(se=1;se<Se;++se)if(G[se].type!==0){if(Fe=se,Fe!=Te[Fe])do Fe=Te[Fe],oe[se]=oe[Fe]+"/"+oe[se];while(Fe!==0&&Te[Fe]!==-1&&Fe!=Te[Fe]);Te[se]=-1}for(oe[0]+="/",se=1;se<Se;++se)G[se].type!==2&&(oe[se]+="/")}function b(G,oe,te){for(var se=G.start,ce=G.size,ue=[],Ee=se;te&&ce>0&&Ee>=0;)ue.push(oe.slice(Ee*O,Ee*O+O)),ce-=O,Ee=xc(te,Ee*4);return ue.length===0?Le(0):Fn(ue).slice(0,G.size)}function _(G,oe,te,se,ce){var ue=D;if(G===D){if(oe!==0)throw new Error("DIFAT chain shorter than expected")}else if(G!==-1){var Ee=te[G],Fe=(se>>>2)-1;if(!Ee)return;for(var Se=0;Se<Fe&&(ue=xc(Ee,Se*4))!==D;++Se)ce.push(ue);_(xc(Ee,se-4),oe-1,te,se,ce)}}function P(G,oe,te,se,ce){var ue=[],Ee=[];ce||(ce=[]);var Fe=se-1,Se=0,Te=0;for(Se=oe;Se>=0;){ce[Se]=!0,ue[ue.length]=Se,Ee.push(G[Se]);var je=te[Math.floor(Se*4/se)];if(Te=Se*4&Fe,se<4+Te)throw new Error("FAT boundary crossed: "+Se+" 4 "+se);if(!G[je])break;Se=xc(G[je],Te)}return{nodes:ue,data:P4([Ee])}}function A(G,oe,te,se){var ce=G.length,ue=[],Ee=[],Fe=[],Se=[],Te=se-1,je=0,Ge=0,et=0,dt=0;for(je=0;je<ce;++je)if(Fe=[],et=je+oe,et>=ce&&(et-=ce),!Ee[et]){Se=[];var Qe=[];for(Ge=et;Ge>=0;){Qe[Ge]=!0,Ee[Ge]=!0,Fe[Fe.length]=Ge,Se.push(G[Ge]);var Xe=te[Math.floor(Ge*4/se)];if(dt=Ge*4&Te,se<4+dt)throw new Error("FAT boundary crossed: "+Ge+" 4 "+se);if(!G[Xe]||(Ge=xc(G[Xe],dt),Qe[Ge]))break}ue[et]={nodes:Fe,data:P4([Se])}}return ue}function k(G,oe,te,se,ce,ue,Ee,Fe){for(var Se=0,Te=se.length?2:0,je=oe[G].data,Ge=0,et=0,dt;Ge<je.length;Ge+=128){var Qe=je.slice(Ge,Ge+128);Kn(Qe,64),et=Qe.read_shift(2),dt=zb(Qe,0,et-Te),se.push(dt);var Xe={name:dt,type:Qe.read_shift(1),color:Qe.read_shift(1),L:Qe.read_shift(4,"i"),R:Qe.read_shift(4,"i"),C:Qe.read_shift(4,"i"),clsid:Qe.read_shift(16),state:Qe.read_shift(4,"i"),start:0,size:0},Pt=Qe.read_shift(2)+Qe.read_shift(2)+Qe.read_shift(2)+Qe.read_shift(2);Pt!==0&&(Xe.ct=F(Qe,Qe.l-8));var cr=Qe.read_shift(2)+Qe.read_shift(2)+Qe.read_shift(2)+Qe.read_shift(2);cr!==0&&(Xe.mt=F(Qe,Qe.l-8)),Xe.start=Qe.read_shift(4,"i"),Xe.size=Qe.read_shift(4,"i"),Xe.size<0&&Xe.start<0&&(Xe.size=Xe.type=0,Xe.start=D,Xe.name=""),Xe.type===5?(Se=Xe.start,ce>0&&Se!==D&&(oe[Se].name="!StreamData")):Xe.size>=4096?(Xe.storage="fat",oe[Xe.start]===void 0&&(oe[Xe.start]=P(te,Xe.start,oe.fat_addrs,oe.ssz)),oe[Xe.start].name=Xe.name,Xe.content=oe[Xe.start].data.slice(0,Xe.size)):(Xe.storage="minifat",Xe.size<0?Xe.size=0:Se!==D&&Xe.start!==D&&oe[Se]&&(Xe.content=b(Xe,oe[Se].data,(oe[Fe]||{}).data))),Xe.content&&Kn(Xe.content,0),ue[dt]=Xe,Ee.push(Xe)}}function F(G,oe){return new Date((ia(G,oe+4)/1e7*Math.pow(2,32)+ia(G,oe)/1e7-11644473600)*1e3)}function L(G,oe){return h(),f(u.readFileSync(G),oe)}function I(G,oe){var te=oe&&oe.type;switch(te||Ht&&Buffer.isBuffer(G)&&(te="buffer"),te||"base64"){case"file":return L(G,oe);case"base64":return f(oa(ma(G)),oe);case"binary":return f(oa(G),oe)}return f(G,oe)}function N(G,oe){var te=oe||{},se=te.root||"Root Entry";if(G.FullPaths||(G.FullPaths=[]),G.FileIndex||(G.FileIndex=[]),G.FullPaths.length!==G.FileIndex.length)throw new Error("inconsistent CFB structure");G.FullPaths.length===0&&(G.FullPaths[0]=se+"/",G.FileIndex[0]={name:se,type:5}),te.CLSID&&(G.FileIndex[0].clsid=te.CLSID),T(G)}function T(G){var oe="Sh33tJ5";if(!_t.find(G,"/"+oe)){var te=Le(4);te[0]=55,te[1]=te[3]=50,te[2]=54,G.FileIndex.push({name:oe,type:2,content:te,size:4,L:69,R:69,C:69}),G.FullPaths.push(G.FullPaths[0]+oe),R(G)}}function R(G,oe){N(G);for(var te=!1,se=!1,ce=G.FullPaths.length-1;ce>=0;--ce){var ue=G.FileIndex[ce];switch(ue.type){case 0:se?te=!0:(G.FileIndex.pop(),G.FullPaths.pop());break;case 1:case 2:case 5:se=!0,isNaN(ue.R*ue.L*ue.C)&&(te=!0),ue.R>-1&&ue.L>-1&&ue.R==ue.L&&(te=!0);break;default:te=!0;break}}if(!(!te&&!oe)){var Ee=new Date(1987,1,19),Fe=0,Se=Object.create?Object.create(null):{},Te=[];for(ce=0;ce<G.FullPaths.length;++ce)Se[G.FullPaths[ce]]=!0,G.FileIndex[ce].type!==0&&Te.push([G.FullPaths[ce],G.FileIndex[ce]]);for(ce=0;ce<Te.length;++ce){var je=n(Te[ce][0]);se=Se[je],se||(Te.push([je,{name:s(je).replace("/",""),type:1,clsid:ne,ct:Ee,mt:Ee,content:null}]),Se[je]=!0)}for(Te.sort(function(dt,Qe){return r(dt[0],Qe[0])}),G.FullPaths=[],G.FileIndex=[],ce=0;ce<Te.length;++ce)G.FullPaths[ce]=Te[ce][0],G.FileIndex[ce]=Te[ce][1];for(ce=0;ce<Te.length;++ce){var Ge=G.FileIndex[ce],et=G.FullPaths[ce];if(Ge.name=s(et).replace("/",""),Ge.L=Ge.R=Ge.C=-(Ge.color=1),Ge.size=Ge.content?Ge.content.length:0,Ge.start=0,Ge.clsid=Ge.clsid||ne,ce===0)Ge.C=Te.length>1?1:-1,Ge.size=0,Ge.type=5;else if(et.slice(-1)=="/"){for(Fe=ce+1;Fe<Te.length&&n(G.FullPaths[Fe])!=et;++Fe);for(Ge.C=Fe>=Te.length?-1:Fe,Fe=ce+1;Fe<Te.length&&n(G.FullPaths[Fe])!=n(et);++Fe);Ge.R=Fe>=Te.length?-1:Fe,Ge.type=1}else n(G.FullPaths[ce+1]||"")==n(et)&&(Ge.R=ce+1),Ge.type=2}}}function B(G,oe){var te=oe||{};if(te.fileType=="mad")return Or(G,te);switch(R(G),te.fileType){case"zip":return Wt(G,te)}var se=function(dt){for(var Qe=0,Xe=0,Pt=0;Pt<dt.FileIndex.length;++Pt){var cr=dt.FileIndex[Pt];if(cr.content){var ar=cr.content.length;ar>0&&(ar<4096?Qe+=ar+63>>6:Xe+=ar+511>>9)}}for(var fr=dt.FullPaths.length+3>>2,Va=Qe+7>>3,ui=Qe+127>>7,Ys=Va+Xe+fr+ui,tn=Ys+127>>7,Do=tn<=109?0:Math.ceil((tn-109)/127);Ys+tn+Do+127>>7>tn;)Do=++tn<=109?0:Math.ceil((tn-109)/127);var Sr=[1,Do,tn,ui,fr,Xe,Qe,0];return dt.FileIndex[0].size=Qe<<6,Sr[7]=(dt.FileIndex[0].start=Sr[0]+Sr[1]+Sr[2]+Sr[3]+Sr[4]+Sr[5])+(Sr[6]+7>>3),Sr}(G),ce=Le(se[7]<<9),ue=0,Ee=0;{for(ue=0;ue<8;++ue)ce.write_shift(1,Z[ue]);for(ue=0;ue<8;++ue)ce.write_shift(2,0);for(ce.write_shift(2,62),ce.write_shift(2,3),ce.write_shift(2,65534),ce.write_shift(2,9),ce.write_shift(2,6),ue=0;ue<3;++ue)ce.write_shift(2,0);for(ce.write_shift(4,0),ce.write_shift(4,se[2]),ce.write_shift(4,se[0]+se[1]+se[2]+se[3]-1),ce.write_shift(4,0),ce.write_shift(4,4096),ce.write_shift(4,se[3]?se[0]+se[1]+se[2]-1:D),ce.write_shift(4,se[3]),ce.write_shift(-4,se[1]?se[0]-1:D),ce.write_shift(4,se[1]),ue=0;ue<109;++ue)ce.write_shift(-4,ue<se[2]?se[1]+ue:-1)}if(se[1])for(Ee=0;Ee<se[1];++Ee){for(;ue<236+Ee*127;++ue)ce.write_shift(-4,ue<se[2]?se[1]+ue:-1);ce.write_shift(-4,Ee===se[1]-1?D:Ee+1)}var Fe=function(dt){for(Ee+=dt;ue<Ee-1;++ue)ce.write_shift(-4,ue+1);dt&&(++ue,ce.write_shift(-4,D))};for(Ee=ue=0,Ee+=se[1];ue<Ee;++ue)ce.write_shift(-4,H.DIFSECT);for(Ee+=se[2];ue<Ee;++ue)ce.write_shift(-4,H.FATSECT);Fe(se[3]),Fe(se[4]);for(var Se=0,Te=0,je=G.FileIndex[0];Se<G.FileIndex.length;++Se)je=G.FileIndex[Se],je.content&&(Te=je.content.length,!(Te<4096)&&(je.start=Ee,Fe(Te+511>>9)));for(Fe(se[6]+7>>3);ce.l&511;)ce.write_shift(-4,H.ENDOFCHAIN);for(Ee=ue=0,Se=0;Se<G.FileIndex.length;++Se)je=G.FileIndex[Se],je.content&&(Te=je.content.length,!(!Te||Te>=4096)&&(je.start=Ee,Fe(Te+63>>6)));for(;ce.l&511;)ce.write_shift(-4,H.ENDOFCHAIN);for(ue=0;ue<se[4]<<2;++ue){var Ge=G.FullPaths[ue];if(!Ge||Ge.length===0){for(Se=0;Se<17;++Se)ce.write_shift(4,0);for(Se=0;Se<3;++Se)ce.write_shift(4,-1);for(Se=0;Se<12;++Se)ce.write_shift(4,0);continue}je=G.FileIndex[ue],ue===0&&(je.start=je.size?je.start-1:D);var et=ue===0&&te.root||je.name;if(Te=2*(et.length+1),ce.write_shift(64,et,"utf16le"),ce.write_shift(2,Te),ce.write_shift(1,je.type),ce.write_shift(1,je.color),ce.write_shift(-4,je.L),ce.write_shift(-4,je.R),ce.write_shift(-4,je.C),je.clsid)ce.write_shift(16,je.clsid,"hex");else for(Se=0;Se<4;++Se)ce.write_shift(4,0);ce.write_shift(4,je.state||0),ce.write_shift(4,0),ce.write_shift(4,0),ce.write_shift(4,0),ce.write_shift(4,0),ce.write_shift(4,je.start),ce.write_shift(4,je.size),ce.write_shift(4,0)}for(ue=1;ue<G.FileIndex.length;++ue)if(je=G.FileIndex[ue],je.size>=4096)if(ce.l=je.start+1<<9,Ht&&Buffer.isBuffer(je.content))je.content.copy(ce,ce.l,0,je.size),ce.l+=je.size+511&-512;else{for(Se=0;Se<je.size;++Se)ce.write_shift(1,je.content[Se]);for(;Se&511;++Se)ce.write_shift(1,0)}for(ue=1;ue<G.FileIndex.length;++ue)if(je=G.FileIndex[ue],je.size>0&&je.size<4096)if(Ht&&Buffer.isBuffer(je.content))je.content.copy(ce,ce.l,0,je.size),ce.l+=je.size+63&-64;else{for(Se=0;Se<je.size;++Se)ce.write_shift(1,je.content[Se]);for(;Se&63;++Se)ce.write_shift(1,0)}if(Ht)ce.l=ce.length;else for(;ce.l<ce.length;)ce.write_shift(1,0);return ce}function z(G,oe){var te=G.FullPaths.map(function(Se){return Se.toUpperCase()}),se=te.map(function(Se){var Te=Se.split("/");return Te[Te.length-(Se.slice(-1)=="/"?2:1)]}),ce=!1;oe.charCodeAt(0)===47?(ce=!0,oe=te[0].slice(0,-1)+oe):ce=oe.indexOf("/")!==-1;var ue=oe.toUpperCase(),Ee=ce===!0?te.indexOf(ue):se.indexOf(ue);if(Ee!==-1)return G.FileIndex[Ee];var Fe=!ue.match(Xh);for(ue=ue.replace(As,""),Fe&&(ue=ue.replace(Xh,"!")),Ee=0;Ee<te.length;++Ee)if((Fe?te[Ee].replace(Xh,"!"):te[Ee]).replace(As,"")==ue||(Fe?se[Ee].replace(Xh,"!"):se[Ee]).replace(As,"")==ue)return G.FileIndex[Ee];return null}var O=64,D=-2,ie="d0cf11e0a1b11ae1",Z=[208,207,17,224,161,177,26,225],ne="00000000000000000000000000000000",H={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:ie,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ne,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Q(G,oe,te){h();var se=B(G,te);u.writeFileSync(oe,se)}function q(G){for(var oe=new Array(G.length),te=0;te<G.length;++te)oe[te]=String.fromCharCode(G[te]);return oe.join("")}function ae(G,oe){var te=B(G,oe);switch(oe&&oe.type||"buffer"){case"file":return h(),u.writeFileSync(oe.filename,te),te;case"binary":return typeof te=="string"?te:q(te);case"base64":return $f(typeof te=="string"?te:q(te));case"buffer":if(Ht)return Buffer.isBuffer(te)?te:Ao(te);case"array":return typeof te=="string"?oa(te):te}return te}var U;function M(G){try{var oe=G.InflateRaw,te=new oe;if(te._processChunk(new Uint8Array([3,0]),te._finishFlushFlag),te.bytesRead)U=G;else throw new Error("zlib does not expose bytesRead")}catch(se){console.error("cannot use native zlib: "+(se.message||se))}}function X(G,oe){if(!U)return Vn(G,oe);var te=U.InflateRaw,se=new te,ce=se._processChunk(G.slice(G.l),se._finishFlushFlag);return G.l+=se.bytesRead,ce}function K(G){return U?U.deflateRawSync(G):it(G)}var Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],xe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function fe(G){var oe=(G<<1|G<<11)&139536|(G<<5|G<<15)&558144;return(oe>>16|oe>>8|oe)&255}for(var ve=typeof Uint8Array<"u",we=ve?new Uint8Array(256):[],We=0;We<256;++We)we[We]=fe(We);function re(G,oe){var te=we[G&255];return oe<=8?te>>>8-oe:(te=te<<8|we[G>>8&255],oe<=16?te>>>16-oe:(te=te<<8|we[G>>16&255],te>>>24-oe))}function st(G,oe){var te=oe&7,se=oe>>>3;return(G[se]|(te<=6?0:G[se+1]<<8))>>>te&3}function Re(G,oe){var te=oe&7,se=oe>>>3;return(G[se]|(te<=5?0:G[se+1]<<8))>>>te&7}function he(G,oe){var te=oe&7,se=oe>>>3;return(G[se]|(te<=4?0:G[se+1]<<8))>>>te&15}function me(G,oe){var te=oe&7,se=oe>>>3;return(G[se]|(te<=3?0:G[se+1]<<8))>>>te&31}function ee(G,oe){var te=oe&7,se=oe>>>3;return(G[se]|(te<=1?0:G[se+1]<<8))>>>te&127}function pe(G,oe,te){var se=oe&7,ce=oe>>>3,ue=(1<<te)-1,Ee=G[ce]>>>se;return te<8-se||(Ee|=G[ce+1]<<8-se,te<16-se)||(Ee|=G[ce+2]<<16-se,te<24-se)||(Ee|=G[ce+3]<<24-se),Ee&ue}function Ce(G,oe,te){var se=oe&7,ce=oe>>>3;return se<=5?G[ce]|=(te&7)<<se:(G[ce]|=te<<se&255,G[ce+1]=(te&7)>>8-se),oe+3}function $e(G,oe,te){var se=oe&7,ce=oe>>>3;return te=(te&1)<<se,G[ce]|=te,oe+1}function ot(G,oe,te){var se=oe&7,ce=oe>>>3;return te<<=se,G[ce]|=te&255,te>>>=8,G[ce+1]=te,oe+8}function xt(G,oe,te){var se=oe&7,ce=oe>>>3;return te<<=se,G[ce]|=te&255,te>>>=8,G[ce+1]=te&255,G[ce+2]=te>>>8,oe+16}function Nt(G,oe){var te=G.length,se=2*te>oe?2*te:oe+5,ce=0;if(te>=oe)return G;if(Ht){var ue=f4(se);if(G.copy)G.copy(ue);else for(;ce<G.length;++ce)ue[ce]=G[ce];return ue}else if(ve){var Ee=new Uint8Array(se);if(Ee.set)Ee.set(G);else for(;ce<te;++ce)Ee[ce]=G[ce];return Ee}return G.length=se,G}function Me(G){for(var oe=new Array(G),te=0;te<G;++te)oe[te]=0;return oe}function be(G,oe,te){var se=1,ce=0,ue=0,Ee=0,Fe=0,Se=G.length,Te=ve?new Uint16Array(32):Me(32);for(ue=0;ue<32;++ue)Te[ue]=0;for(ue=Se;ue<te;++ue)G[ue]=0;Se=G.length;var je=ve?new Uint16Array(Se):Me(Se);for(ue=0;ue<Se;++ue)Te[ce=G[ue]]++,se<ce&&(se=ce),je[ue]=0;for(Te[0]=0,ue=1;ue<=se;++ue)Te[ue+16]=Fe=Fe+Te[ue-1]<<1;for(ue=0;ue<Se;++ue)Fe=G[ue],Fe!=0&&(je[ue]=Te[Fe+16]++);var Ge=0;for(ue=0;ue<Se;++ue)if(Ge=G[ue],Ge!=0)for(Fe=re(je[ue],se)>>se-Ge,Ee=(1<<se+4-Ge)-1;Ee>=0;--Ee)oe[Fe|Ee<<Ge]=Ge&15|ue<<4;return se}var Pe=ve?new Uint16Array(512):Me(512),lt=ve?new Uint16Array(32):Me(32);if(!ve){for(var ct=0;ct<512;++ct)Pe[ct]=0;for(ct=0;ct<32;++ct)lt[ct]=0}(function(){for(var G=[],oe=0;oe<32;oe++)G.push(5);be(G,lt,32);var te=[];for(oe=0;oe<=143;oe++)te.push(8);for(;oe<=255;oe++)te.push(9);for(;oe<=279;oe++)te.push(7);for(;oe<=287;oe++)te.push(8);be(te,Pe,288)})();var Bt=function(){for(var oe=ve?new Uint8Array(32768):[],te=0,se=0;te<le.length-1;++te)for(;se<le[te+1];++se)oe[se]=te;for(;se<32768;++se)oe[se]=29;var ce=ve?new Uint8Array(259):[];for(te=0,se=0;te<xe.length-1;++te)for(;se<xe[te+1];++se)ce[se]=te;function ue(Fe,Se){for(var Te=0;Te<Fe.length;){var je=Math.min(65535,Fe.length-Te),Ge=Te+je==Fe.length;for(Se.write_shift(1,+Ge),Se.write_shift(2,je),Se.write_shift(2,~je&65535);je-- >0;)Se[Se.l++]=Fe[Te++]}return Se.l}function Ee(Fe,Se){for(var Te=0,je=0,Ge=ve?new Uint16Array(32768):[];je<Fe.length;){var et=Math.min(65535,Fe.length-je);if(et<10){for(Te=Ce(Se,Te,+(je+et==Fe.length)),Te&7&&(Te+=8-(Te&7)),Se.l=Te/8|0,Se.write_shift(2,et),Se.write_shift(2,~et&65535);et-- >0;)Se[Se.l++]=Fe[je++];Te=Se.l*8;continue}Te=Ce(Se,Te,+(je+et==Fe.length)+2);for(var dt=0;et-- >0;){var Qe=Fe[je];dt=(dt<<5^Qe)&32767;var Xe=-1,Pt=0;if((Xe=Ge[dt])&&(Xe|=je&-32768,Xe>je&&(Xe-=32768),Xe<je))for(;Fe[Xe+Pt]==Fe[je+Pt]&&Pt<250;)++Pt;if(Pt>2){Qe=ce[Pt],Qe<=22?Te=ot(Se,Te,we[Qe+1]>>1)-1:(ot(Se,Te,3),Te+=5,ot(Se,Te,we[Qe-23]>>5),Te+=3);var cr=Qe<8?0:Qe-4>>2;cr>0&&(xt(Se,Te,Pt-xe[Qe]),Te+=cr),Qe=oe[je-Xe],Te=ot(Se,Te,we[Qe]>>3),Te-=3;var ar=Qe<4?0:Qe-2>>1;ar>0&&(xt(Se,Te,je-Xe-le[Qe]),Te+=ar);for(var fr=0;fr<Pt;++fr)Ge[dt]=je&32767,dt=(dt<<5^Fe[je])&32767,++je;et-=Pt-1}else Qe<=143?Qe=Qe+48:Te=$e(Se,Te,1),Te=ot(Se,Te,we[Qe]),Ge[dt]=je&32767,++je}Te=ot(Se,Te,0)-1}return Se.l=(Te+7)/8|0,Se.l}return function(Se,Te){return Se.length<8?ue(Se,Te):Ee(Se,Te)}}();function it(G){var oe=Le(50+Math.floor(G.length*1.1)),te=Bt(G,oe);return oe.slice(0,te)}var kt=ve?new Uint16Array(32768):Me(32768),er=ve?new Uint16Array(32768):Me(32768),lr=ve?new Uint16Array(128):Me(128),un=1,Is=1;function Xs(G,oe){var te=me(G,oe)+257;oe+=5;var se=me(G,oe)+1;oe+=5;var ce=he(G,oe)+4;oe+=4;for(var ue=0,Ee=ve?new Uint8Array(19):Me(19),Fe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Se=1,Te=ve?new Uint8Array(8):Me(8),je=ve?new Uint8Array(8):Me(8),Ge=Ee.length,et=0;et<ce;++et)Ee[Y[et]]=ue=Re(G,oe),Se<ue&&(Se=ue),Te[ue]++,oe+=3;var dt=0;for(Te[0]=0,et=1;et<=Se;++et)je[et]=dt=dt+Te[et-1]<<1;for(et=0;et<Ge;++et)(dt=Ee[et])!=0&&(Fe[et]=je[dt]++);var Qe=0;for(et=0;et<Ge;++et)if(Qe=Ee[et],Qe!=0){dt=we[Fe[et]]>>8-Qe;for(var Xe=(1<<7-Qe)-1;Xe>=0;--Xe)lr[dt|Xe<<Qe]=Qe&7|et<<3}var Pt=[];for(Se=1;Pt.length<te+se;)switch(dt=lr[ee(G,oe)],oe+=dt&7,dt>>>=3){case 16:for(ue=3+st(G,oe),oe+=2,dt=Pt[Pt.length-1];ue-- >0;)Pt.push(dt);break;case 17:for(ue=3+Re(G,oe),oe+=3;ue-- >0;)Pt.push(0);break;case 18:for(ue=11+ee(G,oe),oe+=7;ue-- >0;)Pt.push(0);break;default:Pt.push(dt),Se<dt&&(Se=dt);break}var cr=Pt.slice(0,te),ar=Pt.slice(te);for(et=te;et<286;++et)cr[et]=0;for(et=se;et<30;++et)ar[et]=0;return un=be(cr,kt,286),Is=be(ar,er,30),oe}function Ps(G,oe){if(G[0]==3&&!(G[1]&3))return[Pl(oe),2];for(var te=0,se=0,ce=f4(oe||1<<18),ue=0,Ee=ce.length>>>0,Fe=0,Se=0;(se&1)==0;){if(se=Re(G,te),te+=3,se>>>1)se>>1==1?(Fe=9,Se=5):(te=Xs(G,te),Fe=un,Se=Is);else{te&7&&(te+=8-(te&7));var Te=G[te>>>3]|G[(te>>>3)+1]<<8;if(te+=32,Te>0)for(!oe&&Ee<ue+Te&&(ce=Nt(ce,ue+Te),Ee=ce.length);Te-- >0;)ce[ue++]=G[te>>>3],te+=8;continue}for(;;){!oe&&Ee<ue+32767&&(ce=Nt(ce,ue+32767),Ee=ce.length);var je=pe(G,te,Fe),Ge=se>>>1==1?Pe[je]:kt[je];if(te+=Ge&15,Ge>>>=4,(Ge>>>8&255)===0)ce[ue++]=Ge;else{if(Ge==256)break;Ge-=257;var et=Ge<8?0:Ge-4>>2;et>5&&(et=0);var dt=ue+xe[Ge];et>0&&(dt+=pe(G,te,et),te+=et),je=pe(G,te,Se),Ge=se>>>1==1?lt[je]:er[je],te+=Ge&15,Ge>>>=4;var Qe=Ge<4?0:Ge-2>>1,Xe=le[Ge];for(Qe>0&&(Xe+=pe(G,te,Qe),te+=Qe),!oe&&Ee<dt&&(ce=Nt(ce,dt+100),Ee=ce.length);ue<dt;)ce[ue]=ce[ue-Xe],++ue}}}return oe?[ce,te+7>>>3]:[ce.slice(0,ue),te+7>>>3]}function Vn(G,oe){var te=G.slice(G.l||0),se=Ps(te,oe);return G.l+=se[1],se[0]}function Rs(G,oe){if(G)typeof console<"u"&&console.error(oe);else throw new Error(oe)}function pa(G,oe){var te=G;Kn(te,0);var se=[],ce=[],ue={FileIndex:se,FullPaths:ce};N(ue,{root:oe.root});for(var Ee=te.length-4;(te[Ee]!=80||te[Ee+1]!=75||te[Ee+2]!=5||te[Ee+3]!=6)&&Ee>=0;)--Ee;te.l=Ee+4,te.l+=4;var Fe=te.read_shift(2);te.l+=6;var Se=te.read_shift(4);for(te.l=Se,Ee=0;Ee<Fe;++Ee){te.l+=20;var Te=te.read_shift(4),je=te.read_shift(4),Ge=te.read_shift(2),et=te.read_shift(2),dt=te.read_shift(2);te.l+=8;var Qe=te.read_shift(4),Xe=l(te.slice(te.l+Ge,te.l+Ge+et));te.l+=Ge+et+dt;var Pt=te.l;te.l=Qe+4,mt(te,Te,je,ue,Xe),te.l=Pt}return ue}function mt(G,oe,te,se,ce){G.l+=2;var ue=G.read_shift(2),Ee=G.read_shift(2),Fe=o(G);if(ue&8257)throw new Error("Unsupported ZIP encryption");for(var Se=G.read_shift(4),Te=G.read_shift(4),je=G.read_shift(4),Ge=G.read_shift(2),et=G.read_shift(2),dt="",Qe=0;Qe<Ge;++Qe)dt+=String.fromCharCode(G[G.l++]);if(et){var Xe=l(G.slice(G.l,G.l+et));(Xe[21589]||{}).mt&&(Fe=Xe[21589].mt),((ce||{})[21589]||{}).mt&&(Fe=ce[21589].mt)}G.l+=et;var Pt=G.slice(G.l,G.l+Te);switch(Ee){case 8:Pt=X(G,je);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ee)}var cr=!1;ue&8&&(Se=G.read_shift(4),Se==134695760&&(Se=G.read_shift(4),cr=!0),Te=G.read_shift(4),je=G.read_shift(4)),Te!=oe&&Rs(cr,"Bad compressed size: "+oe+" != "+Te),je!=te&&Rs(cr,"Bad uncompressed size: "+te+" != "+je),_s(se,dt,Pt,{unsafe:!0,mt:Fe})}function Wt(G,oe){var te=oe||{},se=[],ce=[],ue=Le(1),Ee=te.compression?8:0,Fe=0,Se=0,Te=0,je=0,Ge=0,et=G.FullPaths[0],dt=et,Qe=G.FileIndex[0],Xe=[],Pt=0;for(Se=1;Se<G.FullPaths.length;++Se)if(dt=G.FullPaths[Se].slice(et.length),Qe=G.FileIndex[Se],!(!Qe.size||!Qe.content||dt=="Sh33tJ5")){var cr=je,ar=Le(dt.length);for(Te=0;Te<dt.length;++Te)ar.write_shift(1,dt.charCodeAt(Te)&127);ar=ar.slice(0,ar.l),Xe[Ge]=CK.buf(Qe.content,0);var fr=Qe.content;Ee==8&&(fr=K(fr)),ue=Le(30),ue.write_shift(4,67324752),ue.write_shift(2,20),ue.write_shift(2,Fe),ue.write_shift(2,Ee),Qe.mt?i(ue,Qe.mt):ue.write_shift(4,0),ue.write_shift(-4,Xe[Ge]),ue.write_shift(4,fr.length),ue.write_shift(4,Qe.content.length),ue.write_shift(2,ar.length),ue.write_shift(2,0),je+=ue.length,se.push(ue),je+=ar.length,se.push(ar),je+=fr.length,se.push(fr),ue=Le(46),ue.write_shift(4,33639248),ue.write_shift(2,0),ue.write_shift(2,20),ue.write_shift(2,Fe),ue.write_shift(2,Ee),ue.write_shift(4,0),ue.write_shift(-4,Xe[Ge]),ue.write_shift(4,fr.length),ue.write_shift(4,Qe.content.length),ue.write_shift(2,ar.length),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(4,0),ue.write_shift(4,cr),Pt+=ue.l,ce.push(ue),Pt+=ar.length,ce.push(ar),++Ge}return ue=Le(22),ue.write_shift(4,101010256),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(2,Ge),ue.write_shift(2,Ge),ue.write_shift(4,Pt),ue.write_shift(4,je),ue.write_shift(2,0),Fn([Fn(se),Fn(ce),ue])}var ur={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Er(G,oe){if(G.ctype)return G.ctype;var te=G.name||"",se=te.match(/\.([^\.]+)$/);return se&&ur[se[1]]||oe&&(se=(te=oe).match(/[\.\\]([^\.\\])+$/),se&&ur[se[1]])?ur[se[1]]:"application/octet-stream"}function Tn(G){for(var oe=$f(G),te=[],se=0;se<oe.length;se+=76)te.push(oe.slice(se,se+76));return te.join(`\r
`)+`\r
`}function Bn(G){var oe=G.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Te){var je=Te.charCodeAt(0).toString(16).toUpperCase();return"="+(je.length==1?"0"+je:je)});oe=oe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),oe.charAt(0)==`
`&&(oe="=0D"+oe.slice(1)),oe=oe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var te=[],se=oe.split(`\r
`),ce=0;ce<se.length;++ce){var ue=se[ce];if(ue.length==0){te.push("");continue}for(var Ee=0;Ee<ue.length;){var Fe=76,Se=ue.slice(Ee,Ee+Fe);Se.charAt(Fe-1)=="="?Fe--:Se.charAt(Fe-2)=="="?Fe-=2:Se.charAt(Fe-3)=="="&&(Fe-=3),Se=ue.slice(Ee,Ee+Fe),Ee+=Fe,Ee<ue.length&&(Se+="="),te.push(Se)}}return te.join(`\r
`)}function ql(G){for(var oe=[],te=0;te<G.length;++te){for(var se=G[te];te<=G.length&&se.charAt(se.length-1)=="=";)se=se.slice(0,se.length-1)+G[++te];oe.push(se)}for(var ce=0;ce<oe.length;++ce)oe[ce]=oe[ce].replace(/[=][0-9A-Fa-f]{2}/g,function(ue){return String.fromCharCode(parseInt(ue.slice(1),16))});return oa(oe.join(`\r
`))}function Ma(G,oe,te){for(var se="",ce="",ue="",Ee,Fe=0;Fe<10;++Fe){var Se=oe[Fe];if(!Se||Se.match(/^\s*$/))break;var Te=Se.match(/^(.*?):\s*([^\s].*)$/);if(Te)switch(Te[1].toLowerCase()){case"content-location":se=Te[2].trim();break;case"content-type":ue=Te[2].trim();break;case"content-transfer-encoding":ce=Te[2].trim();break}}switch(++Fe,ce.toLowerCase()){case"base64":Ee=oa(ma(oe.slice(Fe).join("")));break;case"quoted-printable":Ee=ql(oe.slice(Fe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ce)}var je=_s(G,se.slice(te.length),Ee,{unsafe:!0});ue&&(je.ctype=ue)}function Gl(G,oe){if(q(G.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var te=oe&&oe.root||"",se=(Ht&&Buffer.isBuffer(G)?G.toString("binary"):q(G)).split(`\r
`),ce=0,ue="";for(ce=0;ce<se.length;++ce)if(ue=se[ce],!!/^Content-Location:/i.test(ue)&&(ue=ue.slice(ue.indexOf("file")),te||(te=ue.slice(0,ue.lastIndexOf("/")+1)),ue.slice(0,te.length)!=te))for(;te.length>0&&(te=te.slice(0,te.length-1),te=te.slice(0,te.lastIndexOf("/")+1),ue.slice(0,te.length)!=te););var Ee=(se[1]||"").match(/boundary="(.*?)"/);if(!Ee)throw new Error("MAD cannot find boundary");var Fe="--"+(Ee[1]||""),Se=[],Te=[],je={FileIndex:Se,FullPaths:Te};N(je);var Ge,et=0;for(ce=0;ce<se.length;++ce){var dt=se[ce];dt!==Fe&&dt!==Fe+"--"||(et++&&Ma(je,se.slice(Ge,ce),te),Ge=ce)}return je}function Or(G,oe){var te=oe||{},se=te.boundary||"SheetJS";se="------="+se;for(var ce=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+se.slice(2)+'"',"","",""],ue=G.FullPaths[0],Ee=ue,Fe=G.FileIndex[0],Se=1;Se<G.FullPaths.length;++Se)if(Ee=G.FullPaths[Se].slice(ue.length),Fe=G.FileIndex[Se],!(!Fe.size||!Fe.content||Ee=="Sh33tJ5")){Ee=Ee.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Pt){return"_x"+Pt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Pt){return"_u"+Pt.charCodeAt(0).toString(16)+"_"});for(var Te=Fe.content,je=Ht&&Buffer.isBuffer(Te)?Te.toString("binary"):q(Te),Ge=0,et=Math.min(1024,je.length),dt=0,Qe=0;Qe<=et;++Qe)(dt=je.charCodeAt(Qe))>=32&&dt<128&&++Ge;var Xe=Ge>=et*4/5;ce.push(se),ce.push("Content-Location: "+(te.root||"file:///C:/SheetJS/")+Ee),ce.push("Content-Transfer-Encoding: "+(Xe?"quoted-printable":"base64")),ce.push("Content-Type: "+Er(Fe,Ee)),ce.push(""),ce.push(Xe?Bn(je):Tn(je))}return ce.push(se+`--\r
`),ce.join(`\r
`)}function Po(G){var oe={};return N(oe,G),oe}function _s(G,oe,te,se){var ce=se&&se.unsafe;ce||N(G);var ue=!ce&&_t.find(G,oe);if(!ue){var Ee=G.FullPaths[0];oe.slice(0,Ee.length)==Ee?Ee=oe:(Ee.slice(-1)!="/"&&(Ee+="/"),Ee=(Ee+oe).replace("//","/")),ue={name:s(oe),type:2},G.FileIndex.push(ue),G.FullPaths.push(Ee),ce||_t.utils.cfb_gc(G)}return ue.content=te,ue.size=te?te.length:0,se&&(se.CLSID&&(ue.clsid=se.CLSID),se.mt&&(ue.mt=se.mt),se.ct&&(ue.ct=se.ct)),ue}function Mi(G,oe){N(G);var te=_t.find(G,oe);if(te){for(var se=0;se<G.FileIndex.length;++se)if(G.FileIndex[se]==te)return G.FileIndex.splice(se,1),G.FullPaths.splice(se,1),!0}return!1}function Vi(G,oe,te){N(G);var se=_t.find(G,oe);if(se){for(var ce=0;ce<G.FileIndex.length;++ce)if(G.FileIndex[ce]==se)return G.FileIndex[ce].name=s(te),G.FullPaths[ce]=te,!0}return!1}function Ro(G){R(G,!0)}return e.find=z,e.read=I,e.parse=f,e.write=ae,e.writeFile=Q,e.utils={cfb_new:Po,cfb_add:_s,cfb_del:Mi,cfb_mov:Vi,cfb_gc:Ro,ReadShift:hf,CheckField:y5,prep_blob:Kn,bconcat:Fn,use_zlib:M,_deflateRaw:it,_inflateRaw:Vn,consts:H},e}();function IK(t){return typeof t=="string"?kx(t):Array.isArray(t)?nK(t):t}function P0(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=kx(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?ki(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var s=new Blob([IK(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,t);if(typeof saveAs<"u")return saveAs(s,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=$l(e)),l.write(e),l.close(),e}catch(u){if(!u.message||!u.message.match(/onstruct/))throw u}throw new Error("cannot save file "+t)}function PK(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function en(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function b4(t,e){for(var r=[],n=en(t),s=0;s!==n.length;++s)r[t[n[s]][e]]==null&&(r[t[n[s]][e]]=n[s]);return r}function jx(t){for(var e=[],r=en(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function Ax(t){for(var e=[],r=en(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function RK(t){for(var e=[],r=en(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var wg=new Date(1899,11,30,0,0,0);function kn(t,e){var r=t.getTime(),n=wg.getTime()+(t.getTimezoneOffset()-wg.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var J6=new Date,DK=wg.getTime()+(J6.getTimezoneOffset()-wg.getTimezoneOffset())*6e4,_4=J6.getTimezoneOffset();function Cx(t){var e=new Date;return e.setTime(t*24*60*60*1e3+DK),e.getTimezoneOffset()!==_4&&e.setTime(e.getTime()+(e.getTimezoneOffset()-_4)*6e4),e}function FK(t){var e=0,r=0,n=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(s[i],10)}return e}var N4=new Date("2017-02-19T19:06:09.000Z"),Z6=isNaN(N4.getFullYear())?new Date("2/19/17"):N4,LK=Z6.getFullYear()==2017;function Pr(t,e){var r=new Date(t);if(LK)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(Z6.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Uc(t,e){if(Ht&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return ki(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return ki(B6(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return ki(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return ki(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function Rr(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Rr(t[r]));return e}function Qr(t,e){for(var r="";r.length<e;)r+=t;return r}function ni(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(e=Number(n)))?e/r:e}var OK=["january","february","march","april","may","june","july","august","september","october","november","december"];function Dd(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),i=e.getDate();if(isNaN(i))return r;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&OK.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var MK=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(t||typeof n=="string")return r.split(n);for(var i=r.split(n),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}}();function e5(t){return t?t.content&&t.type?Uc(t.content,!0):t.data?Kh(t.data):t.asNodeBuffer&&Ht?Kh(t.asNodeBuffer().toString("binary")):t.asBinary?Kh(t.asBinary()):t._data&&t._data.getContent?Kh(Uc(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function t5(t){if(!t)return null;if(t.data)return d4(t.data);if(t.asNodeBuffer&&Ht)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?d4(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function VK(t){return t&&t.name.slice(-4)===".bin"?t5(t):e5(t)}function Ca(t,e){for(var r=t.FullPaths||en(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||s==o)return t.files?t.files[r[i]]:t.FileIndex[i]}return null}function Lb(t,e){var r=Ca(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function pn(t,e,r){if(!r)return VK(Lb(t,e));if(!e)return null;try{return pn(t,e)}catch{return null}}function la(t,e,r){if(!r)return e5(Lb(t,e));if(!e)return null;try{return la(t,e)}catch{return null}}function BK(t,e,r){return t5(Lb(t,e))}function E4(t){for(var e=t.FullPaths||en(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Ut(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Ht?n=Ao(r):n=sK(r),_t.utils.cfb_add(t,e,n)}_t.utils.cfb_add(t,e,r)}else t.file(e,r)}function Ob(){return _t.utils.cfb_new()}function r5(t,e){switch(e.type){case"base64":return _t.read(t,{type:"base64"});case"binary":return _t.read(t,{type:"binary"});case"buffer":case"array":return _t.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Yh(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var cn=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,UK=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,S4=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,zK=/<[^>]*>/g,bs=cn.match(S4)?S4:zK,$K=/<\w*:/,HK=/<(\/?)\w+:/;function Rt(t,e,r){for(var n={},s=0,i=0;s!==t.length&&!((i=t.charCodeAt(s))===32||i===10||i===13);++s);if(e||(n[0]=t.slice(0,s)),s===t.length)return n;var o=t.match(UK),l=0,u="",h=0,f="",p="",g=1;if(o)for(h=0;h!=o.length;++h){for(p=o[h],i=0;i!=p.length&&p.charCodeAt(i)!==61;++i);for(f=p.slice(0,i).trim();p.charCodeAt(i+1)==32;)++i;for(g=(s=p.charCodeAt(i+1))==34||s==39?1:0,u=p.slice(i+1+g,p.length-g),l=0;l!=f.length&&f.charCodeAt(l)!==58;++l);if(l===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),n[f]=u,n[f.toLowerCase()]=u;else{var y=(l===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(l+1);if(n[y]&&f.slice(l-3,l)=="ext")continue;n[y]=u,n[y.toLowerCase()]=u}}return n}function Li(t){return t.replace(HK,"<$1")}var n5={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Mb=jx(n5),rr=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(t,function(l,u){return n5[l]||String.fromCharCode(parseInt(u,l.indexOf("x")>-1?16:10))||l}).replace(e,function(l,u){return String.fromCharCode(parseInt(u,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}}(),Vb=/[&<>'"]/g,WK=/[\u0000-\u0008\u000b-\u001f]/g;function xr(t){var e=t+"";return e.replace(Vb,function(r){return Mb[r]}).replace(WK,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function k4(t){return xr(t).replace(/ /g,"_x0020_")}var s5=/[\u0000-\u001f]/g;function Bb(t){var e=t+"";return e.replace(Vb,function(r){return Mb[r]}).replace(/\n/g,"<br/>").replace(s5,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function qK(t){var e=t+"";return e.replace(Vb,function(r){return Mb[r]}).replace(s5,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var T4=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function GK(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ar(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Ky(t){for(var e="",r=0,n=0,s=0,i=0,o=0,l=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=s&63,e+=String.fromCharCode(o);continue}if(i=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}o=t.charCodeAt(r++),l=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function j4(t){var e=Pl(2*t.length),r,n,s=1,i=0,o=0,l;for(n=0;n<t.length;n+=s)s=1,(l=t.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(n+1)&63),s=2):l<240?(r=(l&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(l&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(e[i++]=o&255,e[i++]=o>>>8,o=0),e[i++]=r%256,e[i++]=r>>>8;return e.slice(0,i).toString("ucs2")}function A4(t){return Ao(t,"binary").toString("utf8")}var cp="foo bar baz",vr=Ht&&(A4(cp)==Ky(cp)&&A4||j4(cp)==Ky(cp)&&j4)||Ky,ki=Ht?function(t){return Ao(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},Wf=function(){var t={};return function(r,n){var s=r+"|"+(n||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),a5=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}}(),KK=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),XK=/<\/?(?:vt:)?variant>/g,YK=/<(?:vt:)([^>]*)>([\s\S]*)</;function C4(t,e){var r=Rt(t),n=t.match(KK(r.baseType))||[],s=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var o=i.replace(XK,"").match(YK);o&&s.push({v:vr(o[2]),t:o[1]})}),s}var i5=/(^\s|\s$|\n)/;function Xn(t,e){return"<"+t+(e.match(i5)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function qf(t){return en(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Ze(t,e,r){return"<"+t+(r!=null?qf(r):"")+(e!=null?(e.match(i5)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function cw(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function QK(t,e){switch(typeof t){case"string":var r=Ze("vt:lpwstr",xr(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Ze((t|0)==t?"vt:i4":"vt:r8",xr(String(t)));case"boolean":return Ze("vt:bool",t?"true":"false")}if(t instanceof Date)return Ze("vt:filetime",cw(t));throw new Error("Unable to serialize "+t)}function Ub(t){if(Ht&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return vr($l(Rb(t)));throw new Error("Bad input format: expected Buffer or string")}var Gf=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Nn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},nu=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],aa={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function JK(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,i=5;i>=0;--i)s=s*256+t[e+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function ZK(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,i=0,o=n?-e:e;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(e)?26985:0);for(var l=0;l<=5;++l,i/=256)t[r+l]=i&255;t[r+6]=(s&15)<<4|i&15,t[r+7]=s>>4|n}var I4=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,i=t[0][n].length;s<i;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},P4=Ht?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Ao(e)})):I4(t)}:I4,R4=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(so(t,s)));return n.join("").replace(As,"")},zb=Ht?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(As,""):R4(t,e,r)}:R4,D4=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},o5=Ht?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):D4(t,e,r)}:D4,F4=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(Yu(t,s)));return n.join("")},R0=Ht?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):F4(e,r,n)}:F4,l5=function(t,e){var r=ia(t,e);return r>0?R0(t,e+4,e+4+r-1):""},c5=l5,u5=function(t,e){var r=ia(t,e);return r>0?R0(t,e+4,e+4+r-1):""},d5=u5,h5=function(t,e){var r=2*ia(t,e);return r>0?R0(t,e+4,e+4+r-1):""},f5=h5,m5=function(e,r){var n=ia(e,r);return n>0?zb(e,r+4,r+4+n):""},p5=m5,g5=function(t,e){var r=ia(t,e);return r>0?R0(t,e+4,e+4+r):""},x5=g5,v5=function(t,e){return JK(t,e)},bg=v5,$b=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Ht&&(c5=function(e,r){if(!Buffer.isBuffer(e))return l5(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},d5=function(e,r){if(!Buffer.isBuffer(e))return u5(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},f5=function(e,r){if(!Buffer.isBuffer(e))return h5(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},p5=function(e,r){if(!Buffer.isBuffer(e))return m5(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},x5=function(e,r){if(!Buffer.isBuffer(e))return g5(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},bg=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):v5(e,r)},$b=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Yu=function(t,e){return t[e]},so=function(t,e){return t[e+1]*256+t[e]},eX=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},ia=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},xc=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},tX=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function hf(t,e){var r="",n,s,i=[],o,l,u,h;switch(e){case"dbcs":if(h=this.l,Ht&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(u=0;u<t;++u)r+=String.fromCharCode(so(this,h)),h+=2;t*=2;break;case"utf8":r=R0(this,this.l,this.l+t);break;case"utf16le":t*=2,r=zb(this,this.l,this.l+t);break;case"wstr":return hf.call(this,t,"dbcs");case"lpstr-ansi":r=c5(this,this.l),t=4+ia(this,this.l);break;case"lpstr-cp":r=d5(this,this.l),t=4+ia(this,this.l);break;case"lpwstr":r=f5(this,this.l),t=4+2*ia(this,this.l);break;case"lpp4":t=4+ia(this,this.l),r=p5(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+ia(this,this.l),r=x5(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(o=Yu(this,this.l+t++))!==0;)i.push(lp(o));r=i.join("");break;case"_wstr":for(t=0,r="";(o=so(this,this.l+t))!==0;)i.push(lp(o)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",h=this.l,u=0;u<t;++u){if(this.lens&&this.lens.indexOf(h)!==-1)return o=Yu(this,h),this.l=h+1,l=hf.call(this,t-u,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(lp(so(this,h))),h+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",h=this.l,u=0;u!=t;++u){if(this.lens&&this.lens.indexOf(h)!==-1)return o=Yu(this,h),this.l=h+1,l=hf.call(this,t-u,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(lp(Yu(this,h))),h+=1}r=i.join("");break;default:switch(t){case 1:return n=Yu(this,this.l),this.l++,n;case 2:return n=(e==="i"?eX:so)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?xc:tX)(this,this.l),this.l+=4,n):(s=ia(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=bg(this,this.l):s=bg([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=o5(this,this.l,t);break}}return this.l+=t,r}var rX=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},nX=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},sX=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function aX(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)sX(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var o=e.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,rX(this,e,this.l);break;case 8:if(n=8,r==="f"){ZK(this,e,this.l);break}case 16:break;case-4:n=4,nX(this,e,this.l);break}return this.l+=n,this}function y5(t,e){var r=o5(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Kn(t,e){t.l=e,t.read_shift=hf,t.chk=y5,t.write_shift=aX}function ys(t,e){t.l+=e}function Le(t){var e=Pl(t);return Kn(e,0),e}function Co(t,e,r){if(t){var n,s,i;Kn(t,t.l||0);for(var o=t.length,l=0,u=0;t.l<o;){l=t.read_shift(1),l&128&&(l=(l&127)+((t.read_shift(1)&127)<<7));var h=Zf[l]||Zf[65535];for(n=t.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=t.read_shift(1))&127)<<7*s;u=t.l+i;var f=h.f&&h.f(t,i,r);if(t.l=u,e(f,h,l))return}}}function Gs(){var t=[],e=Ht?256:2048,r=function(h){var f=Le(h);return Kn(f,0),f},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},i=function(h){return n&&h<n.length-n.l?n:(s(),n=r(Math.max(h+1,e)))},o=function(){return s(),Fn(t)},l=function(h){s(),n=h,n.l==null&&(n.l=n.length),i(e)};return{next:i,push:l,end:o,_bufs:t}}function Ue(t,e,r,n){var s=+e,i;if(!isNaN(s)){n||(n=Zf[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var o=t.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&$b(r)&&t.push(r)}}function ff(t,e,r){var n=Rr(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function L4(t,e,r){var n=Rr(t);return n.s=ff(n.s,e.s,r),n.e=ff(n.e,e.s,r),n}function mf(t,e){if(t.cRel&&t.c<0)for(t=Rr(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Rr(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=At(t);return!t.cRel&&t.cRel!=null&&(r=lX(r)),!t.rRel&&t.rRel!=null&&(r=iX(r)),r}function Xy(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+$r(t.s.c)+":"+(t.e.cRel?"":"$")+$r(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+ln(t.s.r)+":"+(t.e.rRel?"":"$")+ln(t.e.r):mf(t.s,e.biff)+":"+mf(t.e,e.biff)}function Hb(t){return parseInt(oX(t),10)-1}function ln(t){return""+(t+1)}function iX(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function oX(t){return t.replace(/\$(\d+)$/,"$1")}function Wb(t){for(var e=cX(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function $r(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function lX(t){return t.replace(/^([A-Z])/,"$$$1")}function cX(t){return t.replace(/^\$([A-Z])/,"$1")}function uX(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Hr(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function At(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Ks(t){var e=t.indexOf(":");return e==-1?{s:Hr(t),e:Hr(t)}:{s:Hr(t.slice(0,e)),e:Hr(t.slice(e+1))}}function Vt(t,e){return typeof e>"u"||typeof e=="number"?Vt(t.s,t.e):(typeof t!="string"&&(t=At(t)),typeof e!="string"&&(e=At(e)),t==e?t:t+":"+e)}function sr(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=t.length;for(r=0;n<i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===i||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function O4(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Fa(t.z,r?kn(e):e)}catch{}try{return t.w=Fa((t.XF||{}).numFmtId||(r?14:0),r?kn(e):e)}catch{return""+e}}function Eo(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Io[t.v]||t.v:e==null?O4(t,t.v):O4(t,e))}function Hl(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function w5(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,i=t||(s?[]:{}),o=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var u=typeof n.origin=="string"?Hr(n.origin):n.origin;o=u.r,l=u.c}i["!ref"]||(i["!ref"]="A1:A1")}var h={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var f=sr(i["!ref"]);h.s.c=f.s.c,h.s.r=f.s.r,h.e.c=Math.max(h.e.c,f.e.c),h.e.r=Math.max(h.e.r,f.e.r),o==-1&&(h.e.r=o=f.e.r+1)}for(var p=0;p!=e.length;++p)if(e[p]){if(!Array.isArray(e[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[p].length;++g)if(!(typeof e[p][g]>"u")){var y={v:e[p][g]},w=o+p,b=l+g;if(h.s.r>w&&(h.s.r=w),h.s.c>b&&(h.s.c=b),h.e.r<w&&(h.e.r=w),h.e.c<b&&(h.e.c=b),e[p][g]&&typeof e[p][g]=="object"&&!Array.isArray(e[p][g])&&!(e[p][g]instanceof Date))y=e[p][g];else if(Array.isArray(y.v)&&(y.f=e[p][g][1],y.v=y.v[0]),y.v===null)if(y.f)y.t="n";else if(n.nullError)y.t="e",y.v=0;else if(n.sheetStubs)y.t="z";else continue;else typeof y.v=="number"?y.t="n":typeof y.v=="boolean"?y.t="b":y.v instanceof Date?(y.z=n.dateNF||jt[14],n.cellDates?(y.t="d",y.w=Fa(y.z,kn(y.v))):(y.t="n",y.v=kn(y.v),y.w=Fa(y.z,y.v))):y.t="s";if(s)i[w]||(i[w]=[]),i[w][b]&&i[w][b].z&&(y.z=i[w][b].z),i[w][b]=y;else{var _=At({c:b,r:w});i[_]&&i[_].z&&(y.z=i[_].z),i[_]=y}}}return h.s.c<1e7&&(i["!ref"]=Vt(h)),i}function rh(t,e){return w5(null,t,e)}function dX(t){return t.read_shift(4,"i")}function si(t,e){return e||(e=Le(4)),e.write_shift(4,t),e}function gs(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Ln(t,e){var r=!1;return e==null&&(r=!0,e=Le(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function hX(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function fX(t,e){return e||(e=Le(4)),e.write_shift(2,0),e.write_shift(2,0),e}function qb(t,e){var r=t.l,n=t.read_shift(1),s=gs(t),i=[],o={t:s,h:s};if((n&1)!==0){for(var l=t.read_shift(4),u=0;u!=l;++u)i.push(hX(t));o.r=i}else o.r=[{ich:0,ifnt:0}];return t.l=r+e,o}function mX(t,e){var r=!1;return e==null&&(r=!0,e=Le(15+4*t.t.length)),e.write_shift(1,0),Ln(t.t,e),r?e.slice(0,e.l):e}var pX=qb;function gX(t,e){var r=!1;return e==null&&(r=!0,e=Le(23+4*t.t.length)),e.write_shift(1,1),Ln(t.t,e),e.write_shift(4,1),fX({},e),r?e.slice(0,e.l):e}function Oa(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function su(t,e){return e==null&&(e=Le(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function au(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function iu(t,e){return e==null&&(e=Le(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var xX=gs,b5=Ln;function Gb(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function _g(t,e){var r=!1;return e==null&&(r=!0,e=Le(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var vX=gs,uw=Gb,Kb=_g;function Xb(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?bg([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):xc(e,0)>>2;return r?s/100:s}function _5(t,e){e==null&&(e=Le(4));var r=0,n=0,s=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?s:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function N5(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function yX(t,e){return e||(e=Le(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var ou=N5,nh=yX;function hs(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function zc(t,e){return(e||Le(8)).write_shift(8,t,"f")}function wX(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),i=t.read_shift(2,"i"),o=t.read_shift(1),l=t.read_shift(1),u=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var h=Sc[s];h&&(e.rgb=Xf(h));break;case 2:e.rgb=Xf([o,l,u]);break;case 3:e.theme=s;break}return i!=0&&(e.tint=i>0?i/32767:i/32768),e}function Ng(t,e){if(e||(e=Le(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function bX(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function _X(t,e){e||(e=Le(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function E5(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function NX(t){return E5(t,1)}function EX(t){return E5(t,2)}var Yb=2,zs=3,up=11,M4=12,Eg=19,dp=64,SX=65,kX=71,TX=4108,jX=4126,Rn=80,S5=81,AX=[Rn,S5],dw={1:{n:"CodePage",t:Yb},2:{n:"Category",t:Rn},3:{n:"PresentationFormat",t:Rn},4:{n:"ByteCount",t:zs},5:{n:"LineCount",t:zs},6:{n:"ParagraphCount",t:zs},7:{n:"SlideCount",t:zs},8:{n:"NoteCount",t:zs},9:{n:"HiddenCount",t:zs},10:{n:"MultimediaClipCount",t:zs},11:{n:"ScaleCrop",t:up},12:{n:"HeadingPairs",t:TX},13:{n:"TitlesOfParts",t:jX},14:{n:"Manager",t:Rn},15:{n:"Company",t:Rn},16:{n:"LinksUpToDate",t:up},17:{n:"CharacterCount",t:zs},19:{n:"SharedDoc",t:up},22:{n:"HyperlinksChanged",t:up},23:{n:"AppVersion",t:zs,p:"version"},24:{n:"DigSig",t:SX},26:{n:"ContentType",t:Rn},27:{n:"ContentStatus",t:Rn},28:{n:"Language",t:Rn},29:{n:"Version",t:Rn},255:{},2147483648:{n:"Locale",t:Eg},2147483651:{n:"Behavior",t:Eg},1919054434:{}},hw={1:{n:"CodePage",t:Yb},2:{n:"Title",t:Rn},3:{n:"Subject",t:Rn},4:{n:"Author",t:Rn},5:{n:"Keywords",t:Rn},6:{n:"Comments",t:Rn},7:{n:"Template",t:Rn},8:{n:"LastAuthor",t:Rn},9:{n:"RevNumber",t:Rn},10:{n:"EditTime",t:dp},11:{n:"LastPrinted",t:dp},12:{n:"CreatedDate",t:dp},13:{n:"ModifiedDate",t:dp},14:{n:"PageCount",t:zs},15:{n:"WordCount",t:zs},16:{n:"CharCount",t:zs},17:{n:"Thumbnail",t:kX},18:{n:"Application",t:Rn},19:{n:"DocSecurity",t:zs},255:{},2147483648:{n:"Locale",t:Eg},2147483651:{n:"Behavior",t:Eg},1919054434:{}},V4={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},CX=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function IX(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var PX=IX([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Sc=Rr(PX),Io={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},k5={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},fw={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},hp={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Qb(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function RX(t){var e=Qb();if(!t||!t.match)return e;var r={};if((t.match(bs)||[]).forEach(function(n){var s=Rt(n);switch(s[0].replace($K,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":e[fw[s.ContentType]]!==void 0&&e[fw[s.ContentType]].push(s.PartName);break}}),e.xmlns!==Nn.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function T5(t,e){var r=RK(fw),n=[],s;n[n.length]=cn,n[n.length]=Ze("Types",null,{xmlns:Nn.CT,"xmlns:xsd":Nn.xsd,"xmlns:xsi":Nn.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(u){return Ze("Default",null,{Extension:u[0],ContentType:u[1]})}));var i=function(u){t[u]&&t[u].length>0&&(s=t[u][0],n[n.length]=Ze("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:hp[u][e.bookType]||hp[u].xlsx}))},o=function(u){(t[u]||[]).forEach(function(h){n[n.length]=Ze("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:hp[u][e.bookType]||hp[u].xlsx})})},l=function(u){(t[u]||[]).forEach(function(h){n[n.length]=Ze("Override",null,{PartName:(h[0]=="/"?"":"/")+h,ContentType:r[u][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Gt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Kf(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function pf(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(bs)||[]).forEach(function(s){var i=Rt(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Yh(i.Target,e);r[l]=o,n[i.Id]=o}}),r["!id"]=n,r}function hd(t){var e=[cn,Ze("Relationships",null,{xmlns:Nn.RELS})];return en(t["!id"]).forEach(function(r){e[e.length]=Ze("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function gr(t,e,r,n,s,i){if(s||(s={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,s.Id="rId"+e,s.Type=n,s.Target=r,[Gt.HLINK,Gt.XPATH,Gt.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),t["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][s.Id]=s,t[("/"+s.Target).replace("//","/")]=s,e}var DX="application/vnd.oasis.opendocument.spreadsheet";function FX(t,e){for(var r=Ub(t),n,s;n=Gf.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=Rt(n[0],!1),s.path=="/"&&s.type!==DX)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function LX(t){var e=[cn];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function B4(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function OX(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function MX(t){var e=[cn];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(B4(t[r][0],t[r][1])),e.push(OX("",t[r][0]));return e.push(B4("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function j5(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+gg.version+"</meta:generator></office:meta></office:document-meta>"}var Ra=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],VX=function(){for(var t=new Array(Ra.length),e=0;e<Ra.length;++e){var r=Ra[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function A5(t){var e={};t=vr(t);for(var r=0;r<Ra.length;++r){var n=Ra[r],s=t.match(VX[r]);s!=null&&s.length>0&&(e[n[1]]=rr(s[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=Pr(e[n[1]]))}return e}function Yy(t,e,r,n,s){s[t]!=null||e==null||e===""||(s[t]=e,e=xr(e),n[n.length]=r?Ze(t,e,r):Xn(t,e))}function C5(t,e){var r=e||{},n=[cn,Ze("cp:coreProperties",null,{"xmlns:cp":Nn.CORE_PROPS,"xmlns:dc":Nn.dc,"xmlns:dcterms":Nn.dcterms,"xmlns:dcmitype":Nn.dcmitype,"xmlns:xsi":Nn.xsi})],s={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&Yy("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:cw(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),t.ModifiedDate!=null&&Yy("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:cw(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var i=0;i!=Ra.length;++i){var o=Ra[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:t?t[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&Yy(o[0],l,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var kc=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],I5=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function P5(t,e,r,n){var s=[];if(typeof t=="string")s=C4(t,n);else for(var i=0;i<t.length;++i)s=s.concat(t[i].map(function(f){return{v:f}}));var o=typeof e=="string"?C4(e,n).map(function(f){return f.v}):e,l=0,u=0;if(o.length>0)for(var h=0;h!==s.length;h+=2){switch(u=+s[h+1].v,s[h].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=u,r.SheetNames=o.slice(l,l+u);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=u,r.DefinedNames=o.slice(l,l+u);break;case"Charts":case"Diagramme":r.Chartsheets=u,r.ChartNames=o.slice(l,l+u);break}l+=u}}function BX(t,e,r){var n={};return e||(e={}),t=vr(t),kc.forEach(function(s){var i=(t.match(Wf(s[0]))||[])[1];switch(s[2]){case"string":i&&(e[s[1]]=rr(i));break;case"bool":e[s[1]]=i==="true";break;case"raw":var o=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(n[s[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&P5(n.HeadingPairs,n.TitlesOfParts,e,r),e}function R5(t){var e=[],r=Ze;return t||(t={}),t.Application="SheetJS",e[e.length]=cn,e[e.length]=Ze("Properties",null,{xmlns:Nn.EXT_PROPS,"xmlns:vt":Nn.vt}),kc.forEach(function(n){if(t[n[1]]!==void 0){var s;switch(n[2]){case"string":s=xr(String(t[n[1]]));break;case"bool":s=t[n[1]]?"true":"false";break}s!==void 0&&(e[e.length]=r(n[0],s))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+xr(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var UX=/<[^>]+>[^<]*/g;function zX(t,e){var r={},n="",s=t.match(UX);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=Rt(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=rr(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var u=o.split(">"),h=u[0].slice(4),f=u[1];switch(h){case"lpstr":case"bstr":case"lpwstr":r[n]=rr(f);break;case"bool":r[n]=Ar(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(f);break;case"filetime":case"date":r[n]=Pr(f);break;case"cy":case"error":r[n]=rr(f);break;default:if(h.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",o,h,u)}}else if(o.slice(0,2)!=="</"){if(e.WTF)throw new Error(o)}}}return r}function D5(t){var e=[cn,Ze("Properties",null,{xmlns:Nn.CUST_PROPS,"xmlns:vt":Nn.vt})];if(!t)return e.join("");var r=1;return en(t).forEach(function(s){++r,e[e.length]=Ze("property",QK(t[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:xr(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var mw={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Qy;function $X(t,e,r){Qy||(Qy=jx(mw)),e=Qy[e]||e,t[e]=r}function HX(t,e){var r=[];return en(mw).map(function(n){for(var s=0;s<Ra.length;++s)if(Ra[s][1]==n)return Ra[s];for(s=0;s<kc.length;++s)if(kc[s][1]==n)return kc[s];throw n}).forEach(function(n){if(t[n[1]]!=null){var s=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Xn(mw[n[1]]||n[1],s))}}),Ze("DocumentProperties",r.join(""),{xmlns:aa.o})}function WX(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return t&&en(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)){for(var o=0;o<Ra.length;++o)if(i==Ra[o][1])return;for(o=0;o<kc.length;++o)if(i==kc[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=t[i],u="string";typeof l=="number"?(u="float",l=String(l)):l===!0||l===!1?(u="boolean",l=l?"1":"0"):l=String(l),s.push(Ze(k4(i),l,{"dt:dt":u}))}}),e&&en(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)&&!(t&&Object.prototype.hasOwnProperty.call(t,i))){var o=e[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(Ze(k4(i),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+aa.o+'">'+s.join("")+"</"+n+">"}function Jb(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function qX(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),s+=i);var o=Le(8);return o.write_shift(4,n),o.write_shift(4,s),o}function F5(t,e,r){var n=t.l,s=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return s}function L5(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function O5(t,e,r){return e===31?L5(t):F5(t,e,r)}function pw(t,e,r){return O5(t,e,r===!1?0:4)}function GX(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return O5(t,e,0)}function KX(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var s=t.l;r[n]=t.read_shift(0,"lpwstr").replace(As,""),t.l-s&2&&(t.l+=2)}return r}function XX(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(As,"");return r}function YX(t){var e=t.l,r=Sg(t,S5);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=Sg(t,zs);return[r,n]}function QX(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(YX(t));return r}function U4(t,e){for(var r=t.read_shift(4),n={},s=0;s!=r;++s){var i=t.read_shift(4),o=t.read_shift(4);n[i]=t.read_shift(o,e===1200?"utf16le":"utf8").replace(As,"").replace(Xh,"!"),e===1200&&o%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function M5(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function JX(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function Sg(t,e,r){var n=t.read_shift(2),s,i=r||{};if(t.l+=2,e!==M4&&n!==e&&AX.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===M4?n:e){case 2:return s=t.read_shift(2,"i"),i.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return F5(t,n,4).replace(As,"");case 31:return L5(t);case 64:return Jb(t);case 65:return M5(t);case 71:return JX(t);case 80:return pw(t,n,!i.raw).replace(As,"");case 81:return GX(t,n).replace(As,"");case 4108:return QX(t);case 4126:case 4127:return n==4127?KX(t):XX(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function z4(t,e){var r=Le(4),n=Le(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Le(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=qX(e);break;case 31:case 80:for(n=Le(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Fn([r,n])}function $4(t,e){var r=t.l,n=t.read_shift(4),s=t.read_shift(4),i=[],o=0,l=0,u=-1,h={};for(o=0;o!=s;++o){var f=t.read_shift(4),p=t.read_shift(4);i[o]=[f,p+r]}i.sort(function(A,k){return A[1]-k[1]});var g={};for(o=0;o!=s;++o){if(t.l!==i[o][1]){var y=!0;if(o>0&&e)switch(e[i[o-1][0]].t){case 2:t.l+2===i[o][1]&&(t.l+=2,y=!1);break;case 80:t.l<=i[o][1]&&(t.l=i[o][1],y=!1);break;case 4108:t.l<=i[o][1]&&(t.l=i[o][1],y=!1);break}if((!e||o==0)&&t.l<=i[o][1]&&(y=!1,t.l=i[o][1]),y)throw new Error("Read Error: Expected address "+i[o][1]+" at "+t.l+" :"+o)}if(e){var w=e[i[o][0]];if(g[w.n]=Sg(t,w.t,{raw:!0}),w.p==="version"&&(g[w.n]=String(g[w.n]>>16)+"."+("0000"+String(g[w.n]&65535)).slice(-4)),w.n=="CodePage")switch(g[w.n]){case 0:g[w.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:ti(l=g[w.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+g[w.n])}}else if(i[o][0]===1){if(l=g.CodePage=Sg(t,Yb),ti(l),u!==-1){var b=t.l;t.l=i[u][1],h=U4(t,l),t.l=b}}else if(i[o][0]===0){if(l===0){u=o,t.l=i[o+1][1];continue}h=U4(t,l)}else{var _=h[i[o][0]],P;switch(t[t.l]){case 65:t.l+=4,P=M5(t);break;case 30:t.l+=4,P=pw(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,P=pw(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,P=t.read_shift(4,"i");break;case 19:t.l+=4,P=t.read_shift(4);break;case 5:t.l+=4,P=t.read_shift(8,"f");break;case 11:t.l+=4,P=nn(t,4);break;case 64:t.l+=4,P=Pr(Jb(t));break;default:throw new Error("unparsed value: "+t[t.l])}g[_]=P}}return t.l=r+n,g}var V5=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function ZX(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function H4(t,e,r){var n=Le(8),s=[],i=[],o=8,l=0,u=Le(8),h=Le(8);if(u.write_shift(4,2),u.write_shift(4,1200),h.write_shift(4,1),i.push(u),s.push(h),o+=8+u.length,!e){h=Le(8),h.write_shift(4,0),s.unshift(h);var f=[Le(4)];for(f[0].write_shift(4,t.length),l=0;l<t.length;++l){var p=t[l][0];for(u=Le(8+2*(p.length+1)+(p.length%2?0:2)),u.write_shift(4,l+2),u.write_shift(4,p.length+1),u.write_shift(0,p,"dbcs");u.l!=u.length;)u.write_shift(1,0);f.push(u)}u=Fn(f),i.unshift(u),o+=8+u.length}for(l=0;l<t.length;++l)if(!(e&&!e[t[l][0]])&&!(V5.indexOf(t[l][0])>-1||I5.indexOf(t[l][0])>-1)&&t[l][1]!=null){var g=t[l][1],y=0;if(e){y=+e[t[l][0]];var w=r[y];if(w.p=="version"&&typeof g=="string"){var b=g.split(".");g=(+b[0]<<16)+(+b[1]||0)}u=z4(w.t,g)}else{var _=ZX(g);_==-1&&(_=31,g=String(g)),u=z4(_,g)}i.push(u),h=Le(8),h.write_shift(4,e?y:2+l),s.push(h),o+=8+u.length}var P=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,P),P+=i[l].length;return n.write_shift(4,o),n.write_shift(4,i.length),Fn([n].concat(s).concat(i))}function W4(t,e,r){var n=t.content;if(!n)return{};Kn(n,0);var s,i,o,l,u=0;n.chk("feff","Byte Order: "),n.read_shift(2);var h=n.read_shift(4),f=n.read_shift(16);if(f!==_t.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),l=n.read_shift(4),s===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);s===2&&(o=n.read_shift(16),u=n.read_shift(4));var p=$4(n,e),g={SystemIdentifier:h};for(var y in p)g[y]=p[y];if(g.FMTID=i,s===1)return g;if(u-n.l==2&&(n.l+=2),n.l!==u)throw new Error("Length mismatch 2: "+n.l+" !== "+u);var w;try{w=$4(n,null)}catch{}for(y in w)g[y]=w[y];return g.FMTID=[i,o],g}function q4(t,e,r,n,s,i){var o=Le(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,_t.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,s?68:48);var u=H4(t,r,n);if(l.push(u),s){var h=H4(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+u.length),l.push(h)}return Fn(l)}function al(t,e){return t.read_shift(e),null}function eY(t,e){e||(e=Le(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function tY(t,e,r){for(var n=[],s=t.l+e;t.l<s;)n.push(r(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return n}function nn(t,e){return t.read_shift(e)===1}function Ts(t,e){return e||(e=Le(2)),e.write_shift(2,+!!t),e}function gn(t){return t.read_shift(2,"u")}function Ia(t,e){return e||(e=Le(2)),e.write_shift(2,t),e}function B5(t,e){return tY(t,e,gn)}function rY(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function U5(t,e,r){return r||(r=Le(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function D0(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=n?t.read_shift(n,s):"";return o}function nY(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,s=r&8,i=1+(r&1),o=0,l,u={};s&&(o=t.read_shift(2)),n&&(l=t.read_shift(4));var h=i==2?"dbcs-cont":"sbcs-cont",f=e===0?"":t.read_shift(e,h);return s&&(t.l+=4*o),n&&(t.l+=l),u.t=f,s||(u.raw="<t>"+u.t+"</t>",u.r=u.t),u}function sY(t){var e=t.t||"",r=Le(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Le(2*e.length);n.write_shift(2*e.length,e,"utf16le");var s=[r,n];return Fn(s)}function $c(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function F0(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):$c(t,n,r)}function lu(t,e,r){if(r.biff>5)return F0(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function z5(t,e,r){return r||(r=Le(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function aY(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function iY(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var s=t.read_shift((n?e-24:e)>>1,"utf16le").replace(As,"");return n&&(t.l+=24),s}function oY(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=t.read_shift(i>>1,"utf16le").replace(As,"");return r+o}function lY(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return iY(t);case"0303000000000000c000000000000046":return oY(t);default:throw new Error("Unsupported Moniker "+r)}}function fp(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(As,""):"";return r}function G4(t,e){e||(e=Le(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function cY(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=t.read_shift(2);t.l+=2;var i,o,l,u,h="",f,p;s&16&&(i=fp(t,r-t.l)),s&128&&(o=fp(t,r-t.l)),(s&257)===257&&(l=fp(t,r-t.l)),(s&257)===1&&(u=lY(t,r-t.l)),s&8&&(h=fp(t,r-t.l)),s&32&&(f=t.read_shift(16)),s&64&&(p=Jb(t)),t.l=r;var g=o||l||u||"";g&&h&&(g+="#"+h),g||(g="#"+h),s&2&&g.charAt(0)=="/"&&g.charAt(1)!="/"&&(g="file://"+g);var y={Target:g};return f&&(y.guid=f),p&&(y.time=p),i&&(y.Tooltip=i),y}function uY(t){var e=Le(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),i=s>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}e.write_shift(4,2),e.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)e.write_shift(4,o[r]);if(i==28)n=n.slice(1),G4(n,e);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));var l=s>-1?n.slice(0,s):n;for(e.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)e.write_shift(2,l.charCodeAt(r));e.write_shift(2,0),i&8&&G4(s>-1?n.slice(s+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));for(var u=0;n.slice(u*3,u*3+3)=="../"||n.slice(u*3,u*3+3)=="..\\";)++u;for(e.write_shift(2,u),e.write_shift(4,n.length-3*u+1),r=0;r<n.length-3*u;++r)e.write_shift(1,n.charCodeAt(r+3*u)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function $5(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),s=t.read_shift(1);return[e,r,n,s]}function H5(t,e){var r=$5(t);return r[3]=0,r}function Oi(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function Hc(t,e,r,n){return n||(n=Le(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function dY(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function hY(t,e,r){return e===0?"":lu(t,e,r)}function fY(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),i=t.read_shift(n,"i"),o=t.read_shift(n,"i");return[s,i,o]}function W5(t){var e=t.read_shift(2),r=Xb(t);return[e,r]}function mY(t,e,r){t.l+=4,e-=4;var n=t.l+e,s=D0(t,e,r),i=t.read_shift(2);if(n-=t.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return t.l+=i,s}function Ix(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function q5(t,e){return e||(e=Le(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function G5(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),s=t.read_shift(1);return{s:{c:n,r:e},e:{c:s,r}}}var pY=G5;function K5(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function gY(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function xY(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function as(t){t.l+=2,t.l+=t.read_shift(2)}var vY={0:as,4:as,5:as,6:as,7:xY,8:as,9:as,10:as,11:as,12:as,13:gY,14:as,15:as,16:as,17:as,18:as,19:as,20:as,21:K5};function yY(t,e){for(var r=t.l+e,n=[];t.l<r;){var s=t.read_shift(2);t.l-=2;try{n.push(vY[s](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function mp(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function Zb(t,e,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Le(s);return i.write_shift(2,n),i.write_shift(2,e),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function wY(t,e){return e===0||t.read_shift(2),1200}function bY(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,s=lu(t,0,r);return t.read_shift(e+n-t.l),s}function _Y(t,e){var r=!e||e.biff==8,n=Le(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function NY(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function EY(t,e,r){var n=t.read_shift(4),s=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=D0(t,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:s,dt:i,name:o}}function SY(t,e){var r=!e||e.biff>=8?2:1,n=Le(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function kY(t,e){for(var r=t.l+e,n=t.read_shift(4),s=t.read_shift(4),i=[],o=0;o!=s&&t.l<r;++o)i.push(nY(t));return i.Count=n,i.Unique=s,i}function TY(t,e){var r=Le(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],s=0;s<t.length;++s)n[s]=sY(t[s]);var i=Fn([r].concat(n));return i.parts=[r.length].concat(n.map(function(o){return o.length})),i}function jY(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function AY(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function CY(t){var e=dY(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function IY(t){return t.read_shift(2),t.read_shift(4)}function K4(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var s=t.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function PY(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),u=t.read_shift(2),h=t.read_shift(2);return{Pos:[e,r],Dim:[n,s],Flags:i,CurTab:o,FirstTab:l,Selected:u,TabRatio:h}}function RY(){var t=Le(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function DY(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function FY(t){var e=Le(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function LY(){}function OY(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=D0(t,0,r),n}function MY(t,e){var r=t.name||"Arial",n=e&&e.biff==5,s=n?15+r.length:16+2*r.length,i=Le(s);return i.write_shift(2,t.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function VY(t){var e=Oi(t);return e.isst=t.read_shift(4),e}function BY(t,e,r,n){var s=Le(10);return Hc(t,e,n,s),s.write_shift(4,r),s}function UY(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,s=Oi(t);r.biff==2&&t.l++;var i=F0(t,n-t.l,r);return s.val=i,s}function zY(t,e,r,n,s){var i=!s||s.biff==8,o=Le(8+ +i+(1+i)*r.length);return Hc(t,e,n,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function $Y(t,e,r){var n=t.read_shift(2),s=lu(t,0,r);return[n,s]}function HY(t,e,r,n){var s=r&&r.biff==5;n||(n=Le(s?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(s?1:2,e.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}var WY=lu;function X4(t,e,r){var n=t.l+e,s=r.biff==8||!r.biff?4:2,i=t.read_shift(s),o=t.read_shift(s),l=t.read_shift(2),u=t.read_shift(2);return t.l=n,{s:{r:i,c:l},e:{r:o,c:u}}}function qY(t,e){var r=e.biff==8||!e.biff?4:2,n=Le(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function GY(t){var e=t.read_shift(2),r=t.read_shift(2),n=W5(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function KY(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(W5(t));if(t.l!==r)throw new Error("MulRK read error");var o=t.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:o,rkrec:i}}function XY(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),i=[];t.l<r;)i.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var o=t.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:o,ixfe:i}}function YY(t,e,r,n){var s={},i=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(4),u=t.read_shift(2);return s.patternType=CX[l>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=u&127,s.icvBack=u>>7&127,s.fsxButton=u>>14&1),s}function QY(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=YY(t,e,n.fStyle,r),n}function Y4(t,e,r,n){var s=r&&r.biff==5;n||(n=Le(s?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var i=0;return t.numFmtId>0&&s&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function JY(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function ZY(t){var e=Le(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function Q4(t,e,r){var n=Oi(t);(r.biff==2||e==9)&&++t.l;var s=rY(t);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function eQ(t,e,r,n,s,i){var o=Le(8);return Hc(t,e,n,o),U5(r,i,o),o}function tQ(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Oi(t),s=hs(t);return n.val=s,n}function rQ(t,e,r,n){var s=Le(14);return Hc(t,e,n,s),zc(r,s),s}var J4=hY;function nQ(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=$c(t,i),l=[];n>t.l;)l.push(F0(t));return[i,s,o,l]}function Z4(t,e,r){var n=t.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=mY(t,e-2,r)),i.body=s||t.read_shift(e-2),typeof s=="string"&&(i.Name=s),i}var sQ=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function ej(t,e,r){var n=t.l+e,s=t.read_shift(2),i=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(r&&r.biff==2?1:2),u=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),u=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var h=$c(t,o,r);s&32&&(h=sQ[h.charCodeAt(0)]);var f=n-t.l;r&&r.biff==2&&--f;var p=n==t.l||l===0||!(f>0)?[]:yte(t,f,r,l);return{chKey:i,Name:h,itab:u,rgce:p}}function X5(t,e,r){if(r.biff<8)return aQ(t,e,r);for(var n=[],s=t.l+e,i=t.read_shift(r.biff>8?4:2);i--!==0;)n.push(fY(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function aQ(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=D0(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function iQ(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),s=t.read_shift(2),i=$c(t,n,r),o=$c(t,s,r);return[i,o]}function oQ(t,e,r){var n=G5(t);t.l++;var s=t.read_shift(1);return e-=8,[wte(t,e,r),s,n]}function tj(t,e,r){var n=pY(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,xte(t,e,r)]}function lQ(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function cQ(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=lu(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:s},l,o,i]}}function uQ(t,e,r){return cQ(t,e,r)}function dQ(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(Ix(t));return r}function hQ(t){var e=Le(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)q5(t[r],e);return e}function fQ(t,e,r){if(r&&r.biff<8)return pQ(t,e,r);var n=K5(t),s=yY(t,e-22,n[1]);return{cmo:n,ft:s}}var mQ={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=r,{fmt:n}}};function pQ(t,e,r){t.l+=4;var n=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var o=[];return o.push((mQ[n]||ys)(t,e,r)),{cmo:[s,n,i],ft:o}}function gQ(t,e,r){var n=t.l,s="";try{t.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:o=aY(t,6,r);var l=t.read_shift(2);t.read_shift(2),gn(t,2);var u=t.read_shift(2);t.l+=u;for(var h=1;h<t.lens.length-1;++h){if(t.l-n!=t.lens[h])throw new Error("TxO: bad continue record");var f=t[t.l],p=$c(t,t.lens[h+1]-t.lens[h]-1);if(s+=p,s.length>=(f?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return t.l=n+e,{t:s}}catch{return t.l=n+e,{t:s}}}function xQ(t,e){var r=Ix(t);t.l+=16;var n=cY(t,e-24);return[r,n]}function vQ(t){var e=Le(24),r=Hr(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(n[s],16));return Fn([e,uY(t[1])])}function yQ(t,e){t.read_shift(2);var r=Ix(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(As,""),[r,n]}function wQ(t){var e=t[1].Tooltip,r=Le(10+2*(e.length+1));r.write_shift(2,2048);var n=Hr(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<e.length;++s)r.write_shift(2,e.charCodeAt(s));return r.write_shift(2,0),r}function bQ(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=V4[r]||r,r=t.read_shift(2),e[1]=V4[r]||r,e}function _Q(t){return t||(t=Le(4)),t.write_shift(2,1),t.write_shift(2,1),t}function NQ(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(H5(t));return r}function EQ(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(H5(t));return r}function SQ(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function Y5(t,e,r){if(!r.cellStyles)return ys(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),i=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(n),u=t.read_shift(2);n==2&&(t.l+=2);var h={s,e:i,w:o,ixfe:l,flags:u};return(r.biff>=5||!r.biff)&&(h.level=u>>8&7),h}function kQ(t,e){var r=Le(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function TQ(t,e){var r={};return e<32||(t.l+=16,r.header=hs(t),r.footer=hs(t),t.l+=2),r}function jQ(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var s=t.read_shift(1);return t.l+=3,s&16&&(n.area=!0),n}function AQ(t){for(var e=Le(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var CQ=Oi,IQ=B5,PQ=F0;function RQ(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,s}function DQ(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Oi(t);++t.l;var s=lu(t,e-7,r);return n.t="str",n.val=s,n}function FQ(t){var e=Oi(t);++t.l;var r=hs(t);return e.t="n",e.val=r,e}function LQ(t,e,r){var n=Le(15);return V0(n,t,e),n.write_shift(8,r,"f"),n}function OQ(t){var e=Oi(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function MQ(t,e,r){var n=Le(9);return V0(n,t,e),n.write_shift(2,r),n}function VQ(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function BQ(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function UQ(t,e,r){var n=t.l+e,s=Oi(t),i=t.read_shift(2),o=$c(t,i,r);return t.l=n,s.t="str",s.val=o,s}var zQ=[2,3,48,49,131,139,140,245],gw=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=jx({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,u){var h=[],f=Pl(1);switch(u.type){case"base64":f=oa(ma(l));break;case"binary":f=oa(l);break;case"buffer":case"array":f=l;break}Kn(f,0);var p=f.read_shift(1),g=!!(p&136),y=!1,w=!1;switch(p){case 2:break;case 3:break;case 48:y=!0,g=!0;break;case 49:y=!0,g=!0;break;case 131:break;case 139:break;case 140:w=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var b=0,_=521;p==2&&(b=f.read_shift(2)),f.l+=3,p!=2&&(b=f.read_shift(4)),b>1048576&&(b=1e6),p!=2&&(_=f.read_shift(2));var P=f.read_shift(2),A=u.codepage||1252;p!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(A=t[f[f.l]]),f.l+=1,f.l+=2),w&&(f.l+=36);for(var k=[],F={},L=Math.min(f.length,p==2?521:_-10-(y?264:0)),I=w?32:11;f.l<L&&f[f.l]!=13;)switch(F={},F.name=zf.utils.decode(A,f.slice(f.l,f.l+I)).replace(/[\u0000\r\n].*$/g,""),f.l+=I,F.type=String.fromCharCode(f.read_shift(1)),p!=2&&!w&&(F.offset=f.read_shift(4)),F.len=f.read_shift(1),p==2&&(F.offset=f.read_shift(2)),F.dec=f.read_shift(1),F.name.length&&k.push(F),p!=2&&(f.l+=w?13:14),F.type){case"B":(!y||F.len!=8)&&u.WTF&&console.log("Skipping "+F.name+":"+F.type);break;case"G":case"P":u.WTF&&console.log("Skipping "+F.name+":"+F.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+F.type)}if(f[f.l]!==13&&(f.l=_-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=_;var N=0,T=0;for(h[0]=[],T=0;T!=k.length;++T)h[0][T]=k[T].name;for(;b-- >0;){if(f[f.l]===42){f.l+=P;continue}for(++f.l,h[++N]=[],T=0,T=0;T!=k.length;++T){var R=f.slice(f.l,f.l+k[T].len);f.l+=k[T].len,Kn(R,0);var B=zf.utils.decode(A,R);switch(k[T].type){case"C":B.trim().length&&(h[N][T]=B.replace(/\s+$/,""));break;case"D":B.length===8?h[N][T]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):h[N][T]=B;break;case"F":h[N][T]=parseFloat(B.trim());break;case"+":case"I":h[N][T]=w?R.read_shift(-4,"i")^2147483648:R.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":h[N][T]=!0;break;case"N":case"F":h[N][T]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));h[N][T]="##MEMO##"+(w?parseInt(B.trim(),10):R.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(h[N][T]=+B||0);break;case"@":h[N][T]=new Date(R.read_shift(-8,"f")-621356832e5);break;case"T":h[N][T]=new Date((R.read_shift(4)-2440588)*864e5+R.read_shift(4));break;case"Y":h[N][T]=R.read_shift(4,"i")/1e4+R.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":h[N][T]=-R.read_shift(-8,"f");break;case"B":if(y&&k[T].len==8){h[N][T]=R.read_shift(8,"f");break}case"G":case"P":R.l+=k[T].len;break;case"0":if(k[T].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+k[T].type)}}}if(p!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return u&&u.sheetRows&&(h=h.slice(0,u.sheetRows)),u.DBF=k,h}function n(l,u){var h=u||{};h.dateNF||(h.dateNF="yyyymmdd");var f=rh(r(l,h),h);return f["!cols"]=h.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete h.DBF,f}function s(l,u){try{return Hl(n(l,u),u)}catch(h){if(u&&u.WTF)throw h}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,u){var h=u||{};if(+h.codepage>=0&&ti(+h.codepage),h.type=="string")throw new Error("Cannot write DBF to JS string");var f=Gs(),p=jg(l,{header:1,raw:!0,cellDates:!0}),g=p[0],y=p.slice(1),w=l["!cols"]||[],b=0,_=0,P=0,A=1;for(b=0;b<g.length;++b){if(((w[b]||{}).DBF||{}).name){g[b]=w[b].DBF.name,++P;continue}if(g[b]!=null){if(++P,typeof g[b]=="number"&&(g[b]=g[b].toString(10)),typeof g[b]!="string")throw new Error("DBF Invalid column name "+g[b]+" |"+typeof g[b]+"|");if(g.indexOf(g[b])!==b){for(_=0;_<1024;++_)if(g.indexOf(g[b]+"_"+_)==-1){g[b]+="_"+_;break}}}}var k=sr(l["!ref"]),F=[],L=[],I=[];for(b=0;b<=k.e.c-k.s.c;++b){var N="",T="",R=0,B=[];for(_=0;_<y.length;++_)y[_][b]!=null&&B.push(y[_][b]);if(B.length==0||g[b]==null){F[b]="?";continue}for(_=0;_<B.length;++_){switch(typeof B[_]){case"number":T="B";break;case"string":T="C";break;case"boolean":T="L";break;case"object":T=B[_]instanceof Date?"D":"C";break;default:T="C"}R=Math.max(R,String(B[_]).length),N=N&&N!=T?"C":T}R>250&&(R=250),T=((w[b]||{}).DBF||{}).type,T=="C"&&w[b].DBF.len>R&&(R=w[b].DBF.len),N=="B"&&T=="N"&&(N="N",I[b]=w[b].DBF.dec,R=w[b].DBF.len),L[b]=N=="C"||T=="N"?R:i[N]||0,A+=L[b],F[b]=N}var z=f.next(32);for(z.write_shift(4,318902576),z.write_shift(4,y.length),z.write_shift(2,296+32*P),z.write_shift(2,A),b=0;b<4;++b)z.write_shift(4,0);for(z.write_shift(4,0|(+e[V6]||3)<<8),b=0,_=0;b<g.length;++b)if(g[b]!=null){var O=f.next(32),D=(g[b].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,D,"sbcs"),O.write_shift(1,F[b]=="?"?"C":F[b],"sbcs"),O.write_shift(4,_),O.write_shift(1,L[b]||i[F[b]]||0),O.write_shift(1,I[b]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),_+=L[b]||i[F[b]]||0}var ie=f.next(264);for(ie.write_shift(4,13),b=0;b<65;++b)ie.write_shift(4,0);for(b=0;b<y.length;++b){var Z=f.next(A);for(Z.write_shift(1,0),_=0;_<g.length;++_)if(g[_]!=null)switch(F[_]){case"L":Z.write_shift(1,y[b][_]==null?63:y[b][_]?84:70);break;case"B":Z.write_shift(8,y[b][_]||0,"f");break;case"N":var ne="0";for(typeof y[b][_]=="number"&&(ne=y[b][_].toFixed(I[_]||0)),P=0;P<L[_]-ne.length;++P)Z.write_shift(1,32);Z.write_shift(1,ne,"sbcs");break;case"D":y[b][_]?(Z.write_shift(4,("0000"+y[b][_].getFullYear()).slice(-4),"sbcs"),Z.write_shift(2,("00"+(y[b][_].getMonth()+1)).slice(-2),"sbcs"),Z.write_shift(2,("00"+y[b][_].getDate()).slice(-2),"sbcs")):Z.write_shift(8,"00000000","sbcs");break;case"C":var H=String(y[b][_]!=null?y[b][_]:"").slice(0,L[_]);for(Z.write_shift(1,H,"sbcs"),P=0;P<L[_]-H.length;++P)Z.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:s,to_sheet:n,from_sheet:o}}(),Q5=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+en(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(g,y){var w=t[y];return typeof w=="number"?h4(w):w},n=function(g,y,w){var b=y.charCodeAt(0)-32<<4|w.charCodeAt(0)-48;return b==59?g:h4(b)};t["|"]=254;function s(g,y){switch(y.type){case"base64":return i(ma(g),y);case"binary":return i(g,y);case"buffer":return i(Ht&&Buffer.isBuffer(g)?g.toString("binary"):$l(g),y);case"array":return i(Uc(g),y)}throw new Error("Unrecognized type "+y.type)}function i(g,y){var w=g.split(/[\n\r]+/),b=-1,_=-1,P=0,A=0,k=[],F=[],L=null,I={},N=[],T=[],R=[],B=0,z;for(+y.codepage>=0&&ti(+y.codepage);P!==w.length;++P){B=0;var O=w[P].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),D=O.replace(/;;/g,"\0").split(";").map(function(Y){return Y.replace(/\u0000/g,";")}),ie=D[0],Z;if(O.length>0)switch(ie){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&F.push(O.slice(3).replace(/;;/g,";"));break;case"C":var ne=!1,H=!1,Q=!1,q=!1,ae=-1,U=-1;for(A=1;A<D.length;++A)switch(D[A].charAt(0)){case"A":break;case"X":_=parseInt(D[A].slice(1))-1,H=!0;break;case"Y":for(b=parseInt(D[A].slice(1))-1,H||(_=0),z=k.length;z<=b;++z)k[z]=[];break;case"K":Z=D[A].slice(1),Z.charAt(0)==='"'?Z=Z.slice(1,Z.length-1):Z==="TRUE"?Z=!0:Z==="FALSE"?Z=!1:isNaN(ni(Z))?isNaN(Dd(Z).getDate())||(Z=Pr(Z)):(Z=ni(Z),L!==null&&eh(L)&&(Z=Cx(Z))),ne=!0;break;case"E":q=!0;var M=fd(D[A].slice(1),{r:b,c:_});k[b][_]=[k[b][_],M];break;case"S":Q=!0,k[b][_]=[k[b][_],"S5S"];break;case"G":break;case"R":ae=parseInt(D[A].slice(1))-1;break;case"C":U=parseInt(D[A].slice(1))-1;break;default:if(y&&y.WTF)throw new Error("SYLK bad record "+O)}if(ne&&(k[b][_]&&k[b][_].length==2?k[b][_][0]=Z:k[b][_]=Z,L=null),Q){if(q)throw new Error("SYLK shared formula cannot have own formula");var X=ae>-1&&k[ae][U];if(!X||!X[1])throw new Error("SYLK shared formula cannot find base");k[b][_][1]=pP(X[1],{r:b-ae,c:_-U})}break;case"F":var K=0;for(A=1;A<D.length;++A)switch(D[A].charAt(0)){case"X":_=parseInt(D[A].slice(1))-1,++K;break;case"Y":for(b=parseInt(D[A].slice(1))-1,z=k.length;z<=b;++z)k[z]=[];break;case"M":B=parseInt(D[A].slice(1))/20;break;case"F":break;case"G":break;case"P":L=F[parseInt(D[A].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(R=D[A].slice(1).split(" "),z=parseInt(R[0],10);z<=parseInt(R[1],10);++z)B=parseInt(R[2],10),T[z-1]=B===0?{hidden:!0}:{wch:B},Rl(T[z-1]);break;case"C":_=parseInt(D[A].slice(1))-1,T[_]||(T[_]={});break;case"R":b=parseInt(D[A].slice(1))-1,N[b]||(N[b]={}),B>0?(N[b].hpt=B,N[b].hpx=Ld(B)):B===0&&(N[b].hidden=!0);break;default:if(y&&y.WTF)throw new Error("SYLK bad record "+O)}K<1&&(L=null);break;default:if(y&&y.WTF)throw new Error("SYLK bad record "+O)}}return N.length>0&&(I["!rows"]=N),T.length>0&&(I["!cols"]=T),y&&y.sheetRows&&(k=k.slice(0,y.sheetRows)),[k,I]}function o(g,y){var w=s(g,y),b=w[0],_=w[1],P=rh(b,y);return en(_).forEach(function(A){P[A]=_[A]}),P}function l(g,y){return Hl(o(g,y),y)}function u(g,y,w,b){var _="C;Y"+(w+1)+";X"+(b+1)+";K";switch(g.t){case"n":_+=g.v||0,g.f&&!g.F&&(_+=";E"+a_(g.f,{r:w,c:b}));break;case"b":_+=g.v?"TRUE":"FALSE";break;case"e":_+=g.w||g.v;break;case"d":_+='"'+(g.w||g.v)+'"';break;case"s":_+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return _}function h(g,y){y.forEach(function(w,b){var _="F;W"+(b+1)+" "+(b+1)+" ";w.hidden?_+="0":(typeof w.width=="number"&&!w.wpx&&(w.wpx=Yf(w.width)),typeof w.wpx=="number"&&!w.wch&&(w.wch=Qf(w.wpx)),typeof w.wch=="number"&&(_+=Math.round(w.wch))),_.charAt(_.length-1)!=" "&&g.push(_)})}function f(g,y){y.forEach(function(w,b){var _="F;";w.hidden?_+="M0;":w.hpt?_+="M"+20*w.hpt+";":w.hpx&&(_+="M"+20*Jf(w.hpx)+";"),_.length>2&&g.push(_+"R"+(b+1))})}function p(g,y){var w=["ID;PWXL;N;E"],b=[],_=sr(g["!ref"]),P,A=Array.isArray(g),k=`\r
`;w.push("P;PGeneral"),w.push("F;P0;DG0G8;M255"),g["!cols"]&&h(w,g["!cols"]),g["!rows"]&&f(w,g["!rows"]),w.push("B;Y"+(_.e.r-_.s.r+1)+";X"+(_.e.c-_.s.c+1)+";D"+[_.s.c,_.s.r,_.e.c,_.e.r].join(" "));for(var F=_.s.r;F<=_.e.r;++F)for(var L=_.s.c;L<=_.e.c;++L){var I=At({r:F,c:L});P=A?(g[F]||[])[L]:g[I],!(!P||P.v==null&&(!P.f||P.F))&&b.push(u(P,g,F,L))}return w.join(k)+k+b.join(k)+k+"E"+k}return{to_workbook:l,to_sheet:o,from_sheet:p}}(),J5=function(){function t(i,o){switch(o.type){case"base64":return e(ma(i),o);case"binary":return e(i,o);case"buffer":return e(Ht&&Buffer.isBuffer(i)?i.toString("binary"):$l(i),o);case"array":return e(Uc(i),o)}throw new Error("Unrecognized type "+o.type)}function e(i,o){for(var l=i.split(`
`),u=-1,h=-1,f=0,p=[];f!==l.length;++f){if(l[f].trim()==="BOT"){p[++u]=[],h=0;continue}if(!(u<0)){var g=l[f].trim().split(","),y=g[0],w=g[1];++f;for(var b=l[f]||"";(b.match(/["]/g)||[]).length&1&&f<l.length-1;)b+=`
`+l[++f];switch(b=b.trim(),+y){case-1:if(b==="BOT"){p[++u]=[],h=0;continue}else if(b!=="EOD")throw new Error("Unrecognized DIF special command "+b);break;case 0:b==="TRUE"?p[u][h]=!0:b==="FALSE"?p[u][h]=!1:isNaN(ni(w))?isNaN(Dd(w).getDate())?p[u][h]=w:p[u][h]=Pr(w):p[u][h]=ni(w),++h;break;case 1:b=b.slice(1,b.length-1),b=b.replace(/""/g,'"'),b&&b.match(/^=".*"$/)&&(b=b.slice(2,-1)),p[u][h++]=b!==""?b:null;break}if(b==="EOD")break}}return o&&o.sheetRows&&(p=p.slice(0,o.sheetRows)),p}function r(i,o){return rh(t(i,o),o)}function n(i,o){return Hl(r(i,o),o)}var s=function(){var i=function(u,h,f,p,g){u.push(h),u.push(f+","+p),u.push('"'+g.replace(/"/g,'""')+'"')},o=function(u,h,f,p){u.push(h+","+f),u.push(h==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(u){var h=[],f=sr(u["!ref"]),p,g=Array.isArray(u);i(h,"TABLE",0,1,"sheetjs"),i(h,"VECTORS",0,f.e.r-f.s.r+1,""),i(h,"TUPLES",0,f.e.c-f.s.c+1,""),i(h,"DATA",0,0,"");for(var y=f.s.r;y<=f.e.r;++y){o(h,-1,0,"BOT");for(var w=f.s.c;w<=f.e.c;++w){var b=At({r:y,c:w});if(p=g?(u[y]||[])[w]:u[b],!p){o(h,1,0,"");continue}switch(p.t){case"n":var _=p.w;!_&&p.v!=null&&(_=p.v),_==null?p.f&&!p.F?o(h,1,0,"="+p.f):o(h,1,0,""):o(h,0,_,"V");break;case"b":o(h,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":o(h,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=Fa(p.z||jt[14],kn(Pr(p.v)))),o(h,0,p.w,"V");break;default:o(h,1,0,"")}}}o(h,-1,0,"EOD");var P=`\r
`,A=h.join(P);return A}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),Z5=function(){function t(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(p,g){for(var y=p.split(`
`),w=-1,b=-1,_=0,P=[];_!==y.length;++_){var A=y[_].trim().split(":");if(A[0]==="cell"){var k=Hr(A[1]);if(P.length<=k.r)for(w=P.length;w<=k.r;++w)P[w]||(P[w]=[]);switch(w=k.r,b=k.c,A[2]){case"t":P[w][b]=t(A[3]);break;case"v":P[w][b]=+A[3];break;case"vtf":var F=A[A.length-1];case"vtc":switch(A[3]){case"nl":P[w][b]=!!+A[4];break;default:P[w][b]=+A[4];break}A[2]=="vtf"&&(P[w][b]=[P[w][b],F])}}}return g&&g.sheetRows&&(P=P.slice(0,g.sheetRows)),P}function n(p,g){return rh(r(p,g),g)}function s(p,g){return Hl(n(p,g),g)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),u="--SocialCalcSpreadsheetControlSave--";function h(p){if(!p||!p["!ref"])return"";for(var g=[],y=[],w,b="",_=Ks(p["!ref"]),P=Array.isArray(p),A=_.s.r;A<=_.e.r;++A)for(var k=_.s.c;k<=_.e.c;++k)if(b=At({r:A,c:k}),w=P?(p[A]||[])[k]:p[b],!(!w||w.v==null||w.t==="z")){switch(y=["cell",b,"t"],w.t){case"s":case"str":y.push(e(w.v));break;case"n":w.f?(y[2]="vtf",y[3]="n",y[4]=w.v,y[5]=e(w.f)):(y[2]="v",y[3]=w.v);break;case"b":y[2]="vt"+(w.f?"f":"c"),y[3]="nl",y[4]=w.v?"1":"0",y[5]=e(w.f||(w.v?"TRUE":"FALSE"));break;case"d":var F=kn(Pr(w.v));y[2]="vtc",y[3]="nd",y[4]=""+F,y[5]=w.w||Fa(w.z||jt[14],F);break;case"e":continue}g.push(y.join(":"))}return g.push("sheet:c:"+(_.e.c-_.s.c+1)+":r:"+(_.e.r-_.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function f(p){return[i,o,l,o,h(p),u].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:f}}(),Fd=function(){function t(f,p,g,y,w){w.raw?p[g][y]=f:f===""||(f==="TRUE"?p[g][y]=!0:f==="FALSE"?p[g][y]=!1:isNaN(ni(f))?isNaN(Dd(f).getDate())?p[g][y]=f:p[g][y]=Pr(f):p[g][y]=ni(f))}function e(f,p){var g=p||{},y=[];if(!f||f.length===0)return y;for(var w=f.split(/[\r\n]/),b=w.length-1;b>=0&&w[b].length===0;)--b;for(var _=10,P=0,A=0;A<=b;++A)P=w[A].indexOf(" "),P==-1?P=w[A].length:P++,_=Math.max(_,P);for(A=0;A<=b;++A){y[A]=[];var k=0;for(t(w[A].slice(0,_).trim(),y,A,k,g),k=1;k<=(w[A].length-_)/10+1;++k)t(w[A].slice(_+(k-1)*10,_+k*10).trim(),y,A,k,g)}return g.sheetRows&&(y=y.slice(0,g.sheetRows)),y}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(f){for(var p={},g=!1,y=0,w=0;y<f.length;++y)(w=f.charCodeAt(y))==34?g=!g:!g&&w in r&&(p[w]=(p[w]||0)+1);w=[];for(y in p)Object.prototype.hasOwnProperty.call(p,y)&&w.push([p[y],y]);if(!w.length){p=n;for(y in p)Object.prototype.hasOwnProperty.call(p,y)&&w.push([p[y],y])}return w.sort(function(b,_){return b[0]-_[0]||n[b[1]]-n[_[1]]}),r[w.pop()[1]]||44}function i(f,p){var g=p||{},y="",w=g.dense?[]:{},b={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(y=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(y=f.charAt(4),f=f.slice(6)):y=s(f.slice(0,1024)):g&&g.FS?y=g.FS:y=s(f.slice(0,1024));var _=0,P=0,A=0,k=0,F=0,L=y.charCodeAt(0),I=!1,N=0,T=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var R=g.dateNF!=null?jK(g.dateNF):null;function B(){var z=f.slice(k,F),O={};if(z.charAt(0)=='"'&&z.charAt(z.length-1)=='"'&&(z=z.slice(1,-1).replace(/""/g,'"')),z.length===0)O.t="z";else if(g.raw)O.t="s",O.v=z;else if(z.trim().length===0)O.t="s",O.v=z;else if(z.charCodeAt(0)==61)z.charCodeAt(1)==34&&z.charCodeAt(z.length-1)==34?(O.t="s",O.v=z.slice(2,-1).replace(/""/g,'"')):nee(z)?(O.t="n",O.f=z.slice(1)):(O.t="s",O.v=z);else if(z=="TRUE")O.t="b",O.v=!0;else if(z=="FALSE")O.t="b",O.v=!1;else if(!isNaN(A=ni(z)))O.t="n",g.cellText!==!1&&(O.w=z),O.v=A;else if(!isNaN(Dd(z).getDate())||R&&z.match(R)){O.z=g.dateNF||jt[14];var D=0;R&&z.match(R)&&(z=AK(z,g.dateNF,z.match(R)||[]),D=1),g.cellDates?(O.t="d",O.v=Pr(z,D)):(O.t="n",O.v=kn(Pr(z,D))),g.cellText!==!1&&(O.w=Fa(O.z,O.v instanceof Date?kn(O.v):O.v)),g.cellNF||delete O.z}else O.t="s",O.v=z;if(O.t=="z"||(g.dense?(w[_]||(w[_]=[]),w[_][P]=O):w[At({c:P,r:_})]=O),k=F+1,T=f.charCodeAt(k),b.e.c<P&&(b.e.c=P),b.e.r<_&&(b.e.r=_),N==L)++P;else if(P=0,++_,g.sheetRows&&g.sheetRows<=_)return!0}e:for(;F<f.length;++F)switch(N=f.charCodeAt(F)){case 34:T===34&&(I=!I);break;case L:case 10:case 13:if(!I&&B())break e;break}return F-k>0&&B(),w["!ref"]=Vt(b),w}function o(f,p){return!(p&&p.PRN)||p.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?i(f,p):rh(e(f,p),p)}function l(f,p){var g="",y=p.type=="string"?[0,0,0,0]:f_(f,p);switch(p.type){case"base64":g=ma(f);break;case"binary":g=f;break;case"buffer":p.codepage==65001?g=f.toString("utf8"):p.codepage&&typeof zf<"u"||(g=Ht&&Buffer.isBuffer(f)?f.toString("binary"):$l(f));break;case"array":g=Uc(f);break;case"string":g=f;break;default:throw new Error("Unrecognized type "+p.type)}return y[0]==239&&y[1]==187&&y[2]==191?g=vr(g.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?g=vr(g):p.type=="binary"&&typeof zf<"u",g.slice(0,19)=="socialcalc:version:"?Z5.to_sheet(p.type=="string"?g:vr(g),p):o(g,p)}function u(f,p){return Hl(l(f,p),p)}function h(f){for(var p=[],g=sr(f["!ref"]),y,w=Array.isArray(f),b=g.s.r;b<=g.e.r;++b){for(var _=[],P=g.s.c;P<=g.e.c;++P){var A=At({r:b,c:P});if(y=w?(f[b]||[])[P]:f[A],!y||y.v==null){_.push("          ");continue}for(var k=(y.w||(Eo(y),y.w)||"").slice(0,10);k.length<10;)k+=" ";_.push(k+(P===0?" ":""))}p.push(_.join(""))}return p.join(`
`)}return{to_workbook:u,to_sheet:l,from_sheet:h}}();function $Q(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var s=Q5.to_workbook(t,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return Fd.to_workbook(t,e)}}var Tc=function(){function t(M,X,K){if(M){Kn(M,M.l||0);for(var Y=K.Enum||ae;M.l<M.length;){var xe=M.read_shift(2),le=Y[xe]||Y[65535],fe=M.read_shift(2),ve=M.l+fe,we=le.f&&le.f(M,fe,K);if(M.l=ve,X(we,le,xe))return}}}function e(M,X){switch(X.type){case"base64":return r(oa(ma(M)),X);case"binary":return r(oa(M),X);case"buffer":case"array":return r(M,X)}throw"Unsupported type "+X.type}function r(M,X){if(!M)return M;var K=X||{},Y=K.dense?[]:{},xe="Sheet1",le="",fe=0,ve={},we=[],We=[],re={s:{r:0,c:0},e:{r:0,c:0}},st=K.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)K.Enum=ae,t(M,function(ee,pe,Ce){switch(Ce){case 0:K.vers=ee,ee>=4096&&(K.qpro=!0);break;case 6:re=ee;break;case 204:ee&&(le=ee);break;case 222:le=ee;break;case 15:case 51:K.qpro||(ee[1].v=ee[1].v.slice(1));case 13:case 14:case 16:Ce==14&&(ee[2]&112)==112&&(ee[2]&15)>1&&(ee[2]&15)<15&&(ee[1].z=K.dateNF||jt[14],K.cellDates&&(ee[1].t="d",ee[1].v=Cx(ee[1].v))),K.qpro&&ee[3]>fe&&(Y["!ref"]=Vt(re),ve[xe]=Y,we.push(xe),Y=K.dense?[]:{},re={s:{r:0,c:0},e:{r:0,c:0}},fe=ee[3],xe=le||"Sheet"+(fe+1),le="");var $e=K.dense?(Y[ee[0].r]||[])[ee[0].c]:Y[At(ee[0])];if($e){$e.t=ee[1].t,$e.v=ee[1].v,ee[1].z!=null&&($e.z=ee[1].z),ee[1].f!=null&&($e.f=ee[1].f);break}K.dense?(Y[ee[0].r]||(Y[ee[0].r]=[]),Y[ee[0].r][ee[0].c]=ee[1]):Y[At(ee[0])]=ee[1];break}},K);else if(M[2]==26||M[2]==14)K.Enum=U,M[2]==14&&(K.qpro=!0,M.l=0),t(M,function(ee,pe,Ce){switch(Ce){case 204:xe=ee;break;case 22:ee[1].v=ee[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ee[3]>fe&&(Y["!ref"]=Vt(re),ve[xe]=Y,we.push(xe),Y=K.dense?[]:{},re={s:{r:0,c:0},e:{r:0,c:0}},fe=ee[3],xe="Sheet"+(fe+1)),st>0&&ee[0].r>=st)break;K.dense?(Y[ee[0].r]||(Y[ee[0].r]=[]),Y[ee[0].r][ee[0].c]=ee[1]):Y[At(ee[0])]=ee[1],re.e.c<ee[0].c&&(re.e.c=ee[0].c),re.e.r<ee[0].r&&(re.e.r=ee[0].r);break;case 27:ee[14e3]&&(We[ee[14e3][0]]=ee[14e3][1]);break;case 1537:We[ee[0]]=ee[1],ee[0]==fe&&(xe=ee[1]);break}},K);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(Y["!ref"]=Vt(re),ve[le||xe]=Y,we.push(le||xe),!We.length)return{SheetNames:we,Sheets:ve};for(var Re={},he=[],me=0;me<We.length;++me)ve[we[me]]?(he.push(We[me]||we[me]),Re[We[me]]=ve[We[me]]||ve[we[me]]):(he.push(We[me]),Re[We[me]]={"!ref":"A1"});return{SheetNames:he,Sheets:Re}}function n(M,X){var K=X||{};if(+K.codepage>=0&&ti(+K.codepage),K.type=="string")throw new Error("Cannot write WK1 to JS string");var Y=Gs(),xe=sr(M["!ref"]),le=Array.isArray(M),fe=[];tt(Y,0,i(1030)),tt(Y,6,u(xe));for(var ve=Math.min(xe.e.r,8191),we=xe.s.r;we<=ve;++we)for(var We=ln(we),re=xe.s.c;re<=xe.e.c;++re){we===xe.s.r&&(fe[re]=$r(re));var st=fe[re]+We,Re=le?(M[we]||[])[re]:M[st];if(!(!Re||Re.t=="z"))if(Re.t=="n")(Re.v|0)==Re.v&&Re.v>=-32768&&Re.v<=32767?tt(Y,13,y(we,re,Re.v)):tt(Y,14,b(we,re,Re.v));else{var he=Eo(Re);tt(Y,15,p(we,re,he.slice(0,239)))}}return tt(Y,1),Y.end()}function s(M,X){var K=X||{};if(+K.codepage>=0&&ti(+K.codepage),K.type=="string")throw new Error("Cannot write WK3 to JS string");var Y=Gs();tt(Y,0,o(M));for(var xe=0,le=0;xe<M.SheetNames.length;++xe)(M.Sheets[M.SheetNames[xe]]||{})["!ref"]&&tt(Y,27,q(M.SheetNames[xe],le++));var fe=0;for(xe=0;xe<M.SheetNames.length;++xe){var ve=M.Sheets[M.SheetNames[xe]];if(!(!ve||!ve["!ref"])){for(var we=sr(ve["!ref"]),We=Array.isArray(ve),re=[],st=Math.min(we.e.r,8191),Re=we.s.r;Re<=st;++Re)for(var he=ln(Re),me=we.s.c;me<=we.e.c;++me){Re===we.s.r&&(re[me]=$r(me));var ee=re[me]+he,pe=We?(ve[Re]||[])[me]:ve[ee];if(!(!pe||pe.t=="z"))if(pe.t=="n")tt(Y,23,B(Re,me,fe,pe.v));else{var Ce=Eo(pe);tt(Y,22,N(Re,me,fe,Ce.slice(0,239)))}}++fe}}return tt(Y,1),Y.end()}function i(M){var X=Le(2);return X.write_shift(2,M),X}function o(M){var X=Le(26);X.write_shift(2,4096),X.write_shift(2,4),X.write_shift(4,0);for(var K=0,Y=0,xe=0,le=0;le<M.SheetNames.length;++le){var fe=M.SheetNames[le],ve=M.Sheets[fe];if(!(!ve||!ve["!ref"])){++xe;var we=Ks(ve["!ref"]);K<we.e.r&&(K=we.e.r),Y<we.e.c&&(Y=we.e.c)}}return K>8191&&(K=8191),X.write_shift(2,K),X.write_shift(1,xe),X.write_shift(1,Y),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(1,1),X.write_shift(1,2),X.write_shift(4,0),X.write_shift(4,0),X}function l(M,X,K){var Y={s:{c:0,r:0},e:{c:0,r:0}};return X==8&&K.qpro?(Y.s.c=M.read_shift(1),M.l++,Y.s.r=M.read_shift(2),Y.e.c=M.read_shift(1),M.l++,Y.e.r=M.read_shift(2),Y):(Y.s.c=M.read_shift(2),Y.s.r=M.read_shift(2),X==12&&K.qpro&&(M.l+=2),Y.e.c=M.read_shift(2),Y.e.r=M.read_shift(2),X==12&&K.qpro&&(M.l+=2),Y.s.c==65535&&(Y.s.c=Y.e.c=Y.s.r=Y.e.r=0),Y)}function u(M){var X=Le(8);return X.write_shift(2,M.s.c),X.write_shift(2,M.s.r),X.write_shift(2,M.e.c),X.write_shift(2,M.e.r),X}function h(M,X,K){var Y=[{c:0,r:0},{t:"n",v:0},0,0];return K.qpro&&K.vers!=20768?(Y[0].c=M.read_shift(1),Y[3]=M.read_shift(1),Y[0].r=M.read_shift(2),M.l+=2):(Y[2]=M.read_shift(1),Y[0].c=M.read_shift(2),Y[0].r=M.read_shift(2)),Y}function f(M,X,K){var Y=M.l+X,xe=h(M,X,K);if(xe[1].t="s",K.vers==20768){M.l++;var le=M.read_shift(1);return xe[1].v=M.read_shift(le,"utf8"),xe}return K.qpro&&M.l++,xe[1].v=M.read_shift(Y-M.l,"cstr"),xe}function p(M,X,K){var Y=Le(7+K.length);Y.write_shift(1,255),Y.write_shift(2,X),Y.write_shift(2,M),Y.write_shift(1,39);for(var xe=0;xe<Y.length;++xe){var le=K.charCodeAt(xe);Y.write_shift(1,le>=128?95:le)}return Y.write_shift(1,0),Y}function g(M,X,K){var Y=h(M,X,K);return Y[1].v=M.read_shift(2,"i"),Y}function y(M,X,K){var Y=Le(7);return Y.write_shift(1,255),Y.write_shift(2,X),Y.write_shift(2,M),Y.write_shift(2,K,"i"),Y}function w(M,X,K){var Y=h(M,X,K);return Y[1].v=M.read_shift(8,"f"),Y}function b(M,X,K){var Y=Le(13);return Y.write_shift(1,255),Y.write_shift(2,X),Y.write_shift(2,M),Y.write_shift(8,K,"f"),Y}function _(M,X,K){var Y=M.l+X,xe=h(M,X,K);if(xe[1].v=M.read_shift(8,"f"),K.qpro)M.l=Y;else{var le=M.read_shift(2);F(M.slice(M.l,M.l+le),xe),M.l+=le}return xe}function P(M,X,K){var Y=X&32768;return X&=-32769,X=(Y?M:0)+(X>=8192?X-16384:X),(Y?"":"$")+(K?$r(X):ln(X))}var A={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},k=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function F(M,X){Kn(M,0);for(var K=[],Y=0,xe="",le="",fe="",ve="";M.l<M.length;){var we=M[M.l++];switch(we){case 0:K.push(M.read_shift(8,"f"));break;case 1:le=P(X[0].c,M.read_shift(2),!0),xe=P(X[0].r,M.read_shift(2),!1),K.push(le+xe);break;case 2:{var We=P(X[0].c,M.read_shift(2),!0),re=P(X[0].r,M.read_shift(2),!1);le=P(X[0].c,M.read_shift(2),!0),xe=P(X[0].r,M.read_shift(2),!1),K.push(We+re+":"+le+xe)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:K.push("("+K.pop()+")");break;case 5:K.push(M.read_shift(2));break;case 6:{for(var st="";we=M[M.l++];)st+=String.fromCharCode(we);K.push('"'+st.replace(/"/g,'""')+'"')}break;case 8:K.push("-"+K.pop());break;case 23:K.push("+"+K.pop());break;case 22:K.push("NOT("+K.pop()+")");break;case 20:case 21:ve=K.pop(),fe=K.pop(),K.push(["AND","OR"][we-20]+"("+fe+","+ve+")");break;default:if(we<32&&k[we])ve=K.pop(),fe=K.pop(),K.push(fe+k[we]+ve);else if(A[we]){if(Y=A[we][1],Y==69&&(Y=M[M.l++]),Y>K.length){console.error("WK1 bad formula parse 0x"+we.toString(16)+":|"+K.join("|")+"|");return}var Re=K.slice(-Y);K.length-=Y,K.push(A[we][0]+"("+Re.join(",")+")")}else return we<=7?console.error("WK1 invalid opcode "+we.toString(16)):we<=24?console.error("WK1 unsupported op "+we.toString(16)):we<=30?console.error("WK1 invalid opcode "+we.toString(16)):we<=115?console.error("WK1 unsupported function opcode "+we.toString(16)):console.error("WK1 unrecognized opcode "+we.toString(16))}}K.length==1?X[1].f=""+K[0]:console.error("WK1 bad formula parse |"+K.join("|")+"|")}function L(M){var X=[{c:0,r:0},{t:"n",v:0},0];return X[0].r=M.read_shift(2),X[3]=M[M.l++],X[0].c=M[M.l++],X}function I(M,X){var K=L(M);return K[1].t="s",K[1].v=M.read_shift(X-4,"cstr"),K}function N(M,X,K,Y){var xe=Le(6+Y.length);xe.write_shift(2,M),xe.write_shift(1,K),xe.write_shift(1,X),xe.write_shift(1,39);for(var le=0;le<Y.length;++le){var fe=Y.charCodeAt(le);xe.write_shift(1,fe>=128?95:fe)}return xe.write_shift(1,0),xe}function T(M,X){var K=L(M);K[1].v=M.read_shift(2);var Y=K[1].v>>1;if(K[1].v&1)switch(Y&7){case 0:Y=(Y>>3)*5e3;break;case 1:Y=(Y>>3)*500;break;case 2:Y=(Y>>3)/20;break;case 3:Y=(Y>>3)/200;break;case 4:Y=(Y>>3)/2e3;break;case 5:Y=(Y>>3)/2e4;break;case 6:Y=(Y>>3)/16;break;case 7:Y=(Y>>3)/64;break}return K[1].v=Y,K}function R(M,X){var K=L(M),Y=M.read_shift(4),xe=M.read_shift(4),le=M.read_shift(2);if(le==65535)return Y===0&&xe===3221225472?(K[1].t="e",K[1].v=15):Y===0&&xe===3489660928?(K[1].t="e",K[1].v=42):K[1].v=0,K;var fe=le&32768;return le=(le&32767)-16446,K[1].v=(1-fe*2)*(xe*Math.pow(2,le+32)+Y*Math.pow(2,le)),K}function B(M,X,K,Y){var xe=Le(14);if(xe.write_shift(2,M),xe.write_shift(1,K),xe.write_shift(1,X),Y==0)return xe.write_shift(4,0),xe.write_shift(4,0),xe.write_shift(2,65535),xe;var le=0,fe=0,ve=0,we=0;return Y<0&&(le=1,Y=-Y),fe=Math.log2(Y)|0,Y/=Math.pow(2,fe-31),we=Y>>>0,(we&2147483648)==0&&(Y/=2,++fe,we=Y>>>0),Y-=we,we|=2147483648,we>>>=0,Y*=Math.pow(2,32),ve=Y>>>0,xe.write_shift(4,ve),xe.write_shift(4,we),fe+=16383+(le?32768:0),xe.write_shift(2,fe),xe}function z(M,X){var K=R(M);return M.l+=X-14,K}function O(M,X){var K=L(M),Y=M.read_shift(4);return K[1].v=Y>>6,K}function D(M,X){var K=L(M),Y=M.read_shift(8,"f");return K[1].v=Y,K}function ie(M,X){var K=D(M);return M.l+=X-10,K}function Z(M,X){return M[M.l+X-1]==0?M.read_shift(X,"cstr"):""}function ne(M,X){var K=M[M.l++];K>X-1&&(K=X-1);for(var Y="";Y.length<K;)Y+=String.fromCharCode(M[M.l++]);return Y}function H(M,X,K){if(!(!K.qpro||X<21)){var Y=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var xe=M.read_shift(X-21,"cstr");return[Y,xe]}}function Q(M,X){for(var K={},Y=M.l+X;M.l<Y;){var xe=M.read_shift(2);if(xe==14e3){for(K[xe]=[0,""],K[xe][0]=M.read_shift(2);M[M.l];)K[xe][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return K}function q(M,X){var K=Le(5+M.length);K.write_shift(2,14e3),K.write_shift(2,X);for(var Y=0;Y<M.length;++Y){var xe=M.charCodeAt(Y);K[K.l++]=xe>127?95:xe}return K[K.l++]=0,K}var ae={0:{n:"BOF",f:gn},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:w},15:{n:"LABEL",f},16:{n:"FORMULA",f:_},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Z},222:{n:"SHEETNAMELP",f:ne},65535:{n:""}},U={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:R},24:{n:"NUMBER18",f:T},25:{n:"FORMULA19",f:z},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Q},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:ie},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Z},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:H},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}}();function HQ(t){var e={},r=t.match(bs),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=Rt(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;e.cp=Cb[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=i.val;break;case"<sz":e.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":i.rgb&&(e.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return e}var WQ=function(){var t=Wf("t"),e=Wf("rPr");function r(i){var o=i.match(t);if(!o)return{t:"s",v:""};var l={t:"s",v:rr(o[1])},u=i.match(e);return u&&(l.s=HQ(u[1])),l}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(s).map(r).filter(function(l){return l.v})}}(),qQ=function(){var e=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var u=s.valign||"";return u=="superscript"||u=="super"?u="sup":u=="subscript"&&(u="sub"),u!=""&&(i.push("<"+u+">"),o.push("</"+u+">")),o.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(e,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),GQ=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,KQ=/<(?:\w+:)?r>/,XQ=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function e_(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=rr(vr(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=vr(t),r&&(n.h=Bb(n.t))):t.match(KQ)&&(n.r=vr(t),n.t=rr(vr((t.replace(XQ,"").match(GQ)||[]).join("").replace(bs,""))),r&&(n.h=qQ(WQ(n.r)))),n):{t:""}}var YQ=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,QQ=/<(?:\w+:)?(?:si|sstItem)>/g,JQ=/<\/(?:\w+:)?(?:si|sstItem)>/;function ZQ(t,e){var r=[],n="";if(!t)return r;var s=t.match(YQ);if(s){n=s[2].replace(QQ,"").split(JQ);for(var i=0;i!=n.length;++i){var o=e_(n[i].trim(),e);o!=null&&(r[r.length]=o)}s=Rt(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var eJ=/^\s|\s$|[\t\n\r]/;function eP(t,e){if(!e.bookSST)return"";var r=[cn];r[r.length]=Ze("sst",null,{xmlns:nu[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var s=t[n],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(eJ)&&(i+=' xml:space="preserve"'),i+=">"+xr(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function tJ(t){return[t.read_shift(4),t.read_shift(4)]}function rJ(t,e){var r=[],n=!1;return Co(t,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||e.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function nJ(t,e){return e||(e=Le(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var sJ=mX;function aJ(t){var e=Gs();Ue(e,159,nJ(t));for(var r=0;r<t.length;++r)Ue(e,19,sJ(t[r]));return Ue(e,160),e.end()}function tP(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function fo(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function iJ(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=fo(t,4),e.U=fo(t,4),e.W=fo(t,4),e}function oJ(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},s=t.read_shift(4),i=[];s-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=i,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function lJ(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(oJ(t));return e}function cJ(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function uJ(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=fo(t,4),e.U=fo(t,4),e.W=fo(t,4),e}function dJ(t){var e=uJ(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function rP(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function nP(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function hJ(t){var e=fo(t);switch(e.Minor){case 2:return[e.Minor,fJ(t)];case 3:return[e.Minor,mJ()];case 4:return[e.Minor,pJ(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function fJ(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=rP(t,r),s=nP(t,t.length-t.l);return{t:"Std",h:n,v:s}}function mJ(){throw new Error("File is password-protected: ECMA-376 Extensible")}function pJ(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(bs,function(i){var o=Rt(i);switch(Li(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function gJ(t,e){var r={},n=r.EncryptionVersionInfo=fo(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,r.EncryptionHeader=rP(t,s),e-=s,r.EncryptionVerifier=nP(t,e),r}function xJ(t){var e={},r=e.EncryptionVersionInfo=fo(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function t_(t){var e=0,r,n=tP(t),s=n.length+1,i,o,l,u,h;for(r=Pl(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(e&16384)===0?0:1,u=e<<1&32767,h=l|u,e=h^o;return e^52811}var sP=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},s=function(o,l){return n(o^l)},i=function(o){for(var l=e[o.length-1],u=104,h=o.length-1;h>=0;--h)for(var f=o[h],p=0;p!=7;++p)f&64&&(l^=r[u]),f*=2,--u;return l};return function(o){for(var l=tP(o),u=i(l),h=l.length,f=Pl(16),p=0;p!=16;++p)f[p]=0;var g,y,w;for((h&1)===1&&(g=u>>8,f[h]=s(t[0],g),--h,g=u&255,y=l[l.length-1],f[h]=s(y,g));h>0;)--h,g=u>>8,f[h]=s(l[h],g),--h,g=u&255,f[h]=s(l[h],g);for(h=15,w=15-l.length;w>0;)g=u>>8,f[h]=s(t[w],g),--h,--w,g=u&255,f[h]=s(l[h],g),--h,--w;return f}}(),vJ=function(t,e,r,n,s){s||(s=e),n||(n=sP(t));var i,o;for(i=0;i!=e.length;++i)o=e[i],o^=n[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,n]},yJ=function(t){var e=0,r=sP(t);return function(n){var s=vJ("",n,e,r);return e=s[1],s[0]}};function wJ(t,e,r,n){var s={key:gn(t),verificationBytes:gn(t)};return r.password&&(s.verifier=t_(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=yJ(r.password)),s}function bJ(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=xJ(t):n.Data=gJ(t,e),n}function _J(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?bJ(t,e-2,n):wJ(t,r.biff>=8?e:e-2,r,n),n}var aP=function(){function t(s,i){switch(i.type){case"base64":return e(ma(s),i);case"binary":return e(s,i);case"buffer":return e(Ht&&Buffer.isBuffer(s)?s.toString("binary"):$l(s),i);case"array":return e(Uc(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){var o=i||{},l=o.dense?[]:{},u=s.match(/\\trowd.*?\\row\b/g);if(!u.length)throw new Error("RTF missing table");var h={s:{c:0,r:0},e:{c:0,r:u.length-1}};return u.forEach(function(f,p){Array.isArray(l)&&(l[p]=[]);for(var g=/\\\w+\b/g,y=0,w,b=-1;w=g.exec(f);){switch(w[0]){case"\\cell":var _=f.slice(y,g.lastIndex-w[0].length);if(_[0]==" "&&(_=_.slice(1)),++b,_.length){var P={v:_,t:"s"};Array.isArray(l)?l[p][b]=P:l[At({r:p,c:b})]=P}break}y=g.lastIndex}b>h.e.c&&(h.e.c=b)}),l["!ref"]=Vt(h),l}function r(s,i){return Hl(t(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],o=sr(s["!ref"]),l,u=Array.isArray(s),h=o.s.r;h<=o.e.r;++h){i.push("\\trowd\\trautofit1");for(var f=o.s.c;f<=o.e.c;++f)i.push("\\cellx"+(f+1));for(i.push("\\pard\\intbl"),f=o.s.c;f<=o.e.c;++f){var p=At({r:h,c:f});l=u?(s[h]||[])[f]:s[p],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(Eo(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function NJ(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Xf(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function EJ(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(e,r,n),i=Math.min(e,r,n),o=s-i;if(o===0)return[0,0,e];var l=0,u=0,h=s+i;switch(u=o/(h>1?2-h:h),s){case e:l=((r-n)/o+6)%6;break;case r:l=(n-e)/o+2;break;case n:l=(e-r)/o+4;break}return[l/6,u,h/2]}function SJ(t){var e=t[0],r=t[1],n=t[2],s=r*2*(n<.5?n:1-n),i=n-s/2,o=[i,i,i],l=6*e,u;if(r!==0)switch(l|0){case 0:case 6:u=s*l,o[0]+=s,o[1]+=u;break;case 1:u=s*(2-l),o[0]+=u,o[1]+=s;break;case 2:u=s*(l-2),o[1]+=s,o[2]+=u;break;case 3:u=s*(4-l),o[1]+=u,o[2]+=s;break;case 4:u=s*(l-4),o[2]+=s,o[0]+=u;break;case 5:u=s*(6-l),o[2]+=u,o[0]+=s;break}for(var h=0;h!=3;++h)o[h]=Math.round(o[h]*255);return o}function kg(t,e){if(e===0)return t;var r=EJ(NJ(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),Xf(SJ(r))}var iP=6,kJ=15,TJ=1,ds=iP;function Yf(t){return Math.floor((t+Math.round(128/ds)/256)*ds)}function Qf(t){return Math.floor((t-5)/ds*100+.5)/100}function Tg(t){return Math.round((t*ds+5)/ds*256)/256}function Jy(t){return Tg(Qf(Yf(t)))}function r_(t){var e=Math.abs(t-Jy(t)),r=ds;if(e>.005)for(ds=TJ;ds<kJ;++ds)Math.abs(t-Jy(t))<=e&&(e=Math.abs(t-Jy(t)),r=ds);ds=r}function Rl(t){t.width?(t.wpx=Yf(t.width),t.wch=Qf(t.wpx),t.MDW=ds):t.wpx?(t.wch=Qf(t.wpx),t.width=Tg(t.wch),t.MDW=ds):typeof t.wch=="number"&&(t.width=Tg(t.wch),t.wpx=Yf(t.width),t.MDW=ds),t.customWidth&&delete t.customWidth}var jJ=96,oP=jJ;function Jf(t){return t*96/oP}function Ld(t){return t*oP/96}var AJ={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function CJ(t,e,r,n){e.Borders=[];var s={},i=!1;(t[0].match(bs)||[]).forEach(function(o){var l=Rt(o);switch(Li(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=Ar(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=Ar(l.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function IJ(t,e,r,n){e.Fills=[];var s={},i=!1;(t[0].match(bs)||[]).forEach(function(o){var l=Rt(o);switch(Li(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function PJ(t,e,r,n){e.Fonts=[];var s={},i=!1;(t[0].match(bs)||[]).forEach(function(o){var l=Rt(o);switch(Li(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=vr(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?Ar(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?Ar(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?Ar(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?Ar(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?Ar(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?Ar(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?Ar(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=Cb[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=Ar(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var u=Sc[s.color.index];s.color.index==81&&(u=Sc[1]),u||(u=Sc[1]),s.color.rgb=u[0].toString(16)+u[1].toString(16)+u[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=kg(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function RJ(t,e,r){e.NumberFmt=[];for(var n=en(jt),s=0;s<n.length;++s)e.NumberFmt[n[s]]=jt[n[s]];var i=t[0].match(bs);if(i)for(s=0;s<i.length;++s){var o=Rt(i[s]);switch(Li(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=rr(vr(o.formatCode)),u=parseInt(o.numFmtId,10);if(e.NumberFmt[u]=l,u>0){if(u>392){for(u=392;u>60&&e.NumberFmt[u]!=null;--u);e.NumberFmt[u]=l}ho(l,u)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function DJ(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Ze("numFmt",null,{numFmtId:n,formatCode:xr(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Ze("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var pp=["numFmtId","fillId","fontId","borderId","xfId"],gp=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function FJ(t,e,r){e.CellXf=[];var n,s=!1;(t[0].match(bs)||[]).forEach(function(i){var o=Rt(i),l=0;switch(Li(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<pp.length;++l)n[pp[l]]&&(n[pp[l]]=parseInt(n[pp[l]],10));for(l=0;l<gp.length;++l)n[gp[l]]&&(n[gp[l]]=Ar(n[gp[l]]));if(e.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[l]){n.numFmtId=l;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var u={};o.vertical&&(u.vertical=o.vertical),o.horizontal&&(u.horizontal=o.horizontal),o.textRotation!=null&&(u.textRotation=o.textRotation),o.indent&&(u.indent=o.indent),o.wrapText&&(u.wrapText=Ar(o.wrapText)),n.alignment=u;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function LJ(t){var e=[];return e[e.length]=Ze("cellXfs",null),t.forEach(function(r){e[e.length]=Ze("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Ze("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var OJ=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,u,h){var f={};if(!l)return f;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var p;return(p=l.match(e))&&RJ(p,f,h),(p=l.match(s))&&PJ(p,f,u,h),(p=l.match(n))&&IJ(p,f,u,h),(p=l.match(i))&&CJ(p,f,u,h),(p=l.match(r))&&FJ(p,f,h),f}}();function lP(t,e){var r=[cn,Ze("styleSheet",null,{xmlns:nu[0],"xmlns:vt":Nn.vt})],n;return t.SSF&&(n=DJ(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=LJ(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function MJ(t,e){var r=t.read_shift(2),n=gs(t);return[r,n]}function VJ(t,e,r){r||(r=Le(6+4*e.length)),r.write_shift(2,t),Ln(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function BJ(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=bX(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=t.read_shift(2);switch(i===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(n.underline=o);var l=t.read_shift(1);l>0&&(n.family=l);var u=t.read_shift(1);switch(u>0&&(n.charset=u),t.l++,n.color=wX(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=gs(t),n}function UJ(t,e){e||(e=Le(25+4*32)),e.write_shift(2,t.sz*20),_X(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),Ng(t.color,e);var n=0;return n=2,e.write_shift(1,n),Ln(t.name,e),e.length>e.l?e.slice(0,e.l):e}var zJ=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Zy,$J=ys;function rj(t,e){e||(e=Le(4*3+8*7+16*1)),Zy||(Zy=jx(zJ));var r=Zy[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(Ng({auto:1},e),Ng({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function HJ(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}function cP(t,e,r){r||(r=Le(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Mh(t,e){return e||(e=Le(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var WJ=ys;function qJ(t,e){return e||(e=Le(51)),e.write_shift(1,0),Mh(null,e),Mh(null,e),Mh(null,e),Mh(null,e),Mh(null,e),e.length>e.l?e.slice(0,e.l):e}function GJ(t,e){return e||(e=Le(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),_g(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function KJ(t,e,r){var n=Le(2052);return n.write_shift(4,t),_g(e,n),_g(r,n),n.length>n.l?n.slice(0,n.l):n}function XJ(t,e,r){var n={};n.NumberFmt=[];for(var s in jt)n.NumberFmt[s]=jt[s];n.CellXf=[],n.Fonts=[];var i=[],o=!1;return Co(t,function(u,h,f){switch(f){case 44:n.NumberFmt[u[0]]=u[1],ho(u[1],u[0]);break;case 43:n.Fonts.push(u),u.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(u.color.rgb=kg(e.themeElements.clrScheme[u.color.theme].rgb,u.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(u);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(f),o=!0;break;case 38:i.pop(),o=!1;break;default:if(h.T>0)i.push(f);else if(h.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}function YJ(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&++r}),r!=0&&(Ue(t,615,si(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&Ue(t,44,VJ(s,e[s]))}),Ue(t,616))}}function QJ(t){var e=1;Ue(t,611,si(e)),Ue(t,43,UJ({sz:12,color:{theme:1},name:"Calibri",family:2})),Ue(t,612)}function JJ(t){var e=2;Ue(t,603,si(e)),Ue(t,45,rj({patternType:"none"})),Ue(t,45,rj({patternType:"gray125"})),Ue(t,604)}function ZJ(t){var e=1;Ue(t,613,si(e)),Ue(t,46,qJ()),Ue(t,614)}function eZ(t){var e=1;Ue(t,626,si(e)),Ue(t,47,cP({numFmtId:0},65535)),Ue(t,627)}function tZ(t,e){Ue(t,617,si(e.length)),e.forEach(function(r){Ue(t,47,cP(r,0))}),Ue(t,618)}function rZ(t){var e=1;Ue(t,619,si(e)),Ue(t,48,GJ({xfId:0,name:"Normal"})),Ue(t,620)}function nZ(t){var e=0;Ue(t,505,si(e)),Ue(t,506)}function sZ(t){var e=0;Ue(t,508,KJ(e,"TableStyleMedium9","PivotStyleMedium4")),Ue(t,509)}function aZ(t,e){var r=Gs();return Ue(r,278),YJ(r,t.SSF),QJ(r),JJ(r),ZJ(r),eZ(r),tZ(r,e.cellXfs),rZ(r),nZ(r),sZ(r),Ue(r,279),r.end()}var iZ=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function oZ(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(bs)||[]).forEach(function(s){var i=Rt(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(e.themeElements.clrScheme[iZ.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function lZ(){}function cZ(){}var uZ=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,dZ=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,hZ=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function fZ(t,e,r){e.themeElements={};var n;[["clrScheme",uZ,oZ],["fontScheme",dZ,lZ],["fmtScheme",hZ,cZ]].forEach(function(s){if(!(n=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,e,r)})}var mZ=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function uP(t,e){(!t||t.length===0)&&(t=n_());var r,n={};if(!(r=t.match(mZ)))throw new Error("themeElements not found in theme");return fZ(r[0],n,e),n.raw=t,n}function n_(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[cn];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function pZ(t,e,r){var n=t.l+e,s=t.read_shift(4);if(s!==124226){if(!r.cellStyles){t.l=n;return}var i=t.slice(t.l);t.l=n;var o;try{o=r5(i,{type:"array"})}catch{return}var l=la(o,"theme/theme/theme1.xml",!0);if(l)return uP(l,r)}}function gZ(t){return t.read_shift(4)}function xZ(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=vZ(t,4);break;case 2:e.xclrValue=$5(t);break;case 3:e.xclrValue=gZ(t);break;case 4:t.l+=4;break}return t.l+=8,e}function vZ(t,e){return ys(t,e)}function yZ(t,e){return ys(t,e)}function wZ(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=xZ(t);break;case 6:n[1]=yZ(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function bZ(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),i=[];s-- >0;)i.push(wZ(t,r-t.l));return{ixfe:n,ext:i}}function _Z(t,e){e.forEach(function(r){r[0]})}function NZ(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:gs(t)}}function EZ(t){var e=Le(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Ln(t.name,e),e.slice(0,e.l)}function SZ(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function kZ(t){var e=Le(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function TZ(t,e){var r=Le(8+2*e.length);return r.write_shift(4,t),Ln(e,r),r.slice(0,r.l)}function jZ(t){return t.l+=4,t.read_shift(4)!=0}function AZ(t,e){var r=Le(8);return r.write_shift(4,t),r.write_shift(4,1),r}function CZ(t,e,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return Co(t,function(u,h,f){switch(f){case 335:n.Types.push({name:u.name});break;case 51:u.forEach(function(p){l==1?n.Cell.push({type:n.Types[p[0]-1].name,index:p[1]}):l==0&&n.Value.push({type:n.Types[p[0]-1].name,index:p[1]})});break;case 337:l=u?1:0;break;case 338:l=2;break;case 35:i.push(f),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!h.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}function IZ(){var t=Gs();return Ue(t,332),Ue(t,334,si(1)),Ue(t,335,EZ({name:"XLDAPR",version:12e4,flags:3496657072})),Ue(t,336),Ue(t,339,TZ(1,"XLDAPR")),Ue(t,52),Ue(t,35,si(514)),Ue(t,4096,si(0)),Ue(t,4097,Ia(1)),Ue(t,36),Ue(t,53),Ue(t,340),Ue(t,337,AZ(1)),Ue(t,51,kZ([[1,0]])),Ue(t,338),Ue(t,333),t.end()}function PZ(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var s=!1,i=2,o;return t.replace(bs,function(l){var u=Rt(l);switch(Li(u[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:u.name});break;case"</metadataType>":break;case"<futureMetadata":for(var h=0;h<n.Types.length;++h)n.Types[h].name==u.name&&(o=n.Types[h]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[u.t-1].name,index:+u.v}):i==0&&n.Value.push({type:n.Types[u.t-1].name,index:+u.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+u.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+u[0]+" in metadata")}return l}),n}function dP(){var t=[cn];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function RZ(t){var e=[];if(!t)return e;var r=1;return(t.match(bs)||[]).forEach(function(n){var s=Rt(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,e.push(s);break}}),e}function DZ(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=At(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function FZ(t,e,r){var n=[];return Co(t,function(i,o,l){switch(l){case 63:n.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function LZ(t,e,r,n){if(!t)return t;var s=n||{},i=!1;Co(t,function(l,u,h){switch(h){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!u.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+h.toString(16))}}},s)}function OZ(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var sd=1024;function hP(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[Ze("xml",null,{"xmlns:v":aa.v,"xmlns:o":aa.o,"xmlns:x":aa.x,"xmlns:mv":aa.mv}).replace(/\/>/,">"),Ze("o:shapelayout",Ze("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Ze("v:shapetype",[Ze("v:stroke",null,{joinstyle:"miter"}),Ze("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];sd<t*1e3;)sd+=1e3;return e.forEach(function(i){var o=Hr(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var u=l.type=="gradient"?Ze("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,h=Ze("v:fill",u,l),f={on:"t",obscured:"t"};++sd,s=s.concat(["<v:shape"+qf({id:"_x0000_s"+sd,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",h,Ze("v:shadow",null,f),Ze("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Xn("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Xn("x:AutoFill","False"),Xn("x:Row",String(o.r)),Xn("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function nj(t,e,r,n){var s=Array.isArray(t),i;e.forEach(function(o){var l=Hr(o.ref);if(s?(t[l.r]||(t[l.r]=[]),i=t[l.r][l.c]):i=t[o.ref],!i){i={t:"z"},s?t[l.r][l.c]=i:t[o.ref]=i;var u=sr(t["!ref"]||"BDWGO1000001:A1");u.s.r>l.r&&(u.s.r=l.r),u.e.r<l.r&&(u.e.r=l.r),u.s.c>l.c&&(u.s.c=l.c),u.e.c<l.c&&(u.e.c=l.c);var h=Vt(u);h!==t["!ref"]&&(t["!ref"]=h)}i.c||(i.c=[]);var f={a:o.author,t:o.t,r:o.r,T:r};o.h&&(f.h=o.h);for(var p=i.c.length-1;p>=0;--p){if(!r&&i.c[p].T)return;r&&!i.c[p].T&&i.c.splice(p,1)}if(r&&n){for(p=0;p<n.length;++p)if(f.a==n[p].id){f.a=n[p].name||f.a;break}}i.c.push(f)})}function MZ(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var u=Rt(l[0]),h={author:u.authorId&&r[u.authorId]||"sheetjsghost",ref:u.ref,guid:u.guid},f=Hr(u.ref);if(!(e.sheetRows&&e.sheetRows<=f.r)){var p=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),g=!!p&&!!p[1]&&e_(p[1])||{r:"",t:"",h:""};h.r=g.r,g.r=="<t></t>"&&(g.t=g.h=""),h.t=(g.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(h.h=g.h),n.push(h)}}}}),n}function fP(t){var e=[cn,Ze("comments",null,{xmlns:nu[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(s){var i=xr(s.a);r.indexOf(i)==-1&&(r.push(i),e.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var s=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(u){u.a&&(s=r.indexOf(xr(u.a))),i.push(u.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),i.length<=1)e.push(Xn("t",xr(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;e.push(Xn("t",xr(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function VZ(t,e){var r=[],n=!1,s={},i=0;return t.replace(bs,function(l,u){var h=Rt(l);switch(Li(h[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:h.personId,guid:h.id,ref:h.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=u+l.length;break;case"</text>":s.t=t.slice(i,u).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+h[0]+" in threaded comments")}return l}),r}function BZ(t,e,r){var n=[cn,Ze("ThreadedComments",null,{xmlns:Nn.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var u={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=u.id:u.parentId=i,o.ID=u.id,o.a&&(u.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),n.push(Ze("threadedComment",Xn("text",o.t||""),u))})}),n.push("</ThreadedComments>"),n.join("")}function UZ(t,e){var r=[],n=!1;return t.replace(bs,function(i){var o=Rt(i);switch(Li(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function zZ(t){var e=[cn,Ze("personList",null,{xmlns:Nn.TCMNT,"xmlns:x":nu[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Ze("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function $Z(t){var e={};e.iauthor=t.read_shift(4);var r=ou(t);return e.rfx=r.s,e.ref=At(r.s),t.l+=16,e}function HZ(t,e){return e==null&&(e=Le(36)),e.write_shift(4,t[1].iauthor),nh(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var WZ=gs;function qZ(t){return Ln(t.slice(0,54))}function GZ(t,e){var r=[],n=[],s={},i=!1;return Co(t,function(l,u,h){switch(h){case 632:n.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!u.T){if(!i||e.WTF)throw new Error("Unexpected record 0x"+h.toString(16))}}}),r}function KZ(t){var e=Gs(),r=[];return Ue(e,628),Ue(e,630),t.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Ue(e,632,qZ(s.a)))})}),Ue(e,631),Ue(e,633),t.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:Hr(n[0]),e:Hr(n[0])};Ue(e,635,HZ([i,s])),s.t&&s.t.length>0&&Ue(e,637,gX(s)),Ue(e,636),delete s.iauthor})}),Ue(e,634),Ue(e,629),e.end()}var XZ="application/vnd.ms-office.vbaProject";function YZ(t){var e=_t.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");_t.utils.cfb_add(e,s,t.FileIndex[n].content)}}),_t.write(e)}function QZ(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&_t.utils.cfb_add(t,s,e.FileIndex[n].content)}})}var mP=["xlsb","xlsm","xlam","biff8","xla"];function JZ(){return{"!type":"dialog"}}function ZZ(){return{"!type":"dialog"}}function eee(){return{"!type":"macro"}}function tee(){return{"!type":"macro"}}var fd=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,i,o){var l=!1,u=!1;i.length==0?u=!0:i.charAt(0)=="["&&(u=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var h=i.length>0?parseInt(i,10)|0:0,f=o.length>0?parseInt(o,10)|0:0;return l?f+=e.c:--f,u?h+=e.r:--h,s+(l?"":"$")+$r(f)+(u?"":"$")+ln(h)}return function(s,i){return e=i,s.replace(t,r)}}(),s_=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,a_=function(){return function(e,r){return e.replace(s_,function(n,s,i,o,l,u){var h=Wb(o)-(i?0:r.c),f=Hb(u)-(l?0:r.r),p=f==0?"":l?f+1:"["+f+"]",g=h==0?"":i?h+1:"["+h+"]";return s+"R"+p+"C"+g})}}();function pP(t,e){return t.replace(s_,function(r,n,s,i,o,l){return n+(s=="$"?s+i:$r(Wb(i)+e.c))+(o=="$"?o+l:ln(Hb(l)+e.r))})}function ree(t,e,r){var n=Ks(e),s=n.s,i=Hr(r),o={r:i.r-s.r,c:i.c-s.c};return pP(t,o)}function nee(t){return t.length!=1}function sj(t){return t.replace(/_xlfn\./g,"")}function fn(t){t.l+=1}function Dl(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function gP(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return xP(t);r.biff==12&&(n=4)}var s=t.read_shift(n),i=t.read_shift(n),o=Dl(t),l=Dl(t);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function xP(t){var e=Dl(t),r=Dl(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function see(t,e,r){if(r.biff<8)return xP(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),i=Dl(t),o=Dl(t);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function vP(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return aee(t);var n=t.read_shift(r&&r.biff==12?4:2),s=Dl(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function aee(t){var e=Dl(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function iee(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function oee(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return lee(t);var s=t.read_shift(n>=12?4:2),i=t.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function lee(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function cee(t,e,r){var n=(t[t.l++]&96)>>5,s=gP(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function uee(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var o=gP(t,i,r);return[n,s,o]}function dee(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function hee(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[n,s]}function fee(t,e,r){var n=(t[t.l++]&96)>>5,s=see(t,e-1,r);return[n,s]}function mee(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function aj(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function pee(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function gee(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function xee(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function vee(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function yee(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function yP(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function wee(t){return t.read_shift(2),yP(t)}function bee(t){return t.read_shift(2),yP(t)}function _ee(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=vP(t,0,r);return[n,s]}function Nee(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=oee(t,0,r);return[n,s]}function Eee(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=vP(t,0,r);return[n,s,i]}function See(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[jte[s],_P[s],n]}function kee(t,e,r){var n=t[t.l++],s=t.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:Tee(t);return[s,(i[0]===0?_P:Tte)[i[1]]]}function Tee(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function jee(t,e,r){t.l+=r&&r.biff==2?3:4}function Aee(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Cee(t){return t.l++,Io[t.read_shift(1)]}function Iee(t){return t.l++,t.read_shift(2)}function Pee(t){return t.l++,t.read_shift(1)!==0}function Ree(t){return t.l++,hs(t)}function Dee(t,e,r){return t.l++,D0(t,e-1,r)}function Fee(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=nn(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=Io[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=hs(t);break;case 2:r[1]=lu(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Lee(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?ou:Ix)(t));return s}function Oee(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=Fee(t,r.biff);return o}function Mee(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,i]}function Vee(t,e,r){if(r.biff==5)return Bee(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),i=t.read_shift(4);return[n,s,i]}function Bee(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Uee(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function zee(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function $ee(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function Hee(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[n,s]}var Wee=ys,qee=ys,Gee=ys;function L0(t,e,r){return t.l+=2,[iee(t)]}function i_(t){return t.l+=6,[]}var Kee=L0,Xee=i_,Yee=i_,Qee=L0;function wP(t){return t.l+=2,[gn(t),t.read_shift(2)&1]}var Jee=L0,Zee=wP,ete=i_,tte=L0,rte=L0,nte=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function ste(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),i=t.read_shift(2),o=nte[r>>2&31];return{ixti:e,coltype:r&3,rt:o,idx:n,c:s,C:i}}function ate(t){return t.l+=2,[t.read_shift(4)]}function ite(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function ote(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function lte(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function cte(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function ute(t){return t.l+=4,[0,0]}var ij={1:{n:"PtgExp",f:Aee},2:{n:"PtgTbl",f:Gee},3:{n:"PtgAdd",f:fn},4:{n:"PtgSub",f:fn},5:{n:"PtgMul",f:fn},6:{n:"PtgDiv",f:fn},7:{n:"PtgPower",f:fn},8:{n:"PtgConcat",f:fn},9:{n:"PtgLt",f:fn},10:{n:"PtgLe",f:fn},11:{n:"PtgEq",f:fn},12:{n:"PtgGe",f:fn},13:{n:"PtgGt",f:fn},14:{n:"PtgNe",f:fn},15:{n:"PtgIsect",f:fn},16:{n:"PtgUnion",f:fn},17:{n:"PtgRange",f:fn},18:{n:"PtgUplus",f:fn},19:{n:"PtgUminus",f:fn},20:{n:"PtgPercent",f:fn},21:{n:"PtgParen",f:fn},22:{n:"PtgMissArg",f:fn},23:{n:"PtgStr",f:Dee},26:{n:"PtgSheet",f:ite},27:{n:"PtgEndSheet",f:ote},28:{n:"PtgErr",f:Cee},29:{n:"PtgBool",f:Pee},30:{n:"PtgInt",f:Iee},31:{n:"PtgNum",f:Ree},32:{n:"PtgArray",f:mee},33:{n:"PtgFunc",f:See},34:{n:"PtgFuncVar",f:kee},35:{n:"PtgName",f:Mee},36:{n:"PtgRef",f:_ee},37:{n:"PtgArea",f:cee},38:{n:"PtgMemArea",f:Uee},39:{n:"PtgMemErr",f:Wee},40:{n:"PtgMemNoMem",f:qee},41:{n:"PtgMemFunc",f:zee},42:{n:"PtgRefErr",f:$ee},43:{n:"PtgAreaErr",f:dee},44:{n:"PtgRefN",f:Nee},45:{n:"PtgAreaN",f:fee},46:{n:"PtgMemAreaN",f:lte},47:{n:"PtgMemNoMemN",f:cte},57:{n:"PtgNameX",f:Vee},58:{n:"PtgRef3d",f:Eee},59:{n:"PtgArea3d",f:uee},60:{n:"PtgRefErr3d",f:Hee},61:{n:"PtgAreaErr3d",f:hee},255:{}},dte={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},hte={1:{n:"PtgElfLel",f:wP},2:{n:"PtgElfRw",f:tte},3:{n:"PtgElfCol",f:Kee},6:{n:"PtgElfRwV",f:rte},7:{n:"PtgElfColV",f:Qee},10:{n:"PtgElfRadical",f:Jee},11:{n:"PtgElfRadicalS",f:ete},13:{n:"PtgElfColS",f:Xee},15:{n:"PtgElfColSV",f:Yee},16:{n:"PtgElfRadicalLel",f:Zee},25:{n:"PtgList",f:ste},29:{n:"PtgSxName",f:ate},255:{}},fte={0:{n:"PtgAttrNoop",f:ute},1:{n:"PtgAttrSemi",f:yee},2:{n:"PtgAttrIf",f:xee},4:{n:"PtgAttrChoose",f:pee},8:{n:"PtgAttrGoto",f:gee},16:{n:"PtgAttrSum",f:jee},32:{n:"PtgAttrBaxcel",f:aj},33:{n:"PtgAttrBaxcel",f:aj},64:{n:"PtgAttrSpace",f:wee},65:{n:"PtgAttrSpaceSemi",f:bee},128:{n:"PtgAttrIfError",f:vee},255:{}};function O0(t,e,r,n){if(n.biff<8)return ys(t,e);for(var s=t.l+e,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=Oee(t,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=Lee(t,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=t.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return e=s-t.l,e!==0&&i.push(ys(t,e)),i}function M0(t,e,r){for(var n=t.l+e,s,i,o=[];n!=t.l;)e=n-t.l,i=t[t.l],s=ij[i]||ij[dte[i]],(i===24||i===25)&&(s=(i===24?hte:fte)[t[t.l+1]]),!s||!s.f?ys(t,e):o.push([s.n,s.f(t,e,r)]);return o}function mte(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],i=0;i<n.length;++i){var o=n[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var pte={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function gte(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function bP(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function oj(t,e,r){var n=bP(t,e,r);return n=="#REF"?n:gte(n,r)}function cs(t,e,r,n,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],u,h,f,p=0,g=0,y,w="";if(!t[0]||!t[0][0])return"";for(var b=-1,_="",P=0,A=t[0].length;P<A;++P){var k=t[0][P];switch(k[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(u=l.pop(),h=l.pop(),b>=0){switch(t[0][b][1][0]){case 0:_=Qr(" ",t[0][b][1][1]);break;case 1:_=Qr("\r",t[0][b][1][1]);break;default:if(_="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][b][1][0])}h=h+_,b=-1}l.push(h+pte[k[0]]+u);break;case"PtgIsect":u=l.pop(),h=l.pop(),l.push(h+" "+u);break;case"PtgUnion":u=l.pop(),h=l.pop(),l.push(h+","+u);break;case"PtgRange":u=l.pop(),h=l.pop(),l.push(h+":"+u);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=ff(k[1][1],o,s),l.push(mf(f,i));break;case"PtgRefN":f=r?ff(k[1][1],r,s):k[1][1],l.push(mf(f,i));break;case"PtgRef3d":p=k[1][1],f=ff(k[1][2],o,s),w=oj(n,p,s),l.push(w+"!"+mf(f,i));break;case"PtgFunc":case"PtgFuncVar":var F=k[1][0],L=k[1][1];F||(F=0),F&=127;var I=F==0?[]:l.slice(-F);l.length-=F,L==="User"&&(L=I.shift()),l.push(L+"("+I.join(",")+")");break;case"PtgBool":l.push(k[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(k[1]);break;case"PtgNum":l.push(String(k[1]));break;case"PtgStr":l.push('"'+k[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(k[1]);break;case"PtgAreaN":y=L4(k[1][1],r?{s:r}:o,s),l.push(Xy(y,s));break;case"PtgArea":y=L4(k[1][1],o,s),l.push(Xy(y,s));break;case"PtgArea3d":p=k[1][1],y=k[1][2],w=oj(n,p,s),l.push(w+"!"+Xy(y,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=k[1][2];var N=(n.names||[])[g-1]||(n[0]||[])[g],T=N?N.Name:"SH33TJSNAME"+String(g);T&&T.slice(0,6)=="_xlfn."&&!s.xlfn&&(T=T.slice(6)),l.push(T);break;case"PtgNameX":var R=k[1][1];g=k[1][2];var B;if(s.biff<=5)R<0&&(R=-R),n[R]&&(B=n[R][g]);else{var z="";if(((n[R]||[])[0]||[])[0]==14849||(((n[R]||[])[0]||[])[0]==1025?n[R][g]&&n[R][g].itab>0&&(z=n.SheetNames[n[R][g].itab-1]+"!"):z=n.SheetNames[g-1]+"!"),n[R]&&n[R][g])z+=n[R][g].Name;else if(n[0]&&n[0][g])z+=n[0][g].Name;else{var O=(bP(n,R,s)||"").split(";;");O[g-1]?z=O[g-1]:z+="SH33TJSERRX"}l.push(z);break}B||(B={Name:"SH33TJSERRY"}),l.push(B.Name);break;case"PtgParen":var D="(",ie=")";if(b>=0){switch(_="",t[0][b][1][0]){case 2:D=Qr(" ",t[0][b][1][1])+D;break;case 3:D=Qr("\r",t[0][b][1][1])+D;break;case 4:ie=Qr(" ",t[0][b][1][1])+ie;break;case 5:ie=Qr("\r",t[0][b][1][1])+ie;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][b][1][0])}b=-1}l.push(D+l.pop()+ie);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":f={c:k[1][1],r:k[1][0]};var Z={c:r.c,r:r.r};if(n.sharedf[At(f)]){var ne=n.sharedf[At(f)];l.push(cs(ne,o,Z,n,s))}else{var H=!1;for(u=0;u!=n.arrayf.length;++u)if(h=n.arrayf[u],!(f.c<h[0].s.c||f.c>h[0].e.c)&&!(f.r<h[0].s.r||f.r>h[0].e.r)){l.push(cs(h[1],o,Z,n,s)),H=!0;break}H||l.push(k[1])}break;case"PtgArray":l.push("{"+mte(k[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":b=P;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+k[1].idx+"[#"+k[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(k));default:throw new Error("Unrecognized Formula Token: "+String(k))}var Q=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&b>=0&&Q.indexOf(t[0][P][0])==-1){k=t[0][b];var q=!0;switch(k[1][0]){case 4:q=!1;case 0:_=Qr(" ",k[1][1]);break;case 5:q=!1;case 1:_=Qr("\r",k[1][1]);break;default:if(_="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+k[1][0])}l.push((q?_:"")+l.pop()+(q?"":_)),b=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function xte(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,o=t.read_shift(s);if(o==65535)return[[],ys(t,e-2)];var l=M0(t,o,r);return e!==o+s&&(i=O0(t,e-o-s,l,r)),t.l=n,[l,i]}function vte(t,e,r){var n=t.l+e,s=r.biff==2?1:2,i,o=t.read_shift(s);if(o==65535)return[[],ys(t,e-2)];var l=M0(t,o,r);return e!==o+s&&(i=O0(t,e-o-s,l,r)),t.l=n,[l,i]}function yte(t,e,r,n){var s=t.l+e,i=M0(t,n,r),o;return s!==t.l&&(o=O0(t,s-t.l,i,r)),[i,o]}function wte(t,e,r){var n=t.l+e,s,i=t.read_shift(2),o=M0(t,i,r);return i==65535?[[],ys(t,e-2)]:(e!==i+2&&(s=O0(t,n-i-2,o,r)),[o,s])}function bte(t){var e;if(so(t,t.l+6)!==65535)return[hs(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function _te(t){if(t==null){var e=Le(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return zc(t);return zc(0)}function e1(t,e,r){var n=t.l+e,s=Oi(t);r.biff==2&&++t.l;var i=bte(t),o=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var l=vte(t,n-t.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function Nte(t,e,r,n,s){var i=Hc(e,r,s),o=_te(t.v),l=Le(6),u=33;l.write_shift(2,u),l.write_shift(4,0);for(var h=Le(t.bf.length),f=0;f<t.bf.length;++f)h[f]=t.bf[f];var p=Fn([i,o,l,h]);return p}function Px(t,e,r){var n=t.read_shift(4),s=M0(t,n,r),i=t.read_shift(4),o=i>0?O0(t,i,s,r):null;return[s,o]}var Ete=Px,Rx=Px,Ste=Px,kte=Px,Tte={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},_P={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},jte={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function lj(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Ate(t){var e="of:="+t.replace(s_,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function t1(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function Cte(t){return t.replace(/\./,"!")}var gf={},md={},xf=typeof Map<"u";function o_(t,e,r){var n=0,s=t.length;if(r){if(xf?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var i=xf?r.get(e):r[e];n<i.length;++n)if(t[i[n]].t===e)return t.Count++,i[n]}}else for(;n<s;++n)if(t[n].t===e)return t.Count++,n;return t[s]={t:e},t.Count++,t.Unique++,r&&(xf?(r.has(e)||r.set(e,[]),r.get(e).push(s)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(s))),s}function Dx(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(ds=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=Qf(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=Tg(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function jc(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Wl(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],s=60,i=t.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){ho(e.z,s),r.ssf[s]=e.z,r.revssf[e.z]=n=s;break}}for(s=0;s!=i;++s)if(t[s].numFmtId===n)return s;return t[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function NP(t,e,r,n,s,i){try{n.cellNF&&(t.z=jt[e])}catch(l){if(n.WTF)throw l}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Pr(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(jt[e]==null&&ho(TK[e]||"General",e),t.t==="e")t.w=t.w||Io[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Hf(t.v);else if(t.t==="d"){var o=kn(t.v);(o|0)===o?t.w=o.toString(10):t.w=Hf(o)}else{if(t.v===void 0)return"";t.w=Bc(t.v,md)}else t.t==="d"?t.w=Fa(e,kn(t.v),md):t.w=Fa(e,t.v,md)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{t.s=i.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=kg(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=kg(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&i.Fills)throw l}}}function Ite(t,e,r){if(t&&t["!ref"]){var n=sr(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function Pte(t,e){var r=sr(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Vt(r))}var Rte=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Dte=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Fte=/<(?:\w:)?hyperlink [^>]*>/mg,Lte=/"(\w*:\w*)"/,Ote=/<(?:\w:)?col\b[^>]*[\/]?>/g,Mte=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Vte=/<(?:\w:)?pageMargins[^>]*\/>/g,EP=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Bte=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Ute=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function zte(t,e,r,n,s,i,o){if(!t)return t;n||(n={"!id":{}});var l=e.dense?[]:{},u={s:{r:2e6,c:2e6},e:{r:0,c:0}},h="",f="",p=t.match(Dte);p?(h=t.slice(0,p.index),f=t.slice(p.index+p[0].length)):h=f=t;var g=h.match(EP);g?l_(g[0],l,s,r):(g=h.match(Bte))&&Hte(g[0],g[1]||"",l,s,r);var y=(h.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(y>0){var w=h.slice(y,y+50).match(Lte);w&&Pte(l,w[1])}var b=h.match(Ute);b&&b[1]&&nre(b[1],s);var _=[];if(e.cellStyles){var P=h.match(Ote);P&&Jte(_,P)}p&&ire(p[1],l,e,u,i,o);var A=f.match(Mte);A&&(l["!autofilter"]=ere(A[0]));var k=[],F=f.match(Rte);if(F)for(y=0;y!=F.length;++y)k[y]=sr(F[y].slice(F[y].indexOf('"')+1));var L=f.match(Fte);L&&Xte(l,L,n);var I=f.match(Vte);if(I&&(l["!margins"]=Yte(Rt(I[0]))),!l["!ref"]&&u.e.c>=u.s.c&&u.e.r>=u.s.r&&(l["!ref"]=Vt(u)),e.sheetRows>0&&l["!ref"]){var N=sr(l["!ref"]);e.sheetRows<=+N.e.r&&(N.e.r=e.sheetRows-1,N.e.r>u.e.r&&(N.e.r=u.e.r),N.e.r<N.s.r&&(N.s.r=N.e.r),N.e.c>u.e.c&&(N.e.c=u.e.c),N.e.c<N.s.c&&(N.s.c=N.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Vt(N))}return _.length>0&&(l["!cols"]=_),k.length>0&&(l["!merges"]=k),l}function $te(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Vt(t[r])+'"/>';return e+"</mergeCells>"}function l_(t,e,r,n){var s=Rt(t);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=rr(vr(s.codeName)))}function Hte(t,e,r,n,s){l_(t.slice(0,t.indexOf(">")),r,n,s)}function Wte(t,e,r,n,s){var i=!1,o={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var u=e.SheetNames[r];try{e.Workbook&&(u=e.Workbook.Sheets[r].CodeName||u)}catch{}i=!0,o.codeName=ki(xr(u))}if(t&&t["!outline"]){var h={summaryBelow:1,summaryRight:1};t["!outline"].above&&(h.summaryBelow=0),t["!outline"].left&&(h.summaryRight=0),l=(l||"")+Ze("outlinePr",null,h)}!i&&!l||(s[s.length]=Ze("sheetPr",l,o))}var qte=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Gte=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Kte(t){var e={sheet:1};return qte.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),Gte.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=t_(t.password).toString(16).toUpperCase()),Ze("sheetProtection",null,e)}function Xte(t,e,r){for(var n=Array.isArray(t),s=0;s!=e.length;++s){var i=Rt(vr(e[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+rr(i.location))):(i.Target="#"+rr(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=sr(i.ref),u=l.s.r;u<=l.e.r;++u)for(var h=l.s.c;h<=l.e.c;++h){var f=At({c:h,r:u});n?(t[u]||(t[u]=[]),t[u][h]||(t[u][h]={t:"z",v:void 0}),t[u][h].l=i):(t[f]||(t[f]={t:"z",v:void 0}),t[f].l=i)}}}function Yte(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function Qte(t){return jc(t),Ze("pageMargins",null,t)}function Jte(t,e){for(var r=!1,n=0;n!=e.length;++n){var s=Rt(e[n],!0);s.hidden&&(s.hidden=Ar(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,r_(s.width)),Rl(s);i<=o;)t[i++]=Rr(s)}}function Zte(t,e){for(var r=["<cols>"],n,s=0;s!=e.length;++s)(n=e[s])&&(r[r.length]=Ze("col",null,Dx(s,n)));return r[r.length]="</cols>",r.join("")}function ere(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function tre(t,e,r,n){var s=typeof t.ref=="string"?t.ref:Vt(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Ks(s);o.s.r==o.e.r&&(o.e.r=Ks(e["!ref"]).e.r,s=Vt(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Ze("autoFilter",null,{ref:s})}var rre=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function nre(t,e){e.Views||(e.Views=[{}]),(t.match(rre)||[]).forEach(function(r,n){var s=Rt(r);e.Views[n]||(e.Views[n]={}),+s.zoomScale&&(e.Views[n].zoom=+s.zoomScale),Ar(s.rightToLeft)&&(e.Views[n].RTL=!0)})}function sre(t,e,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Ze("sheetViews",Ze("sheetView",null,s),{})}function are(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var s="",i=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":s=t.v?"1":"0";break;case"n":s=""+t.v;break;case"e":s=Io[t.v];break;case"d":n&&n.cellDates?s=Pr(t.v,-1).toISOString():(t=Rr(t),t.t="n",s=""+(t.v=kn(Pr(t.v)))),typeof t.z>"u"&&(t.z=jt[14]);break;default:s=t.v;break}var l=Xn("v",xr(s)),u={r:e},h=Wl(n.cellXfs,t,n);switch(h!==0&&(u.s=h),t.t){case"n":break;case"d":u.t="d";break;case"b":u.t="b";break;case"e":u.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Xn("v",""+o_(n.Strings,t.v,n.revStrings)),u.t="s";break}u.t="str";break}if(t.t!=i&&(t.t=i,t.v=o),typeof t.f=="string"&&t.f){var f=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;l=Ze("f",xr(t.f),f)+(t.v!=null?l:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(u.cm=1),Ze("c",l,u)}var ire=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=Wf("v"),o=Wf("f");return function(u,h,f,p,g,y){for(var w=0,b="",_=[],P=[],A=0,k=0,F=0,L="",I,N,T=0,R=0,B,z,O=0,D=0,ie=Array.isArray(y.CellXf),Z,ne=[],H=[],Q=Array.isArray(h),q=[],ae={},U=!1,M=!!f.sheetStubs,X=u.split(e),K=0,Y=X.length;K!=Y;++K){b=X[K].trim();var xe=b.length;if(xe!==0){var le=0;e:for(w=0;w<xe;++w)switch(b[w]){case">":if(b[w-1]!="/"){++w;break e}if(f&&f.cellStyles){if(N=Rt(b.slice(le,w),!0),T=N.r!=null?parseInt(N.r,10):T+1,R=-1,f.sheetRows&&f.sheetRows<T)continue;ae={},U=!1,N.ht&&(U=!0,ae.hpt=parseFloat(N.ht),ae.hpx=Ld(ae.hpt)),N.hidden=="1"&&(U=!0,ae.hidden=!0),N.outlineLevel!=null&&(U=!0,ae.level=+N.outlineLevel),U&&(q[T-1]=ae)}break;case"<":le=w;break}if(le>=w)break;if(N=Rt(b.slice(le,w),!0),T=N.r!=null?parseInt(N.r,10):T+1,R=-1,!(f.sheetRows&&f.sheetRows<T)){p.s.r>T-1&&(p.s.r=T-1),p.e.r<T-1&&(p.e.r=T-1),f&&f.cellStyles&&(ae={},U=!1,N.ht&&(U=!0,ae.hpt=parseFloat(N.ht),ae.hpx=Ld(ae.hpt)),N.hidden=="1"&&(U=!0,ae.hidden=!0),N.outlineLevel!=null&&(U=!0,ae.level=+N.outlineLevel),U&&(q[T-1]=ae)),_=b.slice(w).split(t);for(var fe=0;fe!=_.length&&_[fe].trim().charAt(0)=="<";++fe);for(_=_.slice(fe),w=0;w!=_.length;++w)if(b=_[w].trim(),b.length!==0){if(P=b.match(r),A=w,k=0,F=0,b="<c "+(b.slice(0,1)=="<"?">":"")+b,P!=null&&P.length===2){for(A=0,L=P[1],k=0;k!=L.length&&!((F=L.charCodeAt(k)-64)<1||F>26);++k)A=26*A+F;--A,R=A}else++R;for(k=0;k!=b.length&&b.charCodeAt(k)!==62;++k);if(++k,N=Rt(b.slice(0,k),!0),N.r||(N.r=At({r:T-1,c:R})),L=b.slice(k),I={t:""},(P=L.match(i))!=null&&P[1]!==""&&(I.v=rr(P[1])),f.cellFormula){if((P=L.match(o))!=null&&P[1]!==""){if(I.f=rr(vr(P[1])).replace(/\r\n/g,`
`),f.xlfn||(I.f=sj(I.f)),P[0].indexOf('t="array"')>-1)I.F=(L.match(s)||[])[1],I.F.indexOf(":")>-1&&ne.push([sr(I.F),I.F]);else if(P[0].indexOf('t="shared"')>-1){z=Rt(P[0]);var ve=rr(vr(P[1]));f.xlfn||(ve=sj(ve)),H[parseInt(z.si,10)]=[z,ve,N.r]}}else(P=L.match(/<f[^>]*\/>/))&&(z=Rt(P[0]),H[z.si]&&(I.f=ree(H[z.si][1],H[z.si][2],N.r)));var we=Hr(N.r);for(k=0;k<ne.length;++k)we.r>=ne[k][0].s.r&&we.r<=ne[k][0].e.r&&we.c>=ne[k][0].s.c&&we.c<=ne[k][0].e.c&&(I.F=ne[k][1])}if(N.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(M)I.t="z";else continue;else I.t=N.t||"n";switch(p.s.c>R&&(p.s.c=R),p.e.c<R&&(p.e.c=R),I.t){case"n":if(I.v==""||I.v==null){if(!M)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!M)continue;I.t="z"}else B=gf[parseInt(I.v,10)],I.v=B.t,I.r=B.r,f.cellHTML&&(I.h=B.h);break;case"str":I.t="s",I.v=I.v!=null?vr(I.v):"",f.cellHTML&&(I.h=Bb(I.v));break;case"inlineStr":P=L.match(n),I.t="s",P!=null&&(B=e_(P[1]))?(I.v=B.t,f.cellHTML&&(I.h=B.h)):I.v="";break;case"b":I.v=Ar(I.v);break;case"d":f.cellDates?I.v=Pr(I.v,1):(I.v=kn(Pr(I.v,1)),I.t="n");break;case"e":(!f||f.cellText!==!1)&&(I.w=I.v),I.v=k5[I.v];break}if(O=D=0,Z=null,ie&&N.s!==void 0&&(Z=y.CellXf[N.s],Z!=null&&(Z.numFmtId!=null&&(O=Z.numFmtId),f.cellStyles&&Z.fillId!=null&&(D=Z.fillId))),NP(I,O,D,f,g,y),f.cellDates&&ie&&I.t=="n"&&eh(jt[O])&&(I.t="d",I.v=Cx(I.v)),N.cm&&f.xlmeta){var We=(f.xlmeta.Cell||[])[+N.cm-1];We&&We.type=="XLDAPR"&&(I.D=!0)}if(Q){var re=Hr(N.r);h[re.r]||(h[re.r]=[]),h[re.r][re.c]=I}else h[N.r]=I}}}}q.length>0&&(h["!rows"]=q)}}();function ore(t,e,r,n){var s=[],i=[],o=sr(t["!ref"]),l="",u,h="",f=[],p=0,g=0,y=t["!rows"],w=Array.isArray(t),b={r:h},_,P=-1;for(g=o.s.c;g<=o.e.c;++g)f[g]=$r(g);for(p=o.s.r;p<=o.e.r;++p){for(i=[],h=ln(p),g=o.s.c;g<=o.e.c;++g){u=f[g]+h;var A=w?(t[p]||[])[g]:t[u];A!==void 0&&(l=are(A,u,t,e))!=null&&i.push(l)}(i.length>0||y&&y[p])&&(b={r:h},y&&y[p]&&(_=y[p],_.hidden&&(b.hidden=1),P=-1,_.hpx?P=Jf(_.hpx):_.hpt&&(P=_.hpt),P>-1&&(b.ht=P,b.customHeight=1),_.level&&(b.outlineLevel=_.level)),s[s.length]=Ze("row",i.join(""),b))}if(y)for(;p<y.length;++p)y&&y[p]&&(b={r:p+1},_=y[p],_.hidden&&(b.hidden=1),P=-1,_.hpx?P=Jf(_.hpx):_.hpt&&(P=_.hpt),P>-1&&(b.ht=P,b.customHeight=1),_.level&&(b.outlineLevel=_.level),s[s.length]=Ze("row","",b));return s.join("")}function SP(t,e,r,n){var s=[cn,Ze("worksheet",null,{xmlns:nu[0],"xmlns:r":Nn.r})],i=r.SheetNames[t],o=0,l="",u=r.Sheets[i];u==null&&(u={});var h=u["!ref"]||"A1",f=sr(h);if(f.e.c>16383||f.e.r>1048575){if(e.WTF)throw new Error("Range "+h+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),h=Vt(f)}n||(n={}),u["!comments"]=[];var p=[];Wte(u,r,t,e,s),s[s.length]=Ze("dimension",null,{ref:h}),s[s.length]=sre(u,e,t,r),e.sheetFormat&&(s[s.length]=Ze("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),u["!cols"]!=null&&u["!cols"].length>0&&(s[s.length]=Zte(u,u["!cols"])),s[o=s.length]="<sheetData/>",u["!links"]=[],u["!ref"]!=null&&(l=ore(u,e),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),u["!protect"]&&(s[s.length]=Kte(u["!protect"])),u["!autofilter"]!=null&&(s[s.length]=tre(u["!autofilter"],u,r,t)),u["!merges"]!=null&&u["!merges"].length>0&&(s[s.length]=$te(u["!merges"]));var g=-1,y,w=-1;return u["!links"].length>0&&(s[s.length]="<hyperlinks>",u["!links"].forEach(function(b){b[1].Target&&(y={ref:b[0]},b[1].Target.charAt(0)!="#"&&(w=gr(n,-1,xr(b[1].Target).replace(/#.*$/,""),Gt.HLINK),y["r:id"]="rId"+w),(g=b[1].Target.indexOf("#"))>-1&&(y.location=xr(b[1].Target.slice(g+1))),b[1].Tooltip&&(y.tooltip=xr(b[1].Tooltip)),s[s.length]=Ze("hyperlink",null,y))}),s[s.length]="</hyperlinks>"),delete u["!links"],u["!margins"]!=null&&(s[s.length]=Qte(u["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=Xn("ignoredErrors",Ze("ignoredError",null,{numberStoredAsText:1,sqref:h}))),p.length>0&&(w=gr(n,-1,"../drawings/drawing"+(t+1)+".xml",Gt.DRAW),s[s.length]=Ze("drawing",null,{"r:id":"rId"+w}),u["!drawing"]=p),u["!comments"].length>0&&(w=gr(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Gt.VML),s[s.length]=Ze("legacyDrawing",null,{"r:id":"rId"+w}),u["!legacy"]=w),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function lre(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function cre(t,e,r){var n=Le(145),s=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var i=320;s.hpx?i=Jf(s.hpx)*20:s.hpt&&(i=s.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,u=n.l;n.l+=4;for(var h={r:t,c:0},f=0;f<16;++f)if(!(e.s.c>f+1<<10||e.e.c<f<<10)){for(var p=-1,g=-1,y=f<<10;y<f+1<<10;++y){h.c=y;var w=Array.isArray(r)?(r[h.r]||[])[h.c]:r[At(h)];w&&(p<0&&(p=y),g=y)}p<0||(++l,n.write_shift(4,p),n.write_shift(4,g))}var b=n.l;return n.l=u,n.write_shift(4,l),n.l=b,n.length>n.l?n.slice(0,n.l):n}function ure(t,e,r,n){var s=cre(n,r,e);(s.length>17||(e["!rows"]||[])[n])&&Ue(t,0,s)}var dre=ou,hre=nh;function fre(){}function mre(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=xX(t),r}function pre(t,e,r){r==null&&(r=Le(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return Ng({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),b5(t,r),r.slice(0,r.l)}function gre(t){var e=Oa(t);return[e]}function xre(t,e,r){return r==null&&(r=Le(8)),su(e,r)}function vre(t){var e=au(t);return[e]}function yre(t,e,r){return r==null&&(r=Le(4)),iu(e,r)}function wre(t){var e=Oa(t),r=t.read_shift(1);return[e,r,"b"]}function bre(t,e,r){return r==null&&(r=Le(9)),su(e,r),r.write_shift(1,t.v?1:0),r}function _re(t){var e=au(t),r=t.read_shift(1);return[e,r,"b"]}function Nre(t,e,r){return r==null&&(r=Le(5)),iu(e,r),r.write_shift(1,t.v?1:0),r}function Ere(t){var e=Oa(t),r=t.read_shift(1);return[e,r,"e"]}function Sre(t,e,r){return r==null&&(r=Le(9)),su(e,r),r.write_shift(1,t.v),r}function kre(t){var e=au(t),r=t.read_shift(1);return[e,r,"e"]}function Tre(t,e,r){return r==null&&(r=Le(8)),iu(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function jre(t){var e=Oa(t),r=t.read_shift(4);return[e,r,"s"]}function Are(t,e,r){return r==null&&(r=Le(12)),su(e,r),r.write_shift(4,e.v),r}function Cre(t){var e=au(t),r=t.read_shift(4);return[e,r,"s"]}function Ire(t,e,r){return r==null&&(r=Le(8)),iu(e,r),r.write_shift(4,e.v),r}function Pre(t){var e=Oa(t),r=hs(t);return[e,r,"n"]}function Rre(t,e,r){return r==null&&(r=Le(16)),su(e,r),zc(t.v,r),r}function kP(t){var e=au(t),r=hs(t);return[e,r,"n"]}function Dre(t,e,r){return r==null&&(r=Le(12)),iu(e,r),zc(t.v,r),r}function Fre(t){var e=Oa(t),r=Xb(t);return[e,r,"n"]}function Lre(t,e,r){return r==null&&(r=Le(12)),su(e,r),_5(t.v,r),r}function Ore(t){var e=au(t),r=Xb(t);return[e,r,"n"]}function Mre(t,e,r){return r==null&&(r=Le(8)),iu(e,r),_5(t.v,r),r}function Vre(t){var e=Oa(t),r=qb(t);return[e,r,"is"]}function Bre(t){var e=Oa(t),r=gs(t);return[e,r,"str"]}function Ure(t,e,r){return r==null&&(r=Le(12+4*t.v.length)),su(e,r),Ln(t.v,r),r.length>r.l?r.slice(0,r.l):r}function zre(t){var e=au(t),r=gs(t);return[e,r,"str"]}function $re(t,e,r){return r==null&&(r=Le(8+4*t.v.length)),iu(e,r),Ln(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Hre(t,e,r){var n=t.l+e,s=Oa(t);s.r=r["!row"];var i=t.read_shift(1),o=[s,i,"b"];if(r.cellFormula){t.l+=2;var l=Rx(t,n-t.l,r);o[3]=cs(l,null,s,r.supbooks,r)}else t.l=n;return o}function Wre(t,e,r){var n=t.l+e,s=Oa(t);s.r=r["!row"];var i=t.read_shift(1),o=[s,i,"e"];if(r.cellFormula){t.l+=2;var l=Rx(t,n-t.l,r);o[3]=cs(l,null,s,r.supbooks,r)}else t.l=n;return o}function qre(t,e,r){var n=t.l+e,s=Oa(t);s.r=r["!row"];var i=hs(t),o=[s,i,"n"];if(r.cellFormula){t.l+=2;var l=Rx(t,n-t.l,r);o[3]=cs(l,null,s,r.supbooks,r)}else t.l=n;return o}function Gre(t,e,r){var n=t.l+e,s=Oa(t);s.r=r["!row"];var i=gs(t),o=[s,i,"str"];if(r.cellFormula){t.l+=2;var l=Rx(t,n-t.l,r);o[3]=cs(l,null,s,r.supbooks,r)}else t.l=n;return o}var Kre=ou,Xre=nh;function Yre(t,e){return e==null&&(e=Le(4)),e.write_shift(4,t),e}function Qre(t,e){var r=t.l+e,n=ou(t),s=Gb(t),i=gs(t),o=gs(t),l=gs(t);t.l=r;var u={rfx:n,relId:s,loc:i,display:l};return o&&(u.Tooltip=o),u}function Jre(t,e){var r=Le(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));nh({s:Hr(t[0]),e:Hr(t[0])},r),Kb("rId"+e,r);var n=t[1].Target.indexOf("#"),s=n==-1?"":t[1].Target.slice(n+1);return Ln(s||"",r),Ln(t[1].Tooltip||"",r),Ln("",r),r.slice(0,r.l)}function Zre(){}function ene(t,e,r){var n=t.l+e,s=N5(t),i=t.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=Ete(t,n-t.l,r);o[1]=l}else t.l=n;return o}function tne(t,e,r){var n=t.l+e,s=ou(t),i=[s];if(r.cellFormula){var o=kte(t,n-t.l,r);i[1]=o,t.l=n}else t.l=n;return i}function rne(t,e,r){r==null&&(r=Le(18));var n=Dx(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),r.write_shift(2,s),r}var TP=["left","right","top","bottom","header","footer"];function nne(t){var e={};return TP.forEach(function(r){e[r]=hs(t)}),e}function sne(t,e){return e==null&&(e=Le(6*8)),jc(t),TP.forEach(function(r){zc(t[r],e)}),e}function ane(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function ine(t,e,r){r==null&&(r=Le(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function one(t){var e=Le(24);return e.write_shift(4,4),e.write_shift(4,1),nh(t,e),e}function lne(t,e){return e==null&&(e=Le(16*4+2)),e.write_shift(2,t.password?t_(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function cne(){}function une(){}function dne(t,e,r,n,s,i,o){if(!t)return t;var l=e||{};n||(n={"!id":{}});var u=l.dense?[]:{},h,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},p=!1,g=!1,y,w,b,_,P,A,k,F,L,I=[];l.biff=12,l["!row"]=0;var N=0,T=!1,R=[],B={},z=l.supbooks||s.supbooks||[[]];if(z.sharedf=B,z.arrayf=R,z.SheetNames=s.SheetNames||s.Sheets.map(function(Q){return Q.name}),!l.supbooks&&(l.supbooks=z,s.Names))for(var O=0;O<s.Names.length;++O)z[0][O+1]=s.Names[O];var D=[],ie=[],Z=!1;Zf[16]={n:"BrtShortReal",f:kP};var ne;if(Co(t,function(q,ae,U){if(!g)switch(U){case 148:h=q;break;case 0:y=q,l.sheetRows&&l.sheetRows<=y.r&&(g=!0),F=ln(_=y.r),l["!row"]=y.r,(q.hidden||q.hpt||q.level!=null)&&(q.hpt&&(q.hpx=Ld(q.hpt)),ie[q.r]=q);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(w={t:q[2]},q[2]){case"n":w.v=q[1];break;case"s":k=gf[q[1]],w.v=k.t,w.r=k.r;break;case"b":w.v=!!q[1];break;case"e":w.v=q[1],l.cellText!==!1&&(w.w=Io[w.v]);break;case"str":w.t="s",w.v=q[1];break;case"is":w.t="s",w.v=q[1].t;break}if((b=o.CellXf[q[0].iStyleRef])&&NP(w,b.numFmtId,null,l,i,o),P=q[0].c==-1?P+1:q[0].c,l.dense?(u[_]||(u[_]=[]),u[_][P]=w):u[$r(P)+F]=w,l.cellFormula){for(T=!1,N=0;N<R.length;++N){var M=R[N];y.r>=M[0].s.r&&y.r<=M[0].e.r&&P>=M[0].s.c&&P<=M[0].e.c&&(w.F=Vt(M[0]),T=!0)}!T&&q.length>3&&(w.f=q[3])}if(f.s.r>y.r&&(f.s.r=y.r),f.s.c>P&&(f.s.c=P),f.e.r<y.r&&(f.e.r=y.r),f.e.c<P&&(f.e.c=P),l.cellDates&&b&&w.t=="n"&&eh(jt[b.numFmtId])){var X=Nc(w.v);X&&(w.t="d",w.v=new Date(X.y,X.m-1,X.d,X.H,X.M,X.S,X.u))}ne&&(ne.type=="XLDAPR"&&(w.D=!0),ne=void 0);break;case 1:case 12:if(!l.sheetStubs||p)break;w={t:"z",v:void 0},P=q[0].c==-1?P+1:q[0].c,l.dense?(u[_]||(u[_]=[]),u[_][P]=w):u[$r(P)+F]=w,f.s.r>y.r&&(f.s.r=y.r),f.s.c>P&&(f.s.c=P),f.e.r<y.r&&(f.e.r=y.r),f.e.c<P&&(f.e.c=P),ne&&(ne.type=="XLDAPR"&&(w.D=!0),ne=void 0);break;case 176:I.push(q);break;case 49:ne=((l.xlmeta||{}).Cell||[])[q-1];break;case 494:var K=n["!id"][q.relId];for(K?(q.Target=K.Target,q.loc&&(q.Target+="#"+q.loc),q.Rel=K):q.relId==""&&(q.Target="#"+q.loc),_=q.rfx.s.r;_<=q.rfx.e.r;++_)for(P=q.rfx.s.c;P<=q.rfx.e.c;++P)l.dense?(u[_]||(u[_]=[]),u[_][P]||(u[_][P]={t:"z",v:void 0}),u[_][P].l=q):(A=At({c:P,r:_}),u[A]||(u[A]={t:"z",v:void 0}),u[A].l=q);break;case 426:if(!l.cellFormula)break;R.push(q),L=l.dense?u[_][P]:u[$r(P)+F],L.f=cs(q[1],f,{r:y.r,c:P},z,l),L.F=Vt(q[0]);break;case 427:if(!l.cellFormula)break;B[At(q[0].s)]=q[1],L=l.dense?u[_][P]:u[$r(P)+F],L.f=cs(q[1],f,{r:y.r,c:P},z,l);break;case 60:if(!l.cellStyles)break;for(;q.e>=q.s;)D[q.e--]={width:q.w/256,hidden:!!(q.flags&1),level:q.level},Z||(Z=!0,r_(q.w/256)),Rl(D[q.e+1]);break;case 161:u["!autofilter"]={ref:Vt(q)};break;case 476:u["!margins"]=q;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),q.name&&(s.Sheets[r].CodeName=q.name),(q.above||q.left)&&(u["!outline"]={above:q.above,left:q.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),q.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:p=!0;break;case 36:p=!1;break;case 37:p=!0;break;case 38:p=!1;break;default:if(!ae.T){if(!p||l.WTF)throw new Error("Unexpected record 0x"+U.toString(16))}}},l),delete l.supbooks,delete l["!row"],!u["!ref"]&&(f.s.r<2e6||h&&(h.e.r>0||h.e.c>0||h.s.r>0||h.s.c>0))&&(u["!ref"]=Vt(h||f)),l.sheetRows&&u["!ref"]){var H=sr(u["!ref"]);l.sheetRows<=+H.e.r&&(H.e.r=l.sheetRows-1,H.e.r>f.e.r&&(H.e.r=f.e.r),H.e.r<H.s.r&&(H.s.r=H.e.r),H.e.c>f.e.c&&(H.e.c=f.e.c),H.e.c<H.s.c&&(H.s.c=H.e.c),u["!fullref"]=u["!ref"],u["!ref"]=Vt(H))}return I.length>0&&(u["!merges"]=I),D.length>0&&(u["!cols"]=D),ie.length>0&&(u["!rows"]=ie),u}function hne(t,e,r,n,s,i,o){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=Rr(e),e.z=e.z||jt[14],e.v=kn(Pr(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var u={r,c:n};switch(u.s=Wl(s.cellXfs,e,s),e.l&&i["!links"].push([At(u),e.l]),e.c&&i["!comments"].push([At(u),e.c]),e.t){case"s":case"str":return s.bookSST?(l=o_(s.Strings,e.v,s.revStrings),u.t="s",u.v=l,o?Ue(t,18,Ire(e,u)):Ue(t,7,Are(e,u))):(u.t="str",o?Ue(t,17,$re(e,u)):Ue(t,6,Ure(e,u))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?Ue(t,13,Mre(e,u)):Ue(t,2,Lre(e,u)):o?Ue(t,16,Dre(e,u)):Ue(t,5,Rre(e,u)),!0;case"b":return u.t="b",o?Ue(t,15,Nre(e,u)):Ue(t,4,bre(e,u)),!0;case"e":return u.t="e",o?Ue(t,14,Tre(e,u)):Ue(t,3,Sre(e,u)),!0}return o?Ue(t,12,yre(e,u)):Ue(t,1,xre(e,u)),!0}function fne(t,e,r,n){var s=sr(e["!ref"]||"A1"),i,o="",l=[];Ue(t,145);var u=Array.isArray(e),h=s.e.r;e["!rows"]&&(h=Math.max(s.e.r,e["!rows"].length-1));for(var f=s.s.r;f<=h;++f){o=ln(f),ure(t,e,s,f);var p=!1;if(f<=s.e.r)for(var g=s.s.c;g<=s.e.c;++g){f===s.s.r&&(l[g]=$r(g)),i=l[g]+o;var y=u?(e[f]||[])[g]:e[i];if(!y){p=!1;continue}p=hne(t,y,f,g,n,e,p)}}Ue(t,146)}function mne(t,e){!e||!e["!merges"]||(Ue(t,177,Yre(e["!merges"].length)),e["!merges"].forEach(function(r){Ue(t,176,Xre(r))}),Ue(t,178))}function pne(t,e){!e||!e["!cols"]||(Ue(t,390),e["!cols"].forEach(function(r,n){r&&Ue(t,60,rne(n,r))}),Ue(t,391))}function gne(t,e){!e||!e["!ref"]||(Ue(t,648),Ue(t,649,one(sr(e["!ref"]))),Ue(t,650))}function xne(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var s=gr(r,-1,n[1].Target.replace(/#.*$/,""),Gt.HLINK);Ue(t,494,Jre(n,s))}}),delete e["!links"]}function vne(t,e,r,n){if(e["!comments"].length>0){var s=gr(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Gt.VML);Ue(t,551,Kb("rId"+s)),e["!legacy"]=s}}function yne(t,e,r,n){if(e["!autofilter"]){var s=e["!autofilter"],i=typeof s.ref=="string"?s.ref:Vt(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=Ks(i);l.s.r==l.e.r&&(l.e.r=Ks(e["!ref"]).e.r,i=Vt(l));for(var u=0;u<o.length;++u){var h=o[u];if(h.Name=="_xlnm._FilterDatabase"&&h.Sheet==n){h.Ref="'"+r.SheetNames[n]+"'!"+i;break}}u==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Ue(t,161,nh(sr(i))),Ue(t,162)}}function wne(t,e,r){Ue(t,133),Ue(t,137,ine(e,r)),Ue(t,138),Ue(t,134)}function bne(t,e){e["!protect"]&&Ue(t,535,lne(e["!protect"]))}function _ne(t,e,r,n){var s=Gs(),i=r.SheetNames[t],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[t].CodeName||l)}catch{}var u=sr(o["!ref"]||"A1");if(u.e.c>16383||u.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Ue(s,129),(r.vbaraw||o["!outline"])&&Ue(s,147,pre(l,o["!outline"])),Ue(s,148,hre(u)),wne(s,o,r.Workbook),pne(s,o),fne(s,o,t,e),bne(s,o),yne(s,o,r,t),mne(s,o),xne(s,o,n),o["!margins"]&&Ue(s,476,sne(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&gne(s,o),vne(s,o,t,n),Ue(s,130),s.end()}function Nne(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(e[+o[1]]=r?+o[2]:o[2])});var s=rr((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[e,s,n]}function Ene(t,e,r,n,s,i){var o=i||{"!type":"chart"};if(!t)return i;var l=0,u=0,h="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(p){var g=Nne(p);f.s.r=f.s.c=0,f.e.c=l,h=$r(l),g[0].forEach(function(y,w){o[h+ln(w)]={t:"n",v:y,z:g[1]},u=w}),f.e.r<u&&(f.e.r=u),++l}),l>0&&(o["!ref"]=Vt(f)),o}function Sne(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=t.match(EP);return l&&l_(l[0],i,s,r),(o=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function kne(t,e){t.l+=10;var r=gs(t);return{name:r}}function Tne(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Co(t,function(u,h,f){switch(f){case 550:i["!rel"]=u;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),u.name&&(s.Sheets[r].CodeName=u.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(h.T>0)){if(!(h.T<0)){if(!o||e.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},e),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var c_=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],jne=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Ane=[],Cne=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function cj(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],s=0;s!=e.length;++s){var i=e[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Ar(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function uj(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Ar(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function jP(t){uj(t.WBProps,c_),uj(t.CalcPr,Cne),cj(t.WBView,jne),cj(t.Sheets,Ane),md.date1904=Ar(t.WBProps.date1904)}function Ine(t){return!t.Workbook||!t.Workbook.WBProps?"false":Ar(t.Workbook.WBProps.date1904)?"true":"false"}var Pne="][*?/\\".split("");function AP(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Pne.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Rne(t,e,r){t.forEach(function(n,s){AP(n);for(var i=0;i<s;++i)if(n==t[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=e&&e[s]&&e[s].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function Dne(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];Rne(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)Ite(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var Fne=/<\w+:workbook/;function Lne(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},o=0;if(t.replace(bs,function(u,h){var f=Rt(u);switch(Li(f[0])){case"<?xml":break;case"<workbook":u.match(Fne)&&(s="xmlns"+u.match(/<(\w+):/)[1]),r.xmlns=f[s];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":c_.forEach(function(p){if(f[p[0]]!=null)switch(p[2]){case"bool":r.WBProps[p[0]]=Ar(f[p[0]]);break;case"int":r.WBProps[p[0]]=parseInt(f[p[0]],10);break;default:r.WBProps[p[0]]=f[p[0]]}}),f.codeName&&(r.WBProps.CodeName=vr(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=rr(vr(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=vr(f.name),f.comment&&(i.Comment=f.comment),f.localSheetId&&(i.Sheet=+f.localSheetId),Ar(f.hidden||"0")&&(i.Hidden=!0),o=h+u.length;break;case"</definedName>":i.Ref=rr(vr(t.slice(o,h))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return u}),nu.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return jP(r),r}function CP(t){var e=[cn];e[e.length]=Ze("workbook",null,{xmlns:nu[0],"xmlns:r":Nn.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(c_.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Ze("workbookPr",null,n);var s=t.Workbook&&t.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",i=0;i!=t.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==t.SheetNames.length&&(i=0),e[e.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",i=0;i!=t.SheetNames.length;++i){var o={name:xr(t.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=Ze("sheet",null,o)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var u={name:l.Name};l.Comment&&(u.comment=l.Comment),l.Sheet!=null&&(u.localSheetId=""+l.Sheet),l.Hidden&&(u.hidden="1"),l.Ref&&(e[e.length]=Ze("definedName",xr(l.Ref),u))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function One(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=uw(t),r.name=gs(t),r}function Mne(t,e){return e||(e=Le(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),Kb(t.strRelID,e),Ln(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Vne(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?gs(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Bne(t,e){e||(e=Le(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),b5(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Une(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function zne(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),i=vX(t),o=Ste(t,0,r),l=Gb(t);t.l=n;var u={Name:i,Ptg:o};return s<268435455&&(u.Sheet=s),l&&(u.Comment=l),u}function $ne(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;e||(e={}),e.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],Zf[16]={n:"BrtFRTArchID$",f:Une},Co(t,function(u,h,f){switch(f){case 156:o.SheetNames.push(u.name),r.Sheets.push(u);break;case 153:r.WBProps=u;break;case 39:u.Sheet!=null&&(e.SID=u.Sheet),u.Ref=cs(u.Ptg,null,null,o,e),delete e.SID,delete u.Ptg,i.push(u);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([f,u]):o[0]=[f,u],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(u),o.XTI=o.XTI.concat(u);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(f),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(f),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!h.T){if(!s||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},e),jP(r),r.Names=i,r.supbooks=o,r}function Hne(t,e){Ue(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};Ue(t,156,Mne(s))}Ue(t,144)}function Wne(t,e){e||(e=Le(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Ln("SheetJS",e),Ln(gg.version,e),Ln(gg.version,e),Ln("7262",e),e.length>e.l?e.slice(0,e.l):e}function qne(t,e){e||(e=Le(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function Gne(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,s=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&i==-1&&(i=n);i>s||(Ue(t,135),Ue(t,158,qne(s)),Ue(t,136))}}function Kne(t,e){var r=Gs();return Ue(r,131),Ue(r,128,Wne()),Ue(r,153,Bne(t.Workbook&&t.Workbook.WBProps||null)),Gne(r,t),Hne(r,t),Ue(r,132),r.end()}function Xne(t,e,r){return e.slice(-4)===".bin"?$ne(t,r):Lne(t,r)}function Yne(t,e,r,n,s,i,o,l){return e.slice(-4)===".bin"?dne(t,n,r,s,i,o,l):zte(t,n,r,s,i,o,l)}function Qne(t,e,r,n,s,i,o,l){return e.slice(-4)===".bin"?Tne(t,n,r,s,i):Sne(t,n,r,s,i)}function Jne(t,e,r,n,s,i,o,l){return e.slice(-4)===".bin"?eee():tee()}function Zne(t,e,r,n,s,i,o,l){return e.slice(-4)===".bin"?JZ():ZZ()}function ese(t,e,r,n){return e.slice(-4)===".bin"?XJ(t,r,n):OJ(t,r,n)}function tse(t,e,r){return uP(t,r)}function rse(t,e,r){return e.slice(-4)===".bin"?rJ(t,r):ZQ(t,r)}function nse(t,e,r){return e.slice(-4)===".bin"?GZ(t,r):MZ(t,r)}function sse(t,e,r){return e.slice(-4)===".bin"?FZ(t):RZ(t)}function ase(t,e,r,n){return r.slice(-4)===".bin"?LZ(t,e,r,n):void 0}function ise(t,e,r){return e.slice(-4)===".bin"?CZ(t,e,r):PZ(t,e,r)}function ose(t,e,r){return(e.slice(-4)===".bin"?Kne:CP)(t)}function lse(t,e,r,n,s){return(e.slice(-4)===".bin"?_ne:SP)(t,r,n,s)}function cse(t,e,r){return(e.slice(-4)===".bin"?aZ:lP)(t,r)}function use(t,e,r){return(e.slice(-4)===".bin"?aJ:eP)(t,r)}function dse(t,e,r){return(e.slice(-4)===".bin"?KZ:fP)(t)}function hse(t){return(t.slice(-4)===".bin"?IZ:dP)()}var IP=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,PP=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Qa(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=t.match(IP),i,o,l,u;if(s)for(u=0;u!=s.length;++u)i=s[u].match(PP),(o=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),n[l]=i[2].slice(1,i[2].length-1));return n}function fse(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(IP),s,i,o,l;if(n)for(l=0;l!=n.length;++l)s=n[l].match(PP),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var vf;function mse(t,e){var r=vf[t]||rr(t);return r==="General"?Bc(e):Fa(r,e)}function pse(t,e,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Ar(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=Pr(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[rr(e)]=s}function gse(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||Io[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Hf(t.v):t.w=Bc(t.v):t.w=mse(e||"General",t.v)}catch(i){if(r.WTF)throw i}try{var n=vf[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&eh(n)){var s=Nc(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function xse(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=AJ[n.Pattern]||n.Pattern)}t[e.ID]=e}function vse(t,e,r,n,s,i,o,l,u,h){var f="General",p=n.StyleID,g={};h=h||{};var y=[],w=0;for(p===void 0&&l&&(p=l.StyleID),p===void 0&&o&&(p=o.StyleID);i[p]!==void 0&&(i[p].nf&&(f=i[p].nf),i[p].Interior&&y.push(i[p].Interior),!!i[p].Parent);)p=i[p].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ar(t);break;case"String":n.t="s",n.r=T4(rr(t)),n.v=t.indexOf("<")>-1?rr(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(Pr(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=rr(t):n.v<60&&(n.v=n.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=k5[t],h.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=T4(e||t));break}if(gse(n,f,h),h.cellFormula!==!1)if(n.Formula){var b=rr(n.Formula);b.charCodeAt(0)==61&&(b=b.slice(1)),n.f=fd(b,s),delete n.Formula,n.ArrayRange=="RC"?n.F=fd("RC:RC",s):n.ArrayRange&&(n.F=fd(n.ArrayRange,s),u.push([sr(n.F),n.F]))}else for(w=0;w<u.length;++w)s.r>=u[w][0].s.r&&s.r<=u[w][0].e.r&&s.c>=u[w][0].s.c&&s.c<=u[w][0].e.c&&(n.F=u[w][1]);h.cellStyles&&(y.forEach(function(_){!g.patternType&&_.patternType&&(g.patternType=_.patternType)}),n.s=g),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function yse(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function r1(t,e){var r=e||{};th();var n=Kh(Ub(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=vr(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=Rr(r);return o.type="string",Fd.to_workbook(n,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(pe){s.indexOf("<"+pe)>=0&&(i=!0)}),i)return sae(n,r);vf={"General Number":"General","General Date":jt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":jt[15],"Short Date":jt[14],"Long Time":jt[19],"Medium Time":jt[18],"Short Time":jt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:jt[2],Standard:jt[4],Percent:jt[10],Scientific:jt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,u=[],h,f={},p=[],g=r.dense?[]:{},y="",w={},b={},_=Qa('<Data ss:Type="String">'),P=0,A=0,k=0,F={s:{r:2e6,c:2e6},e:{r:0,c:0}},L={},I={},N="",T=0,R=[],B={},z={},O=0,D=[],ie=[],Z={},ne=[],H,Q=!1,q=[],ae=[],U={},M=0,X=0,K={Sheets:[],WBProps:{date1904:!1}},Y={};Gf.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var xe="";l=Gf.exec(n);)switch(l[3]=(xe=l[3]).toLowerCase()){case"data":if(xe=="data"){if(l[1]==="/"){if((h=u.pop())[0]!==l[3])throw new Error("Bad state: "+h.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&u.push([l[3],!0]);break}if(u[u.length-1][1])break;l[1]==="/"?vse(n.slice(P,l.index),N,_,u[u.length-1][0]=="comment"?Z:w,{c:A,r:k},L,ne[A],b,q,r):(N="",_=Qa(l[0]),P=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(ie.length>0&&(w.c=ie),(!r.sheetRows||r.sheetRows>k)&&w.v!==void 0&&(r.dense?(g[k]||(g[k]=[]),g[k][A]=w):g[$r(A)+ln(k)]=w),w.HRef&&(w.l={Target:rr(w.HRef)},w.HRefScreenTip&&(w.l.Tooltip=w.HRefScreenTip),delete w.HRef,delete w.HRefScreenTip),(w.MergeAcross||w.MergeDown)&&(M=A+(parseInt(w.MergeAcross,10)|0),X=k+(parseInt(w.MergeDown,10)|0),R.push({s:{c:A,r:k},e:{c:M,r:X}})),!r.sheetStubs)w.MergeAcross?A=M+1:++A;else if(w.MergeAcross||w.MergeDown){for(var le=A;le<=M;++le)for(var fe=k;fe<=X;++fe)(le>A||fe>k)&&(r.dense?(g[fe]||(g[fe]=[]),g[fe][le]={t:"z"}):g[$r(le)+ln(fe)]={t:"z"});A=M+1}else++A;else w=fse(l[0]),w.Index&&(A=+w.Index-1),A<F.s.c&&(F.s.c=A),A>F.e.c&&(F.e.c=A),l[0].slice(-2)==="/>"&&++A,ie=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(k<F.s.r&&(F.s.r=k),k>F.e.r&&(F.e.r=k),l[0].slice(-2)==="/>"&&(b=Qa(l[0]),b.Index&&(k=+b.Index-1)),A=0,++k):(b=Qa(l[0]),b.Index&&(k=+b.Index-1),U={},(b.AutoFitHeight=="0"||b.Height)&&(U.hpx=parseInt(b.Height,10),U.hpt=Jf(U.hpx),ae[k]=U),b.Hidden=="1"&&(U.hidden=!0,ae[k]=U));break;case"worksheet":if(l[1]==="/"){if((h=u.pop())[0]!==l[3])throw new Error("Bad state: "+h.join("|"));p.push(y),F.s.r<=F.e.r&&F.s.c<=F.e.c&&(g["!ref"]=Vt(F),r.sheetRows&&r.sheetRows<=F.e.r&&(g["!fullref"]=g["!ref"],F.e.r=r.sheetRows-1,g["!ref"]=Vt(F))),R.length&&(g["!merges"]=R),ne.length>0&&(g["!cols"]=ne),ae.length>0&&(g["!rows"]=ae),f[y]=g}else F={s:{r:2e6,c:2e6},e:{r:0,c:0}},k=A=0,u.push([l[3],!1]),h=Qa(l[0]),y=rr(h.Name),g=r.dense?[]:{},R=[],q=[],ae=[],Y={name:y,Hidden:0},K.Sheets.push(Y);break;case"table":if(l[1]==="/"){if((h=u.pop())[0]!==l[3])throw new Error("Bad state: "+h.join("|"))}else{if(l[0].slice(-2)=="/>")break;u.push([l[3],!1]),ne=[],Q=!1}break;case"style":l[1]==="/"?xse(L,I,r):I=Qa(l[0]);break;case"numberformat":I.nf=rr(Qa(l[0]).Format||"General"),vf[I.nf]&&(I.nf=vf[I.nf]);for(var ve=0;ve!=392&&jt[ve]!=I.nf;++ve);if(ve==392){for(ve=57;ve!=392;++ve)if(jt[ve]==null){ho(I.nf,ve);break}}break;case"column":if(u[u.length-1][0]!=="table")break;if(H=Qa(l[0]),H.Hidden&&(H.hidden=!0,delete H.Hidden),H.Width&&(H.wpx=parseInt(H.Width,10)),!Q&&H.wpx>10){Q=!0,ds=iP;for(var we=0;we<ne.length;++we)ne[we]&&Rl(ne[we])}Q&&Rl(H),ne[H.Index-1||ne.length]=H;for(var We=0;We<+H.Span;++We)ne[ne.length]=Rr(H);break;case"namedrange":if(l[1]==="/")break;K.Names||(K.Names=[]);var re=Rt(l[0]),st={Name:re.Name,Ref:fd(re.RefersTo.slice(1),{r:0,c:0})};K.Sheets.length>0&&(st.Sheet=K.Sheets.length-1),K.Names.push(st);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?N+=n.slice(T,l.index):T=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=Qa(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?$X(B,xe,n.slice(O,l.index)):O=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((h=u.pop())[0]!==l[3])throw new Error("Bad state: "+h.join("|"))}else u.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((h=u.pop())[0]!==l[3])throw new Error("Bad state: "+h.join("|"));yse(Z),ie.push(Z)}else u.push([l[3],!1]),h=Qa(l[0]),Z={a:h.Author};break;case"autofilter":if(l[1]==="/"){if((h=u.pop())[0]!==l[3])throw new Error("Bad state: "+h.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Re=Qa(l[0]);g["!autofilter"]={ref:fd(Re.Range).replace(/\$/g,"")},u.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((h=u.pop())[0]!==l[3])throw new Error("Bad state: "+h.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&u.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((h=u.pop())[0]!==l[3])throw new Error("Bad state: "+h.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&u.push([l[3],!0]);break;case"null":break;default:if(u.length==0&&l[3]=="document"||u.length==0&&l[3]=="uof")return pj(n,r);var he=!0;switch(u[u.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:he=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:he=!1}break;case"excelworkbook":switch(l[3]){case"date1904":K.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:he=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:he=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(O,l.index)){case"SheetHidden":Y.Hidden=1;break;case"SheetVeryHidden":Y.Hidden=2;break}else O=l.index+l[0].length;break;case"header":g["!margins"]||jc(g["!margins"]={},"xlml"),isNaN(+Rt(l[0]).Margin)||(g["!margins"].header=+Rt(l[0]).Margin);break;case"footer":g["!margins"]||jc(g["!margins"]={},"xlml"),isNaN(+Rt(l[0]).Margin)||(g["!margins"].footer=+Rt(l[0]).Margin);break;case"pagemargins":var me=Rt(l[0]);g["!margins"]||jc(g["!margins"]={},"xlml"),isNaN(+me.Top)||(g["!margins"].top=+me.Top),isNaN(+me.Left)||(g["!margins"].left=+me.Left),isNaN(+me.Right)||(g["!margins"].right=+me.Right),isNaN(+me.Bottom)||(g["!margins"].bottom=+me.Bottom);break;case"displayrighttoleft":K.Views||(K.Views=[]),K.Views[0]||(K.Views[0]={}),K.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":g["!outline"]||(g["!outline"]={}),g["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":g["!outline"]||(g["!outline"]={}),g["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:he=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:he=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:he=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:he=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:he=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:he=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:he=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:he=!1}break;case"smarttags":break;default:he=!1;break}if(he||l[3].match(/!\[CDATA/))break;if(!u[u.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+u.join("|");if(u[u.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?pse(z,xe,D,n.slice(O,l.index)):(D=l,O=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+u.join("|")}var ee={};return!r.bookSheets&&!r.bookProps&&(ee.Sheets=f),ee.SheetNames=p,ee.Workbook=K,ee.SSF=Rr(jt),ee.Props=B,ee.Custprops=z,ee}function xw(t,e){switch(d_(e=e||{}),e.type||"base64"){case"base64":return r1(ma(t),e);case"binary":case"buffer":case"file":return r1(t,e);case"array":return r1($l(t),e)}}function wse(t,e){var r=[];return t.Props&&r.push(HX(t.Props,e)),t.Custprops&&r.push(WX(t.Props,t.Custprops)),r.join("")}function bse(){return""}function _se(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,s){var i=[];i.push(Ze("NumberFormat",null,{"ss:Format":xr(jt[n.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(Ze("Style",i.join(""),o))}),Ze("Styles",r.join(""))}function RP(t){return Ze("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+a_(t.Ref,{r:0,c:0})})}function Nse(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var s=e[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(RP(s)))}return Ze("Names",r.join(""))}function Ese(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(RP(l)))}return i.join("")}function Sse(t,e,r,n){if(!t)return"";var s=[];if(t["!margins"]&&(s.push("<PageSetup>"),t["!margins"].header&&s.push(Ze("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&s.push(Ze("Footer",null,{"x:Margin":t["!margins"].footer})),s.push(Ze("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(Ze("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),t["!protect"]&&(s.push(Xn("ProtectContents","True")),t["!protect"].objects&&s.push(Xn("ProtectObjects","True")),t["!protect"].scenarios&&s.push(Xn("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?s.push(Xn("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&s.push(Xn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":Ze("WorksheetOptions",s.join(""),{xmlns:aa.x})}function kse(t){return t.map(function(e){var r=GK(e.t||""),n=Ze("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ze("Comment",n,{"ss:Author":e.a})}).join("")}function Tse(t,e,r,n,s,i,o){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+xr(a_(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var u=Hr(t.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(u.r==o.r?"":"["+(u.r-o.r)+"]")+"C"+(u.c==o.c?"":"["+(u.c-o.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=xr(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=xr(t.l.Tooltip))),r["!merges"])for(var h=r["!merges"],f=0;f!=h.length;++f)h[f].s.c!=o.c||h[f].s.r!=o.r||(h[f].e.c>h[f].s.c&&(l["ss:MergeAcross"]=h[f].e.c-h[f].s.c),h[f].e.r>h[f].s.r&&(l["ss:MergeDown"]=h[f].e.r-h[f].s.r));var p="",g="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":p="Number",g=String(t.v);break;case"b":p="Boolean",g=t.v?"1":"0";break;case"e":p="Error",g=Io[t.v];break;case"d":p="DateTime",g=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||jt[14]);break;case"s":p="String",g=qK(t.v||"");break}var y=Wl(n.cellXfs,t,n);l["ss:StyleID"]="s"+(21+y),l["ss:Index"]=o.c+1;var w=t.v!=null?g:"",b=t.t=="z"?"":'<Data ss:Type="'+p+'">'+w+"</Data>";return(t.c||[]).length>0&&(b+=kse(t.c)),Ze("Cell",b,l)}function jse(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Ld(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Ase(t,e,r,n){if(!t["!ref"])return"";var s=sr(t["!ref"]),i=t["!merges"]||[],o=0,l=[];t["!cols"]&&t["!cols"].forEach(function(_,P){Rl(_);var A=!!_.width,k=Dx(P,_),F={"ss:Index":P+1};A&&(F["ss:Width"]=Yf(k.width)),_.hidden&&(F["ss:Hidden"]="1"),l.push(Ze("Column",null,F))});for(var u=Array.isArray(t),h=s.s.r;h<=s.e.r;++h){for(var f=[jse(h,(t["!rows"]||[])[h])],p=s.s.c;p<=s.e.c;++p){var g=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>p)&&!(i[o].s.r>h)&&!(i[o].e.c<p)&&!(i[o].e.r<h)){(i[o].s.c!=p||i[o].s.r!=h)&&(g=!0);break}if(!g){var y={r:h,c:p},w=At(y),b=u?(t[h]||[])[p]:t[w];f.push(Tse(b,w,t,e,r,n,y))}}f.push("</Row>"),f.length>2&&l.push(f.join(""))}return l.join("")}function Cse(t,e,r){var n=[],s=r.SheetNames[t],i=r.Sheets[s],o=i?Ese(i,e,t,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=i?Ase(i,e,t,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(Sse(i,e,t,r)),n.join("")}function Ise(t,e){e||(e={}),t.SSF||(t.SSF=Rr(jt)),t.SSF&&(th(),Tx(t.SSF),e.revssf=Ax(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Wl(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(wse(t,e)),r.push(bse()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Ze("Worksheet",Cse(n,e,t),{"ss:Name":xr(t.SheetNames[n])}));return r[2]=_se(t,e),r[3]=Nse(t),cn+Ze("Workbook",r.join(""),{xmlns:aa.ss,"xmlns:o":aa.o,"xmlns:x":aa.x,"xmlns:ss":aa.ss,"xmlns:dt":aa.dt,"xmlns:html":aa.html})}function Pse(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=NX(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=EX(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var Rse=[60,1084,2066,2165,2175];function Dse(t,e,r,n,s){var i=n,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var u=so(r,r.l),h=vw[u],f=0;h!=null&&Rse.indexOf(u)>-1;)i=so(r,r.l+2),f=r.l+4,u==2066?f+=4:(u==2165||u==2175)&&(f+=12),l=r.slice(f,r.l+4+i),o.push(l),r.l+=4+i,h=vw[u=so(r,r.l)];var p=Fn(o);Kn(p,0);var g=0;p.lens=[];for(var y=0;y<o.length;++y)p.lens.push(g),g+=o[y].length;if(p.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+p.length+" < "+n;return e.f(p,p.length,s)}function bi(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=jt[n])}catch(i){if(e.WTF)throw i}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||Io[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Hf(t.v):t.w=Bc(t.v):t.w=Fa(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(i){if(e.WTF)throw i}if(e.cellDates&&n&&t.t=="n"&&eh(jt[n]||String(n))){var s=Nc(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function xp(t,e,r){return{v:t,ixfe:e,t:r}}function Fse(t,e){var r={opts:{}},n={},s=e.dense?[]:{},i={},o={},l=null,u=[],h="",f={},p,g="",y,w,b,_,P={},A=[],k,F,L=[],I=[],N={Sheets:[],WBProps:{date1904:!1},Views:[{}]},T={},R=function(it){return it<8?Sc[it]:it<64&&I[it-8]||Sc[it]},B=function(it,kt,er){var lr=kt.XF.data;if(!(!lr||!lr.patternType||!er||!er.cellStyles)){kt.s={},kt.s.patternType=lr.patternType;var un;(un=Xf(R(lr.icvFore)))&&(kt.s.fgColor={rgb:un}),(un=Xf(R(lr.icvBack)))&&(kt.s.bgColor={rgb:un})}},z=function(it,kt,er){if(!(U>1)&&!(er.sheetRows&&it.r>=er.sheetRows)){if(er.cellStyles&&kt.XF&&kt.XF.data&&B(it,kt,er),delete kt.ixfe,delete kt.XF,p=it,g=At(it),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),it.r<o.s.r&&(o.s.r=it.r),it.c<o.s.c&&(o.s.c=it.c),it.r+1>o.e.r&&(o.e.r=it.r+1),it.c+1>o.e.c&&(o.e.c=it.c+1),er.cellFormula&&kt.f){for(var lr=0;lr<A.length;++lr)if(!(A[lr][0].s.c>it.c||A[lr][0].s.r>it.r)&&!(A[lr][0].e.c<it.c||A[lr][0].e.r<it.r)){kt.F=Vt(A[lr][0]),(A[lr][0].s.c!=it.c||A[lr][0].s.r!=it.r)&&delete kt.f,kt.f&&(kt.f=""+cs(A[lr][1],o,it,q,O));break}}er.dense?(s[it.r]||(s[it.r]=[]),s[it.r][it.c]=kt):s[g]=kt}},O={enc:!1,sbcch:0,snames:[],sharedf:P,arrayf:A,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(O.password=e.password);var D,ie=[],Z=[],ne=[],H=[],Q=!1,q=[];q.SheetNames=O.snames,q.sharedf=O.sharedf,q.arrayf=O.arrayf,q.names=[],q.XTI=[];var ae=0,U=0,M=0,X=[],K=[],Y;O.codepage=1200,ti(1200);for(var xe=!1;t.l<t.length-1;){var le=t.l,fe=t.read_shift(2);if(fe===0&&ae===10)break;var ve=t.l===t.length?0:t.read_shift(2),we=vw[fe];if(we&&we.f){if(e.bookSheets&&ae===133&&fe!==133)break;if(ae=fe,we.r===2||we.r==12){var We=t.read_shift(2);if(ve-=2,!O.enc&&We!==fe&&((We&255)<<8|We>>8)!==fe)throw new Error("rt mismatch: "+We+"!="+fe);we.r==12&&(t.l+=10,ve-=10)}var re={};if(fe===10?re=we.f(t,ve,O):re=Dse(fe,we,t,ve,O),U==0&&[9,521,1033,2057].indexOf(ae)===-1)continue;switch(fe){case 34:r.opts.Date1904=N.WBProps.date1904=re;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(O.enc||(t.l=0),O.enc=re,!e.password)throw new Error("File is password-protected");if(re.valid==null)throw new Error("Encryption scheme unsupported");if(!re.valid)throw new Error("Password is incorrect");break;case 92:O.lastuser=re;break;case 66:var st=Number(re);switch(st){case 21010:st=1200;break;case 32768:st=1e4;break;case 32769:st=1252;break}ti(O.codepage=st),xe=!0;break;case 317:O.rrtabid=re;break;case 25:O.winlocked=re;break;case 439:r.opts.RefreshAll=re;break;case 12:r.opts.CalcCount=re;break;case 16:r.opts.CalcDelta=re;break;case 17:r.opts.CalcIter=re;break;case 13:r.opts.CalcMode=re;break;case 14:r.opts.CalcPrecision=re;break;case 95:r.opts.CalcSaveRecalc=re;break;case 15:O.CalcRefMode=re;break;case 2211:r.opts.FullCalc=re;break;case 129:re.fDialog&&(s["!type"]="dialog"),re.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),re.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:L.push(re);break;case 430:q.push([re]),q[q.length-1].XTI=[];break;case 35:case 547:q[q.length-1].push(re);break;case 24:case 536:Y={Name:re.Name,Ref:cs(re.rgce,o,null,q,O)},re.itab>0&&(Y.Sheet=re.itab-1),q.names.push(Y),q[0]||(q[0]=[],q[0].XTI=[]),q[q.length-1].push(re),re.Name=="_xlnm._FilterDatabase"&&re.itab>0&&re.rgce&&re.rgce[0]&&re.rgce[0][0]&&re.rgce[0][0][0]=="PtgArea3d"&&(K[re.itab-1]={ref:Vt(re.rgce[0][0][1][2])});break;case 22:O.ExternCount=re;break;case 23:q.length==0&&(q[0]=[],q[0].XTI=[]),q[q.length-1].XTI=q[q.length-1].XTI.concat(re),q.XTI=q.XTI.concat(re);break;case 2196:if(O.biff<8)break;Y!=null&&(Y.Comment=re[1]);break;case 18:s["!protect"]=re;break;case 19:re!==0&&O.WTF&&console.error("Password verifier: "+re);break;case 133:i[re.pos]=re,O.snames.push(re.name);break;case 10:{if(--U)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=Vt(o),e.sheetRows&&e.sheetRows<=o.e.r){var Re=o.e.r;o.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Vt(o),o.e.r=Re}o.e.r++,o.e.c++}ie.length>0&&(s["!merges"]=ie),Z.length>0&&(s["!objects"]=Z),ne.length>0&&(s["!cols"]=ne),H.length>0&&(s["!rows"]=H),N.Sheets.push(T)}h===""?f=s:n[h]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(O.biff===8&&(O.biff={9:2,521:3,1033:4}[fe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[re.BIFFVer]||8),O.biffguess=re.BIFFVer==0,re.BIFFVer==0&&re.dt==4096&&(O.biff=5,xe=!0,ti(O.codepage=28591)),O.biff==8&&re.BIFFVer==0&&re.dt==16&&(O.biff=2),U++)break;if(s=e.dense?[]:{},O.biff<8&&!xe&&(xe=!0,ti(O.codepage=e.codepage||1252)),O.biff<5||re.BIFFVer==0&&re.dt==4096){h===""&&(h="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var he={pos:t.l-ve,name:h};i[he.pos]=he,O.snames.push(h)}else h=(i[le]||{name:""}).name;re.dt==32&&(s["!type"]="chart"),re.dt==64&&(s["!type"]="macro"),ie=[],Z=[],O.arrayf=A=[],ne=[],H=[],Q=!1,T={Hidden:(i[le]||{hs:0}).hs,name:h}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[re.r]||[])[re.c]:s[At({c:re.c,r:re.r})])&&++re.c,k={ixfe:re.ixfe,XF:L[re.ixfe]||{},v:re.val,t:"n"},M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z({c:re.c,r:re.r},k,e);break;case 5:case 517:k={ixfe:re.ixfe,XF:L[re.ixfe],v:re.val,t:re.t},M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z({c:re.c,r:re.r},k,e);break;case 638:k={ixfe:re.ixfe,XF:L[re.ixfe],v:re.rknum,t:"n"},M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z({c:re.c,r:re.r},k,e);break;case 189:for(var me=re.c;me<=re.C;++me){var ee=re.rkrec[me-re.c][0];k={ixfe:ee,XF:L[ee],v:re.rkrec[me-re.c][1],t:"n"},M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z({c:me,r:re.r},k,e)}break;case 6:case 518:case 1030:{if(re.val=="String"){l=re;break}if(k=xp(re.val,re.cell.ixfe,re.tt),k.XF=L[k.ixfe],e.cellFormula){var pe=re.formula;if(pe&&pe[0]&&pe[0][0]&&pe[0][0][0]=="PtgExp"){var Ce=pe[0][0][1][0],$e=pe[0][0][1][1],ot=At({r:Ce,c:$e});P[ot]?k.f=""+cs(re.formula,o,re.cell,q,O):k.F=((e.dense?(s[Ce]||[])[$e]:s[ot])||{}).F}else k.f=""+cs(re.formula,o,re.cell,q,O)}M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z(re.cell,k,e),l=re}break;case 7:case 519:if(l)l.val=re,k=xp(re,l.cell.ixfe,"s"),k.XF=L[k.ixfe],e.cellFormula&&(k.f=""+cs(l.formula,o,l.cell,q,O)),M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z(l.cell,k,e),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{A.push(re);var xt=At(re[0].s);if(y=e.dense?(s[re[0].s.r]||[])[re[0].s.c]:s[xt],e.cellFormula&&y){if(!l||!xt||!y)break;y.f=""+cs(re[1],o,re[0],q,O),y.F=Vt(re[0])}}break;case 1212:{if(!e.cellFormula)break;if(g){if(!l)break;P[At(l.cell)]=re[0],y=e.dense?(s[l.cell.r]||[])[l.cell.c]:s[At(l.cell)],(y||{}).f=""+cs(re[0],o,p,q,O)}}break;case 253:k=xp(u[re.isst].t,re.ixfe,"s"),u[re.isst].h&&(k.h=u[re.isst].h),k.XF=L[k.ixfe],M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z({c:re.c,r:re.r},k,e);break;case 513:e.sheetStubs&&(k={ixfe:re.ixfe,XF:L[re.ixfe],t:"z"},M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z({c:re.c,r:re.r},k,e));break;case 190:if(e.sheetStubs)for(var Nt=re.c;Nt<=re.C;++Nt){var Me=re.ixfe[Nt-re.c];k={ixfe:Me,XF:L[Me],t:"z"},M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z({c:Nt,r:re.r},k,e)}break;case 214:case 516:case 4:k=xp(re.val,re.ixfe,"s"),k.XF=L[k.ixfe],M>0&&(k.z=X[k.ixfe>>8&63]),bi(k,e,r.opts.Date1904),z({c:re.c,r:re.r},k,e);break;case 0:case 512:U===1&&(o=re);break;case 252:u=re;break;case 1054:if(O.biff==4){X[M++]=re[1];for(var be=0;be<M+163&&jt[be]!=re[1];++be);be>=163&&ho(re[1],M+163)}else ho(re[1],re[0]);break;case 30:{X[M++]=re;for(var Pe=0;Pe<M+163&&jt[Pe]!=re;++Pe);Pe>=163&&ho(re,M+163)}break;case 229:ie=ie.concat(re);break;case 93:Z[re.cmo[0]]=O.lastobj=re;break;case 438:O.lastobj.TxO=re;break;case 127:O.lastobj.ImData=re;break;case 440:for(_=re[0].s.r;_<=re[0].e.r;++_)for(b=re[0].s.c;b<=re[0].e.c;++b)y=e.dense?(s[_]||[])[b]:s[At({c:b,r:_})],y&&(y.l=re[1]);break;case 2048:for(_=re[0].s.r;_<=re[0].e.r;++_)for(b=re[0].s.c;b<=re[0].e.c;++b)y=e.dense?(s[_]||[])[b]:s[At({c:b,r:_})],y&&y.l&&(y.l.Tooltip=re[1]);break;case 28:{if(O.biff<=5&&O.biff>=2)break;y=e.dense?(s[re[0].r]||[])[re[0].c]:s[At(re[0])];var lt=Z[re[2]];y||(e.dense?(s[re[0].r]||(s[re[0].r]=[]),y=s[re[0].r][re[0].c]={t:"z"}):y=s[At(re[0])]={t:"z"},o.e.r=Math.max(o.e.r,re[0].r),o.s.r=Math.min(o.s.r,re[0].r),o.e.c=Math.max(o.e.c,re[0].c),o.s.c=Math.min(o.s.c,re[0].c)),y.c||(y.c=[]),w={a:re[1],t:lt.TxO.t},y.c.push(w)}break;case 2173:_Z(L[re.ixfe],re.ext);break;case 125:{if(!O.cellStyles)break;for(;re.e>=re.s;)ne[re.e--]={width:re.w/256,level:re.level||0,hidden:!!(re.flags&1)},Q||(Q=!0,r_(re.w/256)),Rl(ne[re.e+1])}break;case 520:{var ct={};re.level!=null&&(H[re.r]=ct,ct.level=re.level),re.hidden&&(H[re.r]=ct,ct.hidden=!0),re.hpt&&(H[re.r]=ct,ct.hpt=re.hpt,ct.hpx=Ld(re.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||jc(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[fe]]=re;break;case 161:s["!margins"]||jc(s["!margins"]={}),s["!margins"].header=re.header,s["!margins"].footer=re.footer;break;case 574:re.RTL&&(N.Views[0].RTL=!0);break;case 146:I=re;break;case 2198:D=re;break;case 140:F=re;break;case 442:h?T.CodeName=re||T.name:N.WBProps.CodeName=re||"ThisWorkbook";break}}else we||console.error("Missing Info for XLS Record 0x"+fe.toString(16)),t.l+=ve}return r.SheetNames=en(i).sort(function(Bt,it){return Number(Bt)-Number(it)}).map(function(Bt){return i[Bt].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&K.forEach(function(Bt,it){r.Sheets[r.SheetNames[it]]["!autofilter"]=Bt}),r.Strings=u,r.SSF=Rr(jt),O.enc&&(r.Encryption=O.enc),D&&(r.Themes=D),r.Metadata={},F!==void 0&&(r.Metadata.Country=F),q.names.length>0&&(N.Names=q.names),r.Workbook=N,r}var yf={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Lse(t,e,r){var n=_t.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=W4(n,dw,yf.DSI);for(var i in s)e[i]=s[i]}catch(h){if(r.WTF)throw h}var o=_t.find(t,"/!SummaryInformation");if(o&&o.size>0)try{var l=W4(o,hw,yf.SI);for(var u in l)e[u]==null&&(e[u]=l[u])}catch(h){if(r.WTF)throw h}e.HeadingPairs&&e.TitlesOfParts&&(P5(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function Ose(t,e){var r=[],n=[],s=[],i=0,o,l=b4(dw,"n"),u=b4(hw,"n");if(t.Props)for(o=en(t.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(u,o[i])?n:s).push([o[i],t.Props[o[i]]]);if(t.Custprops)for(o=en(t.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(t.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(u,o[i])?n:s).push([o[i],t.Custprops[o[i]]]);var h=[];for(i=0;i<s.length;++i)V5.indexOf(s[i][0])>-1||I5.indexOf(s[i][0])>-1||s[i][1]!=null&&h.push(s[i]);n.length&&_t.utils.cfb_add(e,"/SummaryInformation",q4(n,yf.SI,u,hw)),(r.length||h.length)&&_t.utils.cfb_add(e,"/DocumentSummaryInformation",q4(r,yf.DSI,l,dw,h.length?h:null,yf.UDI))}function DP(t,e){e||(e={}),d_(e),Pb(),e.codepage&&Ib(e.codepage);var r,n;if(t.FullPaths){if(_t.find(t,"/encryption"))throw new Error("File is password-protected");r=_t.find(t,"!CompObj"),n=_t.find(t,"/Workbook")||_t.find(t,"/Book")}else{switch(e.type){case"base64":t=oa(ma(t));break;case"binary":t=oa(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Kn(t,0),n={content:t}}var s,i;if(r&&Pse(r),e.bookProps&&!e.bookSheets)s={};else{var o=Ht?"buffer":"array";if(n&&n.content)s=Fse(n.content,e);else if((i=_t.find(t,"PerfectOffice_MAIN"))&&i.content)s=Tc.to_workbook(i.content,(e.type=o,e));else if((i=_t.find(t,"NativeContent_MAIN"))&&i.content)s=Tc.to_workbook(i.content,(e.type=o,e));else throw(i=_t.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&_t.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=YZ(t))}var l={};return t.FullPaths&&Lse(t,l,e),s.Props=s.Custprops=l,e.bookFiles&&(s.cfb=t),s}function Mse(t,e){var r=e||{},n=_t.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return _t.utils.cfb_add(n,s,FP(t,r)),r.biff==8&&(t.Props||t.Custprops)&&Ose(t,n),r.biff==8&&t.vbaraw&&QZ(n,_t.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var Zf={0:{f:lre},1:{f:gre},2:{f:Fre},3:{f:Ere},4:{f:wre},5:{f:Pre},6:{f:Bre},7:{f:jre},8:{f:Gre},9:{f:qre},10:{f:Hre},11:{f:Wre},12:{f:vre},13:{f:Ore},14:{f:kre},15:{f:_re},16:{f:kP},17:{f:zre},18:{f:Cre},19:{f:qb},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:zne},40:{},42:{},43:{f:BJ},44:{f:MJ},45:{f:$J},46:{f:WJ},47:{f:HJ},48:{},49:{f:dX},50:{},51:{f:SZ},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Y5},62:{f:Vre},63:{f:DZ},64:{f:cne},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ys,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:ane},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:mre},148:{f:dre,p:16},151:{f:Zre},152:{},153:{f:Vne},154:{},155:{},156:{f:One},157:{},158:{},159:{T:1,f:tJ},160:{T:-1},161:{T:1,f:ou},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Kre},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:NZ},336:{T:-1},337:{f:jZ,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:uw},357:{},358:{},359:{},360:{T:1},361:{},362:{f:X5},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:ene},427:{f:tne},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:nne},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:fre},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Qre},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:uw},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:WZ},633:{T:1},634:{T:-1},635:{T:1,f:$Z},636:{T:-1},637:{f:pX},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:kne},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:une},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},vw={6:{f:e1},10:{f:al},12:{f:gn},13:{f:gn},14:{f:nn},15:{f:nn},16:{f:hs},17:{f:nn},18:{f:nn},19:{f:gn},20:{f:J4},21:{f:J4},23:{f:X5},24:{f:ej},25:{f:nn},26:{},27:{},28:{f:uQ},29:{},34:{f:nn},35:{f:Z4},38:{f:hs},39:{f:hs},40:{f:hs},41:{f:hs},42:{f:nn},43:{f:nn},47:{f:_J},49:{f:OY},51:{f:gn},60:{},61:{f:PY},64:{f:nn},65:{f:LY},66:{f:gn},77:{},80:{},81:{},82:{},85:{f:gn},89:{},90:{},91:{},92:{f:bY},93:{f:fQ},94:{},95:{f:nn},96:{},97:{},99:{f:nn},125:{f:Y5},128:{f:JY},129:{f:NY},130:{f:gn},131:{f:nn},132:{f:nn},133:{f:EY},134:{},140:{f:bQ},141:{f:gn},144:{},146:{f:EQ},151:{},152:{},153:{},154:{},155:{},156:{f:gn},157:{},158:{},160:{f:IQ},161:{f:TQ},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:KY},190:{f:XY},193:{f:al},197:{},198:{},199:{},200:{},201:{},202:{f:nn},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:gn},220:{},221:{f:nn},222:{},224:{f:QY},225:{f:wY},226:{f:al},227:{},229:{f:dQ},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:kY},253:{f:VY},255:{f:jY},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:B5},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:nn},353:{f:al},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:nQ},431:{f:nn},432:{},433:{},434:{},437:{},438:{f:gQ},439:{f:nn},440:{f:xQ},441:{},442:{f:F0},443:{},444:{f:gn},445:{},446:{},448:{f:al},449:{f:IY,r:2},450:{f:al},512:{f:X4},513:{f:CQ},515:{f:tQ},516:{f:UY},517:{f:Q4},519:{f:PQ},520:{f:AY},523:{},545:{f:tj},549:{f:K4},566:{},574:{f:DY},638:{f:GY},659:{},1048:{},1054:{f:$Y},1084:{},1212:{f:oQ},2048:{f:yQ},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:mp},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:al},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:SQ,r:12},2173:{f:bZ,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:nn,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:iQ,r:12},2197:{},2198:{f:pZ,r:12},2199:{},2200:{},2201:{},2202:{f:lQ,r:12},2203:{f:al},2204:{},2205:{},2206:{},2207:{},2211:{f:CY},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:gn},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:jQ},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:NQ},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:X4},1:{},2:{f:OQ},3:{f:FQ},4:{f:DQ},5:{f:Q4},7:{f:VQ},8:{},9:{f:mp},11:{},22:{f:gn},30:{f:WY},31:{},32:{},33:{f:tj},36:{},37:{f:K4},50:{f:BQ},62:{},52:{},67:{},68:{f:gn},69:{},86:{},126:{},127:{f:RQ},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:UQ},223:{},234:{},354:{},421:{},518:{f:e1},521:{f:mp},536:{f:ej},547:{f:Z4},561:{},579:{},1030:{f:e1},1033:{f:mp},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function tt(t,e,r,n){var s=e;if(!isNaN(s)){var i=n||(r||[]).length||0,o=t.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&$b(r)&&t.push(r)}}function Vse(t,e,r,n){var s=(r||[]).length||0;if(s<=8224)return tt(t,e,r,s);var i=e;if(!isNaN(i)){for(var o=r.parts||[],l=0,u=0,h=0;h+(o[l]||8224)<=8224;)h+=o[l]||8224,l++;var f=t.next(4);for(f.write_shift(2,i),f.write_shift(2,h),t.push(r.slice(u,u+h)),u+=h;u<s;){for(f=t.next(4),f.write_shift(2,60),h=0;h+(o[l]||8224)<=8224;)h+=o[l]||8224,l++;f.write_shift(2,h),t.push(r.slice(u,u+h)),u+=h}}}function V0(t,e,r){return t||(t=Le(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function Bse(t,e,r,n){var s=Le(9);return V0(s,t,e),U5(r,n||"b",s),s}function Use(t,e,r){var n=Le(8+2*r.length);return V0(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function zse(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?kn(Pr(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?tt(t,2,MQ(r,n,s)):tt(t,3,LQ(r,n,s));return;case"b":case"e":tt(t,5,Bse(r,n,e.v,e.t));return;case"s":case"str":tt(t,4,Use(r,n,(e.v||"").slice(0,255)));return}tt(t,1,V0(null,r,n))}function $se(t,e,r,n){var s=Array.isArray(e),i=sr(e["!ref"]||"A1"),o,l="",u=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=Vt(i)}for(var h=i.s.r;h<=i.e.r;++h){l=ln(h);for(var f=i.s.c;f<=i.e.c;++f){h===i.s.r&&(u[f]=$r(f)),o=u[f]+l;var p=s?(e[h]||[])[f]:e[o];p&&zse(t,p,h,f)}}}function Hse(t,e){for(var r=e||{},n=Gs(),s=0,i=0;i<t.SheetNames.length;++i)t.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return tt(n,r.biff==4?1033:r.biff==3?521:9,Zb(t,16,r)),$se(n,t.Sheets[t.SheetNames[s]],s,r),tt(n,10),n.end()}function Wse(t,e,r){tt(t,49,MY({sz:12,name:"Arial"},r))}function qse(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&tt(t,1054,HY(s,e[s],r))})}function Gse(t,e){var r=Le(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),tt(t,2151,r),r=Le(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),q5(sr(e["!ref"]||"A1"),r),r.write_shift(4,4),tt(t,2152,r)}function Kse(t,e){for(var r=0;r<16;++r)tt(t,224,Y4({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){tt(t,224,Y4(n,0,e))})}function Xse(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];tt(t,440,vQ(n)),n[1].Tooltip&&tt(t,2048,wQ(n))}delete e["!links"]}function Yse(t,e){if(e){var r=0;e.forEach(function(n,s){++r<=256&&n&&tt(t,125,kQ(Dx(s,n),s))})}}function Qse(t,e,r,n,s){var i=16+Wl(s.cellXfs,e,s);if(e.v==null&&!e.bf){tt(t,513,Hc(r,n,i));return}if(e.bf)tt(t,6,Nte(e,r,n,s,i));else switch(e.t){case"d":case"n":var o=e.t=="d"?kn(Pr(e.v)):e.v;tt(t,515,rQ(r,n,o,i));break;case"b":case"e":tt(t,517,eQ(r,n,e.v,i,s,e.t));break;case"s":case"str":if(s.bookSST){var l=o_(s.Strings,e.v,s.revStrings);tt(t,253,BY(r,n,l,i))}else tt(t,516,zY(r,n,(e.v||"").slice(0,255),i,s));break;default:tt(t,513,Hc(r,n,i))}}function Jse(t,e,r){var n=Gs(),s=r.SheetNames[t],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[t]||{},u=Array.isArray(i),h=e.biff==8,f,p="",g=[],y=sr(i["!ref"]||"A1"),w=h?65536:16384;if(y.e.c>255||y.e.r>=w){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");y.e.c=Math.min(y.e.c,255),y.e.r=Math.min(y.e.c,w-1)}tt(n,2057,Zb(r,16,e)),tt(n,13,Ia(1)),tt(n,12,Ia(100)),tt(n,15,Ts(!0)),tt(n,17,Ts(!1)),tt(n,16,zc(.001)),tt(n,95,Ts(!0)),tt(n,42,Ts(!1)),tt(n,43,Ts(!1)),tt(n,130,Ia(1)),tt(n,128,ZY()),tt(n,131,Ts(!1)),tt(n,132,Ts(!1)),h&&Yse(n,i["!cols"]),tt(n,512,qY(y,e)),h&&(i["!links"]=[]);for(var b=y.s.r;b<=y.e.r;++b){p=ln(b);for(var _=y.s.c;_<=y.e.c;++_){b===y.s.r&&(g[_]=$r(_)),f=g[_]+p;var P=u?(i[b]||[])[_]:i[f];P&&(Qse(n,P,b,_,e),h&&P.l&&i["!links"].push([f,P.l]))}}var A=l.CodeName||l.name||s;return h&&tt(n,574,FY((o.Views||[])[0])),h&&(i["!merges"]||[]).length&&tt(n,229,hQ(i["!merges"])),h&&Xse(n,i),tt(n,442,z5(A)),h&&Gse(n,i),tt(n,10),n.end()}function Zse(t,e,r){var n=Gs(),s=(t||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,u=r.biff==5;if(tt(n,2057,Zb(t,5,r)),r.bookType=="xla"&&tt(n,135),tt(n,225,l?Ia(1200):null),tt(n,193,eY(2)),u&&tt(n,191),u&&tt(n,192),tt(n,226),tt(n,92,_Y("SheetJS",r)),tt(n,66,Ia(l?1200:1252)),l&&tt(n,353,Ia(0)),l&&tt(n,448),tt(n,317,AQ(t.SheetNames.length)),l&&t.vbaraw&&tt(n,211),l&&t.vbaraw){var h=o.CodeName||"ThisWorkbook";tt(n,442,z5(h))}tt(n,156,Ia(17)),tt(n,25,Ts(!1)),tt(n,18,Ts(!1)),tt(n,19,Ia(0)),l&&tt(n,431,Ts(!1)),l&&tt(n,444,Ia(0)),tt(n,61,RY()),tt(n,64,Ts(!1)),tt(n,141,Ia(0)),tt(n,34,Ts(Ine(t)=="true")),tt(n,14,Ts(!0)),l&&tt(n,439,Ts(!1)),tt(n,218,Ia(0)),Wse(n,t,r),qse(n,t.SSF,r),Kse(n,r),l&&tt(n,352,Ts(!1));var f=n.end(),p=Gs();l&&tt(p,140,_Q()),l&&r.Strings&&Vse(p,252,TY(r.Strings)),tt(p,10);var g=p.end(),y=Gs(),w=0,b=0;for(b=0;b<t.SheetNames.length;++b)w+=(l?12:11)+(l?2:1)*t.SheetNames[b].length;var _=f.length+w+g.length;for(b=0;b<t.SheetNames.length;++b){var P=i[b]||{};tt(y,133,SY({pos:_,hs:P.Hidden||0,dt:0,name:t.SheetNames[b]},r)),_+=e[b].length}var A=y.end();if(w!=A.length)throw new Error("BS8 "+w+" != "+A.length);var k=[];return f.length&&k.push(f),A.length&&k.push(A),g.length&&k.push(g),Fn(k)}function eae(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=Rr(jt)),t&&t.SSF&&(th(),Tx(t.SSF),r.revssf=Ax(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,h_(r),r.cellXfs=[],Wl(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var s=0;s<t.SheetNames.length;++s)n[n.length]=Jse(s,r,t);return n.unshift(Zse(t,n,r)),Fn(n)}function FP(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var s=Ks(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=e||{};switch(i.biff||2){case 8:case 5:return eae(t,e);case 4:case 3:case 2:return Hse(t,e)}throw new Error("invalid type "+i.bookType+" for BIFF")}function dj(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),o=s.index,l=i&&i.index||t.length,u=MK(t.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),h=-1,f=0,p=0,g=0,y={s:{r:1e7,c:1e7},e:{r:0,c:0}},w=[];for(o=0;o<u.length;++o){var b=u[o].trim(),_=b.slice(0,3).toLowerCase();if(_=="<tr"){if(++h,r.sheetRows&&r.sheetRows<=h){--h;break}f=0;continue}if(!(_!="<td"&&_!="<th")){var P=b.split(/<\/t[dh]>/i);for(l=0;l<P.length;++l){var A=P[l].trim();if(A.match(/<t[dh]/i)){for(var k=A,F=0;k.charAt(0)=="<"&&(F=k.indexOf(">"))>-1;)k=k.slice(F+1);for(var L=0;L<w.length;++L){var I=w[L];I.s.c==f&&I.s.r<h&&h<=I.e.r&&(f=I.e.c+1,L=-1)}var N=Rt(A.slice(0,A.indexOf(">")));g=N.colspan?+N.colspan:1,((p=+N.rowspan)>1||g>1)&&w.push({s:{r:h,c:f},e:{r:h+(p||1)-1,c:f+g-1}});var T=N.t||N["data-t"]||"";if(!k.length){f+=g;continue}if(k=a5(k),y.s.r>h&&(y.s.r=h),y.e.r<h&&(y.e.r=h),y.s.c>f&&(y.s.c=f),y.e.c<f&&(y.e.c=f),!k.length){f+=g;continue}var R={t:"s",v:k};r.raw||!k.trim().length||T=="s"||(k==="TRUE"?R={t:"b",v:!0}:k==="FALSE"?R={t:"b",v:!1}:isNaN(ni(k))?isNaN(Dd(k).getDate())||(R={t:"d",v:Pr(k)},r.cellDates||(R={t:"n",v:kn(R.v)}),R.z=r.dateNF||jt[14]):R={t:"n",v:ni(k)}),r.dense?(n[h]||(n[h]=[]),n[h][f]=R):n[At({r:h,c:f})]=R,f+=g}}}}return n["!ref"]=Vt(y),w.length&&(n["!merges"]=w),n}function tae(t,e,r,n){for(var s=t["!merges"]||[],i=[],o=e.s.c;o<=e.e.c;++o){for(var l=0,u=0,h=0;h<s.length;++h)if(!(s[h].s.r>r||s[h].s.c>o)&&!(s[h].e.r<r||s[h].e.c<o)){if(s[h].s.r<r||s[h].s.c<o){l=-1;break}l=s[h].e.r-s[h].s.r+1,u=s[h].e.c-s[h].s.c+1;break}if(!(l<0)){var f=At({r,c:o}),p=n.dense?(t[r]||[])[o]:t[f],g=p&&p.v!=null&&(p.h||Bb(p.w||(Eo(p),p.w)||""))||"",y={};l>1&&(y.rowspan=l),u>1&&(y.colspan=u),n.editable?g='<span contenteditable="true">'+g+"</span>":p&&(y["data-t"]=p&&p.t||"z",p.v!=null&&(y["data-v"]=p.v),p.z!=null&&(y["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+p.l.Target+'">'+g+"</a>")),y.id=(n.id||"sjs")+"-"+f,i.push(Ze("td",g,y))}}var w="<tr>";return w+i.join("")+"</tr>"}var rae='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',nae="</body></html>";function sae(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Hl(dj(r[0],e),e);var n=p_();return r.forEach(function(s,i){g_(n,dj(s,e),"Sheet"+(i+1))}),n}function aae(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function LP(t,e){var r=e||{},n=r.header!=null?r.header:rae,s=r.footer!=null?r.footer:nae,i=[n],o=Ks(t["!ref"]);r.dense=Array.isArray(t),i.push(aae(t,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(tae(t,o,l,r));return i.push("</table>"+s),i.join("")}function OP(t,e,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var o=typeof n.origin=="string"?Hr(n.origin):n.origin;s=o.r,i=o.c}var l=e.getElementsByTagName("tr"),u=Math.min(n.sheetRows||1e7,l.length),h={s:{r:0,c:0},e:{r:s,c:i}};if(t["!ref"]){var f=Ks(t["!ref"]);h.s.r=Math.min(h.s.r,f.s.r),h.s.c=Math.min(h.s.c,f.s.c),h.e.r=Math.max(h.e.r,f.e.r),h.e.c=Math.max(h.e.c,f.e.c),s==-1&&(h.e.r=s=f.e.r+1)}var p=[],g=0,y=t["!rows"]||(t["!rows"]=[]),w=0,b=0,_=0,P=0,A=0,k=0;for(t["!cols"]||(t["!cols"]=[]);w<l.length&&b<u;++w){var F=l[w];if(hj(F)){if(n.display)continue;y[b]={hidden:!0}}var L=F.children;for(_=P=0;_<L.length;++_){var I=L[_];if(!(n.display&&hj(I))){var N=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):a5(I.innerHTML),T=I.getAttribute("data-z")||I.getAttribute("z");for(g=0;g<p.length;++g){var R=p[g];R.s.c==P+i&&R.s.r<b+s&&b+s<=R.e.r&&(P=R.e.c+1-i,g=-1)}k=+I.getAttribute("colspan")||1,((A=+I.getAttribute("rowspan")||1)>1||k>1)&&p.push({s:{r:b+s,c:P+i},e:{r:b+s+(A||1)-1,c:P+i+(k||1)-1}});var B={t:"s",v:N},z=I.getAttribute("data-t")||I.getAttribute("t")||"";N!=null&&(N.length==0?B.t=z||"z":n.raw||N.trim().length==0||z=="s"||(N==="TRUE"?B={t:"b",v:!0}:N==="FALSE"?B={t:"b",v:!1}:isNaN(ni(N))?isNaN(Dd(N).getDate())||(B={t:"d",v:Pr(N)},n.cellDates||(B={t:"n",v:kn(B.v)}),B.z=n.dateNF||jt[14]):B={t:"n",v:ni(N)})),B.z===void 0&&T!=null&&(B.z=T);var O="",D=I.getElementsByTagName("A");if(D&&D.length)for(var ie=0;ie<D.length&&!(D[ie].hasAttribute("href")&&(O=D[ie].getAttribute("href"),O.charAt(0)!="#"));++ie);O&&O.charAt(0)!="#"&&(B.l={Target:O}),n.dense?(t[b+s]||(t[b+s]=[]),t[b+s][P+i]=B):t[At({c:P+i,r:b+s})]=B,h.e.c<P+i&&(h.e.c=P+i),P+=k}}++b}return p.length&&(t["!merges"]=(t["!merges"]||[]).concat(p)),h.e.r=Math.max(h.e.r,b-1+s),t["!ref"]=Vt(h),b>=u&&(t["!fullref"]=Vt((h.e.r=l.length-w+b-1+s,h))),t}function MP(t,e){var r=e||{},n=r.dense?[]:{};return OP(n,t,e)}function iae(t,e){return Hl(MP(t,e),e)}function hj(t){var e="",r=oae(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function oae(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function lae(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=rr(e.replace(/<[^>]*>/g,""));return[r]}var fj={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function VP(t,e){var r=e||{},n=Ub(t),s=[],i,o,l={name:""},u="",h=0,f,p,g={},y=[],w=r.dense?[]:{},b,_,P={value:""},A="",k=0,F=[],L=-1,I=-1,N={s:{r:1e6,c:1e7},e:{r:0,c:0}},T=0,R={},B=[],z={},O=0,D=0,ie=[],Z=1,ne=1,H=[],Q={Names:[]},q={},ae=["",""],U=[],M={},X="",K=0,Y=!1,xe=!1,le=0;for(Gf.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");b=Gf.exec(n);)switch(b[3]=b[3].replace(/_.*$/,"")){case"table":case"":b[1]==="/"?(N.e.c>=N.s.c&&N.e.r>=N.s.r?w["!ref"]=Vt(N):w["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=N.e.r&&(w["!fullref"]=w["!ref"],N.e.r=r.sheetRows-1,w["!ref"]=Vt(N)),B.length&&(w["!merges"]=B),ie.length&&(w["!rows"]=ie),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),y.push(f.name),g[f.name]=w,xe=!1):b[0].charAt(b[0].length-2)!=="/"&&(f=Rt(b[0],!1),L=I=-1,N.s.r=N.s.c=1e7,N.e.r=N.e.c=0,w=r.dense?[]:{},B=[],ie=[],xe=!0);break;case"table-row-group":b[1]==="/"?--T:++T;break;case"table-row":case"":if(b[1]==="/"){L+=Z,Z=1;break}if(p=Rt(b[0],!1),p.?L=p.-1:L==-1&&(L=0),Z=+p["number-rows-repeated"]||1,Z<10)for(le=0;le<Z;++le)T>0&&(ie[L+le]={level:T});I=-1;break;case"covered-table-cell":b[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(w[L]||(w[L]=[]),w[L][I]={t:"z"}):w[At({r:L,c:I})]={t:"z"}),A="",F=[];break;case"table-cell":case"":if(b[0].charAt(b[0].length-2)==="/")++I,P=Rt(b[0],!1),ne=parseInt(P["number-columns-repeated"]||"1",10),_={t:"z",v:null},P.formula&&r.cellFormula!=!1&&(_.f=lj(rr(P.formula))),(P.||P["value-type"])=="string"&&(_.t="s",_.v=rr(P["string-value"]||""),r.dense?(w[L]||(w[L]=[]),w[L][I]=_):w[At({r:L,c:I})]=_),I+=ne-1;else if(b[1]!=="/"){++I,A="",k=0,F=[],ne=1;var fe=Z?L+Z-1:L;if(I>N.e.c&&(N.e.c=I),I<N.s.c&&(N.s.c=I),L<N.s.r&&(N.s.r=L),fe>N.e.r&&(N.e.r=fe),P=Rt(b[0],!1),U=[],M={},_={t:P.||P["value-type"],v:null},r.cellFormula)if(P.formula&&(P.formula=rr(P.formula)),P["number-matrix-columns-spanned"]&&P["number-matrix-rows-spanned"]&&(O=parseInt(P["number-matrix-rows-spanned"],10)||0,D=parseInt(P["number-matrix-columns-spanned"],10)||0,z={s:{r:L,c:I},e:{r:L+O-1,c:I+D-1}},_.F=Vt(z),H.push([z,_.F])),P.formula)_.f=lj(P.formula);else for(le=0;le<H.length;++le)L>=H[le][0].s.r&&L<=H[le][0].e.r&&I>=H[le][0].s.c&&I<=H[le][0].e.c&&(_.F=H[le][1]);switch((P["number-columns-spanned"]||P["number-rows-spanned"])&&(O=parseInt(P["number-rows-spanned"],10)||0,D=parseInt(P["number-columns-spanned"],10)||0,z={s:{r:L,c:I},e:{r:L+O-1,c:I+D-1}},B.push(z)),P["number-columns-repeated"]&&(ne=parseInt(P["number-columns-repeated"],10)),_.t){case"boolean":_.t="b",_.v=Ar(P["boolean-value"]);break;case"float":_.t="n",_.v=parseFloat(P.value);break;case"percentage":_.t="n",_.v=parseFloat(P.value);break;case"currency":_.t="n",_.v=parseFloat(P.value);break;case"date":_.t="d",_.v=Pr(P["date-value"]),r.cellDates||(_.t="n",_.v=kn(_.v)),_.z="m/d/yy";break;case"time":_.t="n",_.v=FK(P["time-value"])/86400,r.cellDates&&(_.t="d",_.v=Cx(_.v)),_.z="HH:MM:SS";break;case"number":_.t="n",_.v=parseFloat(P.);break;default:if(_.t==="string"||_.t==="text"||!_.t)_.t="s",P["string-value"]!=null&&(A=rr(P["string-value"]),F=[]);else throw new Error("Unsupported value type "+_.t)}}else{if(Y=!1,_.t==="s"&&(_.v=A||"",F.length&&(_.R=F),Y=k==0),q.Target&&(_.l=q),U.length>0&&(_.c=U,U=[]),A&&r.cellText!==!1&&(_.w=A),Y&&(_.t="z",delete _.v),(!Y||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=L))for(var ve=0;ve<Z;++ve){if(ne=parseInt(P["number-columns-repeated"]||"1",10),r.dense)for(w[L+ve]||(w[L+ve]=[]),w[L+ve][I]=ve==0?_:Rr(_);--ne>0;)w[L+ve][I+ne]=Rr(_);else for(w[At({r:L+ve,c:I})]=_;--ne>0;)w[At({r:L+ve,c:I+ne})]=Rr(_);N.e.c<=I&&(N.e.c=I)}ne=parseInt(P["number-columns-repeated"]||"1",10),I+=ne-1,ne=0,_={},A="",F=[]}q={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(b[1]==="/"){if((i=s.pop())[0]!==b[3])throw"Bad state: "+i}else b[0].charAt(b[0].length-2)!=="/"&&s.push([b[3],!0]);break;case"annotation":if(b[1]==="/"){if((i=s.pop())[0]!==b[3])throw"Bad state: "+i;M.t=A,F.length&&(M.R=F),M.a=X,U.push(M)}else b[0].charAt(b[0].length-2)!=="/"&&s.push([b[3],!1]);X="",K=0,A="",k=0,F=[];break;case"creator":b[1]==="/"?X=n.slice(K,b.index):K=b.index+b[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(b[1]==="/"){if((i=s.pop())[0]!==b[3])throw"Bad state: "+i}else b[0].charAt(b[0].length-2)!=="/"&&s.push([b[3],!1]);A="",k=0,F=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(b[1]==="/"){if(R[l.name]=u,(i=s.pop())[0]!==b[3])throw"Bad state: "+i}else b[0].charAt(b[0].length-2)!=="/"&&(u="",l=Rt(b[0],!1),s.push([b[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=Rt(b[0],!1),u+=fj[b[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=Rt(b[0],!1),u+=fj[b[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(b[0].slice(-2)==="/>")break;if(b[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":u+=n.slice(h,b.index);break}else h=b.index+b[0].length;break;case"named-range":o=Rt(b[0],!1),ae=t1(o["cell-range-address"]);var we={Name:o.name,Ref:ae[0]+"!"+ae[1]};xe&&(we.Sheet=y.length),Q.Names.push(we);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(b[1]==="/"&&(!P||!P["string-value"])){var We=lae(n.slice(k,b.index));A=(A.length>0?A+`
`:"")+We[0]}else Rt(b[0],!1),k=b.index+b[0].length;break;case"s":break;case"database-range":if(b[1]==="/")break;try{ae=t1(Rt(b[0])["target-range-address"]),g[ae[0]]["!autofilter"]={ref:ae[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(b[1]!=="/"){if(q=Rt(b[0],!1),!q.href)break;q.Target=rr(q.href),delete q.href,q.Target.charAt(0)=="#"&&q.Target.indexOf(".")>-1?(ae=t1(q.Target.slice(1)),q.Target="#"+ae[0]+"!"+ae[1]):q.Target.match(/^\.\.[\\\/]/)&&(q.Target=q.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(b[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(b)}}var re={Sheets:g,SheetNames:y,Workbook:Q};return r.bookSheets&&delete re.Sheets,re}function mj(t,e){e=e||{},Ca(t,"META-INF/manifest.xml")&&FX(pn(t,"META-INF/manifest.xml"),e);var r=la(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=VP(vr(r),e);return Ca(t,"meta.xml")&&(n.Props=A5(pn(t,"meta.xml"))),n}function pj(t,e){return VP(t,e)}var cae=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+qf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return cn+e}}(),gj=function(){var t=function(i){return xr(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,o,l){var u=[];u.push('      <table:table table:name="'+xr(o.SheetNames[l])+`" table:style-name="ta1">
`);var h=0,f=0,p=Ks(i["!ref"]||"A1"),g=i["!merges"]||[],y=0,w=Array.isArray(i);if(i["!cols"])for(f=0;f<=p.e.c;++f)u.push("        <table:table-column"+(i["!cols"][f]?' table:style-name="co'+i["!cols"][f].ods+'"':"")+`></table:table-column>
`);var b="",_=i["!rows"]||[];for(h=0;h<p.s.r;++h)b=_[h]?' table:style-name="ro'+_[h].ods+'"':"",u.push("        <table:table-row"+b+`></table:table-row>
`);for(;h<=p.e.r;++h){for(b=_[h]?' table:style-name="ro'+_[h].ods+'"':"",u.push("        <table:table-row"+b+`>
`),f=0;f<p.s.c;++f)u.push(e);for(;f<=p.e.c;++f){var P=!1,A={},k="";for(y=0;y!=g.length;++y)if(!(g[y].s.c>f)&&!(g[y].s.r>h)&&!(g[y].e.c<f)&&!(g[y].e.r<h)){(g[y].s.c!=f||g[y].s.r!=h)&&(P=!0),A["table:number-columns-spanned"]=g[y].e.c-g[y].s.c+1,A["table:number-rows-spanned"]=g[y].e.r-g[y].s.r+1;break}if(P){u.push(r);continue}var F=At({r:h,c:f}),L=w?(i[h]||[])[f]:i[F];if(L&&L.f&&(A["table:formula"]=xr(Ate(L.f)),L.F&&L.F.slice(0,F.length)==F)){var I=Ks(L.F);A["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,A["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!L){u.push(e);continue}switch(L.t){case"b":k=L.v?"TRUE":"FALSE",A["office:value-type"]="boolean",A["office:boolean-value"]=L.v?"true":"false";break;case"n":k=L.w||String(L.v||0),A["office:value-type"]="float",A["office:value"]=L.v||0;break;case"s":case"str":k=L.v==null?"":L.v,A["office:value-type"]="string";break;case"d":k=L.w||Pr(L.v).toISOString(),A["office:value-type"]="date",A["office:date-value"]=Pr(L.v).toISOString(),A["table:style-name"]="ce1";break;default:u.push(e);continue}var N=t(k);if(L.l&&L.l.Target){var T=L.l.Target;T=T.charAt(0)=="#"?"#"+Cte(T.slice(1)):T,T.charAt(0)!="#"&&!T.match(/^\w+:/)&&(T="../"+T),N=Ze("text:a",N,{"xlink:href":T.replace(/&/g,"&amp;")})}u.push("          "+Ze("table:table-cell",Ze("text:p",N,{}),A)+`
`)}u.push(`        </table:table-row>
`)}return u.push(`      </table:table>
`),u.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(h){return o.Sheets[h]}).forEach(function(h){if(h&&h["!cols"]){for(var f=0;f<h["!cols"].length;++f)if(h["!cols"][f]){var p=h["!cols"][f];if(p.width==null&&p.wpx==null&&p.wch==null)continue;Rl(p),p.ods=l;var g=h["!cols"][f].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),i.push(`  </style:style>
`),++l}}});var u=0;o.SheetNames.map(function(h){return o.Sheets[h]}).forEach(function(h){if(h&&h["!rows"]){for(var f=0;f<h["!rows"].length;++f)if(h["!rows"][f]){h["!rows"][f].ods=u;var p=h["!rows"][f].hpx+"px";i.push('  <style:style style:name="ro'+u+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+p+`"/>
`),i.push(`  </style:style>
`),++u}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var u=[cn],h=qf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=qf({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(u.push("<office:document"+h+f+`>
`),u.push(j5().replace(/office:document-meta/g,"office:meta"))):u.push("<office:document-content"+h+`>
`),s(u,o),u.push(`  <office:body>
`),u.push(`    <office:spreadsheet>
`);for(var p=0;p!=o.SheetNames.length;++p)u.push(n(o.Sheets[o.SheetNames[p]],o,p));return u.push(`    </office:spreadsheet>
`),u.push(`  </office:body>
`),l.bookType=="fods"?u.push("</office:document>"):u.push("</office:document-content>"),u.join("")}}();function BP(t,e){if(e.bookType=="fods")return gj(t,e);var r=Ob(),n="",s=[],i=[];return n="mimetype",Ut(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Ut(r,n,gj(t,e)),s.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",Ut(r,n,cae(t,e)),s.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",Ut(r,n,cn+j5()),s.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",Ut(r,n,MX(i)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Ut(r,n,LX(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Wc(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function yw(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):vr($l(t))}function uae(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):oa(ki(t))}function dae(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function Fl(t){var e=t.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function xj(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function hae(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,s=e+13;s>=e;--s)n=n*256+t[s];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function fae(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var i=0;s>=1;++i,s/=256)t[e+i]=s&255;t[e+15]|=r>=0?0:128}function e0(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function pr(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Zr(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function or(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=e0(t,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var u=r[0];t[r[0]++]>=128;);l=t.slice(u,r[0])}break;case 5:o=4,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=e0(t,r),l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var h={data:l,type:i};e[s]==null?e[s]=[h]:e[s].push(h)}return e}function Wn(t){var e=[];return t.forEach(function(r,n){r.forEach(function(s){s.data&&(e.push(pr(n*8+s.type)),s.type==2&&e.push(pr(s.data.length)),e.push(s.data))})}),Fl(e)}function u_(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function Ta(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=e0(t,n),i=or(t.slice(n[0],n[0]+s));n[0]+=s;var o={id:Zr(i[1][0].data),messages:[]};i[2].forEach(function(l){var u=or(l.data),h=Zr(u[3][0].data);o.messages.push({meta:u,data:t.slice(n[0],n[0]+h)}),n[0]+=h}),(e=i[3])!=null&&e[0]&&(o.merge=Zr(i[3][0].data)>>>0>0),r.push(o)}return r}function $u(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:pr(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:pr(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:pr(o.data.length)}],n[2].push({data:Wn(o.meta),type:2})});var i=Wn(n);e.push(pr(i.length)),e.push(i),s.forEach(function(o){return e.push(o)})}),Fl(e)}function mae(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=e0(e,r),s=[];r[0]<e.length;){var i=e[r[0]]&3;if(i==0){var o=e[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=e[r[0]],l>1&&(o|=e[r[0]+1]<<8),l>2&&(o|=e[r[0]+2]<<16),l>3&&(o|=e[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(e.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var u=0,h=0;if(i==1?(h=(e[r[0]]>>2&7)+4,u=(e[r[0]++]&224)<<3,u|=e[r[0]++]):(h=(e[r[0]++]>>2)+1,i==2?(u=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(u=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Fl(s)],u==0)throw new Error("Invalid offset 0");if(u>s[0].length)throw new Error("Invalid offset beyond length");if(h>=u)for(s.push(s[0].slice(-u)),h-=u;h>=s[s.length-1].length;)s.push(s[s.length-1]),h-=s[s.length-1].length;s.push(s[0].slice(-u,-u+h))}}var f=Fl(s);if(f.length!=n)throw new Error("Unexpected length: ".concat(f.length," != ").concat(n));return f}function ja(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(mae(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Fl(e)}function Hu(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),s=new Uint8Array(4);e.push(s);var i=pr(n),o=i.length;e.push(i),n<=60?(o++,e.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),o+=n,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=n}return Fl(e)}function pae(t,e,r,n){var s=Wc(t),i=s.getUint32(4,!0),o=(n>1?12:8)+xj(i&(n>1?3470:398))*4,l=-1,u=-1,h=NaN,f=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=xj(i&(n>1?12288:4096))*4,i&16&&(u=s.getUint32(o,!0),o+=4),i&32&&(h=s.getFloat64(o,!0),o+=8),i&64&&(f.setTime(f.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var p;switch(t[2]){case 0:break;case 2:p={t:"n",v:h};break;case 3:p={t:"s",v:e[u]};break;case 5:p={t:"d",v:f};break;case 6:p={t:"b",v:h>0};break;case 7:p={t:"n",v:h/86400};break;case 8:p={t:"e",v:0};break;case 9:if(l>-1)p={t:"s",v:r[l]};else if(u>-1)p={t:"s",v:e[u]};else if(!isNaN(h))p={t:"n",v:h};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return p}function gae(t,e,r){var n=Wc(t),s=n.getUint32(8,!0),i=12,o=-1,l=-1,u=NaN,h=NaN,f=new Date(2001,0,1);s&1&&(u=hae(t,i),i+=16),s&2&&(h=n.getFloat64(i,!0),i+=8),s&4&&(f.setTime(f.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=n.getUint32(i,!0),i+=4),s&16&&(o=n.getUint32(i,!0),i+=4);var p;switch(t[1]){case 0:break;case 2:p={t:"n",v:u};break;case 3:p={t:"s",v:e[l]};break;case 5:p={t:"d",v:f};break;case 6:p={t:"b",v:h>0};break;case 7:p={t:"n",v:h/86400};break;case 8:p={t:"e",v:0};break;case 9:if(o>-1)p={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:p={t:"n",v:u};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return p}function n1(t,e){var r=new Uint8Array(32),n=Wc(r),s=12,i=0;switch(r[0]=5,t.t){case"n":r[1]=2,fae(r,s,t.v),i|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,t.v?1:0,!0),i|=2,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(s,e.indexOf(t.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,i,!0),r.slice(0,s)}function s1(t,e){var r=new Uint8Array(32),n=Wc(r),s=12,i=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(s,t.v,!0),i|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,t.v?1:0,!0),i|=32,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(s,e.indexOf(t.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,i,!0),r.slice(0,s)}function xae(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return pae(t,e,r,t[0]);case 5:return gae(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function ls(t){var e=or(t);return e0(e[1][0].data)}function vj(t,e){var r=or(e.data),n=Zr(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=or(o.data),u=Zr(l[1][0].data)>>>0;switch(n){case 1:i[u]=yw(l[3][0].data);break;case 8:{var h=t[ls(l[9][0].data)][0],f=or(h.data),p=t[ls(f[1][0].data)][0],g=Zr(p.meta[1][0].data);if(g!=2001)throw new Error("2000 unexpected reference to ".concat(g));var y=or(p.data);i[u]=y[3].map(function(w){return yw(w.data)}).join("")}break}}),i}function vae(t,e){var r,n,s,i,o,l,u,h,f,p,g,y,w,b,_=or(t),P=Zr(_[1][0].data)>>>0,A=Zr(_[2][0].data)>>>0,k=((n=(r=_[8])==null?void 0:r[0])==null?void 0:n.data)&&Zr(_[8][0].data)>0||!1,F,L;if((i=(s=_[7])==null?void 0:s[0])!=null&&i.data&&e!=0)F=(l=(o=_[7])==null?void 0:o[0])==null?void 0:l.data,L=(h=(u=_[6])==null?void 0:u[0])==null?void 0:h.data;else if((p=(f=_[4])==null?void 0:f[0])!=null&&p.data&&e!=1)F=(y=(g=_[4])==null?void 0:g[0])==null?void 0:y.data,L=(b=(w=_[3])==null?void 0:w[0])==null?void 0:b.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var I=k?4:1,N=Wc(F),T=[],R=0;R<F.length/2;++R){var B=N.getUint16(R*2,!0);B<65535&&T.push([R,B])}if(T.length!=A)throw"Expected ".concat(A," cells, found ").concat(T.length);var z=[];for(R=0;R<T.length-1;++R)z[T[R][0]]=L.subarray(T[R][1]*I,T[R+1][1]*I);return T.length>=1&&(z[T[T.length-1][0]]=L.subarray(T[T.length-1][1]*I)),{R:P,cells:z}}function yae(t,e){var r,n=or(e.data),s=(r=n==null?void 0:n[7])!=null&&r[0]?Zr(n[7][0].data)>>>0>0?1:0:-1,i=u_(n[5],function(o){return vae(o,s)});return{nrows:Zr(n[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(u,h){if(o[l.R][h])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(h));o[l.R][h]=u}),o},[])}}function wae(t,e,r){var n,s=or(e.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Zr(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(Zr(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=Vt(i);var o=or(s[4][0].data),l=vj(t,t[ls(o[4][0].data)][0]),u=(n=o[17])!=null&&n[0]?vj(t,t[ls(o[17][0].data)][0]):[],h=or(o[3][0].data),f=0;h[1].forEach(function(p){var g=or(p.data),y=t[ls(g[2][0].data)][0],w=Zr(y.meta[1][0].data);if(w!=6002)throw new Error("6001 unexpected reference to ".concat(w));var b=yae(t,y);b.data.forEach(function(_,P){_.forEach(function(A,k){var F=At({r:f+P,c:k}),L=xae(A,l,u);L&&(r[F]=L)})}),f+=b.nrows})}function bae(t,e){var r=or(e.data),n={"!ref":"A1"},s=t[ls(r[2][0].data)],i=Zr(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return wae(t,s[0],n),n}function _ae(t,e){var r,n=or(e.data),s={name:(r=n[1])!=null&&r[0]?yw(n[1][0].data):"",sheets:[]},i=u_(n[2],ls);return i.forEach(function(o){t[o].forEach(function(l){var u=Zr(l.meta[1][0].data);u==6e3&&s.sheets.push(bae(t,l))})}),s}function Nae(t,e){var r=p_(),n=or(e.data),s=u_(n[1],ls);if(s.forEach(function(i){t[i].forEach(function(o){var l=Zr(o.meta[1][0].data);if(l==2){var u=_ae(t,o);u.sheets.forEach(function(h,f){g_(r,h,f==0?u.name:u.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function a1(t){var e,r,n,s,i={},o=[];if(t.FullPaths.forEach(function(u){if(u.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(u){if(u.name.match(/\.iwa$/)){var h;try{h=ja(u.content)}catch(p){return console.log("?? "+u.content.length+" "+(p.message||p))}var f;try{f=Ta(h)}catch(p){return console.log("## "+(p.message||p))}f.forEach(function(p){i[p.id]=p.messages,o.push(p.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(n=(r=(e=i==null?void 0:i[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&Zr(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(u){i[u].forEach(function(h){var f=Zr(h.meta[1][0].data)>>>0;if(f==1)if(!l)l=h;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return Nae(i,l)}function Eae(t,e,r){var n,s,i,o;if(!((n=t[6])!=null&&n[0])||!((s=t[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=t[8])==null?void 0:i[0])==null?void 0:o.data)&&Zr(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var u=0,h=Wc(t[7][0].data),f=0,p=[],g=Wc(t[4][0].data),y=0,w=[],b=0;b<e.length;++b){if(e[b]==null){h.setUint16(b*2,65535,!0),g.setUint16(b*2,65535);continue}h.setUint16(b*2,f,!0),g.setUint16(b*2,y,!0);var _,P;switch(typeof e[b]){case"string":_=n1({t:"s",v:e[b]},r),P=s1({t:"s",v:e[b]},r);break;case"number":_=n1({t:"n",v:e[b]},r),P=s1({t:"n",v:e[b]},r);break;case"boolean":_=n1({t:"b",v:e[b]},r),P=s1({t:"b",v:e[b]},r);break;default:throw new Error("Unsupported value "+e[b])}p.push(_),f+=_.length,w.push(P),y+=P.length,++u}for(t[2][0].data=pr(u);b<t[7][0].data.length/2;++b)h.setUint16(b*2,65535,!0),g.setUint16(b*2,65535,!0);return t[6][0].data=Fl(p),t[3][0].data=Fl(w),u}function Sae(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Ks(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Vt(n)));var i=jg(r,{range:n,header:1}),o=["~Sh33tJ5~"];i.forEach(function(X){return X.forEach(function(K){typeof K=="string"&&o.push(K)})});var l={},u=[],h=_t.read(e.numbers,{type:"base64"});h.FileIndex.map(function(X,K){return[X,h.FullPaths[K]]}).forEach(function(X){var K=X[0],Y=X[1];if(K.type==2&&K.name.match(/\.iwa/)){var xe=K.content,le=ja(xe),fe=Ta(le);fe.forEach(function(ve){u.push(ve.id),l[ve.id]={deps:[],location:Y,type:Zr(ve.messages[0].meta[1][0].data)}})}}),u.sort(function(X,K){return X-K});var f=u.filter(function(X){return X>1}).map(function(X){return[X,pr(X)]});h.FileIndex.map(function(X,K){return[X,h.FullPaths[K]]}).forEach(function(X){var K=X[0];if(X[1],!!K.name.match(/\.iwa/)){var Y=Ta(ja(K.content));Y.forEach(function(xe){xe.messages.forEach(function(le){f.forEach(function(fe){xe.messages.some(function(ve){return Zr(ve.meta[1][0].data)!=11006&&dae(ve.data,fe[1])})&&l[fe[0]].deps.push(xe.id)})})})}});for(var p=_t.find(h,l[1].location),g=Ta(ja(p.content)),y,w=0;w<g.length;++w){var b=g[w];b.id==1&&(y=b)}var _=ls(or(y.messages[0].data)[1][0].data);for(p=_t.find(h,l[_].location),g=Ta(ja(p.content)),w=0;w<g.length;++w)b=g[w],b.id==_&&(y=b);for(_=ls(or(y.messages[0].data)[2][0].data),p=_t.find(h,l[_].location),g=Ta(ja(p.content)),w=0;w<g.length;++w)b=g[w],b.id==_&&(y=b);for(_=ls(or(y.messages[0].data)[2][0].data),p=_t.find(h,l[_].location),g=Ta(ja(p.content)),w=0;w<g.length;++w)b=g[w],b.id==_&&(y=b);var P=or(y.messages[0].data);{P[6][0].data=pr(n.e.r+1),P[7][0].data=pr(n.e.c+1);var A=ls(P[46][0].data),k=_t.find(h,l[A].location),F=Ta(ja(k.content));{for(var L=0;L<F.length&&F[L].id!=A;++L);if(F[L].id!=A)throw"Bad ColumnRowUIDMapArchive";var I=or(F[L].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var N=0;N<=n.e.c;++N){var T=[];T[1]=T[2]=[{type:0,data:pr(N+420690)}],I[1].push({type:2,data:Wn(T)}),I[2].push({type:0,data:pr(N)}),I[3].push({type:0,data:pr(N)})}I[4]=[],I[5]=[],I[6]=[];for(var R=0;R<=n.e.r;++R)T=[],T[1]=T[2]=[{type:0,data:pr(R+726270)}],I[4].push({type:2,data:Wn(T)}),I[5].push({type:0,data:pr(R)}),I[6].push({type:0,data:pr(R)});F[L].messages[0].data=Wn(I)}k.content=Hu($u(F)),k.size=k.content.length,delete P[46];var B=or(P[4][0].data);{B[7][0].data=pr(n.e.r+1);var z=or(B[1][0].data),O=ls(z[2][0].data);k=_t.find(h,l[O].location),F=Ta(ja(k.content));{if(F[0].id!=O)throw"Bad HeaderStorageBucket";var D=or(F[0].messages[0].data);for(R=0;R<i.length;++R){var ie=or(D[2][0].data);ie[1][0].data=pr(R),ie[4][0].data=pr(i[R].length),D[2][R]={type:D[2][0].type,data:Wn(ie)}}F[0].messages[0].data=Wn(D)}k.content=Hu($u(F)),k.size=k.content.length;var Z=ls(B[2][0].data);k=_t.find(h,l[Z].location),F=Ta(ja(k.content));{if(F[0].id!=Z)throw"Bad HeaderStorageBucket";for(D=or(F[0].messages[0].data),N=0;N<=n.e.c;++N)ie=or(D[2][0].data),ie[1][0].data=pr(N),ie[4][0].data=pr(n.e.r+1),D[2][N]={type:D[2][0].type,data:Wn(ie)};F[0].messages[0].data=Wn(D)}k.content=Hu($u(F)),k.size=k.content.length;var ne=ls(B[4][0].data);(function(){for(var X=_t.find(h,l[ne].location),K=Ta(ja(X.content)),Y,xe=0;xe<K.length;++xe){var le=K[xe];le.id==ne&&(Y=le)}var fe=or(Y.messages[0].data);{fe[3]=[];var ve=[];o.forEach(function(re,st){ve[1]=[{type:0,data:pr(st)}],ve[2]=[{type:0,data:pr(1)}],ve[3]=[{type:2,data:uae(re)}],fe[3].push({type:2,data:Wn(ve)})})}Y.messages[0].data=Wn(fe);var we=$u(K),We=Hu(we);X.content=We,X.size=X.content.length})();var H=or(B[3][0].data);{var Q=H[1][0];delete H[2];var q=or(Q.data);{var ae=ls(q[2][0].data);(function(){for(var X=_t.find(h,l[ae].location),K=Ta(ja(X.content)),Y,xe=0;xe<K.length;++xe){var le=K[xe];le.id==ae&&(Y=le)}var fe=or(Y.messages[0].data);{delete fe[6],delete H[7];var ve=new Uint8Array(fe[5][0].data);fe[5]=[];for(var we=0,We=0;We<=n.e.r;++We){var re=or(ve);we+=Eae(re,i[We],o),re[1][0].data=pr(We),fe[5].push({data:Wn(re),type:2})}fe[1]=[{type:0,data:pr(n.e.c+1)}],fe[2]=[{type:0,data:pr(n.e.r+1)}],fe[3]=[{type:0,data:pr(we)}],fe[4]=[{type:0,data:pr(n.e.r+1)}]}Y.messages[0].data=Wn(fe);var st=$u(K),Re=Hu(st);X.content=Re,X.size=X.content.length})()}Q.data=Wn(q)}B[3][0].data=Wn(H)}P[4][0].data=Wn(B)}y.messages[0].data=Wn(P);var U=$u(g),M=Hu(U);return p.content=M,p.size=p.content.length,h}function UP(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function d_(t){UP([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function h_(t){UP([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function kae(t){return Gt.WS.indexOf(t)>-1?"sheet":t==Gt.CS?"chart":t==Gt.DS?"dialog":t==Gt.MS?"macro":t&&t.length?t:"sheet"}function Tae(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,kae(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function jae(t,e,r,n,s,i,o,l,u,h,f,p){try{i[n]=pf(la(t,r,!0),e);var g=pn(t,e),y;switch(l){case"sheet":y=Yne(g,e,s,u,i[n],h,f,p);break;case"chart":if(y=Qne(g,e,s,u,i[n],h,f,p),!y||!y["!drawel"])break;var w=Yh(y["!drawel"].Target,e),b=Kf(w),_=OZ(la(t,w,!0),pf(la(t,b,!0),w)),P=Yh(_,w),A=Kf(P);y=Ene(la(t,P,!0),P,u,pf(la(t,A,!0),P),h,y);break;case"macro":y=Jne(g,e,s,u,i[n],h,f,p);break;case"dialog":y=Zne(g,e,s,u,i[n],h,f,p);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=y;var k=[];i&&i[n]&&en(i[n]).forEach(function(F){var L="";if(i[n][F].Type==Gt.CMNT){L=Yh(i[n][F].Target,e);var I=nse(pn(t,L,!0),L,u);if(!I||!I.length)return;nj(y,I,!1)}i[n][F].Type==Gt.TCMNT&&(L=Yh(i[n][F].Target,e),k=k.concat(VZ(pn(t,L,!0),u)))}),k&&k.length&&nj(y,k,!0,u.people||[])}catch(F){if(u.WTF)throw F}}function Sa(t){return t.charAt(0)=="/"?t.slice(1):t}function Aae(t,e){if(th(),e=e||{},d_(e),Ca(t,"META-INF/manifest.xml")||Ca(t,"objectdata.xml"))return mj(t,e);if(Ca(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof a1<"u"){if(t.FileIndex)return a1(t);var r=_t.utils.cfb_new();return E4(t).forEach(function(ie){Ut(r,ie,BK(t,ie))}),a1(r)}throw new Error("Unsupported NUMBERS file")}if(!Ca(t,"[Content_Types].xml"))throw Ca(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Ca(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=E4(t),s=RX(la(t,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",pn(t,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!pn(t,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var u={},h={};if(!e.bookSheets&&!e.bookProps){if(gf=[],s.sst)try{gf=rse(pn(t,Sa(s.sst)),s.sst,e)}catch(ie){if(e.WTF)throw ie}e.cellStyles&&s.themes.length&&(u=tse(la(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(h=ese(pn(t,Sa(s.style)),s.style,u,e))}s.links.map(function(ie){try{var Z=pf(la(t,Kf(Sa(ie))),ie);return ase(pn(t,Sa(ie)),Z,ie,e)}catch{}});var f=Xne(pn(t,Sa(s.workbooks[0])),s.workbooks[0],e),p={},g="";s.coreprops.length&&(g=pn(t,Sa(s.coreprops[0]),!0),g&&(p=A5(g)),s.extprops.length!==0&&(g=pn(t,Sa(s.extprops[0]),!0),g&&BX(g,p,e)));var y={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(g=la(t,Sa(s.custprops[0]),!0),g&&(y=zX(g,e)));var w={};if((e.bookSheets||e.bookProps)&&(f.Sheets?o=f.Sheets.map(function(Z){return Z.name}):p.Worksheets&&p.SheetNames.length>0&&(o=p.SheetNames),e.bookProps&&(w.Props=p,w.Custprops=y),e.bookSheets&&typeof o<"u"&&(w.SheetNames=o),e.bookSheets?w.SheetNames:e.bookProps))return w;o={};var b={};e.bookDeps&&s.calcchain&&(b=sse(pn(t,Sa(s.calcchain)),s.calcchain));var _=0,P={},A,k;{var F=f.Sheets;p.Worksheets=F.length,p.SheetNames=[];for(var L=0;L!=F.length;++L)p.SheetNames[L]=F[L].name}var I=i?"bin":"xml",N=s.workbooks[0].lastIndexOf("/"),T=(s.workbooks[0].slice(0,N+1)+"_rels/"+s.workbooks[0].slice(N+1)+".rels").replace(/^\//,"");Ca(t,T)||(T="xl/_rels/workbook."+I+".rels");var R=pf(la(t,T,!0),T.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=ise(pn(t,Sa(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=UZ(pn(t,Sa(s.people[0])),e)),R&&(R=Tae(R,f.Sheets));var B=pn(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(_=0;_!=p.Worksheets;++_){var z="sheet";if(R&&R[_]?(A="xl/"+R[_][1].replace(/[\/]?xl\//,""),Ca(t,A)||(A=R[_][1]),Ca(t,A)||(A=T.replace(/_rels\/.*$/,"")+R[_][1]),z=R[_][2]):(A="xl/worksheets/sheet"+(_+1-B)+"."+I,A=A.replace(/sheet0\./,"sheet.")),k=A.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(_!=e.sheets)continue e;break;case"string":if(p.SheetNames[_].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var O=!1,D=0;D!=e.sheets.length;++D)typeof e.sheets[D]=="number"&&e.sheets[D]==_&&(O=1),typeof e.sheets[D]=="string"&&e.sheets[D].toLowerCase()==p.SheetNames[_].toLowerCase()&&(O=1);if(!O)continue e}}jae(t,A,k,p.SheetNames[_],_,P,o,z,e,f,u,h)}return w={Directory:s,Workbook:f,Props:p,Custprops:y,Deps:b,Sheets:o,SheetNames:p.SheetNames,Strings:gf,Styles:h,Themes:u,SSF:Rr(jt)},e&&e.bookFiles&&(t.files?(w.keys=n,w.files=t.files):(w.keys=[],w.files={},t.FullPaths.forEach(function(ie,Z){ie=ie.replace(/^Root Entry[\/]/,""),w.keys.push(ie),w.files[ie]=t.FileIndex[Z]}))),e&&e.bookVBA&&(s.vba.length>0?w.vbaraw=pn(t,Sa(s.vba[0]),!0):s.defaults&&s.defaults.bin===XZ&&(w.vbaraw=pn(t,"xl/vbaProject.bin",!0))),w}function Cae(t,e){var r=e||{},n="Workbook",s=_t.find(t,n);try{if(n="/!DataSpaces/Version",s=_t.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(iJ(s.content),n="/!DataSpaces/DataSpaceMap",s=_t.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=lJ(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=_t.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=cJ(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=_t.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);dJ(s.content)}catch{}if(n="/EncryptionInfo",s=_t.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=hJ(s.content);if(n="/EncryptedPackage",s=_t.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Iae(t,e){return e.bookType=="ods"?BP(t,e):e.bookType=="numbers"?Sae(t,e):e.bookType=="xlsb"?Pae(t,e):Rae(t,e)}function Pae(t,e){sd=1024,t&&!t.SSF&&(t.SSF=Rr(jt)),t&&t.SSF&&(th(),Tx(t.SSF),e.revssf=Ax(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,xf?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=mP.indexOf(e.bookType)>-1,s=Qb();h_(e=e||{});var i=Ob(),o="",l=0;if(e.cellXfs=[],Wl(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Ut(i,o,C5(t.Props,e)),s.coreprops.push(o),gr(e.rels,2,o,Gt.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var u=[],h=0;h<t.SheetNames.length;++h)(t.Workbook.Sheets[h]||{}).Hidden!=2&&u.push(t.SheetNames[h]);t.Props.SheetNames=u}for(t.Props.Worksheets=t.Props.SheetNames.length,Ut(i,o,R5(t.Props)),s.extprops.push(o),gr(e.rels,3,o,Gt.EXT_PROPS),t.Custprops!==t.Props&&en(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Ut(i,o,D5(t.Custprops)),s.custprops.push(o),gr(e.rels,4,o,Gt.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var f={"!id":{}},p=t.Sheets[t.SheetNames[l-1]],g=(p||{})["!type"]||"sheet";switch(g){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Ut(i,o,lse(l-1,o,e,t,f)),s.sheets.push(o),gr(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Gt.WS[0])}if(p){var y=p["!comments"],w=!1,b="";y&&y.length>0&&(b="xl/comments"+l+"."+r,Ut(i,b,dse(y,b)),s.comments.push(b),gr(f,-1,"../comments"+l+"."+r,Gt.CMNT),w=!0),p["!legacy"]&&w&&Ut(i,"xl/drawings/vmlDrawing"+l+".vml",hP(l,p["!comments"])),delete p["!comments"],delete p["!legacy"]}f["!id"].rId1&&Ut(i,Kf(o),hd(f))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,Ut(i,o,use(e.Strings,o,e)),s.strs.push(o),gr(e.wbrels,-1,"sharedStrings."+r,Gt.SST)),o="xl/workbook."+r,Ut(i,o,ose(t,o)),s.workbooks.push(o),gr(e.rels,1,o,Gt.WB),o="xl/theme/theme1.xml",Ut(i,o,n_(t.Themes,e)),s.themes.push(o),gr(e.wbrels,-1,"theme/theme1.xml",Gt.THEME),o="xl/styles."+r,Ut(i,o,cse(t,o,e)),s.styles.push(o),gr(e.wbrels,-1,"styles."+r,Gt.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",Ut(i,o,t.vbaraw),s.vba.push(o),gr(e.wbrels,-1,"vbaProject.bin",Gt.VBA)),o="xl/metadata."+r,Ut(i,o,hse(o)),s.metadata.push(o),gr(e.wbrels,-1,"metadata."+r,Gt.XLMETA),Ut(i,"[Content_Types].xml",T5(s,e)),Ut(i,"_rels/.rels",hd(e.rels)),Ut(i,"xl/_rels/workbook."+r+".rels",hd(e.wbrels)),delete e.revssf,delete e.ssf,i}function Rae(t,e){sd=1024,t&&!t.SSF&&(t.SSF=Rr(jt)),t&&t.SSF&&(th(),Tx(t.SSF),e.revssf=Ax(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,xf?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=mP.indexOf(e.bookType)>-1,s=Qb();h_(e=e||{});var i=Ob(),o="",l=0;if(e.cellXfs=[],Wl(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Ut(i,o,C5(t.Props,e)),s.coreprops.push(o),gr(e.rels,2,o,Gt.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var u=[],h=0;h<t.SheetNames.length;++h)(t.Workbook.Sheets[h]||{}).Hidden!=2&&u.push(t.SheetNames[h]);t.Props.SheetNames=u}t.Props.Worksheets=t.Props.SheetNames.length,Ut(i,o,R5(t.Props)),s.extprops.push(o),gr(e.rels,3,o,Gt.EXT_PROPS),t.Custprops!==t.Props&&en(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Ut(i,o,D5(t.Custprops)),s.custprops.push(o),gr(e.rels,4,o,Gt.CUST_PROPS));var f=["SheetJ5"];for(e.tcid=0,l=1;l<=t.SheetNames.length;++l){var p={"!id":{}},g=t.Sheets[t.SheetNames[l-1]],y=(g||{})["!type"]||"sheet";switch(y){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Ut(i,o,SP(l-1,e,t,p)),s.sheets.push(o),gr(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Gt.WS[0])}if(g){var w=g["!comments"],b=!1,_="";if(w&&w.length>0){var P=!1;w.forEach(function(A){A[1].forEach(function(k){k.T==!0&&(P=!0)})}),P&&(_="xl/threadedComments/threadedComment"+l+"."+r,Ut(i,_,BZ(w,f,e)),s.threadedcomments.push(_),gr(p,-1,"../threadedComments/threadedComment"+l+"."+r,Gt.TCMNT)),_="xl/comments"+l+"."+r,Ut(i,_,fP(w)),s.comments.push(_),gr(p,-1,"../comments"+l+"."+r,Gt.CMNT),b=!0}g["!legacy"]&&b&&Ut(i,"xl/drawings/vmlDrawing"+l+".vml",hP(l,g["!comments"])),delete g["!comments"],delete g["!legacy"]}p["!id"].rId1&&Ut(i,Kf(o),hd(p))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,Ut(i,o,eP(e.Strings,e)),s.strs.push(o),gr(e.wbrels,-1,"sharedStrings."+r,Gt.SST)),o="xl/workbook."+r,Ut(i,o,CP(t)),s.workbooks.push(o),gr(e.rels,1,o,Gt.WB),o="xl/theme/theme1.xml",Ut(i,o,n_(t.Themes,e)),s.themes.push(o),gr(e.wbrels,-1,"theme/theme1.xml",Gt.THEME),o="xl/styles."+r,Ut(i,o,lP(t,e)),s.styles.push(o),gr(e.wbrels,-1,"styles."+r,Gt.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",Ut(i,o,t.vbaraw),s.vba.push(o),gr(e.wbrels,-1,"vbaProject.bin",Gt.VBA)),o="xl/metadata."+r,Ut(i,o,dP()),s.metadata.push(o),gr(e.wbrels,-1,"metadata."+r,Gt.XLMETA),f.length>1&&(o="xl/persons/person.xml",Ut(i,o,zZ(f)),s.people.push(o),gr(e.wbrels,-1,"persons/person.xml",Gt.PEOPLE)),Ut(i,"[Content_Types].xml",T5(s,e)),Ut(i,"_rels/.rels",hd(e.rels)),Ut(i,"xl/_rels/workbook."+r+".rels",hd(e.wbrels)),delete e.revssf,delete e.ssf,i}function f_(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=ma(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Dae(t,e){return _t.find(t,"EncryptedPackage")?Cae(t,e):DP(t,e)}function Fae(t,e){var r,n=t,s=e||{};return s.type||(s.type=Ht&&Buffer.isBuffer(t)?"buffer":"base64"),r=r5(n,s),Aae(r,s)}function zP(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return xw(t.slice(r),e);default:break e}return Fd.to_workbook(t,e)}function Lae(t,e){var r="",n=f_(t,e);switch(e.type){case"base64":r=ma(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Uc(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=vr(r)),e.type="binary",zP(r,e)}function Oae(t,e){var r=t;return e.type=="base64"&&(r=ma(r)),r=zf.utils.decode(1200,r.slice(2),"str"),e.type="binary",zP(r,e)}function Mae(t){return t.match(/[^\x00-\x7F]/)?ki(t):t}function i1(t,e,r,n){return n?(r.type="string",Fd.to_workbook(t,r)):Fd.to_workbook(e,r)}function ww(t,e){Pb();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return ww(new Uint8Array(t),(r=Rr(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),md={},r.dateNF&&(md.dateNF=r.dateNF),r.type||(r.type=Ht&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Ht?"buffer":"binary",n=PK(t),typeof Uint8Array<"u"&&!Ht&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=Mae(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Rr(r),r.type="array",ww(Rb(n),r)}switch((s=f_(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return Dae(_t.read(n,r),r);break;case 9:if(s[1]<=8)return DP(n,r);break;case 60:return xw(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return $Q(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return J5.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Fae(n,r):i1(t,n,r,i);case 239:return s[3]===60?xw(n,r):i1(t,n,r,i);case 255:if(s[1]===254)return Oae(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Tc.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Tc.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return gw.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return aP.to_workbook(n,r);break;case 10:case 13:case 32:return Lae(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return zQ.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?gw.to_workbook(n,r):i1(t,n,r,i)}function $P(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return P0(e.file,_t.write(t,{type:Ht?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return _t.write(t,e)}function Vae(t,e){var r=Rr(e||{}),n=Iae(t,r);return Bae(n,r)}function Bae(t,e){var r={},n=Ht?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var s=t.FullPaths?_t.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(kx(s))}return e.password&&typeof encrypt_agile<"u"?$P(encrypt_agile(s,e.password),e):e.type==="file"?P0(e.file,s):e.type=="string"?vr(s):s}function Uae(t,e){var r=e||{},n=Mse(t,r);return $P(n,r)}function Ni(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return $f(ki(n));case"binary":return ki(n);case"string":return t;case"file":return P0(e.file,n,"utf8");case"buffer":return Ht?Ao(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Ni(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function zae(t,e){switch(e.type){case"base64":return $f(t);case"binary":return t;case"string":return t;case"file":return P0(e.file,t,"binary");case"buffer":return Ht?Ao(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function vp(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?$f(r):e.type=="string"?vr(r):r;case"file":return P0(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function HP(t,e){Pb(),Dne(t);var r=Rr(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=HP(t,r);return r.type="array",kx(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=t.SheetNames.indexOf(r.sheet),!t.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Ni(Ise(t,r),r);case"slk":case"sylk":return Ni(Q5.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"htm":case"html":return Ni(LP(t.Sheets[t.SheetNames[s]],r),r);case"txt":return zae(WP(t.Sheets[t.SheetNames[s]],r),r);case"csv":return Ni(m_(t.Sheets[t.SheetNames[s]],r),r,"\uFEFF");case"dif":return Ni(J5.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"dbf":return vp(gw.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"prn":return Ni(Fd.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"rtf":return Ni(aP.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"eth":return Ni(Z5.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"fods":return Ni(BP(t,r),r);case"wk1":return vp(Tc.sheet_to_wk1(t.Sheets[t.SheetNames[s]],r),r);case"wk3":return vp(Tc.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),vp(FP(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Uae(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Vae(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function $ae(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function Hae(t,e,r){var n={};return n.type="file",n.file=e,$ae(n),HP(t,n)}function Wae(t,e,r,n,s,i,o,l){var u=ln(r),h=l.defval,f=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),p=!0,g=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:r,enumerable:!1})}catch{g.__rowNum__=r}else g.__rowNum__=r;if(!o||t[r])for(var y=e.s.c;y<=e.e.c;++y){var w=o?t[r][y]:t[n[y]+u];if(w===void 0||w.t===void 0){if(h===void 0)continue;i[y]!=null&&(g[i[y]]=h);continue}var b=w.v;switch(w.t){case"z":if(b==null)break;continue;case"e":b=b==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+w.t)}if(i[y]!=null){if(b==null)if(w.t=="e"&&b===null)g[i[y]]=null;else if(h!==void 0)g[i[y]]=h;else if(f&&b===null)g[i[y]]=null;else continue;else g[i[y]]=f&&(w.t!=="n"||w.t==="n"&&l.rawNumbers!==!1)?b:Eo(w,b,l);b!=null&&(p=!1)}}return{row:g,isempty:p}}function jg(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],o=0,l="",u={s:{r:0,c:0},e:{r:0,c:0}},h=e||{},f=h.range!=null?h.range:t["!ref"];switch(h.header===1?n=1:h.header==="A"?n=2:Array.isArray(h.header)?n=3:h.header==null&&(n=0),typeof f){case"string":u=sr(f);break;case"number":u=sr(t["!ref"]),u.s.r=f;break;default:u=f}n>0&&(s=0);var p=ln(u.s.r),g=[],y=[],w=0,b=0,_=Array.isArray(t),P=u.s.r,A=0,k={};_&&!t[P]&&(t[P]=[]);var F=h.skipHidden&&t["!cols"]||[],L=h.skipHidden&&t["!rows"]||[];for(A=u.s.c;A<=u.e.c;++A)if(!(F[A]||{}).hidden)switch(g[A]=$r(A),r=_?t[P][A]:t[g[A]+p],n){case 1:i[A]=A-u.s.c;break;case 2:i[A]=g[A];break;case 3:i[A]=h.header[A-u.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Eo(r,null,h),b=k[o]||0,!b)k[o]=1;else{do l=o+"_"+b++;while(k[l]);k[o]=b,k[l]=1}i[A]=l}for(P=u.s.r+s;P<=u.e.r;++P)if(!(L[P]||{}).hidden){var I=Wae(t,u,P,g,n,i,_,h);(I.isempty===!1||(n===1?h.blankrows!==!1:h.blankrows))&&(y[w++]=I.row)}return y.length=w,y}var yj=/"/g;function qae(t,e,r,n,s,i,o,l){for(var u=!0,h=[],f="",p=ln(r),g=e.s.c;g<=e.e.c;++g)if(n[g]){var y=l.dense?(t[r]||[])[g]:t[n[g]+p];if(y==null)f="";else if(y.v!=null){u=!1,f=""+(l.rawNumbers&&y.t=="n"?y.v:Eo(y,null,l));for(var w=0,b=0;w!==f.length;++w)if((b=f.charCodeAt(w))===s||b===i||b===34||l.forceQuotes){f='"'+f.replace(yj,'""')+'"';break}f=="ID"&&(f='"ID"')}else y.f!=null&&!y.F?(u=!1,f="="+y.f,f.indexOf(",")>=0&&(f='"'+f.replace(yj,'""')+'"')):f="";h.push(f)}return l.blankrows===!1&&u?null:h.join(o)}function m_(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=sr(t["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,u=l.charCodeAt(0),h=new RegExp((i=="|"?"\\|":i)+"+$"),f="",p=[];n.dense=Array.isArray(t);for(var g=n.skipHidden&&t["!cols"]||[],y=n.skipHidden&&t["!rows"]||[],w=s.s.c;w<=s.e.c;++w)(g[w]||{}).hidden||(p[w]=$r(w));for(var b=0,_=s.s.r;_<=s.e.r;++_)(y[_]||{}).hidden||(f=qae(t,s,_,p,o,u,i,n),f!=null&&(n.strip&&(f=f.replace(h,"")),(f||n.blankrows!==!1)&&r.push((b++?l:"")+f)));return delete n.dense,r.join("")}function WP(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=m_(t,e);return r}function Gae(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=sr(t["!ref"]),i="",o=[],l,u=[],h=Array.isArray(t);for(l=s.s.c;l<=s.e.c;++l)o[l]=$r(l);for(var f=s.s.r;f<=s.e.r;++f)for(i=ln(f),l=s.s.c;l<=s.e.c;++l)if(e=o[l]+i,r=h?(t[f]||[])[l]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}u[u.length]=e+"="+n}return u}function qP(t,e,r){var n=r||{},s=+!n.skipHeader,i=t||{},o=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var u=typeof n.origin=="string"?Hr(n.origin):n.origin;o=u.r,l=u.c}var h,f={s:{c:0,r:0},e:{c:l,r:o+e.length-1+s}};if(i["!ref"]){var p=sr(i["!ref"]);f.e.c=Math.max(f.e.c,p.e.c),f.e.r=Math.max(f.e.r,p.e.r),o==-1&&(o=p.e.r+1,f.e.r=o+e.length-1+s)}else o==-1&&(o=0,f.e.r=e.length-1+s);var g=n.header||[],y=0;e.forEach(function(b,_){en(b).forEach(function(P){(y=g.indexOf(P))==-1&&(g[y=g.length]=P);var A=b[P],k="z",F="",L=At({c:l+y,r:o+_+s});h=t0(i,L),A&&typeof A=="object"&&!(A instanceof Date)?i[L]=A:(typeof A=="number"?k="n":typeof A=="boolean"?k="b":typeof A=="string"?k="s":A instanceof Date?(k="d",n.cellDates||(k="n",A=kn(A)),F=n.dateNF||jt[14]):A===null&&n.nullError&&(k="e",A=0),h?(h.t=k,h.v=A,delete h.w,delete h.R,F&&(h.z=F)):i[L]=h={t:k,v:A},F&&(h.z=F))})}),f.e.c=Math.max(f.e.c,l+g.length-1);var w=ln(o);if(s)for(y=0;y<g.length;++y)i[$r(y+l)+w]={t:"s",v:g[y]};return i["!ref"]=Vt(f),i}function Kae(t,e){return qP(null,t,e)}function t0(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Hr(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?t0(t,At(e)):t0(t,At({r:e,c:r||0}))}function Xae(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function p_(){return{SheetNames:[],Sheets:{}}}function g_(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=o+s)!=-1;++s);}if(AP(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Yae(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=Xae(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Qae(t,e){return t.z=e,t}function GP(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Jae(t,e,r){return GP(t,"#"+e,r)}function Zae(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function eie(t,e,r,n){for(var s=typeof e!="string"?e:sr(e),i=typeof e=="string"?e:Vt(e),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var u=t0(t,o,l);u.t="n",u.F=i,delete u.v,o==s.s.r&&l==s.s.c&&(u.f=r,n&&(u.D=!0))}return t}var yp={encode_col:$r,encode_row:ln,encode_cell:At,encode_range:Vt,decode_col:Wb,decode_row:Hb,split_cell:uX,decode_cell:Hr,decode_range:Ks,format_cell:Eo,sheet_add_aoa:w5,sheet_add_json:qP,sheet_add_dom:OP,aoa_to_sheet:rh,json_to_sheet:Kae,table_to_sheet:MP,table_to_book:iae,sheet_to_csv:m_,sheet_to_txt:WP,sheet_to_json:jg,sheet_to_html:LP,sheet_to_formulae:Gae,sheet_to_row_object_array:jg,sheet_get_cell:t0,book_new:p_,book_append_sheet:g_,book_set_sheet_visibility:Yae,cell_set_number_format:Qae,cell_set_hyperlink:GP,cell_set_internal_link:Jae,cell_add_comment:Zae,sheet_set_array_formula:eie,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const KP=()=>{const[t,e]=S.useState(null),[r,n]=S.useState({}),[s,i]=S.useState(0),[o,l]=S.useState(!1),[u,h]=S.useState(null),[f,p]=S.useState([]),[g,y]=S.useState([]),w={email:"",firstName:"",lastName:"",age:"",sex:"",role:"student"},b=["email","firstName","lastName"],_=async O=>{try{const D=`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,ie=P(),Z=O.role||"student",ne={uid:D,email:O.email.toLowerCase(),displayName:`${O.firstName} ${O.lastName}`,role:Z,firstName:O.firstName,lastName:O.lastName,age:O.age?parseInt(O.age):null,sex:O.sex||null,password:ie,hasFirebaseAuth:!1,isActive:!0,createdAt:Lt(),lastLogin:null,lastActivityDate:Lt(),updatedAt:Lt()};return Z==="student"?(ne.progress={1:{completed:!1,score:0,completedAt:null,temporary:!1,lastSlide:0,pagesEngaged:[],lastActivity:new Date}},ne.completedLessons=[],ne.currentLesson=1,ne.totalTimeSpent=0,ne.totalPagesEngaged=0,ne.achievements=[],ne.streak=0):Z==="teacher"?(ne.teacherClasses=[],ne.teacherPermissions=["manage_students","view_analytics","add_comments"],ne.teacherSettings={defaultClassId:null,notificationPreferences:{emailNotifications:!0,studentProgressAlerts:!0,classUpdates:!0}}):Z==="system_manager"&&(ne.systemManagerPermissions=["manage_users","manage_content","manage_system","view_logs","import_data","export_data"],ne.systemManagerSettings={defaultLanguage:"he",notificationPreferences:{emailNotifications:!0,systemAlerts:!0,userActivityReports:!0}}),await _n(wt(ze,"users",D),ne),Wr("USER_CREATED_VIA_IMPORT",{userId:D,userEmail:O.email,userRole:Z,createdBy:"system_manager",timestamp:new Date().toISOString()}),console.log(" User created via import:",D,"Role:",Z),{success:!0,userId:D,password:ie}}catch(D){throw console.error("Error creating user:",D),new Error(A(D))}},P=()=>{const O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let D="";for(let ie=0;ie<12;ie++)D+=O.charAt(Math.floor(Math.random()*O.length));return D},A=O=>O.code==="permission-denied"?"   ":O.message&&O.message.includes("already exists")?"    ":O.message&&O.message.includes("invalid")?"  ":"   ",k=S.useCallback(O=>{const D=O[0];if(!D)return;const ie=new FileReader;ie.onload=Z=>{try{const ne=ww(Z.target.result,{type:"binary"}),H=ne.SheetNames[0],Q=ne.Sheets[H],q=yp.sheet_to_json(Q,{header:1});if(q.length<2){Ie.error("        ");return}const ae=q[0],U=q.slice(1).filter(X=>X.some(K=>K!==null&&K!=="")),M={};ae.forEach((X,K)=>{const Y=X==null?void 0:X.toString().toLowerCase();Y.includes("email")||Y.includes("")?M.email=K:Y.includes("first")||Y.includes("")?M.firstName=K:Y.includes("last")||Y.includes("")?M.lastName=K:Y.includes("age")||Y.includes("")?M.age=K:(Y.includes("sex")||Y.includes("gender")||Y.includes(""))&&(M.sex=K)}),e({headers:ae,rows:U,fileName:D.name}),n(M),y(U.slice(0,5)),p([]),h(null),i(0),Ie.success(`  : ${U.length}  `)}catch(ne){console.error("Error reading Excel file:",ne),Ie.error("   ")}},ie.readAsBinaryString(D)},[]),{getRootProps:F,getInputProps:L,isDragActive:I}=M6({onDrop:k,accept:{"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"]},multiple:!1}),N=()=>{if(!t)return!1;const O=[];return t.rows.forEach((D,ie)=>{const Z={};if(Object.entries(r).forEach(([ne,H])=>{H!==""&&H!==null&&(Z[ne]=D[H])}),b.forEach(ne=>{(!Z[ne]||Z[ne].toString().trim()==="")&&O.push(` ${ie+2}:  ${ne} `)}),Z.email&&!T(Z.email)&&O.push(` ${ie+2}:    `),Z.age){const ne=parseInt(Z.age);(isNaN(ne)||ne<5||ne>18)&&O.push(` ${ie+2}:    (5-18)`)}if(Z.sex){const ne=Z.sex.toString().toLowerCase();["male","female","","","m","f"].includes(ne)||O.push(` ${ie+2}:    `)}}),p(O),O.length===0},T=O=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O),R=async()=>{if(!N()){Ie.error(` ${f.length} .     .`);return}l(!0),i(0);try{const O={total:t.rows.length,success:0,failed:0,errors:[]};for(let D=0;D<t.rows.length;D++){const ie=t.rows[D],Z={};Object.entries(r).forEach(([ne,H])=>{H!==""&&H!==null&&(Z[ne]=ie[H])});try{await _(Z),O.success++}catch(ne){O.failed++,O.errors.push(` ${D+2}: ${ne.message}`)}i((D+1)/t.rows.length*100)}h(O),O.success>0&&Ie.success(` ${O.success}  `),O.failed>0&&Ie.error(`${O.failed}   `)}catch(O){console.error("Import error:",O),Ie.error("   ")}finally{l(!1)}},B=()=>{e(null),n({}),i(0),l(!1),h(null),p([]),y([])},z=()=>{const O=[["email","firstName","lastName","age","sex"],["student1@example.com","","","12","male"],["student2@example.com","","","11","female"]],D=yp.aoa_to_sheet(O),ie=yp.book_new();yp.book_append_sheet(ie,D,"Template"),Hae(ie,"user_import_template.xlsx")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"   Excel"}),a.jsx("p",{className:"text-gray-300",children:"    Excel"})]}),a.jsxs(ut,{onClick:z,variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(fx,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})]}),a.jsx(rt,{variant:"dark",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{...F(),className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ${I?"border-blue-500 bg-blue-500/10":"border-gray-600 hover:border-gray-500"}`,children:[a.jsx("input",{...L()}),t?a.jsxs("div",{children:[a.jsx(kB,{className:"w-12 h-12 mx-auto mb-4 text-green-400"}),a.jsx("p",{className:"text-lg text-white mb-2",children:t.fileName}),a.jsxs("p",{className:"text-gray-400 text-sm",children:[t.rows.length,"  "]})]}):a.jsxs("div",{children:[a.jsx(B2,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-lg text-white mb-2",children:I?"   ":"  Excel    "}),a.jsx("p",{className:"text-gray-400 text-sm",children:"  .xlsx -.xls"})]})]})})}),t&&a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(VB,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(w).map(([O,D])=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-300 text-sm mb-2",children:[O==="email"&&"",O==="firstName"&&" ",O==="lastName"&&" ",O==="age"&&"",O==="sex"&&"",O==="role"&&"",b.includes(O)&&a.jsx("span",{className:"text-red-400",children:"*"})]}),O==="role"?a.jsxs("select",{value:r[O]||D,onChange:ie=>n({...r,[O]:ie.target.value}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"student",children:""}),a.jsx("option",{value:"teacher",children:""})]}):a.jsxs("select",{value:r[O]||"",onChange:ie=>n({...r,[O]:ie.target.value}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"",children:" "}),t.headers.map((ie,Z)=>a.jsxs("option",{value:Z,children:[ie," ( ",Z+1,")"]},Z))]})]},O))})]})}),f.length>0&&a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-red-400 mb-4 flex items-center space-x-2",children:[a.jsx(vs,{className:"w-5 h-5"}),a.jsxs("span",{children:["  (",f.length,")"]})]}),a.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2",children:f.map((O,D)=>a.jsx("div",{className:"text-red-400 text-sm p-2 bg-red-500/10 rounded",children:O},D))})]})}),t&&g.length>0&&a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Da,{className:"w-5 h-5"}),a.jsx("span",{children:"  (5  )"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsx("tr",{className:"border-b border-gray-700",children:t.headers.map((O,D)=>a.jsx("th",{className:"text-right p-2 text-gray-300",children:O},D))})}),a.jsx("tbody",{children:g.map((O,D)=>a.jsx("tr",{className:"border-b border-gray-700",children:O.map((ie,Z)=>a.jsx("td",{className:"p-2 text-gray-300",children:ie||"-"},Z))},D))})]})})]})}),o&&a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Cs,{className:"w-5 h-5 animate-spin"}),a.jsx("span",{children:" ..."})]}),a.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mb-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})}),a.jsxs("p",{className:"text-gray-300 text-sm",children:[Math.round(s),"% "]})]})}),u&&a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Qt,{className:"w-5 h-5 text-green-400"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:u.total}),a.jsx("div",{className:"text-gray-300 text-sm",children:'"'})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400",children:u.success}),a.jsx("div",{className:"text-gray-300 text-sm",children:" "})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-400",children:u.failed}),a.jsx("div",{className:"text-gray-300 text-sm",children:""})]})]}),u.errors.length>0&&a.jsxs("div",{className:"max-h-40 overflow-y-auto space-y-2",children:[a.jsx("h4",{className:"text-red-400 font-semibold",children:":"}),u.errors.map((O,D)=>a.jsx("div",{className:"text-red-400 text-sm p-2 bg-red-500/10 rounded",children:O},D))]})]})}),t&&a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(ut,{onClick:R,disabled:o||f.length>0,variant:"primary",className:"flex items-center space-x-2",children:o?a.jsxs(a.Fragment,{children:[a.jsx(Cs,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Sn,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})}),a.jsxs(ut,{onClick:B,variant:"secondary",className:"flex items-center space-x-2",children:[a.jsx(zr,{className:"w-4 h-4"}),a.jsx("span",{children:""})]})]})]})},XP=()=>{const[t,e]=S.useState({systemName:"Israel Cyber Campus",defaultLanguage:"he",maintenanceMode:!1,emailNotifications:!0,maxFileSize:10,sessionTimeout:30,theme:"dark",maxUsersPerSession:50,enableLiveSessions:!0,enableAnalytics:!0,securityLevel:"high"}),[r,n]=S.useState(!0),[s,i]=S.useState(!1),[o,l]=S.useState({database:"checking",auth:"checking",storage:"checking",realtime:"checking"});S.useEffect(()=>{u(),h();const g=wt(ze,"system","settings"),y=Kd(g,w=>{if(w.exists()){const b=w.data();e(_=>({..._,...b}))}},w=>{console.error("Error listening to settings changes:",w)});return()=>y()},[]);const u=async()=>{try{n(!0),console.log(" Loading system settings from Firebase...");const g=wt(ze,"system","settings"),y=await dr(g);if(y.exists()){const w=y.data();e(b=>({...b,...w})),console.log(" Settings loaded from database")}else console.log(" Creating default system settings..."),await _n(g,t),console.log(" Default settings created")}catch(g){console.error(" Error loading settings:",g),Ie.error("    ")}finally{n(!1)}},h=async()=>{try{console.log(" Checking system status...");try{await dr(wt(ze,"system","health")),l(g=>({...g,database:"online"}))}catch{l(y=>({...y,database:"offline"}))}try{await dr(wt(ze,"users","health-check")),l(g=>({...g,auth:"online"}))}catch{l(y=>({...y,auth:"online"}))}l(g=>({...g,storage:"online"}));try{const g=wt(ze,"system","realtime-test");await _n(g,{timestamp:new Date}),await dr(g),l(y=>({...y,realtime:"online"}))}catch{l(y=>({...y,realtime:"offline"}))}console.log(" System status check completed")}catch(g){console.error(" Error checking system status:",g)}},f=async()=>{try{i(!0),console.log(" Saving system settings...");const g=wt(ze,"system","settings");await _n(g,{...t,updatedAt:new Date,updatedBy:"system_manager"}),Ie.success("   "),console.log(" Settings saved successfully")}catch(g){console.error(" Error saving settings:",g),Ie.error("    ")}finally{i(!1)}},p=g=>{const y={online:{icon:Qt,color:"text-green-400",text:""},offline:{icon:li,color:"text-red-400",text:" "},checking:{icon:Cs,color:"text-yellow-400",text:"..."}};return y[g]||y.checking};return r?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h2",{className:"text-2xl font-bold text-white",children:" "})}),a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Jn,{size:"lg"})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:" "}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(ut,{onClick:h,variant:"secondary",className:"flex items-center space-x-2",children:[a.jsx(Cs,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]}),a.jsx(ut,{onClick:f,variant:"primary",disabled:s,className:"flex items-center space-x-2",children:s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Yd,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Rf,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsx("input",{type:"text",value:t.systemName,onChange:g=>e({...t,systemName:g.target.value}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"  "}),a.jsxs("select",{value:t.defaultLanguage,onChange:g=>e({...t,defaultLanguage:g.target.value}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"he",children:""}),a.jsx("option",{value:"en",children:"English"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsxs("select",{value:t.theme,onChange:g=>e({...t,theme:g.target.value}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"dark",children:""}),a.jsx("option",{value:"light",children:""})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:" "}),a.jsxs("select",{value:t.securityLevel,onChange:g=>e({...t,securityLevel:g.target.value}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"low",children:""}),a.jsx("option",{value:"medium",children:""}),a.jsx("option",{value:"high",children:""})]})]})]})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Qn,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:" "}),a.jsx("input",{type:"checkbox",checked:t.maintenanceMode,onChange:g=>e({...t,maintenanceMode:g.target.checked}),className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"   ()"}),a.jsx("input",{type:"number",value:t.sessionTimeout,onChange:g=>e({...t,sessionTimeout:parseInt(g.target.value)}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"   (MB)"}),a.jsx("input",{type:"number",value:t.maxFileSize,onChange:g=>e({...t,maxFileSize:parseInt(g.target.value)}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"  "}),a.jsx("input",{type:"number",value:t.maxUsersPerSession,onChange:g=>e({...t,maxUsersPerSession:parseInt(g.target.value)}),className:"w-full px-3 py-2 bg-gray-700 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"})]})]})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(A3,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:" "}),a.jsx("input",{type:"checkbox",checked:t.emailNotifications,onChange:g=>e({...t,emailNotifications:g.target.checked}),className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:" "}),a.jsx("input",{type:"checkbox",checked:t.enableLiveSessions,onChange:g=>e({...t,enableLiveSessions:g.target.checked}),className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:""}),a.jsx("input",{type:"checkbox",checked:t.enableAnalytics,onChange:g=>e({...t,enableAnalytics:g.target.checked}),className:"rounded border-gray-600 bg-gray-700 text-blue-500 focus:ring-blue-500"})]})]})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(hx,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"space-y-4",children:[Object.entries(o).map(([g,y])=>{const w=p(y),b=w.icon;return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300 capitalize",children:g==="database"?" ":g==="auth"?" ":g==="storage"?" ":g==="realtime"?" ":g}),a.jsxs("div",{className:`flex items-center space-x-2 ${w.color}`,children:[a.jsx(b,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:w.text})]})]},g)}),a.jsx("div",{className:"pt-4 border-t border-gray-600",children:a.jsx("div",{className:"text-sm text-gray-400",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Qt,{className:"w-4 h-4 text-green-400"}),a.jsx("span",{children:"  "})]})})})]})]})})]}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(_o,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:" :"}),a.jsx("span",{className:"text-white ml-2",children:t.systemName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:":"}),a.jsx("span",{className:"text-white ml-2",children:t.defaultLanguage==="he"?"":"English"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:" :"}),a.jsx("span",{className:`ml-2 ${t.maintenanceMode?"text-red-400":"text-green-400"}`,children:t.maintenanceMode?"":" "})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:" :"}),a.jsx("span",{className:`ml-2 ${t.enableLiveSessions?"text-green-400":"text-red-400"}`,children:t.enableLiveSessions?"":" "})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:":"}),a.jsx("span",{className:`ml-2 ${t.enableAnalytics?"text-green-400":"text-red-400"}`,children:t.enableAnalytics?"":" "})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:" :"}),a.jsx("span",{className:"text-white ml-2 capitalize",children:t.securityLevel})]})]})]})})]})},YP=()=>{const[t,e]=S.useState([]),[r,n]=S.useState(!0),[s,i]=S.useState("all"),[o,l]=S.useState(""),[u,h]=S.useState(null),[f,p]=S.useState(!0);S.useEffect(()=>{g()},[]);const g=async(A=!1)=>{try{A||n(!0),console.log(" Loading system logs from Firebase...");const k=Ft(ze,"securityEvents");let F=nr(k,ua("timestamp","desc"),no(50));A&&u&&(F=nr(k,ua("timestamp","desc"),M1(u),no(50)));const L=await zt(F),I=Ft(ze,"userActivities");let N=nr(I,ua("timestamp","desc"),no(50));A&&u&&(N=nr(I,ua("timestamp","desc"),M1(u),no(50)));const T=await zt(N),R=[];L.forEach(O=>{var ie,Z;const D=O.data();R.push({id:`security_${O.id}`,type:D.severity||"info",message:D.description||D.event,timestamp:((Z=(ie=D.timestamp)==null?void 0:ie.toDate)==null?void 0:Z.call(ie))||new Date,userId:D.userId||D.userEmail,action:D.eventType||"security_event",source:"security",details:D})}),T.forEach(O=>{var ie,Z;const D=O.data();R.push({id:`activity_${O.id}`,type:D.type||"info",message:D.description||D.action,timestamp:((Z=(ie=D.timestamp)==null?void 0:ie.toDate)==null?void 0:Z.call(ie))||new Date,userId:D.userId||D.userEmail,action:D.action||"user_activity",source:"activity",details:D})}),R.sort((O,D)=>D.timestamp-O.timestamp),e(A?O=>[...O,...R]:R);const B=L.docs[L.docs.length-1],z=T.docs[T.docs.length-1];h(B||z),p(L.docs.length===50||T.docs.length===50),console.log(` Loaded ${R.length} system logs`),A||n(!1)}catch(k){console.error(" Error loading system logs:",k),Ie.error("    "),n(!1)}},y=()=>{f&&!r&&g(!0)},w=()=>{h(null),p(!0),g()},b=()=>{try{const A=[["Type","Message","User","Action","Timestamp"],...P.map(I=>[I.type,I.message,I.userId||"System",I.action,I.timestamp.toLocaleString("he-IL")])].map(I=>I.map(N=>`"${N}"`).join(",")).join(`
`),k=new Blob([A],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a"),L=URL.createObjectURL(k);F.setAttribute("href",L),F.setAttribute("download",`system_logs_${new Date().toISOString().split("T")[0]}.csv`),F.style.visibility="hidden",document.body.appendChild(F),F.click(),document.body.removeChild(F),Ie.success("   ")}catch(A){console.error("Error exporting logs:",A),Ie.error("   ")}},_=A=>{const k={info:{icon:_k,color:"text-blue-400",bgColor:"bg-blue-500/10"},warning:{icon:vs,color:"text-yellow-400",bgColor:"bg-yellow-500/10"},success:{icon:Qt,color:"text-green-400",bgColor:"bg-green-500/10"},error:{icon:li,color:"text-red-400",bgColor:"bg-red-500/10"},security:{icon:Qn,color:"text-purple-400",bgColor:"bg-purple-500/10"}};return k[A]||k.info},P=t.filter(A=>{const k=s==="all"||A.type===s,F=A.message.toLowerCase().includes(o.toLowerCase())||A.userId&&A.userId.toLowerCase().includes(o.toLowerCase());return k&&F});return r&&t.length===0?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h2",{className:"text-2xl font-bold text-white",children:" "})}),a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Jn,{size:"lg"})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:" "}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(ut,{onClick:w,variant:"secondary",className:"flex items-center space-x-2",children:[a.jsx(Cs,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsxs(ut,{onClick:b,variant:"secondary",className:"flex items-center space-x-2",children:[a.jsx(fx,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})]})]}),a.jsx(rt,{variant:"dark",children:a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:" ...",value:o,onChange:A=>l(A.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none"})]})}),a.jsx("div",{className:"md:w-48",children:a.jsxs("select",{value:s,onChange:A=>i(A.target.value),className:"w-full px-3 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"all",children:" "}),a.jsx("option",{value:"info",children:""}),a.jsx("option",{value:"warning",children:""}),a.jsx("option",{value:"success",children:""}),a.jsx("option",{value:"error",children:""}),a.jsx("option",{value:"security",children:""})]})})]})})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-700",children:[a.jsx("th",{className:"text-right p-4 text-gray-300",children:""}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:""}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:""}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:""}),a.jsx("th",{className:"text-right p-4 text-gray-300",children:""})]})}),a.jsx("tbody",{children:P.map(A=>{const k=_(A.type),F=k.icon;return a.jsxs("tr",{className:"border-b border-gray-700 hover:bg-gray-700/50",children:[a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:`flex items-center space-x-2 ${k.color}`,children:[a.jsx(F,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm capitalize",children:A.type})]})}),a.jsx("td",{className:"p-4",children:a.jsx("div",{className:"text-white text-sm",children:A.message})}),a.jsx("td",{className:"p-4",children:a.jsx("div",{className:"text-gray-300 text-sm",children:A.userId||""})}),a.jsx("td",{className:"p-4",children:a.jsx("div",{className:"text-gray-400 text-sm",children:A.action})}),a.jsx("td",{className:"p-4",children:a.jsx("div",{className:"text-gray-400 text-sm",children:A.timestamp.toLocaleString("he-IL")})})]},A.id)})})]}),P.length===0&&!r&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(SB,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-400",children:"  "})]}),f&&a.jsx("div",{className:"text-center py-4",children:a.jsx(ut,{onClick:y,variant:"secondary",disabled:r,children:r?"...":"  "})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center p-4",children:[a.jsx(_k,{className:"w-8 h-8 mx-auto mb-2 text-blue-400"}),a.jsx("div",{className:"text-2xl font-bold text-white",children:t.filter(A=>A.type==="info").length}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center p-4",children:[a.jsx(vs,{className:"w-8 h-8 mx-auto mb-2 text-yellow-400"}),a.jsx("div",{className:"text-2xl font-bold text-white",children:t.filter(A=>A.type==="warning").length}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center p-4",children:[a.jsx(Qt,{className:"w-8 h-8 mx-auto mb-2 text-green-400"}),a.jsx("div",{className:"text-2xl font-bold text-white",children:t.filter(A=>A.type==="success").length}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center p-4",children:[a.jsx(li,{className:"w-8 h-8 mx-auto mb-2 text-red-400"}),a.jsx("div",{className:"text-2xl font-bold text-white",children:t.filter(A=>A.type==="error").length}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center p-4",children:[a.jsx(Qn,{className:"w-8 h-8 mx-auto mb-2 text-purple-400"}),a.jsx("div",{className:"text-2xl font-bold text-white",children:t.filter(A=>A.type==="security").length}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})})]})]})},tie=()=>{var A,k,F,L,I,N,T,R,B,z,O,D,ie,Z,ne,H,Q,q,ae;const[t,e]=S.useState(null),[r,n]=S.useState(null),[s,i]=S.useState(null),[o,l]=S.useState(!0),[u,h]=S.useState("7d"),[f,p]=S.useState(!1),[g,y]=S.useState(!1);S.useEffect(()=>{w()},[u]);const w=async()=>{try{l(!0),console.log(" Loading comprehensive analytics...");const[U,M,X]=await Promise.all([k6(!0),Mq(u),Lq()]);e(U),n(M),i(X),console.log(" Analytics loaded successfully")}catch(U){console.error(" Error loading analytics:",U),Ie.error("   ")}finally{l(!1)}},b=async(U="all")=>{var M,X,K,Y,xe,le,fe;try{y(!0),console.log(" Exporting analytics data...");const ve=await Vq(U),we=[["Metric","Value","Timestamp"],["Total Users",((M=t==null?void 0:t.users)==null?void 0:M.total)||0,new Date().toISOString()],["Active Users",((X=t==null?void 0:t.users)==null?void 0:X.active)||0,new Date().toISOString()],["Total Lessons",((K=t==null?void 0:t.content)==null?void 0:K.totalLessons)||0,new Date().toISOString()],["Total Sessions",((Y=t==null?void 0:t.sessions)==null?void 0:Y.total)||0,new Date().toISOString()],["Active Sessions",((xe=t==null?void 0:t.sessions)==null?void 0:xe.active)||0,new Date().toISOString()],["User Growth Rate",`${((le=t==null?void 0:t.users)==null?void 0:le.growthRate)||0}%`,new Date().toISOString()],["Session Completion Rate",`${((fe=t==null?void 0:t.sessions)==null?void 0:fe.completionRate)||0}%`,new Date().toISOString()]].map(Re=>Re.map(he=>`"${he}"`).join(",")).join(`
`),We=new Blob([we],{type:"text/csv;charset=utf-8;"}),re=document.createElement("a"),st=URL.createObjectURL(We);re.setAttribute("href",st),re.setAttribute("download",`system_analytics_${new Date().toISOString().split("T")[0]}.csv`),re.style.visibility="hidden",document.body.appendChild(re),re.click(),document.body.removeChild(re),Ie.success("  ")}catch(ve){console.error(" Error exporting analytics:",ve),Ie.error("   ")}finally{y(!1)}},_=(U,M)=>{if(!M||M===0)return{icon:Ek,color:"text-gray-400",text:"  "};const X=(U-M)/M*100;return X>5?{icon:gx,color:"text-green-400",text:`+${X.toFixed(1)}%`}:X<-5?{icon:KB,color:"text-red-400",text:`${X.toFixed(1)}%`}:{icon:Ek,color:"text-yellow-400",text:`${X.toFixed(1)}%`}},P=({title:U,value:M,icon:X,trend:K,color:Y="blue",subtitle:xe})=>{const le=K?_(K.current,K.previous):null,fe=le==null?void 0:le.icon;return a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-lg bg-${Y}-500/20 flex items-center justify-center`,children:a.jsx(X,{className:`w-6 h-6 text-${Y}-400`})}),le&&a.jsxs("div",{className:`flex items-center space-x-2 ${le.color}`,children:[a.jsx(fe,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:le.text})]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("div",{className:"text-3xl font-bold text-white",children:M}),a.jsx("div",{className:"text-sm text-gray-300",children:U})]}),xe&&a.jsx("div",{className:"text-xs text-gray-400",children:xe})]})})};return o?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h2",{className:"text-2xl font-bold text-white",children:" "})}),a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Jn,{size:"lg"})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:" "}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("select",{value:u,onChange:U=>h(U.target.value),className:"px-3 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"24h",children:"24 "}),a.jsx("option",{value:"7d",children:"7 "}),a.jsx("option",{value:"30d",children:"30 "})]}),a.jsxs(ut,{onClick:w,variant:"secondary",className:"flex items-center space-x-2",children:[a.jsx(Cs,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsx(ut,{onClick:()=>b("all"),variant:"secondary",disabled:g,className:"flex items-center space-x-2",children:g?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(fx,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(P,{title:" ",value:((A=t==null?void 0:t.users)==null?void 0:A.total)||0,icon:Cr,color:"blue",subtitle:`${((k=t==null?void 0:t.users)==null?void 0:k.active)||0} `}),a.jsx(P,{title:"",value:((F=t==null?void 0:t.content)==null?void 0:F.totalLessons)||0,icon:Ws,color:"green",subtitle:`${((L=t==null?void 0:t.content)==null?void 0:L.totalSlides)||0} `}),a.jsx(P,{title:"",value:((I=t==null?void 0:t.sessions)==null?void 0:I.total)||0,icon:Sn,color:"purple",subtitle:`${((N=t==null?void 0:t.sessions)==null?void 0:N.active)||0} `}),a.jsx(P,{title:" ",value:((T=t==null?void 0:t.activities)==null?void 0:T.totalToday)||0,icon:bo,color:"orange",subtitle:" "})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(v0,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"  "}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-white font-semibold",children:[((R=t==null?void 0:t.users)==null?void 0:R.growthRate)||0,"%"]}),((B=t==null?void 0:t.users)==null?void 0:B.growthRate)>0?a.jsx(T3,{className:"w-4 h-4 text-green-400"}):a.jsx(xB,{className:"w-4 h-4 text-red-400"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"  "}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-white font-semibold",children:[((z=t==null?void 0:t.sessions)==null?void 0:z.completionRate)||0,"%"]}),a.jsx(Qt,{className:"w-4 h-4 text-green-400"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"  "}),a.jsx("span",{className:"text-white font-semibold",children:((O=t==null?void 0:t.users)==null?void 0:O.newThisWeek)||0})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"  "}),a.jsx("span",{className:"text-white font-semibold",children:((D=t==null?void 0:t.content)==null?void 0:D.averageSlidesPerLesson)||0})]})]})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Qn,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"  "}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-red-400 font-semibold",children:((ie=s==null?void 0:s.security)==null?void 0:ie.criticalCount)||0}),a.jsx(vs,{className:"w-4 h-4 text-red-400"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:" "}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-yellow-400 font-semibold",children:((Z=s==null?void 0:s.security)==null?void 0:Z.warningCount)||0}),a.jsx(vs,{className:"w-4 h-4 text-yellow-400"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:" "}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`font-semibold ${((ne=t==null?void 0:t.system)==null?void 0:ne.overall)==="healthy"?"text-green-400":"text-yellow-400"}`,children:((H=t==null?void 0:t.system)==null?void 0:H.overall)==="healthy"?"":""}),a.jsx(Qt,{className:"w-4 h-4 text-green-400"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:" "}),a.jsx("span",{className:"text-white font-semibold",children:((Q=s==null?void 0:s.sessions)==null?void 0:Q.count)||0})]})]})]})})]}),r&&a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(Cr,{className:"w-5 h-5"}),a.jsxs("span",{children:["  - ",u==="24h"?"24 ":u==="7d"?"7 ":"30 "]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-400",children:r.users.new}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-400",children:r.activities.total}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-400",children:r.users.byRole.students+r.users.byRole.teachers}),a.jsx("div",{className:"text-sm text-gray-300",children:" "})]})]}),f&&a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-700",children:[a.jsx("h4",{className:"text-md font-semibold text-white mb-3",children:" "}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(r.activities.byType).map(([U,M])=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg",children:[a.jsx("span",{className:"text-gray-300 capitalize",children:U.replace("_"," ")}),a.jsx("span",{className:"text-white font-semibold",children:M})]},U))})]}),a.jsx("div",{className:"mt-4 text-center",children:a.jsx(ut,{onClick:()=>p(!f),variant:"secondary",size:"sm",className:"flex items-center space-x-2 mx-auto",children:f?a.jsxs(a.Fragment,{children:[a.jsx(I2,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]}):a.jsxs(a.Fragment,{children:[a.jsx(Da,{className:"w-4 h-4"}),a.jsx("span",{children:" "})]})})})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(bo,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"space-y-3",children:(ae=(q=t==null?void 0:t.activities)==null?void 0:q.recent)==null?void 0:ae.slice(0,10).map(U=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${U.type==="error"?"bg-red-400":U.type==="warning"?"bg-yellow-400":U.type==="success"?"bg-green-400":"bg-blue-400"}`}),a.jsx("span",{className:"text-sm text-gray-300",children:U.message})]}),a.jsx("span",{className:"text-xs text-gray-400",children:U.timestamp.toLocaleTimeString("he-IL")})]},U.id))})]})})]})},rie=t=>{const e={blue:"border-blue-500 text-blue-500 hover:bg-blue-500/10",green:"border-green-500 text-green-500 hover:bg-green-500/10",purple:"border-purple-500 text-purple-500 hover:bg-purple-500/10",orange:"border-orange-500 text-orange-500 hover:bg-orange-500/10",gray:"border-gray-500 text-gray-500 hover:bg-gray-500/10",red:"border-red-500 text-red-500 hover:bg-red-500/10"};return e[t]||e.blue},nie=t=>{const e={info:"text-blue-400",warning:"text-yellow-400",error:"text-red-400",success:"text-green-400"};return e[t]||e.info},wj=({stats:t,recentActivities:e,onRefresh:r,isRefreshing:n=!1})=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:" "}),a.jsx("div",{className:"flex space-x-2",children:a.jsx(ut,{variant:"secondary",size:"sm",onClick:r,disabled:n,className:"flex items-center space-x-2",children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Cs,{className:"w-4 h-4"}),a.jsx("span",{children:""})]})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Cr,{className:"w-8 h-8 mx-auto mb-2 text-blue-400"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalUsers}),a.jsx("div",{className:"text-sm text-gray-300",children:'" '})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx(sg,{className:"w-8 h-8 mx-auto mb-2 text-green-400"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalStudents}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Qn,{className:"w-8 h-8 mx-auto mb-2 text-purple-400"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalTeachers}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]})}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ws,{className:"w-8 h-8 mx-auto mb-2 text-orange-400"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:t.totalLessons}),a.jsx("div",{className:"text-sm text-gray-300",children:""})]})})]}),a.jsx(rt,{variant:"dark",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[a.jsx(bo,{className:"w-5 h-5"}),a.jsx("span",{children:" "})]}),a.jsx("div",{className:"space-y-3",children:e.map(s=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${s.severity==="warning"?"bg-yellow-400":s.severity==="error"?"bg-red-400":s.severity==="success"?"bg-green-400":"bg-blue-400"}`}),a.jsx("span",{className:`text-sm ${nie(s.severity)}`,children:s.message})]}),a.jsx("span",{className:"text-xs text-gray-400",children:new Date(s.timestamp).toLocaleTimeString("he-IL")})]},s.id))})]})})]}),sie=()=>{const t=Zn(),{currentUser:e,loading:r,role:n}=La(),[s,i]=S.useState("overview"),[o,l]=S.useState(!0),[u,h]=S.useState(!1),[f,p]=S.useState({totalUsers:0,totalStudents:0,totalTeachers:0,totalLessons:0}),[g,y]=S.useState([]),[w,b]=S.useState(null),_=[{id:"overview",label:" ",icon:bo,description:"    ",color:"blue"},{id:"analytics",label:"",icon:v0,description:"  ",color:"indigo"},{id:"users",label:" ",icon:Cr,description:",     ",color:"green"},{id:"content",label:" ",icon:_l,description:" ,  ",color:"purple"},{id:"imports",label:" ",icon:B2,description:"   Excel",color:"orange"},{id:"settings",label:" ",icon:_o,description:"   ",color:"gray"},{id:"logs",label:"",icon:hx,description:"  ",color:"red"}];S.useEffect(()=>{r||(async()=>{try{if(console.log(" Checking system manager access...",{currentUser:!!e,authLoading:r,role:n}),r){console.log(" Auth still loading...");return}if(!e){console.log(" No user found, redirecting to login"),Ie.error("      "),t("/login");return}if(n!=="system_manager"){console.log(" User is not a system manager, role:",n),Ie.error("      "),t("/login");return}console.log(" System manager access granted!"),await Wr("system_manager_dashboard_access",{userId:e.uid,role:n,timestamp:new Date().toISOString()}),l(!0),await P(),l(!1)}catch(I){console.error(" Access check or stats load error:",I),Ie.error("      "),t("/login")}})()},[e,n,r,t]),S.useEffect(()=>{if(e&&n==="system_manager"){console.log(" Setting up real-time system monitoring...");const L=Oq(I=>{if(console.log(" Real-time system update received:",I),I.type==="security_events"&&I.data.length>0){const N=I.data.slice(0,3).map(T=>({id:T.id,type:T.severity||"info",message:T.description||T.event,timestamp:T.timestamp,severity:T.severity||"info"}));y(T=>[...N,...T].slice(0,5))}});return()=>{console.log(" Cleaning up real-time monitoring..."),L()}}},[e,n]);const P=async(L=!1)=>{try{L&&h(!0),console.log(" Loading comprehensive system statistics...");const I=await k6(L);p({totalUsers:I.users.total,totalStudents:I.users.students,totalTeachers:I.users.teachers,totalLessons:I.content.totalLessons});const N=I.activities.recent.map(T=>({id:T.id,type:T.type,message:T.message,timestamp:T.timestamp,severity:T.type==="error"?"error":T.type==="warning"?"warning":T.type==="success"?"success":"info"}));y(N.slice(0,5)),console.log(" Comprehensive system statistics loaded successfully"),L&&Ie.success("  ")}catch(I){console.error(" Error loading system stats:",I),Ie.error("    "),p({totalUsers:0,totalStudents:0,totalTeachers:0,totalLessons:0})}finally{L&&h(!1)}},A=()=>{P(!0)},k=L=>{i(L)},F=()=>{switch(s){case"overview":return a.jsx(wj,{stats:f,recentActivities:g,onRefresh:A,isRefreshing:u});case"analytics":return a.jsx(tie,{});case"users":return a.jsx(T6,{});case"content":return a.jsx(Zq,{});case"imports":return a.jsx(KP,{});case"settings":return a.jsx(XP,{});case"logs":return a.jsx(YP,{});default:return a.jsx(wj,{stats:f,recentActivities:g,onRefresh:A,isRefreshing:u})}};return o?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx(Jn,{size:"lg"})}):a.jsx($2,{children:a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:a.jsxs("div",{className:"flex h-screen",children:[a.jsx("div",{className:"w-64 bg-gray-800/50 border-r border-gray-700 p-4",children:a.jsx("div",{className:"space-y-2",children:_.map(L=>a.jsxs("button",{onClick:()=>k(L.id),className:`w-full flex items-center space-x-3 p-3 rounded-lg transition-all duration-200 ${s===L.id?"bg-blue-600 text-white shadow-lg":`border border-transparent ${rie(L.color)}`}`,children:[a.jsx(L.icon,{className:"w-5 h-5"}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"font-medium",children:L.label}),a.jsx("div",{className:"text-xs opacity-75",children:L.description})]})]},L.id))})}),a.jsx("div",{className:"flex-1 overflow-auto",children:a.jsx("div",{className:"p-6",children:a.jsx(vn,{mode:"wait",children:a.jsx(Ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:F()},s)})})})]})})})},aie=()=>{const t=Zn(),{currentUser:e,logout:r}=La(),n=async()=>{try{await r(),t("/login")}catch(s){console.error("Logout error:",s)}};return a.jsx("nav",{className:"bg-gray-800/50 border-b border-gray-700 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Qn,{className:"w-8 h-8 text-blue-400"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-white",children:" "}),a.jsx("p",{className:"text-gray-300 text-sm",children:(e==null?void 0:e.displayName)||(e==null?void 0:e.email)})]})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(ut,{onClick:()=>t("/system-manager/settings"),variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(_o,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsxs(ut,{onClick:()=>t("/system-manager/profile"),variant:"secondary",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(Di,{className:"w-4 h-4"}),a.jsx("span",{children:""})]}),a.jsxs(ut,{onClick:n,variant:"danger",size:"sm",className:"flex items-center space-x-2",children:[a.jsx(R3,{className:"w-4 h-4"}),a.jsx("span",{children:""})]})]})]})})},iie=({children:t,requiredRole:e=null})=>{const{currentUser:r,loading:n,role:s}=La();return n?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):r?e&&s!==e?a.jsx(Xr,{to:"/",replace:!0}):a.jsx(a.Fragment,{children:t}):a.jsx(Xr,{to:"/login",replace:!0})},eo=({children:t})=>{const{currentUser:e,loading:r,role:n}=La();return r?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e?n!=="teacher"?n==="system_manager"?a.jsx(Xr,{to:"/system-manager/dashboard",replace:!0}):a.jsx(Xr,{to:"/student/roadmap",replace:!0}):a.jsx(a.Fragment,{children:t}):a.jsx(Xr,{to:"/login",replace:!0})},Vh=({children:t})=>{const{currentUser:e,loading:r,role:n}=La();return r?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e?n!=="student"?n==="system_manager"?a.jsx(Xr,{to:"/system-manager/dashboard",replace:!0}):n==="teacher"?a.jsx(Xr,{to:"/teacher/dashboard",replace:!0}):a.jsx(Xr,{to:"/student/roadmap",replace:!0}):a.jsx(a.Fragment,{children:t}):a.jsx(Xr,{to:"/login",replace:!0})},Wu=({children:t})=>{const{currentUser:e,loading:r,role:n}=La();return r?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e?n!=="system_manager"?n==="teacher"?a.jsx(Xr,{to:"/teacher/dashboard",replace:!0}):a.jsx(Xr,{to:"/student/roadmap",replace:!0}):a.jsx(a.Fragment,{children:t}):a.jsx(Xr,{to:"/login",replace:!0})},oie=()=>{const{currentUser:t,role:e}=La(),r=S.useMemo(()=>t?e==="system_manager"?a.jsx(Xr,{to:"/system-manager/dashboard",replace:!0}):e==="teacher"?a.jsx(Xr,{to:"/teacher/dashboard",replace:!0}):a.jsx(Xr,{to:"/student/roadmap",replace:!0}):a.jsx(CW,{}),[t,e]),n=S.useMemo(()=>t?e==="system_manager"?a.jsx(Xr,{to:"/system-manager/dashboard",replace:!0}):e==="teacher"?a.jsx(Xr,{to:"/teacher/dashboard",replace:!0}):a.jsx(Xr,{to:"/student/roadmap",replace:!0}):a.jsx(Xr,{to:"/login",replace:!0}),[t,e]);return a.jsx(cF,{children:a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black",children:[t&&e==="student"&&a.jsx(S0,{}),t&&(e==="teacher"||e==="student")&&a.jsx(kb,{position:"top-right"}),t&&e==="student"&&a.jsx(MW,{}),t&&e==="teacher"&&a.jsx(jq,{}),t&&e==="system_manager"&&a.jsx(aie,{}),a.jsxs(rF,{children:[a.jsx(jr,{path:"/",element:n}),a.jsx(jr,{path:"/login",element:r}),a.jsx(jr,{path:"/student",element:a.jsx(iie,{children:a.jsx(Xr,{to:"/student/roadmap",replace:!0})})}),a.jsx(jr,{path:"/student/roadmap",element:a.jsx(Vh,{children:a.jsx(rq,{})})}),a.jsx(jr,{path:"/student/lesson/:lessonId",element:a.jsx(Vh,{children:a.jsx(Sq,{})})}),a.jsx(jr,{path:"/student/session/:sessionId",element:a.jsx(Vh,{children:a.jsx(Rq,{})})}),a.jsx(jr,{path:"/student/profile",element:a.jsx(Vh,{children:a.jsx(KT,{})})}),a.jsx(jr,{path:"/student/dashboard",element:a.jsx(Vh,{children:a.jsx(Tq,{})})}),a.jsx(jr,{path:"/teacher/dashboard",element:a.jsx(eo,{children:a.jsx(Aq,{})})}),a.jsx(jr,{path:"/teacher/session/create",element:a.jsx(eo,{children:a.jsx(Iq,{})})}),a.jsx(jr,{path:"/teacher/session/:sessionId",element:a.jsx(eo,{children:a.jsx(Cq,{})})}),a.jsx(jr,{path:"/teacher/controller/:sessionId",element:a.jsx(eo,{children:a.jsx(Pq,{})})}),a.jsx(jr,{path:"/teacher/slides",element:a.jsx(eo,{children:a.jsx(N6,{})})}),a.jsx(jr,{path:"/teacher/profile",element:a.jsx(eo,{children:a.jsx(KT,{})})}),a.jsx(jr,{path:"/teacher/real-analytics",element:a.jsx(eo,{children:a.jsx(S6,{})})}),a.jsx(jr,{path:"/teacher/classroom-interface",element:a.jsx(eo,{children:a.jsx(E6,{})})}),a.jsx(jr,{path:"/teacher/student-pool",element:a.jsx(eo,{children:a.jsx(_6,{})})}),a.jsx(jr,{path:"/system-manager",element:a.jsx(Wu,{children:a.jsx(Xr,{to:"/system-manager/dashboard",replace:!0})})}),a.jsx(jr,{path:"/system-manager/dashboard",element:a.jsx(Wu,{children:a.jsx(sie,{})})}),a.jsx(jr,{path:"/system-manager/users",element:a.jsx(Wu,{children:a.jsx(T6,{})})}),a.jsx(jr,{path:"/system-manager/imports",element:a.jsx(Wu,{children:a.jsx(KP,{})})}),a.jsx(jr,{path:"/system-manager/settings",element:a.jsx(Wu,{children:a.jsx(XP,{})})}),a.jsx(jr,{path:"/system-manager/logs",element:a.jsx(Wu,{children:a.jsx(YP,{})})}),a.jsx(jr,{path:"*",element:a.jsx(Xr,{to:"/",replace:!0})})]}),a.jsx(r8,{position:"top-center",reverseOrder:!1,gutter:8,containerClassName:"",containerStyle:{},toastOptions:{className:"",duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#4ade80",secondary:"#fff"}},error:{duration:4e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})},lie=()=>a.jsx($2,{children:a.jsx(fB,{children:a.jsx(oie,{})})});uD.createRoot(document.getElementById("root")).render(a.jsx(lie,{}));
